"use strict";(self.webpackChunkshell=self.webpackChunkshell||[]).push([[659],{9659(N,p,r){r.d(p,{HealthCheckPage:()=>S});var o=r(375),u=r(9769),f=r(3794),h=r(8438),m=r(6354),g=r(9437),v=r(7673);let x=(()=>{class e{http=(0,o.WQX)(f.Qq);services=(0,o.vPA)([]);constructor(){this.initializeServices()}initializeServices(){const a=h.c.api,n=Object.keys(a).map(s=>({name:s,url:a[s],status:"CHECKING"}));this.services.set(n)}checkAll(){const a=this.services();this.services.update(n=>n.map(s=>({...s,status:"CHECKING",error:void 0,latency:void 0}))),a.forEach(n=>{this.checkService(n)})}checkService(a){const n=Date.now();this.http.get(`${a.url}/health`,{responseType:"text"}).pipe((0,m.T)(()=>{const c=Date.now()-n;this.updateStatus(a.name,"ONLINE",c)}),(0,g.W)(c=>{const l=Date.now()-n;return this.updateStatus(a.name,"OFFLINE",l,c.message||"Connection failed"),(0,v.of)(null)})).subscribe()}updateStatus(a,n,s,c){this.services.update(l=>l.map(d=>d.name===a?{...d,status:n,latency:s,error:c}:d))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=o.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var t=r(5547);function F(e,i){1&e&&(t.j41(0,"span",12),t.EFF(1,"ONLINE"),t.k0s())}function b(e,i){1&e&&(t.j41(0,"span",13),t.EFF(1,"OFFLINE"),t.k0s())}function C(e,i){1&e&&(t.j41(0,"span",14),t.EFF(1,"CHECKING..."),t.k0s())}function k(e,i){if(1&e&&(t.j41(0,"span",15),t.EFF(1),t.k0s()),2&e){const a=t.XpG();t.R7$(),t.SpI("",a.status.latency,"ms")}}function y(e,i){if(1&e&&(t.j41(0,"div",16),t.EFF(1),t.k0s()),2&e){const a=t.XpG();t.Y8G("title",t.mNQ(a.status.error)),t.R7$(),t.SpI(" ",a.status.error," ")}}let E=(()=>{class e{status;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=t.VBU({type:e,selectors:[["app-service-status-card"]],inputs:{status:"status"},decls:15,vars:17,consts:[[1,"p-4","rounded-lg","border","shadow-sm","transition-all","duration-300"],[1,"flex","justify-between","items-start"],[1,"font-bold","text-gray-700"],[1,"text-xs","text-gray-500","break-all","mt-1"],[1,"status-indicator"],["class","px-2 py-1 rounded bg-green-200 text-green-800 text-xs font-bold",4,"ngIf"],["class","px-2 py-1 rounded bg-red-200 text-red-800 text-xs font-bold",4,"ngIf"],["class","px-2 py-1 rounded bg-gray-200 text-gray-800 text-xs font-bold animate-pulse",4,"ngIf"],[1,"mt-4","flex","justify-between","items-end"],[1,"text-sm"],["class","font-mono text-gray-600",4,"ngIf"],["class","text-xs text-red-500 max-w-[200px] truncate",3,"title",4,"ngIf"],[1,"px-2","py-1","rounded","bg-green-200","text-green-800","text-xs","font-bold"],[1,"px-2","py-1","rounded","bg-red-200","text-red-800","text-xs","font-bold"],[1,"px-2","py-1","rounded","bg-gray-200","text-gray-800","text-xs","font-bold","animate-pulse"],[1,"font-mono","text-gray-600"],[1,"text-xs","text-red-500","max-w-[200px]","truncate",3,"title"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div")(3,"h3",2),t.EFF(4),t.k0s(),t.j41(5,"div",3),t.EFF(6),t.k0s()(),t.j41(7,"div",4),t.DNE(8,F,2,0,"span",5)(9,b,2,0,"span",6)(10,C,2,0,"span",7),t.k0s()(),t.j41(11,"div",8)(12,"div",9),t.DNE(13,k,2,1,"span",10),t.k0s(),t.DNE(14,y,2,3,"div",11),t.k0s()()),2&n&&(t.AVh("bg-green-50","ONLINE"===s.status.status)("border-green-200","ONLINE"===s.status.status)("bg-red-50","OFFLINE"===s.status.status)("border-red-200","OFFLINE"===s.status.status)("bg-gray-50","CHECKING"===s.status.status),t.R7$(4),t.JRh(s.status.name),t.R7$(2),t.JRh(s.status.url),t.R7$(2),t.Y8G("ngIf","ONLINE"===s.status.status),t.R7$(),t.Y8G("ngIf","OFFLINE"===s.status.status),t.R7$(),t.Y8G("ngIf","CHECKING"===s.status.status),t.R7$(3),t.Y8G("ngIf",s.status.latency),t.R7$(),t.Y8G("ngIf",s.status.error))},dependencies:[u.MD,u.bT],encapsulation:2})}return e})();function I(e,i){1&e&&t.nrm(0,"app-service-status-card",7),2&e&&t.Y8G("status",i.$implicit)}let S=(()=>{class e{healthService=(0,o.WQX)(x);ngOnInit(){this.refresh()}refresh(){this.healthService.checkAll()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=t.VBU({type:e,selectors:[["app-health-check-page"]],decls:10,vars:1,consts:[[1,"p-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold"],[1,"bg-blue-600","text-white","px-4","py-2","rounded","hover:bg-blue-700","transition","flex","items-center","gap-2",3,"click"],[1,"material-icons-outlined","text-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[3,"status",4,"ngFor","ngForOf"],[3,"status"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3,"System Health Check"),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return s.refresh()}),t.j41(5,"span",4),t.EFF(6,"refresh"),t.k0s(),t.EFF(7," Refresh Status "),t.k0s()(),t.j41(8,"div",5),t.DNE(9,I,1,1,"app-service-status-card",6),t.k0s()()),2&n&&(t.R7$(9),t.Y8G("ngForOf",s.healthService.services()))},dependencies:[u.MD,u.Sq,E],encapsulation:2})}return e})()}}]);