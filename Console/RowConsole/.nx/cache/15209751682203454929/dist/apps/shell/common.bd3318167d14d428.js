"use strict";(self.webpackChunkshell=self.webpackChunkshell||[]).push([[76],{4809(b,r,i){i.d(r,{k:()=>p});var o=i(467),a=i(5754),n=i(375);let l=(()=>{class e{tables=(0,n.vPA)([]);setTables(t){this.tables.set(t)}static \u0275fac=function(s){return new(s||e)};static \u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),c=(()=>{class e{endpoints=(0,n.vPA)([]);setEndpoints(t){this.endpoints.set(t)}static \u0275fac=function(s){return new(s||e)};static \u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),p=(()=>{class e{tableRepo;tableStore;apiRepo;apiStore;syncLogRepo;syncManager;tables;endpoints;constructor(t,s,d,u,h,g){this.tableRepo=t,this.tableStore=s,this.apiRepo=d,this.apiStore=u,this.syncLogRepo=h,this.syncManager=g,this.tables=this.tableStore.tables,this.endpoints=this.apiStore.endpoints}loadAll(){this.ensureDefaults().then(()=>{this.tableRepo.getAll().subscribe(t=>this.tableStore.setTables(t)),this.apiRepo.getAll().subscribe(t=>this.apiStore.setEndpoints(t))})}ensureDefaults(){var t=this;return(0,o.A)(function*(){(yield t.apiRepo.db.table("ApiConfiguration").get("SMART_TABLE"))||(yield t.apiRepo.put({API_CODE:"SMART_TABLE",Api_End_point:"https://localhost:7232",method:"GET"}))})()}addTable(t){var s=this;return(0,o.A)(function*(){yield s.tableRepo.addOrUpdate(t),s.loadAll()})()}deleteTable(t){var s=this;return(0,o.A)(function*(){yield s.tableRepo.delete(t),s.loadAll()})()}saveApiConfig(t){var s=this;return(0,o.A)(function*(){yield s.apiRepo.put(t),s.loadAll()})()}getPendingLogs(){return this.syncLogRepo.getPendingLogs()}getAllLogs(){var t=this;return(0,o.A)(function*(){return t.syncLogRepo.db.SyncLog.reverse().toArray()})()}retrySync(){var t=this;return(0,o.A)(function*(){yield t.syncManager.processQueue()})()}clearCompletedLogs(){var t=this;return(0,o.A)(function*(){yield t.syncLogRepo.clearCompleted()})()}static \u0275fac=function(s){return new(s||e)(n.KVO(a.jv),n.KVO(l),n.KVO(a.Wx),n.KVO(c),n.KVO(a.yM),n.KVO(a.o7))};static \u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()}}]);