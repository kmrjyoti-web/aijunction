import{$a as _e,A as Is,Ab as Pc,Bb as mv,C as Dc,Ca as At,Da as Op,E as av,Ea as Nn,Eb as Hp,F as kc,Fa as yr,G as sv,Ha as dv,Ka as fv,Kb as hv,L as lv,La as Ga,Lb as Vc,M as Ic,Ma as fe,Mb as Fs,N as Mc,Na as pe,Nb as kt,Oa as Qo,Ob as no,P as Yo,Pa as an,Q as dt,Qa as nt,R as Lp,Ra as it,Rb as gv,Sa as Je,Sb as vv,T as vo,Ta as z,Tb as Up,U as hi,Ua as G,Ub as yv,V as ze,Va as Ie,Wa as ne,Wb as Lc,Xa as oe,Ya as at,Z as ee,Za as Ne,_ as te,_a as Ft,a as Rt,ab as Ye,b as rn,ba as uv,bb as I,c as tv,cb as Fc,d as nv,da as Ua,db as Nc,e as Ut,eb as bi,f as Ko,fb as ri,gb as Ze,ha as we,hb as qt,ia as Zt,ib as J,j as ks,ja as Xo,jb as Ue,k as iv,ka as Bp,kb as Jt,la as za,lb as Rc,m as $i,mb as Zo,n as Ki,na as Mr,nb as jo,o as rv,oa as Ms,ob as Mi,pb as ea,qa as Ji,qb as ta,r as nu,ra as Fr,rb as pv,s as Jo,sb as oi,ta as L,tb as ru,ub as or,va as cv,wa as iu,wb as ct,xa as Fn,y as ov,yb as ht,zb as be}from"./chunk-7NWUPHBU.js";var Mu=Ut((Ph,Vh)=>{(function(n,e){typeof Ph=="object"&&typeof Vh<"u"?Vh.exports=e():typeof define=="function"&&define.amd?define(e):(n=n||self,n.CodeMirror=e())})(Ph,function(){"use strict";var n=navigator.userAgent,e=navigator.platform,t=/gecko\/\d/i.test(n),i=/MSIE \d/.test(n),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n),s=/Edge\/(\d+)/.exec(n),c=i||o||s,f=c&&(i?document.documentMode||6:+(s||o)[1]),m=!s&&/WebKit\//.test(n),v=m&&/Qt\/\d+\.\d+/.test(n),g=!s&&/Chrome\/(\d+)/.exec(n),b=g&&+g[1],C=/Opera\//.test(n),A=/Apple Computer/.test(navigator.vendor),F=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(n),R=/PhantomJS/.test(n),B=A&&(/Mobile\/\w+/.test(n)||navigator.maxTouchPoints>2),N=/Android/.test(n),O=B||N||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(n),q=B||/Mac/.test(e),X=/\bCrOS\b/.test(n),j=/win/i.test(e),ie=C&&n.match(/Version\/(\d*\.\d*)/);ie&&(ie=Number(ie[1])),ie&&ie>=15&&(C=!1,m=!0);var he=q&&(v||C&&(ie==null||ie<12.11)),ve=t||c&&f>=9;function me(r){return new RegExp("(^|\\s)"+r+"(?:$|\\s)\\s*")}var Te=function(r,a){var u=r.className,l=me(a).exec(u);if(l){var d=u.slice(l.index+l[0].length);r.className=u.slice(0,l.index)+(d?l[1]+d:"")}};function $(r){for(var a=r.childNodes.length;a>0;--a)r.removeChild(r.firstChild);return r}function le(r,a){return $(r).appendChild(a)}function H(r,a,u,l){var d=document.createElement(r);if(u&&(d.className=u),l&&(d.style.cssText=l),typeof a=="string")d.appendChild(document.createTextNode(a));else if(a)for(var x=0;x<a.length;++x)d.appendChild(a[x]);return d}function De(r,a,u,l){var d=H(r,a,u,l);return d.setAttribute("role","presentation"),d}var pt;document.createRange?pt=function(r,a,u,l){var d=document.createRange();return d.setEnd(l||r,u),d.setStart(r,a),d}:pt=function(r,a,u){var l=document.body.createTextRange();try{l.moveToElementText(r.parentNode)}catch{return l}return l.collapse(!0),l.moveEnd("character",u),l.moveStart("character",a),l};function Xe(r,a){if(a.nodeType==3&&(a=a.parentNode),r.contains)return r.contains(a);do if(a.nodeType==11&&(a=a.host),a==r)return!0;while(a=a.parentNode)}function ft(r){var a=r.ownerDocument||r,u;try{u=r.activeElement}catch{u=a.body||null}for(;u&&u.shadowRoot&&u.shadowRoot.activeElement;)u=u.shadowRoot.activeElement;return u}function yt(r,a){var u=r.className;me(a).test(u)||(r.className+=(u?" ":"")+a)}function xe(r,a){for(var u=r.split(" "),l=0;l<u.length;l++)u[l]&&!me(u[l]).test(a)&&(a+=" "+u[l]);return a}var Oe=function(r){r.select()};B?Oe=function(r){r.selectionStart=0,r.selectionEnd=r.value.length}:c&&(Oe=function(r){try{r.select()}catch{}});function Le(r){return r.display.wrapper.ownerDocument}function Re(r){return Pt(r.display.wrapper)}function Pt(r){return r.getRootNode?r.getRootNode():r.ownerDocument}function st(r){return Le(r).defaultView}function _t(r){var a=Array.prototype.slice.call(arguments,1);return function(){return r.apply(null,a)}}function Qe(r,a,u){a||(a={});for(var l in r)r.hasOwnProperty(l)&&(u!==!1||!a.hasOwnProperty(l))&&(a[l]=r[l]);return a}function zt(r,a,u,l,d){a==null&&(a=r.search(/[^\s\u00a0]/),a==-1&&(a=r.length));for(var x=l||0,S=d||0;;){var T=r.indexOf("	",x);if(T<0||T>=a)return S+(a-x);S+=T-x,S+=u-S%u,x=T+1}}var Gn=function(){this.id=null,this.f=null,this.time=0,this.handler=_t(this.onTimeout,this)};Gn.prototype.onTimeout=function(r){r.id=0,r.time<=+new Date?r.f():setTimeout(r.handler,r.time-+new Date)},Gn.prototype.set=function(r,a){this.f=a;var u=+new Date+r;(!this.id||u<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,r),this.time=u)};function Nt(r,a){for(var u=0;u<r.length;++u)if(r[u]==a)return u;return-1}var un=50,Tn={toString:function(){return"CodeMirror.Pass"}},Xt={scroll:!1},Xn={origin:"*mouse"},gn={origin:"+move"};function An(r,a,u){for(var l=0,d=0;;){var x=r.indexOf("	",l);x==-1&&(x=r.length);var S=x-l;if(x==r.length||d+S>=a)return l+Math.min(S,a-d);if(d+=x-l,d+=u-d%u,l=x+1,d>=a)return l}}var qn=[""];function wr(r){for(;qn.length<=r;)qn.push($e(qn)+" ");return qn[r]}function $e(r){return r[r.length-1]}function Dn(r,a){for(var u=[],l=0;l<r.length;l++)u[l]=a(r[l],l);return u}function Qn(r,a,u){for(var l=0,d=u(a);l<r.length&&u(r[l])<=d;)l++;r.splice(l,0,a)}function Zn(){}function Wt(r,a){var u;return Object.create?u=Object.create(r):(Zn.prototype=r,u=new Zn),a&&Qe(a,u),u}var ar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ri(r){return/\w/.test(r)||r>"\x80"&&(r.toUpperCase()!=r.toLowerCase()||ar.test(r))}function bn(r,a){return a?a.source.indexOf("\\w")>-1&&Ri(r)?!0:a.test(r):Ri(r)}function So(r){for(var a in r)if(r.hasOwnProperty(a)&&r[a])return!1;return!0}var Pi=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function cn(r){return r.charCodeAt(0)>=768&&Pi.test(r)}function si(r,a,u){for(;(u<0?a>0:a<r.length)&&cn(r.charAt(a));)a+=u;return a}function On(r,a,u){for(var l=a>u?-1:1;;){if(a==u)return a;var d=(a+u)/2,x=l<0?Math.ceil(d):Math.floor(d);if(x==a)return r(x)?a:u;r(x)?u=x:a=x+l}}function Pn(r,a,u,l){if(!r)return l(a,u,"ltr",0);for(var d=!1,x=0;x<r.length;++x){var S=r[x];(S.from<u&&S.to>a||a==u&&S.to==a)&&(l(Math.max(S.from,a),Math.min(S.to,u),S.level==1?"rtl":"ltr",x),d=!0)}d||l(a,u,"ltr")}var ji=null;function li(r,a,u){var l;ji=null;for(var d=0;d<r.length;++d){var x=r[d];if(x.from<a&&x.to>a)return d;x.to==a&&(x.from!=x.to&&u=="before"?l=d:ji=d),x.from==a&&(x.from!=x.to&&u!="before"?l=d:ji=d)}return l??ji}var Eo=(function(){var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",a="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function u(M){return M<=247?r.charAt(M):1424<=M&&M<=1524?"R":1536<=M&&M<=1785?a.charAt(M-1536):1774<=M&&M<=2220?"r":8192<=M&&M<=8203?"w":M==8204?"b":"L"}var l=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,x=/[LRr]/,S=/[Lb1n]/,T=/[1n]/;function k(M,K,Z){this.level=M,this.from=K,this.to=Z}return function(M,K){var Z=K=="ltr"?"L":"R";if(M.length==0||K=="ltr"&&!l.test(M))return!1;for(var ce=M.length,ae=[],Ce=0;Ce<ce;++Ce)ae.push(u(M.charCodeAt(Ce)));for(var Fe=0,qe=Z;Fe<ce;++Fe){var et=ae[Fe];et=="m"?ae[Fe]=qe:qe=et}for(var ut=0,tt=Z;ut<ce;++ut){var gt=ae[ut];gt=="1"&&tt=="r"?ae[ut]="n":x.test(gt)&&(tt=gt,gt=="r"&&(ae[ut]="R"))}for(var It=1,Tt=ae[0];It<ce-1;++It){var Ht=ae[It];Ht=="+"&&Tt=="1"&&ae[It+1]=="1"?ae[It]="1":Ht==","&&Tt==ae[It+1]&&(Tt=="1"||Tt=="n")&&(ae[It]=Tt),Tt=Ht}for(var ln=0;ln<ce;++ln){var $n=ae[ln];if($n==",")ae[ln]="N";else if($n=="%"){var _n=void 0;for(_n=ln+1;_n<ce&&ae[_n]=="%";++_n);for(var Wi=ln&&ae[ln-1]=="!"||_n<ce&&ae[_n]=="1"?"1":"N",Di=ln;Di<_n;++Di)ae[Di]=Wi;ln=_n-1}}for(var Ln=0,ki=Z;Ln<ce;++Ln){var ii=ae[Ln];ki=="L"&&ii=="1"?ae[Ln]="L":x.test(ii)&&(ki=ii)}for(var Un=0;Un<ce;++Un)if(d.test(ae[Un])){var Bn=void 0;for(Bn=Un+1;Bn<ce&&d.test(ae[Bn]);++Bn);for(var En=(Un?ae[Un-1]:Z)=="L",Ii=(Bn<ce?ae[Bn]:Z)=="L",As=En==Ii?En?"L":"R":Z,$o=Un;$o<Bn;++$o)ae[$o]=As;Un=Bn-1}for(var mi=[],to,Kn=0;Kn<ce;)if(S.test(ae[Kn])){var Pp=Kn;for(++Kn;Kn<ce&&S.test(ae[Kn]);++Kn);mi.push(new k(0,Pp,Kn))}else{var go=Kn,Oa=mi.length,Ha=K=="rtl"?1:0;for(++Kn;Kn<ce&&ae[Kn]!="L";++Kn);for(var Ci=go;Ci<Kn;)if(T.test(ae[Ci])){go<Ci&&(mi.splice(Oa,0,new k(1,go,Ci)),Oa+=Ha);var Ds=Ci;for(++Ci;Ci<Kn&&T.test(ae[Ci]);++Ci);mi.splice(Oa,0,new k(2,Ds,Ci)),Oa+=Ha,go=Ci}else++Ci;go<Kn&&mi.splice(Oa,0,new k(1,go,Kn))}return K=="ltr"&&(mi[0].level==1&&(to=M.match(/^\s+/))&&(mi[0].from=to[0].length,mi.unshift(new k(0,0,to[0].length))),$e(mi).level==1&&(to=M.match(/\s+$/))&&($e(mi).to-=to[0].length,mi.push(new k(0,ce-to[0].length,ce)))),K=="rtl"?mi.reverse():mi}})();function Lt(r,a){var u=r.order;return u==null&&(u=r.order=Eo(r.text,a)),u}var Or=[],St=function(r,a,u){if(r.addEventListener)r.addEventListener(a,u,!1);else if(r.attachEvent)r.attachEvent("on"+a,u);else{var l=r._handlers||(r._handlers={});l[a]=(l[a]||Or).concat(u)}};function Vi(r,a){return r._handlers&&r._handlers[a]||Or}function Vn(r,a,u){if(r.removeEventListener)r.removeEventListener(a,u,!1);else if(r.detachEvent)r.detachEvent("on"+a,u);else{var l=r._handlers,d=l&&l[a];if(d){var x=Nt(d,u);x>-1&&(l[a]=d.slice(0,x).concat(d.slice(x+1)))}}}function Qt(r,a){var u=Vi(r,a);if(u.length)for(var l=Array.prototype.slice.call(arguments,2),d=0;d<u.length;++d)u[d].apply(null,l)}function on(r,a,u){return typeof a=="string"&&(a={type:a,preventDefault:function(){this.defaultPrevented=!0}}),Qt(r,u||a.type,r,a),wn(a)||a.codemirrorIgnore}function yi(r){var a=r._handlers&&r._handlers.cursorActivity;if(a)for(var u=r.curOp.cursorActivityHandlers||(r.curOp.cursorActivityHandlers=[]),l=0;l<a.length;++l)Nt(u,a[l])==-1&&u.push(a[l])}function kn(r,a){return Vi(r,a).length>0}function jn(r){r.prototype.on=function(a,u){St(this,a,u)},r.prototype.off=function(a,u){Vn(this,a,u)}}function vn(r){r.preventDefault?r.preventDefault():r.returnValue=!1}function _i(r){r.stopPropagation?r.stopPropagation():r.cancelBubble=!0}function wn(r){return r.defaultPrevented!=null?r.defaultPrevented:r.returnValue==!1}function Li(r){vn(r),_i(r)}function ui(r){return r.target||r.srcElement}function rt(r){var a=r.which;return a==null&&(r.button&1?a=1:r.button&2?a=3:r.button&4&&(a=2)),q&&r.ctrlKey&&a==1&&(a=3),a}var ei=(function(){if(c&&f<9)return!1;var r=H("div");return"draggable"in r||"dragDrop"in r})(),ci;function Sr(r){if(ci==null){var a=H("span","\u200B");le(r,H("span",[a,document.createTextNode("x")])),r.firstChild.offsetHeight!=0&&(ci=a.offsetWidth<=1&&a.offsetHeight>2&&!(c&&f<8))}var u=ci?H("span","\u200B"):H("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return u.setAttribute("cm-text",""),u}var lt;function sr(r){if(lt!=null)return lt;var a=le(r,document.createTextNode("A\u062EA")),u=pt(a,0,1).getBoundingClientRect(),l=pt(a,1,2).getBoundingClientRect();return $(r),!u||u.left==u.right?!1:lt=l.right-u.right<3}var Si=`

b`.split(/\n/).length!=3?function(r){for(var a=0,u=[],l=r.length;a<=l;){var d=r.indexOf(`
`,a);d==-1&&(d=r.length);var x=r.slice(a,r.charAt(d-1)=="\r"?d-1:d),S=x.indexOf("\r");S!=-1?(u.push(x.slice(0,S)),a+=S+1):(u.push(x),a=d+1)}return u}:function(r){return r.split(/\r\n?|\n/)},Er=window.getSelection?function(r){try{return r.selectionStart!=r.selectionEnd}catch{return!1}}:function(r){var a;try{a=r.ownerDocument.selection.createRange()}catch{}return!a||a.parentElement()!=r?!1:a.compareEndPoints("StartToEnd",a)!=0},To=(function(){var r=H("div");return"oncopy"in r?!0:(r.setAttribute("oncopy","return;"),typeof r.oncopy=="function")})(),Bi=null;function fa(r){if(Bi!=null)return Bi;var a=le(r,H("span","x")),u=a.getBoundingClientRect(),l=pt(a,0,1).getBoundingClientRect();return Bi=Math.abs(u.left-l.left)>1}var Ao={},er={};function ti(r,a){arguments.length>2&&(a.dependencies=Array.prototype.slice.call(arguments,2)),Ao[r]=a}function Oi(r,a){er[r]=a}function Hr(r){if(typeof r=="string"&&er.hasOwnProperty(r))r=er[r];else if(r&&typeof r.name=="string"&&er.hasOwnProperty(r.name)){var a=er[r.name];typeof a=="string"&&(a={name:a}),r=Wt(a,r),r.name=a.name}else{if(typeof r=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(r))return Hr("application/xml");if(typeof r=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(r))return Hr("application/json")}return typeof r=="string"?{name:r}:r||{name:"null"}}function Do(r,a){a=Hr(a);var u=Ao[a.name];if(!u)return Do(r,"text/plain");var l=u(r,a);if(Ur.hasOwnProperty(a.name)){var d=Ur[a.name];for(var x in d)d.hasOwnProperty(x)&&(l.hasOwnProperty(x)&&(l["_"+x]=l[x]),l[x]=d[x])}if(l.name=a.name,a.helperType&&(l.helperType=a.helperType),a.modeProps)for(var S in a.modeProps)l[S]=a.modeProps[S];return l}var Ur={};function ko(r,a){var u=Ur.hasOwnProperty(r)?Ur[r]:Ur[r]={};Qe(a,u)}function Ei(r,a){if(a===!0)return a;if(r.copyState)return r.copyState(a);var u={};for(var l in a){var d=a[l];d instanceof Array&&(d=d.concat([])),u[l]=d}return u}function tn(r,a){for(var u;r.innerMode&&(u=r.innerMode(a),!(!u||u.mode==r));)a=u.state,r=u.mode;return u||{mode:r,state:a}}function dn(r,a,u){return r.startState?r.startState(a,u):!0}var fn=function(r,a,u){this.pos=this.start=0,this.string=r,this.tabSize=a||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=u};fn.prototype.eol=function(){return this.pos>=this.string.length},fn.prototype.sol=function(){return this.pos==this.lineStart},fn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},fn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},fn.prototype.eat=function(r){var a=this.string.charAt(this.pos),u;if(typeof r=="string"?u=a==r:u=a&&(r.test?r.test(a):r(a)),u)return++this.pos,a},fn.prototype.eatWhile=function(r){for(var a=this.pos;this.eat(r););return this.pos>a},fn.prototype.eatSpace=function(){for(var r=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>r},fn.prototype.skipToEnd=function(){this.pos=this.string.length},fn.prototype.skipTo=function(r){var a=this.string.indexOf(r,this.pos);if(a>-1)return this.pos=a,!0},fn.prototype.backUp=function(r){this.pos-=r},fn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=zt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?zt(this.string,this.lineStart,this.tabSize):0)},fn.prototype.indentation=function(){return zt(this.string,null,this.tabSize)-(this.lineStart?zt(this.string,this.lineStart,this.tabSize):0)},fn.prototype.match=function(r,a,u){if(typeof r=="string"){var l=function(S){return u?S.toLowerCase():S},d=this.string.substr(this.pos,r.length);if(l(d)==l(r))return a!==!1&&(this.pos+=r.length),!0}else{var x=this.string.slice(this.pos).match(r);return x&&x.index>0?null:(x&&a!==!1&&(this.pos+=x[0].length),x)}},fn.prototype.current=function(){return this.string.slice(this.start,this.pos)},fn.prototype.hideFirstChars=function(r,a){this.lineStart+=r;try{return a()}finally{this.lineStart-=r}},fn.prototype.lookAhead=function(r){var a=this.lineOracle;return a&&a.lookAhead(r)},fn.prototype.baseToken=function(){var r=this.lineOracle;return r&&r.baseToken(this.pos)};function bt(r,a){if(a-=r.first,a<0||a>=r.size)throw new Error("There is no line "+(a+r.first)+" in the document.");for(var u=r;!u.lines;)for(var l=0;;++l){var d=u.children[l],x=d.chunkSize();if(a<x){u=d;break}a-=x}return u.lines[a]}function Hi(r,a,u){var l=[],d=a.line;return r.iter(a.line,u.line+1,function(x){var S=x.text;d==u.line&&(S=S.slice(0,u.ch)),d==a.line&&(S=S.slice(a.ch)),l.push(S),++d}),l}function zr(r,a,u){var l=[];return r.iter(a,u,function(d){l.push(d.text)}),l}function Ti(r,a){var u=a-r.height;if(u)for(var l=r;l;l=l.parent)l.height+=u}function V(r){if(r.parent==null)return null;for(var a=r.parent,u=Nt(a.lines,r),l=a.parent;l;a=l,l=l.parent)for(var d=0;l.children[d]!=a;++d)u+=l.children[d].chunkSize();return u+a.first}function Q(r,a){var u=r.first;e:do{for(var l=0;l<r.children.length;++l){var d=r.children[l],x=d.height;if(a<x){r=d;continue e}a-=x,u+=d.chunkSize()}return u}while(!r.lines);for(var S=0;S<r.lines.length;++S){var T=r.lines[S],k=T.height;if(a<k)break;a-=k}return u+S}function Se(r,a){return a>=r.first&&a<r.first+r.size}function He(r,a){return String(r.lineNumberFormatter(a+r.firstLineNumber))}function ye(r,a,u){if(u===void 0&&(u=null),!(this instanceof ye))return new ye(r,a,u);this.line=r,this.ch=a,this.sticky=u}function ot(r,a){return r.line-a.line||r.ch-a.ch}function Gt(r,a){return r.sticky==a.sticky&&ot(r,a)==0}function In(r){return ye(r.line,r.ch)}function Sn(r,a){return ot(r,a)<0?a:r}function oo(r,a){return ot(r,a)<0?r:a}function ns(r,a){return Math.max(r.first,Math.min(a,r.first+r.size-1))}function wt(r,a){if(a.line<r.first)return ye(r.first,0);var u=r.first+r.size-1;return a.line>u?ye(u,bt(r,u).text.length):cl(a,bt(r,a.line).text.length)}function cl(r,a){var u=r.ch;return u==null||u>a?ye(r.line,a):u<0?ye(r.line,0):r}function dl(r,a){for(var u=[],l=0;l<a.length;l++)u[l]=wt(r,a[l]);return u}var lr=function(r,a){this.state=r,this.lookAhead=a},Ui=function(r,a,u,l){this.state=a,this.doc=r,this.line=u,this.maxLookAhead=l||0,this.baseTokens=null,this.baseTokenPos=1};Ui.prototype.lookAhead=function(r){var a=this.doc.getLine(this.line+r);return a!=null&&r>this.maxLookAhead&&(this.maxLookAhead=r),a},Ui.prototype.baseToken=function(r){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=r;)this.baseTokenPos+=2;var a=this.baseTokens[this.baseTokenPos+1];return{type:a&&a.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-r}},Ui.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ui.fromSaved=function(r,a,u){return a instanceof lr?new Ui(r,Ei(r.mode,a.state),u,a.lookAhead):new Ui(r,Ei(r.mode,a),u)},Ui.prototype.save=function(r){var a=r!==!1?Ei(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new lr(a,this.maxLookAhead):a};function ur(r,a,u,l){var d=[r.state.modeGen],x={};ml(r,a.text,r.doc.mode,u,function(M,K){return d.push(M,K)},x,l);for(var S=u.state,T=function(M){u.baseTokens=d;var K=r.state.overlays[M],Z=1,ce=0;u.state=!0,ml(r,a.text,K.mode,u,function(ae,Ce){for(var Fe=Z;ce<ae;){var qe=d[Z];qe>ae&&d.splice(Z,1,ae,d[Z+1],qe),Z+=2,ce=Math.min(ae,qe)}if(Ce)if(K.opaque)d.splice(Fe,Z-Fe,ae,"overlay "+Ce),Z=Fe+2;else for(;Fe<Z;Fe+=2){var et=d[Fe+1];d[Fe+1]=(et?et+" ":"")+"overlay "+Ce}},x),u.state=S,u.baseTokens=null,u.baseTokenPos=1},k=0;k<r.state.overlays.length;++k)T(k);return{styles:d,classes:x.bgClass||x.textClass?x:null}}function fl(r,a,u){if(!a.styles||a.styles[0]!=r.state.modeGen){var l=cr(r,V(a)),d=a.text.length>r.options.maxHighlightLength&&Ei(r.doc.mode,l.state),x=ur(r,a,l);d&&(l.state=d),a.stateAfter=l.save(!d),a.styles=x.styles,x.classes?a.styleClasses=x.classes:a.styleClasses&&(a.styleClasses=null),u===r.doc.highlightFrontier&&(r.doc.modeFrontier=Math.max(r.doc.modeFrontier,++r.doc.highlightFrontier))}return a.styles}function cr(r,a,u){var l=r.doc,d=r.display;if(!l.mode.startState)return new Ui(l,!0,a);var x=$t(r,a,u),S=x>l.first&&bt(l,x-1).stateAfter,T=S?Ui.fromSaved(l,S,x):new Ui(l,dn(l.mode),x);return l.iter(x,a,function(k){Io(r,k.text,T);var M=T.line;k.stateAfter=M==a-1||M%5==0||M>=d.viewFrom&&M<d.viewTo?T.save():null,T.nextLine()}),u&&(l.modeFrontier=T.line),T}function Io(r,a,u,l){var d=r.doc.mode,x=new fn(a,r.options.tabSize,u);for(x.start=x.pos=l||0,a==""&&is(d,u.state);!x.eol();)pa(d,x,u.state),x.start=x.pos}function is(r,a){if(r.blankLine)return r.blankLine(a);if(r.innerMode){var u=tn(r,a);if(u.mode.blankLine)return u.mode.blankLine(u.state)}}function pa(r,a,u,l){for(var d=0;d<10;d++){l&&(l[0]=tn(r,u).mode);var x=r.token(a,u);if(a.pos>a.start)return x}throw new Error("Mode "+r.name+" failed to advance stream.")}var Gr=function(r,a,u){this.start=r.start,this.end=r.pos,this.string=r.current(),this.type=a||null,this.state=u};function pl(r,a,u,l){var d=r.doc,x=d.mode,S;a=wt(d,a);var T=bt(d,a.line),k=cr(r,a.line,u),M=new fn(T.text,r.options.tabSize,k),K;for(l&&(K=[]);(l||M.pos<a.ch)&&!M.eol();)M.start=M.pos,S=pa(x,M,k.state),l&&K.push(new Gr(M,S,Ei(d.mode,k.state)));return l?K:new Gr(M,S,k.state)}function ma(r,a){if(r)for(;;){var u=r.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!u)break;r=r.slice(0,u.index)+r.slice(u.index+u[0].length);var l=u[1]?"bgClass":"textClass";a[l]==null?a[l]=u[2]:new RegExp("(?:^|\\s)"+u[2]+"(?:$|\\s)").test(a[l])||(a[l]+=" "+u[2])}return r}function ml(r,a,u,l,d,x,S){var T=u.flattenSpans;T==null&&(T=r.options.flattenSpans);var k=0,M=null,K=new fn(a,r.options.tabSize,l),Z,ce=r.options.addModeClass&&[null];for(a==""&&ma(is(u,l.state),x);!K.eol();){if(K.pos>r.options.maxHighlightLength?(T=!1,S&&Io(r,a,l,K.pos),K.pos=a.length,Z=null):Z=ma(pa(u,K,l.state,ce),x),ce){var ae=ce[0].name;ae&&(Z="m-"+(Z?ae+" "+Z:ae))}if(!T||M!=Z){for(;k<K.start;)k=Math.min(K.start,k+5e3),d(k,M);M=Z}K.start=K.pos}for(;k<K.pos;){var Ce=Math.min(K.pos,k+5e3);d(Ce,M),k=Ce}}function $t(r,a,u){for(var l,d,x=r.doc,S=u?-1:a-(r.doc.mode.innerMode?1e3:100),T=a;T>S;--T){if(T<=x.first)return x.first;var k=bt(x,T-1),M=k.stateAfter;if(M&&(!u||T+(M instanceof lr?M.lookAhead:0)<=x.modeFrontier))return T;var K=zt(k.text,null,r.options.tabSize);(d==null||l>K)&&(d=T-1,l=K)}return d}function rp(r,a){if(r.modeFrontier=Math.min(r.modeFrontier,a),!(r.highlightFrontier<a-10)){for(var u=r.first,l=a-1;l>u;l--){var d=bt(r,l).stateAfter;if(d&&(!(d instanceof lr)||l+d.lookAhead<a)){u=l+1;break}}r.highlightFrontier=Math.min(r.highlightFrontier,u)}}var Ku=!1,dr=!1;function Ju(){Ku=!0}function rs(){dr=!0}function qr(r,a,u){this.marker=r,this.from=a,this.to=u}function Mo(r,a){if(r)for(var u=0;u<r.length;++u){var l=r[u];if(l.marker==a)return l}}function Yu(r,a){for(var u,l=0;l<r.length;++l)r[l]!=a&&(u||(u=[])).push(r[l]);return u}function ha(r,a,u){var l=u&&window.WeakSet&&(u.markedSpans||(u.markedSpans=new WeakSet));l&&r.markedSpans&&l.has(r.markedSpans)?r.markedSpans.push(a):(r.markedSpans=r.markedSpans?r.markedSpans.concat([a]):[a],l&&l.add(r.markedSpans)),a.marker.attachLine(r)}function ga(r,a,u){var l;if(r)for(var d=0;d<r.length;++d){var x=r[d],S=x.marker,T=x.from==null||(S.inclusiveLeft?x.from<=a:x.from<a);if(T||x.from==a&&S.type=="bookmark"&&(!u||!x.marker.insertLeft)){var k=x.to==null||(S.inclusiveRight?x.to>=a:x.to>a);(l||(l=[])).push(new qr(S,x.from,k?null:x.to))}}return l}function op(r,a,u){var l;if(r)for(var d=0;d<r.length;++d){var x=r[d],S=x.marker,T=x.to==null||(S.inclusiveRight?x.to>=a:x.to>a);if(T||x.from==a&&S.type=="bookmark"&&(!u||x.marker.insertLeft)){var k=x.from==null||(S.inclusiveLeft?x.from<=a:x.from<a);(l||(l=[])).push(new qr(S,k?null:x.from-a,x.to==null?null:x.to-a))}}return l}function Wr(r,a){if(a.full)return null;var u=Se(r,a.from.line)&&bt(r,a.from.line).markedSpans,l=Se(r,a.to.line)&&bt(r,a.to.line).markedSpans;if(!u&&!l)return null;var d=a.from.ch,x=a.to.ch,S=ot(a.from,a.to)==0,T=ga(u,d,S),k=op(l,x,S),M=a.text.length==1,K=$e(a.text).length+(M?d:0);if(T)for(var Z=0;Z<T.length;++Z){var ce=T[Z];if(ce.to==null){var ae=Mo(k,ce.marker);ae?M&&(ce.to=ae.to==null?null:ae.to+K):ce.to=d}}if(k)for(var Ce=0;Ce<k.length;++Ce){var Fe=k[Ce];if(Fe.to!=null&&(Fe.to+=K),Fe.from==null){var qe=Mo(T,Fe.marker);qe||(Fe.from=K,M&&(T||(T=[])).push(Fe))}else Fe.from+=K,M&&(T||(T=[])).push(Fe)}T&&(T=os(T)),k&&k!=T&&(k=os(k));var et=[T];if(!M){var ut=a.text.length-2,tt;if(ut>0&&T)for(var gt=0;gt<T.length;++gt)T[gt].to==null&&(tt||(tt=[])).push(new qr(T[gt].marker,null,null));for(var It=0;It<ut;++It)et.push(tt);et.push(k)}return et}function os(r){for(var a=0;a<r.length;++a){var u=r[a];u.from!=null&&u.from==u.to&&u.marker.clearWhenEmpty!==!1&&r.splice(a--,1)}return r.length?r:null}function hl(r,a,u){var l=null;if(r.iter(a.line,u.line+1,function(ae){if(ae.markedSpans)for(var Ce=0;Ce<ae.markedSpans.length;++Ce){var Fe=ae.markedSpans[Ce].marker;Fe.readOnly&&(!l||Nt(l,Fe)==-1)&&(l||(l=[])).push(Fe)}}),!l)return null;for(var d=[{from:a,to:u}],x=0;x<l.length;++x)for(var S=l[x],T=S.find(0),k=0;k<d.length;++k){var M=d[k];if(!(ot(M.to,T.from)<0||ot(M.from,T.to)>0)){var K=[k,1],Z=ot(M.from,T.from),ce=ot(M.to,T.to);(Z<0||!S.inclusiveLeft&&!Z)&&K.push({from:M.from,to:T.from}),(ce>0||!S.inclusiveRight&&!ce)&&K.push({from:T.to,to:M.to}),d.splice.apply(d,K),k+=K.length-3}}return d}function Xu(r){var a=r.markedSpans;if(a){for(var u=0;u<a.length;++u)a[u].marker.detachLine(r);r.markedSpans=null}}function va(r,a){if(a){for(var u=0;u<a.length;++u)a[u].marker.attachLine(r);r.markedSpans=a}}function ya(r){return r.inclusiveLeft?-1:0}function ao(r){return r.inclusiveRight?1:0}function as(r,a){var u=r.lines.length-a.lines.length;if(u!=0)return u;var l=r.find(),d=a.find(),x=ot(l.from,d.from)||ya(r)-ya(a);if(x)return-x;var S=ot(l.to,d.to)||ao(r)-ao(a);return S||a.id-r.id}function Qu(r,a){var u=dr&&r.markedSpans,l;if(u)for(var d=void 0,x=0;x<u.length;++x)d=u[x],d.marker.collapsed&&(a?d.from:d.to)==null&&(!l||as(l,d.marker)<0)&&(l=d.marker);return l}function gl(r){return Qu(r,!0)}function ss(r){return Qu(r,!1)}function ap(r,a){var u=dr&&r.markedSpans,l;if(u)for(var d=0;d<u.length;++d){var x=u[d];x.marker.collapsed&&(x.from==null||x.from<a)&&(x.to==null||x.to>a)&&(!l||as(l,x.marker)<0)&&(l=x.marker)}return l}function Zu(r,a,u,l,d){var x=bt(r,a),S=dr&&x.markedSpans;if(S)for(var T=0;T<S.length;++T){var k=S[T];if(k.marker.collapsed){var M=k.marker.find(0),K=ot(M.from,u)||ya(k.marker)-ya(d),Z=ot(M.to,l)||ao(k.marker)-ao(d);if(!(K>=0&&Z<=0||K<=0&&Z>=0)&&(K<=0&&(k.marker.inclusiveRight&&d.inclusiveLeft?ot(M.to,u)>=0:ot(M.to,u)>0)||K>=0&&(k.marker.inclusiveRight&&d.inclusiveLeft?ot(M.from,l)<=0:ot(M.from,l)<0)))return!0}}}function pn(r){for(var a;a=gl(r);)r=a.find(-1,!0).line;return r}function Fo(r){for(var a;a=ss(r);)r=a.find(1,!0).line;return r}function sp(r){for(var a,u;a=ss(r);)r=a.find(1,!0).line,(u||(u=[])).push(r);return u}function vl(r,a){var u=bt(r,a),l=pn(u);return u==l?a:V(l)}function ju(r,a){if(a>r.lastLine())return a;var u=bt(r,a),l;if(!tr(r,u))return a;for(;l=ss(u);)u=l.find(1,!0).line;return V(u)+1}function tr(r,a){var u=dr&&a.markedSpans;if(u){for(var l=void 0,d=0;d<u.length;++d)if(l=u[d],!!l.marker.collapsed){if(l.from==null)return!0;if(!l.marker.widgetNode&&l.from==0&&l.marker.inclusiveLeft&&fr(r,a,l))return!0}}}function fr(r,a,u){if(u.to==null){var l=u.marker.find(1,!0);return fr(r,l.line,Mo(l.line.markedSpans,u.marker))}if(u.marker.inclusiveRight&&u.to==a.text.length)return!0;for(var d=void 0,x=0;x<a.markedSpans.length;++x)if(d=a.markedSpans[x],d.marker.collapsed&&!d.marker.widgetNode&&d.from==u.to&&(d.to==null||d.to!=u.from)&&(d.marker.inclusiveLeft||u.marker.inclusiveRight)&&fr(r,a,d))return!0}function pr(r){r=pn(r);for(var a=0,u=r.parent,l=0;l<u.lines.length;++l){var d=u.lines[l];if(d==r)break;a+=d.height}for(var x=u.parent;x;u=x,x=u.parent)for(var S=0;S<x.children.length;++S){var T=x.children[S];if(T==u)break;a+=T.height}return a}function _a(r){if(r.height==0)return 0;for(var a=r.text.length,u,l=r;u=gl(l);){var d=u.find(0,!0);l=d.from.line,a+=d.from.ch-d.to.ch}for(l=r;u=ss(l);){var x=u.find(0,!0);a-=l.text.length-x.from.ch,l=x.to.line,a+=l.text.length-x.to.ch}return a}function yl(r){var a=r.display,u=r.doc;a.maxLine=bt(u,u.first),a.maxLineLength=_a(a.maxLine),a.maxLineChanged=!0,u.iter(function(l){var d=_a(l);d>a.maxLineLength&&(a.maxLineLength=d,a.maxLine=l)})}var di=function(r,a,u){this.text=r,va(this,a),this.height=u?u(this):1};di.prototype.lineNo=function(){return V(this)},jn(di);function xa(r,a,u,l){r.text=a,r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null),r.order!=null&&(r.order=null),Xu(r),va(r,u);var d=l?l(r):1;d!=r.height&&Ti(r,d)}function Ca(r){r.parent=null,Xu(r)}var _l={},$r={};function ec(r,a){if(!r||/^\s*$/.test(r))return null;var u=a.addModeClass?$r:_l;return u[r]||(u[r]=r.replace(/\S+/g,"cm-$&"))}function tc(r,a){var u=De("span",null,null,m?"padding-right: .1px":null),l={pre:De("pre",[u],"CodeMirror-line"),content:u,col:0,pos:0,cm:r,trailingSpace:!1,splitSpaces:r.getOption("lineWrapping")};a.measure={};for(var d=0;d<=(a.rest?a.rest.length:0);d++){var x=d?a.rest[d-1]:a.line,S=void 0;l.pos=0,l.addToken=nc,sr(r.display.measure)&&(S=Lt(x,r.doc.direction))&&(l.addToken=lp(l.addToken,S)),l.map=[];var T=a!=r.display.externalMeasured&&V(x);bl(x,l,fl(r,x,T)),x.styleClasses&&(x.styleClasses.bgClass&&(l.bgClass=xe(x.styleClasses.bgClass,l.bgClass||"")),x.styleClasses.textClass&&(l.textClass=xe(x.styleClasses.textClass,l.textClass||""))),l.map.length==0&&l.map.push(0,0,l.content.appendChild(Sr(r.display.measure))),d==0?(a.measure.map=l.map,a.measure.cache={}):((a.measure.maps||(a.measure.maps=[])).push(l.map),(a.measure.caches||(a.measure.caches=[])).push({}))}if(m){var k=l.content.lastChild;(/\bcm-tab\b/.test(k.className)||k.querySelector&&k.querySelector(".cm-tab"))&&(l.content.className="cm-tab-wrap-hack")}return Qt(r,"renderLine",r,a.line,l.pre),l.pre.className&&(l.textClass=xe(l.pre.className,l.textClass||"")),l}function xl(r){var a=H("span","\u2022","cm-invalidchar");return a.title="\\u"+r.charCodeAt(0).toString(16),a.setAttribute("aria-label",a.title),a}function nc(r,a,u,l,d,x,S){if(a){var T=r.splitSpaces?Cl(a,r.trailingSpace):a,k=r.cm.state.specialChars,M=!1,K;if(!k.test(a))r.col+=a.length,K=document.createTextNode(T),r.map.push(r.pos,r.pos+a.length,K),c&&f<9&&(M=!0),r.pos+=a.length;else{K=document.createDocumentFragment();for(var Z=0;;){k.lastIndex=Z;var ce=k.exec(a),ae=ce?ce.index-Z:a.length-Z;if(ae){var Ce=document.createTextNode(T.slice(Z,Z+ae));c&&f<9?K.appendChild(H("span",[Ce])):K.appendChild(Ce),r.map.push(r.pos,r.pos+ae,Ce),r.col+=ae,r.pos+=ae}if(!ce)break;Z+=ae+1;var Fe=void 0;if(ce[0]=="	"){var qe=r.cm.options.tabSize,et=qe-r.col%qe;Fe=K.appendChild(H("span",wr(et),"cm-tab")),Fe.setAttribute("role","presentation"),Fe.setAttribute("cm-text","	"),r.col+=et}else ce[0]=="\r"||ce[0]==`
`?(Fe=K.appendChild(H("span",ce[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),Fe.setAttribute("cm-text",ce[0]),r.col+=1):(Fe=r.cm.options.specialCharPlaceholder(ce[0]),Fe.setAttribute("cm-text",ce[0]),c&&f<9?K.appendChild(H("span",[Fe])):K.appendChild(Fe),r.col+=1);r.map.push(r.pos,r.pos+1,Fe),r.pos++}}if(r.trailingSpace=T.charCodeAt(a.length-1)==32,u||l||d||M||x||S){var ut=u||"";l&&(ut+=l),d&&(ut+=d);var tt=H("span",[K],ut,x);if(S)for(var gt in S)S.hasOwnProperty(gt)&&gt!="style"&&gt!="class"&&tt.setAttribute(gt,S[gt]);return r.content.appendChild(tt)}r.content.appendChild(K)}}function Cl(r,a){if(r.length>1&&!/  /.test(r))return r;for(var u=a,l="",d=0;d<r.length;d++){var x=r.charAt(d);x==" "&&u&&(d==r.length-1||r.charCodeAt(d+1)==32)&&(x="\xA0"),l+=x,u=x==" "}return l}function lp(r,a){return function(u,l,d,x,S,T,k){d=d?d+" cm-force-border":"cm-force-border";for(var M=u.pos,K=M+l.length;;){for(var Z=void 0,ce=0;ce<a.length&&(Z=a[ce],!(Z.to>M&&Z.from<=M));ce++);if(Z.to>=K)return r(u,l,d,x,S,T,k);r(u,l.slice(0,Z.to-M),d,x,null,T,k),x=null,l=l.slice(Z.to-M),M=Z.to}}}function No(r,a,u,l){var d=!l&&u.widgetNode;d&&r.map.push(r.pos,r.pos+a,d),!l&&r.cm.display.input.needsContentAttribute&&(d||(d=r.content.appendChild(document.createElement("span"))),d.setAttribute("cm-marker",u.id)),d&&(r.cm.display.input.setUneditable(d),r.content.appendChild(d)),r.pos+=a,r.trailingSpace=!1}function bl(r,a,u){var l=r.markedSpans,d=r.text,x=0;if(!l){for(var S=1;S<u.length;S+=2)a.addToken(a,d.slice(x,x=u[S]),ec(u[S+1],a.cm.options));return}for(var T=d.length,k=0,M=1,K="",Z,ce,ae=0,Ce,Fe,qe,et,ut;;){if(ae==k){Ce=Fe=qe=ce="",ut=null,et=null,ae=1/0;for(var tt=[],gt=void 0,It=0;It<l.length;++It){var Tt=l[It],Ht=Tt.marker;if(Ht.type=="bookmark"&&Tt.from==k&&Ht.widgetNode)tt.push(Ht);else if(Tt.from<=k&&(Tt.to==null||Tt.to>k||Ht.collapsed&&Tt.to==k&&Tt.from==k)){if(Tt.to!=null&&Tt.to!=k&&ae>Tt.to&&(ae=Tt.to,Fe=""),Ht.className&&(Ce+=" "+Ht.className),Ht.css&&(ce=(ce?ce+";":"")+Ht.css),Ht.startStyle&&Tt.from==k&&(qe+=" "+Ht.startStyle),Ht.endStyle&&Tt.to==ae&&(gt||(gt=[])).push(Ht.endStyle,Tt.to),Ht.title&&((ut||(ut={})).title=Ht.title),Ht.attributes)for(var ln in Ht.attributes)(ut||(ut={}))[ln]=Ht.attributes[ln];Ht.collapsed&&(!et||as(et.marker,Ht)<0)&&(et=Tt)}else Tt.from>k&&ae>Tt.from&&(ae=Tt.from)}if(gt)for(var $n=0;$n<gt.length;$n+=2)gt[$n+1]==ae&&(Fe+=" "+gt[$n]);if(!et||et.from==k)for(var _n=0;_n<tt.length;++_n)No(a,0,tt[_n]);if(et&&(et.from||0)==k){if(No(a,(et.to==null?T+1:et.to)-k,et.marker,et.from==null),et.to==null)return;et.to==k&&(et=!1)}}if(k>=T)break;for(var Wi=Math.min(T,ae);;){if(K){var Di=k+K.length;if(!et){var Ln=Di>Wi?K.slice(0,Wi-k):K;a.addToken(a,Ln,Z?Z+Ce:Ce,qe,k+Ln.length==ae?Fe:"",ce,ut)}if(Di>=Wi){K=K.slice(Wi-k),k=Wi;break}k=Di,qe=""}K=d.slice(x,x=u[M++]),Z=ec(u[M++],a.cm.options)}}}function ic(r,a,u){this.line=a,this.rest=sp(a),this.size=this.rest?V($e(this.rest))-u+1:1,this.node=this.text=null,this.hidden=tr(r,a)}function ba(r,a,u){for(var l=[],d,x=a;x<u;x=d){var S=new ic(r.doc,bt(r.doc,x),x);d=x+S.size,l.push(S)}return l}var Ro=null;function wa(r){Ro?Ro.ops.push(r):r.ownsGroup=Ro={ops:[r],delayedCallbacks:[]}}function up(r){var a=r.delayedCallbacks,u=0;do{for(;u<a.length;u++)a[u].call(null);for(var l=0;l<r.ops.length;l++){var d=r.ops[l];if(d.cursorActivityHandlers)for(;d.cursorActivityCalled<d.cursorActivityHandlers.length;)d.cursorActivityHandlers[d.cursorActivityCalled++].call(null,d.cm)}}while(u<a.length)}function cp(r,a){var u=r.ownsGroup;if(u)try{up(u)}finally{Ro=null,a(u)}}var Sa=null;function yn(r,a){var u=Vi(r,a);if(u.length){var l=Array.prototype.slice.call(arguments,2),d;Ro?d=Ro.delayedCallbacks:Sa?d=Sa:(d=Sa=[],setTimeout(ls,0));for(var x=function(T){d.push(function(){return u[T].apply(null,l)})},S=0;S<u.length;++S)x(S)}}function ls(){var r=Sa;Sa=null;for(var a=0;a<r.length;++a)r[a]()}function us(r,a,u,l){for(var d=0;d<a.changes.length;d++){var x=a.changes[d];x=="text"?fp(r,a):x=="gutter"?cs(r,a,u,l):x=="class"?wl(r,a):x=="widget"&&Sl(r,a,l)}a.changes=null}function Ea(r){return r.node==r.text&&(r.node=H("div",null,null,"position: relative"),r.text.parentNode&&r.text.parentNode.replaceChild(r.node,r.text),r.node.appendChild(r.text),c&&f<8&&(r.node.style.zIndex=2)),r.node}function dp(r,a){var u=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;if(u&&(u+=" CodeMirror-linebackground"),a.background)u?a.background.className=u:(a.background.parentNode.removeChild(a.background),a.background=null);else if(u){var l=Ea(a);a.background=l.insertBefore(H("div",null,u),l.firstChild),r.display.input.setUneditable(a.background)}}function rc(r,a){var u=r.display.externalMeasured;return u&&u.line==a.line?(r.display.externalMeasured=null,a.measure=u.measure,u.built):tc(r,a)}function fp(r,a){var u=a.text.className,l=rc(r,a);a.text==a.node&&(a.node=l.pre),a.text.parentNode.replaceChild(l.pre,a.text),a.text=l.pre,l.bgClass!=a.bgClass||l.textClass!=a.textClass?(a.bgClass=l.bgClass,a.textClass=l.textClass,wl(r,a)):u&&(a.text.className=u)}function wl(r,a){dp(r,a),a.line.wrapClass?Ea(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");var u=a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass;a.text.className=u||""}function cs(r,a,u,l){if(a.gutter&&(a.node.removeChild(a.gutter),a.gutter=null),a.gutterBackground&&(a.node.removeChild(a.gutterBackground),a.gutterBackground=null),a.line.gutterClass){var d=Ea(a);a.gutterBackground=H("div",null,"CodeMirror-gutter-background "+a.line.gutterClass,"left: "+(r.options.fixedGutter?l.fixedPos:-l.gutterTotalWidth)+"px; width: "+l.gutterTotalWidth+"px"),r.display.input.setUneditable(a.gutterBackground),d.insertBefore(a.gutterBackground,a.text)}var x=a.line.gutterMarkers;if(r.options.lineNumbers||x){var S=Ea(a),T=a.gutter=H("div",null,"CodeMirror-gutter-wrapper","left: "+(r.options.fixedGutter?l.fixedPos:-l.gutterTotalWidth)+"px");if(T.setAttribute("aria-hidden","true"),r.display.input.setUneditable(T),S.insertBefore(T,a.text),a.line.gutterClass&&(T.className+=" "+a.line.gutterClass),r.options.lineNumbers&&(!x||!x["CodeMirror-linenumbers"])&&(a.lineNumber=T.appendChild(H("div",He(r.options,u),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+l.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+r.display.lineNumInnerWidth+"px"))),x)for(var k=0;k<r.display.gutterSpecs.length;++k){var M=r.display.gutterSpecs[k].className,K=x.hasOwnProperty(M)&&x[M];K&&T.appendChild(H("div",[K],"CodeMirror-gutter-elt","left: "+l.gutterLeft[M]+"px; width: "+l.gutterWidth[M]+"px"))}}}function Sl(r,a,u){a.alignable&&(a.alignable=null);for(var l=me("CodeMirror-linewidget"),d=a.node.firstChild,x=void 0;d;d=x)x=d.nextSibling,l.test(d.className)&&a.node.removeChild(d);ac(r,a,u)}function oc(r,a,u,l){var d=rc(r,a);return a.text=a.node=d.pre,d.bgClass&&(a.bgClass=d.bgClass),d.textClass&&(a.textClass=d.textClass),wl(r,a),cs(r,a,u,l),ac(r,a,l),a.node}function ac(r,a,u){if(Ta(r,a.line,a,u,!0),a.rest)for(var l=0;l<a.rest.length;l++)Ta(r,a.rest[l],a,u,!1)}function Ta(r,a,u,l,d){if(a.widgets)for(var x=Ea(u),S=0,T=a.widgets;S<T.length;++S){var k=T[S],M=H("div",[k.node],"CodeMirror-linewidget"+(k.className?" "+k.className:""));k.handleMouseEvents||M.setAttribute("cm-ignore-events","true"),ds(k,M,u,l),r.display.input.setUneditable(M),d&&k.above?x.insertBefore(M,u.gutter||u.text):x.appendChild(M),yn(k,"redraw")}}function ds(r,a,u,l){if(r.noHScroll){(u.alignable||(u.alignable=[])).push(a);var d=l.wrapperWidth;a.style.left=l.fixedPos+"px",r.coverGutter||(d-=l.gutterTotalWidth,a.style.paddingLeft=l.gutterTotalWidth+"px"),a.style.width=d+"px"}r.coverGutter&&(a.style.zIndex=5,a.style.position="relative",r.noHScroll||(a.style.marginLeft=-l.gutterTotalWidth+"px"))}function Aa(r){if(r.height!=null)return r.height;var a=r.doc.cm;if(!a)return 0;if(!Xe(document.body,r.node)){var u="position: relative;";r.coverGutter&&(u+="margin-left: -"+a.display.gutters.offsetWidth+"px;"),r.noHScroll&&(u+="width: "+a.display.wrapper.clientWidth+"px;"),le(a.display.measure,H("div",[r.node],null,u))}return r.height=r.node.parentNode.offsetHeight}function Tr(r,a){for(var u=ui(a);u!=r.wrapper;u=u.parentNode)if(!u||u.nodeType==1&&u.getAttribute("cm-ignore-events")=="true"||u.parentNode==r.sizer&&u!=r.mover)return!0}function so(r){return r.lineSpace.offsetTop}function fs(r){return r.mover.offsetHeight-r.lineSpace.offsetHeight}function sc(r){if(r.cachedPaddingH)return r.cachedPaddingH;var a=le(r.measure,H("pre","x","CodeMirror-line-like")),u=window.getComputedStyle?window.getComputedStyle(a):a.currentStyle,l={left:parseInt(u.paddingLeft),right:parseInt(u.paddingRight)};return!isNaN(l.left)&&!isNaN(l.right)&&(r.cachedPaddingH=l),l}function mr(r){return un-r.display.nativeBarWidth}function Ar(r){return r.display.scroller.clientWidth-mr(r)-r.display.barWidth}function Da(r){return r.display.scroller.clientHeight-mr(r)-r.display.barHeight}function pp(r,a,u){var l=r.options.lineWrapping,d=l&&Ar(r);if(!a.measure.heights||l&&a.measure.width!=d){var x=a.measure.heights=[];if(l){a.measure.width=d;for(var S=a.text.firstChild.getClientRects(),T=0;T<S.length-1;T++){var k=S[T],M=S[T+1];Math.abs(k.bottom-M.bottom)>2&&x.push((k.bottom+M.top)/2-u.top)}}x.push(u.bottom-u.top)}}function lc(r,a,u){if(r.line==a)return{map:r.measure.map,cache:r.measure.cache};if(r.rest){for(var l=0;l<r.rest.length;l++)if(r.rest[l]==a)return{map:r.measure.maps[l],cache:r.measure.caches[l]};for(var d=0;d<r.rest.length;d++)if(V(r.rest[d])>u)return{map:r.measure.maps[d],cache:r.measure.caches[d],before:!0}}}function mp(r,a){a=pn(a);var u=V(a),l=r.display.externalMeasured=new ic(r.doc,a,u);l.lineN=u;var d=l.built=tc(r,l);return l.text=d.pre,le(r.display.lineMeasure,d.pre),l}function ps(r,a,u,l){return zi(r,Kr(r,a),u,l)}function El(r,a){if(a>=r.display.viewFrom&&a<r.display.viewTo)return r.display.view[Xr(r,a)];var u=r.display.externalMeasured;if(u&&a>=u.lineN&&a<u.lineN+u.size)return u}function Kr(r,a){var u=V(a),l=El(r,u);l&&!l.text?l=null:l&&l.changes&&(us(r,l,u,Nl(r)),r.curOp.forceUpdate=!0),l||(l=mp(r,a));var d=lc(l,a,u);return{line:a,view:l,rect:null,map:d.map,cache:d.cache,before:d.before,hasHeights:!1}}function zi(r,a,u,l,d){a.before&&(u=-1);var x=u+(l||""),S;return a.cache.hasOwnProperty(x)?S=a.cache[x]:(a.rect||(a.rect=a.view.text.getBoundingClientRect()),a.hasHeights||(pp(r,a.view,a.rect),a.hasHeights=!0),S=uc(r,a,u,l),S.bogus||(a.cache[x]=S)),{left:S.left,right:S.right,top:d?S.rtop:S.top,bottom:d?S.rbottom:S.bottom}}var Wn={left:0,right:0,top:0,bottom:0};function Po(r,a,u){for(var l,d,x,S,T,k,M=0;M<r.length;M+=3)if(T=r[M],k=r[M+1],a<T?(d=0,x=1,S="left"):a<k?(d=a-T,x=d+1):(M==r.length-3||a==k&&r[M+3]>a)&&(x=k-T,d=x-1,a>=k&&(S="right")),d!=null){if(l=r[M+2],T==k&&u==(l.insertLeft?"left":"right")&&(S=u),u=="left"&&d==0)for(;M&&r[M-2]==r[M-3]&&r[M-1].insertLeft;)l=r[(M-=3)+2],S="left";if(u=="right"&&d==k-T)for(;M<r.length-3&&r[M+3]==r[M+4]&&!r[M+5].insertLeft;)l=r[(M+=3)+2],S="right";break}return{node:l,start:d,end:x,collapse:S,coverStart:T,coverEnd:k}}function ka(r,a){var u=Wn;if(a=="left")for(var l=0;l<r.length&&(u=r[l]).left==u.right;l++);else for(var d=r.length-1;d>=0&&(u=r[d]).left==u.right;d--);return u}function uc(r,a,u,l){var d=Po(a.map,u,l),x=d.node,S=d.start,T=d.end,k=d.collapse,M;if(x.nodeType==3){for(var K=0;K<4;K++){for(;S&&cn(a.line.text.charAt(d.coverStart+S));)--S;for(;d.coverStart+T<d.coverEnd&&cn(a.line.text.charAt(d.coverStart+T));)++T;if(c&&f<9&&S==0&&T==d.coverEnd-d.coverStart?M=x.parentNode.getBoundingClientRect():M=ka(pt(x,S,T).getClientRects(),l),M.left||M.right||S==0)break;T=S,S=S-1,k="right"}c&&f<11&&(M=ms(r.display.measure,M))}else{S>0&&(k=l="right");var Z;r.options.lineWrapping&&(Z=x.getClientRects()).length>1?M=Z[l=="right"?Z.length-1:0]:M=x.getBoundingClientRect()}if(c&&f<9&&!S&&(!M||!M.left&&!M.right)){var ce=x.parentNode.getClientRects()[0];ce?M={left:ce.left,right:ce.left+uo(r.display),top:ce.top,bottom:ce.bottom}:M=Wn}for(var ae=M.top-a.rect.top,Ce=M.bottom-a.rect.top,Fe=(ae+Ce)/2,qe=a.view.measure.heights,et=0;et<qe.length-1&&!(Fe<qe[et]);et++);var ut=et?qe[et-1]:0,tt=qe[et],gt={left:(k=="right"?M.right:M.left)-a.rect.left,right:(k=="left"?M.left:M.right)-a.rect.left,top:ut,bottom:tt};return!M.left&&!M.right&&(gt.bogus=!0),r.options.singleCursorHeightPerLine||(gt.rtop=ae,gt.rbottom=Ce),gt}function ms(r,a){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!fa(r))return a;var u=screen.logicalXDPI/screen.deviceXDPI,l=screen.logicalYDPI/screen.deviceYDPI;return{left:a.left*u,right:a.right*u,top:a.top*l,bottom:a.bottom*l}}function Tl(r){if(r.measure&&(r.measure.cache={},r.measure.heights=null,r.rest))for(var a=0;a<r.rest.length;a++)r.measure.caches[a]={}}function Al(r){r.display.externalMeasure=null,$(r.display.lineMeasure);for(var a=0;a<r.display.view.length;a++)Tl(r.display.view[a])}function Jr(r){Al(r),r.display.cachedCharWidth=r.display.cachedTextHeight=r.display.cachedPaddingH=null,r.options.lineWrapping||(r.display.maxLineChanged=!0),r.display.lineNumChars=null}function hs(r){return g&&N?-(r.body.getBoundingClientRect().left-parseInt(getComputedStyle(r.body).marginLeft)):r.defaultView.pageXOffset||(r.documentElement||r.body).scrollLeft}function Yr(r){return g&&N?-(r.body.getBoundingClientRect().top-parseInt(getComputedStyle(r.body).marginTop)):r.defaultView.pageYOffset||(r.documentElement||r.body).scrollTop}function Ia(r){var a=pn(r),u=a.widgets,l=0;if(u)for(var d=0;d<u.length;++d)u[d].above&&(l+=Aa(u[d]));return l}function Vo(r,a,u,l,d){if(!d){var x=Ia(a);u.top+=x,u.bottom+=x}if(l=="line")return u;l||(l="local");var S=pr(a);if(l=="local"?S+=so(r.display):S-=r.display.viewOffset,l=="page"||l=="window"){var T=r.display.lineSpace.getBoundingClientRect();S+=T.top+(l=="window"?0:Yr(Le(r)));var k=T.left+(l=="window"?0:hs(Le(r)));u.left+=k,u.right+=k}return u.top+=S,u.bottom+=S,u}function Ma(r,a,u){if(u=="div")return a;var l=a.left,d=a.top;if(u=="page")l-=hs(Le(r)),d-=Yr(Le(r));else if(u=="local"||!u){var x=r.display.sizer.getBoundingClientRect();l+=x.left,d+=x.top}var S=r.display.lineSpace.getBoundingClientRect();return{left:l-S.left,top:d-S.top}}function Lo(r,a,u,l,d){return l||(l=bt(r.doc,a.line)),Vo(r,l,ps(r,l,a.ch,d),u)}function Gi(r,a,u,l,d,x){l=l||bt(r.doc,a.line),d||(d=Kr(r,l));function S(Ce,Fe){var qe=zi(r,d,Ce,Fe?"right":"left",x);return Fe?qe.left=qe.right:qe.right=qe.left,Vo(r,l,qe,u)}var T=Lt(l,r.doc.direction),k=a.ch,M=a.sticky;if(k>=l.text.length?(k=l.text.length,M="before"):k<=0&&(k=0,M="after"),!T)return S(M=="before"?k-1:k,M=="before");function K(Ce,Fe,qe){var et=T[Fe],ut=et.level==1;return S(qe?Ce-1:Ce,ut!=qe)}var Z=li(T,k,M),ce=ji,ae=K(k,Z,M=="before");return ce!=null&&(ae.other=K(k,ce,M!="before")),ae}function cc(r,a){var u=0;a=wt(r.doc,a),r.options.lineWrapping||(u=uo(r.display)*a.ch);var l=bt(r.doc,a.line),d=pr(l)+so(r.display);return{left:u,right:u,top:d,bottom:d+l.height}}function Fa(r,a,u,l,d){var x=ye(r,a,u);return x.xRel=d,l&&(x.outside=l),x}function Dl(r,a,u){var l=r.doc;if(u+=r.display.viewOffset,u<0)return Fa(l.first,0,null,-1,-1);var d=Q(l,u),x=l.first+l.size-1;if(d>x)return Fa(l.first+l.size-1,bt(l,x).text.length,null,1,1);a<0&&(a=0);for(var S=bt(l,d);;){var T=hp(r,S,d,a,u),k=ap(S,T.ch+(T.xRel>0||T.outside>0?1:0));if(!k)return T;var M=k.find(1);if(M.line==d)return M;S=bt(l,d=M.line)}}function kl(r,a,u,l){l-=Ia(a);var d=a.text.length,x=On(function(S){return zi(r,u,S-1).bottom<=l},d,0);return d=On(function(S){return zi(r,u,S).top>l},x,d),{begin:x,end:d}}function Na(r,a,u,l){u||(u=Kr(r,a));var d=Vo(r,a,zi(r,u,l),"line").top;return kl(r,a,u,d)}function Il(r,a,u,l){return r.bottom<=u?!1:r.top>u?!0:(l?r.left:r.right)>a}function hp(r,a,u,l,d){d-=pr(a);var x=Kr(r,a),S=Ia(a),T=0,k=a.text.length,M=!0,K=Lt(a,r.doc.direction);if(K){var Z=(r.options.lineWrapping?Fl:Ml)(r,a,u,x,K,l,d);M=Z.level!=1,T=M?Z.from:Z.to-1,k=M?Z.to:Z.from-1}var ce=null,ae=null,Ce=On(function(It){var Tt=zi(r,x,It);return Tt.top+=S,Tt.bottom+=S,Il(Tt,l,d,!1)?(Tt.top<=d&&Tt.left<=l&&(ce=It,ae=Tt),!0):!1},T,k),Fe,qe,et=!1;if(ae){var ut=l-ae.left<ae.right-l,tt=ut==M;Ce=ce+(tt?0:1),qe=tt?"after":"before",Fe=ut?ae.left:ae.right}else{!M&&(Ce==k||Ce==T)&&Ce++,qe=Ce==0?"after":Ce==a.text.length?"before":zi(r,x,Ce-(M?1:0)).bottom+S<=d==M?"after":"before";var gt=Gi(r,ye(u,Ce,qe),"line",a,x);Fe=gt.left,et=d<gt.top?-1:d>=gt.bottom?1:0}return Ce=si(a.text,Ce,1),Fa(u,Ce,qe,et,l-Fe)}function Ml(r,a,u,l,d,x,S){var T=On(function(Z){var ce=d[Z],ae=ce.level!=1;return Il(Gi(r,ye(u,ae?ce.to:ce.from,ae?"before":"after"),"line",a,l),x,S,!0)},0,d.length-1),k=d[T];if(T>0){var M=k.level!=1,K=Gi(r,ye(u,M?k.from:k.to,M?"after":"before"),"line",a,l);Il(K,x,S,!0)&&K.top>S&&(k=d[T-1])}return k}function Fl(r,a,u,l,d,x,S){var T=kl(r,a,l,S),k=T.begin,M=T.end;/\s/.test(a.text.charAt(M-1))&&M--;for(var K=null,Z=null,ce=0;ce<d.length;ce++){var ae=d[ce];if(!(ae.from>=M||ae.to<=k)){var Ce=ae.level!=1,Fe=zi(r,l,Ce?Math.min(M,ae.to)-1:Math.max(k,ae.from)).right,qe=Fe<x?x-Fe+1e9:Fe-x;(!K||Z>qe)&&(K=ae,Z=qe)}}return K||(K=d[d.length-1]),K.from<k&&(K={from:k,to:K.to,level:K.level}),K.to>M&&(K={from:K.from,to:M,level:K.level}),K}var lo;function Bo(r){if(r.cachedTextHeight!=null)return r.cachedTextHeight;if(lo==null){lo=H("pre",null,"CodeMirror-line-like");for(var a=0;a<49;++a)lo.appendChild(document.createTextNode("x")),lo.appendChild(H("br"));lo.appendChild(document.createTextNode("x"))}le(r.measure,lo);var u=lo.offsetHeight/50;return u>3&&(r.cachedTextHeight=u),$(r.measure),u||1}function uo(r){if(r.cachedCharWidth!=null)return r.cachedCharWidth;var a=H("span","xxxxxxxxxx"),u=H("pre",[a],"CodeMirror-line-like");le(r.measure,u);var l=a.getBoundingClientRect(),d=(l.right-l.left)/10;return d>2&&(r.cachedCharWidth=d),d||10}function Nl(r){for(var a=r.display,u={},l={},d=a.gutters.clientLeft,x=a.gutters.firstChild,S=0;x;x=x.nextSibling,++S){var T=r.display.gutterSpecs[S].className;u[T]=x.offsetLeft+x.clientLeft+d,l[T]=x.clientWidth}return{fixedPos:gs(a),gutterTotalWidth:a.gutters.offsetWidth,gutterLeft:u,gutterWidth:l,wrapperWidth:a.wrapper.clientWidth}}function gs(r){return r.scroller.getBoundingClientRect().left-r.sizer.getBoundingClientRect().left}function Rl(r){var a=Bo(r.display),u=r.options.lineWrapping,l=u&&Math.max(5,r.display.scroller.clientWidth/uo(r.display)-3);return function(d){if(tr(r.doc,d))return 0;var x=0;if(d.widgets)for(var S=0;S<d.widgets.length;S++)d.widgets[S].height&&(x+=d.widgets[S].height);return u?x+(Math.ceil(d.text.length/l)||1)*a:x+a}}function Pl(r){var a=r.doc,u=Rl(r);a.iter(function(l){var d=u(l);d!=l.height&&Ti(l,d)})}function co(r,a,u,l){var d=r.display;if(!u&&ui(a).getAttribute("cm-not-content")=="true")return null;var x,S,T=d.lineSpace.getBoundingClientRect();try{x=a.clientX-T.left,S=a.clientY-T.top}catch{return null}var k=Dl(r,x,S),M;if(l&&k.xRel>0&&(M=bt(r.doc,k.line).text).length==k.ch){var K=zt(M,M.length,r.options.tabSize)-M.length;k=ye(k.line,Math.max(0,Math.round((x-sc(r.display).left)/uo(r.display))-K))}return k}function Xr(r,a){if(a>=r.display.viewTo||(a-=r.display.viewFrom,a<0))return null;for(var u=r.display.view,l=0;l<u.length;l++)if(a-=u[l].size,a<0)return l}function fi(r,a,u,l){a==null&&(a=r.doc.first),u==null&&(u=r.doc.first+r.doc.size),l||(l=0);var d=r.display;if(l&&u<d.viewTo&&(d.updateLineNumbers==null||d.updateLineNumbers>a)&&(d.updateLineNumbers=a),r.curOp.viewChanged=!0,a>=d.viewTo)dr&&vl(r.doc,a)<d.viewTo&&hr(r);else if(u<=d.viewFrom)dr&&ju(r.doc,u+l)>d.viewFrom?hr(r):(d.viewFrom+=l,d.viewTo+=l);else if(a<=d.viewFrom&&u>=d.viewTo)hr(r);else if(a<=d.viewFrom){var x=Ra(r,u,u+l,1);x?(d.view=d.view.slice(x.index),d.viewFrom=x.lineN,d.viewTo+=l):hr(r)}else if(u>=d.viewTo){var S=Ra(r,a,a,-1);S?(d.view=d.view.slice(0,S.index),d.viewTo=S.lineN):hr(r)}else{var T=Ra(r,a,a,-1),k=Ra(r,u,u+l,1);T&&k?(d.view=d.view.slice(0,T.index).concat(ba(r,T.lineN,k.lineN)).concat(d.view.slice(k.index)),d.viewTo+=l):hr(r)}var M=d.externalMeasured;M&&(u<M.lineN?M.lineN+=l:a<M.lineN+M.size&&(d.externalMeasured=null))}function Qr(r,a,u){r.curOp.viewChanged=!0;var l=r.display,d=r.display.externalMeasured;if(d&&a>=d.lineN&&a<d.lineN+d.size&&(l.externalMeasured=null),!(a<l.viewFrom||a>=l.viewTo)){var x=l.view[Xr(r,a)];if(x.node!=null){var S=x.changes||(x.changes=[]);Nt(S,u)==-1&&S.push(u)}}}function hr(r){r.display.viewFrom=r.display.viewTo=r.doc.first,r.display.view=[],r.display.viewOffset=0}function Ra(r,a,u,l){var d=Xr(r,a),x,S=r.display.view;if(!dr||u==r.doc.first+r.doc.size)return{index:d,lineN:u};for(var T=r.display.viewFrom,k=0;k<d;k++)T+=S[k].size;if(T!=a){if(l>0){if(d==S.length-1)return null;x=T+S[d].size-a,d++}else x=T-a;a+=x,u+=x}for(;vl(r.doc,u)!=u;){if(d==(l<0?0:S.length-1))return null;u+=l*S[d-(l<0?1:0)].size,d+=l}return{index:d,lineN:u}}function dc(r,a,u){var l=r.display,d=l.view;d.length==0||a>=l.viewTo||u<=l.viewFrom?(l.view=ba(r,a,u),l.viewFrom=a):(l.viewFrom>a?l.view=ba(r,a,l.viewFrom).concat(l.view):l.viewFrom<a&&(l.view=l.view.slice(Xr(r,a))),l.viewFrom=a,l.viewTo<u?l.view=l.view.concat(ba(r,l.viewTo,u)):l.viewTo>u&&(l.view=l.view.slice(0,Xr(r,u)))),l.viewTo=u}function fc(r){for(var a=r.display.view,u=0,l=0;l<a.length;l++){var d=a[l];!d.hidden&&(!d.node||d.changes)&&++u}return u}function Pa(r){r.display.input.showSelection(r.display.input.prepareSelection())}function pc(r,a){a===void 0&&(a=!0);var u=r.doc,l={},d=l.cursors=document.createDocumentFragment(),x=l.selection=document.createDocumentFragment(),S=r.options.$customCursor;S&&(a=!0);for(var T=0;T<u.sel.ranges.length;T++)if(!(!a&&T==u.sel.primIndex)){var k=u.sel.ranges[T];if(!(k.from().line>=r.display.viewTo||k.to().line<r.display.viewFrom)){var M=k.empty();if(S){var K=S(r,k);K&&Vl(r,K,d)}else(M||r.options.showCursorWhenSelecting)&&Vl(r,k.head,d);M||gp(r,k,x)}}return l}function Vl(r,a,u){var l=Gi(r,a,"div",null,null,!r.options.singleCursorHeightPerLine),d=u.appendChild(H("div","\xA0","CodeMirror-cursor"));if(d.style.left=l.left+"px",d.style.top=l.top+"px",d.style.height=Math.max(0,l.bottom-l.top)*r.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(r.getWrapperElement().className)){var x=Lo(r,a,"div",null,null),S=x.right-x.left;d.style.width=(S>0?S:r.defaultCharWidth())+"px"}if(l.other){var T=u.appendChild(H("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));T.style.display="",T.style.left=l.other.left+"px",T.style.top=l.other.top+"px",T.style.height=(l.other.bottom-l.other.top)*.85+"px"}}function vs(r,a){return r.top-a.top||r.left-a.left}function gp(r,a,u){var l=r.display,d=r.doc,x=document.createDocumentFragment(),S=sc(r.display),T=S.left,k=Math.max(l.sizerWidth,Ar(r)-l.sizer.offsetLeft)-S.right,M=d.direction=="ltr";function K(tt,gt,It,Tt){gt<0&&(gt=0),gt=Math.round(gt),Tt=Math.round(Tt),x.appendChild(H("div",null,"CodeMirror-selected","position: absolute; left: "+tt+`px;
                             top: `+gt+"px; width: "+(It??k-tt)+`px;
                             height: `+(Tt-gt)+"px"))}function Z(tt,gt,It){var Tt=bt(d,tt),Ht=Tt.text.length,ln,$n;function _n(Ln,ki){return Lo(r,ye(tt,Ln),"div",Tt,ki)}function Wi(Ln,ki,ii){var Un=Na(r,Tt,null,Ln),Bn=ki=="ltr"==(ii=="after")?"left":"right",En=ii=="after"?Un.begin:Un.end-(/\s/.test(Tt.text.charAt(Un.end-1))?2:1);return _n(En,Bn)[Bn]}var Di=Lt(Tt,d.direction);return Pn(Di,gt||0,It??Ht,function(Ln,ki,ii,Un){var Bn=ii=="ltr",En=_n(Ln,Bn?"left":"right"),Ii=_n(ki-1,Bn?"right":"left"),As=gt==null&&Ln==0,$o=It==null&&ki==Ht,mi=Un==0,to=!Di||Un==Di.length-1;if(Ii.top-En.top<=3){var Kn=(M?As:$o)&&mi,Pp=(M?$o:As)&&to,go=Kn?T:(Bn?En:Ii).left,Oa=Pp?k:(Bn?Ii:En).right;K(go,En.top,Oa-go,En.bottom)}else{var Ha,Ci,Ds,Vp;Bn?(Ha=M&&As&&mi?T:En.left,Ci=M?k:Wi(Ln,ii,"before"),Ds=M?T:Wi(ki,ii,"after"),Vp=M&&$o&&to?k:Ii.right):(Ha=M?Wi(Ln,ii,"before"):T,Ci=!M&&As&&mi?k:En.right,Ds=!M&&$o&&to?T:Ii.left,Vp=M?Wi(ki,ii,"after"):k),K(Ha,En.top,Ci-Ha,En.bottom),En.bottom<Ii.top&&K(T,En.bottom,null,Ii.top),K(Ds,Ii.top,Vp-Ds,Ii.bottom)}(!ln||vs(En,ln)<0)&&(ln=En),vs(Ii,ln)<0&&(ln=Ii),(!$n||vs(En,$n)<0)&&($n=En),vs(Ii,$n)<0&&($n=Ii)}),{start:ln,end:$n}}var ce=a.from(),ae=a.to();if(ce.line==ae.line)Z(ce.line,ce.ch,ae.ch);else{var Ce=bt(d,ce.line),Fe=bt(d,ae.line),qe=pn(Ce)==pn(Fe),et=Z(ce.line,ce.ch,qe?Ce.text.length+1:null).end,ut=Z(ae.line,qe?0:null,ae.ch).start;qe&&(et.top<ut.top-2?(K(et.right,et.top,null,et.bottom),K(T,ut.top,ut.left,ut.bottom)):K(et.right,et.top,ut.left-et.right,et.bottom)),et.bottom<ut.top&&K(T,et.bottom,null,ut.top)}u.appendChild(x)}function Ll(r){if(r.state.focused){var a=r.display;clearInterval(a.blinker);var u=!0;a.cursorDiv.style.visibility="",r.options.cursorBlinkRate>0?a.blinker=setInterval(function(){r.hasFocus()||Oo(r),a.cursorDiv.style.visibility=(u=!u)?"":"hidden"},r.options.cursorBlinkRate):r.options.cursorBlinkRate<0&&(a.cursorDiv.style.visibility="hidden")}}function Va(r){r.hasFocus()||(r.display.input.focus(),r.state.focused||Bl(r))}function nr(r){r.state.delayingBlurEvent=!0,setTimeout(function(){r.state.delayingBlurEvent&&(r.state.delayingBlurEvent=!1,r.state.focused&&Oo(r))},100)}function Bl(r,a){r.state.delayingBlurEvent&&!r.state.draggingText&&(r.state.delayingBlurEvent=!1),r.options.readOnly!="nocursor"&&(r.state.focused||(Qt(r,"focus",r,a),r.state.focused=!0,yt(r.display.wrapper,"CodeMirror-focused"),!r.curOp&&r.display.selForContextMenu!=r.doc.sel&&(r.display.input.reset(),m&&setTimeout(function(){return r.display.input.reset(!0)},20)),r.display.input.receivedFocus()),Ll(r))}function Oo(r,a){r.state.delayingBlurEvent||(r.state.focused&&(Qt(r,"blur",r,a),r.state.focused=!1,Te(r.display.wrapper,"CodeMirror-focused")),clearInterval(r.display.blinker),setTimeout(function(){r.state.focused||(r.display.shift=!1)},150))}function fo(r){for(var a=r.display,u=a.lineDiv.offsetTop,l=Math.max(0,a.scroller.getBoundingClientRect().top),d=a.lineDiv.getBoundingClientRect().top,x=0,S=0;S<a.view.length;S++){var T=a.view[S],k=r.options.lineWrapping,M=void 0,K=0;if(!T.hidden){if(d+=T.line.height,c&&f<8){var Z=T.node.offsetTop+T.node.offsetHeight;M=Z-u,u=Z}else{var ce=T.node.getBoundingClientRect();M=ce.bottom-ce.top,!k&&T.text.firstChild&&(K=T.text.firstChild.getBoundingClientRect().right-ce.left-1)}var ae=T.line.height-M;if((ae>.005||ae<-.005)&&(d<l&&(x-=ae),Ti(T.line,M),Ol(T.line),T.rest))for(var Ce=0;Ce<T.rest.length;Ce++)Ol(T.rest[Ce]);if(K>r.display.sizerWidth){var Fe=Math.ceil(K/uo(r.display));Fe>r.display.maxLineLength&&(r.display.maxLineLength=Fe,r.display.maxLine=T.line,r.display.maxLineChanged=!0)}}}Math.abs(x)>2&&(a.scroller.scrollTop+=x)}function Ol(r){if(r.widgets)for(var a=0;a<r.widgets.length;++a){var u=r.widgets[a],l=u.node.parentNode;l&&(u.height=l.offsetHeight)}}function gr(r,a,u){var l=u&&u.top!=null?Math.max(0,u.top):r.scroller.scrollTop;l=Math.floor(l-so(r));var d=u&&u.bottom!=null?u.bottom:l+r.wrapper.clientHeight,x=Q(a,l),S=Q(a,d);if(u&&u.ensure){var T=u.ensure.from.line,k=u.ensure.to.line;T<x?(x=T,S=Q(a,pr(bt(a,T))+r.wrapper.clientHeight)):Math.min(k,a.lastLine())>=S&&(x=Q(a,pr(bt(a,k))-r.wrapper.clientHeight),S=k)}return{from:x,to:Math.max(S,x+1)}}function Hl(r,a){if(!on(r,"scrollCursorIntoView")){var u=r.display,l=u.sizer.getBoundingClientRect(),d=null,x=u.wrapper.ownerDocument;if(a.top+l.top<0?d=!0:a.bottom+l.top>(x.defaultView.innerHeight||x.documentElement.clientHeight)&&(d=!1),d!=null&&!R){var S=H("div","\u200B",null,`position: absolute;
                         top: `+(a.top-u.viewOffset-so(r.display))+`px;
                         height: `+(a.bottom-a.top+mr(r)+u.barHeight)+`px;
                         left: `+a.left+"px; width: "+Math.max(2,a.right-a.left)+"px;");r.display.lineSpace.appendChild(S),S.scrollIntoView(d),r.display.lineSpace.removeChild(S)}}}function Zr(r,a,u,l){l==null&&(l=0);var d;!r.options.lineWrapping&&a==u&&(u=a.sticky=="before"?ye(a.line,a.ch+1,"before"):a,a=a.ch?ye(a.line,a.sticky=="before"?a.ch-1:a.ch,"after"):a);for(var x=0;x<5;x++){var S=!1,T=Gi(r,a),k=!u||u==a?T:Gi(r,u);d={left:Math.min(T.left,k.left),top:Math.min(T.top,k.top)-l,right:Math.max(T.left,k.left),bottom:Math.max(T.bottom,k.bottom)+l};var M=La(r,d),K=r.doc.scrollTop,Z=r.doc.scrollLeft;if(M.scrollTop!=null&&(w(r,M.scrollTop),Math.abs(r.doc.scrollTop-K)>1&&(S=!0)),M.scrollLeft!=null&&(D(r,M.scrollLeft),Math.abs(r.doc.scrollLeft-Z)>1&&(S=!0)),!S)break}return d}function jr(r,a){var u=La(r,a);u.scrollTop!=null&&w(r,u.scrollTop),u.scrollLeft!=null&&D(r,u.scrollLeft)}function La(r,a){var u=r.display,l=Bo(r.display);a.top<0&&(a.top=0);var d=r.curOp&&r.curOp.scrollTop!=null?r.curOp.scrollTop:u.scroller.scrollTop,x=Da(r),S={};a.bottom-a.top>x&&(a.bottom=a.top+x);var T=r.doc.height+fs(u),k=a.top<l,M=a.bottom>T-l;if(a.top<d)S.scrollTop=k?0:a.top;else if(a.bottom>d+x){var K=Math.min(a.top,(M?T:a.bottom)-x);K!=d&&(S.scrollTop=K)}var Z=r.options.fixedGutter?0:u.gutters.offsetWidth,ce=r.curOp&&r.curOp.scrollLeft!=null?r.curOp.scrollLeft:u.scroller.scrollLeft-Z,ae=Ar(r)-u.gutters.offsetWidth,Ce=a.right-a.left>ae;return Ce&&(a.right=a.left+ae),a.left<10?S.scrollLeft=0:a.left<ce?S.scrollLeft=Math.max(0,a.left+Z-(Ce?0:10)):a.right>ae+ce-3&&(S.scrollLeft=a.right+(Ce?0:10)-ae),S}function Ul(r,a){a!=null&&(y(r),r.curOp.scrollTop=(r.curOp.scrollTop==null?r.doc.scrollTop:r.curOp.scrollTop)+a)}function Ho(r){y(r);var a=r.getCursor();r.curOp.scrollToPos={from:a,to:a,margin:r.options.cursorScrollMargin}}function Ba(r,a,u){(a!=null||u!=null)&&y(r),a!=null&&(r.curOp.scrollLeft=a),u!=null&&(r.curOp.scrollTop=u)}function vp(r,a){y(r),r.curOp.scrollToPos=a}function y(r){var a=r.curOp.scrollToPos;if(a){r.curOp.scrollToPos=null;var u=cc(r,a.from),l=cc(r,a.to);_(r,u,l,a.margin)}}function _(r,a,u,l){var d=La(r,{left:Math.min(a.left,u.left),top:Math.min(a.top,u.top)-l,right:Math.max(a.right,u.right),bottom:Math.max(a.bottom,u.bottom)+l});Ba(r,d.scrollLeft,d.scrollTop)}function w(r,a){Math.abs(r.doc.scrollTop-a)<2||(t||Hn(r,{top:a}),E(r,a,!0),t&&Hn(r),Dt(r,100))}function E(r,a,u){a=Math.max(0,Math.min(r.display.scroller.scrollHeight-r.display.scroller.clientHeight,a)),!(r.display.scroller.scrollTop==a&&!u)&&(r.doc.scrollTop=a,r.display.scrollbars.setScrollTop(a),r.display.scroller.scrollTop!=a&&(r.display.scroller.scrollTop=a))}function D(r,a,u,l){a=Math.max(0,Math.min(a,r.display.scroller.scrollWidth-r.display.scroller.clientWidth)),!((u?a==r.doc.scrollLeft:Math.abs(r.doc.scrollLeft-a)<2)&&!l)&&(r.doc.scrollLeft=a,Dr(r),r.display.scroller.scrollLeft!=a&&(r.display.scroller.scrollLeft=a),r.display.scrollbars.setScrollLeft(a))}function P(r){var a=r.display,u=a.gutters.offsetWidth,l=Math.round(r.doc.height+fs(r.display));return{clientHeight:a.scroller.clientHeight,viewHeight:a.wrapper.clientHeight,scrollWidth:a.scroller.scrollWidth,clientWidth:a.scroller.clientWidth,viewWidth:a.wrapper.clientWidth,barLeft:r.options.fixedGutter?u:0,docHeight:l,scrollHeight:l+mr(r)+a.barHeight,nativeBarWidth:a.nativeBarWidth,gutterWidth:u}}var U=function(r,a,u){this.cm=u;var l=this.vert=H("div",[H("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),d=this.horiz=H("div",[H("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");l.tabIndex=d.tabIndex=-1,r(l),r(d),St(l,"scroll",function(){l.clientHeight&&a(l.scrollTop,"vertical")}),St(d,"scroll",function(){d.clientWidth&&a(d.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,c&&f<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};U.prototype.update=function(r){var a=r.scrollWidth>r.clientWidth+1,u=r.scrollHeight>r.clientHeight+1,l=r.nativeBarWidth;if(u){this.vert.style.display="block",this.vert.style.bottom=a?l+"px":"0";var d=r.viewHeight-(a?l:0);this.vert.firstChild.style.height=Math.max(0,r.scrollHeight-r.clientHeight+d)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(a){this.horiz.style.display="block",this.horiz.style.right=u?l+"px":"0",this.horiz.style.left=r.barLeft+"px";var x=r.viewWidth-r.barLeft-(u?l:0);this.horiz.firstChild.style.width=Math.max(0,r.scrollWidth-r.clientWidth+x)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&r.clientHeight>0&&(l==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:u?l:0,bottom:a?l:0}},U.prototype.setScrollLeft=function(r){this.horiz.scrollLeft!=r&&(this.horiz.scrollLeft=r),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},U.prototype.setScrollTop=function(r){this.vert.scrollTop!=r&&(this.vert.scrollTop=r),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},U.prototype.zeroWidthHack=function(){var r=q&&!F?"12px":"18px";this.horiz.style.height=this.vert.style.width=r,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Gn,this.disableVert=new Gn},U.prototype.enableZeroWidthBar=function(r,a,u){r.style.visibility="";function l(){var d=r.getBoundingClientRect(),x=u=="vert"?document.elementFromPoint(d.right-1,(d.top+d.bottom)/2):document.elementFromPoint((d.right+d.left)/2,d.bottom-1);x!=r?r.style.visibility="hidden":a.set(1e3,l)}a.set(1e3,l)},U.prototype.clear=function(){var r=this.horiz.parentNode;r.removeChild(this.horiz),r.removeChild(this.vert)};var W=function(){};W.prototype.update=function(){return{bottom:0,right:0}},W.prototype.setScrollLeft=function(){},W.prototype.setScrollTop=function(){},W.prototype.clear=function(){};function Y(r,a){a||(a=P(r));var u=r.display.barWidth,l=r.display.barHeight;re(r,a);for(var d=0;d<4&&u!=r.display.barWidth||l!=r.display.barHeight;d++)u!=r.display.barWidth&&r.options.lineWrapping&&fo(r),re(r,P(r)),u=r.display.barWidth,l=r.display.barHeight}function re(r,a){var u=r.display,l=u.scrollbars.update(a);u.sizer.style.paddingRight=(u.barWidth=l.right)+"px",u.sizer.style.paddingBottom=(u.barHeight=l.bottom)+"px",u.heightForcer.style.borderBottom=l.bottom+"px solid transparent",l.right&&l.bottom?(u.scrollbarFiller.style.display="block",u.scrollbarFiller.style.height=l.bottom+"px",u.scrollbarFiller.style.width=l.right+"px"):u.scrollbarFiller.style.display="",l.bottom&&r.options.coverGutterNextToScrollbar&&r.options.fixedGutter?(u.gutterFiller.style.display="block",u.gutterFiller.style.height=l.bottom+"px",u.gutterFiller.style.width=a.gutterWidth+"px"):u.gutterFiller.style.display=""}var de={native:U,null:W};function se(r){r.display.scrollbars&&(r.display.scrollbars.clear(),r.display.scrollbars.addClass&&Te(r.display.wrapper,r.display.scrollbars.addClass)),r.display.scrollbars=new de[r.options.scrollbarStyle](function(a){r.display.wrapper.insertBefore(a,r.display.scrollbarFiller),St(a,"mousedown",function(){r.state.focused&&setTimeout(function(){return r.display.input.focus()},0)}),a.setAttribute("cm-not-content","true")},function(a,u){u=="horizontal"?D(r,a):w(r,a)},r),r.display.scrollbars.addClass&&yt(r.display.wrapper,r.display.scrollbars.addClass)}var Ae=0;function Ge(r){r.curOp={cm:r,viewChanged:!1,startHeight:r.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ae,markArrays:null},wa(r.curOp)}function ue(r){var a=r.curOp;a&&cp(a,function(u){for(var l=0;l<u.ops.length;l++)u.ops[l].cm.curOp=null;ge(u)})}function ge(r){for(var a=r.ops,u=0;u<a.length;u++)Ee(a[u]);for(var l=0;l<a.length;l++)Me(a[l]);for(var d=0;d<a.length;d++)Pe(a[d]);for(var x=0;x<a.length;x++)Ve(a[x]);for(var S=0;S<a.length;S++)Be(a[S])}function Ee(r){var a=r.cm,u=a.display;Bt(a),r.updateMaxLine&&yl(a),r.mustUpdate=r.viewChanged||r.forceUpdate||r.scrollTop!=null||r.scrollToPos&&(r.scrollToPos.from.line<u.viewFrom||r.scrollToPos.to.line>=u.viewTo)||u.maxLineChanged&&a.options.lineWrapping,r.update=r.mustUpdate&&new mt(a,r.mustUpdate&&{top:r.scrollTop,ensure:r.scrollToPos},r.forceUpdate)}function Me(r){r.updatedDisplay=r.mustUpdate&&Et(r.cm,r.update)}function Pe(r){var a=r.cm,u=a.display;r.updatedDisplay&&fo(a),r.barMeasure=P(a),u.maxLineChanged&&!a.options.lineWrapping&&(r.adjustWidthTo=ps(a,u.maxLine,u.maxLine.text.length).left+3,a.display.sizerWidth=r.adjustWidthTo,r.barMeasure.scrollWidth=Math.max(u.scroller.clientWidth,u.sizer.offsetLeft+r.adjustWidthTo+mr(a)+a.display.barWidth),r.maxScrollLeft=Math.max(0,u.sizer.offsetLeft+r.adjustWidthTo-Ar(a))),(r.updatedDisplay||r.selectionChanged)&&(r.preparedSelection=u.input.prepareSelection())}function Ve(r){var a=r.cm;r.adjustWidthTo!=null&&(a.display.sizer.style.minWidth=r.adjustWidthTo+"px",r.maxScrollLeft<a.doc.scrollLeft&&D(a,Math.min(a.display.scroller.scrollLeft,r.maxScrollLeft),!0),a.display.maxLineChanged=!1);var u=r.focus&&r.focus==ft(Re(a));r.preparedSelection&&a.display.input.showSelection(r.preparedSelection,u),(r.updatedDisplay||r.startHeight!=a.doc.height)&&Y(a,r.barMeasure),r.updatedDisplay&&xi(a,r.barMeasure),r.selectionChanged&&Ll(a),a.state.focused&&r.updateInput&&a.display.input.reset(r.typing),u&&Va(r.cm)}function Be(r){var a=r.cm,u=a.display,l=a.doc;if(r.updatedDisplay&&mn(a,r.update),u.wheelStartX!=null&&(r.scrollTop!=null||r.scrollLeft!=null||r.scrollToPos)&&(u.wheelStartX=u.wheelStartY=null),r.scrollTop!=null&&E(a,r.scrollTop,r.forceScroll),r.scrollLeft!=null&&D(a,r.scrollLeft,!0,!0),r.scrollToPos){var d=Zr(a,wt(l,r.scrollToPos.from),wt(l,r.scrollToPos.to),r.scrollToPos.margin);Hl(a,d)}var x=r.maybeHiddenMarkers,S=r.maybeUnhiddenMarkers;if(x)for(var T=0;T<x.length;++T)x[T].lines.length||Qt(x[T],"hide");if(S)for(var k=0;k<S.length;++k)S[k].lines.length&&Qt(S[k],"unhide");u.wrapper.offsetHeight&&(l.scrollTop=a.display.scroller.scrollTop),r.changeObjs&&Qt(a,"changes",a,r.changeObjs),r.update&&r.update.finish()}function ke(r,a){if(r.curOp)return a();Ge(r);try{return a()}finally{ue(r)}}function We(r,a){return function(){if(r.curOp)return a.apply(r,arguments);Ge(r);try{return a.apply(r,arguments)}finally{ue(r)}}}function je(r){return function(){if(this.curOp)return r.apply(this,arguments);Ge(this);try{return r.apply(this,arguments)}finally{ue(this)}}}function Ke(r){return function(){var a=this.cm;if(!a||a.curOp)return r.apply(this,arguments);Ge(a);try{return r.apply(this,arguments)}finally{ue(a)}}}function Dt(r,a){r.doc.highlightFrontier<r.display.viewTo&&r.state.highlight.set(a,_t(Ot,r))}function Ot(r){var a=r.doc;if(!(a.highlightFrontier>=r.display.viewTo)){var u=+new Date+r.options.workTime,l=cr(r,a.highlightFrontier),d=[];a.iter(l.line,Math.min(a.first+a.size,r.display.viewTo+500),function(x){if(l.line>=r.display.viewFrom){var S=x.styles,T=x.text.length>r.options.maxHighlightLength?Ei(a.mode,l.state):null,k=ur(r,x,l,!0);T&&(l.state=T),x.styles=k.styles;var M=x.styleClasses,K=k.classes;K?x.styleClasses=K:M&&(x.styleClasses=null);for(var Z=!S||S.length!=x.styles.length||M!=K&&(!M||!K||M.bgClass!=K.bgClass||M.textClass!=K.textClass),ce=0;!Z&&ce<S.length;++ce)Z=S[ce]!=x.styles[ce];Z&&d.push(l.line),x.stateAfter=l.save(),l.nextLine()}else x.text.length<=r.options.maxHighlightLength&&Io(r,x.text,l),x.stateAfter=l.line%5==0?l.save():null,l.nextLine();if(+new Date>u)return Dt(r,r.options.workDelay),!0}),a.highlightFrontier=l.line,a.modeFrontier=Math.max(a.modeFrontier,l.line),d.length&&ke(r,function(){for(var x=0;x<d.length;x++)Qr(r,d[x],"text")})}}var mt=function(r,a,u){var l=r.display;this.viewport=a,this.visible=gr(l,r.doc,a),this.editorIsHidden=!l.wrapper.offsetWidth,this.wrapperHeight=l.wrapper.clientHeight,this.wrapperWidth=l.wrapper.clientWidth,this.oldDisplayWidth=Ar(r),this.force=u,this.dims=Nl(r),this.events=[]};mt.prototype.signal=function(r,a){kn(r,a)&&this.events.push(arguments)},mt.prototype.finish=function(){for(var r=0;r<this.events.length;r++)Qt.apply(null,this.events[r])};function Bt(r){var a=r.display;!a.scrollbarsClipped&&a.scroller.offsetWidth&&(a.nativeBarWidth=a.scroller.offsetWidth-a.scroller.clientWidth,a.heightForcer.style.height=mr(r)+"px",a.sizer.style.marginBottom=-a.nativeBarWidth+"px",a.sizer.style.borderRightWidth=mr(r)+"px",a.scrollbarsClipped=!0)}function Mt(r){if(r.hasFocus())return null;var a=ft(Re(r));if(!a||!Xe(r.display.lineDiv,a))return null;var u={activeElt:a};if(window.getSelection){var l=st(r).getSelection();l.anchorNode&&l.extend&&Xe(r.display.lineDiv,l.anchorNode)&&(u.anchorNode=l.anchorNode,u.anchorOffset=l.anchorOffset,u.focusNode=l.focusNode,u.focusOffset=l.focusOffset)}return u}function Kt(r){if(!(!r||!r.activeElt||r.activeElt==ft(Pt(r.activeElt)))&&(r.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(r.activeElt.nodeName)&&r.anchorNode&&Xe(document.body,r.anchorNode)&&Xe(document.body,r.focusNode))){var a=r.activeElt.ownerDocument,u=a.defaultView.getSelection(),l=a.createRange();l.setEnd(r.anchorNode,r.anchorOffset),l.collapse(!1),u.removeAllRanges(),u.addRange(l),u.extend(r.focusNode,r.focusOffset)}}function Et(r,a){var u=r.display,l=r.doc;if(a.editorIsHidden)return hr(r),!1;if(!a.force&&a.visible.from>=u.viewFrom&&a.visible.to<=u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo)&&u.renderedView==u.view&&fc(r)==0)return!1;ir(r)&&(hr(r),a.dims=Nl(r));var d=l.first+l.size,x=Math.max(a.visible.from-r.options.viewportMargin,l.first),S=Math.min(d,a.visible.to+r.options.viewportMargin);u.viewFrom<x&&x-u.viewFrom<20&&(x=Math.max(l.first,u.viewFrom)),u.viewTo>S&&u.viewTo-S<20&&(S=Math.min(d,u.viewTo)),dr&&(x=vl(r.doc,x),S=ju(r.doc,S));var T=x!=u.viewFrom||S!=u.viewTo||u.lastWrapHeight!=a.wrapperHeight||u.lastWrapWidth!=a.wrapperWidth;dc(r,x,S),u.viewOffset=pr(bt(r.doc,u.viewFrom)),r.display.mover.style.top=u.viewOffset+"px";var k=fc(r);if(!T&&k==0&&!a.force&&u.renderedView==u.view&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo))return!1;var M=Mt(r);return k>4&&(u.lineDiv.style.display="none"),vr(r,u.updateLineNumbers,a.dims),k>4&&(u.lineDiv.style.display=""),u.renderedView=u.view,Kt(M),$(u.cursorDiv),$(u.selectionDiv),u.gutters.style.height=u.sizer.style.minHeight=0,T&&(u.lastWrapHeight=a.wrapperHeight,u.lastWrapWidth=a.wrapperWidth,Dt(r,400)),u.updateLineNumbers=null,!0}function mn(r,a){for(var u=a.viewport,l=!0;;l=!1){if(!l||!r.options.lineWrapping||a.oldDisplayWidth==Ar(r)){if(u&&u.top!=null&&(u={top:Math.min(r.doc.height+fs(r.display)-Da(r),u.top)}),a.visible=gr(r.display,r.doc,u),a.visible.from>=r.display.viewFrom&&a.visible.to<=r.display.viewTo)break}else l&&(a.visible=gr(r.display,r.doc,u));if(!Et(r,a))break;fo(r);var d=P(r);Pa(r),Y(r,d),xi(r,d),a.force=!1}a.signal(r,"update",r),(r.display.viewFrom!=r.display.reportedViewFrom||r.display.viewTo!=r.display.reportedViewTo)&&(a.signal(r,"viewportChange",r,r.display.viewFrom,r.display.viewTo),r.display.reportedViewFrom=r.display.viewFrom,r.display.reportedViewTo=r.display.viewTo)}function Hn(r,a){var u=new mt(r,a);if(Et(r,u)){fo(r),mn(r,u);var l=P(r);Pa(r),Y(r,l),xi(r,l),u.finish()}}function vr(r,a,u){var l=r.display,d=r.options.lineNumbers,x=l.lineDiv,S=x.firstChild;function T(Ce){var Fe=Ce.nextSibling;return m&&q&&r.display.currentWheelTarget==Ce?Ce.style.display="none":Ce.parentNode.removeChild(Ce),Fe}for(var k=l.view,M=l.viewFrom,K=0;K<k.length;K++){var Z=k[K];if(!Z.hidden)if(!Z.node||Z.node.parentNode!=x){var ce=oc(r,Z,M,u);x.insertBefore(ce,S)}else{for(;S!=Z.node;)S=T(S);var ae=d&&a!=null&&a<=M&&Z.lineNumber;Z.changes&&(Nt(Z.changes,"gutter")>-1&&(ae=!1),us(r,Z,M,u)),ae&&($(Z.lineNumber),Z.lineNumber.appendChild(document.createTextNode(He(r.options,M)))),S=Z.node.nextSibling}M+=Z.size}for(;S;)S=T(S)}function ni(r){var a=r.gutters.offsetWidth;r.sizer.style.marginLeft=a+"px",yn(r,"gutterChanged",r)}function xi(r,a){r.display.sizer.style.minHeight=a.docHeight+"px",r.display.heightForcer.style.top=a.docHeight+"px",r.display.gutters.style.height=a.docHeight+r.display.barHeight+mr(r)+"px"}function Dr(r){var a=r.display,u=a.view;if(!(!a.alignWidgets&&(!a.gutters.firstChild||!r.options.fixedGutter))){for(var l=gs(a)-a.scroller.scrollLeft+r.doc.scrollLeft,d=a.gutters.offsetWidth,x=l+"px",S=0;S<u.length;S++)if(!u[S].hidden){r.options.fixedGutter&&(u[S].gutter&&(u[S].gutter.style.left=x),u[S].gutterBackground&&(u[S].gutterBackground.style.left=x));var T=u[S].alignable;if(T)for(var k=0;k<T.length;k++)T[k].style.left=x}r.options.fixedGutter&&(a.gutters.style.left=l+d+"px")}}function ir(r){if(!r.options.lineNumbers)return!1;var a=r.doc,u=He(r.options,a.first+a.size-1),l=r.display;if(u.length!=l.lineNumChars){var d=l.measure.appendChild(H("div",[H("div",u)],"CodeMirror-linenumber CodeMirror-gutter-elt")),x=d.firstChild.offsetWidth,S=d.offsetWidth-x;return l.lineGutter.style.width="",l.lineNumInnerWidth=Math.max(x,l.lineGutter.offsetWidth-S)+1,l.lineNumWidth=l.lineNumInnerWidth+S,l.lineNumChars=l.lineNumInnerWidth?u.length:-1,l.lineGutter.style.width=l.lineNumWidth+"px",ni(r.display),!0}return!1}function po(r,a){for(var u=[],l=!1,d=0;d<r.length;d++){var x=r[d],S=null;if(typeof x!="string"&&(S=x.style,x=x.className),x=="CodeMirror-linenumbers")if(a)l=!0;else continue;u.push({className:x,style:S})}return a&&!l&&u.push({className:"CodeMirror-linenumbers",style:null}),u}function qi(r){var a=r.gutters,u=r.gutterSpecs;$(a),r.lineGutter=null;for(var l=0;l<u.length;++l){var d=u[l],x=d.className,S=d.style,T=a.appendChild(H("div",null,"CodeMirror-gutter "+x));S&&(T.style.cssText=S),x=="CodeMirror-linenumbers"&&(r.lineGutter=T,T.style.width=(r.lineNumWidth||1)+"px")}a.style.display=u.length?"":"none",ni(r)}function eo(r){qi(r.display),fi(r),Dr(r)}function yp(r,a,u,l){var d=this;this.input=u,d.scrollbarFiller=H("div",null,"CodeMirror-scrollbar-filler"),d.scrollbarFiller.setAttribute("cm-not-content","true"),d.gutterFiller=H("div",null,"CodeMirror-gutter-filler"),d.gutterFiller.setAttribute("cm-not-content","true"),d.lineDiv=De("div",null,"CodeMirror-code"),d.selectionDiv=H("div",null,null,"position: relative; z-index: 1"),d.cursorDiv=H("div",null,"CodeMirror-cursors"),d.measure=H("div",null,"CodeMirror-measure"),d.lineMeasure=H("div",null,"CodeMirror-measure"),d.lineSpace=De("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");var x=De("div",[d.lineSpace],"CodeMirror-lines");d.mover=H("div",[x],null,"position: relative"),d.sizer=H("div",[d.mover],"CodeMirror-sizer"),d.sizerWidth=null,d.heightForcer=H("div",null,null,"position: absolute; height: "+un+"px; width: 1px;"),d.gutters=H("div",null,"CodeMirror-gutters"),d.lineGutter=null,d.scroller=H("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll"),d.scroller.setAttribute("tabIndex","-1"),d.wrapper=H("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror"),g&&b>=105&&(d.wrapper.style.clipPath="inset(0px)"),d.wrapper.setAttribute("translate","no"),c&&f<8&&(d.gutters.style.zIndex=-1,d.scroller.style.paddingRight=0),!m&&!(t&&O)&&(d.scroller.draggable=!0),r&&(r.appendChild?r.appendChild(d.wrapper):r(d.wrapper)),d.viewFrom=d.viewTo=a.first,d.reportedViewFrom=d.reportedViewTo=a.first,d.view=[],d.renderedView=null,d.externalMeasured=null,d.viewOffset=0,d.lastWrapHeight=d.lastWrapWidth=0,d.updateLineNumbers=null,d.nativeBarWidth=d.barHeight=d.barWidth=0,d.scrollbarsClipped=!1,d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null,d.alignWidgets=!1,d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.maxLine=null,d.maxLineLength=0,d.maxLineChanged=!1,d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null,d.shift=!1,d.selForContextMenu=null,d.activeTouch=null,d.gutterSpecs=po(l.gutters,l.lineNumbers),qi(d),u.init(d)}var mc=0,mo=null;c?mo=-.53:t?mo=15:g?mo=-.7:A&&(mo=-1/3);function tg(r){var a=r.wheelDeltaX,u=r.wheelDeltaY;return a==null&&r.detail&&r.axis==r.HORIZONTAL_AXIS&&(a=r.detail),u==null&&r.detail&&r.axis==r.VERTICAL_AXIS?u=r.detail:u==null&&(u=r.wheelDelta),{x:a,y:u}}function KC(r){var a=tg(r);return a.x*=mo,a.y*=mo,a}function ng(r,a){g&&b==102&&(r.display.chromeScrollHack==null?r.display.sizer.style.pointerEvents="none":clearTimeout(r.display.chromeScrollHack),r.display.chromeScrollHack=setTimeout(function(){r.display.chromeScrollHack=null,r.display.sizer.style.pointerEvents=""},100));var u=tg(a),l=u.x,d=u.y,x=mo;a.deltaMode===0&&(l=a.deltaX,d=a.deltaY,x=1);var S=r.display,T=S.scroller,k=T.scrollWidth>T.clientWidth,M=T.scrollHeight>T.clientHeight;if(l&&k||d&&M){if(d&&q&&m){e:for(var K=a.target,Z=S.view;K!=T;K=K.parentNode)for(var ce=0;ce<Z.length;ce++)if(Z[ce].node==K){r.display.currentWheelTarget=K;break e}}if(l&&!t&&!C&&x!=null){d&&M&&w(r,Math.max(0,T.scrollTop+d*x)),D(r,Math.max(0,T.scrollLeft+l*x)),(!d||d&&M)&&vn(a),S.wheelStartX=null;return}if(d&&x!=null){var ae=d*x,Ce=r.doc.scrollTop,Fe=Ce+S.wrapper.clientHeight;ae<0?Ce=Math.max(0,Ce+ae-50):Fe=Math.min(r.doc.height,Fe+ae+50),Hn(r,{top:Ce,bottom:Fe})}mc<20&&a.deltaMode!==0&&(S.wheelStartX==null?(S.wheelStartX=T.scrollLeft,S.wheelStartY=T.scrollTop,S.wheelDX=l,S.wheelDY=d,setTimeout(function(){if(S.wheelStartX!=null){var qe=T.scrollLeft-S.wheelStartX,et=T.scrollTop-S.wheelStartY,ut=et&&S.wheelDY&&et/S.wheelDY||qe&&S.wheelDX&&qe/S.wheelDX;S.wheelStartX=S.wheelStartY=null,ut&&(mo=(mo*mc+ut)/(mc+1),++mc)}},200)):(S.wheelDX+=l,S.wheelDY+=d))}}var rr=function(r,a){this.ranges=r,this.primIndex=a};rr.prototype.primary=function(){return this.ranges[this.primIndex]},rr.prototype.equals=function(r){if(r==this)return!0;if(r.primIndex!=this.primIndex||r.ranges.length!=this.ranges.length)return!1;for(var a=0;a<this.ranges.length;a++){var u=this.ranges[a],l=r.ranges[a];if(!Gt(u.anchor,l.anchor)||!Gt(u.head,l.head))return!1}return!0},rr.prototype.deepCopy=function(){for(var r=[],a=0;a<this.ranges.length;a++)r[a]=new jt(In(this.ranges[a].anchor),In(this.ranges[a].head));return new rr(r,this.primIndex)},rr.prototype.somethingSelected=function(){for(var r=0;r<this.ranges.length;r++)if(!this.ranges[r].empty())return!0;return!1},rr.prototype.contains=function(r,a){a||(a=r);for(var u=0;u<this.ranges.length;u++){var l=this.ranges[u];if(ot(a,l.from())>=0&&ot(r,l.to())<=0)return u}return-1};var jt=function(r,a){this.anchor=r,this.head=a};jt.prototype.from=function(){return oo(this.anchor,this.head)},jt.prototype.to=function(){return Sn(this.anchor,this.head)},jt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function kr(r,a,u){var l=r&&r.options.selectionsMayTouch,d=a[u];a.sort(function(ce,ae){return ot(ce.from(),ae.from())}),u=Nt(a,d);for(var x=1;x<a.length;x++){var S=a[x],T=a[x-1],k=ot(T.to(),S.from());if(l&&!S.empty()?k>0:k>=0){var M=oo(T.from(),S.from()),K=Sn(T.to(),S.to()),Z=T.empty()?S.from()==S.head:T.from()==T.head;x<=u&&--u,a.splice(--x,2,new jt(Z?K:M,Z?M:K))}}return new rr(a,u)}function Uo(r,a){return new rr([new jt(r,a||r)],0)}function zo(r){return r.text?ye(r.from.line+r.text.length-1,$e(r.text).length+(r.text.length==1?r.from.ch:0)):r.to}function ig(r,a){if(ot(r,a.from)<0)return r;if(ot(r,a.to)<=0)return zo(a);var u=r.line+a.text.length-(a.to.line-a.from.line)-1,l=r.ch;return r.line==a.to.line&&(l+=zo(a).ch-a.to.ch),ye(u,l)}function _p(r,a){for(var u=[],l=0;l<r.sel.ranges.length;l++){var d=r.sel.ranges[l];u.push(new jt(ig(d.anchor,a),ig(d.head,a)))}return kr(r.cm,u,r.sel.primIndex)}function rg(r,a,u){return r.line==a.line?ye(u.line,r.ch-a.ch+u.ch):ye(u.line+(r.line-a.line),r.ch)}function JC(r,a,u){for(var l=[],d=ye(r.first,0),x=d,S=0;S<a.length;S++){var T=a[S],k=rg(T.from,d,x),M=rg(zo(T),d,x);if(d=T.to,x=M,u=="around"){var K=r.sel.ranges[S],Z=ot(K.head,K.anchor)<0;l[S]=new jt(Z?M:k,Z?k:M)}else l[S]=new jt(k,k)}return new rr(l,r.sel.primIndex)}function xp(r){r.doc.mode=Do(r.options,r.doc.modeOption),zl(r)}function zl(r){r.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),r.doc.modeFrontier=r.doc.highlightFrontier=r.doc.first,Dt(r,100),r.state.modeGen++,r.curOp&&fi(r)}function og(r,a){return a.from.ch==0&&a.to.ch==0&&$e(a.text)==""&&(!r.cm||r.cm.options.wholeLineUpdateBefore)}function Cp(r,a,u,l){function d(ut){return u?u[ut]:null}function x(ut,tt,gt){xa(ut,tt,gt,l),yn(ut,"change",ut,a)}function S(ut,tt){for(var gt=[],It=ut;It<tt;++It)gt.push(new di(M[It],d(It),l));return gt}var T=a.from,k=a.to,M=a.text,K=bt(r,T.line),Z=bt(r,k.line),ce=$e(M),ae=d(M.length-1),Ce=k.line-T.line;if(a.full)r.insert(0,S(0,M.length)),r.remove(M.length,r.size-M.length);else if(og(r,a)){var Fe=S(0,M.length-1);x(Z,Z.text,ae),Ce&&r.remove(T.line,Ce),Fe.length&&r.insert(T.line,Fe)}else if(K==Z)if(M.length==1)x(K,K.text.slice(0,T.ch)+ce+K.text.slice(k.ch),ae);else{var qe=S(1,M.length-1);qe.push(new di(ce+K.text.slice(k.ch),ae,l)),x(K,K.text.slice(0,T.ch)+M[0],d(0)),r.insert(T.line+1,qe)}else if(M.length==1)x(K,K.text.slice(0,T.ch)+M[0]+Z.text.slice(k.ch),d(0)),r.remove(T.line+1,Ce);else{x(K,K.text.slice(0,T.ch)+M[0],d(0)),x(Z,ce+Z.text.slice(k.ch),ae);var et=S(1,M.length-1);Ce>1&&r.remove(T.line+1,Ce-1),r.insert(T.line+1,et)}yn(r,"change",r,a)}function Go(r,a,u){function l(d,x,S){if(d.linked)for(var T=0;T<d.linked.length;++T){var k=d.linked[T];if(k.doc!=x){var M=S&&k.sharedHist;u&&!M||(a(k.doc,M),l(k.doc,d,M))}}}l(r,null,!0)}function ag(r,a){if(a.cm)throw new Error("This document is already in use.");r.doc=a,a.cm=r,Pl(r),xp(r),sg(r),r.options.direction=a.direction,r.options.lineWrapping||yl(r),r.options.mode=a.modeOption,fi(r)}function sg(r){(r.doc.direction=="rtl"?yt:Te)(r.display.lineDiv,"CodeMirror-rtl")}function YC(r){ke(r,function(){sg(r),fi(r)})}function hc(r){this.done=[],this.undone=[],this.undoDepth=r?r.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=r?r.maxGeneration:1}function bp(r,a){var u={from:In(a.from),to:zo(a),text:Hi(r,a.from,a.to)};return cg(r,u,a.from.line,a.to.line+1),Go(r,function(l){return cg(l,u,a.from.line,a.to.line+1)},!0),u}function lg(r){for(;r.length;){var a=$e(r);if(a.ranges)r.pop();else break}}function XC(r,a){if(a)return lg(r.done),$e(r.done);if(r.done.length&&!$e(r.done).ranges)return $e(r.done);if(r.done.length>1&&!r.done[r.done.length-2].ranges)return r.done.pop(),$e(r.done)}function ug(r,a,u,l){var d=r.history;d.undone.length=0;var x=+new Date,S,T;if((d.lastOp==l||d.lastOrigin==a.origin&&a.origin&&(a.origin.charAt(0)=="+"&&d.lastModTime>x-(r.cm?r.cm.options.historyEventDelay:500)||a.origin.charAt(0)=="*"))&&(S=XC(d,d.lastOp==l)))T=$e(S.changes),ot(a.from,a.to)==0&&ot(a.from,T.to)==0?T.to=zo(a):S.changes.push(bp(r,a));else{var k=$e(d.done);for((!k||!k.ranges)&&gc(r.sel,d.done),S={changes:[bp(r,a)],generation:d.generation},d.done.push(S);d.done.length>d.undoDepth;)d.done.shift(),d.done[0].ranges||d.done.shift()}d.done.push(u),d.generation=++d.maxGeneration,d.lastModTime=d.lastSelTime=x,d.lastOp=d.lastSelOp=l,d.lastOrigin=d.lastSelOrigin=a.origin,T||Qt(r,"historyAdded")}function QC(r,a,u,l){var d=a.charAt(0);return d=="*"||d=="+"&&u.ranges.length==l.ranges.length&&u.somethingSelected()==l.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)}function ZC(r,a,u,l){var d=r.history,x=l&&l.origin;u==d.lastSelOp||x&&d.lastSelOrigin==x&&(d.lastModTime==d.lastSelTime&&d.lastOrigin==x||QC(r,x,$e(d.done),a))?d.done[d.done.length-1]=a:gc(a,d.done),d.lastSelTime=+new Date,d.lastSelOrigin=x,d.lastSelOp=u,l&&l.clearRedo!==!1&&lg(d.undone)}function gc(r,a){var u=$e(a);u&&u.ranges&&u.equals(r)||a.push(r)}function cg(r,a,u,l){var d=a["spans_"+r.id],x=0;r.iter(Math.max(r.first,u),Math.min(r.first+r.size,l),function(S){S.markedSpans&&((d||(d=a["spans_"+r.id]={}))[x]=S.markedSpans),++x})}function jC(r){if(!r)return null;for(var a,u=0;u<r.length;++u)r[u].marker.explicitlyCleared?a||(a=r.slice(0,u)):a&&a.push(r[u]);return a?a.length?a:null:r}function eb(r,a){var u=a["spans_"+r.id];if(!u)return null;for(var l=[],d=0;d<a.text.length;++d)l.push(jC(u[d]));return l}function dg(r,a){var u=eb(r,a),l=Wr(r,a);if(!u)return l;if(!l)return u;for(var d=0;d<u.length;++d){var x=u[d],S=l[d];if(x&&S)e:for(var T=0;T<S.length;++T){for(var k=S[T],M=0;M<x.length;++M)if(x[M].marker==k.marker)continue e;x.push(k)}else S&&(u[d]=S)}return u}function ys(r,a,u){for(var l=[],d=0;d<r.length;++d){var x=r[d];if(x.ranges){l.push(u?rr.prototype.deepCopy.call(x):x);continue}var S=x.changes,T=[];l.push({changes:T});for(var k=0;k<S.length;++k){var M=S[k],K=void 0;if(T.push({from:M.from,to:M.to,text:M.text}),a)for(var Z in M)(K=Z.match(/^spans_(\d+)$/))&&Nt(a,Number(K[1]))>-1&&($e(T)[Z]=M[Z],delete M[Z])}}return l}function wp(r,a,u,l){if(l){var d=r.anchor;if(u){var x=ot(a,d)<0;x!=ot(u,d)<0?(d=a,a=u):x!=ot(a,u)<0&&(a=u)}return new jt(d,a)}else return new jt(u||a,a)}function vc(r,a,u,l,d){d==null&&(d=r.cm&&(r.cm.display.shift||r.extend)),pi(r,new rr([wp(r.sel.primary(),a,u,d)],0),l)}function fg(r,a,u){for(var l=[],d=r.cm&&(r.cm.display.shift||r.extend),x=0;x<r.sel.ranges.length;x++)l[x]=wp(r.sel.ranges[x],a[x],null,d);var S=kr(r.cm,l,r.sel.primIndex);pi(r,S,u)}function Sp(r,a,u,l){var d=r.sel.ranges.slice(0);d[a]=u,pi(r,kr(r.cm,d,r.sel.primIndex),l)}function pg(r,a,u,l){pi(r,Uo(a,u),l)}function tb(r,a,u){var l={ranges:a.ranges,update:function(d){this.ranges=[];for(var x=0;x<d.length;x++)this.ranges[x]=new jt(wt(r,d[x].anchor),wt(r,d[x].head))},origin:u&&u.origin};return Qt(r,"beforeSelectionChange",r,l),r.cm&&Qt(r.cm,"beforeSelectionChange",r.cm,l),l.ranges!=a.ranges?kr(r.cm,l.ranges,l.ranges.length-1):a}function mg(r,a,u){var l=r.history.done,d=$e(l);d&&d.ranges?(l[l.length-1]=a,yc(r,a,u)):pi(r,a,u)}function pi(r,a,u){yc(r,a,u),ZC(r,r.sel,r.cm?r.cm.curOp.id:NaN,u)}function yc(r,a,u){(kn(r,"beforeSelectionChange")||r.cm&&kn(r.cm,"beforeSelectionChange"))&&(a=tb(r,a,u));var l=u&&u.bias||(ot(a.primary().head,r.sel.primary().head)<0?-1:1);hg(r,vg(r,a,l,!0)),!(u&&u.scroll===!1)&&r.cm&&r.cm.getOption("readOnly")!="nocursor"&&Ho(r.cm)}function hg(r,a){a.equals(r.sel)||(r.sel=a,r.cm&&(r.cm.curOp.updateInput=1,r.cm.curOp.selectionChanged=!0,yi(r.cm)),yn(r,"cursorActivity",r))}function gg(r){hg(r,vg(r,r.sel,null,!1))}function vg(r,a,u,l){for(var d,x=0;x<a.ranges.length;x++){var S=a.ranges[x],T=a.ranges.length==r.sel.ranges.length&&r.sel.ranges[x],k=_c(r,S.anchor,T&&T.anchor,u,l),M=S.head==S.anchor?k:_c(r,S.head,T&&T.head,u,l);(d||k!=S.anchor||M!=S.head)&&(d||(d=a.ranges.slice(0,x)),d[x]=new jt(k,M))}return d?kr(r.cm,d,a.primIndex):a}function _s(r,a,u,l,d){var x=bt(r,a.line);if(x.markedSpans)for(var S=0;S<x.markedSpans.length;++S){var T=x.markedSpans[S],k=T.marker,M="selectLeft"in k?!k.selectLeft:k.inclusiveLeft,K="selectRight"in k?!k.selectRight:k.inclusiveRight;if((T.from==null||(M?T.from<=a.ch:T.from<a.ch))&&(T.to==null||(K?T.to>=a.ch:T.to>a.ch))){if(d&&(Qt(k,"beforeCursorEnter"),k.explicitlyCleared))if(x.markedSpans){--S;continue}else break;if(!k.atomic)continue;if(u){var Z=k.find(l<0?1:-1),ce=void 0;if((l<0?K:M)&&(Z=yg(r,Z,-l,Z&&Z.line==a.line?x:null)),Z&&Z.line==a.line&&(ce=ot(Z,u))&&(l<0?ce<0:ce>0))return _s(r,Z,a,l,d)}var ae=k.find(l<0?-1:1);return(l<0?M:K)&&(ae=yg(r,ae,l,ae.line==a.line?x:null)),ae?_s(r,ae,a,l,d):null}}return a}function _c(r,a,u,l,d){var x=l||1,S=_s(r,a,u,x,d)||!d&&_s(r,a,u,x,!0)||_s(r,a,u,-x,d)||!d&&_s(r,a,u,-x,!0);return S||(r.cantEdit=!0,ye(r.first,0))}function yg(r,a,u,l){return u<0&&a.ch==0?a.line>r.first?wt(r,ye(a.line-1)):null:u>0&&a.ch==(l||bt(r,a.line)).text.length?a.line<r.first+r.size-1?ye(a.line+1,0):null:new ye(a.line,a.ch+u)}function _g(r){r.setSelection(ye(r.firstLine(),0),ye(r.lastLine()),Xt)}function xg(r,a,u){var l={canceled:!1,from:a.from,to:a.to,text:a.text,origin:a.origin,cancel:function(){return l.canceled=!0}};return u&&(l.update=function(d,x,S,T){d&&(l.from=wt(r,d)),x&&(l.to=wt(r,x)),S&&(l.text=S),T!==void 0&&(l.origin=T)}),Qt(r,"beforeChange",r,l),r.cm&&Qt(r.cm,"beforeChange",r.cm,l),l.canceled?(r.cm&&(r.cm.curOp.updateInput=2),null):{from:l.from,to:l.to,text:l.text,origin:l.origin}}function xs(r,a,u){if(r.cm){if(!r.cm.curOp)return We(r.cm,xs)(r,a,u);if(r.cm.state.suppressEdits)return}if(!((kn(r,"beforeChange")||r.cm&&kn(r.cm,"beforeChange"))&&(a=xg(r,a,!0),!a))){var l=Ku&&!u&&hl(r,a.from,a.to);if(l)for(var d=l.length-1;d>=0;--d)Cg(r,{from:l[d].from,to:l[d].to,text:d?[""]:a.text,origin:a.origin});else Cg(r,a)}}function Cg(r,a){if(!(a.text.length==1&&a.text[0]==""&&ot(a.from,a.to)==0)){var u=_p(r,a);ug(r,a,u,r.cm?r.cm.curOp.id:NaN),Gl(r,a,u,Wr(r,a));var l=[];Go(r,function(d,x){!x&&Nt(l,d.history)==-1&&(Eg(d.history,a),l.push(d.history)),Gl(d,a,null,Wr(d,a))})}}function xc(r,a,u){var l=r.cm&&r.cm.state.suppressEdits;if(!(l&&!u)){for(var d=r.history,x,S=r.sel,T=a=="undo"?d.done:d.undone,k=a=="undo"?d.undone:d.done,M=0;M<T.length&&(x=T[M],!(u?x.ranges&&!x.equals(r.sel):!x.ranges));M++);if(M!=T.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(x=T.pop(),x.ranges){if(gc(x,k),u&&!x.equals(r.sel)){pi(r,x,{clearRedo:!1});return}S=x}else if(l){T.push(x);return}else break;var K=[];gc(S,k),k.push({changes:K,generation:d.generation}),d.generation=x.generation||++d.maxGeneration;for(var Z=kn(r,"beforeChange")||r.cm&&kn(r.cm,"beforeChange"),ce=function(Fe){var qe=x.changes[Fe];if(qe.origin=a,Z&&!xg(r,qe,!1))return T.length=0,{};K.push(bp(r,qe));var et=Fe?_p(r,qe):$e(T);Gl(r,qe,et,dg(r,qe)),!Fe&&r.cm&&r.cm.scrollIntoView({from:qe.from,to:zo(qe)});var ut=[];Go(r,function(tt,gt){!gt&&Nt(ut,tt.history)==-1&&(Eg(tt.history,qe),ut.push(tt.history)),Gl(tt,qe,null,dg(tt,qe))})},ae=x.changes.length-1;ae>=0;--ae){var Ce=ce(ae);if(Ce)return Ce.v}}}}function bg(r,a){if(a!=0&&(r.first+=a,r.sel=new rr(Dn(r.sel.ranges,function(d){return new jt(ye(d.anchor.line+a,d.anchor.ch),ye(d.head.line+a,d.head.ch))}),r.sel.primIndex),r.cm)){fi(r.cm,r.first,r.first-a,a);for(var u=r.cm.display,l=u.viewFrom;l<u.viewTo;l++)Qr(r.cm,l,"gutter")}}function Gl(r,a,u,l){if(r.cm&&!r.cm.curOp)return We(r.cm,Gl)(r,a,u,l);if(a.to.line<r.first){bg(r,a.text.length-1-(a.to.line-a.from.line));return}if(!(a.from.line>r.lastLine())){if(a.from.line<r.first){var d=a.text.length-1-(r.first-a.from.line);bg(r,d),a={from:ye(r.first,0),to:ye(a.to.line+d,a.to.ch),text:[$e(a.text)],origin:a.origin}}var x=r.lastLine();a.to.line>x&&(a={from:a.from,to:ye(x,bt(r,x).text.length),text:[a.text[0]],origin:a.origin}),a.removed=Hi(r,a.from,a.to),u||(u=_p(r,a)),r.cm?nb(r.cm,a,l):Cp(r,a,l),yc(r,u,Xt),r.cantEdit&&_c(r,ye(r.firstLine(),0))&&(r.cantEdit=!1)}}function nb(r,a,u){var l=r.doc,d=r.display,x=a.from,S=a.to,T=!1,k=x.line;r.options.lineWrapping||(k=V(pn(bt(l,x.line))),l.iter(k,S.line+1,function(ae){if(ae==d.maxLine)return T=!0,!0})),l.sel.contains(a.from,a.to)>-1&&yi(r),Cp(l,a,u,Rl(r)),r.options.lineWrapping||(l.iter(k,x.line+a.text.length,function(ae){var Ce=_a(ae);Ce>d.maxLineLength&&(d.maxLine=ae,d.maxLineLength=Ce,d.maxLineChanged=!0,T=!1)}),T&&(r.curOp.updateMaxLine=!0)),rp(l,x.line),Dt(r,400);var M=a.text.length-(S.line-x.line)-1;a.full?fi(r):x.line==S.line&&a.text.length==1&&!og(r.doc,a)?Qr(r,x.line,"text"):fi(r,x.line,S.line+1,M);var K=kn(r,"changes"),Z=kn(r,"change");if(Z||K){var ce={from:x,to:S,text:a.text,removed:a.removed,origin:a.origin};Z&&yn(r,"change",r,ce),K&&(r.curOp.changeObjs||(r.curOp.changeObjs=[])).push(ce)}r.display.selForContextMenu=null}function Cs(r,a,u,l,d){var x;l||(l=u),ot(l,u)<0&&(x=[l,u],u=x[0],l=x[1]),typeof a=="string"&&(a=r.splitLines(a)),xs(r,{from:u,to:l,text:a,origin:d})}function wg(r,a,u,l){u<r.line?r.line+=l:a<r.line&&(r.line=a,r.ch=0)}function Sg(r,a,u,l){for(var d=0;d<r.length;++d){var x=r[d],S=!0;if(x.ranges){x.copied||(x=r[d]=x.deepCopy(),x.copied=!0);for(var T=0;T<x.ranges.length;T++)wg(x.ranges[T].anchor,a,u,l),wg(x.ranges[T].head,a,u,l);continue}for(var k=0;k<x.changes.length;++k){var M=x.changes[k];if(u<M.from.line)M.from=ye(M.from.line+l,M.from.ch),M.to=ye(M.to.line+l,M.to.ch);else if(a<=M.to.line){S=!1;break}}S||(r.splice(0,d+1),d=0)}}function Eg(r,a){var u=a.from.line,l=a.to.line,d=a.text.length-(l-u)-1;Sg(r.done,u,l,d),Sg(r.undone,u,l,d)}function ql(r,a,u,l){var d=a,x=a;return typeof a=="number"?x=bt(r,ns(r,a)):d=V(a),d==null?null:(l(x,d)&&r.cm&&Qr(r.cm,d,u),x)}function Wl(r){this.lines=r,this.parent=null;for(var a=0,u=0;u<r.length;++u)r[u].parent=this,a+=r[u].height;this.height=a}Wl.prototype={chunkSize:function(){return this.lines.length},removeInner:function(r,a){for(var u=r,l=r+a;u<l;++u){var d=this.lines[u];this.height-=d.height,Ca(d),yn(d,"delete")}this.lines.splice(r,a)},collapse:function(r){r.push.apply(r,this.lines)},insertInner:function(r,a,u){this.height+=u,this.lines=this.lines.slice(0,r).concat(a).concat(this.lines.slice(r));for(var l=0;l<a.length;++l)a[l].parent=this},iterN:function(r,a,u){for(var l=r+a;r<l;++r)if(u(this.lines[r]))return!0}};function $l(r){this.children=r;for(var a=0,u=0,l=0;l<r.length;++l){var d=r[l];a+=d.chunkSize(),u+=d.height,d.parent=this}this.size=a,this.height=u,this.parent=null}$l.prototype={chunkSize:function(){return this.size},removeInner:function(r,a){this.size-=a;for(var u=0;u<this.children.length;++u){var l=this.children[u],d=l.chunkSize();if(r<d){var x=Math.min(a,d-r),S=l.height;if(l.removeInner(r,x),this.height-=S-l.height,d==x&&(this.children.splice(u--,1),l.parent=null),(a-=x)==0)break;r=0}else r-=d}if(this.size-a<25&&(this.children.length>1||!(this.children[0]instanceof Wl))){var T=[];this.collapse(T),this.children=[new Wl(T)],this.children[0].parent=this}},collapse:function(r){for(var a=0;a<this.children.length;++a)this.children[a].collapse(r)},insertInner:function(r,a,u){this.size+=a.length,this.height+=u;for(var l=0;l<this.children.length;++l){var d=this.children[l],x=d.chunkSize();if(r<=x){if(d.insertInner(r,a,u),d.lines&&d.lines.length>50){for(var S=d.lines.length%25+25,T=S;T<d.lines.length;){var k=new Wl(d.lines.slice(T,T+=25));d.height-=k.height,this.children.splice(++l,0,k),k.parent=this}d.lines=d.lines.slice(0,S),this.maybeSpill()}break}r-=x}},maybeSpill:function(){if(!(this.children.length<=10)){var r=this;do{var a=r.children.splice(r.children.length-5,5),u=new $l(a);if(r.parent){r.size-=u.size,r.height-=u.height;var d=Nt(r.parent.children,r);r.parent.children.splice(d+1,0,u)}else{var l=new $l(r.children);l.parent=r,r.children=[l,u],r=l}u.parent=r.parent}while(r.children.length>10);r.parent.maybeSpill()}},iterN:function(r,a,u){for(var l=0;l<this.children.length;++l){var d=this.children[l],x=d.chunkSize();if(r<x){var S=Math.min(a,x-r);if(d.iterN(r,S,u))return!0;if((a-=S)==0)break;r=0}else r-=x}}};var Kl=function(r,a,u){if(u)for(var l in u)u.hasOwnProperty(l)&&(this[l]=u[l]);this.doc=r,this.node=a};Kl.prototype.clear=function(){var r=this.doc.cm,a=this.line.widgets,u=this.line,l=V(u);if(!(l==null||!a)){for(var d=0;d<a.length;++d)a[d]==this&&a.splice(d--,1);a.length||(u.widgets=null);var x=Aa(this);Ti(u,Math.max(0,u.height-x)),r&&(ke(r,function(){Tg(r,u,-x),Qr(r,l,"widget")}),yn(r,"lineWidgetCleared",r,this,l))}},Kl.prototype.changed=function(){var r=this,a=this.height,u=this.doc.cm,l=this.line;this.height=null;var d=Aa(this)-a;d&&(tr(this.doc,l)||Ti(l,l.height+d),u&&ke(u,function(){u.curOp.forceUpdate=!0,Tg(u,l,d),yn(u,"lineWidgetChanged",u,r,V(l))}))},jn(Kl);function Tg(r,a,u){pr(a)<(r.curOp&&r.curOp.scrollTop||r.doc.scrollTop)&&Ul(r,u)}function ib(r,a,u,l){var d=new Kl(r,u,l),x=r.cm;return x&&d.noHScroll&&(x.display.alignWidgets=!0),ql(r,a,"widget",function(S){var T=S.widgets||(S.widgets=[]);if(d.insertAt==null?T.push(d):T.splice(Math.min(T.length,Math.max(0,d.insertAt)),0,d),d.line=S,x&&!tr(r,S)){var k=pr(S)<r.scrollTop;Ti(S,S.height+Aa(d)),k&&Ul(x,d.height),x.curOp.forceUpdate=!0}return!0}),x&&yn(x,"lineWidgetAdded",x,d,typeof a=="number"?a:V(a)),d}var Ag=0,qo=function(r,a){this.lines=[],this.type=a,this.doc=r,this.id=++Ag};qo.prototype.clear=function(){if(!this.explicitlyCleared){var r=this.doc.cm,a=r&&!r.curOp;if(a&&Ge(r),kn(this,"clear")){var u=this.find();u&&yn(this,"clear",u.from,u.to)}for(var l=null,d=null,x=0;x<this.lines.length;++x){var S=this.lines[x],T=Mo(S.markedSpans,this);r&&!this.collapsed?Qr(r,V(S),"text"):r&&(T.to!=null&&(d=V(S)),T.from!=null&&(l=V(S))),S.markedSpans=Yu(S.markedSpans,T),T.from==null&&this.collapsed&&!tr(this.doc,S)&&r&&Ti(S,Bo(r.display))}if(r&&this.collapsed&&!r.options.lineWrapping)for(var k=0;k<this.lines.length;++k){var M=pn(this.lines[k]),K=_a(M);K>r.display.maxLineLength&&(r.display.maxLine=M,r.display.maxLineLength=K,r.display.maxLineChanged=!0)}l!=null&&r&&this.collapsed&&fi(r,l,d+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,r&&gg(r.doc)),r&&yn(r,"markerCleared",r,this,l,d),a&&ue(r),this.parent&&this.parent.clear()}},qo.prototype.find=function(r,a){r==null&&this.type=="bookmark"&&(r=1);for(var u,l,d=0;d<this.lines.length;++d){var x=this.lines[d],S=Mo(x.markedSpans,this);if(S.from!=null&&(u=ye(a?x:V(x),S.from),r==-1))return u;if(S.to!=null&&(l=ye(a?x:V(x),S.to),r==1))return l}return u&&{from:u,to:l}},qo.prototype.changed=function(){var r=this,a=this.find(-1,!0),u=this,l=this.doc.cm;!a||!l||ke(l,function(){var d=a.line,x=V(a.line),S=El(l,x);if(S&&(Tl(S),l.curOp.selectionChanged=l.curOp.forceUpdate=!0),l.curOp.updateMaxLine=!0,!tr(u.doc,d)&&u.height!=null){var T=u.height;u.height=null;var k=Aa(u)-T;k&&Ti(d,d.height+k)}yn(l,"markerChanged",l,r)})},qo.prototype.attachLine=function(r){if(!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;(!a.maybeHiddenMarkers||Nt(a.maybeHiddenMarkers,this)==-1)&&(a.maybeUnhiddenMarkers||(a.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(r)},qo.prototype.detachLine=function(r){if(this.lines.splice(Nt(this.lines,r),1),!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this)}},jn(qo);function bs(r,a,u,l,d){if(l&&l.shared)return rb(r,a,u,l,d);if(r.cm&&!r.cm.curOp)return We(r.cm,bs)(r,a,u,l,d);var x=new qo(r,d),S=ot(a,u);if(l&&Qe(l,x,!1),S>0||S==0&&x.clearWhenEmpty!==!1)return x;if(x.replacedWith&&(x.collapsed=!0,x.widgetNode=De("span",[x.replacedWith],"CodeMirror-widget"),l.handleMouseEvents||x.widgetNode.setAttribute("cm-ignore-events","true"),l.insertLeft&&(x.widgetNode.insertLeft=!0)),x.collapsed){if(Zu(r,a.line,a,u,x)||a.line!=u.line&&Zu(r,u.line,a,u,x))throw new Error("Inserting collapsed marker partially overlapping an existing one");rs()}x.addToHistory&&ug(r,{from:a,to:u,origin:"markText"},r.sel,NaN);var T=a.line,k=r.cm,M;if(r.iter(T,u.line+1,function(Z){k&&x.collapsed&&!k.options.lineWrapping&&pn(Z)==k.display.maxLine&&(M=!0),x.collapsed&&T!=a.line&&Ti(Z,0),ha(Z,new qr(x,T==a.line?a.ch:null,T==u.line?u.ch:null),r.cm&&r.cm.curOp),++T}),x.collapsed&&r.iter(a.line,u.line+1,function(Z){tr(r,Z)&&Ti(Z,0)}),x.clearOnEnter&&St(x,"beforeCursorEnter",function(){return x.clear()}),x.readOnly&&(Ju(),(r.history.done.length||r.history.undone.length)&&r.clearHistory()),x.collapsed&&(x.id=++Ag,x.atomic=!0),k){if(M&&(k.curOp.updateMaxLine=!0),x.collapsed)fi(k,a.line,u.line+1);else if(x.className||x.startStyle||x.endStyle||x.css||x.attributes||x.title)for(var K=a.line;K<=u.line;K++)Qr(k,K,"text");x.atomic&&gg(k.doc),yn(k,"markerAdded",k,x)}return x}var Jl=function(r,a){this.markers=r,this.primary=a;for(var u=0;u<r.length;++u)r[u].parent=this};Jl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var r=0;r<this.markers.length;++r)this.markers[r].clear();yn(this,"clear")}},Jl.prototype.find=function(r,a){return this.primary.find(r,a)},jn(Jl);function rb(r,a,u,l,d){l=Qe(l),l.shared=!1;var x=[bs(r,a,u,l,d)],S=x[0],T=l.widgetNode;return Go(r,function(k){T&&(l.widgetNode=T.cloneNode(!0)),x.push(bs(k,wt(k,a),wt(k,u),l,d));for(var M=0;M<k.linked.length;++M)if(k.linked[M].isParent)return;S=$e(x)}),new Jl(x,S)}function Dg(r){return r.findMarks(ye(r.first,0),r.clipPos(ye(r.lastLine())),function(a){return a.parent})}function ob(r,a){for(var u=0;u<a.length;u++){var l=a[u],d=l.find(),x=r.clipPos(d.from),S=r.clipPos(d.to);if(ot(x,S)){var T=bs(r,x,S,l.primary,l.primary.type);l.markers.push(T),T.parent=l}}}function ab(r){for(var a=function(l){var d=r[l],x=[d.primary.doc];Go(d.primary.doc,function(k){return x.push(k)});for(var S=0;S<d.markers.length;S++){var T=d.markers[S];Nt(x,T.doc)==-1&&(T.parent=null,d.markers.splice(S--,1))}},u=0;u<r.length;u++)a(u)}var sb=0,Ai=function(r,a,u,l,d){if(!(this instanceof Ai))return new Ai(r,a,u,l,d);u==null&&(u=0),$l.call(this,[new Wl([new di("",null)])]),this.first=u,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=u;var x=ye(u,0);this.sel=Uo(x),this.history=new hc(null),this.id=++sb,this.modeOption=a,this.lineSep=l,this.direction=d=="rtl"?"rtl":"ltr",this.extend=!1,typeof r=="string"&&(r=this.splitLines(r)),Cp(this,{from:x,to:x,text:r}),pi(this,Uo(x),Xt)};Ai.prototype=Wt($l.prototype,{constructor:Ai,iter:function(r,a,u){u?this.iterN(r-this.first,a-r,u):this.iterN(this.first,this.first+this.size,r)},insert:function(r,a){for(var u=0,l=0;l<a.length;++l)u+=a[l].height;this.insertInner(r-this.first,a,u)},remove:function(r,a){this.removeInner(r-this.first,a)},getValue:function(r){var a=zr(this,this.first,this.first+this.size);return r===!1?a:a.join(r||this.lineSeparator())},setValue:Ke(function(r){var a=ye(this.first,0),u=this.first+this.size-1;xs(this,{from:a,to:ye(u,bt(this,u).text.length),text:this.splitLines(r),origin:"setValue",full:!0},!0),this.cm&&Ba(this.cm,0,0),pi(this,Uo(a),Xt)}),replaceRange:function(r,a,u,l){a=wt(this,a),u=u?wt(this,u):a,Cs(this,r,a,u,l)},getRange:function(r,a,u){var l=Hi(this,wt(this,r),wt(this,a));return u===!1?l:u===""?l.join(""):l.join(u||this.lineSeparator())},getLine:function(r){var a=this.getLineHandle(r);return a&&a.text},getLineHandle:function(r){if(Se(this,r))return bt(this,r)},getLineNumber:function(r){return V(r)},getLineHandleVisualStart:function(r){return typeof r=="number"&&(r=bt(this,r)),pn(r)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(r){return wt(this,r)},getCursor:function(r){var a=this.sel.primary(),u;return r==null||r=="head"?u=a.head:r=="anchor"?u=a.anchor:r=="end"||r=="to"||r===!1?u=a.to():u=a.from(),u},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ke(function(r,a,u){pg(this,wt(this,typeof r=="number"?ye(r,a||0):r),null,u)}),setSelection:Ke(function(r,a,u){pg(this,wt(this,r),wt(this,a||r),u)}),extendSelection:Ke(function(r,a,u){vc(this,wt(this,r),a&&wt(this,a),u)}),extendSelections:Ke(function(r,a){fg(this,dl(this,r),a)}),extendSelectionsBy:Ke(function(r,a){var u=Dn(this.sel.ranges,r);fg(this,dl(this,u),a)}),setSelections:Ke(function(r,a,u){if(r.length){for(var l=[],d=0;d<r.length;d++)l[d]=new jt(wt(this,r[d].anchor),wt(this,r[d].head||r[d].anchor));a==null&&(a=Math.min(r.length-1,this.sel.primIndex)),pi(this,kr(this.cm,l,a),u)}}),addSelection:Ke(function(r,a,u){var l=this.sel.ranges.slice(0);l.push(new jt(wt(this,r),wt(this,a||r))),pi(this,kr(this.cm,l,l.length-1),u)}),getSelection:function(r){for(var a=this.sel.ranges,u,l=0;l<a.length;l++){var d=Hi(this,a[l].from(),a[l].to());u=u?u.concat(d):d}return r===!1?u:u.join(r||this.lineSeparator())},getSelections:function(r){for(var a=[],u=this.sel.ranges,l=0;l<u.length;l++){var d=Hi(this,u[l].from(),u[l].to());r!==!1&&(d=d.join(r||this.lineSeparator())),a[l]=d}return a},replaceSelection:function(r,a,u){for(var l=[],d=0;d<this.sel.ranges.length;d++)l[d]=r;this.replaceSelections(l,a,u||"+input")},replaceSelections:Ke(function(r,a,u){for(var l=[],d=this.sel,x=0;x<d.ranges.length;x++){var S=d.ranges[x];l[x]={from:S.from(),to:S.to(),text:this.splitLines(r[x]),origin:u}}for(var T=a&&a!="end"&&JC(this,l,a),k=l.length-1;k>=0;k--)xs(this,l[k]);T?mg(this,T):this.cm&&Ho(this.cm)}),undo:Ke(function(){xc(this,"undo")}),redo:Ke(function(){xc(this,"redo")}),undoSelection:Ke(function(){xc(this,"undo",!0)}),redoSelection:Ke(function(){xc(this,"redo",!0)}),setExtending:function(r){this.extend=r},getExtending:function(){return this.extend},historySize:function(){for(var r=this.history,a=0,u=0,l=0;l<r.done.length;l++)r.done[l].ranges||++a;for(var d=0;d<r.undone.length;d++)r.undone[d].ranges||++u;return{undo:a,redo:u}},clearHistory:function(){var r=this;this.history=new hc(this.history),Go(this,function(a){return a.history=r.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(r){return r&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(r){return this.history.generation==(r||this.cleanGeneration)},getHistory:function(){return{done:ys(this.history.done),undone:ys(this.history.undone)}},setHistory:function(r){var a=this.history=new hc(this.history);a.done=ys(r.done.slice(0),null,!0),a.undone=ys(r.undone.slice(0),null,!0)},setGutterMarker:Ke(function(r,a,u){return ql(this,r,"gutter",function(l){var d=l.gutterMarkers||(l.gutterMarkers={});return d[a]=u,!u&&So(d)&&(l.gutterMarkers=null),!0})}),clearGutter:Ke(function(r){var a=this;this.iter(function(u){u.gutterMarkers&&u.gutterMarkers[r]&&ql(a,u,"gutter",function(){return u.gutterMarkers[r]=null,So(u.gutterMarkers)&&(u.gutterMarkers=null),!0})})}),lineInfo:function(r){var a;if(typeof r=="number"){if(!Se(this,r)||(a=r,r=bt(this,r),!r))return null}else if(a=V(r),a==null)return null;return{line:a,handle:r,text:r.text,gutterMarkers:r.gutterMarkers,textClass:r.textClass,bgClass:r.bgClass,wrapClass:r.wrapClass,widgets:r.widgets}},addLineClass:Ke(function(r,a,u){return ql(this,r,a=="gutter"?"gutter":"class",function(l){var d=a=="text"?"textClass":a=="background"?"bgClass":a=="gutter"?"gutterClass":"wrapClass";if(!l[d])l[d]=u;else{if(me(u).test(l[d]))return!1;l[d]+=" "+u}return!0})}),removeLineClass:Ke(function(r,a,u){return ql(this,r,a=="gutter"?"gutter":"class",function(l){var d=a=="text"?"textClass":a=="background"?"bgClass":a=="gutter"?"gutterClass":"wrapClass",x=l[d];if(x)if(u==null)l[d]=null;else{var S=x.match(me(u));if(!S)return!1;var T=S.index+S[0].length;l[d]=x.slice(0,S.index)+(!S.index||T==x.length?"":" ")+x.slice(T)||null}else return!1;return!0})}),addLineWidget:Ke(function(r,a,u){return ib(this,r,a,u)}),removeLineWidget:function(r){r.clear()},markText:function(r,a,u){return bs(this,wt(this,r),wt(this,a),u,u&&u.type||"range")},setBookmark:function(r,a){var u={replacedWith:a&&(a.nodeType==null?a.widget:a),insertLeft:a&&a.insertLeft,clearWhenEmpty:!1,shared:a&&a.shared,handleMouseEvents:a&&a.handleMouseEvents};return r=wt(this,r),bs(this,r,r,u,"bookmark")},findMarksAt:function(r){r=wt(this,r);var a=[],u=bt(this,r.line).markedSpans;if(u)for(var l=0;l<u.length;++l){var d=u[l];(d.from==null||d.from<=r.ch)&&(d.to==null||d.to>=r.ch)&&a.push(d.marker.parent||d.marker)}return a},findMarks:function(r,a,u){r=wt(this,r),a=wt(this,a);var l=[],d=r.line;return this.iter(r.line,a.line+1,function(x){var S=x.markedSpans;if(S)for(var T=0;T<S.length;T++){var k=S[T];!(k.to!=null&&d==r.line&&r.ch>=k.to||k.from==null&&d!=r.line||k.from!=null&&d==a.line&&k.from>=a.ch)&&(!u||u(k.marker))&&l.push(k.marker.parent||k.marker)}++d}),l},getAllMarks:function(){var r=[];return this.iter(function(a){var u=a.markedSpans;if(u)for(var l=0;l<u.length;++l)u[l].from!=null&&r.push(u[l].marker)}),r},posFromIndex:function(r){var a,u=this.first,l=this.lineSeparator().length;return this.iter(function(d){var x=d.text.length+l;if(x>r)return a=r,!0;r-=x,++u}),wt(this,ye(u,a))},indexFromPos:function(r){r=wt(this,r);var a=r.ch;if(r.line<this.first||r.ch<0)return 0;var u=this.lineSeparator().length;return this.iter(this.first,r.line,function(l){a+=l.text.length+u}),a},copy:function(r){var a=new Ai(zr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return a.scrollTop=this.scrollTop,a.scrollLeft=this.scrollLeft,a.sel=this.sel,a.extend=!1,r&&(a.history.undoDepth=this.history.undoDepth,a.setHistory(this.getHistory())),a},linkedDoc:function(r){r||(r={});var a=this.first,u=this.first+this.size;r.from!=null&&r.from>a&&(a=r.from),r.to!=null&&r.to<u&&(u=r.to);var l=new Ai(zr(this,a,u),r.mode||this.modeOption,a,this.lineSep,this.direction);return r.sharedHist&&(l.history=this.history),(this.linked||(this.linked=[])).push({doc:l,sharedHist:r.sharedHist}),l.linked=[{doc:this,isParent:!0,sharedHist:r.sharedHist}],ob(l,Dg(this)),l},unlinkDoc:function(r){if(r instanceof hn&&(r=r.doc),this.linked)for(var a=0;a<this.linked.length;++a){var u=this.linked[a];if(u.doc==r){this.linked.splice(a,1),r.unlinkDoc(this),ab(Dg(this));break}}if(r.history==this.history){var l=[r.id];Go(r,function(d){return l.push(d.id)},!0),r.history=new hc(null),r.history.done=ys(this.history.done,l),r.history.undone=ys(this.history.undone,l)}},iterLinkedDocs:function(r){Go(this,r)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(r){return this.lineSep?r.split(this.lineSep):Si(r)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ke(function(r){r!="rtl"&&(r="ltr"),r!=this.direction&&(this.direction=r,this.iter(function(a){return a.order=null}),this.cm&&YC(this.cm))})}),Ai.prototype.eachLine=Ai.prototype.iter;var kg=0;function lb(r){var a=this;if(Ig(a),!(on(a,r)||Tr(a.display,r))){vn(r),c&&(kg=+new Date);var u=co(a,r,!0),l=r.dataTransfer.files;if(!(!u||a.isReadOnly()))if(l&&l.length&&window.FileReader&&window.File)for(var d=l.length,x=Array(d),S=0,T=function(){++S==d&&We(a,function(){u=wt(a.doc,u);var ae={from:u,to:u,text:a.doc.splitLines(x.filter(function(Ce){return Ce!=null}).join(a.doc.lineSeparator())),origin:"paste"};xs(a.doc,ae),mg(a.doc,Uo(wt(a.doc,u),wt(a.doc,zo(ae))))})()},k=function(ae,Ce){if(a.options.allowDropFileTypes&&Nt(a.options.allowDropFileTypes,ae.type)==-1){T();return}var Fe=new FileReader;Fe.onerror=function(){return T()},Fe.onload=function(){var qe=Fe.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(qe)){T();return}x[Ce]=qe,T()},Fe.readAsText(ae)},M=0;M<l.length;M++)k(l[M],M);else{if(a.state.draggingText&&a.doc.sel.contains(u)>-1){a.state.draggingText(r),setTimeout(function(){return a.display.input.focus()},20);return}try{var K=r.dataTransfer.getData("Text");if(K){var Z;if(a.state.draggingText&&!a.state.draggingText.copy&&(Z=a.listSelections()),yc(a.doc,Uo(u,u)),Z)for(var ce=0;ce<Z.length;++ce)Cs(a.doc,"",Z[ce].anchor,Z[ce].head,"drag");a.replaceSelection(K,"around","paste"),a.display.input.focus()}}catch{}}}}function ub(r,a){if(c&&(!r.state.draggingText||+new Date-kg<100)){Li(a);return}if(!(on(r,a)||Tr(r.display,a))&&(a.dataTransfer.setData("Text",r.getSelection()),a.dataTransfer.effectAllowed="copyMove",a.dataTransfer.setDragImage&&!A)){var u=H("img",null,null,"position: fixed; left: 0; top: 0;");u.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",C&&(u.width=u.height=1,r.display.wrapper.appendChild(u),u._top=u.offsetTop),a.dataTransfer.setDragImage(u,0,0),C&&u.parentNode.removeChild(u)}}function cb(r,a){var u=co(r,a);if(u){var l=document.createDocumentFragment();Vl(r,u,l),r.display.dragCursor||(r.display.dragCursor=H("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),r.display.lineSpace.insertBefore(r.display.dragCursor,r.display.cursorDiv)),le(r.display.dragCursor,l)}}function Ig(r){r.display.dragCursor&&(r.display.lineSpace.removeChild(r.display.dragCursor),r.display.dragCursor=null)}function Mg(r){if(document.getElementsByClassName){for(var a=document.getElementsByClassName("CodeMirror"),u=[],l=0;l<a.length;l++){var d=a[l].CodeMirror;d&&u.push(d)}u.length&&u[0].operation(function(){for(var x=0;x<u.length;x++)r(u[x])})}}var Fg=!1;function db(){Fg||(fb(),Fg=!0)}function fb(){var r;St(window,"resize",function(){r==null&&(r=setTimeout(function(){r=null,Mg(pb)},100))}),St(window,"blur",function(){return Mg(Oo)})}function pb(r){var a=r.display;a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.scrollbarsClipped=!1,r.setSize()}for(var Wo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Yl=0;Yl<10;Yl++)Wo[Yl+48]=Wo[Yl+96]=String(Yl);for(var Cc=65;Cc<=90;Cc++)Wo[Cc]=String.fromCharCode(Cc);for(var Xl=1;Xl<=12;Xl++)Wo[Xl+111]=Wo[Xl+63235]="F"+Xl;var ho={};ho.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ho.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ho.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},ho.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ho.default=q?ho.macDefault:ho.pcDefault;function mb(r){var a=r.split(/-(?!$)/);r=a[a.length-1];for(var u,l,d,x,S=0;S<a.length-1;S++){var T=a[S];if(/^(cmd|meta|m)$/i.test(T))x=!0;else if(/^a(lt)?$/i.test(T))u=!0;else if(/^(c|ctrl|control)$/i.test(T))l=!0;else if(/^s(hift)?$/i.test(T))d=!0;else throw new Error("Unrecognized modifier name: "+T)}return u&&(r="Alt-"+r),l&&(r="Ctrl-"+r),x&&(r="Cmd-"+r),d&&(r="Shift-"+r),r}function hb(r){var a={};for(var u in r)if(r.hasOwnProperty(u)){var l=r[u];if(/^(name|fallthrough|(de|at)tach)$/.test(u))continue;if(l=="..."){delete r[u];continue}for(var d=Dn(u.split(" "),mb),x=0;x<d.length;x++){var S=void 0,T=void 0;x==d.length-1?(T=d.join(" "),S=l):(T=d.slice(0,x+1).join(" "),S="...");var k=a[T];if(!k)a[T]=S;else if(k!=S)throw new Error("Inconsistent bindings for "+T)}delete r[u]}for(var M in a)r[M]=a[M];return r}function ws(r,a,u,l){a=bc(a);var d=a.call?a.call(r,l):a[r];if(d===!1)return"nothing";if(d==="...")return"multi";if(d!=null&&u(d))return"handled";if(a.fallthrough){if(Object.prototype.toString.call(a.fallthrough)!="[object Array]")return ws(r,a.fallthrough,u,l);for(var x=0;x<a.fallthrough.length;x++){var S=ws(r,a.fallthrough[x],u,l);if(S)return S}}}function Ng(r){var a=typeof r=="string"?r:Wo[r.keyCode];return a=="Ctrl"||a=="Alt"||a=="Shift"||a=="Mod"}function Rg(r,a,u){var l=r;return a.altKey&&l!="Alt"&&(r="Alt-"+r),(he?a.metaKey:a.ctrlKey)&&l!="Ctrl"&&(r="Ctrl-"+r),(he?a.ctrlKey:a.metaKey)&&l!="Mod"&&(r="Cmd-"+r),!u&&a.shiftKey&&l!="Shift"&&(r="Shift-"+r),r}function Pg(r,a){if(C&&r.keyCode==34&&r.char)return!1;var u=Wo[r.keyCode];return u==null||r.altGraphKey?!1:(r.keyCode==3&&r.code&&(u=r.code),Rg(u,r,a))}function bc(r){return typeof r=="string"?ho[r]:r}function Ss(r,a){for(var u=r.doc.sel.ranges,l=[],d=0;d<u.length;d++){for(var x=a(u[d]);l.length&&ot(x.from,$e(l).to)<=0;){var S=l.pop();if(ot(S.from,x.from)<0){x.from=S.from;break}}l.push(x)}ke(r,function(){for(var T=l.length-1;T>=0;T--)Cs(r.doc,"",l[T].from,l[T].to,"+delete");Ho(r)})}function Ep(r,a,u){var l=si(r.text,a+u,u);return l<0||l>r.text.length?null:l}function Tp(r,a,u){var l=Ep(r,a.ch,u);return l==null?null:new ye(a.line,l,u<0?"after":"before")}function Ap(r,a,u,l,d){if(r){a.doc.direction=="rtl"&&(d=-d);var x=Lt(u,a.doc.direction);if(x){var S=d<0?$e(x):x[0],T=d<0==(S.level==1),k=T?"after":"before",M;if(S.level>0||a.doc.direction=="rtl"){var K=Kr(a,u);M=d<0?u.text.length-1:0;var Z=zi(a,K,M).top;M=On(function(ce){return zi(a,K,ce).top==Z},d<0==(S.level==1)?S.from:S.to-1,M),k=="before"&&(M=Ep(u,M,1))}else M=d<0?S.to:S.from;return new ye(l,M,k)}}return new ye(l,d<0?u.text.length:0,d<0?"before":"after")}function gb(r,a,u,l){var d=Lt(a,r.doc.direction);if(!d)return Tp(a,u,l);u.ch>=a.text.length?(u.ch=a.text.length,u.sticky="before"):u.ch<=0&&(u.ch=0,u.sticky="after");var x=li(d,u.ch,u.sticky),S=d[x];if(r.doc.direction=="ltr"&&S.level%2==0&&(l>0?S.to>u.ch:S.from<u.ch))return Tp(a,u,l);var T=function(et,ut){return Ep(a,et instanceof ye?et.ch:et,ut)},k,M=function(et){return r.options.lineWrapping?(k=k||Kr(r,a),Na(r,a,k,et)):{begin:0,end:a.text.length}},K=M(u.sticky=="before"?T(u,-1):u.ch);if(r.doc.direction=="rtl"||S.level==1){var Z=S.level==1==l<0,ce=T(u,Z?1:-1);if(ce!=null&&(Z?ce<=S.to&&ce<=K.end:ce>=S.from&&ce>=K.begin)){var ae=Z?"before":"after";return new ye(u.line,ce,ae)}}var Ce=function(et,ut,tt){for(var gt=function(ln,$n){return $n?new ye(u.line,T(ln,1),"before"):new ye(u.line,ln,"after")};et>=0&&et<d.length;et+=ut){var It=d[et],Tt=ut>0==(It.level!=1),Ht=Tt?tt.begin:T(tt.end,-1);if(It.from<=Ht&&Ht<It.to||(Ht=Tt?It.from:T(It.to,-1),tt.begin<=Ht&&Ht<tt.end))return gt(Ht,Tt)}},Fe=Ce(x+l,l,K);if(Fe)return Fe;var qe=l>0?K.end:T(K.begin,-1);return qe!=null&&!(l>0&&qe==a.text.length)&&(Fe=Ce(l>0?0:d.length-1,l,M(qe)),Fe)?Fe:null}var Ql={selectAll:_g,singleSelection:function(r){return r.setSelection(r.getCursor("anchor"),r.getCursor("head"),Xt)},killLine:function(r){return Ss(r,function(a){if(a.empty()){var u=bt(r.doc,a.head.line).text.length;return a.head.ch==u&&a.head.line<r.lastLine()?{from:a.head,to:ye(a.head.line+1,0)}:{from:a.head,to:ye(a.head.line,u)}}else return{from:a.from(),to:a.to()}})},deleteLine:function(r){return Ss(r,function(a){return{from:ye(a.from().line,0),to:wt(r.doc,ye(a.to().line+1,0))}})},delLineLeft:function(r){return Ss(r,function(a){return{from:ye(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(r){return Ss(r,function(a){var u=r.charCoords(a.head,"div").top+5,l=r.coordsChar({left:0,top:u},"div");return{from:l,to:a.from()}})},delWrappedLineRight:function(r){return Ss(r,function(a){var u=r.charCoords(a.head,"div").top+5,l=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:u},"div");return{from:a.from(),to:l}})},undo:function(r){return r.undo()},redo:function(r){return r.redo()},undoSelection:function(r){return r.undoSelection()},redoSelection:function(r){return r.redoSelection()},goDocStart:function(r){return r.extendSelection(ye(r.firstLine(),0))},goDocEnd:function(r){return r.extendSelection(ye(r.lastLine()))},goLineStart:function(r){return r.extendSelectionsBy(function(a){return Vg(r,a.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(r){return r.extendSelectionsBy(function(a){return Lg(r,a.head)},{origin:"+move",bias:1})},goLineEnd:function(r){return r.extendSelectionsBy(function(a){return vb(r,a.head.line)},{origin:"+move",bias:-1})},goLineRight:function(r){return r.extendSelectionsBy(function(a){var u=r.cursorCoords(a.head,"div").top+5;return r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:u},"div")},gn)},goLineLeft:function(r){return r.extendSelectionsBy(function(a){var u=r.cursorCoords(a.head,"div").top+5;return r.coordsChar({left:0,top:u},"div")},gn)},goLineLeftSmart:function(r){return r.extendSelectionsBy(function(a){var u=r.cursorCoords(a.head,"div").top+5,l=r.coordsChar({left:0,top:u},"div");return l.ch<r.getLine(l.line).search(/\S/)?Lg(r,a.head):l},gn)},goLineUp:function(r){return r.moveV(-1,"line")},goLineDown:function(r){return r.moveV(1,"line")},goPageUp:function(r){return r.moveV(-1,"page")},goPageDown:function(r){return r.moveV(1,"page")},goCharLeft:function(r){return r.moveH(-1,"char")},goCharRight:function(r){return r.moveH(1,"char")},goColumnLeft:function(r){return r.moveH(-1,"column")},goColumnRight:function(r){return r.moveH(1,"column")},goWordLeft:function(r){return r.moveH(-1,"word")},goGroupRight:function(r){return r.moveH(1,"group")},goGroupLeft:function(r){return r.moveH(-1,"group")},goWordRight:function(r){return r.moveH(1,"word")},delCharBefore:function(r){return r.deleteH(-1,"codepoint")},delCharAfter:function(r){return r.deleteH(1,"char")},delWordBefore:function(r){return r.deleteH(-1,"word")},delWordAfter:function(r){return r.deleteH(1,"word")},delGroupBefore:function(r){return r.deleteH(-1,"group")},delGroupAfter:function(r){return r.deleteH(1,"group")},indentAuto:function(r){return r.indentSelection("smart")},indentMore:function(r){return r.indentSelection("add")},indentLess:function(r){return r.indentSelection("subtract")},insertTab:function(r){return r.replaceSelection("	")},insertSoftTab:function(r){for(var a=[],u=r.listSelections(),l=r.options.tabSize,d=0;d<u.length;d++){var x=u[d].from(),S=zt(r.getLine(x.line),x.ch,l);a.push(wr(l-S%l))}r.replaceSelections(a)},defaultTab:function(r){r.somethingSelected()?r.indentSelection("add"):r.execCommand("insertTab")},transposeChars:function(r){return ke(r,function(){for(var a=r.listSelections(),u=[],l=0;l<a.length;l++)if(a[l].empty()){var d=a[l].head,x=bt(r.doc,d.line).text;if(x){if(d.ch==x.length&&(d=new ye(d.line,d.ch-1)),d.ch>0)d=new ye(d.line,d.ch+1),r.replaceRange(x.charAt(d.ch-1)+x.charAt(d.ch-2),ye(d.line,d.ch-2),d,"+transpose");else if(d.line>r.doc.first){var S=bt(r.doc,d.line-1).text;S&&(d=new ye(d.line,1),r.replaceRange(x.charAt(0)+r.doc.lineSeparator()+S.charAt(S.length-1),ye(d.line-1,S.length-1),d,"+transpose"))}}u.push(new jt(d,d))}r.setSelections(u)})},newlineAndIndent:function(r){return ke(r,function(){for(var a=r.listSelections(),u=a.length-1;u>=0;u--)r.replaceRange(r.doc.lineSeparator(),a[u].anchor,a[u].head,"+input");a=r.listSelections();for(var l=0;l<a.length;l++)r.indentLine(a[l].from().line,null,!0);Ho(r)})},openLine:function(r){return r.replaceSelection(`
`,"start")},toggleOverwrite:function(r){return r.toggleOverwrite()}};function Vg(r,a){var u=bt(r.doc,a),l=pn(u);return l!=u&&(a=V(l)),Ap(!0,r,l,a,1)}function vb(r,a){var u=bt(r.doc,a),l=Fo(u);return l!=u&&(a=V(l)),Ap(!0,r,u,a,-1)}function Lg(r,a){var u=Vg(r,a.line),l=bt(r.doc,u.line),d=Lt(l,r.doc.direction);if(!d||d[0].level==0){var x=Math.max(u.ch,l.text.search(/\S/)),S=a.line==u.line&&a.ch<=x&&a.ch;return ye(u.line,S?0:x,u.sticky)}return u}function wc(r,a,u){if(typeof a=="string"&&(a=Ql[a],!a))return!1;r.display.input.ensurePolled();var l=r.display.shift,d=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),u&&(r.display.shift=!1),d=a(r)!=Tn}finally{r.display.shift=l,r.state.suppressEdits=!1}return d}function yb(r,a,u){for(var l=0;l<r.state.keyMaps.length;l++){var d=ws(a,r.state.keyMaps[l],u,r);if(d)return d}return r.options.extraKeys&&ws(a,r.options.extraKeys,u,r)||ws(a,r.options.keyMap,u,r)}var _b=new Gn;function Zl(r,a,u,l){var d=r.state.keySeq;if(d){if(Ng(a))return"handled";if(/\'$/.test(a)?r.state.keySeq=null:_b.set(50,function(){r.state.keySeq==d&&(r.state.keySeq=null,r.display.input.reset())}),Bg(r,d+" "+a,u,l))return!0}return Bg(r,a,u,l)}function Bg(r,a,u,l){var d=yb(r,a,l);return d=="multi"&&(r.state.keySeq=a),d=="handled"&&yn(r,"keyHandled",r,a,u),(d=="handled"||d=="multi")&&(vn(u),Ll(r)),!!d}function Og(r,a){var u=Pg(a,!0);return u?a.shiftKey&&!r.state.keySeq?Zl(r,"Shift-"+u,a,function(l){return wc(r,l,!0)})||Zl(r,u,a,function(l){if(typeof l=="string"?/^go[A-Z]/.test(l):l.motion)return wc(r,l)}):Zl(r,u,a,function(l){return wc(r,l)}):!1}function xb(r,a,u){return Zl(r,"'"+u+"'",a,function(l){return wc(r,l,!0)})}var Dp=null;function Hg(r){var a=this;if(!(r.target&&r.target!=a.display.input.getField())&&(a.curOp.focus=ft(Re(a)),!on(a,r))){c&&f<11&&r.keyCode==27&&(r.returnValue=!1);var u=r.keyCode;a.display.shift=u==16||r.shiftKey;var l=Og(a,r);C&&(Dp=l?u:null,!l&&u==88&&!To&&(q?r.metaKey:r.ctrlKey)&&a.replaceSelection("",null,"cut")),t&&!q&&!l&&u==46&&r.shiftKey&&!r.ctrlKey&&document.execCommand&&document.execCommand("cut"),u==18&&!/\bCodeMirror-crosshair\b/.test(a.display.lineDiv.className)&&Cb(a)}}function Cb(r){var a=r.display.lineDiv;yt(a,"CodeMirror-crosshair");function u(l){(l.keyCode==18||!l.altKey)&&(Te(a,"CodeMirror-crosshair"),Vn(document,"keyup",u),Vn(document,"mouseover",u))}St(document,"keyup",u),St(document,"mouseover",u)}function Ug(r){r.keyCode==16&&(this.doc.sel.shift=!1),on(this,r)}function zg(r){var a=this;if(!(r.target&&r.target!=a.display.input.getField())&&!(Tr(a.display,r)||on(a,r)||r.ctrlKey&&!r.altKey||q&&r.metaKey)){var u=r.keyCode,l=r.charCode;if(C&&u==Dp){Dp=null,vn(r);return}if(!(C&&(!r.which||r.which<10)&&Og(a,r))){var d=String.fromCharCode(l??u);d!="\b"&&(xb(a,r,d)||a.display.input.onKeyPress(r))}}}var bb=400,kp=function(r,a,u){this.time=r,this.pos=a,this.button=u};kp.prototype.compare=function(r,a,u){return this.time+bb>r&&ot(a,this.pos)==0&&u==this.button};var jl,eu;function wb(r,a){var u=+new Date;return eu&&eu.compare(u,r,a)?(jl=eu=null,"triple"):jl&&jl.compare(u,r,a)?(eu=new kp(u,r,a),jl=null,"double"):(jl=new kp(u,r,a),eu=null,"single")}function Gg(r){var a=this,u=a.display;if(!(on(a,r)||u.activeTouch&&u.input.supportsTouch())){if(u.input.ensurePolled(),u.shift=r.shiftKey,Tr(u,r)){m||(u.scroller.draggable=!1,setTimeout(function(){return u.scroller.draggable=!0},100));return}if(!Ip(a,r)){var l=co(a,r),d=rt(r),x=l?wb(l,d):"single";st(a).focus(),d==1&&a.state.selectingText&&a.state.selectingText(r),!(l&&Sb(a,d,l,x,r))&&(d==1?l?Tb(a,l,x,r):ui(r)==u.scroller&&vn(r):d==2?(l&&vc(a.doc,l),setTimeout(function(){return u.input.focus()},20)):d==3&&(ve?a.display.input.onContextMenu(r):nr(a)))}}}function Sb(r,a,u,l,d){var x="Click";return l=="double"?x="Double"+x:l=="triple"&&(x="Triple"+x),x=(a==1?"Left":a==2?"Middle":"Right")+x,Zl(r,Rg(x,d),d,function(S){if(typeof S=="string"&&(S=Ql[S]),!S)return!1;var T=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),T=S(r,u)!=Tn}finally{r.state.suppressEdits=!1}return T})}function Eb(r,a,u){var l=r.getOption("configureMouse"),d=l?l(r,a,u):{};if(d.unit==null){var x=X?u.shiftKey&&u.metaKey:u.altKey;d.unit=x?"rectangle":a=="single"?"char":a=="double"?"word":"line"}return(d.extend==null||r.doc.extend)&&(d.extend=r.doc.extend||u.shiftKey),d.addNew==null&&(d.addNew=q?u.metaKey:u.ctrlKey),d.moveOnDrag==null&&(d.moveOnDrag=!(q?u.altKey:u.ctrlKey)),d}function Tb(r,a,u,l){c?setTimeout(_t(Va,r),0):r.curOp.focus=ft(Re(r));var d=Eb(r,u,l),x=r.doc.sel,S;r.options.dragDrop&&ei&&!r.isReadOnly()&&u=="single"&&(S=x.contains(a))>-1&&(ot((S=x.ranges[S]).from(),a)<0||a.xRel>0)&&(ot(S.to(),a)>0||a.xRel<0)?Ab(r,l,a,d):Db(r,l,a,d)}function Ab(r,a,u,l){var d=r.display,x=!1,S=We(r,function(M){m&&(d.scroller.draggable=!1),r.state.draggingText=!1,r.state.delayingBlurEvent&&(r.hasFocus()?r.state.delayingBlurEvent=!1:nr(r)),Vn(d.wrapper.ownerDocument,"mouseup",S),Vn(d.wrapper.ownerDocument,"mousemove",T),Vn(d.scroller,"dragstart",k),Vn(d.scroller,"drop",S),x||(vn(M),l.addNew||vc(r.doc,u,null,null,l.extend),m&&!A||c&&f==9?setTimeout(function(){d.wrapper.ownerDocument.body.focus({preventScroll:!0}),d.input.focus()},20):d.input.focus())}),T=function(M){x=x||Math.abs(a.clientX-M.clientX)+Math.abs(a.clientY-M.clientY)>=10},k=function(){return x=!0};m&&(d.scroller.draggable=!0),r.state.draggingText=S,S.copy=!l.moveOnDrag,St(d.wrapper.ownerDocument,"mouseup",S),St(d.wrapper.ownerDocument,"mousemove",T),St(d.scroller,"dragstart",k),St(d.scroller,"drop",S),r.state.delayingBlurEvent=!0,setTimeout(function(){return d.input.focus()},20),d.scroller.dragDrop&&d.scroller.dragDrop()}function qg(r,a,u){if(u=="char")return new jt(a,a);if(u=="word")return r.findWordAt(a);if(u=="line")return new jt(ye(a.line,0),wt(r.doc,ye(a.line+1,0)));var l=u(r,a);return new jt(l.from,l.to)}function Db(r,a,u,l){c&&nr(r);var d=r.display,x=r.doc;vn(a);var S,T,k=x.sel,M=k.ranges;if(l.addNew&&!l.extend?(T=x.sel.contains(u),T>-1?S=M[T]:S=new jt(u,u)):(S=x.sel.primary(),T=x.sel.primIndex),l.unit=="rectangle")l.addNew||(S=new jt(u,u)),u=co(r,a,!0,!0),T=-1;else{var K=qg(r,u,l.unit);l.extend?S=wp(S,K.anchor,K.head,l.extend):S=K}l.addNew?T==-1?(T=M.length,pi(x,kr(r,M.concat([S]),T),{scroll:!1,origin:"*mouse"})):M.length>1&&M[T].empty()&&l.unit=="char"&&!l.extend?(pi(x,kr(r,M.slice(0,T).concat(M.slice(T+1)),0),{scroll:!1,origin:"*mouse"}),k=x.sel):Sp(x,T,S,Xn):(T=0,pi(x,new rr([S],0),Xn),k=x.sel);var Z=u;function ce(tt){if(ot(Z,tt)!=0)if(Z=tt,l.unit=="rectangle"){for(var gt=[],It=r.options.tabSize,Tt=zt(bt(x,u.line).text,u.ch,It),Ht=zt(bt(x,tt.line).text,tt.ch,It),ln=Math.min(Tt,Ht),$n=Math.max(Tt,Ht),_n=Math.min(u.line,tt.line),Wi=Math.min(r.lastLine(),Math.max(u.line,tt.line));_n<=Wi;_n++){var Di=bt(x,_n).text,Ln=An(Di,ln,It);ln==$n?gt.push(new jt(ye(_n,Ln),ye(_n,Ln))):Di.length>Ln&&gt.push(new jt(ye(_n,Ln),ye(_n,An(Di,$n,It))))}gt.length||gt.push(new jt(u,u)),pi(x,kr(r,k.ranges.slice(0,T).concat(gt),T),{origin:"*mouse",scroll:!1}),r.scrollIntoView(tt)}else{var ki=S,ii=qg(r,tt,l.unit),Un=ki.anchor,Bn;ot(ii.anchor,Un)>0?(Bn=ii.head,Un=oo(ki.from(),ii.anchor)):(Bn=ii.anchor,Un=Sn(ki.to(),ii.head));var En=k.ranges.slice(0);En[T]=kb(r,new jt(wt(x,Un),Bn)),pi(x,kr(r,En,T),Xn)}}var ae=d.wrapper.getBoundingClientRect(),Ce=0;function Fe(tt){var gt=++Ce,It=co(r,tt,!0,l.unit=="rectangle");if(It)if(ot(It,Z)!=0){r.curOp.focus=ft(Re(r)),ce(It);var Tt=gr(d,x);(It.line>=Tt.to||It.line<Tt.from)&&setTimeout(We(r,function(){Ce==gt&&Fe(tt)}),150)}else{var Ht=tt.clientY<ae.top?-20:tt.clientY>ae.bottom?20:0;Ht&&setTimeout(We(r,function(){Ce==gt&&(d.scroller.scrollTop+=Ht,Fe(tt))}),50)}}function qe(tt){r.state.selectingText=!1,Ce=1/0,tt&&(vn(tt),d.input.focus()),Vn(d.wrapper.ownerDocument,"mousemove",et),Vn(d.wrapper.ownerDocument,"mouseup",ut),x.history.lastSelOrigin=null}var et=We(r,function(tt){tt.buttons===0||!rt(tt)?qe(tt):Fe(tt)}),ut=We(r,qe);r.state.selectingText=ut,St(d.wrapper.ownerDocument,"mousemove",et),St(d.wrapper.ownerDocument,"mouseup",ut)}function kb(r,a){var u=a.anchor,l=a.head,d=bt(r.doc,u.line);if(ot(u,l)==0&&u.sticky==l.sticky)return a;var x=Lt(d);if(!x)return a;var S=li(x,u.ch,u.sticky),T=x[S];if(T.from!=u.ch&&T.to!=u.ch)return a;var k=S+(T.from==u.ch==(T.level!=1)?0:1);if(k==0||k==x.length)return a;var M;if(l.line!=u.line)M=(l.line-u.line)*(r.doc.direction=="ltr"?1:-1)>0;else{var K=li(x,l.ch,l.sticky),Z=K-S||(l.ch-u.ch)*(T.level==1?-1:1);K==k-1||K==k?M=Z<0:M=Z>0}var ce=x[k+(M?-1:0)],ae=M==(ce.level==1),Ce=ae?ce.from:ce.to,Fe=ae?"after":"before";return u.ch==Ce&&u.sticky==Fe?a:new jt(new ye(u.line,Ce,Fe),l)}function Wg(r,a,u,l){var d,x;if(a.touches)d=a.touches[0].clientX,x=a.touches[0].clientY;else try{d=a.clientX,x=a.clientY}catch{return!1}if(d>=Math.floor(r.display.gutters.getBoundingClientRect().right))return!1;l&&vn(a);var S=r.display,T=S.lineDiv.getBoundingClientRect();if(x>T.bottom||!kn(r,u))return wn(a);x-=T.top-S.viewOffset;for(var k=0;k<r.display.gutterSpecs.length;++k){var M=S.gutters.childNodes[k];if(M&&M.getBoundingClientRect().right>=d){var K=Q(r.doc,x),Z=r.display.gutterSpecs[k];return Qt(r,u,r,K,Z.className,a),wn(a)}}}function Ip(r,a){return Wg(r,a,"gutterClick",!0)}function $g(r,a){Tr(r.display,a)||Ib(r,a)||on(r,a,"contextmenu")||ve||r.display.input.onContextMenu(a)}function Ib(r,a){return kn(r,"gutterContextMenu")?Wg(r,a,"gutterContextMenu",!1):!1}function Kg(r){r.display.wrapper.className=r.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+r.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Jr(r)}var Es={toString:function(){return"CodeMirror.Init"}},Jg={},Sc={};function Mb(r){var a=r.optionHandlers;function u(l,d,x,S){r.defaults[l]=d,x&&(a[l]=S?function(T,k,M){M!=Es&&x(T,k,M)}:x)}r.defineOption=u,r.Init=Es,u("value","",function(l,d){return l.setValue(d)},!0),u("mode",null,function(l,d){l.doc.modeOption=d,xp(l)},!0),u("indentUnit",2,xp,!0),u("indentWithTabs",!1),u("smartIndent",!0),u("tabSize",4,function(l){zl(l),Jr(l),fi(l)},!0),u("lineSeparator",null,function(l,d){if(l.doc.lineSep=d,!!d){var x=[],S=l.doc.first;l.doc.iter(function(k){for(var M=0;;){var K=k.text.indexOf(d,M);if(K==-1)break;M=K+d.length,x.push(ye(S,K))}S++});for(var T=x.length-1;T>=0;T--)Cs(l.doc,d,x[T],ye(x[T].line,x[T].ch+d.length))}}),u("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(l,d,x){l.state.specialChars=new RegExp(d.source+(d.test("	")?"":"|	"),"g"),x!=Es&&l.refresh()}),u("specialCharPlaceholder",xl,function(l){return l.refresh()},!0),u("electricChars",!0),u("inputStyle",O?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),u("spellcheck",!1,function(l,d){return l.getInputField().spellcheck=d},!0),u("autocorrect",!1,function(l,d){return l.getInputField().autocorrect=d},!0),u("autocapitalize",!1,function(l,d){return l.getInputField().autocapitalize=d},!0),u("rtlMoveVisually",!j),u("wholeLineUpdateBefore",!0),u("theme","default",function(l){Kg(l),eo(l)},!0),u("keyMap","default",function(l,d,x){var S=bc(d),T=x!=Es&&bc(x);T&&T.detach&&T.detach(l,S),S.attach&&S.attach(l,T||null)}),u("extraKeys",null),u("configureMouse",null),u("lineWrapping",!1,Nb,!0),u("gutters",[],function(l,d){l.display.gutterSpecs=po(d,l.options.lineNumbers),eo(l)},!0),u("fixedGutter",!0,function(l,d){l.display.gutters.style.left=d?gs(l.display)+"px":"0",l.refresh()},!0),u("coverGutterNextToScrollbar",!1,function(l){return Y(l)},!0),u("scrollbarStyle","native",function(l){se(l),Y(l),l.display.scrollbars.setScrollTop(l.doc.scrollTop),l.display.scrollbars.setScrollLeft(l.doc.scrollLeft)},!0),u("lineNumbers",!1,function(l,d){l.display.gutterSpecs=po(l.options.gutters,d),eo(l)},!0),u("firstLineNumber",1,eo,!0),u("lineNumberFormatter",function(l){return l},eo,!0),u("showCursorWhenSelecting",!1,Pa,!0),u("resetSelectionOnContextMenu",!0),u("lineWiseCopyCut",!0),u("pasteLinesPerSelection",!0),u("selectionsMayTouch",!1),u("readOnly",!1,function(l,d){d=="nocursor"&&(Oo(l),l.display.input.blur()),l.display.input.readOnlyChanged(d)}),u("screenReaderLabel",null,function(l,d){d=d===""?null:d,l.display.input.screenReaderLabelChanged(d)}),u("disableInput",!1,function(l,d){d||l.display.input.reset()},!0),u("dragDrop",!0,Fb),u("allowDropFileTypes",null),u("cursorBlinkRate",530),u("cursorScrollMargin",0),u("cursorHeight",1,Pa,!0),u("singleCursorHeightPerLine",!0,Pa,!0),u("workTime",100),u("workDelay",100),u("flattenSpans",!0,zl,!0),u("addModeClass",!1,zl,!0),u("pollInterval",100),u("undoDepth",200,function(l,d){return l.doc.history.undoDepth=d}),u("historyEventDelay",1250),u("viewportMargin",10,function(l){return l.refresh()},!0),u("maxHighlightLength",1e4,zl,!0),u("moveInputWithCursor",!0,function(l,d){d||l.display.input.resetPosition()}),u("tabindex",null,function(l,d){return l.display.input.getField().tabIndex=d||""}),u("autofocus",null),u("direction","ltr",function(l,d){return l.doc.setDirection(d)},!0),u("phrases",null)}function Fb(r,a,u){var l=u&&u!=Es;if(!a!=!l){var d=r.display.dragFunctions,x=a?St:Vn;x(r.display.scroller,"dragstart",d.start),x(r.display.scroller,"dragenter",d.enter),x(r.display.scroller,"dragover",d.over),x(r.display.scroller,"dragleave",d.leave),x(r.display.scroller,"drop",d.drop)}}function Nb(r){r.options.lineWrapping?(yt(r.display.wrapper,"CodeMirror-wrap"),r.display.sizer.style.minWidth="",r.display.sizerWidth=null):(Te(r.display.wrapper,"CodeMirror-wrap"),yl(r)),Pl(r),fi(r),Jr(r),setTimeout(function(){return Y(r)},100)}function hn(r,a){var u=this;if(!(this instanceof hn))return new hn(r,a);this.options=a=a?Qe(a):{},Qe(Jg,a,!1);var l=a.value;typeof l=="string"?l=new Ai(l,a.mode,null,a.lineSeparator,a.direction):a.mode&&(l.modeOption=a.mode),this.doc=l;var d=new hn.inputStyles[a.inputStyle](this),x=this.display=new yp(r,l,d,a);x.wrapper.CodeMirror=this,Kg(this),a.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),se(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Gn,keySeq:null,specialChars:null},a.autofocus&&!O&&x.input.focus(),c&&f<11&&setTimeout(function(){return u.display.input.reset(!0)},20),Rb(this),db(),Ge(this),this.curOp.forceUpdate=!0,ag(this,l),a.autofocus&&!O||this.hasFocus()?setTimeout(function(){u.hasFocus()&&!u.state.focused&&Bl(u)},20):Oo(this);for(var S in Sc)Sc.hasOwnProperty(S)&&Sc[S](this,a[S],Es);ir(this),a.finishInit&&a.finishInit(this);for(var T=0;T<Mp.length;++T)Mp[T](this);ue(this),m&&a.lineWrapping&&getComputedStyle(x.lineDiv).textRendering=="optimizelegibility"&&(x.lineDiv.style.textRendering="auto")}hn.defaults=Jg,hn.optionHandlers=Sc;function Rb(r){var a=r.display;St(a.scroller,"mousedown",We(r,Gg)),c&&f<11?St(a.scroller,"dblclick",We(r,function(k){if(!on(r,k)){var M=co(r,k);if(!(!M||Ip(r,k)||Tr(r.display,k))){vn(k);var K=r.findWordAt(M);vc(r.doc,K.anchor,K.head)}}})):St(a.scroller,"dblclick",function(k){return on(r,k)||vn(k)}),St(a.scroller,"contextmenu",function(k){return $g(r,k)}),St(a.input.getField(),"contextmenu",function(k){a.scroller.contains(k.target)||$g(r,k)});var u,l={end:0};function d(){a.activeTouch&&(u=setTimeout(function(){return a.activeTouch=null},1e3),l=a.activeTouch,l.end=+new Date)}function x(k){if(k.touches.length!=1)return!1;var M=k.touches[0];return M.radiusX<=1&&M.radiusY<=1}function S(k,M){if(M.left==null)return!0;var K=M.left-k.left,Z=M.top-k.top;return K*K+Z*Z>400}St(a.scroller,"touchstart",function(k){if(!on(r,k)&&!x(k)&&!Ip(r,k)){a.input.ensurePolled(),clearTimeout(u);var M=+new Date;a.activeTouch={start:M,moved:!1,prev:M-l.end<=300?l:null},k.touches.length==1&&(a.activeTouch.left=k.touches[0].pageX,a.activeTouch.top=k.touches[0].pageY)}}),St(a.scroller,"touchmove",function(){a.activeTouch&&(a.activeTouch.moved=!0)}),St(a.scroller,"touchend",function(k){var M=a.activeTouch;if(M&&!Tr(a,k)&&M.left!=null&&!M.moved&&new Date-M.start<300){var K=r.coordsChar(a.activeTouch,"page"),Z;!M.prev||S(M,M.prev)?Z=new jt(K,K):!M.prev.prev||S(M,M.prev.prev)?Z=r.findWordAt(K):Z=new jt(ye(K.line,0),wt(r.doc,ye(K.line+1,0))),r.setSelection(Z.anchor,Z.head),r.focus(),vn(k)}d()}),St(a.scroller,"touchcancel",d),St(a.scroller,"scroll",function(){a.scroller.clientHeight&&(w(r,a.scroller.scrollTop),D(r,a.scroller.scrollLeft,!0),Qt(r,"scroll",r))}),St(a.scroller,"mousewheel",function(k){return ng(r,k)}),St(a.scroller,"DOMMouseScroll",function(k){return ng(r,k)}),St(a.wrapper,"scroll",function(){return a.wrapper.scrollTop=a.wrapper.scrollLeft=0}),a.dragFunctions={enter:function(k){on(r,k)||Li(k)},over:function(k){on(r,k)||(cb(r,k),Li(k))},start:function(k){return ub(r,k)},drop:We(r,lb),leave:function(k){on(r,k)||Ig(r)}};var T=a.input.getField();St(T,"keyup",function(k){return Ug.call(r,k)}),St(T,"keydown",We(r,Hg)),St(T,"keypress",We(r,zg)),St(T,"focus",function(k){return Bl(r,k)}),St(T,"blur",function(k){return Oo(r,k)})}var Mp=[];hn.defineInitHook=function(r){return Mp.push(r)};function tu(r,a,u,l){var d=r.doc,x;u==null&&(u="add"),u=="smart"&&(d.mode.indent?x=cr(r,a).state:u="prev");var S=r.options.tabSize,T=bt(d,a),k=zt(T.text,null,S);T.stateAfter&&(T.stateAfter=null);var M=T.text.match(/^\s*/)[0],K;if(!l&&!/\S/.test(T.text))K=0,u="not";else if(u=="smart"&&(K=d.mode.indent(x,T.text.slice(M.length),T.text),K==Tn||K>150)){if(!l)return;u="prev"}u=="prev"?a>d.first?K=zt(bt(d,a-1).text,null,S):K=0:u=="add"?K=k+r.options.indentUnit:u=="subtract"?K=k-r.options.indentUnit:typeof u=="number"&&(K=k+u),K=Math.max(0,K);var Z="",ce=0;if(r.options.indentWithTabs)for(var ae=Math.floor(K/S);ae;--ae)ce+=S,Z+="	";if(ce<K&&(Z+=wr(K-ce)),Z!=M)return Cs(d,Z,ye(a,0),ye(a,M.length),"+input"),T.stateAfter=null,!0;for(var Ce=0;Ce<d.sel.ranges.length;Ce++){var Fe=d.sel.ranges[Ce];if(Fe.head.line==a&&Fe.head.ch<M.length){var qe=ye(a,M.length);Sp(d,Ce,new jt(qe,qe));break}}}var Ir=null;function Ec(r){Ir=r}function Fp(r,a,u,l,d){var x=r.doc;r.display.shift=!1,l||(l=x.sel);var S=+new Date-200,T=d=="paste"||r.state.pasteIncoming>S,k=Si(a),M=null;if(T&&l.ranges.length>1)if(Ir&&Ir.text.join(`
`)==a){if(l.ranges.length%Ir.text.length==0){M=[];for(var K=0;K<Ir.text.length;K++)M.push(x.splitLines(Ir.text[K]))}}else k.length==l.ranges.length&&r.options.pasteLinesPerSelection&&(M=Dn(k,function(et){return[et]}));for(var Z=r.curOp.updateInput,ce=l.ranges.length-1;ce>=0;ce--){var ae=l.ranges[ce],Ce=ae.from(),Fe=ae.to();ae.empty()&&(u&&u>0?Ce=ye(Ce.line,Ce.ch-u):r.state.overwrite&&!T?Fe=ye(Fe.line,Math.min(bt(x,Fe.line).text.length,Fe.ch+$e(k).length)):T&&Ir&&Ir.lineWise&&Ir.text.join(`
`)==k.join(`
`)&&(Ce=Fe=ye(Ce.line,0)));var qe={from:Ce,to:Fe,text:M?M[ce%M.length]:k,origin:d||(T?"paste":r.state.cutIncoming>S?"cut":"+input")};xs(r.doc,qe),yn(r,"inputRead",r,qe)}a&&!T&&Xg(r,a),Ho(r),r.curOp.updateInput<2&&(r.curOp.updateInput=Z),r.curOp.typing=!0,r.state.pasteIncoming=r.state.cutIncoming=-1}function Yg(r,a){var u=r.clipboardData&&r.clipboardData.getData("Text");if(u)return r.preventDefault(),!a.isReadOnly()&&!a.options.disableInput&&a.hasFocus()&&ke(a,function(){return Fp(a,u,0,null,"paste")}),!0}function Xg(r,a){if(!(!r.options.electricChars||!r.options.smartIndent))for(var u=r.doc.sel,l=u.ranges.length-1;l>=0;l--){var d=u.ranges[l];if(!(d.head.ch>100||l&&u.ranges[l-1].head.line==d.head.line)){var x=r.getModeAt(d.head),S=!1;if(x.electricChars){for(var T=0;T<x.electricChars.length;T++)if(a.indexOf(x.electricChars.charAt(T))>-1){S=tu(r,d.head.line,"smart");break}}else x.electricInput&&x.electricInput.test(bt(r.doc,d.head.line).text.slice(0,d.head.ch))&&(S=tu(r,d.head.line,"smart"));S&&yn(r,"electricInput",r,d.head.line)}}}function Qg(r){for(var a=[],u=[],l=0;l<r.doc.sel.ranges.length;l++){var d=r.doc.sel.ranges[l].head.line,x={anchor:ye(d,0),head:ye(d+1,0)};u.push(x),a.push(r.getRange(x.anchor,x.head))}return{text:a,ranges:u}}function Np(r,a,u,l){r.setAttribute("autocorrect",u?"on":"off"),r.setAttribute("autocapitalize",l?"on":"off"),r.setAttribute("spellcheck",!!a)}function Zg(){var r=H("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),a=H("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return m?r.style.width="1000px":r.setAttribute("wrap","off"),B&&(r.style.border="1px solid black"),a}function Pb(r){var a=r.optionHandlers,u=r.helpers={};r.prototype={constructor:r,focus:function(){st(this).focus(),this.display.input.focus()},setOption:function(l,d){var x=this.options,S=x[l];x[l]==d&&l!="mode"||(x[l]=d,a.hasOwnProperty(l)&&We(this,a[l])(this,d,S),Qt(this,"optionChange",this,l))},getOption:function(l){return this.options[l]},getDoc:function(){return this.doc},addKeyMap:function(l,d){this.state.keyMaps[d?"push":"unshift"](bc(l))},removeKeyMap:function(l){for(var d=this.state.keyMaps,x=0;x<d.length;++x)if(d[x]==l||d[x].name==l)return d.splice(x,1),!0},addOverlay:je(function(l,d){var x=l.token?l:r.getMode(this.options,l);if(x.startState)throw new Error("Overlays may not be stateful.");Qn(this.state.overlays,{mode:x,modeSpec:l,opaque:d&&d.opaque,priority:d&&d.priority||0},function(S){return S.priority}),this.state.modeGen++,fi(this)}),removeOverlay:je(function(l){for(var d=this.state.overlays,x=0;x<d.length;++x){var S=d[x].modeSpec;if(S==l||typeof l=="string"&&S.name==l){d.splice(x,1),this.state.modeGen++,fi(this);return}}}),indentLine:je(function(l,d,x){typeof d!="string"&&typeof d!="number"&&(d==null?d=this.options.smartIndent?"smart":"prev":d=d?"add":"subtract"),Se(this.doc,l)&&tu(this,l,d,x)}),indentSelection:je(function(l){for(var d=this.doc.sel.ranges,x=-1,S=0;S<d.length;S++){var T=d[S];if(T.empty())T.head.line>x&&(tu(this,T.head.line,l,!0),x=T.head.line,S==this.doc.sel.primIndex&&Ho(this));else{var k=T.from(),M=T.to(),K=Math.max(x,k.line);x=Math.min(this.lastLine(),M.line-(M.ch?0:1))+1;for(var Z=K;Z<x;++Z)tu(this,Z,l);var ce=this.doc.sel.ranges;k.ch==0&&d.length==ce.length&&ce[S].from().ch>0&&Sp(this.doc,S,new jt(k,ce[S].to()),Xt)}}}),getTokenAt:function(l,d){return pl(this,l,d)},getLineTokens:function(l,d){return pl(this,ye(l),d,!0)},getTokenTypeAt:function(l){l=wt(this.doc,l);var d=fl(this,bt(this.doc,l.line)),x=0,S=(d.length-1)/2,T=l.ch,k;if(T==0)k=d[2];else for(;;){var M=x+S>>1;if((M?d[M*2-1]:0)>=T)S=M;else if(d[M*2+1]<T)x=M+1;else{k=d[M*2+2];break}}var K=k?k.indexOf("overlay "):-1;return K<0?k:K==0?null:k.slice(0,K-1)},getModeAt:function(l){var d=this.doc.mode;return d.innerMode?r.innerMode(d,this.getTokenAt(l).state).mode:d},getHelper:function(l,d){return this.getHelpers(l,d)[0]},getHelpers:function(l,d){var x=[];if(!u.hasOwnProperty(d))return x;var S=u[d],T=this.getModeAt(l);if(typeof T[d]=="string")S[T[d]]&&x.push(S[T[d]]);else if(T[d])for(var k=0;k<T[d].length;k++){var M=S[T[d][k]];M&&x.push(M)}else T.helperType&&S[T.helperType]?x.push(S[T.helperType]):S[T.name]&&x.push(S[T.name]);for(var K=0;K<S._global.length;K++){var Z=S._global[K];Z.pred(T,this)&&Nt(x,Z.val)==-1&&x.push(Z.val)}return x},getStateAfter:function(l,d){var x=this.doc;return l=ns(x,l??x.first+x.size-1),cr(this,l+1,d).state},cursorCoords:function(l,d){var x,S=this.doc.sel.primary();return l==null?x=S.head:typeof l=="object"?x=wt(this.doc,l):x=l?S.from():S.to(),Gi(this,x,d||"page")},charCoords:function(l,d){return Lo(this,wt(this.doc,l),d||"page")},coordsChar:function(l,d){return l=Ma(this,l,d||"page"),Dl(this,l.left,l.top)},lineAtHeight:function(l,d){return l=Ma(this,{top:l,left:0},d||"page").top,Q(this.doc,l+this.display.viewOffset)},heightAtLine:function(l,d,x){var S=!1,T;if(typeof l=="number"){var k=this.doc.first+this.doc.size-1;l<this.doc.first?l=this.doc.first:l>k&&(l=k,S=!0),T=bt(this.doc,l)}else T=l;return Vo(this,T,{top:0,left:0},d||"page",x||S).top+(S?this.doc.height-pr(T):0)},defaultTextHeight:function(){return Bo(this.display)},defaultCharWidth:function(){return uo(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(l,d,x,S,T){var k=this.display;l=Gi(this,wt(this.doc,l));var M=l.bottom,K=l.left;if(d.style.position="absolute",d.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(d),k.sizer.appendChild(d),S=="over")M=l.top;else if(S=="above"||S=="near"){var Z=Math.max(k.wrapper.clientHeight,this.doc.height),ce=Math.max(k.sizer.clientWidth,k.lineSpace.clientWidth);(S=="above"||l.bottom+d.offsetHeight>Z)&&l.top>d.offsetHeight?M=l.top-d.offsetHeight:l.bottom+d.offsetHeight<=Z&&(M=l.bottom),K+d.offsetWidth>ce&&(K=ce-d.offsetWidth)}d.style.top=M+"px",d.style.left=d.style.right="",T=="right"?(K=k.sizer.clientWidth-d.offsetWidth,d.style.right="0px"):(T=="left"?K=0:T=="middle"&&(K=(k.sizer.clientWidth-d.offsetWidth)/2),d.style.left=K+"px"),x&&jr(this,{left:K,top:M,right:K+d.offsetWidth,bottom:M+d.offsetHeight})},triggerOnKeyDown:je(Hg),triggerOnKeyPress:je(zg),triggerOnKeyUp:Ug,triggerOnMouseDown:je(Gg),execCommand:function(l){if(Ql.hasOwnProperty(l))return Ql[l].call(null,this)},triggerElectric:je(function(l){Xg(this,l)}),findPosH:function(l,d,x,S){var T=1;d<0&&(T=-1,d=-d);for(var k=wt(this.doc,l),M=0;M<d&&(k=Rp(this.doc,k,T,x,S),!k.hitSide);++M);return k},moveH:je(function(l,d){var x=this;this.extendSelectionsBy(function(S){return x.display.shift||x.doc.extend||S.empty()?Rp(x.doc,S.head,l,d,x.options.rtlMoveVisually):l<0?S.from():S.to()},gn)}),deleteH:je(function(l,d){var x=this.doc.sel,S=this.doc;x.somethingSelected()?S.replaceSelection("",null,"+delete"):Ss(this,function(T){var k=Rp(S,T.head,l,d,!1);return l<0?{from:k,to:T.head}:{from:T.head,to:k}})}),findPosV:function(l,d,x,S){var T=1,k=S;d<0&&(T=-1,d=-d);for(var M=wt(this.doc,l),K=0;K<d;++K){var Z=Gi(this,M,"div");if(k==null?k=Z.left:Z.left=k,M=jg(this,Z,T,x),M.hitSide)break}return M},moveV:je(function(l,d){var x=this,S=this.doc,T=[],k=!this.display.shift&&!S.extend&&S.sel.somethingSelected();if(S.extendSelectionsBy(function(K){if(k)return l<0?K.from():K.to();var Z=Gi(x,K.head,"div");K.goalColumn!=null&&(Z.left=K.goalColumn),T.push(Z.left);var ce=jg(x,Z,l,d);return d=="page"&&K==S.sel.primary()&&Ul(x,Lo(x,ce,"div").top-Z.top),ce},gn),T.length)for(var M=0;M<S.sel.ranges.length;M++)S.sel.ranges[M].goalColumn=T[M]}),findWordAt:function(l){var d=this.doc,x=bt(d,l.line).text,S=l.ch,T=l.ch;if(x){var k=this.getHelper(l,"wordChars");(l.sticky=="before"||T==x.length)&&S?--S:++T;for(var M=x.charAt(S),K=bn(M,k)?function(Z){return bn(Z,k)}:/\s/.test(M)?function(Z){return/\s/.test(Z)}:function(Z){return!/\s/.test(Z)&&!bn(Z)};S>0&&K(x.charAt(S-1));)--S;for(;T<x.length&&K(x.charAt(T));)++T}return new jt(ye(l.line,S),ye(l.line,T))},toggleOverwrite:function(l){l!=null&&l==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?yt(this.display.cursorDiv,"CodeMirror-overwrite"):Te(this.display.cursorDiv,"CodeMirror-overwrite"),Qt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ft(Re(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:je(function(l,d){Ba(this,l,d)}),getScrollInfo:function(){var l=this.display.scroller;return{left:l.scrollLeft,top:l.scrollTop,height:l.scrollHeight-mr(this)-this.display.barHeight,width:l.scrollWidth-mr(this)-this.display.barWidth,clientHeight:Da(this),clientWidth:Ar(this)}},scrollIntoView:je(function(l,d){l==null?(l={from:this.doc.sel.primary().head,to:null},d==null&&(d=this.options.cursorScrollMargin)):typeof l=="number"?l={from:ye(l,0),to:null}:l.from==null&&(l={from:l,to:null}),l.to||(l.to=l.from),l.margin=d||0,l.from.line!=null?vp(this,l):_(this,l.from,l.to,l.margin)}),setSize:je(function(l,d){var x=this,S=function(k){return typeof k=="number"||/^\d+$/.test(String(k))?k+"px":k};l!=null&&(this.display.wrapper.style.width=S(l)),d!=null&&(this.display.wrapper.style.height=S(d)),this.options.lineWrapping&&Al(this);var T=this.display.viewFrom;this.doc.iter(T,this.display.viewTo,function(k){if(k.widgets){for(var M=0;M<k.widgets.length;M++)if(k.widgets[M].noHScroll){Qr(x,T,"widget");break}}++T}),this.curOp.forceUpdate=!0,Qt(this,"refresh",this)}),operation:function(l){return ke(this,l)},startOperation:function(){return Ge(this)},endOperation:function(){return ue(this)},refresh:je(function(){var l=this.display.cachedTextHeight;fi(this),this.curOp.forceUpdate=!0,Jr(this),Ba(this,this.doc.scrollLeft,this.doc.scrollTop),ni(this.display),(l==null||Math.abs(l-Bo(this.display))>.5||this.options.lineWrapping)&&Pl(this),Qt(this,"refresh",this)}),swapDoc:je(function(l){var d=this.doc;return d.cm=null,this.state.selectingText&&this.state.selectingText(),ag(this,l),Jr(this),this.display.input.reset(),Ba(this,l.scrollLeft,l.scrollTop),this.curOp.forceScroll=!0,yn(this,"swapDoc",this,d),d}),phrase:function(l){var d=this.options.phrases;return d&&Object.prototype.hasOwnProperty.call(d,l)?d[l]:l},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},jn(r),r.registerHelper=function(l,d,x){u.hasOwnProperty(l)||(u[l]=r[l]={_global:[]}),u[l][d]=x},r.registerGlobalHelper=function(l,d,x,S){r.registerHelper(l,d,S),u[l]._global.push({pred:x,val:S})}}function Rp(r,a,u,l,d){var x=a,S=u,T=bt(r,a.line),k=d&&r.direction=="rtl"?-u:u;function M(){var ut=a.line+k;return ut<r.first||ut>=r.first+r.size?!1:(a=new ye(ut,a.ch,a.sticky),T=bt(r,ut))}function K(ut){var tt;if(l=="codepoint"){var gt=T.text.charCodeAt(a.ch+(u>0?0:-1));if(isNaN(gt))tt=null;else{var It=u>0?gt>=55296&&gt<56320:gt>=56320&&gt<57343;tt=new ye(a.line,Math.max(0,Math.min(T.text.length,a.ch+u*(It?2:1))),-u)}}else d?tt=gb(r.cm,T,a,u):tt=Tp(T,a,u);if(tt==null)if(!ut&&M())a=Ap(d,r.cm,T,a.line,k);else return!1;else a=tt;return!0}if(l=="char"||l=="codepoint")K();else if(l=="column")K(!0);else if(l=="word"||l=="group")for(var Z=null,ce=l=="group",ae=r.cm&&r.cm.getHelper(a,"wordChars"),Ce=!0;!(u<0&&!K(!Ce));Ce=!1){var Fe=T.text.charAt(a.ch)||`
`,qe=bn(Fe,ae)?"w":ce&&Fe==`
`?"n":!ce||/\s/.test(Fe)?null:"p";if(ce&&!Ce&&!qe&&(qe="s"),Z&&Z!=qe){u<0&&(u=1,K(),a.sticky="after");break}if(qe&&(Z=qe),u>0&&!K(!Ce))break}var et=_c(r,a,x,S,!0);return Gt(x,et)&&(et.hitSide=!0),et}function jg(r,a,u,l){var d=r.doc,x=a.left,S;if(l=="page"){var T=Math.min(r.display.wrapper.clientHeight,st(r).innerHeight||d(r).documentElement.clientHeight),k=Math.max(T-.5*Bo(r.display),3);S=(u>0?a.bottom:a.top)+u*k}else l=="line"&&(S=u>0?a.bottom+3:a.top-3);for(var M;M=Dl(r,x,S),!!M.outside;){if(u<0?S<=0:S>=d.height){M.hitSide=!0;break}S+=u*5}return M}var nn=function(r){this.cm=r,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Gn,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};nn.prototype.init=function(r){var a=this,u=this,l=u.cm,d=u.div=r.lineDiv;d.contentEditable=!0,Np(d,l.options.spellcheck,l.options.autocorrect,l.options.autocapitalize);function x(T){for(var k=T.target;k;k=k.parentNode){if(k==d)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(k.className))break}return!1}St(d,"paste",function(T){!x(T)||on(l,T)||Yg(T,l)||f<=11&&setTimeout(We(l,function(){return a.updateFromDOM()}),20)}),St(d,"compositionstart",function(T){a.composing={data:T.data,done:!1}}),St(d,"compositionupdate",function(T){a.composing||(a.composing={data:T.data,done:!1})}),St(d,"compositionend",function(T){a.composing&&(T.data!=a.composing.data&&a.readFromDOMSoon(),a.composing.done=!0)}),St(d,"touchstart",function(){return u.forceCompositionEnd()}),St(d,"input",function(){a.composing||a.readFromDOMSoon()});function S(T){if(!(!x(T)||on(l,T))){if(l.somethingSelected())Ec({lineWise:!1,text:l.getSelections()}),T.type=="cut"&&l.replaceSelection("",null,"cut");else if(l.options.lineWiseCopyCut){var k=Qg(l);Ec({lineWise:!0,text:k.text}),T.type=="cut"&&l.operation(function(){l.setSelections(k.ranges,0,Xt),l.replaceSelection("",null,"cut")})}else return;if(T.clipboardData){T.clipboardData.clearData();var M=Ir.text.join(`
`);if(T.clipboardData.setData("Text",M),T.clipboardData.getData("Text")==M){T.preventDefault();return}}var K=Zg(),Z=K.firstChild;Np(Z),l.display.lineSpace.insertBefore(K,l.display.lineSpace.firstChild),Z.value=Ir.text.join(`
`);var ce=ft(Pt(d));Oe(Z),setTimeout(function(){l.display.lineSpace.removeChild(K),ce.focus(),ce==d&&u.showPrimarySelection()},50)}}St(d,"copy",S),St(d,"cut",S)},nn.prototype.screenReaderLabelChanged=function(r){r?this.div.setAttribute("aria-label",r):this.div.removeAttribute("aria-label")},nn.prototype.prepareSelection=function(){var r=pc(this.cm,!1);return r.focus=ft(Pt(this.div))==this.div,r},nn.prototype.showSelection=function(r,a){!r||!this.cm.display.view.length||((r.focus||a)&&this.showPrimarySelection(),this.showMultipleSelections(r))},nn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},nn.prototype.showPrimarySelection=function(){var r=this.getSelection(),a=this.cm,u=a.doc.sel.primary(),l=u.from(),d=u.to();if(a.display.viewTo==a.display.viewFrom||l.line>=a.display.viewTo||d.line<a.display.viewFrom){r.removeAllRanges();return}var x=Tc(a,r.anchorNode,r.anchorOffset),S=Tc(a,r.focusNode,r.focusOffset);if(!(x&&!x.bad&&S&&!S.bad&&ot(oo(x,S),l)==0&&ot(Sn(x,S),d)==0)){var T=a.display.view,k=l.line>=a.display.viewFrom&&ev(a,l)||{node:T[0].measure.map[2],offset:0},M=d.line<a.display.viewTo&&ev(a,d);if(!M){var K=T[T.length-1].measure,Z=K.maps?K.maps[K.maps.length-1]:K.map;M={node:Z[Z.length-1],offset:Z[Z.length-2]-Z[Z.length-3]}}if(!k||!M){r.removeAllRanges();return}var ce=r.rangeCount&&r.getRangeAt(0),ae;try{ae=pt(k.node,k.offset,M.offset,M.node)}catch{}ae&&(!t&&a.state.focused?(r.collapse(k.node,k.offset),ae.collapsed||(r.removeAllRanges(),r.addRange(ae))):(r.removeAllRanges(),r.addRange(ae)),ce&&r.anchorNode==null?r.addRange(ce):t&&this.startGracePeriod()),this.rememberSelection()}},nn.prototype.startGracePeriod=function(){var r=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){r.gracePeriod=!1,r.selectionChanged()&&r.cm.operation(function(){return r.cm.curOp.selectionChanged=!0})},20)},nn.prototype.showMultipleSelections=function(r){le(this.cm.display.cursorDiv,r.cursors),le(this.cm.display.selectionDiv,r.selection)},nn.prototype.rememberSelection=function(){var r=this.getSelection();this.lastAnchorNode=r.anchorNode,this.lastAnchorOffset=r.anchorOffset,this.lastFocusNode=r.focusNode,this.lastFocusOffset=r.focusOffset},nn.prototype.selectionInEditor=function(){var r=this.getSelection();if(!r.rangeCount)return!1;var a=r.getRangeAt(0).commonAncestorContainer;return Xe(this.div,a)},nn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ft(Pt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},nn.prototype.blur=function(){this.div.blur()},nn.prototype.getField=function(){return this.div},nn.prototype.supportsTouch=function(){return!0},nn.prototype.receivedFocus=function(){var r=this,a=this;this.selectionInEditor()?setTimeout(function(){return r.pollSelection()},20):ke(this.cm,function(){return a.cm.curOp.selectionChanged=!0});function u(){a.cm.state.focused&&(a.pollSelection(),a.polling.set(a.cm.options.pollInterval,u))}this.polling.set(this.cm.options.pollInterval,u)},nn.prototype.selectionChanged=function(){var r=this.getSelection();return r.anchorNode!=this.lastAnchorNode||r.anchorOffset!=this.lastAnchorOffset||r.focusNode!=this.lastFocusNode||r.focusOffset!=this.lastFocusOffset},nn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var r=this.getSelection(),a=this.cm;if(N&&g&&this.cm.display.gutterSpecs.length&&Vb(r.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var u=Tc(a,r.anchorNode,r.anchorOffset),l=Tc(a,r.focusNode,r.focusOffset);u&&l&&ke(a,function(){pi(a.doc,Uo(u,l),Xt),(u.bad||l.bad)&&(a.curOp.selectionChanged=!0)})}}},nn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var r=this.cm,a=r.display,u=r.doc.sel.primary(),l=u.from(),d=u.to();if(l.ch==0&&l.line>r.firstLine()&&(l=ye(l.line-1,bt(r.doc,l.line-1).length)),d.ch==bt(r.doc,d.line).text.length&&d.line<r.lastLine()&&(d=ye(d.line+1,0)),l.line<a.viewFrom||d.line>a.viewTo-1)return!1;var x,S,T;l.line==a.viewFrom||(x=Xr(r,l.line))==0?(S=V(a.view[0].line),T=a.view[0].node):(S=V(a.view[x].line),T=a.view[x-1].node.nextSibling);var k=Xr(r,d.line),M,K;if(k==a.view.length-1?(M=a.viewTo-1,K=a.lineDiv.lastChild):(M=V(a.view[k+1].line)-1,K=a.view[k+1].node.previousSibling),!T)return!1;for(var Z=r.doc.splitLines(Lb(r,T,K,S,M)),ce=Hi(r.doc,ye(S,0),ye(M,bt(r.doc,M).text.length));Z.length>1&&ce.length>1;)if($e(Z)==$e(ce))Z.pop(),ce.pop(),M--;else if(Z[0]==ce[0])Z.shift(),ce.shift(),S++;else break;for(var ae=0,Ce=0,Fe=Z[0],qe=ce[0],et=Math.min(Fe.length,qe.length);ae<et&&Fe.charCodeAt(ae)==qe.charCodeAt(ae);)++ae;for(var ut=$e(Z),tt=$e(ce),gt=Math.min(ut.length-(Z.length==1?ae:0),tt.length-(ce.length==1?ae:0));Ce<gt&&ut.charCodeAt(ut.length-Ce-1)==tt.charCodeAt(tt.length-Ce-1);)++Ce;if(Z.length==1&&ce.length==1&&S==l.line)for(;ae&&ae>l.ch&&ut.charCodeAt(ut.length-Ce-1)==tt.charCodeAt(tt.length-Ce-1);)ae--,Ce++;Z[Z.length-1]=ut.slice(0,ut.length-Ce).replace(/^\u200b+/,""),Z[0]=Z[0].slice(ae).replace(/\u200b+$/,"");var It=ye(S,ae),Tt=ye(M,ce.length?$e(ce).length-Ce:0);if(Z.length>1||Z[0]||ot(It,Tt))return Cs(r.doc,Z,It,Tt,"+input"),!0},nn.prototype.ensurePolled=function(){this.forceCompositionEnd()},nn.prototype.reset=function(){this.forceCompositionEnd()},nn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},nn.prototype.readFromDOMSoon=function(){var r=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(r.readDOMTimeout=null,r.composing)if(r.composing.done)r.composing=null;else return;r.updateFromDOM()},80))},nn.prototype.updateFromDOM=function(){var r=this;(this.cm.isReadOnly()||!this.pollContent())&&ke(this.cm,function(){return fi(r.cm)})},nn.prototype.setUneditable=function(r){r.contentEditable="false"},nn.prototype.onKeyPress=function(r){r.charCode==0||this.composing||(r.preventDefault(),this.cm.isReadOnly()||We(this.cm,Fp)(this.cm,String.fromCharCode(r.charCode==null?r.keyCode:r.charCode),0))},nn.prototype.readOnlyChanged=function(r){this.div.contentEditable=String(r!="nocursor")},nn.prototype.onContextMenu=function(){},nn.prototype.resetPosition=function(){},nn.prototype.needsContentAttribute=!0;function ev(r,a){var u=El(r,a.line);if(!u||u.hidden)return null;var l=bt(r.doc,a.line),d=lc(u,l,a.line),x=Lt(l,r.doc.direction),S="left";if(x){var T=li(x,a.ch);S=T%2?"right":"left"}var k=Po(d.map,a.ch,S);return k.offset=k.collapse=="right"?k.end:k.start,k}function Vb(r){for(var a=r;a;a=a.parentNode)if(/CodeMirror-gutter-wrapper/.test(a.className))return!0;return!1}function Ts(r,a){return a&&(r.bad=!0),r}function Lb(r,a,u,l,d){var x="",S=!1,T=r.doc.lineSeparator(),k=!1;function M(ae){return function(Ce){return Ce.id==ae}}function K(){S&&(x+=T,k&&(x+=T),S=k=!1)}function Z(ae){ae&&(K(),x+=ae)}function ce(ae){if(ae.nodeType==1){var Ce=ae.getAttribute("cm-text");if(Ce){Z(Ce);return}var Fe=ae.getAttribute("cm-marker"),qe;if(Fe){var et=r.findMarks(ye(l,0),ye(d+1,0),M(+Fe));et.length&&(qe=et[0].find(0))&&Z(Hi(r.doc,qe.from,qe.to).join(T));return}if(ae.getAttribute("contenteditable")=="false")return;var ut=/^(pre|div|p|li|table|br)$/i.test(ae.nodeName);if(!/^br$/i.test(ae.nodeName)&&ae.textContent.length==0)return;ut&&K();for(var tt=0;tt<ae.childNodes.length;tt++)ce(ae.childNodes[tt]);/^(pre|p)$/i.test(ae.nodeName)&&(k=!0),ut&&(S=!0)}else ae.nodeType==3&&Z(ae.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;ce(a),a!=u;)a=a.nextSibling,k=!1;return x}function Tc(r,a,u){var l;if(a==r.display.lineDiv){if(l=r.display.lineDiv.childNodes[u],!l)return Ts(r.clipPos(ye(r.display.viewTo-1)),!0);a=null,u=0}else for(l=a;;l=l.parentNode){if(!l||l==r.display.lineDiv)return null;if(l.parentNode&&l.parentNode==r.display.lineDiv)break}for(var d=0;d<r.display.view.length;d++){var x=r.display.view[d];if(x.node==l)return Bb(x,a,u)}}function Bb(r,a,u){var l=r.text.firstChild,d=!1;if(!a||!Xe(l,a))return Ts(ye(V(r.line),0),!0);if(a==l&&(d=!0,a=l.childNodes[u],u=0,!a)){var x=r.rest?$e(r.rest):r.line;return Ts(ye(V(x),x.text.length),d)}var S=a.nodeType==3?a:null,T=a;for(!S&&a.childNodes.length==1&&a.firstChild.nodeType==3&&(S=a.firstChild,u&&(u=S.nodeValue.length));T.parentNode!=l;)T=T.parentNode;var k=r.measure,M=k.maps;function K(qe,et,ut){for(var tt=-1;tt<(M?M.length:0);tt++)for(var gt=tt<0?k.map:M[tt],It=0;It<gt.length;It+=3){var Tt=gt[It+2];if(Tt==qe||Tt==et){var Ht=V(tt<0?r.line:r.rest[tt]),ln=gt[It]+ut;return(ut<0||Tt!=qe)&&(ln=gt[It+(ut?1:0)]),ye(Ht,ln)}}}var Z=K(S,T,u);if(Z)return Ts(Z,d);for(var ce=T.nextSibling,ae=S?S.nodeValue.length-u:0;ce;ce=ce.nextSibling){if(Z=K(ce,ce.firstChild,0),Z)return Ts(ye(Z.line,Z.ch-ae),d);ae+=ce.textContent.length}for(var Ce=T.previousSibling,Fe=u;Ce;Ce=Ce.previousSibling){if(Z=K(Ce,Ce.firstChild,-1),Z)return Ts(ye(Z.line,Z.ch+Fe),d);Fe+=Ce.textContent.length}}var Mn=function(r){this.cm=r,this.prevInput="",this.pollingFast=!1,this.polling=new Gn,this.hasSelection=!1,this.composing=null,this.resetting=!1};Mn.prototype.init=function(r){var a=this,u=this,l=this.cm;this.createField(r);var d=this.textarea;r.wrapper.insertBefore(this.wrapper,r.wrapper.firstChild),B&&(d.style.width="0px"),St(d,"input",function(){c&&f>=9&&a.hasSelection&&(a.hasSelection=null),u.poll()}),St(d,"paste",function(S){on(l,S)||Yg(S,l)||(l.state.pasteIncoming=+new Date,u.fastPoll())});function x(S){if(!on(l,S)){if(l.somethingSelected())Ec({lineWise:!1,text:l.getSelections()});else if(l.options.lineWiseCopyCut){var T=Qg(l);Ec({lineWise:!0,text:T.text}),S.type=="cut"?l.setSelections(T.ranges,null,Xt):(u.prevInput="",d.value=T.text.join(`
`),Oe(d))}else return;S.type=="cut"&&(l.state.cutIncoming=+new Date)}}St(d,"cut",x),St(d,"copy",x),St(r.scroller,"paste",function(S){if(!(Tr(r,S)||on(l,S))){if(!d.dispatchEvent){l.state.pasteIncoming=+new Date,u.focus();return}var T=new Event("paste");T.clipboardData=S.clipboardData,d.dispatchEvent(T)}}),St(r.lineSpace,"selectstart",function(S){Tr(r,S)||vn(S)}),St(d,"compositionstart",function(){var S=l.getCursor("from");u.composing&&u.composing.range.clear(),u.composing={start:S,range:l.markText(S,l.getCursor("to"),{className:"CodeMirror-composing"})}}),St(d,"compositionend",function(){u.composing&&(u.poll(),u.composing.range.clear(),u.composing=null)})},Mn.prototype.createField=function(r){this.wrapper=Zg(),this.textarea=this.wrapper.firstChild;var a=this.cm.options;Np(this.textarea,a.spellcheck,a.autocorrect,a.autocapitalize)},Mn.prototype.screenReaderLabelChanged=function(r){r?this.textarea.setAttribute("aria-label",r):this.textarea.removeAttribute("aria-label")},Mn.prototype.prepareSelection=function(){var r=this.cm,a=r.display,u=r.doc,l=pc(r);if(r.options.moveInputWithCursor){var d=Gi(r,u.sel.primary().head,"div"),x=a.wrapper.getBoundingClientRect(),S=a.lineDiv.getBoundingClientRect();l.teTop=Math.max(0,Math.min(a.wrapper.clientHeight-10,d.top+S.top-x.top)),l.teLeft=Math.max(0,Math.min(a.wrapper.clientWidth-10,d.left+S.left-x.left))}return l},Mn.prototype.showSelection=function(r){var a=this.cm,u=a.display;le(u.cursorDiv,r.cursors),le(u.selectionDiv,r.selection),r.teTop!=null&&(this.wrapper.style.top=r.teTop+"px",this.wrapper.style.left=r.teLeft+"px")},Mn.prototype.reset=function(r){if(!(this.contextMenuPending||this.composing&&r)){var a=this.cm;if(this.resetting=!0,a.somethingSelected()){this.prevInput="";var u=a.getSelection();this.textarea.value=u,a.state.focused&&Oe(this.textarea),c&&f>=9&&(this.hasSelection=u)}else r||(this.prevInput=this.textarea.value="",c&&f>=9&&(this.hasSelection=null));this.resetting=!1}},Mn.prototype.getField=function(){return this.textarea},Mn.prototype.supportsTouch=function(){return!1},Mn.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!O||ft(Pt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Mn.prototype.blur=function(){this.textarea.blur()},Mn.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Mn.prototype.receivedFocus=function(){this.slowPoll()},Mn.prototype.slowPoll=function(){var r=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){r.poll(),r.cm.state.focused&&r.slowPoll()})},Mn.prototype.fastPoll=function(){var r=!1,a=this;a.pollingFast=!0;function u(){var l=a.poll();!l&&!r?(r=!0,a.polling.set(60,u)):(a.pollingFast=!1,a.slowPoll())}a.polling.set(20,u)},Mn.prototype.poll=function(){var r=this,a=this.cm,u=this.textarea,l=this.prevInput;if(this.contextMenuPending||this.resetting||!a.state.focused||Er(u)&&!l&&!this.composing||a.isReadOnly()||a.options.disableInput||a.state.keySeq)return!1;var d=u.value;if(d==l&&!a.somethingSelected())return!1;if(c&&f>=9&&this.hasSelection===d||q&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var x=d.charCodeAt(0);if(x==8203&&!l&&(l="\u200B"),x==8666)return this.reset(),this.cm.execCommand("undo")}for(var S=0,T=Math.min(l.length,d.length);S<T&&l.charCodeAt(S)==d.charCodeAt(S);)++S;return ke(a,function(){Fp(a,d.slice(S),l.length-S,null,r.composing?"*compose":null),d.length>1e3||d.indexOf(`
`)>-1?u.value=r.prevInput="":r.prevInput=d,r.composing&&(r.composing.range.clear(),r.composing.range=a.markText(r.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Mn.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Mn.prototype.onKeyPress=function(){c&&f>=9&&(this.hasSelection=null),this.fastPoll()},Mn.prototype.onContextMenu=function(r){var a=this,u=a.cm,l=u.display,d=a.textarea;a.contextMenuPending&&a.contextMenuPending();var x=co(u,r),S=l.scroller.scrollTop;if(!x||C)return;var T=u.options.resetSelectionOnContextMenu;T&&u.doc.sel.contains(x)==-1&&We(u,pi)(u.doc,Uo(x),Xt);var k=d.style.cssText,M=a.wrapper.style.cssText,K=a.wrapper.offsetParent.getBoundingClientRect();a.wrapper.style.cssText="position: static",d.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(r.clientY-K.top-5)+"px; left: "+(r.clientX-K.left-5)+`px;
      z-index: 1000; background: `+(c?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Z;m&&(Z=d.ownerDocument.defaultView.scrollY),l.input.focus(),m&&d.ownerDocument.defaultView.scrollTo(null,Z),l.input.reset(),u.somethingSelected()||(d.value=a.prevInput=" "),a.contextMenuPending=ae,l.selForContextMenu=u.doc.sel,clearTimeout(l.detectingSelectAll);function ce(){if(d.selectionStart!=null){var Fe=u.somethingSelected(),qe="\u200B"+(Fe?d.value:"");d.value="\u21DA",d.value=qe,a.prevInput=Fe?"":"\u200B",d.selectionStart=1,d.selectionEnd=qe.length,l.selForContextMenu=u.doc.sel}}function ae(){if(a.contextMenuPending==ae&&(a.contextMenuPending=!1,a.wrapper.style.cssText=M,d.style.cssText=k,c&&f<9&&l.scrollbars.setScrollTop(l.scroller.scrollTop=S),d.selectionStart!=null)){(!c||c&&f<9)&&ce();var Fe=0,qe=function(){l.selForContextMenu==u.doc.sel&&d.selectionStart==0&&d.selectionEnd>0&&a.prevInput=="\u200B"?We(u,_g)(u):Fe++<10?l.detectingSelectAll=setTimeout(qe,500):(l.selForContextMenu=null,l.input.reset())};l.detectingSelectAll=setTimeout(qe,200)}}if(c&&f>=9&&ce(),ve){Li(r);var Ce=function(){Vn(window,"mouseup",Ce),setTimeout(ae,20)};St(window,"mouseup",Ce)}else setTimeout(ae,50)},Mn.prototype.readOnlyChanged=function(r){r||this.reset(),this.textarea.disabled=r=="nocursor",this.textarea.readOnly=!!r},Mn.prototype.setUneditable=function(){},Mn.prototype.needsContentAttribute=!1;function Ob(r,a){if(a=a?Qe(a):{},a.value=r.value,!a.tabindex&&r.tabIndex&&(a.tabindex=r.tabIndex),!a.placeholder&&r.placeholder&&(a.placeholder=r.placeholder),a.autofocus==null){var u=ft(Pt(r));a.autofocus=u==r||r.getAttribute("autofocus")!=null&&u==document.body}function l(){r.value=T.getValue()}var d;if(r.form&&(St(r.form,"submit",l),!a.leaveSubmitMethodAlone)){var x=r.form;d=x.submit;try{var S=x.submit=function(){l(),x.submit=d,x.submit(),x.submit=S}}catch{}}a.finishInit=function(k){k.save=l,k.getTextArea=function(){return r},k.toTextArea=function(){k.toTextArea=isNaN,l(),r.parentNode.removeChild(k.getWrapperElement()),r.style.display="",r.form&&(Vn(r.form,"submit",l),!a.leaveSubmitMethodAlone&&typeof r.form.submit=="function"&&(r.form.submit=d))}},r.style.display="none";var T=hn(function(k){return r.parentNode.insertBefore(k,r.nextSibling)},a);return T}function Hb(r){r.off=Vn,r.on=St,r.wheelEventPixels=KC,r.Doc=Ai,r.splitLines=Si,r.countColumn=zt,r.findColumn=An,r.isWordChar=Ri,r.Pass=Tn,r.signal=Qt,r.Line=di,r.changeEnd=zo,r.scrollbarModel=de,r.Pos=ye,r.cmpPos=ot,r.modes=Ao,r.mimeModes=er,r.resolveMode=Hr,r.getMode=Do,r.modeExtensions=Ur,r.extendMode=ko,r.copyState=Ei,r.startState=dn,r.innerMode=tn,r.commands=Ql,r.keyMap=ho,r.keyName=Pg,r.isModifierKey=Ng,r.lookupKey=ws,r.normalizeKeyMap=hb,r.StringStream=fn,r.SharedTextMarker=Jl,r.TextMarker=qo,r.LineWidget=Kl,r.e_preventDefault=vn,r.e_stopPropagation=_i,r.e_stop=Li,r.addClass=yt,r.contains=Xe,r.rmClass=Te,r.keyNames=Wo}Mb(hn),Pb(hn);var Ub="iter insert remove copy getEditor constructor".split(" ");for(var Ac in Ai.prototype)Ai.prototype.hasOwnProperty(Ac)&&Nt(Ub,Ac)<0&&(hn.prototype[Ac]=(function(r){return function(){return r.apply(this.doc,arguments)}})(Ai.prototype[Ac]));return jn(Ai),hn.inputStyles={textarea:Mn,contenteditable:nn},hn.defineMode=function(r){!hn.defaults.mode&&r!="null"&&(hn.defaults.mode=r),ti.apply(this,arguments)},hn.defineMIME=Oi,hn.defineMode("null",function(){return{token:function(r){return r.skipToEnd()}}}),hn.defineMIME("text/plain","null"),hn.defineExtension=function(r,a){hn.prototype[r]=a},hn.defineDocExtension=function(r,a){Ai.prototype[r]=a},hn.fromTextArea=Ob,Hb(hn),hn.version="5.65.16",hn})});var Lx=Ut((Px,Vx)=>{(function(n){typeof Px=="object"&&typeof Vx=="object"?n(Mu()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("javascript",function(e,t){var i=e.indentUnit,o=t.statementIndent,s=t.jsonld,c=t.json||s,f=t.trackScope!==!1,m=t.typescript,v=t.wordCharacters||/[\w$\xa1-\uffff]/,g=(function(){function V(In){return{type:In,style:"keyword"}}var Q=V("keyword a"),Se=V("keyword b"),He=V("keyword c"),ye=V("keyword d"),ot=V("operator"),Gt={type:"atom",style:"atom"};return{if:V("if"),while:Q,with:Q,else:Se,do:Se,try:Se,finally:Se,return:ye,break:ye,continue:ye,new:V("new"),delete:He,void:He,throw:He,debugger:V("debugger"),var:V("var"),const:V("var"),let:V("var"),function:V("function"),catch:V("catch"),for:V("for"),switch:V("switch"),case:V("case"),default:V("default"),in:ot,typeof:ot,instanceof:ot,true:Gt,false:Gt,null:Gt,undefined:Gt,NaN:Gt,Infinity:Gt,this:V("this"),class:V("class"),super:V("atom"),yield:He,export:V("export"),import:V("import"),extends:He,await:He}})(),b=/[+\-*&%=<>!?|~^@]/,C=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function A(V){for(var Q=!1,Se,He=!1;(Se=V.next())!=null;){if(!Q){if(Se=="/"&&!He)return;Se=="["?He=!0:He&&Se=="]"&&(He=!1)}Q=!Q&&Se=="\\"}}var F,R;function B(V,Q,Se){return F=V,R=Se,Q}function N(V,Q){var Se=V.next();if(Se=='"'||Se=="'")return Q.tokenize=O(Se),Q.tokenize(V,Q);if(Se=="."&&V.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return B("number","number");if(Se=="."&&V.match(".."))return B("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Se))return B(Se);if(Se=="="&&V.eat(">"))return B("=>","operator");if(Se=="0"&&V.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return B("number","number");if(/\d/.test(Se))return V.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),B("number","number");if(Se=="/")return V.eat("*")?(Q.tokenize=q,q(V,Q)):V.eat("/")?(V.skipToEnd(),B("comment","comment")):Ti(V,Q,1)?(A(V),V.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),B("regexp","string-2")):(V.eat("="),B("operator","operator",V.current()));if(Se=="`")return Q.tokenize=X,X(V,Q);if(Se=="#"&&V.peek()=="!")return V.skipToEnd(),B("meta","meta");if(Se=="#"&&V.eatWhile(v))return B("variable","property");if(Se=="<"&&V.match("!--")||Se=="-"&&V.match("->")&&!/\S/.test(V.string.slice(0,V.start)))return V.skipToEnd(),B("comment","comment");if(b.test(Se))return(Se!=">"||!Q.lexical||Q.lexical.type!=">")&&(V.eat("=")?(Se=="!"||Se=="=")&&V.eat("="):/[<>*+\-|&?]/.test(Se)&&(V.eat(Se),Se==">"&&V.eat(Se))),Se=="?"&&V.eat(".")?B("."):B("operator","operator",V.current());if(v.test(Se)){V.eatWhile(v);var He=V.current();if(Q.lastType!="."){if(g.propertyIsEnumerable(He)){var ye=g[He];return B(ye.type,ye.style,He)}if(He=="async"&&V.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return B("async","keyword",He)}return B("variable","variable",He)}}function O(V){return function(Q,Se){var He=!1,ye;if(s&&Q.peek()=="@"&&Q.match(C))return Se.tokenize=N,B("jsonld-keyword","meta");for(;(ye=Q.next())!=null&&!(ye==V&&!He);)He=!He&&ye=="\\";return He||(Se.tokenize=N),B("string","string")}}function q(V,Q){for(var Se=!1,He;He=V.next();){if(He=="/"&&Se){Q.tokenize=N;break}Se=He=="*"}return B("comment","comment")}function X(V,Q){for(var Se=!1,He;(He=V.next())!=null;){if(!Se&&(He=="`"||He=="$"&&V.eat("{"))){Q.tokenize=N;break}Se=!Se&&He=="\\"}return B("quasi","string-2",V.current())}var j="([{}])";function ie(V,Q){Q.fatArrowAt&&(Q.fatArrowAt=null);var Se=V.string.indexOf("=>",V.start);if(!(Se<0)){if(m){var He=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(V.string.slice(V.start,Se));He&&(Se=He.index)}for(var ye=0,ot=!1,Gt=Se-1;Gt>=0;--Gt){var In=V.string.charAt(Gt),Sn=j.indexOf(In);if(Sn>=0&&Sn<3){if(!ye){++Gt;break}if(--ye==0){In=="("&&(ot=!0);break}}else if(Sn>=3&&Sn<6)++ye;else if(v.test(In))ot=!0;else if(/["'\/`]/.test(In))for(;;--Gt){if(Gt==0)return;var oo=V.string.charAt(Gt-1);if(oo==In&&V.string.charAt(Gt-2)!="\\"){Gt--;break}}else if(ot&&!ye){++Gt;break}}ot&&!ye&&(Q.fatArrowAt=Gt)}}var he={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ve(V,Q,Se,He,ye,ot){this.indented=V,this.column=Q,this.type=Se,this.prev=ye,this.info=ot,He!=null&&(this.align=He)}function me(V,Q){if(!f)return!1;for(var Se=V.localVars;Se;Se=Se.next)if(Se.name==Q)return!0;for(var He=V.context;He;He=He.prev)for(var Se=He.vars;Se;Se=Se.next)if(Se.name==Q)return!0}function Te(V,Q,Se,He,ye){var ot=V.cc;for($.state=V,$.stream=ye,$.marked=null,$.cc=ot,$.style=Q,V.lexical.hasOwnProperty("align")||(V.lexical.align=!0);;){var Gt=ot.length?ot.pop():c?Nt:zt;if(Gt(Se,He)){for(;ot.length&&ot[ot.length-1].lex;)ot.pop()();return $.marked?$.marked:Se=="variable"&&me(V,He)?"variable-2":Q}}}var $={state:null,column:null,marked:null,cc:null};function le(){for(var V=arguments.length-1;V>=0;V--)$.cc.push(arguments[V])}function H(){return le.apply(null,arguments),!0}function De(V,Q){for(var Se=Q;Se;Se=Se.next)if(Se.name==V)return!0;return!1}function pt(V){var Q=$.state;if($.marked="def",!!f){if(Q.context){if(Q.lexical.info=="var"&&Q.context&&Q.context.block){var Se=Xe(V,Q.context);if(Se!=null){Q.context=Se;return}}else if(!De(V,Q.localVars)){Q.localVars=new xe(V,Q.localVars);return}}t.globalVars&&!De(V,Q.globalVars)&&(Q.globalVars=new xe(V,Q.globalVars))}}function Xe(V,Q){if(Q)if(Q.block){var Se=Xe(V,Q.prev);return Se?Se==Q.prev?Q:new yt(Se,Q.vars,!0):null}else return De(V,Q.vars)?Q:new yt(Q.prev,new xe(V,Q.vars),!1);else return null}function ft(V){return V=="public"||V=="private"||V=="protected"||V=="abstract"||V=="readonly"}function yt(V,Q,Se){this.prev=V,this.vars=Q,this.block=Se}function xe(V,Q){this.name=V,this.next=Q}var Oe=new xe("this",new xe("arguments",null));function Le(){$.state.context=new yt($.state.context,$.state.localVars,!1),$.state.localVars=Oe}function Re(){$.state.context=new yt($.state.context,$.state.localVars,!0),$.state.localVars=null}Le.lex=Re.lex=!0;function Pt(){$.state.localVars=$.state.context.vars,$.state.context=$.state.context.prev}Pt.lex=!0;function st(V,Q){var Se=function(){var He=$.state,ye=He.indented;if(He.lexical.type=="stat")ye=He.lexical.indented;else for(var ot=He.lexical;ot&&ot.type==")"&&ot.align;ot=ot.prev)ye=ot.indented;He.lexical=new ve(ye,$.stream.column(),V,null,He.lexical,Q)};return Se.lex=!0,Se}function _t(){var V=$.state;V.lexical.prev&&(V.lexical.type==")"&&(V.indented=V.lexical.indented),V.lexical=V.lexical.prev)}_t.lex=!0;function Qe(V){function Q(Se){return Se==V?H():V==";"||Se=="}"||Se==")"||Se=="]"?le():H(Q)}return Q}function zt(V,Q){return V=="var"?H(st("vardef",Q),_i,Qe(";"),_t):V=="keyword a"?H(st("form"),Tn,zt,_t):V=="keyword b"?H(st("form"),zt,_t):V=="keyword d"?$.stream.match(/^\s*$/,!1)?H():H(st("stat"),Xn,Qe(";"),_t):V=="debugger"?H(Qe(";")):V=="{"?H(st("}"),Re,On,_t,Pt):V==";"?H():V=="if"?($.state.lexical.info=="else"&&$.state.cc[$.state.cc.length-1]==_t&&$.state.cc.pop()(),H(st("form"),Tn,zt,_t,ci)):V=="function"?H(Si):V=="for"?H(st("form"),Re,Sr,zt,Pt,_t):V=="class"||m&&Q=="interface"?($.marked="keyword",H(st("form",V=="class"?V:Q),Ao,_t)):V=="variable"?m&&Q=="declare"?($.marked="keyword",H(zt)):m&&(Q=="module"||Q=="enum"||Q=="type")&&$.stream.match(/^\s*\w/,!1)?($.marked="keyword",Q=="enum"?H(bt):Q=="type"?H(To,Qe("operator"),Lt,Qe(";")):H(st("form"),wn,Qe("{"),st("}"),On,_t,_t)):m&&Q=="namespace"?($.marked="keyword",H(st("form"),Nt,zt,_t)):m&&Q=="abstract"?($.marked="keyword",H(zt)):H(st("stat"),ar):V=="switch"?H(st("form"),Tn,Qe("{"),st("}","switch"),Re,On,_t,_t,Pt):V=="case"?H(Nt,Qe(":")):V=="default"?H(Qe(":")):V=="catch"?H(st("form"),Le,Gn,zt,_t,Pt):V=="export"?H(st("stat"),Hr,_t):V=="import"?H(st("stat"),Ur,_t):V=="async"?H(zt):Q=="@"?H(Nt,zt):le(st("stat"),Nt,Qe(";"),_t)}function Gn(V){if(V=="(")return H(Bi,Qe(")"))}function Nt(V,Q){return Xt(V,Q,!1)}function un(V,Q){return Xt(V,Q,!0)}function Tn(V){return V!="("?le():H(st(")"),Xn,Qe(")"),_t)}function Xt(V,Q,Se){if($.state.fatArrowAt==$.stream.start){var He=Se?Dn:$e;if(V=="(")return H(Le,st(")"),cn(Bi,")"),_t,Qe("=>"),He,Pt);if(V=="variable")return le(Le,wn,Qe("=>"),He,Pt)}var ye=Se?An:gn;return he.hasOwnProperty(V)?H(ye):V=="function"?H(Si,ye):V=="class"||m&&Q=="interface"?($.marked="keyword",H(st("form"),fa,_t)):V=="keyword c"||V=="async"?H(Se?un:Nt):V=="("?H(st(")"),Xn,Qe(")"),_t,ye):V=="operator"||V=="spread"?H(Se?un:Nt):V=="["?H(st("]"),fn,_t,ye):V=="{"?si(bn,"}",null,ye):V=="quasi"?le(qn,ye):V=="new"?H(Qn(Se)):H()}function Xn(V){return V.match(/[;\}\)\],]/)?le():le(Nt)}function gn(V,Q){return V==","?H(Xn):An(V,Q,!1)}function An(V,Q,Se){var He=Se==!1?gn:An,ye=Se==!1?Nt:un;if(V=="=>")return H(Le,Se?Dn:$e,Pt);if(V=="operator")return/\+\+|--/.test(Q)||m&&Q=="!"?H(He):m&&Q=="<"&&$.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?H(st(">"),cn(Lt,">"),_t,He):Q=="?"?H(Nt,Qe(":"),ye):H(ye);if(V=="quasi")return le(qn,He);if(V!=";"){if(V=="(")return si(un,")","call",He);if(V==".")return H(Ri,He);if(V=="[")return H(st("]"),Xn,Qe("]"),_t,He);if(m&&Q=="as")return $.marked="keyword",H(Lt,He);if(V=="regexp")return $.state.lastType=$.marked="operator",$.stream.backUp($.stream.pos-$.stream.start-1),H(ye)}}function qn(V,Q){return V!="quasi"?le():Q.slice(Q.length-2)!="${"?H(qn):H(Xn,wr)}function wr(V){if(V=="}")return $.marked="string-2",$.state.tokenize=X,H(qn)}function $e(V){return ie($.stream,$.state),le(V=="{"?zt:Nt)}function Dn(V){return ie($.stream,$.state),le(V=="{"?zt:un)}function Qn(V){return function(Q){return Q=="."?H(V?Wt:Zn):Q=="variable"&&m?H(kn,V?An:gn):le(V?un:Nt)}}function Zn(V,Q){if(Q=="target")return $.marked="keyword",H(gn)}function Wt(V,Q){if(Q=="target")return $.marked="keyword",H(An)}function ar(V){return V==":"?H(_t,zt):le(gn,Qe(";"),_t)}function Ri(V){if(V=="variable")return $.marked="property",H()}function bn(V,Q){if(V=="async")return $.marked="property",H(bn);if(V=="variable"||$.style=="keyword"){if($.marked="property",Q=="get"||Q=="set")return H(So);var Se;return m&&$.state.fatArrowAt==$.stream.start&&(Se=$.stream.match(/^\s*:\s*/,!1))&&($.state.fatArrowAt=$.stream.pos+Se[0].length),H(Pi)}else{if(V=="number"||V=="string")return $.marked=s?"property":$.style+" property",H(Pi);if(V=="jsonld-keyword")return H(Pi);if(m&&ft(Q))return $.marked="keyword",H(bn);if(V=="[")return H(Nt,Pn,Qe("]"),Pi);if(V=="spread")return H(un,Pi);if(Q=="*")return $.marked="keyword",H(bn);if(V==":")return le(Pi)}}function So(V){return V!="variable"?le(Pi):($.marked="property",H(Si))}function Pi(V){if(V==":")return H(un);if(V=="(")return le(Si)}function cn(V,Q,Se){function He(ye,ot){if(Se?Se.indexOf(ye)>-1:ye==","){var Gt=$.state.lexical;return Gt.info=="call"&&(Gt.pos=(Gt.pos||0)+1),H(function(In,Sn){return In==Q||Sn==Q?le():le(V)},He)}return ye==Q||ot==Q?H():Se&&Se.indexOf(";")>-1?le(V):H(Qe(Q))}return function(ye,ot){return ye==Q||ot==Q?H():le(V,He)}}function si(V,Q,Se){for(var He=3;He<arguments.length;He++)$.cc.push(arguments[He]);return H(st(Q,Se),cn(V,Q),_t)}function On(V){return V=="}"?H():le(zt,On)}function Pn(V,Q){if(m){if(V==":")return H(Lt);if(Q=="?")return H(Pn)}}function ji(V,Q){if(m&&(V==":"||Q=="in"))return H(Lt)}function li(V){if(m&&V==":")return $.stream.match(/^\s*\w+\s+is\b/,!1)?H(Nt,Eo,Lt):H(Lt)}function Eo(V,Q){if(Q=="is")return $.marked="keyword",H()}function Lt(V,Q){if(Q=="keyof"||Q=="typeof"||Q=="infer"||Q=="readonly")return $.marked="keyword",H(Q=="typeof"?un:Lt);if(V=="variable"||Q=="void")return $.marked="type",H(yi);if(Q=="|"||Q=="&")return H(Lt);if(V=="string"||V=="number"||V=="atom")return H(yi);if(V=="[")return H(st("]"),cn(Lt,"]",","),_t,yi);if(V=="{")return H(st("}"),St,_t,yi);if(V=="(")return H(cn(on,")"),Or,yi);if(V=="<")return H(cn(Lt,">"),Lt);if(V=="quasi")return le(Vn,yi)}function Or(V){if(V=="=>")return H(Lt)}function St(V){return V.match(/[\}\)\]]/)?H():V==","||V==";"?H(St):le(Vi,St)}function Vi(V,Q){if(V=="variable"||$.style=="keyword")return $.marked="property",H(Vi);if(Q=="?"||V=="number"||V=="string")return H(Vi);if(V==":")return H(Lt);if(V=="[")return H(Qe("variable"),ji,Qe("]"),Vi);if(V=="(")return le(Er,Vi);if(!V.match(/[;\}\)\],]/))return H()}function Vn(V,Q){return V!="quasi"?le():Q.slice(Q.length-2)!="${"?H(Vn):H(Lt,Qt)}function Qt(V){if(V=="}")return $.marked="string-2",$.state.tokenize=X,H(Vn)}function on(V,Q){return V=="variable"&&$.stream.match(/^\s*[?:]/,!1)||Q=="?"?H(on):V==":"?H(Lt):V=="spread"?H(on):le(Lt)}function yi(V,Q){if(Q=="<")return H(st(">"),cn(Lt,">"),_t,yi);if(Q=="|"||V=="."||Q=="&")return H(Lt);if(V=="[")return H(Lt,Qe("]"),yi);if(Q=="extends"||Q=="implements")return $.marked="keyword",H(Lt);if(Q=="?")return H(Lt,Qe(":"),Lt)}function kn(V,Q){if(Q=="<")return H(st(">"),cn(Lt,">"),_t,yi)}function jn(){return le(Lt,vn)}function vn(V,Q){if(Q=="=")return H(Lt)}function _i(V,Q){return Q=="enum"?($.marked="keyword",H(bt)):le(wn,Pn,rt,ei)}function wn(V,Q){if(m&&ft(Q))return $.marked="keyword",H(wn);if(V=="variable")return pt(Q),H();if(V=="spread")return H(wn);if(V=="[")return si(ui,"]");if(V=="{")return si(Li,"}")}function Li(V,Q){return V=="variable"&&!$.stream.match(/^\s*:/,!1)?(pt(Q),H(rt)):(V=="variable"&&($.marked="property"),V=="spread"?H(wn):V=="}"?le():V=="["?H(Nt,Qe("]"),Qe(":"),Li):H(Qe(":"),wn,rt))}function ui(){return le(wn,rt)}function rt(V,Q){if(Q=="=")return H(un)}function ei(V){if(V==",")return H(_i)}function ci(V,Q){if(V=="keyword b"&&Q=="else")return H(st("form","else"),zt,_t)}function Sr(V,Q){if(Q=="await")return H(Sr);if(V=="(")return H(st(")"),lt,_t)}function lt(V){return V=="var"?H(_i,sr):V=="variable"?H(sr):le(sr)}function sr(V,Q){return V==")"?H():V==";"?H(sr):Q=="in"||Q=="of"?($.marked="keyword",H(Nt,sr)):le(Nt,sr)}function Si(V,Q){if(Q=="*")return $.marked="keyword",H(Si);if(V=="variable")return pt(Q),H(Si);if(V=="(")return H(Le,st(")"),cn(Bi,")"),_t,li,zt,Pt);if(m&&Q=="<")return H(st(">"),cn(jn,">"),_t,Si)}function Er(V,Q){if(Q=="*")return $.marked="keyword",H(Er);if(V=="variable")return pt(Q),H(Er);if(V=="(")return H(Le,st(")"),cn(Bi,")"),_t,li,Pt);if(m&&Q=="<")return H(st(">"),cn(jn,">"),_t,Er)}function To(V,Q){if(V=="keyword"||V=="variable")return $.marked="type",H(To);if(Q=="<")return H(st(">"),cn(jn,">"),_t)}function Bi(V,Q){return Q=="@"&&H(Nt,Bi),V=="spread"?H(Bi):m&&ft(Q)?($.marked="keyword",H(Bi)):m&&V=="this"?H(Pn,rt):le(wn,Pn,rt)}function fa(V,Q){return V=="variable"?Ao(V,Q):er(V,Q)}function Ao(V,Q){if(V=="variable")return pt(Q),H(er)}function er(V,Q){if(Q=="<")return H(st(">"),cn(jn,">"),_t,er);if(Q=="extends"||Q=="implements"||m&&V==",")return Q=="implements"&&($.marked="keyword"),H(m?Lt:Nt,er);if(V=="{")return H(st("}"),ti,_t)}function ti(V,Q){if(V=="async"||V=="variable"&&(Q=="static"||Q=="get"||Q=="set"||m&&ft(Q))&&$.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return $.marked="keyword",H(ti);if(V=="variable"||$.style=="keyword")return $.marked="property",H(Oi,ti);if(V=="number"||V=="string")return H(Oi,ti);if(V=="[")return H(Nt,Pn,Qe("]"),Oi,ti);if(Q=="*")return $.marked="keyword",H(ti);if(m&&V=="(")return le(Er,ti);if(V==";"||V==",")return H(ti);if(V=="}")return H();if(Q=="@")return H(Nt,ti)}function Oi(V,Q){if(Q=="!"||Q=="?")return H(Oi);if(V==":")return H(Lt,rt);if(Q=="=")return H(un);var Se=$.state.lexical.prev,He=Se&&Se.info=="interface";return le(He?Er:Si)}function Hr(V,Q){return Q=="*"?($.marked="keyword",H(dn,Qe(";"))):Q=="default"?($.marked="keyword",H(Nt,Qe(";"))):V=="{"?H(cn(Do,"}"),dn,Qe(";")):le(zt)}function Do(V,Q){if(Q=="as")return $.marked="keyword",H(Qe("variable"));if(V=="variable")return le(un,Do)}function Ur(V){return V=="string"?H():V=="("?le(Nt):V=="."?le(gn):le(ko,Ei,dn)}function ko(V,Q){return V=="{"?si(ko,"}"):(V=="variable"&&pt(Q),Q=="*"&&($.marked="keyword"),H(tn))}function Ei(V){if(V==",")return H(ko,Ei)}function tn(V,Q){if(Q=="as")return $.marked="keyword",H(ko)}function dn(V,Q){if(Q=="from")return $.marked="keyword",H(Nt)}function fn(V){return V=="]"?H():le(cn(un,"]"))}function bt(){return le(st("form"),wn,Qe("{"),st("}"),cn(Hi,"}"),_t,_t)}function Hi(){return le(wn,rt)}function zr(V,Q){return V.lastType=="operator"||V.lastType==","||b.test(Q.charAt(0))||/[,.]/.test(Q.charAt(0))}function Ti(V,Q,Se){return Q.tokenize==N&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Q.lastType)||Q.lastType=="quasi"&&/\{\s*$/.test(V.string.slice(0,V.pos-(Se||0)))}return{startState:function(V){var Q={tokenize:N,lastType:"sof",cc:[],lexical:new ve((V||0)-i,0,"block",!1),localVars:t.localVars,context:t.localVars&&new yt(null,null,!1),indented:V||0};return t.globalVars&&typeof t.globalVars=="object"&&(Q.globalVars=t.globalVars),Q},token:function(V,Q){if(V.sol()&&(Q.lexical.hasOwnProperty("align")||(Q.lexical.align=!1),Q.indented=V.indentation(),ie(V,Q)),Q.tokenize!=q&&V.eatSpace())return null;var Se=Q.tokenize(V,Q);return F=="comment"?Se:(Q.lastType=F=="operator"&&(R=="++"||R=="--")?"incdec":F,Te(Q,Se,F,R,V))},indent:function(V,Q){if(V.tokenize==q||V.tokenize==X)return n.Pass;if(V.tokenize!=N)return 0;var Se=Q&&Q.charAt(0),He=V.lexical,ye;if(!/^\s*else\b/.test(Q))for(var ot=V.cc.length-1;ot>=0;--ot){var Gt=V.cc[ot];if(Gt==_t)He=He.prev;else if(Gt!=ci&&Gt!=Pt)break}for(;(He.type=="stat"||He.type=="form")&&(Se=="}"||(ye=V.cc[V.cc.length-1])&&(ye==gn||ye==An)&&!/^[,\.=+\-*:?[\(]/.test(Q));)He=He.prev;o&&He.type==")"&&He.prev.type=="stat"&&(He=He.prev);var In=He.type,Sn=Se==In;return In=="vardef"?He.indented+(V.lastType=="operator"||V.lastType==","?He.info.length+1:0):In=="form"&&Se=="{"?He.indented:In=="form"?He.indented+i:In=="stat"?He.indented+(zr(V,Q)?o||i:0):He.info=="switch"&&!Sn&&t.doubleIndentSwitch!=!1?He.indented+(/^(?:case|default)\b/.test(Q)?i:2*i):He.align?He.column+(Sn?0:1):He.indented+(Sn?0:i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:c?null:"/*",blockCommentEnd:c?null:"*/",blockCommentContinue:c?null:" * ",lineComment:c?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:c?"json":"javascript",jsonldMode:s,jsonMode:c,expressionAllowed:Ti,skipExpression:function(V){Te(V,"atom","atom","true",new n.StringStream("",2,null))}}}),n.registerHelper("wordChars","javascript",/[\w$]/),n.defineMIME("text/javascript","javascript"),n.defineMIME("text/ecmascript","javascript"),n.defineMIME("application/javascript","javascript"),n.defineMIME("application/x-javascript","javascript"),n.defineMIME("application/ecmascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMIME("application/x-json",{name:"javascript",json:!0}),n.defineMIME("application/manifest+json",{name:"javascript",json:!0}),n.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),n.defineMIME("text/typescript",{name:"javascript",typescript:!0}),n.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var Hx=Ut((Bx,Ox)=>{(function(n){typeof Bx=="object"&&typeof Ox=="object"?n(Mu()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){var e={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},t=n.Pos;n.defineOption("autoCloseBrackets",!1,function(R,B,N){N&&N!=n.Init&&(R.removeKeyMap(o),R.state.closeBrackets=null),B&&(s(i(B,"pairs")),R.state.closeBrackets=B,R.addKeyMap(o))});function i(R,B){return B=="pairs"&&typeof R=="string"?R:typeof R=="object"&&R[B]!=null?R[B]:e[B]}var o={Backspace:m,Enter:v};function s(R){for(var B=0;B<R.length;B++){var N=R.charAt(B),O="'"+N+"'";o[O]||(o[O]=c(N))}}s(e.pairs+"`");function c(R){return function(B){return C(B,R)}}function f(R){var B=R.state.closeBrackets;if(!B||B.override)return B;var N=R.getModeAt(R.getCursor());return N.closeBrackets||B}function m(R){var B=f(R);if(!B||R.getOption("disableInput"))return n.Pass;for(var N=i(B,"pairs"),O=R.listSelections(),q=0;q<O.length;q++){if(!O[q].empty())return n.Pass;var X=A(R,O[q].head);if(!X||N.indexOf(X)%2!=0)return n.Pass}for(var q=O.length-1;q>=0;q--){var j=O[q].head;R.replaceRange("",t(j.line,j.ch-1),t(j.line,j.ch+1),"+delete")}}function v(R){var B=f(R),N=B&&i(B,"explode");if(!N||R.getOption("disableInput"))return n.Pass;for(var O=R.listSelections(),q=0;q<O.length;q++){if(!O[q].empty())return n.Pass;var X=A(R,O[q].head);if(!X||N.indexOf(X)%2!=0)return n.Pass}R.operation(function(){var j=R.lineSeparator()||`
`;R.replaceSelection(j+j,null),g(R,-1),O=R.listSelections();for(var ie=0;ie<O.length;ie++){var he=O[ie].head.line;R.indentLine(he,null,!0),R.indentLine(he+1,null,!0)}})}function g(R,B){for(var N=[],O=R.listSelections(),q=0,X=0;X<O.length;X++){var j=O[X];j.head==R.getCursor()&&(q=X);var ie=j.head.ch||B>0?{line:j.head.line,ch:j.head.ch+B}:{line:j.head.line-1};N.push({anchor:ie,head:ie})}R.setSelections(N,q)}function b(R){var B=n.cmpPos(R.anchor,R.head)>0;return{anchor:new t(R.anchor.line,R.anchor.ch+(B?-1:1)),head:new t(R.head.line,R.head.ch+(B?1:-1))}}function C(R,B){var N=f(R);if(!N||R.getOption("disableInput"))return n.Pass;var O=i(N,"pairs"),q=O.indexOf(B);if(q==-1)return n.Pass;for(var X=i(N,"closeBefore"),j=i(N,"triples"),ie=O.charAt(q+1)==B,he=R.listSelections(),ve=q%2==0,me,Te=0;Te<he.length;Te++){var $=he[Te],le=$.head,H,De=R.getRange(le,t(le.line,le.ch+1));if(ve&&!$.empty())H="surround";else if((ie||!ve)&&De==B)ie&&F(R,le)?H="both":j.indexOf(B)>=0&&R.getRange(le,t(le.line,le.ch+3))==B+B+B?H="skipThree":H="skip";else if(ie&&le.ch>1&&j.indexOf(B)>=0&&R.getRange(t(le.line,le.ch-2),le)==B+B){if(le.ch>2&&/\bstring/.test(R.getTokenTypeAt(t(le.line,le.ch-2))))return n.Pass;H="addFour"}else if(ie){var pt=le.ch==0?" ":R.getRange(t(le.line,le.ch-1),le);if(!n.isWordChar(De)&&pt!=B&&!n.isWordChar(pt))H="both";else return n.Pass}else if(ve&&(De.length===0||/\s/.test(De)||X.indexOf(De)>-1))H="both";else return n.Pass;if(!me)me=H;else if(me!=H)return n.Pass}var Xe=q%2?O.charAt(q-1):B,ft=q%2?B:O.charAt(q+1);R.operation(function(){if(me=="skip")g(R,1);else if(me=="skipThree")g(R,3);else if(me=="surround"){for(var yt=R.getSelections(),xe=0;xe<yt.length;xe++)yt[xe]=Xe+yt[xe]+ft;R.replaceSelections(yt,"around"),yt=R.listSelections().slice();for(var xe=0;xe<yt.length;xe++)yt[xe]=b(yt[xe]);R.setSelections(yt)}else me=="both"?(R.replaceSelection(Xe+ft,null),R.triggerElectric(Xe+ft),g(R,-1)):me=="addFour"&&(R.replaceSelection(Xe+Xe+Xe+Xe,"before"),g(R,1))})}function A(R,B){var N=R.getRange(t(B.line,B.ch-1),t(B.line,B.ch+1));return N.length==2?N:null}function F(R,B){var N=R.getTokenAt(t(B.line,B.ch+1));return/\bstring/.test(N.type)&&N.start==B.ch&&(B.ch==0||!/\bstring/.test(R.getTokenTypeAt(B)))}})});var Gx=Ut((Ux,zx)=>{(function(n){typeof Ux=="object"&&typeof zx=="object"?n(Mu()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){var e=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),t=n.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function o(g){return g&&g.bracketRegex||/[(){}[\]]/}function s(g,b,C){var A=g.getLineHandle(b.line),F=b.ch-1,R=C&&C.afterCursor;R==null&&(R=/(^| )cm-fat-cursor($| )/.test(g.getWrapperElement().className));var B=o(C),N=!R&&F>=0&&B.test(A.text.charAt(F))&&i[A.text.charAt(F)]||B.test(A.text.charAt(F+1))&&i[A.text.charAt(++F)];if(!N)return null;var O=N.charAt(1)==">"?1:-1;if(C&&C.strict&&O>0!=(F==b.ch))return null;var q=g.getTokenTypeAt(t(b.line,F+1)),X=c(g,t(b.line,F+(O>0?1:0)),O,q,C);return X==null?null:{from:t(b.line,F),to:X&&X.pos,match:X&&X.ch==N.charAt(0),forward:O>0}}function c(g,b,C,A,F){for(var R=F&&F.maxScanLineLength||1e4,B=F&&F.maxScanLines||1e3,N=[],O=o(F),q=C>0?Math.min(b.line+B,g.lastLine()+1):Math.max(g.firstLine()-1,b.line-B),X=b.line;X!=q;X+=C){var j=g.getLine(X);if(j){var ie=C>0?0:j.length-1,he=C>0?j.length:-1;if(!(j.length>R))for(X==b.line&&(ie=b.ch-(C<0?1:0));ie!=he;ie+=C){var ve=j.charAt(ie);if(O.test(ve)&&(A===void 0||(g.getTokenTypeAt(t(X,ie+1))||"")==(A||""))){var me=i[ve];if(me&&me.charAt(1)==">"==C>0)N.push(ve);else if(N.length)N.pop();else return{pos:t(X,ie),ch:ve}}}}}return X-C==(C>0?g.lastLine():g.firstLine())?!1:null}function f(g,b,C){for(var A=g.state.matchBrackets.maxHighlightLineLength||1e3,F=C&&C.highlightNonMatching,R=[],B=g.listSelections(),N=0;N<B.length;N++){var O=B[N].empty()&&s(g,B[N].head,C);if(O&&(O.match||F!==!1)&&g.getLine(O.from.line).length<=A){var q=O.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";R.push(g.markText(O.from,t(O.from.line,O.from.ch+1),{className:q})),O.to&&g.getLine(O.to.line).length<=A&&R.push(g.markText(O.to,t(O.to.line,O.to.ch+1),{className:q}))}}if(R.length){e&&g.state.focused&&g.focus();var X=function(){g.operation(function(){for(var j=0;j<R.length;j++)R[j].clear()})};if(b)setTimeout(X,800);else return X}}function m(g){g.operation(function(){g.state.matchBrackets.currentlyHighlighted&&(g.state.matchBrackets.currentlyHighlighted(),g.state.matchBrackets.currentlyHighlighted=null),g.state.matchBrackets.currentlyHighlighted=f(g,!1,g.state.matchBrackets)})}function v(g){g.state.matchBrackets&&g.state.matchBrackets.currentlyHighlighted&&(g.state.matchBrackets.currentlyHighlighted(),g.state.matchBrackets.currentlyHighlighted=null)}n.defineOption("matchBrackets",!1,function(g,b,C){C&&C!=n.Init&&(g.off("cursorActivity",m),g.off("focus",m),g.off("blur",v),v(g)),b&&(g.state.matchBrackets=typeof b=="object"?b:{},g.on("cursorActivity",m),g.on("focus",m),g.on("blur",v))}),n.defineExtension("matchBrackets",function(){f(this,!0)}),n.defineExtension("findMatchingBracket",function(g,b,C){return(C||typeof b=="boolean")&&(C?(C.strict=b,b=C):b=b?{strict:!0}:null),s(this,g,b)}),n.defineExtension("scanForBracket",function(g,b,C,A){return c(this,g,b,C,A)})})});var A1=Ut((Xh,Qh)=>{(function(n,e){typeof Xh=="object"&&typeof Qh<"u"?Qh.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Dexie=e())})(Xh,function(){"use strict";var n=function(y,_){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,E){w.__proto__=E}||function(w,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(w[D]=E[D])},n(y,_)};function e(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");n(y,_);function w(){this.constructor=y}y.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)}var t=function(){return t=Object.assign||function(_){for(var w,E=1,D=arguments.length;E<D;E++){w=arguments[E];for(var P in w)Object.prototype.hasOwnProperty.call(w,P)&&(_[P]=w[P])}return _},t.apply(this,arguments)};function i(y,_,w){if(w||arguments.length===2)for(var E=0,D=_.length,P;E<D;E++)(P||!(E in _))&&(P||(P=Array.prototype.slice.call(_,0,E)),P[E]=_[E]);return y.concat(P||Array.prototype.slice.call(_))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,s=Object.keys,c=Array.isArray;typeof Promise<"u"&&!o.Promise&&(o.Promise=Promise);function f(y,_){return typeof _!="object"||s(_).forEach(function(w){y[w]=_[w]}),y}var m=Object.getPrototypeOf,v={}.hasOwnProperty;function g(y,_){return v.call(y,_)}function b(y,_){typeof _=="function"&&(_=_(m(y))),(typeof Reflect>"u"?s:Reflect.ownKeys)(_).forEach(function(w){A(y,w,_[w])})}var C=Object.defineProperty;function A(y,_,w,E){C(y,_,f(w&&g(w,"get")&&typeof w.get=="function"?{get:w.get,set:w.set,configurable:!0}:{value:w,configurable:!0,writable:!0},E))}function F(y){return{from:function(_){return y.prototype=Object.create(_.prototype),A(y.prototype,"constructor",y),{extend:b.bind(null,y.prototype)}}}}var R=Object.getOwnPropertyDescriptor;function B(y,_){var w=R(y,_),E;return w||(E=m(y))&&B(E,_)}var N=[].slice;function O(y,_,w){return N.call(y,_,w)}function q(y,_){return _(y)}function X(y){if(!y)throw new Error("Assertion Failed")}function j(y){o.setImmediate?setImmediate(y):setTimeout(y,0)}function ie(y,_){return y.reduce(function(w,E,D){var P=_(E,D);return P&&(w[P[0]]=P[1]),w},{})}function he(y,_){if(typeof _=="string"&&g(y,_))return y[_];if(!_)return y;if(typeof _!="string"){for(var w=[],E=0,D=_.length;E<D;++E){var P=he(y,_[E]);w.push(P)}return w}var U=_.indexOf(".");if(U!==-1){var W=y[_.substr(0,U)];return W==null?void 0:he(W,_.substr(U+1))}}function ve(y,_,w){if(!(!y||_===void 0)&&!("isFrozen"in Object&&Object.isFrozen(y)))if(typeof _!="string"&&"length"in _){X(typeof w!="string"&&"length"in w);for(var E=0,D=_.length;E<D;++E)ve(y,_[E],w[E])}else{var P=_.indexOf(".");if(P!==-1){var U=_.substr(0,P),W=_.substr(P+1);if(W==="")w===void 0?c(y)&&!isNaN(parseInt(U))?y.splice(U,1):delete y[U]:y[U]=w;else{var Y=y[U];(!Y||!g(y,U))&&(Y=y[U]={}),ve(Y,W,w)}}else w===void 0?c(y)&&!isNaN(parseInt(_))?y.splice(_,1):delete y[_]:y[_]=w}}function me(y,_){typeof _=="string"?ve(y,_,void 0):"length"in _&&[].map.call(_,function(w){ve(y,w,void 0)})}function Te(y){var _={};for(var w in y)g(y,w)&&(_[w]=y[w]);return _}var $=[].concat;function le(y){return $.apply([],y)}var H="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(le([8,16,32,64].map(function(y){return["Int","Uint","Float"].map(function(_){return _+y+"Array"})}))).filter(function(y){return o[y]}),De=new Set(H.map(function(y){return o[y]}));function pt(y){var _={};for(var w in y)if(g(y,w)){var E=y[w];_[w]=!E||typeof E!="object"||De.has(E.constructor)?E:pt(E)}return _}function Xe(y){for(var _ in y)if(g(y,_))return!1;return!0}var ft=null;function yt(y){ft=new WeakMap;var _=xe(y);return ft=null,_}function xe(y){if(!y||typeof y!="object")return y;var _=ft.get(y);if(_)return _;if(c(y)){_=[],ft.set(y,_);for(var w=0,E=y.length;w<E;++w)_.push(xe(y[w]))}else if(De.has(y.constructor))_=y;else{var D=m(y);_=D===Object.prototype?{}:Object.create(D),ft.set(y,_);for(var P in y)g(y,P)&&(_[P]=xe(y[P]))}return _}var Oe={}.toString;function Le(y){return Oe.call(y).slice(8,-1)}var Re=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Pt=typeof Re=="symbol"?function(y){var _;return y!=null&&(_=y[Re])&&_.apply(y)}:function(){return null};function st(y,_){var w=y.indexOf(_);return w>=0&&y.splice(w,1),w>=0}var _t={};function Qe(y){var _,w,E,D;if(arguments.length===1){if(c(y))return y.slice();if(this===_t&&typeof y=="string")return[y];if(D=Pt(y)){for(w=[];E=D.next(),!E.done;)w.push(E.value);return w}if(y==null)return[y];if(_=y.length,typeof _=="number"){for(w=new Array(_);_--;)w[_]=y[_];return w}return[y]}for(_=arguments.length,w=new Array(_);_--;)w[_]=arguments[_];return w}var zt=typeof Symbol<"u"?function(y){return y[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Gn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Nt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],un=Gn.concat(Nt),Tn={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xt(y,_){this.name=y,this.message=_}F(Xt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Xn(y,_){return y+". Errors: "+Object.keys(_).map(function(w){return _[w].toString()}).filter(function(w,E,D){return D.indexOf(w)===E}).join(`
`)}function gn(y,_,w,E){this.failures=_,this.failedKeys=E,this.successCount=w,this.message=Xn(y,_)}F(gn).from(Xt);function An(y,_){this.name="BulkError",this.failures=Object.keys(_).map(function(w){return _[w]}),this.failuresByPos=_,this.message=Xn(y,this.failures)}F(An).from(Xt);var qn=un.reduce(function(y,_){return y[_]=_+"Error",y},{}),wr=Xt,$e=un.reduce(function(y,_){var w=_+"Error";function E(D,P){this.name=w,D?typeof D=="string"?(this.message="".concat(D).concat(P?`
 `+P:""),this.inner=P||null):typeof D=="object"&&(this.message="".concat(D.name," ").concat(D.message),this.inner=D):(this.message=Tn[_]||w,this.inner=null)}return F(E).from(wr),y[_]=E,y},{});$e.Syntax=SyntaxError,$e.Type=TypeError,$e.Range=RangeError;var Dn=Nt.reduce(function(y,_){return y[_+"Error"]=$e[_],y},{});function Qn(y,_){if(!y||y instanceof Xt||y instanceof TypeError||y instanceof SyntaxError||!y.name||!Dn[y.name])return y;var w=new Dn[y.name](_||y.message,y);return"stack"in y&&A(w,"stack",{get:function(){return this.inner.stack}}),w}var Zn=un.reduce(function(y,_){return["Syntax","Type","Range"].indexOf(_)===-1&&(y[_+"Error"]=$e[_]),y},{});Zn.ModifyError=gn,Zn.DexieError=Xt,Zn.BulkError=An;function Wt(){}function ar(y){return y}function Ri(y,_){return y==null||y===ar?_:function(w){return _(y(w))}}function bn(y,_){return function(){y.apply(this,arguments),_.apply(this,arguments)}}function So(y,_){return y===Wt?_:function(){var w=y.apply(this,arguments);w!==void 0&&(arguments[0]=w);var E=this.onsuccess,D=this.onerror;this.onsuccess=null,this.onerror=null;var P=_.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?bn(E,this.onsuccess):E),D&&(this.onerror=this.onerror?bn(D,this.onerror):D),P!==void 0?P:w}}function Pi(y,_){return y===Wt?_:function(){y.apply(this,arguments);var w=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,_.apply(this,arguments),w&&(this.onsuccess=this.onsuccess?bn(w,this.onsuccess):w),E&&(this.onerror=this.onerror?bn(E,this.onerror):E)}}function cn(y,_){return y===Wt?_:function(w){var E=y.apply(this,arguments);f(w,E);var D=this.onsuccess,P=this.onerror;this.onsuccess=null,this.onerror=null;var U=_.apply(this,arguments);return D&&(this.onsuccess=this.onsuccess?bn(D,this.onsuccess):D),P&&(this.onerror=this.onerror?bn(P,this.onerror):P),E===void 0?U===void 0?void 0:U:f(E,U)}}function si(y,_){return y===Wt?_:function(){return _.apply(this,arguments)===!1?!1:y.apply(this,arguments)}}function On(y,_){return y===Wt?_:function(){var w=y.apply(this,arguments);if(w&&typeof w.then=="function"){for(var E=this,D=arguments.length,P=new Array(D);D--;)P[D]=arguments[D];return w.then(function(){return _.apply(E,P)})}return _.apply(this,arguments)}}var Pn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ji(y,_){Pn=y}var li={},Eo=100,Lt=typeof Promise>"u"?[]:(function(){var y=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[y,m(y),y];var _=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[_,m(_),y]})(),Or=Lt[0],St=Lt[1],Vi=Lt[2],Vn=St&&St.then,Qt=Or&&Or.constructor,on=!!Vi;function yi(){queueMicrotask(er)}var kn=function(y,_){ei.push([y,_]),vn&&(yi(),vn=!1)},jn=!0,vn=!0,_i=[],wn=[],Li=ar,ui={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Wt,pgp:!1,env:{},finalize:Wt},rt=ui,ei=[],ci=0,Sr=[];function lt(y){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var _=this._PSD=rt;if(typeof y!="function"){if(y!==li)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&To(this,this._value);return}this._state=null,this._value=null,++_.ref,Er(this,y)}var sr={get:function(){var y=rt,_=zr;function w(E,D){var P=this,U=!y.global&&(y!==rt||_!==zr),W=U&&!Se(),Y=new lt(function(re,de){fa(P,new Si(oo(E,y,U,W),oo(D,y,U,W),re,de,y))});return this._consoleTask&&(Y._consoleTask=this._consoleTask),Y}return w.prototype=li,w},set:function(y){A(this,"then",y&&y.prototype===li?sr:{get:function(){return y},set:sr.set})}};b(lt.prototype,{then:sr,_then:function(y,_){fa(this,new Si(null,null,y,_,rt))},catch:function(y){if(arguments.length===1)return this.then(null,y);var _=arguments[0],w=arguments[1];return typeof _=="function"?this.then(null,function(E){return E instanceof _?w(E):Ei(E)}):this.then(null,function(E){return E&&E.name===_?w(E):Ei(E)})},finally:function(y){return this.then(function(_){return lt.resolve(y()).then(function(){return _})},function(_){return lt.resolve(y()).then(function(){return Ei(_)})})},timeout:function(y,_){var w=this;return y<1/0?new lt(function(E,D){var P=setTimeout(function(){return D(new $e.Timeout(_))},y);w.then(E,D).finally(clearTimeout.bind(null,P))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&A(lt.prototype,Symbol.toStringTag,"Dexie.Promise"),ui.env=In();function Si(y,_,w,E,D){this.onFulfilled=typeof y=="function"?y:null,this.onRejected=typeof _=="function"?_:null,this.resolve=w,this.reject=E,this.psd=D}b(lt,{all:function(){var y=Qe.apply(null,arguments).map(He);return new lt(function(_,w){y.length===0&&_([]);var E=y.length;y.forEach(function(D,P){return lt.resolve(D).then(function(U){y[P]=U,--E||_(y)},w)})})},resolve:function(y){if(y instanceof lt)return y;if(y&&typeof y.then=="function")return new lt(function(w,E){y.then(w,E)});var _=new lt(li,!0,y);return _},reject:Ei,race:function(){var y=Qe.apply(null,arguments).map(He);return new lt(function(_,w){y.map(function(E){return lt.resolve(E).then(_,w)})})},PSD:{get:function(){return rt},set:function(y){return rt=y}},totalEchoes:{get:function(){return zr}},newPSD:V,usePSD:Sn,scheduler:{get:function(){return kn},set:function(y){kn=y}},rejectionMapper:{get:function(){return Li},set:function(y){Li=y}},follow:function(y,_){return new lt(function(w,E){return V(function(D,P){var U=rt;U.unhandleds=[],U.onunhandled=P,U.finalize=bn(function(){var W=this;Do(function(){W.unhandleds.length===0?D():P(W.unhandleds[0])})},U.finalize),y()},_,w,E)})}}),Qt&&(Qt.allSettled&&A(lt,"allSettled",function(){var y=Qe.apply(null,arguments).map(He);return new lt(function(_){y.length===0&&_([]);var w=y.length,E=new Array(w);y.forEach(function(D,P){return lt.resolve(D).then(function(U){return E[P]={status:"fulfilled",value:U}},function(U){return E[P]={status:"rejected",reason:U}}).then(function(){return--w||_(E)})})})}),Qt.any&&typeof AggregateError<"u"&&A(lt,"any",function(){var y=Qe.apply(null,arguments).map(He);return new lt(function(_,w){y.length===0&&w(new AggregateError([]));var E=y.length,D=new Array(E);y.forEach(function(P,U){return lt.resolve(P).then(function(W){return _(W)},function(W){D[U]=W,--E||w(new AggregateError(D))})})})}),Qt.withResolvers&&(lt.withResolvers=Qt.withResolvers));function Er(y,_){try{_(function(w){if(y._state===null){if(w===y)throw new TypeError("A promise cannot be resolved with itself.");var E=y._lib&&ti();w&&typeof w.then=="function"?Er(y,function(D,P){w instanceof lt?w._then(D,P):w.then(D,P)}):(y._state=!0,y._value=w,Bi(y)),E&&Oi()}},To.bind(null,y))}catch(w){To(y,w)}}function To(y,_){if(wn.push(_),y._state===null){var w=y._lib&&ti();_=Li(_),y._state=!1,y._value=_,Ur(y),Bi(y),w&&Oi()}}function Bi(y){var _=y._listeners;y._listeners=[];for(var w=0,E=_.length;w<E;++w)fa(y,_[w]);var D=y._PSD;--D.ref||D.finalize(),ci===0&&(++ci,kn(function(){--ci===0&&Hr()},[]))}function fa(y,_){if(y._state===null){y._listeners.push(_);return}var w=y._state?_.onFulfilled:_.onRejected;if(w===null)return(y._state?_.resolve:_.reject)(y._value);++_.psd.ref,++ci,kn(Ao,[w,y,_])}function Ao(y,_,w){try{var E,D=_._value;!_._state&&wn.length&&(wn=[]),E=Pn&&_._consoleTask?_._consoleTask.run(function(){return y(D)}):y(D),!_._state&&wn.indexOf(D)===-1&&ko(_),w.resolve(E)}catch(P){w.reject(P)}finally{--ci===0&&Hr(),--w.psd.ref||w.psd.finalize()}}function er(){Sn(ui,function(){ti()&&Oi()})}function ti(){var y=jn;return jn=!1,vn=!1,y}function Oi(){var y,_,w;do for(;ei.length>0;)for(y=ei,ei=[],w=y.length,_=0;_<w;++_){var E=y[_];E[0].apply(null,E[1])}while(ei.length>0);jn=!0,vn=!0}function Hr(){var y=_i;_i=[],y.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var _=Sr.slice(0),w=_.length;w;)_[--w]()}function Do(y){function _(){y(),Sr.splice(Sr.indexOf(_),1)}Sr.push(_),++ci,kn(function(){--ci===0&&Hr()},[])}function Ur(y){_i.some(function(_){return _._value===y._value})||_i.push(y)}function ko(y){for(var _=_i.length;_;)if(_i[--_]._value===y._value){_i.splice(_,1);return}}function Ei(y){return new lt(li,!1,y)}function tn(y,_){var w=rt;return function(){var E=ti(),D=rt;try{return Gt(w,!0),y.apply(this,arguments)}catch(P){_&&_(P)}finally{Gt(D,!1),E&&Oi()}}}var dn={awaits:0,echoes:0,id:0},fn=0,bt=[],Hi=0,zr=0,Ti=0;function V(y,_,w,E){var D=rt,P=Object.create(D);P.parent=D,P.ref=0,P.global=!1,P.id=++Ti,ui.env,P.env=on?{Promise:lt,PromiseProp:{value:lt,configurable:!0,writable:!0},all:lt.all,race:lt.race,allSettled:lt.allSettled,any:lt.any,resolve:lt.resolve,reject:lt.reject}:{},_&&f(P,_),++D.ref,P.finalize=function(){--this.parent.ref||this.parent.finalize()};var U=Sn(P,y,w,E);return P.ref===0&&P.finalize(),U}function Q(){return dn.id||(dn.id=++fn),++dn.awaits,dn.echoes+=Eo,dn.id}function Se(){return dn.awaits?(--dn.awaits===0&&(dn.id=0),dn.echoes=dn.awaits*Eo,!0):!1}(""+Vn).indexOf("[native code]")===-1&&(Q=Se=Wt);function He(y){return dn.echoes&&y&&y.constructor===Qt?(Q(),y.then(function(_){return Se(),_},function(_){return Se(),wt(_)})):y}function ye(y){++zr,(!dn.echoes||--dn.echoes===0)&&(dn.echoes=dn.awaits=dn.id=0),bt.push(rt),Gt(y,!0)}function ot(){var y=bt[bt.length-1];bt.pop(),Gt(y,!1)}function Gt(y,_){var w=rt;if((_?dn.echoes&&(!Hi++||y!==rt):Hi&&(!--Hi||y!==rt))&&queueMicrotask(_?ye.bind(null,y):ot),y!==rt&&(rt=y,w===ui&&(ui.env=In()),on)){var E=ui.env.Promise,D=y.env;(w.global||y.global)&&(Object.defineProperty(o,"Promise",D.PromiseProp),E.all=D.all,E.race=D.race,E.resolve=D.resolve,E.reject=D.reject,D.allSettled&&(E.allSettled=D.allSettled),D.any&&(E.any=D.any))}}function In(){var y=o.Promise;return on?{Promise:y,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:y.all,race:y.race,allSettled:y.allSettled,any:y.any,resolve:y.resolve,reject:y.reject}:{}}function Sn(y,_,w,E,D){var P=rt;try{return Gt(y,!0),_(w,E,D)}finally{Gt(P,!1)}}function oo(y,_,w,E){return typeof y!="function"?y:function(){var D=rt;w&&Q(),Gt(_,!0);try{return y.apply(this,arguments)}finally{Gt(D,!1),E&&queueMicrotask(Se)}}}function ns(y){Promise===Qt&&dn.echoes===0?Hi===0?y():enqueueNativeMicroTask(y):setTimeout(y,0)}var wt=lt.reject;function cl(y,_,w,E){if(!y.idbdb||!y._state.openComplete&&!rt.letThrough&&!y._vip){if(y._state.openComplete)return wt(new $e.DatabaseClosed(y._state.dbOpenError));if(!y._state.isBeingOpened){if(!y._state.autoOpen)return wt(new $e.DatabaseClosed);y.open().catch(Wt)}return y._state.dbReadyPromise.then(function(){return cl(y,_,w,E)})}else{var D=y._createTransaction(_,w,y._dbSchema);try{D.create(),y._state.PR1398_maxLoop=3}catch(P){return P.name===qn.InvalidState&&y.isOpen()&&--y._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),y.close({disableAutoOpen:!1}),y.open().then(function(){return cl(y,_,w,E)})):wt(P)}return D._promise(_,function(P,U){return V(function(){return rt.trans=D,E(P,U,D)})}).then(function(P){if(_==="readwrite")try{D.idbtrans.commit()}catch{}return _==="readonly"?P:D._completion.then(function(){return P})})}}var dl="4.2.1",lr="\uFFFF",Ui=-1/0,ur="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",fl="String expected.",cr=[],Io="__dbnames",is="readonly",pa="readwrite";function Gr(y,_){return y?_?function(){return y.apply(this,arguments)&&_.apply(this,arguments)}:y:_}var pl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ma(y){return typeof y=="string"&&!/\./.test(y)?function(_){return _[y]===void 0&&y in _&&(_=yt(_),delete _[y]),_}:function(_){return _}}function ml(){throw $e.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function $t(y,_){try{var w=dr(y),E=dr(_);if(w!==E)return w==="Array"?1:E==="Array"?-1:w==="binary"?1:E==="binary"?-1:w==="string"?1:E==="string"?-1:w==="Date"?1:E!=="Date"?NaN:-1;switch(w){case"number":case"Date":case"string":return y>_?1:y<_?-1:0;case"binary":return Ku(Ju(y),Ju(_));case"Array":return rp(y,_)}}catch{}return NaN}function rp(y,_){for(var w=y.length,E=_.length,D=w<E?w:E,P=0;P<D;++P){var U=$t(y[P],_[P]);if(U!==0)return U}return w===E?0:w<E?-1:1}function Ku(y,_){for(var w=y.length,E=_.length,D=w<E?w:E,P=0;P<D;++P)if(y[P]!==_[P])return y[P]<_[P]?-1:1;return w===E?0:w<E?-1:1}function dr(y){var _=typeof y;if(_!=="object")return _;if(ArrayBuffer.isView(y))return"binary";var w=Le(y);return w==="ArrayBuffer"?"binary":w}function Ju(y){return y instanceof Uint8Array?y:ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y)}function rs(y,_,w){var E=y.schema.yProps;return E?(_&&w.numFailures>0&&(_=_.filter(function(D,P){return!w.failures[P]})),Promise.all(E.map(function(D){var P=D.updatesTable;return _?y.db.table(P).where("k").anyOf(_).delete():y.db.table(P).clear()})).then(function(){return w})):w}var qr=(function(){function y(_){this["@@propmod"]=_}return y.prototype.execute=function(_){var w,E=this["@@propmod"];if(E.add!==void 0){var D=E.add;if(c(D))return i(i([],c(_)?_:[],!0),D,!0).sort();if(typeof D=="number")return(Number(_)||0)+D;if(typeof D=="bigint")try{return BigInt(_)+D}catch{return BigInt(0)+D}throw new TypeError("Invalid term ".concat(D))}if(E.remove!==void 0){var P=E.remove;if(c(P))return c(_)?_.filter(function(W){return!P.includes(W)}).sort():[];if(typeof P=="number")return Number(_)-P;if(typeof P=="bigint")try{return BigInt(_)-P}catch{return BigInt(0)-P}throw new TypeError("Invalid subtrahend ".concat(P))}var U=(w=E.replacePrefix)===null||w===void 0?void 0:w[0];return U&&typeof _=="string"&&_.startsWith(U)?E.replacePrefix[1]+_.substring(U.length):_},y})();function Mo(y,_){for(var w=s(_),E=w.length,D=!1,P=0;P<E;++P){var U=w[P],W=_[U],Y=he(y,U);W instanceof qr?(ve(y,U,W.execute(Y)),D=!0):Y!==W&&(ve(y,U,W),D=!0)}return D}var Yu=(function(){function y(){}return y.prototype._trans=function(_,w,E){var D=this._tx||rt.trans,P=this.name,U=Pn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(_==="readonly"?"read":"write"," ").concat(this.name));function W(de,se,Ae){if(!Ae.schema[P])throw new $e.NotFound("Table "+P+" not part of transaction");return w(Ae.idbtrans,Ae)}var Y=ti();try{var re=D&&D.db._novip===this.db._novip?D===rt.trans?D._promise(_,W,E):V(function(){return D._promise(_,W,E)},{trans:D,transless:rt.transless||rt}):cl(this.db,_,[this.name],W);return U&&(re._consoleTask=U,re=re.catch(function(de){return console.trace(de),wt(de)})),re}finally{Y&&Oi()}},y.prototype.get=function(_,w){var E=this;return _&&_.constructor===Object?this.where(_).first(w):_==null?wt(new $e.Type("Invalid argument to Table.get()")):this._trans("readonly",function(D){return E.core.get({trans:D,key:_}).then(function(P){return E.hook.reading.fire(P)})}).then(w)},y.prototype.where=function(_){if(typeof _=="string")return new this.db.WhereClause(this,_);if(c(_))return new this.db.WhereClause(this,"[".concat(_.join("+"),"]"));var w=s(_);if(w.length===1)return this.where(w[0]).equals(_[w[0]]);var E=this.schema.indexes.concat(this.schema.primKey).filter(function(de){if(de.compound&&w.every(function(Ae){return de.keyPath.indexOf(Ae)>=0})){for(var se=0;se<w.length;++se)if(w.indexOf(de.keyPath[se])===-1)return!1;return!0}return!1}).sort(function(de,se){return de.keyPath.length-se.keyPath.length})[0];if(E&&this.db._maxKey!==lr){var D=E.keyPath.slice(0,w.length);return this.where(D).equals(D.map(function(de){return _[de]}))}!E&&Pn&&console.warn("The query ".concat(JSON.stringify(_)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(w.join("+"),"]"));var P=this.schema.idxByName;function U(de,se){return $t(de,se)===0}var W=w.reduce(function(de,se){var Ae=de[0],Ge=de[1],ue=P[se],ge=_[se];return[Ae||ue,Ae||!ue?Gr(Ge,ue&&ue.multi?function(Ee){var Me=he(Ee,se);return c(Me)&&Me.some(function(Pe){return U(ge,Pe)})}:function(Ee){return U(ge,he(Ee,se))}):Ge]},[null,null]),Y=W[0],re=W[1];return Y?this.where(Y.name).equals(_[Y.keyPath]).filter(re):E?this.filter(re):this.where(w).equals("")},y.prototype.filter=function(_){return this.toCollection().and(_)},y.prototype.count=function(_){return this.toCollection().count(_)},y.prototype.offset=function(_){return this.toCollection().offset(_)},y.prototype.limit=function(_){return this.toCollection().limit(_)},y.prototype.each=function(_){return this.toCollection().each(_)},y.prototype.toArray=function(_){return this.toCollection().toArray(_)},y.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},y.prototype.orderBy=function(_){return new this.db.Collection(new this.db.WhereClause(this,c(_)?"[".concat(_.join("+"),"]"):_))},y.prototype.reverse=function(){return this.toCollection().reverse()},y.prototype.mapToClass=function(_){var w=this,E=w.db,D=w.name;this.schema.mappedClass=_,_.prototype instanceof ml&&(_=(function(Y){e(re,Y);function re(){return Y!==null&&Y.apply(this,arguments)||this}return Object.defineProperty(re.prototype,"db",{get:function(){return E},enumerable:!1,configurable:!0}),re.prototype.table=function(){return D},re})(_));for(var P=new Set,U=_.prototype;U;U=m(U))Object.getOwnPropertyNames(U).forEach(function(Y){return P.add(Y)});var W=function(Y){if(!Y)return Y;var re=Object.create(_.prototype);for(var de in Y)if(!P.has(de))try{re[de]=Y[de]}catch{}return re};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=W,this.hook("reading",W),_},y.prototype.defineClass=function(){function _(w){f(this,w)}return this.mapToClass(_)},y.prototype.add=function(_,w){var E=this,D=this.schema.primKey,P=D.auto,U=D.keyPath,W=_;return U&&P&&(W=ma(U)(_)),this._trans("readwrite",function(Y){return E.core.mutate({trans:Y,type:"add",keys:w!=null?[w]:null,values:[W]})}).then(function(Y){return Y.numFailures?lt.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(U)try{ve(_,U,Y)}catch{}return Y})},y.prototype.upsert=function(_,w){var E=this,D=this.schema.primKey.keyPath;return this._trans("readwrite",function(P){return E.core.get({trans:P,key:_}).then(function(U){var W=U??{};return Mo(W,w),D&&ve(W,D,_),E.core.mutate({trans:P,type:"put",values:[W],keys:[_],upsert:!0,updates:{keys:[_],changeSpecs:[w]}}).then(function(Y){return Y.numFailures?lt.reject(Y.failures[0]):!!U})})})},y.prototype.update=function(_,w){if(typeof _=="object"&&!c(_)){var E=he(_,this.schema.primKey.keyPath);return E===void 0?wt(new $e.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(E).modify(w)}else return this.where(":id").equals(_).modify(w)},y.prototype.put=function(_,w){var E=this,D=this.schema.primKey,P=D.auto,U=D.keyPath,W=_;return U&&P&&(W=ma(U)(_)),this._trans("readwrite",function(Y){return E.core.mutate({trans:Y,type:"put",values:[W],keys:w!=null?[w]:null})}).then(function(Y){return Y.numFailures?lt.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(U)try{ve(_,U,Y)}catch{}return Y})},y.prototype.delete=function(_){var w=this;return this._trans("readwrite",function(E){return w.core.mutate({trans:E,type:"delete",keys:[_]}).then(function(D){return rs(w,[_],D)}).then(function(D){return D.numFailures?lt.reject(D.failures[0]):void 0})})},y.prototype.clear=function(){var _=this;return this._trans("readwrite",function(w){return _.core.mutate({trans:w,type:"deleteRange",range:pl}).then(function(E){return rs(_,null,E)})}).then(function(w){return w.numFailures?lt.reject(w.failures[0]):void 0})},y.prototype.bulkGet=function(_){var w=this;return this._trans("readonly",function(E){return w.core.getMany({keys:_,trans:E}).then(function(D){return D.map(function(P){return w.hook.reading.fire(P)})})})},y.prototype.bulkAdd=function(_,w,E){var D=this,P=Array.isArray(w)?w:void 0;E=E||(P?void 0:w);var U=E?E.allKeys:void 0;return this._trans("readwrite",function(W){var Y=D.schema.primKey,re=Y.auto,de=Y.keyPath;if(de&&P)throw new $e.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(P&&P.length!==_.length)throw new $e.InvalidArgument("Arguments objects and keys must have the same length");var se=_.length,Ae=de&&re?_.map(ma(de)):_;return D.core.mutate({trans:W,type:"add",keys:P,values:Ae,wantResults:U}).then(function(Ge){var ue=Ge.numFailures,ge=Ge.results,Ee=Ge.lastResult,Me=Ge.failures,Pe=U?ge:Ee;if(ue===0)return Pe;throw new An("".concat(D.name,".bulkAdd(): ").concat(ue," of ").concat(se," operations failed"),Me)})})},y.prototype.bulkPut=function(_,w,E){var D=this,P=Array.isArray(w)?w:void 0;E=E||(P?void 0:w);var U=E?E.allKeys:void 0;return this._trans("readwrite",function(W){var Y=D.schema.primKey,re=Y.auto,de=Y.keyPath;if(de&&P)throw new $e.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(P&&P.length!==_.length)throw new $e.InvalidArgument("Arguments objects and keys must have the same length");var se=_.length,Ae=de&&re?_.map(ma(de)):_;return D.core.mutate({trans:W,type:"put",keys:P,values:Ae,wantResults:U}).then(function(Ge){var ue=Ge.numFailures,ge=Ge.results,Ee=Ge.lastResult,Me=Ge.failures,Pe=U?ge:Ee;if(ue===0)return Pe;throw new An("".concat(D.name,".bulkPut(): ").concat(ue," of ").concat(se," operations failed"),Me)})})},y.prototype.bulkUpdate=function(_){var w=this,E=this.core,D=_.map(function(W){return W.key}),P=_.map(function(W){return W.changes}),U=[];return this._trans("readwrite",function(W){return E.getMany({trans:W,keys:D,cache:"clone"}).then(function(Y){var re=[],de=[];_.forEach(function(Ae,Ge){var ue=Ae.key,ge=Ae.changes,Ee=Y[Ge];if(Ee){for(var Me=0,Pe=Object.keys(ge);Me<Pe.length;Me++){var Ve=Pe[Me],Be=ge[Ve];if(Ve===w.schema.primKey.keyPath){if($t(Be,ue)!==0)throw new $e.Constraint("Cannot update primary key in bulkUpdate()")}else ve(Ee,Ve,Be)}U.push(Ge),re.push(ue),de.push(Ee)}});var se=re.length;return E.mutate({trans:W,type:"put",keys:re,values:de,updates:{keys:D,changeSpecs:P}}).then(function(Ae){var Ge=Ae.numFailures,ue=Ae.failures;if(Ge===0)return se;for(var ge=0,Ee=Object.keys(ue);ge<Ee.length;ge++){var Me=Ee[ge],Pe=U[Number(Me)];if(Pe!=null){var Ve=ue[Me];delete ue[Me],ue[Pe]=Ve}}throw new An("".concat(w.name,".bulkUpdate(): ").concat(Ge," of ").concat(se," operations failed"),ue)})})})},y.prototype.bulkDelete=function(_){var w=this,E=_.length;return this._trans("readwrite",function(D){return w.core.mutate({trans:D,type:"delete",keys:_}).then(function(P){return rs(w,_,P)})}).then(function(D){var P=D.numFailures,U=D.lastResult,W=D.failures;if(P===0)return U;throw new An("".concat(w.name,".bulkDelete(): ").concat(P," of ").concat(E," operations failed"),W)})},y})();function ha(y){var _={},w=function(W,Y){if(Y){for(var re=arguments.length,de=new Array(re-1);--re;)de[re-1]=arguments[re];return _[W].subscribe.apply(null,de),y}else if(typeof W=="string")return _[W]};w.addEventType=P;for(var E=1,D=arguments.length;E<D;++E)P(arguments[E]);return w;function P(W,Y,re){if(typeof W=="object")return U(W);Y||(Y=si),re||(re=Wt);var de={subscribers:[],fire:re,subscribe:function(se){de.subscribers.indexOf(se)===-1&&(de.subscribers.push(se),de.fire=Y(de.fire,se))},unsubscribe:function(se){de.subscribers=de.subscribers.filter(function(Ae){return Ae!==se}),de.fire=de.subscribers.reduce(Y,re)}};return _[W]=w[W]=de,de}function U(W){s(W).forEach(function(Y){var re=W[Y];if(c(re))P(Y,W[Y][0],W[Y][1]);else if(re==="asap")var de=P(Y,ar,function(){for(var Ae=arguments.length,Ge=new Array(Ae);Ae--;)Ge[Ae]=arguments[Ae];de.subscribers.forEach(function(ue){j(function(){ue.apply(null,Ge)})})});else throw new $e.InvalidArgument("Invalid event config")})}}function ga(y,_){return F(_).from({prototype:y}),_}function op(y){return ga(Yu.prototype,function(w,E,D){this.db=y,this._tx=D,this.name=w,this.schema=E,this.hook=y._allTables[w]?y._allTables[w].hook:ha(null,{creating:[So,Wt],reading:[Ri,ar],updating:[cn,Wt],deleting:[Pi,Wt]})})}function Wr(y,_){return!(y.filter||y.algorithm||y.or)&&(_?y.justLimit:!y.replayFilter)}function os(y,_){y.filter=Gr(y.filter,_)}function hl(y,_,w){var E=y.replayFilter;y.replayFilter=E?function(){return Gr(E(),_())}:_,y.justLimit=w&&!E}function Xu(y,_){y.isMatch=Gr(y.isMatch,_)}function va(y,_){if(y.isPrimKey)return _.primaryKey;var w=_.getIndexByKeyPath(y.index);if(!w)throw new $e.Schema("KeyPath "+y.index+" on object store "+_.name+" is not indexed");return w}function ya(y,_,w){var E=va(y,_.schema);return _.openCursor({trans:w,values:!y.keysOnly,reverse:y.dir==="prev",unique:!!y.unique,query:{index:E,range:y.range}})}function ao(y,_,w,E){var D=y.replayFilter?Gr(y.filter,y.replayFilter()):y.filter;if(y.or){var P={},U=function(W,Y,re){if(!D||D(Y,re,function(Ae){return Y.stop(Ae)},function(Ae){return Y.fail(Ae)})){var de=Y.primaryKey,se=""+de;se==="[object ArrayBuffer]"&&(se=""+new Uint8Array(de)),g(P,se)||(P[se]=!0,_(W,Y,re))}};return Promise.all([y.or._iterate(U,w),as(ya(y,E,w),y.algorithm,U,!y.keysOnly&&y.valueMapper)])}else return as(ya(y,E,w),Gr(y.algorithm,D),_,!y.keysOnly&&y.valueMapper)}function as(y,_,w,E){var D=E?function(U,W,Y){return w(E(U),W,Y)}:w,P=tn(D);return y.then(function(U){if(U)return U.start(function(){var W=function(){return U.continue()};(!_||_(U,function(Y){return W=Y},function(Y){U.stop(Y),W=Wt},function(Y){U.fail(Y),W=Wt}))&&P(U.value,U,function(Y){return W=Y}),W()})})}var Qu=(function(){function y(){}return y.prototype._read=function(_,w){var E=this._ctx;return E.error?E.table._trans(null,wt.bind(null,E.error)):E.table._trans("readonly",_).then(w)},y.prototype._write=function(_){var w=this._ctx;return w.error?w.table._trans(null,wt.bind(null,w.error)):w.table._trans("readwrite",_,"locked")},y.prototype._addAlgorithm=function(_){var w=this._ctx;w.algorithm=Gr(w.algorithm,_)},y.prototype._iterate=function(_,w){return ao(this._ctx,_,w,this._ctx.table.core)},y.prototype.clone=function(_){var w=Object.create(this.constructor.prototype),E=Object.create(this._ctx);return _&&f(E,_),w._ctx=E,w},y.prototype.raw=function(){return this._ctx.valueMapper=null,this},y.prototype.each=function(_){var w=this._ctx;return this._read(function(E){return ao(w,_,E,w.table.core)})},y.prototype.count=function(_){var w=this;return this._read(function(E){var D=w._ctx,P=D.table.core;if(Wr(D,!0))return P.count({trans:E,query:{index:va(D,P.schema),range:D.range}}).then(function(W){return Math.min(W,D.limit)});var U=0;return ao(D,function(){return++U,!1},E,P).then(function(){return U})}).then(_)},y.prototype.sortBy=function(_,w){var E=_.split(".").reverse(),D=E[0],P=E.length-1;function U(re,de){return de?U(re[E[de]],de-1):re[D]}var W=this._ctx.dir==="next"?1:-1;function Y(re,de){var se=U(re,P),Ae=U(de,P);return $t(se,Ae)*W}return this.toArray(function(re){return re.sort(Y)}).then(w)},y.prototype.toArray=function(_){var w=this;return this._read(function(E){var D=w._ctx;if(D.dir==="next"&&Wr(D,!0)&&D.limit>0){var P=D.valueMapper,U=va(D,D.table.core.schema);return D.table.core.query({trans:E,limit:D.limit,values:!0,query:{index:U,range:D.range}}).then(function(Y){var re=Y.result;return P?re.map(P):re})}else{var W=[];return ao(D,function(Y){return W.push(Y)},E,D.table.core).then(function(){return W})}},_)},y.prototype.offset=function(_){var w=this._ctx;return _<=0?this:(w.offset+=_,Wr(w)?hl(w,function(){var E=_;return function(D,P){return E===0?!0:E===1?(--E,!1):(P(function(){D.advance(E),E=0}),!1)}}):hl(w,function(){var E=_;return function(){return--E<0}}),this)},y.prototype.limit=function(_){return this._ctx.limit=Math.min(this._ctx.limit,_),hl(this._ctx,function(){var w=_;return function(E,D,P){return--w<=0&&D(P),w>=0}},!0),this},y.prototype.until=function(_,w){return os(this._ctx,function(E,D,P){return _(E.value)?(D(P),w):!0}),this},y.prototype.first=function(_){return this.limit(1).toArray(function(w){return w[0]}).then(_)},y.prototype.last=function(_){return this.reverse().first(_)},y.prototype.filter=function(_){return os(this._ctx,function(w){return _(w.value)}),Xu(this._ctx,_),this},y.prototype.and=function(_){return this.filter(_)},y.prototype.or=function(_){return new this.db.WhereClause(this._ctx.table,_,this)},y.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},y.prototype.desc=function(){return this.reverse()},y.prototype.eachKey=function(_){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(E,D){_(D.key,D)})},y.prototype.eachUniqueKey=function(_){return this._ctx.unique="unique",this.eachKey(_)},y.prototype.eachPrimaryKey=function(_){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(E,D){_(D.primaryKey,D)})},y.prototype.keys=function(_){var w=this._ctx;w.keysOnly=!w.isMatch;var E=[];return this.each(function(D,P){E.push(P.key)}).then(function(){return E}).then(_)},y.prototype.primaryKeys=function(_){var w=this._ctx;if(w.dir==="next"&&Wr(w,!0)&&w.limit>0)return this._read(function(D){var P=va(w,w.table.core.schema);return w.table.core.query({trans:D,values:!1,limit:w.limit,query:{index:P,range:w.range}})}).then(function(D){var P=D.result;return P}).then(_);w.keysOnly=!w.isMatch;var E=[];return this.each(function(D,P){E.push(P.primaryKey)}).then(function(){return E}).then(_)},y.prototype.uniqueKeys=function(_){return this._ctx.unique="unique",this.keys(_)},y.prototype.firstKey=function(_){return this.limit(1).keys(function(w){return w[0]}).then(_)},y.prototype.lastKey=function(_){return this.reverse().firstKey(_)},y.prototype.distinct=function(){var _=this._ctx,w=_.index&&_.table.schema.idxByName[_.index];if(!w||!w.multi)return this;var E={};return os(this._ctx,function(D){var P=D.primaryKey.toString(),U=g(E,P);return E[P]=!0,!U}),this},y.prototype.modify=function(_){var w=this,E=this._ctx;return this._write(function(D){var P;typeof _=="function"?P=_:P=function(Me){return Mo(Me,_)};var U=E.table.core,W=U.schema.primaryKey,Y=W.outbound,re=W.extractKey,de=200,se=w.db._options.modifyChunkSize;se&&(typeof se=="object"?de=se[U.name]||se["*"]||200:de=se);var Ae=[],Ge=0,ue=[],ge=function(Me,Pe){var Ve=Pe.failures,Be=Pe.numFailures;Ge+=Me-Be;for(var ke=0,We=s(Ve);ke<We.length;ke++){var je=We[ke];Ae.push(Ve[je])}},Ee=_===gl;return w.clone().primaryKeys().then(function(Me){var Pe=Wr(E)&&E.limit===1/0&&(typeof _!="function"||Ee)&&{index:E.index,range:E.range},Ve=function(Be){var ke=Math.min(de,Me.length-Be),We=Me.slice(Be,Be+ke);return(Ee?Promise.resolve([]):U.getMany({trans:D,keys:We,cache:"immutable"})).then(function(je){var Ke=[],Dt=[],Ot=Y?[]:null,mt=Ee?We:[];if(!Ee)for(var Bt=0;Bt<ke;++Bt){var Mt=je[Bt],Kt={value:yt(Mt),primKey:Me[Be+Bt]};P.call(Kt,Kt.value,Kt)!==!1&&(Kt.value==null?mt.push(Me[Be+Bt]):!Y&&$t(re(Mt),re(Kt.value))!==0?(mt.push(Me[Be+Bt]),Ke.push(Kt.value)):(Dt.push(Kt.value),Y&&Ot.push(Me[Be+Bt])))}return Promise.resolve(Ke.length>0&&U.mutate({trans:D,type:"add",values:Ke}).then(function(Et){for(var mn in Et.failures)mt.splice(parseInt(mn),1);ge(Ke.length,Et)})).then(function(){return(Dt.length>0||Pe&&typeof _=="object")&&U.mutate({trans:D,type:"put",keys:Ot,values:Dt,criteria:Pe,changeSpec:typeof _!="function"&&_,isAdditionalChunk:Be>0}).then(function(Et){return ge(Dt.length,Et)})}).then(function(){return(mt.length>0||Pe&&Ee)&&U.mutate({trans:D,type:"delete",keys:mt,criteria:Pe,isAdditionalChunk:Be>0}).then(function(Et){return rs(E.table,mt,Et)}).then(function(Et){return ge(mt.length,Et)})}).then(function(){return Me.length>Be+ke&&Ve(Be+de)})})};return Ve(0).then(function(){if(Ae.length>0)throw new gn("Error modifying one or more objects",Ae,Ge,ue);return Me.length})})})},y.prototype.delete=function(){var _=this._ctx,w=_.range;return Wr(_)&&!_.table.schema.yProps&&(_.isPrimKey||w.type===3)?this._write(function(E){var D=_.table.core.schema.primaryKey,P=w;return _.table.core.count({trans:E,query:{index:D,range:P}}).then(function(U){return _.table.core.mutate({trans:E,type:"deleteRange",range:P}).then(function(W){var Y=W.failures,re=W.numFailures;if(re)throw new gn("Could not delete some values",Object.keys(Y).map(function(de){return Y[de]}),U-re);return U-re})})}):this.modify(gl)},y})(),gl=function(y,_){return _.value=null};function ss(y){return ga(Qu.prototype,function(w,E){this.db=y;var D=pl,P=null;if(E)try{D=E()}catch(re){P=re}var U=w._ctx,W=U.table,Y=W.hook.reading.fire;this._ctx={table:W,index:U.index,isPrimKey:!U.index||W.schema.primKey.keyPath&&U.index===W.schema.primKey.name,range:D,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:P,or:U.or,valueMapper:Y!==ar?Y:null}})}function ap(y,_){return y<_?-1:y===_?0:1}function Zu(y,_){return y>_?-1:y===_?0:1}function pn(y,_,w){var E=y instanceof _a?new y.Collection(y):y;return E._ctx.error=w?new w(_):new TypeError(_),E}function Fo(y){return new y.Collection(y,function(){return pr("")}).limit(0)}function sp(y){return y==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()}}function vl(y){return y==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()}}function ju(y,_,w,E,D,P){for(var U=Math.min(y.length,E.length),W=-1,Y=0;Y<U;++Y){var re=_[Y];if(re!==E[Y])return D(y[Y],w[Y])<0?y.substr(0,Y)+w[Y]+w.substr(Y+1):D(y[Y],E[Y])<0?y.substr(0,Y)+E[Y]+w.substr(Y+1):W>=0?y.substr(0,W)+_[W]+w.substr(W+1):null;D(y[Y],re)<0&&(W=Y)}return U<E.length&&P==="next"?y+w.substr(y.length):U<y.length&&P==="prev"?y.substr(0,w.length):W<0?null:y.substr(0,W)+E[W]+w.substr(W+1)}function tr(y,_,w,E){var D,P,U,W,Y,re,de,se=w.length;if(!w.every(function(ge){return typeof ge=="string"}))return pn(y,fl);function Ae(ge){D=sp(ge),P=vl(ge),U=ge==="next"?ap:Zu;var Ee=w.map(function(Me){return{lower:P(Me),upper:D(Me)}}).sort(function(Me,Pe){return U(Me.lower,Pe.lower)});W=Ee.map(function(Me){return Me.upper}),Y=Ee.map(function(Me){return Me.lower}),re=ge,de=ge==="next"?"":E}Ae("next");var Ge=new y.Collection(y,function(){return fr(W[0],Y[se-1]+E)});Ge._ondirectionchange=function(ge){Ae(ge)};var ue=0;return Ge._addAlgorithm(function(ge,Ee,Me){var Pe=ge.key;if(typeof Pe!="string")return!1;var Ve=P(Pe);if(_(Ve,Y,ue))return!0;for(var Be=null,ke=ue;ke<se;++ke){var We=ju(Pe,Ve,W[ke],Y[ke],U,re);We===null&&Be===null?ue=ke+1:(Be===null||U(Be,We)>0)&&(Be=We)}return Ee(Be!==null?function(){ge.continue(Be+de)}:Me),!1}),Ge}function fr(y,_,w,E){return{type:2,lower:y,upper:_,lowerOpen:w,upperOpen:E}}function pr(y){return{type:1,lower:y,upper:y}}var _a=(function(){function y(){}return Object.defineProperty(y.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),y.prototype.between=function(_,w,E,D){E=E!==!1,D=D===!0;try{return this._cmp(_,w)>0||this._cmp(_,w)===0&&(E||D)&&!(E&&D)?Fo(this):new this.Collection(this,function(){return fr(_,w,!E,!D)})}catch{return pn(this,ur)}},y.prototype.equals=function(_){return _==null?pn(this,ur):new this.Collection(this,function(){return pr(_)})},y.prototype.above=function(_){return _==null?pn(this,ur):new this.Collection(this,function(){return fr(_,void 0,!0)})},y.prototype.aboveOrEqual=function(_){return _==null?pn(this,ur):new this.Collection(this,function(){return fr(_,void 0,!1)})},y.prototype.below=function(_){return _==null?pn(this,ur):new this.Collection(this,function(){return fr(void 0,_,!1,!0)})},y.prototype.belowOrEqual=function(_){return _==null?pn(this,ur):new this.Collection(this,function(){return fr(void 0,_)})},y.prototype.startsWith=function(_){return typeof _!="string"?pn(this,fl):this.between(_,_+lr,!0,!0)},y.prototype.startsWithIgnoreCase=function(_){return _===""?this.startsWith(_):tr(this,function(w,E){return w.indexOf(E[0])===0},[_],lr)},y.prototype.equalsIgnoreCase=function(_){return tr(this,function(w,E){return w===E[0]},[_],"")},y.prototype.anyOfIgnoreCase=function(){var _=Qe.apply(_t,arguments);return _.length===0?Fo(this):tr(this,function(w,E){return E.indexOf(w)!==-1},_,"")},y.prototype.startsWithAnyOfIgnoreCase=function(){var _=Qe.apply(_t,arguments);return _.length===0?Fo(this):tr(this,function(w,E){return E.some(function(D){return w.indexOf(D)===0})},_,lr)},y.prototype.anyOf=function(){var _=this,w=Qe.apply(_t,arguments),E=this._cmp;try{w.sort(E)}catch{return pn(this,ur)}if(w.length===0)return Fo(this);var D=new this.Collection(this,function(){return fr(w[0],w[w.length-1])});D._ondirectionchange=function(U){E=U==="next"?_._ascending:_._descending,w.sort(E)};var P=0;return D._addAlgorithm(function(U,W,Y){for(var re=U.key;E(re,w[P])>0;)if(++P,P===w.length)return W(Y),!1;return E(re,w[P])===0?!0:(W(function(){U.continue(w[P])}),!1)}),D},y.prototype.notEqual=function(_){return this.inAnyRange([[Ui,_],[_,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},y.prototype.noneOf=function(){var _=Qe.apply(_t,arguments);if(_.length===0)return new this.Collection(this);try{_.sort(this._ascending)}catch{return pn(this,ur)}var w=_.reduce(function(E,D){return E?E.concat([[E[E.length-1][1],D]]):[[Ui,D]]},null);return w.push([_[_.length-1],this.db._maxKey]),this.inAnyRange(w,{includeLowers:!1,includeUppers:!1})},y.prototype.inAnyRange=function(_,w){var E=this,D=this._cmp,P=this._ascending,U=this._descending,W=this._min,Y=this._max;if(_.length===0)return Fo(this);if(!_.every(function(ke){return ke[0]!==void 0&&ke[1]!==void 0&&P(ke[0],ke[1])<=0}))return pn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$e.InvalidArgument);var re=!w||w.includeLowers!==!1,de=w&&w.includeUppers===!0;function se(ke,We){for(var je=0,Ke=ke.length;je<Ke;++je){var Dt=ke[je];if(D(We[0],Dt[1])<0&&D(We[1],Dt[0])>0){Dt[0]=W(Dt[0],We[0]),Dt[1]=Y(Dt[1],We[1]);break}}return je===Ke&&ke.push(We),ke}var Ae=P;function Ge(ke,We){return Ae(ke[0],We[0])}var ue;try{ue=_.reduce(se,[]),ue.sort(Ge)}catch{return pn(this,ur)}var ge=0,Ee=de?function(ke){return P(ke,ue[ge][1])>0}:function(ke){return P(ke,ue[ge][1])>=0},Me=re?function(ke){return U(ke,ue[ge][0])>0}:function(ke){return U(ke,ue[ge][0])>=0};function Pe(ke){return!Ee(ke)&&!Me(ke)}var Ve=Ee,Be=new this.Collection(this,function(){return fr(ue[0][0],ue[ue.length-1][1],!re,!de)});return Be._ondirectionchange=function(ke){ke==="next"?(Ve=Ee,Ae=P):(Ve=Me,Ae=U),ue.sort(Ge)},Be._addAlgorithm(function(ke,We,je){for(var Ke=ke.key;Ve(Ke);)if(++ge,ge===ue.length)return We(je),!1;return Pe(Ke)?!0:(E._cmp(Ke,ue[ge][1])===0||E._cmp(Ke,ue[ge][0])===0||We(function(){Ae===P?ke.continue(ue[ge][0]):ke.continue(ue[ge][1])}),!1)}),Be},y.prototype.startsWithAnyOf=function(){var _=Qe.apply(_t,arguments);return _.every(function(w){return typeof w=="string"})?_.length===0?Fo(this):this.inAnyRange(_.map(function(w){return[w,w+lr]})):pn(this,"startsWithAnyOf() only works with strings")},y})();function yl(y){return ga(_a.prototype,function(w,E,D){if(this.db=y,this._ctx={table:w,index:E===":id"?null:E,or:D},this._cmp=this._ascending=$t,this._descending=function(P,U){return $t(U,P)},this._max=function(P,U){return $t(P,U)>0?P:U},this._min=function(P,U){return $t(P,U)<0?P:U},this._IDBKeyRange=y._deps.IDBKeyRange,!this._IDBKeyRange)throw new $e.MissingAPI})}function di(y){return tn(function(_){return xa(_),y(_.target.error),!1})}function xa(y){y.stopPropagation&&y.stopPropagation(),y.preventDefault&&y.preventDefault()}var Ca="storagemutated",_l="x-storagemutated-1",$r=ha(null,Ca),ec=(function(){function y(){}return y.prototype._lock=function(){return X(!rt.global),++this._reculock,this._reculock===1&&!rt.global&&(rt.lockOwnerFor=this),this},y.prototype._unlock=function(){if(X(!rt.global),--this._reculock===0)for(rt.global||(rt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var _=this._blockedFuncs.shift();try{Sn(_[1],_[0])}catch{}}return this},y.prototype._locked=function(){return this._reculock&&rt.lockOwnerFor!==this},y.prototype.create=function(_){var w=this;if(!this.mode)return this;var E=this.db.idbdb,D=this.db._state.dbOpenError;if(X(!this.idbtrans),!_&&!E)switch(D&&D.name){case"DatabaseClosedError":throw new $e.DatabaseClosed(D);case"MissingAPIError":throw new $e.MissingAPI(D.message,D);default:throw new $e.OpenFailed(D)}if(!this.active)throw new $e.TransactionInactive;return X(this._completion._state===null),_=this.idbtrans=_||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):E.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),_.onerror=tn(function(P){xa(P),w._reject(_.error)}),_.onabort=tn(function(P){xa(P),w.active&&w._reject(new $e.Abort(_.error)),w.active=!1,w.on("abort").fire(P)}),_.oncomplete=tn(function(){w.active=!1,w._resolve(),"mutatedParts"in _&&$r.storagemutated.fire(_.mutatedParts)}),this},y.prototype._promise=function(_,w,E){var D=this;if(_==="readwrite"&&this.mode!=="readwrite")return wt(new $e.ReadOnly("Transaction is readonly"));if(!this.active)return wt(new $e.TransactionInactive);if(this._locked())return new lt(function(U,W){D._blockedFuncs.push([function(){D._promise(_,w,E).then(U,W)},rt])});if(E)return V(function(){var U=new lt(function(W,Y){D._lock();var re=w(W,Y,D);re&&re.then&&re.then(W,Y)});return U.finally(function(){return D._unlock()}),U._lib=!0,U});var P=new lt(function(U,W){var Y=w(U,W,D);Y&&Y.then&&Y.then(U,W)});return P._lib=!0,P},y.prototype._root=function(){return this.parent?this.parent._root():this},y.prototype.waitFor=function(_){var w=this._root(),E=lt.resolve(_);if(w._waitingFor)w._waitingFor=w._waitingFor.then(function(){return E});else{w._waitingFor=E,w._waitingQueue=[];var D=w.idbtrans.objectStore(w.storeNames[0]);(function U(){for(++w._spinCount;w._waitingQueue.length;)w._waitingQueue.shift()();w._waitingFor&&(D.get(-1/0).onsuccess=U)})()}var P=w._waitingFor;return new lt(function(U,W){E.then(function(Y){return w._waitingQueue.push(tn(U.bind(null,Y)))},function(Y){return w._waitingQueue.push(tn(W.bind(null,Y)))}).finally(function(){w._waitingFor===P&&(w._waitingFor=null)})})},y.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new $e.Abort))},y.prototype.table=function(_){var w=this._memoizedTables||(this._memoizedTables={});if(g(w,_))return w[_];var E=this.schema[_];if(!E)throw new $e.NotFound("Table "+_+" not part of transaction");var D=new this.db.Table(_,E,this);return D.core=this.db.core.table(_),w[_]=D,D},y})();function tc(y){return ga(ec.prototype,function(w,E,D,P,U){var W=this;w!=="readonly"&&E.forEach(function(Y){var re,de=(re=D[Y])===null||re===void 0?void 0:re.yProps;de&&(E=E.concat(de.map(function(se){return se.updatesTable})))}),this.db=y,this.mode=w,this.storeNames=E,this.schema=D,this.chromeTransactionDurability=P,this.idbtrans=null,this.on=ha(this,"complete","error","abort"),this.parent=U||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new lt(function(Y,re){W._resolve=Y,W._reject=re}),this._completion.then(function(){W.active=!1,W.on.complete.fire()},function(Y){var re=W.active;return W.active=!1,W.on.error.fire(Y),W.parent?W.parent._reject(Y):re&&W.idbtrans&&W.idbtrans.abort(),wt(Y)})})}function xl(y,_,w,E,D,P,U,W){return{name:y,keyPath:_,unique:w,multi:E,auto:D,compound:P,src:(w&&!U?"&":"")+(E?"*":"")+(D?"++":"")+nc(_),type:W}}function nc(y){return typeof y=="string"?y:y?"["+[].join.call(y,"+")+"]":""}function Cl(y,_,w){return{name:y,primKey:_,indexes:w,mappedClass:null,idxByName:ie(w,function(E){return[E.name,E]})}}function lp(y){return y.length===1?y[0]:y}var No=function(y){try{return y.only([[]]),No=function(){return[[]]},[[]]}catch{return No=function(){return lr},lr}};function bl(y){return y==null?function(){}:typeof y=="string"?ic(y):function(_){return he(_,y)}}function ic(y){var _=y.split(".");return _.length===1?function(w){return w[y]}:function(w){return he(w,y)}}function ba(y){return[].slice.call(y)}var Ro=0;function wa(y){return y==null?":id":typeof y=="string"?y:"[".concat(y.join("+"),"]")}function up(y,_,w){function E(se,Ae){var Ge=ba(se.objectStoreNames);return{schema:{name:se.name,tables:Ge.map(function(ue){return Ae.objectStore(ue)}).map(function(ue){var ge=ue.keyPath,Ee=ue.autoIncrement,Me=c(ge),Pe=ge==null,Ve={},Be={name:ue.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Pe,compound:Me,keyPath:ge,autoIncrement:Ee,unique:!0,extractKey:bl(ge)},indexes:ba(ue.indexNames).map(function(ke){return ue.index(ke)}).map(function(ke){var We=ke.name,je=ke.unique,Ke=ke.multiEntry,Dt=ke.keyPath,Ot=c(Dt),mt={name:We,compound:Ot,keyPath:Dt,unique:je,multiEntry:Ke,extractKey:bl(Dt)};return Ve[wa(Dt)]=mt,mt}),getIndexByKeyPath:function(ke){return Ve[wa(ke)]}};return Ve[":id"]=Be.primaryKey,ge!=null&&(Ve[wa(ge)]=Be.primaryKey),Be})},hasGetAll:Ge.length>0&&"getAll"in Ae.objectStore(Ge[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function D(se){if(se.type===3)return null;if(se.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ae=se.lower,Ge=se.upper,ue=se.lowerOpen,ge=se.upperOpen,Ee=Ae===void 0?Ge===void 0?null:_.upperBound(Ge,!!ge):Ge===void 0?_.lowerBound(Ae,!!ue):_.bound(Ae,Ge,!!ue,!!ge);return Ee}function P(se){var Ae=se.name;function Ge(Ee){var Me=Ee.trans,Pe=Ee.type,Ve=Ee.keys,Be=Ee.values,ke=Ee.range;return new Promise(function(We,je){We=tn(We);var Ke=Me.objectStore(Ae),Dt=Ke.keyPath==null,Ot=Pe==="put"||Pe==="add";if(!Ot&&Pe!=="delete"&&Pe!=="deleteRange")throw new Error("Invalid operation type: "+Pe);var mt=(Ve||Be||{length:1}).length;if(Ve&&Be&&Ve.length!==Be.length)throw new Error("Given keys array must have same length as given values array.");if(mt===0)return We({numFailures:0,failures:{},results:[],lastResult:void 0});var Bt,Mt=[],Kt=[],Et=0,mn=function(ir){++Et,xa(ir)};if(Pe==="deleteRange"){if(ke.type===4)return We({numFailures:Et,failures:Kt,results:[],lastResult:void 0});ke.type===3?Mt.push(Bt=Ke.clear()):Mt.push(Bt=Ke.delete(D(ke)))}else{var Hn=Ot?Dt?[Be,Ve]:[Be,null]:[Ve,null],vr=Hn[0],ni=Hn[1];if(Ot)for(var xi=0;xi<mt;++xi)Mt.push(Bt=ni&&ni[xi]!==void 0?Ke[Pe](vr[xi],ni[xi]):Ke[Pe](vr[xi])),Bt.onerror=mn;else for(var xi=0;xi<mt;++xi)Mt.push(Bt=Ke[Pe](vr[xi])),Bt.onerror=mn}var Dr=function(ir){var po=ir.target.result;Mt.forEach(function(qi,eo){return qi.error!=null&&(Kt[eo]=qi.error)}),We({numFailures:Et,failures:Kt,results:Pe==="delete"?Ve:Mt.map(function(qi){return qi.result}),lastResult:po})};Bt.onerror=function(ir){mn(ir),Dr(ir)},Bt.onsuccess=Dr})}function ue(Ee){var Me=Ee.trans,Pe=Ee.values,Ve=Ee.query,Be=Ee.reverse,ke=Ee.unique;return new Promise(function(We,je){We=tn(We);var Ke=Ve.index,Dt=Ve.range,Ot=Me.objectStore(Ae),mt=Ke.isPrimaryKey?Ot:Ot.index(Ke.name),Bt=Be?ke?"prevunique":"prev":ke?"nextunique":"next",Mt=Pe||!("openKeyCursor"in mt)?mt.openCursor(D(Dt),Bt):mt.openKeyCursor(D(Dt),Bt);Mt.onerror=di(je),Mt.onsuccess=tn(function(Kt){var Et=Mt.result;if(!Et){We(null);return}Et.___id=++Ro,Et.done=!1;var mn=Et.continue.bind(Et),Hn=Et.continuePrimaryKey;Hn&&(Hn=Hn.bind(Et));var vr=Et.advance.bind(Et),ni=function(){throw new Error("Cursor not started")},xi=function(){throw new Error("Cursor not stopped")};Et.trans=Me,Et.stop=Et.continue=Et.continuePrimaryKey=Et.advance=ni,Et.fail=tn(je),Et.next=function(){var Dr=this,ir=1;return this.start(function(){return ir--?Dr.continue():Dr.stop()}).then(function(){return Dr})},Et.start=function(Dr){var ir=new Promise(function(qi,eo){qi=tn(qi),Mt.onerror=di(eo),Et.fail=eo,Et.stop=function(yp){Et.stop=Et.continue=Et.continuePrimaryKey=Et.advance=xi,qi(yp)}}),po=function(){if(Mt.result)try{Dr()}catch(qi){Et.fail(qi)}else Et.done=!0,Et.start=function(){throw new Error("Cursor behind last entry")},Et.stop()};return Mt.onsuccess=tn(function(qi){Mt.onsuccess=po,po()}),Et.continue=mn,Et.continuePrimaryKey=Hn,Et.advance=vr,po(),ir},We(Et)},je)})}function ge(Ee){return function(Me){return new Promise(function(Pe,Ve){Pe=tn(Pe);var Be=Me.trans,ke=Me.values,We=Me.limit,je=Me.query,Ke=We===1/0?void 0:We,Dt=je.index,Ot=je.range,mt=Be.objectStore(Ae),Bt=Dt.isPrimaryKey?mt:mt.index(Dt.name),Mt=D(Ot);if(We===0)return Pe({result:[]});if(Ee){var Kt=ke?Bt.getAll(Mt,Ke):Bt.getAllKeys(Mt,Ke);Kt.onsuccess=function(vr){return Pe({result:vr.target.result})},Kt.onerror=di(Ve)}else{var Et=0,mn=ke||!("openKeyCursor"in Bt)?Bt.openCursor(Mt):Bt.openKeyCursor(Mt),Hn=[];mn.onsuccess=function(vr){var ni=mn.result;if(!ni)return Pe({result:Hn});if(Hn.push(ke?ni.value:ni.primaryKey),++Et===We)return Pe({result:Hn});ni.continue()},mn.onerror=di(Ve)}})}}return{name:Ae,schema:se,mutate:Ge,getMany:function(Ee){var Me=Ee.trans,Pe=Ee.keys;return new Promise(function(Ve,Be){Ve=tn(Ve);for(var ke=Me.objectStore(Ae),We=Pe.length,je=new Array(We),Ke=0,Dt=0,Ot,mt=function(Et){var mn=Et.target;(je[mn._pos]=mn.result)!=null,++Dt===Ke&&Ve(je)},Bt=di(Be),Mt=0;Mt<We;++Mt){var Kt=Pe[Mt];Kt!=null&&(Ot=ke.get(Pe[Mt]),Ot._pos=Mt,Ot.onsuccess=mt,Ot.onerror=Bt,++Ke)}Ke===0&&Ve(je)})},get:function(Ee){var Me=Ee.trans,Pe=Ee.key;return new Promise(function(Ve,Be){Ve=tn(Ve);var ke=Me.objectStore(Ae),We=ke.get(Pe);We.onsuccess=function(je){return Ve(je.target.result)},We.onerror=di(Be)})},query:ge(Y),openCursor:ue,count:function(Ee){var Me=Ee.query,Pe=Ee.trans,Ve=Me.index,Be=Me.range;return new Promise(function(ke,We){var je=Pe.objectStore(Ae),Ke=Ve.isPrimaryKey?je:je.index(Ve.name),Dt=D(Be),Ot=Dt?Ke.count(Dt):Ke.count();Ot.onsuccess=tn(function(mt){return ke(mt.target.result)}),Ot.onerror=di(We)})}}}var U=E(y,w),W=U.schema,Y=U.hasGetAll,re=W.tables.map(function(se){return P(se)}),de={};return re.forEach(function(se){return de[se.name]=se}),{stack:"dbcore",transaction:y.transaction.bind(y),table:function(se){var Ae=de[se];if(!Ae)throw new Error("Table '".concat(se,"' not found"));return de[se]},MIN_KEY:-1/0,MAX_KEY:No(_),schema:W}}function cp(y,_){return _.reduce(function(w,E){var D=E.create;return t(t({},w),D(w))},y)}function Sa(y,_,w,E){var D=w.IDBKeyRange;w.indexedDB;var P=cp(up(_,D,E),y.dbcore);return{dbcore:P}}function yn(y,_){var w=_.db,E=Sa(y._middlewares,w,y._deps,_);y.core=E.dbcore,y.tables.forEach(function(D){var P=D.name;y.core.schema.tables.some(function(U){return U.name===P})&&(D.core=y.core.table(P),y[P]instanceof y.Table&&(y[P].core=D.core))})}function ls(y,_,w,E){w.forEach(function(D){var P=E[D];_.forEach(function(U){var W=B(U,D);(!W||"value"in W&&W.value===void 0)&&(U===y.Transaction.prototype||U instanceof y.Transaction?A(U,D,{get:function(){return this.table(D)},set:function(Y){C(this,D,{value:Y,writable:!0,configurable:!0,enumerable:!0})}}):U[D]=new y.Table(D,P))})})}function us(y,_){_.forEach(function(w){for(var E in w)w[E]instanceof y.Table&&delete w[E]})}function Ea(y,_){return y._cfg.version-_._cfg.version}function dp(y,_,w,E){var D=y._dbSchema;w.objectStoreNames.contains("$meta")&&!D.$meta&&(D.$meta=Cl("$meta",fs("")[0],[]),y._storeNames.push("$meta"));var P=y._createTransaction("readwrite",y._storeNames,D);P.create(w),P._completion.catch(E);var U=P._reject.bind(P),W=rt.transless||rt;V(function(){if(rt.trans=P,rt.transless=W,_===0)s(D).forEach(function(Y){Sl(w,Y,D[Y].primKey,D[Y].indexes)}),yn(y,w),lt.follow(function(){return y.on.populate.fire(P)}).catch(U);else return yn(y,w),fp(y,P,_).then(function(Y){return wl(y,Y,P,w)}).catch(U)})}function rc(y,_){oc(y._dbSchema,_),_.db.version%10===0&&!_.objectStoreNames.contains("$meta")&&_.db.createObjectStore("$meta").add(Math.ceil(_.db.version/10-1),"version");var w=ds(y,y.idbdb,_);so(y,y._dbSchema,_);for(var E=cs(w,y._dbSchema),D=function(re){if(re.change.length||re.recreate)return console.warn("Unable to patch indexes of table ".concat(re.name," because it has changes on the type of index or primary key.")),{value:void 0};var de=_.objectStore(re.name);re.add.forEach(function(se){Pn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(re.name,".").concat(se.src)),Ta(de,se)})},P=0,U=E.change;P<U.length;P++){var W=U[P],Y=D(W);if(typeof Y=="object")return Y.value}}function fp(y,_,w){return _.storeNames.includes("$meta")?_.table("$meta").get("version").then(function(E){return E??w}):lt.resolve(w)}function wl(y,_,w,E){var D=[],P=y._versions,U=y._dbSchema=ds(y,y.idbdb,E),W=P.filter(function(re){return re._cfg.version>=_});if(W.length===0)return lt.resolve();W.forEach(function(re){D.push(function(){var de=U,se=re._cfg.dbschema;so(y,de,E),so(y,se,E),U=y._dbSchema=se;var Ae=cs(de,se);Ae.add.forEach(function(Pe){Sl(E,Pe[0],Pe[1].primKey,Pe[1].indexes)}),Ae.change.forEach(function(Pe){if(Pe.recreate)throw new $e.Upgrade("Not yet support for changing primary key");var Ve=E.objectStore(Pe.name);Pe.add.forEach(function(Be){return Ta(Ve,Be)}),Pe.change.forEach(function(Be){Ve.deleteIndex(Be.name),Ta(Ve,Be)}),Pe.del.forEach(function(Be){return Ve.deleteIndex(Be)})});var Ge=re._cfg.contentUpgrade;if(Ge&&re._cfg.version>_){yn(y,E),w._memoizedTables={};var ue=Te(se);Ae.del.forEach(function(Pe){ue[Pe]=de[Pe]}),us(y,[y.Transaction.prototype]),ls(y,[y.Transaction.prototype],s(ue),ue),w.schema=ue;var ge=zt(Ge);ge&&Q();var Ee,Me=lt.follow(function(){if(Ee=Ge(w),Ee&&ge){var Pe=Se.bind(null,null);Ee.then(Pe,Pe)}});return Ee&&typeof Ee.then=="function"?lt.resolve(Ee):Me.then(function(){return Ee})}}),D.push(function(de){var se=re._cfg.dbschema;ac(se,de),us(y,[y.Transaction.prototype]),ls(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),w.schema=y._dbSchema}),D.push(function(de){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===re._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function(se){return se!=="$meta"})):de.objectStore("$meta").put(re._cfg.version,"version"))})});function Y(){return D.length?lt.resolve(D.shift()(w.idbtrans)).then(Y):lt.resolve()}return Y().then(function(){oc(U,E)})}function cs(y,_){var w={del:[],add:[],change:[]},E;for(E in y)_[E]||w.del.push(E);for(E in _){var D=y[E],P=_[E];if(!D)w.add.push([E,P]);else{var U={name:E,def:P,recreate:!1,del:[],add:[],change:[]};if(""+(D.primKey.keyPath||"")!=""+(P.primKey.keyPath||"")||D.primKey.auto!==P.primKey.auto)U.recreate=!0,w.change.push(U);else{var W=D.idxByName,Y=P.idxByName,re=void 0;for(re in W)Y[re]||U.del.push(re);for(re in Y){var de=W[re],se=Y[re];de?de.src!==se.src&&U.change.push(se):U.add.push(se)}(U.del.length>0||U.add.length>0||U.change.length>0)&&w.change.push(U)}}}return w}function Sl(y,_,w,E){var D=y.db.createObjectStore(_,w.keyPath?{keyPath:w.keyPath,autoIncrement:w.auto}:{autoIncrement:w.auto});return E.forEach(function(P){return Ta(D,P)}),D}function oc(y,_){s(y).forEach(function(w){_.db.objectStoreNames.contains(w)||(Pn&&console.debug("Dexie: Creating missing table",w),Sl(_,w,y[w].primKey,y[w].indexes))})}function ac(y,_){[].slice.call(_.db.objectStoreNames).forEach(function(w){return y[w]==null&&_.db.deleteObjectStore(w)})}function Ta(y,_){y.createIndex(_.name,_.keyPath,{unique:_.unique,multiEntry:_.multi})}function ds(y,_,w){var E={},D=O(_.objectStoreNames,0);return D.forEach(function(P){for(var U=w.objectStore(P),W=U.keyPath,Y=xl(nc(W),W||"",!0,!1,!!U.autoIncrement,W&&typeof W!="string",!0),re=[],de=0;de<U.indexNames.length;++de){var se=U.index(U.indexNames[de]);W=se.keyPath;var Ae=xl(se.name,W,!!se.unique,!!se.multiEntry,!1,W&&typeof W!="string",!1);re.push(Ae)}E[P]=Cl(P,Y,re)}),E}function Aa(y,_,w){y.verno=_.version/10;var E=y._dbSchema=ds(y,_,w);y._storeNames=O(_.objectStoreNames,0),ls(y,[y._allTables],s(E),E)}function Tr(y,_){var w=ds(y,y.idbdb,_),E=cs(w,y._dbSchema);return!(E.add.length||E.change.some(function(D){return D.add.length||D.change.length}))}function so(y,_,w){for(var E=w.db.objectStoreNames,D=0;D<E.length;++D){var P=E[D],U=w.objectStore(P);y._hasGetAll="getAll"in U;for(var W=0;W<U.indexNames.length;++W){var Y=U.indexNames[W],re=U.index(Y).keyPath,de=typeof re=="string"?re:"["+O(re).join("+")+"]";if(_[P]){var se=_[P].idxByName[de];se&&(se.name=Y,delete _[P].idxByName[de],_[P].idxByName[Y]=se)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(y._hasGetAll=!1)}function fs(y){return y.split(",").map(function(_,w){var E,D=_.split(":"),P=(E=D[1])===null||E===void 0?void 0:E.trim();_=D[0].trim();var U=_.replace(/([&*]|\+\+)/g,""),W=/^\[/.test(U)?U.match(/^\[(.*)\]$/)[1].split("+"):U;return xl(U,W||null,/\&/.test(_),/\*/.test(_),/\+\+/.test(_),c(W),w===0,P)})}var sc=(function(){function y(){}return y.prototype._createTableSchema=function(_,w,E){return Cl(_,w,E)},y.prototype._parseIndexSyntax=function(_){return fs(_)},y.prototype._parseStoresSpec=function(_,w){var E=this;s(_).forEach(function(D){if(_[D]!==null){var P=E._parseIndexSyntax(_[D]),U=P.shift();if(!U)throw new $e.Schema("Invalid schema for table "+D+": "+_[D]);if(U.unique=!0,U.multi)throw new $e.Schema("Primary key cannot be multiEntry*");P.forEach(function(Y){if(Y.auto)throw new $e.Schema("Only primary key can be marked as autoIncrement (++)");if(!Y.keyPath)throw new $e.Schema("Index must have a name and cannot be an empty string")});var W=E._createTableSchema(D,U,P);w[D]=W}})},y.prototype.stores=function(_){var w=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,_):_;var E=w._versions,D={},P={};return E.forEach(function(U){f(D,U._cfg.storesSource),P=U._cfg.dbschema={},U._parseStoresSpec(D,P)}),w._dbSchema=P,us(w,[w._allTables,w,w.Transaction.prototype]),ls(w,[w._allTables,w,w.Transaction.prototype,this._cfg.tables],s(P),P),w._storeNames=s(P),this},y.prototype.upgrade=function(_){return this._cfg.contentUpgrade=On(this._cfg.contentUpgrade||Wt,_),this},y})();function mr(y){return ga(sc.prototype,function(w){this.db=y,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Ar(y,_){var w=y._dbNamesDB;return w||(w=y._dbNamesDB=new nr(Io,{addons:[],indexedDB:y,IDBKeyRange:_}),w.version(1).stores({dbnames:"name"})),w.table("dbnames")}function Da(y){return y&&typeof y.databases=="function"}function pp(y){var _=y.indexedDB,w=y.IDBKeyRange;return Da(_)?Promise.resolve(_.databases()).then(function(E){return E.map(function(D){return D.name}).filter(function(D){return D!==Io})}):Ar(_,w).toCollection().primaryKeys()}function lc(y,_){var w=y.indexedDB,E=y.IDBKeyRange;!Da(w)&&_!==Io&&Ar(w,E).put({name:_}).catch(Wt)}function mp(y,_){var w=y.indexedDB,E=y.IDBKeyRange;!Da(w)&&_!==Io&&Ar(w,E).delete(_).catch(Wt)}function ps(y){return V(function(){return rt.letThrough=!0,y()})}function El(){var y=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!y||!indexedDB.databases)return Promise.resolve();var _;return new Promise(function(w){var E=function(){return indexedDB.databases().finally(w)};_=setInterval(E,100),E()}).finally(function(){return clearInterval(_)})}var Kr;function zi(y){return!("from"in y)}var Wn=function(y,_){if(this)f(this,arguments.length?{d:1,from:y,to:arguments.length>1?_:y}:{d:0});else{var w=new Wn;return y&&"d"in y&&f(w,y),w}};b(Wn.prototype,(Kr={add:function(y){return ka(this,y),this},addKey:function(y){return Po(this,y,y),this},addKeys:function(y){var _=this;return y.forEach(function(w){return Po(_,w,w)}),this},hasKey:function(y){var _=ms(this).next(y).value;return _&&$t(_.from,y)<=0&&$t(_.to,y)>=0}},Kr[Re]=function(){return ms(this)},Kr));function Po(y,_,w){var E=$t(_,w);if(!isNaN(E)){if(E>0)throw RangeError();if(zi(y))return f(y,{from:_,to:w,d:1});var D=y.l,P=y.r;if($t(w,y.from)<0)return D?Po(D,_,w):y.l={from:_,to:w,d:1,l:null,r:null},Tl(y);if($t(_,y.to)>0)return P?Po(P,_,w):y.r={from:_,to:w,d:1,l:null,r:null},Tl(y);$t(_,y.from)<0&&(y.from=_,y.l=null,y.d=P?P.d+1:1),$t(w,y.to)>0&&(y.to=w,y.r=null,y.d=y.l?y.l.d+1:1);var U=!y.r;D&&!y.l&&ka(y,D),P&&U&&ka(y,P)}}function ka(y,_){function w(E,D){var P=D.from,U=D.to,W=D.l,Y=D.r;Po(E,P,U),W&&w(E,W),Y&&w(E,Y)}zi(_)||w(y,_)}function uc(y,_){var w=ms(_),E=w.next();if(E.done)return!1;for(var D=E.value,P=ms(y),U=P.next(D.from),W=U.value;!E.done&&!U.done;){if($t(W.from,D.to)<=0&&$t(W.to,D.from)>=0)return!0;$t(D.from,W.from)<0?D=(E=w.next(W.from)).value:W=(U=P.next(D.from)).value}return!1}function ms(y){var _=zi(y)?null:{s:0,n:y};return{next:function(w){for(var E=arguments.length>0;_;)switch(_.s){case 0:if(_.s=1,E)for(;_.n.l&&$t(w,_.n.from)<0;)_={up:_,n:_.n.l,s:1};else for(;_.n.l;)_={up:_,n:_.n.l,s:1};case 1:if(_.s=2,!E||$t(w,_.n.to)<=0)return{value:_.n,done:!1};case 2:if(_.n.r){_.s=3,_={up:_,n:_.n.r,s:0};continue}case 3:_=_.up}return{done:!0}}}}function Tl(y){var _,w,E=(((_=y.r)===null||_===void 0?void 0:_.d)||0)-(((w=y.l)===null||w===void 0?void 0:w.d)||0),D=E>1?"r":E<-1?"l":"";if(D){var P=D==="r"?"l":"r",U=t({},y),W=y[D];y.from=W.from,y.to=W.to,y[D]=W[D],U[D]=W[P],y[P]=U,U.d=Al(U)}y.d=Al(y)}function Al(y){var _=y.r,w=y.l;return(_?w?Math.max(_.d,w.d):_.d:w?w.d:0)+1}function Jr(y,_){return s(_).forEach(function(w){y[w]?ka(y[w],_[w]):y[w]=pt(_[w])}),y}function hs(y,_){return y.all||_.all||Object.keys(y).some(function(w){return _[w]&&uc(_[w],y[w])})}var Yr={},Ia={},Vo=!1;function Ma(y,_){Jr(Ia,y),Vo||(Vo=!0,setTimeout(function(){Vo=!1;var w=Ia;Ia={},Lo(w,!1)},0))}function Lo(y,_){_===void 0&&(_=!1);var w=new Set;if(y.all)for(var E=0,D=Object.values(Yr);E<D.length;E++){var P=D[E];Gi(P,y,w,_)}else for(var U in y){var W=/^idb\:\/\/(.*)\/(.*)\//.exec(U);if(W){var Y=W[1],re=W[2],P=Yr["idb://".concat(Y,"/").concat(re)];P&&Gi(P,y,w,_)}}w.forEach(function(de){return de()})}function Gi(y,_,w,E){for(var D=[],P=0,U=Object.entries(y.queries.query);P<U.length;P++){for(var W=U[P],Y=W[0],re=W[1],de=[],se=0,Ae=re;se<Ae.length;se++){var Ge=Ae[se];hs(_,Ge.obsSet)?Ge.subscribers.forEach(function(Me){return w.add(Me)}):E&&de.push(Ge)}E&&D.push([Y,de])}if(E)for(var ue=0,ge=D;ue<ge.length;ue++){var Ee=ge[ue],Y=Ee[0],de=Ee[1];y.queries.query[Y]=de}}function cc(y){var _=y._state,w=y._deps.indexedDB;if(_.isBeingOpened||y.idbdb)return _.dbReadyPromise.then(function(){return _.dbOpenError?wt(_.dbOpenError):y});_.isBeingOpened=!0,_.dbOpenError=null,_.openComplete=!1;var E=_.openCanceller,D=Math.round(y.verno*10),P=!1;function U(){if(_.openCanceller!==E)throw new $e.DatabaseClosed("db.open() was cancelled")}var W=_.dbReadyResolve,Y=null,re=!1,de=function(){return new lt(function(se,Ae){if(U(),!w)throw new $e.MissingAPI;var Ge=y.name,ue=_.autoSchema||!D?w.open(Ge):w.open(Ge,D);if(!ue)throw new $e.MissingAPI;ue.onerror=di(Ae),ue.onblocked=tn(y._fireOnBlocked),ue.onupgradeneeded=tn(function(ge){if(Y=ue.transaction,_.autoSchema&&!y._options.allowEmptyDB){ue.onerror=xa,Y.abort(),ue.result.close();var Ee=w.deleteDatabase(Ge);Ee.onsuccess=Ee.onerror=tn(function(){Ae(new $e.NoSuchDatabase("Database ".concat(Ge," doesnt exist")))})}else{Y.onerror=di(Ae);var Me=ge.oldVersion>Math.pow(2,62)?0:ge.oldVersion;re=Me<1,y.idbdb=ue.result,P&&rc(y,Y),dp(y,Me/10,Y,Ae)}},Ae),ue.onsuccess=tn(function(){Y=null;var ge=y.idbdb=ue.result,Ee=O(ge.objectStoreNames);if(Ee.length>0)try{var Me=ge.transaction(lp(Ee),"readonly");if(_.autoSchema)Aa(y,ge,Me);else if(so(y,y._dbSchema,Me),!Tr(y,Me)&&!P)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ge.close(),D=ge.version+1,P=!0,se(de());yn(y,Me)}catch{}cr.push(y),ge.onversionchange=tn(function(Pe){_.vcFired=!0,y.on("versionchange").fire(Pe)}),ge.onclose=tn(function(){y.close({disableAutoOpen:!1})}),re&&lc(y._deps,Ge),se()},Ae)}).catch(function(se){switch(se?.name){case"UnknownError":if(_.PR1398_maxLoop>0)return _.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),de();break;case"VersionError":if(D>0)return D=0,de();break}return lt.reject(se)})};return lt.race([E,(typeof navigator>"u"?lt.resolve():El()).then(de)]).then(function(){return U(),_.onReadyBeingFired=[],lt.resolve(ps(function(){return y.on.ready.fire(y.vip)})).then(function se(){if(_.onReadyBeingFired.length>0){var Ae=_.onReadyBeingFired.reduce(On,Wt);return _.onReadyBeingFired=[],lt.resolve(ps(function(){return Ae(y.vip)})).then(se)}})}).finally(function(){_.openCanceller===E&&(_.onReadyBeingFired=null,_.isBeingOpened=!1)}).catch(function(se){_.dbOpenError=se;try{Y&&Y.abort()}catch{}return E===_.openCanceller&&y._close(),wt(se)}).finally(function(){_.openComplete=!0,W()}).then(function(){if(re){var se={};y.tables.forEach(function(Ae){Ae.schema.indexes.forEach(function(Ge){Ge.name&&(se["idb://".concat(y.name,"/").concat(Ae.name,"/").concat(Ge.name)]=new Wn(-1/0,[[[]]]))}),se["idb://".concat(y.name,"/").concat(Ae.name,"/")]=se["idb://".concat(y.name,"/").concat(Ae.name,"/:dels")]=new Wn(-1/0,[[[]]])}),$r(Ca).fire(se),Lo(se,!0)}return y})}function Fa(y){var _=function(U){return y.next(U)},w=function(U){return y.throw(U)},E=P(_),D=P(w);function P(U){return function(W){var Y=U(W),re=Y.value;return Y.done?re:!re||typeof re.then!="function"?c(re)?Promise.all(re).then(E,D):E(re):re.then(E,D)}}return P(_)()}function Dl(y,_,w){var E=arguments.length;if(E<2)throw new $e.InvalidArgument("Too few arguments");for(var D=new Array(E-1);--E;)D[E-1]=arguments[E];w=D.pop();var P=le(D);return[y,P,w]}function kl(y,_,w,E,D){return lt.resolve().then(function(){var P=rt.transless||rt,U=y._createTransaction(_,w,y._dbSchema,E);U.explicit=!0;var W={trans:U,transless:P};if(E)U.idbtrans=E.idbtrans;else try{U.create(),U.idbtrans._explicit=!0,y._state.PR1398_maxLoop=3}catch(se){return se.name===qn.InvalidState&&y.isOpen()&&--y._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),y.close({disableAutoOpen:!1}),y.open().then(function(){return kl(y,_,w,null,D)})):wt(se)}var Y=zt(D);Y&&Q();var re,de=lt.follow(function(){if(re=D.call(U,U),re)if(Y){var se=Se.bind(null,null);re.then(se,se)}else typeof re.next=="function"&&typeof re.throw=="function"&&(re=Fa(re))},W);return(re&&typeof re.then=="function"?lt.resolve(re).then(function(se){return U.active?se:wt(new $e.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):de.then(function(){return re})).then(function(se){return E&&U._resolve(),U._completion.then(function(){return se})}).catch(function(se){return U._reject(se),wt(se)})})}function Na(y,_,w){for(var E=c(y)?y.slice():[y],D=0;D<w;++D)E.push(_);return E}function Il(y){return t(t({},y),{table:function(_){var w=y.table(_),E=w.schema,D={},P=[];function U(ge,Ee,Me){var Pe=wa(ge),Ve=D[Pe]=D[Pe]||[],Be=ge==null?0:typeof ge=="string"?1:ge.length,ke=Ee>0,We=t(t({},Me),{name:ke?"".concat(Pe,"(virtual-from:").concat(Me.name,")"):Me.name,lowLevelIndex:Me,isVirtual:ke,keyTail:Ee,keyLength:Be,extractKey:bl(ge),unique:!ke&&Me.unique});if(Ve.push(We),We.isPrimaryKey||P.push(We),Be>1){var je=Be===2?ge[0]:ge.slice(0,Be-1);U(je,Ee+1,Me)}return Ve.sort(function(Ke,Dt){return Ke.keyTail-Dt.keyTail}),We}var W=U(E.primaryKey.keyPath,0,E.primaryKey);D[":id"]=[W];for(var Y=0,re=E.indexes;Y<re.length;Y++){var de=re[Y];U(de.keyPath,0,de)}function se(ge){var Ee=D[wa(ge)];return Ee&&Ee[0]}function Ae(ge,Ee){return{type:ge.type===1?2:ge.type,lower:Na(ge.lower,ge.lowerOpen?y.MAX_KEY:y.MIN_KEY,Ee),lowerOpen:!0,upper:Na(ge.upper,ge.upperOpen?y.MIN_KEY:y.MAX_KEY,Ee),upperOpen:!0}}function Ge(ge){var Ee=ge.query.index;return Ee.isVirtual?t(t({},ge),{query:{index:Ee.lowLevelIndex,range:Ae(ge.query.range,Ee.keyTail)}}):ge}var ue=t(t({},w),{schema:t(t({},E),{primaryKey:W,indexes:P,getIndexByKeyPath:se}),count:function(ge){return w.count(Ge(ge))},query:function(ge){return w.query(Ge(ge))},openCursor:function(ge){var Ee=ge.query.index,Me=Ee.keyTail,Pe=Ee.isVirtual,Ve=Ee.keyLength;if(!Pe)return w.openCursor(ge);function Be(ke){function We(Ke){Ke!=null?ke.continue(Na(Ke,ge.reverse?y.MAX_KEY:y.MIN_KEY,Me)):ge.unique?ke.continue(ke.key.slice(0,Ve).concat(ge.reverse?y.MIN_KEY:y.MAX_KEY,Me)):ke.continue()}var je=Object.create(ke,{continue:{value:We},continuePrimaryKey:{value:function(Ke,Dt){ke.continuePrimaryKey(Na(Ke,y.MAX_KEY,Me),Dt)}},primaryKey:{get:function(){return ke.primaryKey}},key:{get:function(){var Ke=ke.key;return Ve===1?Ke[0]:Ke.slice(0,Ve)}},value:{get:function(){return ke.value}}});return je}return w.openCursor(Ge(ge)).then(function(ke){return ke&&Be(ke)})}});return ue}})}var hp={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Il};function Ml(y,_,w,E){return w=w||{},E=E||"",s(y).forEach(function(D){if(!g(_,D))w[E+D]=void 0;else{var P=y[D],U=_[D];if(typeof P=="object"&&typeof U=="object"&&P&&U){var W=Le(P),Y=Le(U);W!==Y?w[E+D]=_[D]:W==="Object"?Ml(P,U,w,E+D+"."):P!==U&&(w[E+D]=_[D])}else P!==U&&(w[E+D]=_[D])}}),s(_).forEach(function(D){g(y,D)||(w[E+D]=_[D])}),w}function Fl(y,_){return _.type==="delete"?_.keys:_.keys||_.values.map(y.extractKey)}var lo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(y){return t(t({},y),{table:function(_){var w=y.table(_),E=w.schema.primaryKey,D=t(t({},w),{mutate:function(P){var U=rt.trans,W=U.table(_).hook,Y=W.deleting,re=W.creating,de=W.updating;switch(P.type){case"add":if(re.fire===Wt)break;return U._promise("readwrite",function(){return se(P)},!0);case"put":if(re.fire===Wt&&de.fire===Wt)break;return U._promise("readwrite",function(){return se(P)},!0);case"delete":if(Y.fire===Wt)break;return U._promise("readwrite",function(){return se(P)},!0);case"deleteRange":if(Y.fire===Wt)break;return U._promise("readwrite",function(){return Ae(P)},!0)}return w.mutate(P);function se(ue){var ge=rt.trans,Ee=ue.keys||Fl(E,ue);if(!Ee)throw new Error("Keys missing");return ue=ue.type==="add"||ue.type==="put"?t(t({},ue),{keys:Ee}):t({},ue),ue.type!=="delete"&&(ue.values=i([],ue.values,!0)),ue.keys&&(ue.keys=i([],ue.keys,!0)),Bo(w,ue,Ee).then(function(Me){var Pe=Ee.map(function(Ve,Be){var ke=Me[Be],We={onerror:null,onsuccess:null};if(ue.type==="delete")Y.fire.call(We,Ve,ke,ge);else if(ue.type==="add"||ke===void 0){var je=re.fire.call(We,Ve,ue.values[Be],ge);Ve==null&&je!=null&&(Ve=je,ue.keys[Be]=Ve,E.outbound||ve(ue.values[Be],E.keyPath,Ve))}else{var Ke=Ml(ke,ue.values[Be]),Dt=de.fire.call(We,Ke,Ve,ke,ge);if(Dt){var Ot=ue.values[Be];Object.keys(Dt).forEach(function(mt){g(Ot,mt)?Ot[mt]=Dt[mt]:ve(Ot,mt,Dt[mt])})}}return We});return w.mutate(ue).then(function(Ve){for(var Be=Ve.failures,ke=Ve.results,We=Ve.numFailures,je=Ve.lastResult,Ke=0;Ke<Ee.length;++Ke){var Dt=ke?ke[Ke]:Ee[Ke],Ot=Pe[Ke];Dt==null?Ot.onerror&&Ot.onerror(Be[Ke]):Ot.onsuccess&&Ot.onsuccess(ue.type==="put"&&Me[Ke]?ue.values[Ke]:Dt)}return{failures:Be,results:ke,numFailures:We,lastResult:je}}).catch(function(Ve){return Pe.forEach(function(Be){return Be.onerror&&Be.onerror(Ve)}),Promise.reject(Ve)})})}function Ae(ue){return Ge(ue.trans,ue.range,1e4)}function Ge(ue,ge,Ee){return w.query({trans:ue,values:!1,query:{index:E,range:ge},limit:Ee}).then(function(Me){var Pe=Me.result;return se({type:"delete",keys:Pe,trans:ue}).then(function(Ve){return Ve.numFailures>0?Promise.reject(Ve.failures[0]):Pe.length<Ee?{failures:[],numFailures:0,lastResult:void 0}:Ge(ue,t(t({},ge),{lower:Pe[Pe.length-1],lowerOpen:!0}),Ee)})})}}});return D}})}};function Bo(y,_,w){return _.type==="add"?Promise.resolve([]):y.getMany({trans:_.trans,keys:w,cache:"immutable"})}function uo(y,_,w){try{if(!_||_.keys.length<y.length)return null;for(var E=[],D=0,P=0;D<_.keys.length&&P<y.length;++D)$t(_.keys[D],y[P])===0&&(E.push(w?yt(_.values[D]):_.values[D]),++P);return E.length===y.length?E:null}catch{return null}}var Nl={stack:"dbcore",level:-1,create:function(y){return{table:function(_){var w=y.table(_);return t(t({},w),{getMany:function(E){if(!E.cache)return w.getMany(E);var D=uo(E.keys,E.trans._cache,E.cache==="clone");return D?lt.resolve(D):w.getMany(E).then(function(P){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?yt(P):P},P})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),w.mutate(E)}})}}}};function gs(y,_){return y.trans.mode==="readonly"&&!!y.subscr&&!y.trans.explicit&&y.trans.db._options.cache!=="disabled"&&!_.schema.primaryKey.outbound}function Rl(y,_){switch(y){case"query":return _.values&&!_.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Pl={stack:"dbcore",level:0,name:"Observability",create:function(y){var _=y.schema.name,w=new Wn(y.MIN_KEY,y.MAX_KEY);return t(t({},y),{transaction:function(E,D,P){if(rt.subscr&&D!=="readonly")throw new $e.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(rt.querier));return y.transaction(E,D,P)},table:function(E){var D=y.table(E),P=D.schema,U=P.primaryKey,W=P.indexes,Y=U.extractKey,re=U.outbound,de=U.autoIncrement&&W.filter(function(ue){return ue.compound&&ue.keyPath.includes(U.keyPath)}),se=t(t({},D),{mutate:function(ue){var ge,Ee,Me=ue.trans,Pe=ue.mutatedParts||(ue.mutatedParts={}),Ve=function(Mt){var Kt="idb://".concat(_,"/").concat(E,"/").concat(Mt);return Pe[Kt]||(Pe[Kt]=new Wn)},Be=Ve(""),ke=Ve(":dels"),We=ue.type,je=ue.type==="deleteRange"?[ue.range]:ue.type==="delete"?[ue.keys]:ue.values.length<50?[Fl(U,ue).filter(function(Mt){return Mt}),ue.values]:[],Ke=je[0],Dt=je[1],Ot=ue.trans._cache;if(c(Ke)){Be.addKeys(Ke);var mt=We==="delete"||Ke.length===Dt.length?uo(Ke,Ot):null;mt||ke.addKeys(Ke),(mt||Dt)&&co(Ve,P,mt,Dt)}else if(Ke){var Bt={from:(ge=Ke.lower)!==null&&ge!==void 0?ge:y.MIN_KEY,to:(Ee=Ke.upper)!==null&&Ee!==void 0?Ee:y.MAX_KEY};ke.add(Bt),Be.add(Bt)}else Be.add(w),ke.add(w),P.indexes.forEach(function(Mt){return Ve(Mt.name).add(w)});return D.mutate(ue).then(function(Mt){return Ke&&(ue.type==="add"||ue.type==="put")&&(Be.addKeys(Mt.results),de&&de.forEach(function(Kt){for(var Et=ue.values.map(function(ni){return Kt.extractKey(ni)}),mn=Kt.keyPath.findIndex(function(ni){return ni===U.keyPath}),Hn=0,vr=Mt.results.length;Hn<vr;++Hn)Et[Hn][mn]=Mt.results[Hn];Ve(Kt.name).addKeys(Et)})),Me.mutatedParts=Jr(Me.mutatedParts||{},Pe),Mt})}}),Ae=function(ue){var ge,Ee,Me=ue.query,Pe=Me.index,Ve=Me.range;return[Pe,new Wn((ge=Ve.lower)!==null&&ge!==void 0?ge:y.MIN_KEY,(Ee=Ve.upper)!==null&&Ee!==void 0?Ee:y.MAX_KEY)]},Ge={get:function(ue){return[U,new Wn(ue.key)]},getMany:function(ue){return[U,new Wn().addKeys(ue.keys)]},count:Ae,query:Ae,openCursor:Ae};return s(Ge).forEach(function(ue){se[ue]=function(ge){var Ee=rt.subscr,Me=!!Ee,Pe=gs(rt,D)&&Rl(ue,ge),Ve=Pe?ge.obsSet={}:Ee;if(Me){var Be=function(mt){var Bt="idb://".concat(_,"/").concat(E,"/").concat(mt);return Ve[Bt]||(Ve[Bt]=new Wn)},ke=Be(""),We=Be(":dels"),je=Ge[ue](ge),Ke=je[0],Dt=je[1];if(ue==="query"&&Ke.isPrimaryKey&&!ge.values?We.add(Dt):Be(Ke.name||"").add(Dt),!Ke.isPrimaryKey)if(ue==="count")We.add(w);else{var Ot=ue==="query"&&re&&ge.values&&D.query(t(t({},ge),{values:!1}));return D[ue].apply(this,arguments).then(function(mt){if(ue==="query"){if(re&&ge.values)return Ot.then(function(Et){var mn=Et.result;return ke.addKeys(mn),mt});var Bt=ge.values?mt.result.map(Y):mt.result;ge.values?ke.addKeys(Bt):We.addKeys(Bt)}else if(ue==="openCursor"){var Mt=mt,Kt=ge.values;return Mt&&Object.create(Mt,{key:{get:function(){return We.addKey(Mt.primaryKey),Mt.key}},primaryKey:{get:function(){var Et=Mt.primaryKey;return We.addKey(Et),Et}},value:{get:function(){return Kt&&ke.addKey(Mt.primaryKey),Mt.value}}})}return mt})}}return D[ue].apply(this,arguments)}}),se}})}};function co(y,_,w,E){function D(P){var U=y(P.name||"");function W(re){return re!=null?P.extractKey(re):null}var Y=function(re){return P.multiEntry&&c(re)?re.forEach(function(de){return U.addKey(de)}):U.addKey(re)};(w||E).forEach(function(re,de){var se=w&&W(w[de]),Ae=E&&W(E[de]);$t(se,Ae)!==0&&(se!=null&&Y(se),Ae!=null&&Y(Ae))})}_.indexes.forEach(D)}function Xr(y,_,w){if(w.numFailures===0)return _;if(_.type==="deleteRange")return null;var E=_.keys?_.keys.length:"values"in _&&_.values?_.values.length:1;if(w.numFailures===E)return null;var D=t({},_);return c(D.keys)&&(D.keys=D.keys.filter(function(P,U){return!(U in w.failures)})),"values"in D&&c(D.values)&&(D.values=D.values.filter(function(P,U){return!(U in w.failures)})),D}function fi(y,_){return _.lower===void 0?!0:_.lowerOpen?$t(y,_.lower)>0:$t(y,_.lower)>=0}function Qr(y,_){return _.upper===void 0?!0:_.upperOpen?$t(y,_.upper)<0:$t(y,_.upper)<=0}function hr(y,_){return fi(y,_)&&Qr(y,_)}function Ra(y,_,w,E,D,P){if(!w||w.length===0)return y;var U=_.query.index,W=U.multiEntry,Y=_.query.range,re=E.schema.primaryKey,de=re.extractKey,se=U.extractKey,Ae=(U.lowLevelIndex||U).extractKey,Ge=w.reduce(function(ue,ge){var Ee=ue,Me=[];if(ge.type==="add"||ge.type==="put")for(var Pe=new Wn,Ve=ge.values.length-1;Ve>=0;--Ve){var Be=ge.values[Ve],ke=de(Be);if(!Pe.hasKey(ke)){var We=se(Be);(W&&c(We)?We.some(function(mt){return hr(mt,Y)}):hr(We,Y))&&(Pe.addKey(ke),Me.push(Be))}}switch(ge.type){case"add":{var je=new Wn().addKeys(_.values?ue.map(function(mt){return de(mt)}):ue);Ee=ue.concat(_.values?Me.filter(function(mt){var Bt=de(mt);return je.hasKey(Bt)?!1:(je.addKey(Bt),!0)}):Me.map(function(mt){return de(mt)}).filter(function(mt){return je.hasKey(mt)?!1:(je.addKey(mt),!0)}));break}case"put":{var Ke=new Wn().addKeys(ge.values.map(function(mt){return de(mt)}));Ee=ue.filter(function(mt){return!Ke.hasKey(_.values?de(mt):mt)}).concat(_.values?Me:Me.map(function(mt){return de(mt)}));break}case"delete":var Dt=new Wn().addKeys(ge.keys);Ee=ue.filter(function(mt){return!Dt.hasKey(_.values?de(mt):mt)});break;case"deleteRange":var Ot=ge.range;Ee=ue.filter(function(mt){return!hr(de(mt),Ot)});break}return Ee},y);return Ge===y?y:(Ge.sort(function(ue,ge){return $t(Ae(ue),Ae(ge))||$t(de(ue),de(ge))}),_.limit&&_.limit<1/0&&(Ge.length>_.limit?Ge.length=_.limit:y.length===_.limit&&Ge.length<_.limit&&(D.dirty=!0)),P?Object.freeze(Ge):Ge)}function dc(y,_){return $t(y.lower,_.lower)===0&&$t(y.upper,_.upper)===0&&!!y.lowerOpen==!!_.lowerOpen&&!!y.upperOpen==!!_.upperOpen}function fc(y,_,w,E){if(y===void 0)return _!==void 0?-1:0;if(_===void 0)return 1;var D=$t(y,_);if(D===0){if(w&&E)return 0;if(w)return 1;if(E)return-1}return D}function Pa(y,_,w,E){if(y===void 0)return _!==void 0?1:0;if(_===void 0)return-1;var D=$t(y,_);if(D===0){if(w&&E)return 0;if(w)return-1;if(E)return 1}return D}function pc(y,_){return fc(y.lower,_.lower,y.lowerOpen,_.lowerOpen)<=0&&Pa(y.upper,_.upper,y.upperOpen,_.upperOpen)>=0}function Vl(y,_,w,E){var D=Yr["idb://".concat(y,"/").concat(_)];if(!D)return[];var P=D.queries[w];if(!P)return[null,!1,D,null];var U=E.query?E.query.index.name:null,W=P[U||""];if(!W)return[null,!1,D,null];switch(w){case"query":var Y=W.find(function(se){return se.req.limit===E.limit&&se.req.values===E.values&&dc(se.req.query.range,E.query.range)});if(Y)return[Y,!0,D,W];var re=W.find(function(se){var Ae="limit"in se.req?se.req.limit:1/0;return Ae>=E.limit&&(E.values?se.req.values:!0)&&pc(se.req.query.range,E.query.range)});return[re,!1,D,W];case"count":var de=W.find(function(se){return dc(se.req.query.range,E.query.range)});return[de,!!de,D,W]}}function vs(y,_,w,E){y.subscribers.add(w),E.addEventListener("abort",function(){y.subscribers.delete(w),y.subscribers.size===0&&gp(y,_)})}function gp(y,_){setTimeout(function(){y.subscribers.size===0&&st(_,y)},3e3)}var Ll={stack:"dbcore",level:0,name:"Cache",create:function(y){var _=y.schema.name,w=t(t({},y),{transaction:function(E,D,P){var U=y.transaction(E,D,P);if(D==="readwrite"){var W=new AbortController,Y=W.signal,re=function(de){return function(){if(W.abort(),D==="readwrite"){for(var se=new Set,Ae=0,Ge=E;Ae<Ge.length;Ae++){var ue=Ge[Ae],ge=Yr["idb://".concat(_,"/").concat(ue)];if(ge){var Ee=y.table(ue),Me=ge.optimisticOps.filter(function(Kt){return Kt.trans===U});if(U._explicit&&de&&U.mutatedParts)for(var Pe=0,Ve=Object.values(ge.queries.query);Pe<Ve.length;Pe++)for(var Be=Ve[Pe],ke=0,We=Be.slice();ke<We.length;ke++){var je=We[ke];hs(je.obsSet,U.mutatedParts)&&(st(Be,je),je.subscribers.forEach(function(Kt){return se.add(Kt)}))}else if(Me.length>0){ge.optimisticOps=ge.optimisticOps.filter(function(Kt){return Kt.trans!==U});for(var Ke=0,Dt=Object.values(ge.queries.query);Ke<Dt.length;Ke++)for(var Be=Dt[Ke],Ot=0,mt=Be.slice();Ot<mt.length;Ot++){var je=mt[Ot];if(je.res!=null&&U.mutatedParts)if(de&&!je.dirty){var Bt=Object.isFrozen(je.res),Mt=Ra(je.res,je.req,Me,Ee,je,Bt);je.dirty?(st(Be,je),je.subscribers.forEach(function(mn){return se.add(mn)})):Mt!==je.res&&(je.res=Mt,je.promise=lt.resolve({result:Mt}))}else je.dirty&&st(Be,je),je.subscribers.forEach(function(mn){return se.add(mn)})}}}}se.forEach(function(Kt){return Kt()})}}};U.addEventListener("abort",re(!1),{signal:Y}),U.addEventListener("error",re(!1),{signal:Y}),U.addEventListener("complete",re(!0),{signal:Y})}return U},table:function(E){var D=y.table(E),P=D.schema.primaryKey,U=t(t({},D),{mutate:function(W){var Y=rt.trans;if(P.outbound||Y.db._options.cache==="disabled"||Y.explicit||Y.idbtrans.mode!=="readwrite")return D.mutate(W);var re=Yr["idb://".concat(_,"/").concat(E)];if(!re)return D.mutate(W);var de=D.mutate(W);return(W.type==="add"||W.type==="put")&&(W.values.length>=50||Fl(P,W).some(function(se){return se==null}))?de.then(function(se){var Ae=t(t({},W),{values:W.values.map(function(ue,ge){var Ee;if(se.failures[ge])return ue;var Me=!((Ee=P.keyPath)===null||Ee===void 0)&&Ee.includes(".")?yt(ue):t({},ue);return ve(Me,P.keyPath,se.results[ge]),Me})}),Ge=Xr(re,Ae,se);re.optimisticOps.push(Ge),queueMicrotask(function(){return W.mutatedParts&&Ma(W.mutatedParts)})}):(re.optimisticOps.push(W),W.mutatedParts&&Ma(W.mutatedParts),de.then(function(se){if(se.numFailures>0){st(re.optimisticOps,W);var Ae=Xr(re,W,se);Ae&&re.optimisticOps.push(Ae),W.mutatedParts&&Ma(W.mutatedParts)}}),de.catch(function(){st(re.optimisticOps,W),W.mutatedParts&&Ma(W.mutatedParts)})),de},query:function(W){var Y;if(!gs(rt,D)||!Rl("query",W))return D.query(W);var re=((Y=rt.trans)===null||Y===void 0?void 0:Y.db._options.cache)==="immutable",de=rt,se=de.requery,Ae=de.signal,Ge=Vl(_,E,"query",W),ue=Ge[0],ge=Ge[1],Ee=Ge[2],Me=Ge[3];if(ue&&ge)ue.obsSet=W.obsSet;else{var Pe=D.query(W).then(function(Ve){var Be=Ve.result;if(ue&&(ue.res=Be),re){for(var ke=0,We=Be.length;ke<We;++ke)Object.freeze(Be[ke]);Object.freeze(Be)}else Ve.result=yt(Be);return Ve}).catch(function(Ve){return Me&&ue&&st(Me,ue),Promise.reject(Ve)});ue={obsSet:W.obsSet,promise:Pe,subscribers:new Set,type:"query",req:W,dirty:!1},Me?Me.push(ue):(Me=[ue],Ee||(Ee=Yr["idb://".concat(_,"/").concat(E)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),Ee.queries.query[W.query.index.name||""]=Me)}return vs(ue,Me,se,Ae),ue.promise.then(function(Ve){return{result:Ra(Ve.result,W,Ee?.optimisticOps,D,ue,re)}})}});return U}});return w}};function Va(y,_){return new Proxy(y,{get:function(w,E,D){return E==="db"?_:Reflect.get(w,E,D)}})}var nr=(function(){function y(_,w){var E=this;this._middlewares={},this.verno=0;var D=y.dependencies;this._options=w=t({addons:y.addons,autoOpen:!0,indexedDB:D.indexedDB,IDBKeyRange:D.IDBKeyRange,cache:"cloned"},w),this._deps={indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange};var P=w.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var U={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Wt,dbReadyPromise:null,cancelOpen:Wt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:w.autoOpen};U.dbReadyPromise=new lt(function(Y){U.dbReadyResolve=Y}),U.openCanceller=new lt(function(Y,re){U.cancelOpen=re}),this._state=U,this.name=_,this.on=ha(this,"populate","blocked","versionchange","close",{ready:[On,Wt]}),this.once=function(Y,re){var de=function(){for(var se=[],Ae=0;Ae<arguments.length;Ae++)se[Ae]=arguments[Ae];E.on(Y).unsubscribe(de),re.apply(E,se)};return E.on(Y,de)},this.on.ready.subscribe=q(this.on.ready.subscribe,function(Y){return function(re,de){y.vip(function(){var se=E._state;if(se.openComplete)se.dbOpenError||lt.resolve().then(re),de&&Y(re);else if(se.onReadyBeingFired)se.onReadyBeingFired.push(re),de&&Y(re);else{Y(re);var Ae=E;de||Y(function Ge(){Ae.on.ready.unsubscribe(re),Ae.on.ready.unsubscribe(Ge)})}})}}),this.Collection=ss(this),this.Table=op(this),this.Transaction=tc(this),this.Version=mr(this),this.WhereClause=yl(this),this.on("versionchange",function(Y){Y.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(E.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(E.name,"'. Closing db now to resume the delete request.")),E.close({disableAutoOpen:!1})}),this.on("blocked",function(Y){!Y.newVersion||Y.newVersion<Y.oldVersion?console.warn("Dexie.delete('".concat(E.name,"') was blocked")):console.warn("Upgrade '".concat(E.name,"' blocked by other connection holding version ").concat(Y.oldVersion/10))}),this._maxKey=No(w.IDBKeyRange),this._createTransaction=function(Y,re,de,se){return new E.Transaction(Y,re,de,E._options.chromeTransactionDurability,se)},this._fireOnBlocked=function(Y){E.on("blocked").fire(Y),cr.filter(function(re){return re.name===E.name&&re!==E&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(Y)})},this.use(Nl),this.use(Ll),this.use(Pl),this.use(hp),this.use(lo);var W=new Proxy(this,{get:function(Y,re,de){if(re==="_vip")return!0;if(re==="table")return function(Ae){return Va(E.table(Ae),W)};var se=Reflect.get(Y,re,de);return se instanceof Yu?Va(se,W):re==="tables"?se.map(function(Ae){return Va(Ae,W)}):re==="_createTransaction"?function(){var Ae=se.apply(this,arguments);return Va(Ae,W)}:se}});this.vip=W,P.forEach(function(Y){return Y(E)})}return y.prototype.version=function(_){if(isNaN(_)||_<.1)throw new $e.Type("Given version is not a positive number");if(_=Math.round(_*10)/10,this.idbdb||this._state.isBeingOpened)throw new $e.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,_);var w=this._versions,E=w.filter(function(D){return D._cfg.version===_})[0];return E||(E=new this.Version(_),w.push(E),w.sort(Ea),E.stores({}),this._state.autoSchema=!1,E)},y.prototype._whenReady=function(_){var w=this;return this.idbdb&&(this._state.openComplete||rt.letThrough||this._vip)?_():new lt(function(E,D){if(w._state.openComplete)return D(new $e.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen){D(new $e.DatabaseClosed);return}w.open().catch(Wt)}w._state.dbReadyPromise.then(E,D)}).then(_)},y.prototype.use=function(_){var w=_.stack,E=_.create,D=_.level,P=_.name;P&&this.unuse({stack:w,name:P});var U=this._middlewares[w]||(this._middlewares[w]=[]);return U.push({stack:w,create:E,level:D??10,name:P}),U.sort(function(W,Y){return W.level-Y.level}),this},y.prototype.unuse=function(_){var w=_.stack,E=_.name,D=_.create;return w&&this._middlewares[w]&&(this._middlewares[w]=this._middlewares[w].filter(function(P){return D?P.create!==D:E?P.name!==E:!1})),this},y.prototype.open=function(){var _=this;return Sn(ui,function(){return cc(_)})},y.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var _=this._state,w=cr.indexOf(this);if(w>=0&&cr.splice(w,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}_.isBeingOpened||(_.dbReadyPromise=new lt(function(E){_.dbReadyResolve=E}),_.openCanceller=new lt(function(E,D){_.cancelOpen=D}))},y.prototype.close=function(_){var w=_===void 0?{disableAutoOpen:!0}:_,E=w.disableAutoOpen,D=this._state;E?(D.isBeingOpened&&D.cancelOpen(new $e.DatabaseClosed),this._close(),D.autoOpen=!1,D.dbOpenError=new $e.DatabaseClosed):(this._close(),D.autoOpen=this._options.autoOpen||D.isBeingOpened,D.openComplete=!1,D.dbOpenError=null)},y.prototype.delete=function(_){var w=this;_===void 0&&(_={disableAutoOpen:!0});var E=arguments.length>0&&typeof arguments[0]!="object",D=this._state;return new lt(function(P,U){var W=function(){w.close(_);var Y=w._deps.indexedDB.deleteDatabase(w.name);Y.onsuccess=tn(function(){mp(w._deps,w.name),P()}),Y.onerror=di(U),Y.onblocked=w._fireOnBlocked};if(E)throw new $e.InvalidArgument("Invalid closeOptions argument to db.delete()");D.isBeingOpened?D.dbReadyPromise.then(W):W()})},y.prototype.backendDB=function(){return this.idbdb},y.prototype.isOpen=function(){return this.idbdb!==null},y.prototype.hasBeenClosed=function(){var _=this._state.dbOpenError;return _&&_.name==="DatabaseClosed"},y.prototype.hasFailed=function(){return this._state.dbOpenError!==null},y.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(y.prototype,"tables",{get:function(){var _=this;return s(this._allTables).map(function(w){return _._allTables[w]})},enumerable:!1,configurable:!0}),y.prototype.transaction=function(){var _=Dl.apply(this,arguments);return this._transaction.apply(this,_)},y.prototype._transaction=function(_,w,E){var D=this,P=rt.trans;(!P||P.db!==this||_.indexOf("!")!==-1)&&(P=null);var U=_.indexOf("?")!==-1;_=_.replace("!","").replace("?","");var W,Y;try{if(Y=w.map(function(de){var se=de instanceof D.Table?de.name:de;if(typeof se!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return se}),_=="r"||_===is)W=is;else if(_=="rw"||_==pa)W=pa;else throw new $e.InvalidArgument("Invalid transaction mode: "+_);if(P){if(P.mode===is&&W===pa)if(U)P=null;else throw new $e.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");P&&Y.forEach(function(de){if(P&&P.storeNames.indexOf(de)===-1)if(U)P=null;else throw new $e.SubTransaction("Table "+de+" not included in parent transaction.")}),U&&P&&!P.active&&(P=null)}}catch(de){return P?P._promise(null,function(se,Ae){Ae(de)}):wt(de)}var re=kl.bind(null,this,W,Y,P,E);return P?P._promise(W,re,"lock"):rt.trans?Sn(rt.transless,function(){return D._whenReady(re)}):this._whenReady(re)},y.prototype.table=function(_){if(!g(this._allTables,_))throw new $e.InvalidTable("Table ".concat(_," does not exist"));return this._allTables[_]},y})(),Bl=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Oo=(function(){function y(_){this._subscribe=_}return y.prototype.subscribe=function(_,w,E){return this._subscribe(!_||typeof _=="function"?{next:_,error:w,complete:E}:_)},y.prototype[Bl]=function(){return this},y})(),fo;try{fo={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{fo={indexedDB:null,IDBKeyRange:null}}function Ol(y){var _=!1,w,E=new Oo(function(D){var P=zt(y);function U(Me){var Pe=ti();try{P&&Q();var Ve=V(y,Me);return P&&(Ve=Ve.finally(Se)),Ve}finally{Pe&&Oi()}}var W=!1,Y,re={},de={},se={get closed(){return W},unsubscribe:function(){W||(W=!0,Y&&Y.abort(),Ae&&$r.storagemutated.unsubscribe(ge))}};D.start&&D.start(se);var Ae=!1,Ge=function(){return ns(Ee)};function ue(){return hs(de,re)}var ge=function(Me){Jr(re,Me),ue()&&Ge()},Ee=function(){if(!(W||!fo.indexedDB)){re={};var Me={};Y&&Y.abort(),Y=new AbortController;var Pe={subscr:Me,signal:Y.signal,requery:Ge,querier:y,trans:null},Ve=U(Pe);Promise.resolve(Ve).then(function(Be){_=!0,w=Be,!(W||Pe.signal.aborted)&&(re={},de=Me,!Xe(de)&&!Ae&&($r(Ca,ge),Ae=!0),ns(function(){return!W&&D.next&&D.next(Be)}))},function(Be){_=!1,["DatabaseClosedError","AbortError"].includes(Be?.name)||W||ns(function(){W||D.error&&D.error(Be)})})}};return setTimeout(Ge,0),se});return E.hasValue=function(){return _},E.getValue=function(){return w},E}var gr=nr;b(gr,t(t({},Zn),{delete:function(y){var _=new gr(y,{addons:[]});return _.delete()},exists:function(y){return new gr(y,{addons:[]}).open().then(function(_){return _.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(y){try{return pp(gr.dependencies).then(y)}catch{return wt(new $e.MissingAPI)}},defineClass:function(){function y(_){f(this,_)}return y},ignoreTransaction:function(y){return rt.trans?Sn(rt.transless,y):y()},vip:ps,async:function(y){return function(){try{var _=Fa(y.apply(this,arguments));return!_||typeof _.then!="function"?lt.resolve(_):_}catch(w){return wt(w)}}},spawn:function(y,_,w){try{var E=Fa(y.apply(w,_||[]));return!E||typeof E.then!="function"?lt.resolve(E):E}catch(D){return wt(D)}},currentTransaction:{get:function(){return rt.trans||null}},waitFor:function(y,_){var w=lt.resolve(typeof y=="function"?gr.ignoreTransaction(y):y).timeout(_||6e4);return rt.trans?rt.trans.waitFor(w):w},Promise:lt,debug:{get:function(){return Pn},set:function(y){ji(y)}},derive:F,extend:f,props:b,override:q,Events:ha,on:$r,liveQuery:Ol,extendObservabilitySet:Jr,getByKeyPath:he,setByKeyPath:ve,delByKeyPath:me,shallowClone:Te,deepClone:yt,getObjectDiff:Ml,cmp:$t,asap:j,minKey:Ui,addons:[],connections:cr,errnames:qn,dependencies:fo,cache:Yr,semVer:dl,version:dl.split(".").map(function(y){return parseInt(y)}).reduce(function(y,_,w){return y+_/Math.pow(10,w*2)})})),gr.maxKey=No(gr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&($r(Ca,function(y){if(!Zr){var _;_=new CustomEvent(_l,{detail:y}),Zr=!0,dispatchEvent(_),Zr=!1}}),addEventListener(_l,function(y){var _=y.detail;Zr||Hl(_)}));function Hl(y){var _=Zr;try{Zr=!0,$r.storagemutated.fire(y),Lo(y,!0)}finally{Zr=_}}var Zr=!1,jr,La=function(){};typeof BroadcastChannel<"u"&&(La=function(){jr=new BroadcastChannel(_l),jr.onmessage=function(y){return y.data&&Hl(y.data)}},La(),typeof jr.unref=="function"&&jr.unref(),$r(Ca,function(y){Zr||jr.postMessage(y)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(y){if(!nr.disableBfCache&&y.persisted){Pn&&console.debug("Dexie: handling persisted pagehide"),jr?.close();for(var _=0,w=cr;_<w.length;_++){var E=w[_];E.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(y){!nr.disableBfCache&&y.persisted&&(Pn&&console.debug("Dexie: handling persisted pageshow"),La(),Hl({all:new Wn(-1/0,[[]])}))}));function Ul(y){return new qr({add:y})}function Ho(y){return new qr({remove:y})}function Ba(y,_){return new qr({replacePrefix:[y,_]})}lt.rejectionMapper=Qn,ji(Pn);var vp=Object.freeze({__proto__:null,Dexie:nr,liveQuery:Ol,Entity:ml,cmp:$t,PropModification:qr,replacePrefix:Ba,add:Ul,remove:Ho,default:nr,RangeSet:Wn,mergeRanges:ka,rangesOverlap:uc});return t(nr,vp,{default:nr}),nr})});var k1=Ut(()=>{});var Yt=Ut((Uf,I1)=>{(function(n,e){typeof Uf=="object"?I1.exports=Uf=e():typeof define=="function"&&define.amd?define([],e):n.CryptoJS=e()})(Uf,function(){var n=n||(function(e,t){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof global<"u"&&global.crypto&&(i=global.crypto),!i&&typeof tv=="function")try{i=k1()}catch{}var o=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||(function(){function N(){}return function(O){var q;return N.prototype=O,q=new N,N.prototype=null,q}})(),c={},f=c.lib={},m=f.Base=(function(){return{extend:function(N){var O=s(this);return N&&O.mixIn(N),(!O.hasOwnProperty("init")||this.init===O.init)&&(O.init=function(){O.$super.init.apply(this,arguments)}),O.init.prototype=O,O.$super=this,O},create:function(){var N=this.extend();return N.init.apply(N,arguments),N},init:function(){},mixIn:function(N){for(var O in N)N.hasOwnProperty(O)&&(this[O]=N[O]);N.hasOwnProperty("toString")&&(this.toString=N.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),v=f.WordArray=m.extend({init:function(N,O){N=this.words=N||[],O!=t?this.sigBytes=O:this.sigBytes=N.length*4},toString:function(N){return(N||b).stringify(this)},concat:function(N){var O=this.words,q=N.words,X=this.sigBytes,j=N.sigBytes;if(this.clamp(),X%4)for(var ie=0;ie<j;ie++){var he=q[ie>>>2]>>>24-ie%4*8&255;O[X+ie>>>2]|=he<<24-(X+ie)%4*8}else for(var ve=0;ve<j;ve+=4)O[X+ve>>>2]=q[ve>>>2];return this.sigBytes+=j,this},clamp:function(){var N=this.words,O=this.sigBytes;N[O>>>2]&=4294967295<<32-O%4*8,N.length=e.ceil(O/4)},clone:function(){var N=m.clone.call(this);return N.words=this.words.slice(0),N},random:function(N){for(var O=[],q=0;q<N;q+=4)O.push(o());return new v.init(O,N)}}),g=c.enc={},b=g.Hex={stringify:function(N){for(var O=N.words,q=N.sigBytes,X=[],j=0;j<q;j++){var ie=O[j>>>2]>>>24-j%4*8&255;X.push((ie>>>4).toString(16)),X.push((ie&15).toString(16))}return X.join("")},parse:function(N){for(var O=N.length,q=[],X=0;X<O;X+=2)q[X>>>3]|=parseInt(N.substr(X,2),16)<<24-X%8*4;return new v.init(q,O/2)}},C=g.Latin1={stringify:function(N){for(var O=N.words,q=N.sigBytes,X=[],j=0;j<q;j++){var ie=O[j>>>2]>>>24-j%4*8&255;X.push(String.fromCharCode(ie))}return X.join("")},parse:function(N){for(var O=N.length,q=[],X=0;X<O;X++)q[X>>>2]|=(N.charCodeAt(X)&255)<<24-X%4*8;return new v.init(q,O)}},A=g.Utf8={stringify:function(N){try{return decodeURIComponent(escape(C.stringify(N)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(N){return C.parse(unescape(encodeURIComponent(N)))}},F=f.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new v.init,this._nDataBytes=0},_append:function(N){typeof N=="string"&&(N=A.parse(N)),this._data.concat(N),this._nDataBytes+=N.sigBytes},_process:function(N){var O,q=this._data,X=q.words,j=q.sigBytes,ie=this.blockSize,he=ie*4,ve=j/he;N?ve=e.ceil(ve):ve=e.max((ve|0)-this._minBufferSize,0);var me=ve*ie,Te=e.min(me*4,j);if(me){for(var $=0;$<me;$+=ie)this._doProcessBlock(X,$);O=X.splice(0,me),q.sigBytes-=Te}return new v.init(O,Te)},clone:function(){var N=m.clone.call(this);return N._data=this._data.clone(),N},_minBufferSize:0}),R=f.Hasher=F.extend({cfg:m.extend(),init:function(N){this.cfg=this.cfg.extend(N),this.reset()},reset:function(){F.reset.call(this),this._doReset()},update:function(N){return this._append(N),this._process(),this},finalize:function(N){N&&this._append(N);var O=this._doFinalize();return O},blockSize:512/32,_createHelper:function(N){return function(O,q){return new N.init(q).finalize(O)}},_createHmacHelper:function(N){return function(O,q){return new B.HMAC.init(N,q).finalize(O)}}}),B=c.algo={};return c})(Math);return n})});var Hu=Ut((zf,M1)=>{(function(n,e){typeof zf=="object"?M1.exports=zf=e(Yt()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(zf,function(n){return(function(e){var t=n,i=t.lib,o=i.Base,s=i.WordArray,c=t.x64={},f=c.Word=o.extend({init:function(v,g){this.high=v,this.low=g}}),m=c.WordArray=o.extend({init:function(v,g){v=this.words=v||[],g!=e?this.sigBytes=g:this.sigBytes=v.length*8},toX32:function(){for(var v=this.words,g=v.length,b=[],C=0;C<g;C++){var A=v[C];b.push(A.high),b.push(A.low)}return s.create(b,this.sigBytes)},clone:function(){for(var v=o.clone.call(this),g=v.words=this.words.slice(0),b=g.length,C=0;C<b;C++)g[C]=g[C].clone();return v}})})(),n})});var N1=Ut((Gf,F1)=>{(function(n,e){typeof Gf=="object"?F1.exports=Gf=e(Yt()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Gf,function(n){return(function(){if(typeof ArrayBuffer=="function"){var e=n,t=e.lib,i=t.WordArray,o=i.init,s=i.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var f=c.byteLength,m=[],v=0;v<f;v++)m[v>>>2]|=c[v]<<24-v%4*8;o.call(this,m,f)}else o.apply(this,arguments)};s.prototype=i}})(),n.lib.WordArray})});var P1=Ut((qf,R1)=>{(function(n,e){typeof qf=="object"?R1.exports=qf=e(Yt()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(qf,function(n){return(function(){var e=n,t=e.lib,i=t.WordArray,o=e.enc,s=o.Utf16=o.Utf16BE={stringify:function(f){for(var m=f.words,v=f.sigBytes,g=[],b=0;b<v;b+=2){var C=m[b>>>2]>>>16-b%4*8&65535;g.push(String.fromCharCode(C))}return g.join("")},parse:function(f){for(var m=f.length,v=[],g=0;g<m;g++)v[g>>>1]|=f.charCodeAt(g)<<16-g%2*16;return i.create(v,m*2)}};o.Utf16LE={stringify:function(f){for(var m=f.words,v=f.sigBytes,g=[],b=0;b<v;b+=2){var C=c(m[b>>>2]>>>16-b%4*8&65535);g.push(String.fromCharCode(C))}return g.join("")},parse:function(f){for(var m=f.length,v=[],g=0;g<m;g++)v[g>>>1]|=c(f.charCodeAt(g)<<16-g%2*16);return i.create(v,m*2)}};function c(f){return f<<8&4278255360|f>>>8&16711935}})(),n.enc.Utf16})});var ua=Ut((Wf,V1)=>{(function(n,e){typeof Wf=="object"?V1.exports=Wf=e(Yt()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Wf,function(n){return(function(){var e=n,t=e.lib,i=t.WordArray,o=e.enc,s=o.Base64={stringify:function(f){var m=f.words,v=f.sigBytes,g=this._map;f.clamp();for(var b=[],C=0;C<v;C+=3)for(var A=m[C>>>2]>>>24-C%4*8&255,F=m[C+1>>>2]>>>24-(C+1)%4*8&255,R=m[C+2>>>2]>>>24-(C+2)%4*8&255,B=A<<16|F<<8|R,N=0;N<4&&C+N*.75<v;N++)b.push(g.charAt(B>>>6*(3-N)&63));var O=g.charAt(64);if(O)for(;b.length%4;)b.push(O);return b.join("")},parse:function(f){var m=f.length,v=this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var b=0;b<v.length;b++)g[v.charCodeAt(b)]=b}var C=v.charAt(64);if(C){var A=f.indexOf(C);A!==-1&&(m=A)}return c(f,m,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function c(f,m,v){for(var g=[],b=0,C=0;C<m;C++)if(C%4){var A=v[f.charCodeAt(C-1)]<<C%4*2,F=v[f.charCodeAt(C)]>>>6-C%4*2,R=A|F;g[b>>>2]|=R<<24-b%4*8,b++}return i.create(g,b)}})(),n.enc.Base64})});var B1=Ut(($f,L1)=>{(function(n,e){typeof $f=="object"?L1.exports=$f=e(Yt()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})($f,function(n){return(function(){var e=n,t=e.lib,i=t.WordArray,o=e.enc,s=o.Base64url={stringify:function(f,m){m===void 0&&(m=!0);var v=f.words,g=f.sigBytes,b=m?this._safe_map:this._map;f.clamp();for(var C=[],A=0;A<g;A+=3)for(var F=v[A>>>2]>>>24-A%4*8&255,R=v[A+1>>>2]>>>24-(A+1)%4*8&255,B=v[A+2>>>2]>>>24-(A+2)%4*8&255,N=F<<16|R<<8|B,O=0;O<4&&A+O*.75<g;O++)C.push(b.charAt(N>>>6*(3-O)&63));var q=b.charAt(64);if(q)for(;C.length%4;)C.push(q);return C.join("")},parse:function(f,m){m===void 0&&(m=!0);var v=f.length,g=m?this._safe_map:this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var C=0;C<g.length;C++)b[g.charCodeAt(C)]=C}var A=g.charAt(64);if(A){var F=f.indexOf(A);F!==-1&&(v=F)}return c(f,v,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function c(f,m,v){for(var g=[],b=0,C=0;C<m;C++)if(C%4){var A=v[f.charCodeAt(C-1)]<<C%4*2,F=v[f.charCodeAt(C)]>>>6-C%4*2,R=A|F;g[b>>>2]|=R<<24-b%4*8,b++}return i.create(g,b)}})(),n.enc.Base64url})});var ca=Ut((Kf,O1)=>{(function(n,e){typeof Kf=="object"?O1.exports=Kf=e(Yt()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Kf,function(n){return(function(e){var t=n,i=t.lib,o=i.WordArray,s=i.Hasher,c=t.algo,f=[];(function(){for(var A=0;A<64;A++)f[A]=e.abs(e.sin(A+1))*4294967296|0})();var m=c.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(A,F){for(var R=0;R<16;R++){var B=F+R,N=A[B];A[B]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}var O=this._hash.words,q=A[F+0],X=A[F+1],j=A[F+2],ie=A[F+3],he=A[F+4],ve=A[F+5],me=A[F+6],Te=A[F+7],$=A[F+8],le=A[F+9],H=A[F+10],De=A[F+11],pt=A[F+12],Xe=A[F+13],ft=A[F+14],yt=A[F+15],xe=O[0],Oe=O[1],Le=O[2],Re=O[3];xe=v(xe,Oe,Le,Re,q,7,f[0]),Re=v(Re,xe,Oe,Le,X,12,f[1]),Le=v(Le,Re,xe,Oe,j,17,f[2]),Oe=v(Oe,Le,Re,xe,ie,22,f[3]),xe=v(xe,Oe,Le,Re,he,7,f[4]),Re=v(Re,xe,Oe,Le,ve,12,f[5]),Le=v(Le,Re,xe,Oe,me,17,f[6]),Oe=v(Oe,Le,Re,xe,Te,22,f[7]),xe=v(xe,Oe,Le,Re,$,7,f[8]),Re=v(Re,xe,Oe,Le,le,12,f[9]),Le=v(Le,Re,xe,Oe,H,17,f[10]),Oe=v(Oe,Le,Re,xe,De,22,f[11]),xe=v(xe,Oe,Le,Re,pt,7,f[12]),Re=v(Re,xe,Oe,Le,Xe,12,f[13]),Le=v(Le,Re,xe,Oe,ft,17,f[14]),Oe=v(Oe,Le,Re,xe,yt,22,f[15]),xe=g(xe,Oe,Le,Re,X,5,f[16]),Re=g(Re,xe,Oe,Le,me,9,f[17]),Le=g(Le,Re,xe,Oe,De,14,f[18]),Oe=g(Oe,Le,Re,xe,q,20,f[19]),xe=g(xe,Oe,Le,Re,ve,5,f[20]),Re=g(Re,xe,Oe,Le,H,9,f[21]),Le=g(Le,Re,xe,Oe,yt,14,f[22]),Oe=g(Oe,Le,Re,xe,he,20,f[23]),xe=g(xe,Oe,Le,Re,le,5,f[24]),Re=g(Re,xe,Oe,Le,ft,9,f[25]),Le=g(Le,Re,xe,Oe,ie,14,f[26]),Oe=g(Oe,Le,Re,xe,$,20,f[27]),xe=g(xe,Oe,Le,Re,Xe,5,f[28]),Re=g(Re,xe,Oe,Le,j,9,f[29]),Le=g(Le,Re,xe,Oe,Te,14,f[30]),Oe=g(Oe,Le,Re,xe,pt,20,f[31]),xe=b(xe,Oe,Le,Re,ve,4,f[32]),Re=b(Re,xe,Oe,Le,$,11,f[33]),Le=b(Le,Re,xe,Oe,De,16,f[34]),Oe=b(Oe,Le,Re,xe,ft,23,f[35]),xe=b(xe,Oe,Le,Re,X,4,f[36]),Re=b(Re,xe,Oe,Le,he,11,f[37]),Le=b(Le,Re,xe,Oe,Te,16,f[38]),Oe=b(Oe,Le,Re,xe,H,23,f[39]),xe=b(xe,Oe,Le,Re,Xe,4,f[40]),Re=b(Re,xe,Oe,Le,q,11,f[41]),Le=b(Le,Re,xe,Oe,ie,16,f[42]),Oe=b(Oe,Le,Re,xe,me,23,f[43]),xe=b(xe,Oe,Le,Re,le,4,f[44]),Re=b(Re,xe,Oe,Le,pt,11,f[45]),Le=b(Le,Re,xe,Oe,yt,16,f[46]),Oe=b(Oe,Le,Re,xe,j,23,f[47]),xe=C(xe,Oe,Le,Re,q,6,f[48]),Re=C(Re,xe,Oe,Le,Te,10,f[49]),Le=C(Le,Re,xe,Oe,ft,15,f[50]),Oe=C(Oe,Le,Re,xe,ve,21,f[51]),xe=C(xe,Oe,Le,Re,pt,6,f[52]),Re=C(Re,xe,Oe,Le,ie,10,f[53]),Le=C(Le,Re,xe,Oe,H,15,f[54]),Oe=C(Oe,Le,Re,xe,X,21,f[55]),xe=C(xe,Oe,Le,Re,$,6,f[56]),Re=C(Re,xe,Oe,Le,yt,10,f[57]),Le=C(Le,Re,xe,Oe,me,15,f[58]),Oe=C(Oe,Le,Re,xe,Xe,21,f[59]),xe=C(xe,Oe,Le,Re,he,6,f[60]),Re=C(Re,xe,Oe,Le,De,10,f[61]),Le=C(Le,Re,xe,Oe,j,15,f[62]),Oe=C(Oe,Le,Re,xe,le,21,f[63]),O[0]=O[0]+xe|0,O[1]=O[1]+Oe|0,O[2]=O[2]+Le|0,O[3]=O[3]+Re|0},_doFinalize:function(){var A=this._data,F=A.words,R=this._nDataBytes*8,B=A.sigBytes*8;F[B>>>5]|=128<<24-B%32;var N=e.floor(R/4294967296),O=R;F[(B+64>>>9<<4)+15]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,F[(B+64>>>9<<4)+14]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,A.sigBytes=(F.length+1)*4,this._process();for(var q=this._hash,X=q.words,j=0;j<4;j++){var ie=X[j];X[j]=(ie<<8|ie>>>24)&16711935|(ie<<24|ie>>>8)&4278255360}return q},clone:function(){var A=s.clone.call(this);return A._hash=this._hash.clone(),A}});function v(A,F,R,B,N,O,q){var X=A+(F&R|~F&B)+N+q;return(X<<O|X>>>32-O)+F}function g(A,F,R,B,N,O,q){var X=A+(F&B|R&~B)+N+q;return(X<<O|X>>>32-O)+F}function b(A,F,R,B,N,O,q){var X=A+(F^R^B)+N+q;return(X<<O|X>>>32-O)+F}function C(A,F,R,B,N,O,q){var X=A+(R^(F|~B))+N+q;return(X<<O|X>>>32-O)+F}t.MD5=s._createHelper(m),t.HmacMD5=s._createHmacHelper(m)})(Math),n.MD5})});var Zh=Ut((Jf,H1)=>{(function(n,e){typeof Jf=="object"?H1.exports=Jf=e(Yt()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Jf,function(n){return(function(){var e=n,t=e.lib,i=t.WordArray,o=t.Hasher,s=e.algo,c=[],f=s.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(m,v){for(var g=this._hash.words,b=g[0],C=g[1],A=g[2],F=g[3],R=g[4],B=0;B<80;B++){if(B<16)c[B]=m[v+B]|0;else{var N=c[B-3]^c[B-8]^c[B-14]^c[B-16];c[B]=N<<1|N>>>31}var O=(b<<5|b>>>27)+R+c[B];B<20?O+=(C&A|~C&F)+1518500249:B<40?O+=(C^A^F)+1859775393:B<60?O+=(C&A|C&F|A&F)-1894007588:O+=(C^A^F)-899497514,R=F,F=A,A=C<<30|C>>>2,C=b,b=O}g[0]=g[0]+b|0,g[1]=g[1]+C|0,g[2]=g[2]+A|0,g[3]=g[3]+F|0,g[4]=g[4]+R|0},_doFinalize:function(){var m=this._data,v=m.words,g=this._nDataBytes*8,b=m.sigBytes*8;return v[b>>>5]|=128<<24-b%32,v[(b+64>>>9<<4)+14]=Math.floor(g/4294967296),v[(b+64>>>9<<4)+15]=g,m.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var m=o.clone.call(this);return m._hash=this._hash.clone(),m}});e.SHA1=o._createHelper(f),e.HmacSHA1=o._createHmacHelper(f)})(),n.SHA1})});var Xf=Ut((Yf,U1)=>{(function(n,e){typeof Yf=="object"?U1.exports=Yf=e(Yt()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Yf,function(n){return(function(e){var t=n,i=t.lib,o=i.WordArray,s=i.Hasher,c=t.algo,f=[],m=[];(function(){function b(R){for(var B=e.sqrt(R),N=2;N<=B;N++)if(!(R%N))return!1;return!0}function C(R){return(R-(R|0))*4294967296|0}for(var A=2,F=0;F<64;)b(A)&&(F<8&&(f[F]=C(e.pow(A,1/2))),m[F]=C(e.pow(A,1/3)),F++),A++})();var v=[],g=c.SHA256=s.extend({_doReset:function(){this._hash=new o.init(f.slice(0))},_doProcessBlock:function(b,C){for(var A=this._hash.words,F=A[0],R=A[1],B=A[2],N=A[3],O=A[4],q=A[5],X=A[6],j=A[7],ie=0;ie<64;ie++){if(ie<16)v[ie]=b[C+ie]|0;else{var he=v[ie-15],ve=(he<<25|he>>>7)^(he<<14|he>>>18)^he>>>3,me=v[ie-2],Te=(me<<15|me>>>17)^(me<<13|me>>>19)^me>>>10;v[ie]=ve+v[ie-7]+Te+v[ie-16]}var $=O&q^~O&X,le=F&R^F&B^R&B,H=(F<<30|F>>>2)^(F<<19|F>>>13)^(F<<10|F>>>22),De=(O<<26|O>>>6)^(O<<21|O>>>11)^(O<<7|O>>>25),pt=j+De+$+m[ie]+v[ie],Xe=H+le;j=X,X=q,q=O,O=N+pt|0,N=B,B=R,R=F,F=pt+Xe|0}A[0]=A[0]+F|0,A[1]=A[1]+R|0,A[2]=A[2]+B|0,A[3]=A[3]+N|0,A[4]=A[4]+O|0,A[5]=A[5]+q|0,A[6]=A[6]+X|0,A[7]=A[7]+j|0},_doFinalize:function(){var b=this._data,C=b.words,A=this._nDataBytes*8,F=b.sigBytes*8;return C[F>>>5]|=128<<24-F%32,C[(F+64>>>9<<4)+14]=e.floor(A/4294967296),C[(F+64>>>9<<4)+15]=A,b.sigBytes=C.length*4,this._process(),this._hash},clone:function(){var b=s.clone.call(this);return b._hash=this._hash.clone(),b}});t.SHA256=s._createHelper(g),t.HmacSHA256=s._createHmacHelper(g)})(Math),n.SHA256})});var G1=Ut((Qf,z1)=>{(function(n,e,t){typeof Qf=="object"?z1.exports=Qf=e(Yt(),Xf()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(n.CryptoJS)})(Qf,function(n){return(function(){var e=n,t=e.lib,i=t.WordArray,o=e.algo,s=o.SHA256,c=o.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var f=s._doFinalize.call(this);return f.sigBytes-=4,f}});e.SHA224=s._createHelper(c),e.HmacSHA224=s._createHmacHelper(c)})(),n.SHA224})});var jh=Ut((Zf,q1)=>{(function(n,e,t){typeof Zf=="object"?q1.exports=Zf=e(Yt(),Hu()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(n.CryptoJS)})(Zf,function(n){return(function(){var e=n,t=e.lib,i=t.Hasher,o=e.x64,s=o.Word,c=o.WordArray,f=e.algo;function m(){return s.create.apply(s,arguments)}var v=[m(1116352408,3609767458),m(1899447441,602891725),m(3049323471,3964484399),m(3921009573,2173295548),m(961987163,4081628472),m(1508970993,3053834265),m(2453635748,2937671579),m(2870763221,3664609560),m(3624381080,2734883394),m(310598401,1164996542),m(607225278,1323610764),m(1426881987,3590304994),m(1925078388,4068182383),m(2162078206,991336113),m(2614888103,633803317),m(3248222580,3479774868),m(3835390401,2666613458),m(4022224774,944711139),m(264347078,2341262773),m(604807628,2007800933),m(770255983,1495990901),m(1249150122,1856431235),m(1555081692,3175218132),m(1996064986,2198950837),m(2554220882,3999719339),m(2821834349,766784016),m(2952996808,2566594879),m(3210313671,3203337956),m(3336571891,1034457026),m(3584528711,2466948901),m(113926993,3758326383),m(338241895,168717936),m(666307205,1188179964),m(773529912,1546045734),m(1294757372,1522805485),m(1396182291,2643833823),m(1695183700,2343527390),m(1986661051,1014477480),m(2177026350,1206759142),m(2456956037,344077627),m(2730485921,1290863460),m(2820302411,3158454273),m(3259730800,3505952657),m(3345764771,106217008),m(3516065817,3606008344),m(3600352804,1432725776),m(4094571909,1467031594),m(275423344,851169720),m(430227734,3100823752),m(506948616,1363258195),m(659060556,3750685593),m(883997877,3785050280),m(958139571,3318307427),m(1322822218,3812723403),m(1537002063,2003034995),m(1747873779,3602036899),m(1955562222,1575990012),m(2024104815,1125592928),m(2227730452,2716904306),m(2361852424,442776044),m(2428436474,593698344),m(2756734187,3733110249),m(3204031479,2999351573),m(3329325298,3815920427),m(3391569614,3928383900),m(3515267271,566280711),m(3940187606,3454069534),m(4118630271,4000239992),m(116418474,1914138554),m(174292421,2731055270),m(289380356,3203993006),m(460393269,320620315),m(685471733,587496836),m(852142971,1086792851),m(1017036298,365543100),m(1126000580,2618297676),m(1288033470,3409855158),m(1501505948,4234509866),m(1607167915,987167468),m(1816402316,1246189591)],g=[];(function(){for(var C=0;C<80;C++)g[C]=m()})();var b=f.SHA512=i.extend({_doReset:function(){this._hash=new c.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(C,A){for(var F=this._hash.words,R=F[0],B=F[1],N=F[2],O=F[3],q=F[4],X=F[5],j=F[6],ie=F[7],he=R.high,ve=R.low,me=B.high,Te=B.low,$=N.high,le=N.low,H=O.high,De=O.low,pt=q.high,Xe=q.low,ft=X.high,yt=X.low,xe=j.high,Oe=j.low,Le=ie.high,Re=ie.low,Pt=he,st=ve,_t=me,Qe=Te,zt=$,Gn=le,Nt=H,un=De,Tn=pt,Xt=Xe,Xn=ft,gn=yt,An=xe,qn=Oe,wr=Le,$e=Re,Dn=0;Dn<80;Dn++){var Qn,Zn,Wt=g[Dn];if(Dn<16)Zn=Wt.high=C[A+Dn*2]|0,Qn=Wt.low=C[A+Dn*2+1]|0;else{var ar=g[Dn-15],Ri=ar.high,bn=ar.low,So=(Ri>>>1|bn<<31)^(Ri>>>8|bn<<24)^Ri>>>7,Pi=(bn>>>1|Ri<<31)^(bn>>>8|Ri<<24)^(bn>>>7|Ri<<25),cn=g[Dn-2],si=cn.high,On=cn.low,Pn=(si>>>19|On<<13)^(si<<3|On>>>29)^si>>>6,ji=(On>>>19|si<<13)^(On<<3|si>>>29)^(On>>>6|si<<26),li=g[Dn-7],Eo=li.high,Lt=li.low,Or=g[Dn-16],St=Or.high,Vi=Or.low;Qn=Pi+Lt,Zn=So+Eo+(Qn>>>0<Pi>>>0?1:0),Qn=Qn+ji,Zn=Zn+Pn+(Qn>>>0<ji>>>0?1:0),Qn=Qn+Vi,Zn=Zn+St+(Qn>>>0<Vi>>>0?1:0),Wt.high=Zn,Wt.low=Qn}var Vn=Tn&Xn^~Tn&An,Qt=Xt&gn^~Xt&qn,on=Pt&_t^Pt&zt^_t&zt,yi=st&Qe^st&Gn^Qe&Gn,kn=(Pt>>>28|st<<4)^(Pt<<30|st>>>2)^(Pt<<25|st>>>7),jn=(st>>>28|Pt<<4)^(st<<30|Pt>>>2)^(st<<25|Pt>>>7),vn=(Tn>>>14|Xt<<18)^(Tn>>>18|Xt<<14)^(Tn<<23|Xt>>>9),_i=(Xt>>>14|Tn<<18)^(Xt>>>18|Tn<<14)^(Xt<<23|Tn>>>9),wn=v[Dn],Li=wn.high,ui=wn.low,rt=$e+_i,ei=wr+vn+(rt>>>0<$e>>>0?1:0),rt=rt+Qt,ei=ei+Vn+(rt>>>0<Qt>>>0?1:0),rt=rt+ui,ei=ei+Li+(rt>>>0<ui>>>0?1:0),rt=rt+Qn,ei=ei+Zn+(rt>>>0<Qn>>>0?1:0),ci=jn+yi,Sr=kn+on+(ci>>>0<jn>>>0?1:0);wr=An,$e=qn,An=Xn,qn=gn,Xn=Tn,gn=Xt,Xt=un+rt|0,Tn=Nt+ei+(Xt>>>0<un>>>0?1:0)|0,Nt=zt,un=Gn,zt=_t,Gn=Qe,_t=Pt,Qe=st,st=rt+ci|0,Pt=ei+Sr+(st>>>0<rt>>>0?1:0)|0}ve=R.low=ve+st,R.high=he+Pt+(ve>>>0<st>>>0?1:0),Te=B.low=Te+Qe,B.high=me+_t+(Te>>>0<Qe>>>0?1:0),le=N.low=le+Gn,N.high=$+zt+(le>>>0<Gn>>>0?1:0),De=O.low=De+un,O.high=H+Nt+(De>>>0<un>>>0?1:0),Xe=q.low=Xe+Xt,q.high=pt+Tn+(Xe>>>0<Xt>>>0?1:0),yt=X.low=yt+gn,X.high=ft+Xn+(yt>>>0<gn>>>0?1:0),Oe=j.low=Oe+qn,j.high=xe+An+(Oe>>>0<qn>>>0?1:0),Re=ie.low=Re+$e,ie.high=Le+wr+(Re>>>0<$e>>>0?1:0)},_doFinalize:function(){var C=this._data,A=C.words,F=this._nDataBytes*8,R=C.sigBytes*8;A[R>>>5]|=128<<24-R%32,A[(R+128>>>10<<5)+30]=Math.floor(F/4294967296),A[(R+128>>>10<<5)+31]=F,C.sigBytes=A.length*4,this._process();var B=this._hash.toX32();return B},clone:function(){var C=i.clone.call(this);return C._hash=this._hash.clone(),C},blockSize:1024/32});e.SHA512=i._createHelper(b),e.HmacSHA512=i._createHmacHelper(b)})(),n.SHA512})});var $1=Ut((jf,W1)=>{(function(n,e,t){typeof jf=="object"?W1.exports=jf=e(Yt(),Hu(),jh()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(n.CryptoJS)})(jf,function(n){return(function(){var e=n,t=e.x64,i=t.Word,o=t.WordArray,s=e.algo,c=s.SHA512,f=s.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var m=c._doFinalize.call(this);return m.sigBytes-=16,m}});e.SHA384=c._createHelper(f),e.HmacSHA384=c._createHmacHelper(f)})(),n.SHA384})});var J1=Ut((e0,K1)=>{(function(n,e,t){typeof e0=="object"?K1.exports=e0=e(Yt(),Hu()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(n.CryptoJS)})(e0,function(n){return(function(e){var t=n,i=t.lib,o=i.WordArray,s=i.Hasher,c=t.x64,f=c.Word,m=t.algo,v=[],g=[],b=[];(function(){for(var F=1,R=0,B=0;B<24;B++){v[F+5*R]=(B+1)*(B+2)/2%64;var N=R%5,O=(2*F+3*R)%5;F=N,R=O}for(var F=0;F<5;F++)for(var R=0;R<5;R++)g[F+5*R]=R+(2*F+3*R)%5*5;for(var q=1,X=0;X<24;X++){for(var j=0,ie=0,he=0;he<7;he++){if(q&1){var ve=(1<<he)-1;ve<32?ie^=1<<ve:j^=1<<ve-32}q&128?q=q<<1^113:q<<=1}b[X]=f.create(j,ie)}})();var C=[];(function(){for(var F=0;F<25;F++)C[F]=f.create()})();var A=m.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var F=this._state=[],R=0;R<25;R++)F[R]=new f.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(F,R){for(var B=this._state,N=this.blockSize/2,O=0;O<N;O++){var q=F[R+2*O],X=F[R+2*O+1];q=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360,X=(X<<8|X>>>24)&16711935|(X<<24|X>>>8)&4278255360;var j=B[O];j.high^=X,j.low^=q}for(var ie=0;ie<24;ie++){for(var he=0;he<5;he++){for(var ve=0,me=0,Te=0;Te<5;Te++){var j=B[he+5*Te];ve^=j.high,me^=j.low}var $=C[he];$.high=ve,$.low=me}for(var he=0;he<5;he++)for(var le=C[(he+4)%5],H=C[(he+1)%5],De=H.high,pt=H.low,ve=le.high^(De<<1|pt>>>31),me=le.low^(pt<<1|De>>>31),Te=0;Te<5;Te++){var j=B[he+5*Te];j.high^=ve,j.low^=me}for(var Xe=1;Xe<25;Xe++){var ve,me,j=B[Xe],ft=j.high,yt=j.low,xe=v[Xe];xe<32?(ve=ft<<xe|yt>>>32-xe,me=yt<<xe|ft>>>32-xe):(ve=yt<<xe-32|ft>>>64-xe,me=ft<<xe-32|yt>>>64-xe);var Oe=C[g[Xe]];Oe.high=ve,Oe.low=me}var Le=C[0],Re=B[0];Le.high=Re.high,Le.low=Re.low;for(var he=0;he<5;he++)for(var Te=0;Te<5;Te++){var Xe=he+5*Te,j=B[Xe],Pt=C[Xe],st=C[(he+1)%5+5*Te],_t=C[(he+2)%5+5*Te];j.high=Pt.high^~st.high&_t.high,j.low=Pt.low^~st.low&_t.low}var j=B[0],Qe=b[ie];j.high^=Qe.high,j.low^=Qe.low}},_doFinalize:function(){var F=this._data,R=F.words,B=this._nDataBytes*8,N=F.sigBytes*8,O=this.blockSize*32;R[N>>>5]|=1<<24-N%32,R[(e.ceil((N+1)/O)*O>>>5)-1]|=128,F.sigBytes=R.length*4,this._process();for(var q=this._state,X=this.cfg.outputLength/8,j=X/8,ie=[],he=0;he<j;he++){var ve=q[he],me=ve.high,Te=ve.low;me=(me<<8|me>>>24)&16711935|(me<<24|me>>>8)&4278255360,Te=(Te<<8|Te>>>24)&16711935|(Te<<24|Te>>>8)&4278255360,ie.push(Te),ie.push(me)}return new o.init(ie,X)},clone:function(){for(var F=s.clone.call(this),R=F._state=this._state.slice(0),B=0;B<25;B++)R[B]=R[B].clone();return F}});t.SHA3=s._createHelper(A),t.HmacSHA3=s._createHmacHelper(A)})(Math),n.SHA3})});var X1=Ut((t0,Y1)=>{(function(n,e){typeof t0=="object"?Y1.exports=t0=e(Yt()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(t0,function(n){return(function(e){var t=n,i=t.lib,o=i.WordArray,s=i.Hasher,c=t.algo,f=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),m=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),v=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),b=o.create([0,1518500249,1859775393,2400959708,2840853838]),C=o.create([1352829926,1548603684,1836072691,2053994217,0]),A=c.RIPEMD160=s.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(X,j){for(var ie=0;ie<16;ie++){var he=j+ie,ve=X[he];X[he]=(ve<<8|ve>>>24)&16711935|(ve<<24|ve>>>8)&4278255360}var me=this._hash.words,Te=b.words,$=C.words,le=f.words,H=m.words,De=v.words,pt=g.words,Xe,ft,yt,xe,Oe,Le,Re,Pt,st,_t;Le=Xe=me[0],Re=ft=me[1],Pt=yt=me[2],st=xe=me[3],_t=Oe=me[4];for(var Qe,ie=0;ie<80;ie+=1)Qe=Xe+X[j+le[ie]]|0,ie<16?Qe+=F(ft,yt,xe)+Te[0]:ie<32?Qe+=R(ft,yt,xe)+Te[1]:ie<48?Qe+=B(ft,yt,xe)+Te[2]:ie<64?Qe+=N(ft,yt,xe)+Te[3]:Qe+=O(ft,yt,xe)+Te[4],Qe=Qe|0,Qe=q(Qe,De[ie]),Qe=Qe+Oe|0,Xe=Oe,Oe=xe,xe=q(yt,10),yt=ft,ft=Qe,Qe=Le+X[j+H[ie]]|0,ie<16?Qe+=O(Re,Pt,st)+$[0]:ie<32?Qe+=N(Re,Pt,st)+$[1]:ie<48?Qe+=B(Re,Pt,st)+$[2]:ie<64?Qe+=R(Re,Pt,st)+$[3]:Qe+=F(Re,Pt,st)+$[4],Qe=Qe|0,Qe=q(Qe,pt[ie]),Qe=Qe+_t|0,Le=_t,_t=st,st=q(Pt,10),Pt=Re,Re=Qe;Qe=me[1]+yt+st|0,me[1]=me[2]+xe+_t|0,me[2]=me[3]+Oe+Le|0,me[3]=me[4]+Xe+Re|0,me[4]=me[0]+ft+Pt|0,me[0]=Qe},_doFinalize:function(){var X=this._data,j=X.words,ie=this._nDataBytes*8,he=X.sigBytes*8;j[he>>>5]|=128<<24-he%32,j[(he+64>>>9<<4)+14]=(ie<<8|ie>>>24)&16711935|(ie<<24|ie>>>8)&4278255360,X.sigBytes=(j.length+1)*4,this._process();for(var ve=this._hash,me=ve.words,Te=0;Te<5;Te++){var $=me[Te];me[Te]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return ve},clone:function(){var X=s.clone.call(this);return X._hash=this._hash.clone(),X}});function F(X,j,ie){return X^j^ie}function R(X,j,ie){return X&j|~X&ie}function B(X,j,ie){return(X|~j)^ie}function N(X,j,ie){return X&ie|j&~ie}function O(X,j,ie){return X^(j|~ie)}function q(X,j){return X<<j|X>>>32-j}t.RIPEMD160=s._createHelper(A),t.HmacRIPEMD160=s._createHmacHelper(A)})(Math),n.RIPEMD160})});var i0=Ut((n0,Q1)=>{(function(n,e){typeof n0=="object"?Q1.exports=n0=e(Yt()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(n0,function(n){(function(){var e=n,t=e.lib,i=t.Base,o=e.enc,s=o.Utf8,c=e.algo,f=c.HMAC=i.extend({init:function(m,v){m=this._hasher=new m.init,typeof v=="string"&&(v=s.parse(v));var g=m.blockSize,b=g*4;v.sigBytes>b&&(v=m.finalize(v)),v.clamp();for(var C=this._oKey=v.clone(),A=this._iKey=v.clone(),F=C.words,R=A.words,B=0;B<g;B++)F[B]^=1549556828,R[B]^=909522486;C.sigBytes=A.sigBytes=b,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var v=this._hasher,g=v.finalize(m);v.reset();var b=v.finalize(this._oKey.clone().concat(g));return b}})})()})});var j1=Ut((r0,Z1)=>{(function(n,e,t){typeof r0=="object"?Z1.exports=r0=e(Yt(),Xf(),i0()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(n.CryptoJS)})(r0,function(n){return(function(){var e=n,t=e.lib,i=t.Base,o=t.WordArray,s=e.algo,c=s.SHA256,f=s.HMAC,m=s.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(v){this.cfg=this.cfg.extend(v)},compute:function(v,g){for(var b=this.cfg,C=f.create(b.hasher,v),A=o.create(),F=o.create([1]),R=A.words,B=F.words,N=b.keySize,O=b.iterations;R.length<N;){var q=C.update(g).finalize(F);C.reset();for(var X=q.words,j=X.length,ie=q,he=1;he<O;he++){ie=C.finalize(ie),C.reset();for(var ve=ie.words,me=0;me<j;me++)X[me]^=ve[me]}A.concat(q),B[0]++}return A.sigBytes=N*4,A}});e.PBKDF2=function(v,g,b){return m.create(b).compute(v,g)}})(),n.PBKDF2})});var wo=Ut((o0,eC)=>{(function(n,e,t){typeof o0=="object"?eC.exports=o0=e(Yt(),Zh(),i0()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(n.CryptoJS)})(o0,function(n){return(function(){var e=n,t=e.lib,i=t.Base,o=t.WordArray,s=e.algo,c=s.MD5,f=s.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:1}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,v){for(var g,b=this.cfg,C=b.hasher.create(),A=o.create(),F=A.words,R=b.keySize,B=b.iterations;F.length<R;){g&&C.update(g),g=C.update(m).finalize(v),C.reset();for(var N=1;N<B;N++)g=C.finalize(g),C.reset();A.concat(g)}return A.sigBytes=R*4,A}});e.EvpKDF=function(m,v,g){return f.create(g).compute(m,v)}})(),n.EvpKDF})});var Yn=Ut((a0,tC)=>{(function(n,e,t){typeof a0=="object"?tC.exports=a0=e(Yt(),wo()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(n.CryptoJS)})(a0,function(n){n.lib.Cipher||(function(e){var t=n,i=t.lib,o=i.Base,s=i.WordArray,c=i.BufferedBlockAlgorithm,f=t.enc,m=f.Utf8,v=f.Base64,g=t.algo,b=g.EvpKDF,C=i.Cipher=c.extend({cfg:o.extend(),createEncryptor:function($,le){return this.create(this._ENC_XFORM_MODE,$,le)},createDecryptor:function($,le){return this.create(this._DEC_XFORM_MODE,$,le)},init:function($,le,H){this.cfg=this.cfg.extend(H),this._xformMode=$,this._key=le,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function($){return this._append($),this._process()},finalize:function($){$&&this._append($);var le=this._doFinalize();return le},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function $(le){return typeof le=="string"?Te:he}return function(le){return{encrypt:function(H,De,pt){return $(De).encrypt(le,H,De,pt)},decrypt:function(H,De,pt){return $(De).decrypt(le,H,De,pt)}}}})()}),A=i.StreamCipher=C.extend({_doFinalize:function(){var $=this._process(!0);return $},blockSize:1}),F=t.mode={},R=i.BlockCipherMode=o.extend({createEncryptor:function($,le){return this.Encryptor.create($,le)},createDecryptor:function($,le){return this.Decryptor.create($,le)},init:function($,le){this._cipher=$,this._iv=le}}),B=F.CBC=(function(){var $=R.extend();$.Encryptor=$.extend({processBlock:function(H,De){var pt=this._cipher,Xe=pt.blockSize;le.call(this,H,De,Xe),pt.encryptBlock(H,De),this._prevBlock=H.slice(De,De+Xe)}}),$.Decryptor=$.extend({processBlock:function(H,De){var pt=this._cipher,Xe=pt.blockSize,ft=H.slice(De,De+Xe);pt.decryptBlock(H,De),le.call(this,H,De,Xe),this._prevBlock=ft}});function le(H,De,pt){var Xe,ft=this._iv;ft?(Xe=ft,this._iv=e):Xe=this._prevBlock;for(var yt=0;yt<pt;yt++)H[De+yt]^=Xe[yt]}return $})(),N=t.pad={},O=N.Pkcs7={pad:function($,le){for(var H=le*4,De=H-$.sigBytes%H,pt=De<<24|De<<16|De<<8|De,Xe=[],ft=0;ft<De;ft+=4)Xe.push(pt);var yt=s.create(Xe,De);$.concat(yt)},unpad:function($){var le=$.words[$.sigBytes-1>>>2]&255;$.sigBytes-=le}},q=i.BlockCipher=C.extend({cfg:C.cfg.extend({mode:B,padding:O}),reset:function(){var $;C.reset.call(this);var le=this.cfg,H=le.iv,De=le.mode;this._xformMode==this._ENC_XFORM_MODE?$=De.createEncryptor:($=De.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==$?this._mode.init(this,H&&H.words):(this._mode=$.call(De,this,H&&H.words),this._mode.__creator=$)},_doProcessBlock:function($,le){this._mode.processBlock($,le)},_doFinalize:function(){var $,le=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(le.pad(this._data,this.blockSize),$=this._process(!0)):($=this._process(!0),le.unpad($)),$},blockSize:128/32}),X=i.CipherParams=o.extend({init:function($){this.mixIn($)},toString:function($){return($||this.formatter).stringify(this)}}),j=t.format={},ie=j.OpenSSL={stringify:function($){var le,H=$.ciphertext,De=$.salt;return De?le=s.create([1398893684,1701076831]).concat(De).concat(H):le=H,le.toString(v)},parse:function($){var le,H=v.parse($),De=H.words;return De[0]==1398893684&&De[1]==1701076831&&(le=s.create(De.slice(2,4)),De.splice(0,4),H.sigBytes-=16),X.create({ciphertext:H,salt:le})}},he=i.SerializableCipher=o.extend({cfg:o.extend({format:ie}),encrypt:function($,le,H,De){De=this.cfg.extend(De);var pt=$.createEncryptor(H,De),Xe=pt.finalize(le),ft=pt.cfg;return X.create({ciphertext:Xe,key:H,iv:ft.iv,algorithm:$,mode:ft.mode,padding:ft.padding,blockSize:$.blockSize,formatter:De.format})},decrypt:function($,le,H,De){De=this.cfg.extend(De),le=this._parse(le,De.format);var pt=$.createDecryptor(H,De).finalize(le.ciphertext);return pt},_parse:function($,le){return typeof $=="string"?le.parse($,this):$}}),ve=t.kdf={},me=ve.OpenSSL={execute:function($,le,H,De,pt){if(De||(De=s.random(64/8)),pt)var Xe=b.create({keySize:le+H,hasher:pt}).compute($,De);else var Xe=b.create({keySize:le+H}).compute($,De);var ft=s.create(Xe.words.slice(le),H*4);return Xe.sigBytes=le*4,X.create({key:Xe,iv:ft,salt:De})}},Te=i.PasswordBasedCipher=he.extend({cfg:he.cfg.extend({kdf:me}),encrypt:function($,le,H,De){De=this.cfg.extend(De);var pt=De.kdf.execute(H,$.keySize,$.ivSize,De.salt,De.hasher);De.iv=pt.iv;var Xe=he.encrypt.call(this,$,le,pt.key,De);return Xe.mixIn(pt),Xe},decrypt:function($,le,H,De){De=this.cfg.extend(De),le=this._parse(le,De.format);var pt=De.kdf.execute(H,$.keySize,$.ivSize,le.salt,De.hasher);De.iv=pt.iv;var Xe=he.decrypt.call(this,$,le,pt.key,De);return Xe}})})()})});var iC=Ut((s0,nC)=>{(function(n,e,t){typeof s0=="object"?nC.exports=s0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(s0,function(n){return n.mode.CFB=(function(){var e=n.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(i,o){var s=this._cipher,c=s.blockSize;t.call(this,i,o,c,s),this._prevBlock=i.slice(o,o+c)}}),e.Decryptor=e.extend({processBlock:function(i,o){var s=this._cipher,c=s.blockSize,f=i.slice(o,o+c);t.call(this,i,o,c,s),this._prevBlock=f}});function t(i,o,s,c){var f,m=this._iv;m?(f=m.slice(0),this._iv=void 0):f=this._prevBlock,c.encryptBlock(f,0);for(var v=0;v<s;v++)i[o+v]^=f[v]}return e})(),n.mode.CFB})});var oC=Ut((l0,rC)=>{(function(n,e,t){typeof l0=="object"?rC.exports=l0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(l0,function(n){return n.mode.CTR=(function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(i,o){var s=this._cipher,c=s.blockSize,f=this._iv,m=this._counter;f&&(m=this._counter=f.slice(0),this._iv=void 0);var v=m.slice(0);s.encryptBlock(v,0),m[c-1]=m[c-1]+1|0;for(var g=0;g<c;g++)i[o+g]^=v[g]}});return e.Decryptor=t,e})(),n.mode.CTR})});var sC=Ut((u0,aC)=>{(function(n,e,t){typeof u0=="object"?aC.exports=u0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(u0,function(n){return n.mode.CTRGladman=(function(){var e=n.lib.BlockCipherMode.extend();function t(s){if((s>>24&255)===255){var c=s>>16&255,f=s>>8&255,m=s&255;c===255?(c=0,f===255?(f=0,m===255?m=0:++m):++f):++c,s=0,s+=c<<16,s+=f<<8,s+=m}else s+=1<<24;return s}function i(s){return(s[0]=t(s[0]))===0&&(s[1]=t(s[1])),s}var o=e.Encryptor=e.extend({processBlock:function(s,c){var f=this._cipher,m=f.blockSize,v=this._iv,g=this._counter;v&&(g=this._counter=v.slice(0),this._iv=void 0),i(g);var b=g.slice(0);f.encryptBlock(b,0);for(var C=0;C<m;C++)s[c+C]^=b[C]}});return e.Decryptor=o,e})(),n.mode.CTRGladman})});var uC=Ut((c0,lC)=>{(function(n,e,t){typeof c0=="object"?lC.exports=c0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(c0,function(n){return n.mode.OFB=(function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(i,o){var s=this._cipher,c=s.blockSize,f=this._iv,m=this._keystream;f&&(m=this._keystream=f.slice(0),this._iv=void 0),s.encryptBlock(m,0);for(var v=0;v<c;v++)i[o+v]^=m[v]}});return e.Decryptor=t,e})(),n.mode.OFB})});var dC=Ut((d0,cC)=>{(function(n,e,t){typeof d0=="object"?cC.exports=d0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(d0,function(n){return n.mode.ECB=(function(){var e=n.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,i){this._cipher.encryptBlock(t,i)}}),e.Decryptor=e.extend({processBlock:function(t,i){this._cipher.decryptBlock(t,i)}}),e})(),n.mode.ECB})});var pC=Ut((f0,fC)=>{(function(n,e,t){typeof f0=="object"?fC.exports=f0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(f0,function(n){return n.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,o=t*4,s=o-i%o,c=i+s-1;e.clamp(),e.words[c>>>2]|=s<<24-c%4*8,e.sigBytes+=s},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},n.pad.Ansix923})});var hC=Ut((p0,mC)=>{(function(n,e,t){typeof p0=="object"?mC.exports=p0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(p0,function(n){return n.pad.Iso10126={pad:function(e,t){var i=t*4,o=i-e.sigBytes%i;e.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},n.pad.Iso10126})});var vC=Ut((m0,gC)=>{(function(n,e,t){typeof m0=="object"?gC.exports=m0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(m0,function(n){return n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971})});var _C=Ut((h0,yC)=>{(function(n,e,t){typeof h0=="object"?yC.exports=h0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(h0,function(n){return n.pad.ZeroPadding={pad:function(e,t){var i=t*4;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1,i=e.sigBytes-1;i>=0;i--)if(t[i>>>2]>>>24-i%4*8&255){e.sigBytes=i+1;break}}},n.pad.ZeroPadding})});var CC=Ut((g0,xC)=>{(function(n,e,t){typeof g0=="object"?xC.exports=g0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(g0,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})});var wC=Ut((v0,bC)=>{(function(n,e,t){typeof v0=="object"?bC.exports=v0=e(Yt(),Yn()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(v0,function(n){return(function(e){var t=n,i=t.lib,o=i.CipherParams,s=t.enc,c=s.Hex,f=t.format,m=f.Hex={stringify:function(v){return v.ciphertext.toString(c)},parse:function(v){var g=c.parse(v);return o.create({ciphertext:g})}}})(),n.format.Hex})});var EC=Ut((y0,SC)=>{(function(n,e,t){typeof y0=="object"?SC.exports=y0=e(Yt(),ua(),ca(),wo(),Yn()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(y0,function(n){return(function(){var e=n,t=e.lib,i=t.BlockCipher,o=e.algo,s=[],c=[],f=[],m=[],v=[],g=[],b=[],C=[],A=[],F=[];(function(){for(var N=[],O=0;O<256;O++)O<128?N[O]=O<<1:N[O]=O<<1^283;for(var q=0,X=0,O=0;O<256;O++){var j=X^X<<1^X<<2^X<<3^X<<4;j=j>>>8^j&255^99,s[q]=j,c[j]=q;var ie=N[q],he=N[ie],ve=N[he],me=N[j]*257^j*16843008;f[q]=me<<24|me>>>8,m[q]=me<<16|me>>>16,v[q]=me<<8|me>>>24,g[q]=me;var me=ve*16843009^he*65537^ie*257^q*16843008;b[j]=me<<24|me>>>8,C[j]=me<<16|me>>>16,A[j]=me<<8|me>>>24,F[j]=me,q?(q=ie^N[N[N[ve^ie]]],X^=N[N[X]]):q=X=1}})();var R=[0,1,2,4,8,16,32,64,128,27,54],B=o.AES=i.extend({_doReset:function(){var N;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var O=this._keyPriorReset=this._key,q=O.words,X=O.sigBytes/4,j=this._nRounds=X+6,ie=(j+1)*4,he=this._keySchedule=[],ve=0;ve<ie;ve++)ve<X?he[ve]=q[ve]:(N=he[ve-1],ve%X?X>6&&ve%X==4&&(N=s[N>>>24]<<24|s[N>>>16&255]<<16|s[N>>>8&255]<<8|s[N&255]):(N=N<<8|N>>>24,N=s[N>>>24]<<24|s[N>>>16&255]<<16|s[N>>>8&255]<<8|s[N&255],N^=R[ve/X|0]<<24),he[ve]=he[ve-X]^N);for(var me=this._invKeySchedule=[],Te=0;Te<ie;Te++){var ve=ie-Te;if(Te%4)var N=he[ve];else var N=he[ve-4];Te<4||ve<=4?me[Te]=N:me[Te]=b[s[N>>>24]]^C[s[N>>>16&255]]^A[s[N>>>8&255]]^F[s[N&255]]}}},encryptBlock:function(N,O){this._doCryptBlock(N,O,this._keySchedule,f,m,v,g,s)},decryptBlock:function(N,O){var q=N[O+1];N[O+1]=N[O+3],N[O+3]=q,this._doCryptBlock(N,O,this._invKeySchedule,b,C,A,F,c);var q=N[O+1];N[O+1]=N[O+3],N[O+3]=q},_doCryptBlock:function(N,O,q,X,j,ie,he,ve){for(var me=this._nRounds,Te=N[O]^q[0],$=N[O+1]^q[1],le=N[O+2]^q[2],H=N[O+3]^q[3],De=4,pt=1;pt<me;pt++){var Xe=X[Te>>>24]^j[$>>>16&255]^ie[le>>>8&255]^he[H&255]^q[De++],ft=X[$>>>24]^j[le>>>16&255]^ie[H>>>8&255]^he[Te&255]^q[De++],yt=X[le>>>24]^j[H>>>16&255]^ie[Te>>>8&255]^he[$&255]^q[De++],xe=X[H>>>24]^j[Te>>>16&255]^ie[$>>>8&255]^he[le&255]^q[De++];Te=Xe,$=ft,le=yt,H=xe}var Xe=(ve[Te>>>24]<<24|ve[$>>>16&255]<<16|ve[le>>>8&255]<<8|ve[H&255])^q[De++],ft=(ve[$>>>24]<<24|ve[le>>>16&255]<<16|ve[H>>>8&255]<<8|ve[Te&255])^q[De++],yt=(ve[le>>>24]<<24|ve[H>>>16&255]<<16|ve[Te>>>8&255]<<8|ve[$&255])^q[De++],xe=(ve[H>>>24]<<24|ve[Te>>>16&255]<<16|ve[$>>>8&255]<<8|ve[le&255])^q[De++];N[O]=Xe,N[O+1]=ft,N[O+2]=yt,N[O+3]=xe},keySize:256/32});e.AES=i._createHelper(B)})(),n.AES})});var AC=Ut((_0,TC)=>{(function(n,e,t){typeof _0=="object"?TC.exports=_0=e(Yt(),ua(),ca(),wo(),Yn()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(_0,function(n){return(function(){var e=n,t=e.lib,i=t.WordArray,o=t.BlockCipher,s=e.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],f=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],m=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],v=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],g=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],b=s.DES=o.extend({_doReset:function(){for(var R=this._key,B=R.words,N=[],O=0;O<56;O++){var q=c[O]-1;N[O]=B[q>>>5]>>>31-q%32&1}for(var X=this._subKeys=[],j=0;j<16;j++){for(var ie=X[j]=[],he=m[j],O=0;O<24;O++)ie[O/6|0]|=N[(f[O]-1+he)%28]<<31-O%6,ie[4+(O/6|0)]|=N[28+(f[O+24]-1+he)%28]<<31-O%6;ie[0]=ie[0]<<1|ie[0]>>>31;for(var O=1;O<7;O++)ie[O]=ie[O]>>>(O-1)*4+3;ie[7]=ie[7]<<5|ie[7]>>>27}for(var ve=this._invSubKeys=[],O=0;O<16;O++)ve[O]=X[15-O]},encryptBlock:function(R,B){this._doCryptBlock(R,B,this._subKeys)},decryptBlock:function(R,B){this._doCryptBlock(R,B,this._invSubKeys)},_doCryptBlock:function(R,B,N){this._lBlock=R[B],this._rBlock=R[B+1],C.call(this,4,252645135),C.call(this,16,65535),A.call(this,2,858993459),A.call(this,8,16711935),C.call(this,1,1431655765);for(var O=0;O<16;O++){for(var q=N[O],X=this._lBlock,j=this._rBlock,ie=0,he=0;he<8;he++)ie|=v[he][((j^q[he])&g[he])>>>0];this._lBlock=j,this._rBlock=X^ie}var ve=this._lBlock;this._lBlock=this._rBlock,this._rBlock=ve,C.call(this,1,1431655765),A.call(this,8,16711935),A.call(this,2,858993459),C.call(this,16,65535),C.call(this,4,252645135),R[B]=this._lBlock,R[B+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function C(R,B){var N=(this._lBlock>>>R^this._rBlock)&B;this._rBlock^=N,this._lBlock^=N<<R}function A(R,B){var N=(this._rBlock>>>R^this._lBlock)&B;this._lBlock^=N,this._rBlock^=N<<R}e.DES=o._createHelper(b);var F=s.TripleDES=o.extend({_doReset:function(){var R=this._key,B=R.words;if(B.length!==2&&B.length!==4&&B.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var N=B.slice(0,2),O=B.length<4?B.slice(0,2):B.slice(2,4),q=B.length<6?B.slice(0,2):B.slice(4,6);this._des1=b.createEncryptor(i.create(N)),this._des2=b.createEncryptor(i.create(O)),this._des3=b.createEncryptor(i.create(q))},encryptBlock:function(R,B){this._des1.encryptBlock(R,B),this._des2.decryptBlock(R,B),this._des3.encryptBlock(R,B)},decryptBlock:function(R,B){this._des3.decryptBlock(R,B),this._des2.encryptBlock(R,B),this._des1.decryptBlock(R,B)},keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=o._createHelper(F)})(),n.TripleDES})});var kC=Ut((x0,DC)=>{(function(n,e,t){typeof x0=="object"?DC.exports=x0=e(Yt(),ua(),ca(),wo(),Yn()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(x0,function(n){return(function(){var e=n,t=e.lib,i=t.StreamCipher,o=e.algo,s=o.RC4=i.extend({_doReset:function(){for(var m=this._key,v=m.words,g=m.sigBytes,b=this._S=[],C=0;C<256;C++)b[C]=C;for(var C=0,A=0;C<256;C++){var F=C%g,R=v[F>>>2]>>>24-F%4*8&255;A=(A+b[C]+R)%256;var B=b[C];b[C]=b[A],b[A]=B}this._i=this._j=0},_doProcessBlock:function(m,v){m[v]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var m=this._S,v=this._i,g=this._j,b=0,C=0;C<4;C++){v=(v+1)%256,g=(g+m[v])%256;var A=m[v];m[v]=m[g],m[g]=A,b|=m[(m[v]+m[g])%256]<<24-C*8}return this._i=v,this._j=g,b}e.RC4=i._createHelper(s);var f=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var m=this.cfg.drop;m>0;m--)c.call(this)}});e.RC4Drop=i._createHelper(f)})(),n.RC4})});var MC=Ut((C0,IC)=>{(function(n,e,t){typeof C0=="object"?IC.exports=C0=e(Yt(),ua(),ca(),wo(),Yn()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(C0,function(n){return(function(){var e=n,t=e.lib,i=t.StreamCipher,o=e.algo,s=[],c=[],f=[],m=o.Rabbit=i.extend({_doReset:function(){for(var g=this._key.words,b=this.cfg.iv,C=0;C<4;C++)g[C]=(g[C]<<8|g[C]>>>24)&16711935|(g[C]<<24|g[C]>>>8)&4278255360;var A=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],F=this._C=[g[2]<<16|g[2]>>>16,g[0]&4294901760|g[1]&65535,g[3]<<16|g[3]>>>16,g[1]&4294901760|g[2]&65535,g[0]<<16|g[0]>>>16,g[2]&4294901760|g[3]&65535,g[1]<<16|g[1]>>>16,g[3]&4294901760|g[0]&65535];this._b=0;for(var C=0;C<4;C++)v.call(this);for(var C=0;C<8;C++)F[C]^=A[C+4&7];if(b){var R=b.words,B=R[0],N=R[1],O=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,q=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,X=O>>>16|q&4294901760,j=q<<16|O&65535;F[0]^=O,F[1]^=X,F[2]^=q,F[3]^=j,F[4]^=O,F[5]^=X,F[6]^=q,F[7]^=j;for(var C=0;C<4;C++)v.call(this)}},_doProcessBlock:function(g,b){var C=this._X;v.call(this),s[0]=C[0]^C[5]>>>16^C[3]<<16,s[1]=C[2]^C[7]>>>16^C[5]<<16,s[2]=C[4]^C[1]>>>16^C[7]<<16,s[3]=C[6]^C[3]>>>16^C[1]<<16;for(var A=0;A<4;A++)s[A]=(s[A]<<8|s[A]>>>24)&16711935|(s[A]<<24|s[A]>>>8)&4278255360,g[b+A]^=s[A]},blockSize:128/32,ivSize:64/32});function v(){for(var g=this._X,b=this._C,C=0;C<8;C++)c[C]=b[C];b[0]=b[0]+1295307597+this._b|0,b[1]=b[1]+3545052371+(b[0]>>>0<c[0]>>>0?1:0)|0,b[2]=b[2]+886263092+(b[1]>>>0<c[1]>>>0?1:0)|0,b[3]=b[3]+1295307597+(b[2]>>>0<c[2]>>>0?1:0)|0,b[4]=b[4]+3545052371+(b[3]>>>0<c[3]>>>0?1:0)|0,b[5]=b[5]+886263092+(b[4]>>>0<c[4]>>>0?1:0)|0,b[6]=b[6]+1295307597+(b[5]>>>0<c[5]>>>0?1:0)|0,b[7]=b[7]+3545052371+(b[6]>>>0<c[6]>>>0?1:0)|0,this._b=b[7]>>>0<c[7]>>>0?1:0;for(var C=0;C<8;C++){var A=g[C]+b[C],F=A&65535,R=A>>>16,B=((F*F>>>17)+F*R>>>15)+R*R,N=((A&4294901760)*A|0)+((A&65535)*A|0);f[C]=B^N}g[0]=f[0]+(f[7]<<16|f[7]>>>16)+(f[6]<<16|f[6]>>>16)|0,g[1]=f[1]+(f[0]<<8|f[0]>>>24)+f[7]|0,g[2]=f[2]+(f[1]<<16|f[1]>>>16)+(f[0]<<16|f[0]>>>16)|0,g[3]=f[3]+(f[2]<<8|f[2]>>>24)+f[1]|0,g[4]=f[4]+(f[3]<<16|f[3]>>>16)+(f[2]<<16|f[2]>>>16)|0,g[5]=f[5]+(f[4]<<8|f[4]>>>24)+f[3]|0,g[6]=f[6]+(f[5]<<16|f[5]>>>16)+(f[4]<<16|f[4]>>>16)|0,g[7]=f[7]+(f[6]<<8|f[6]>>>24)+f[5]|0}e.Rabbit=i._createHelper(m)})(),n.Rabbit})});var NC=Ut((b0,FC)=>{(function(n,e,t){typeof b0=="object"?FC.exports=b0=e(Yt(),ua(),ca(),wo(),Yn()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(b0,function(n){return(function(){var e=n,t=e.lib,i=t.StreamCipher,o=e.algo,s=[],c=[],f=[],m=o.RabbitLegacy=i.extend({_doReset:function(){var g=this._key.words,b=this.cfg.iv,C=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],A=this._C=[g[2]<<16|g[2]>>>16,g[0]&4294901760|g[1]&65535,g[3]<<16|g[3]>>>16,g[1]&4294901760|g[2]&65535,g[0]<<16|g[0]>>>16,g[2]&4294901760|g[3]&65535,g[1]<<16|g[1]>>>16,g[3]&4294901760|g[0]&65535];this._b=0;for(var F=0;F<4;F++)v.call(this);for(var F=0;F<8;F++)A[F]^=C[F+4&7];if(b){var R=b.words,B=R[0],N=R[1],O=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,q=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,X=O>>>16|q&4294901760,j=q<<16|O&65535;A[0]^=O,A[1]^=X,A[2]^=q,A[3]^=j,A[4]^=O,A[5]^=X,A[6]^=q,A[7]^=j;for(var F=0;F<4;F++)v.call(this)}},_doProcessBlock:function(g,b){var C=this._X;v.call(this),s[0]=C[0]^C[5]>>>16^C[3]<<16,s[1]=C[2]^C[7]>>>16^C[5]<<16,s[2]=C[4]^C[1]>>>16^C[7]<<16,s[3]=C[6]^C[3]>>>16^C[1]<<16;for(var A=0;A<4;A++)s[A]=(s[A]<<8|s[A]>>>24)&16711935|(s[A]<<24|s[A]>>>8)&4278255360,g[b+A]^=s[A]},blockSize:128/32,ivSize:64/32});function v(){for(var g=this._X,b=this._C,C=0;C<8;C++)c[C]=b[C];b[0]=b[0]+1295307597+this._b|0,b[1]=b[1]+3545052371+(b[0]>>>0<c[0]>>>0?1:0)|0,b[2]=b[2]+886263092+(b[1]>>>0<c[1]>>>0?1:0)|0,b[3]=b[3]+1295307597+(b[2]>>>0<c[2]>>>0?1:0)|0,b[4]=b[4]+3545052371+(b[3]>>>0<c[3]>>>0?1:0)|0,b[5]=b[5]+886263092+(b[4]>>>0<c[4]>>>0?1:0)|0,b[6]=b[6]+1295307597+(b[5]>>>0<c[5]>>>0?1:0)|0,b[7]=b[7]+3545052371+(b[6]>>>0<c[6]>>>0?1:0)|0,this._b=b[7]>>>0<c[7]>>>0?1:0;for(var C=0;C<8;C++){var A=g[C]+b[C],F=A&65535,R=A>>>16,B=((F*F>>>17)+F*R>>>15)+R*R,N=((A&4294901760)*A|0)+((A&65535)*A|0);f[C]=B^N}g[0]=f[0]+(f[7]<<16|f[7]>>>16)+(f[6]<<16|f[6]>>>16)|0,g[1]=f[1]+(f[0]<<8|f[0]>>>24)+f[7]|0,g[2]=f[2]+(f[1]<<16|f[1]>>>16)+(f[0]<<16|f[0]>>>16)|0,g[3]=f[3]+(f[2]<<8|f[2]>>>24)+f[1]|0,g[4]=f[4]+(f[3]<<16|f[3]>>>16)+(f[2]<<16|f[2]>>>16)|0,g[5]=f[5]+(f[4]<<8|f[4]>>>24)+f[3]|0,g[6]=f[6]+(f[5]<<16|f[5]>>>16)+(f[4]<<16|f[4]>>>16)|0,g[7]=f[7]+(f[6]<<8|f[6]>>>24)+f[5]|0}e.RabbitLegacy=i._createHelper(m)})(),n.RabbitLegacy})});var PC=Ut((w0,RC)=>{(function(n,e,t){typeof w0=="object"?RC.exports=w0=e(Yt(),ua(),ca(),wo(),Yn()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(w0,function(n){return(function(){var e=n,t=e.lib,i=t.BlockCipher,o=e.algo;let s=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],f=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var m={pbox:[],sbox:[]};function v(F,R){let B=R>>24&255,N=R>>16&255,O=R>>8&255,q=R&255,X=F.sbox[0][B]+F.sbox[1][N];return X=X^F.sbox[2][O],X=X+F.sbox[3][q],X}function g(F,R,B){let N=R,O=B,q;for(let X=0;X<s;++X)N=N^F.pbox[X],O=v(F,N)^O,q=N,N=O,O=q;return q=N,N=O,O=q,O=O^F.pbox[s],N=N^F.pbox[s+1],{left:N,right:O}}function b(F,R,B){let N=R,O=B,q;for(let X=s+1;X>1;--X)N=N^F.pbox[X],O=v(F,N)^O,q=N,N=O,O=q;return q=N,N=O,O=q,O=O^F.pbox[1],N=N^F.pbox[0],{left:N,right:O}}function C(F,R,B){for(let j=0;j<4;j++){F.sbox[j]=[];for(let ie=0;ie<256;ie++)F.sbox[j][ie]=f[j][ie]}let N=0;for(let j=0;j<s+2;j++)F.pbox[j]=c[j]^R[N],N++,N>=B&&(N=0);let O=0,q=0,X=0;for(let j=0;j<s+2;j+=2)X=g(F,O,q),O=X.left,q=X.right,F.pbox[j]=O,F.pbox[j+1]=q;for(let j=0;j<4;j++)for(let ie=0;ie<256;ie+=2)X=g(F,O,q),O=X.left,q=X.right,F.sbox[j][ie]=O,F.sbox[j][ie+1]=q;return!0}var A=o.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var F=this._keyPriorReset=this._key,R=F.words,B=F.sigBytes/4;C(m,R,B)}},encryptBlock:function(F,R){var B=g(m,F[R],F[R+1]);F[R]=B.left,F[R+1]=B.right},decryptBlock:function(F,R){var B=b(m,F[R],F[R+1]);F[R]=B.left,F[R+1]=B.right},blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=i._createHelper(A)})(),n.Blowfish})});var E0=Ut((S0,VC)=>{(function(n,e,t){typeof S0=="object"?VC.exports=S0=e(Yt(),Hu(),N1(),P1(),ua(),B1(),ca(),Zh(),Xf(),G1(),jh(),$1(),J1(),X1(),i0(),j1(),wo(),Yn(),iC(),oC(),sC(),uC(),dC(),pC(),hC(),vC(),_C(),CC(),wC(),EC(),AC(),kC(),MC(),NC(),PC()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):n.CryptoJS=e(n.CryptoJS)})(S0,function(n){return n})});var _r=class n{saveState(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(i){console.error("Error saving state to localStorage",i)}}loadState(e){try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error("Error loading state from localStorage",t),this.clearState(e),null}}clearState(e){try{localStorage.removeItem(e)}catch(t){console.error("Error clearing state from localStorage",t)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var ai=class n{persistenceService=ze(_r);STORAGE_KEY="smartTableConfig";initialTableConfig={feature:"row_contact",key:"row_contact_default",api:{url:"CONTACT",pathTable:"v1/Master/RowContact/GetAll",pathExport:"v1/Master/RowContact/export",method:"GET",defaultPageSize:12},config:{id:"row-contact-table",title:"Contact Master",dataStrategy:"SYNC",pagingMode:"paginator",infiniteScrollBehavior:"append",paginatorPosition:"bottom",stripedRows:!0,showGridlines:!1,rowHover:!0,globalFilterFields:["organization_name","contact_person","communication_detail","email_id","created_time"],enableColumnChooser:!0,exportConfig:{enabled:!0,options:[{label:"CSV",key:"csv",icon:"pi pi-file"},{label:"Excel",key:"excel",icon:"pi pi-file-excel"},{label:"PDF",key:"pdf",icon:"pi pi-file-pdf"}]},enableRowMenu:!0,enableHeaderActions:!0,enableSavedQueries:!0,enableConfigButton:!0,enableChipFilters:!0,enableMultiSelect:!0,enableFreeze:!0,defaultRows:10,role:"ADMIN",toolbarButtonMode:"iconAndText",toolbarActions:[{label:"Refresh",icon:"pi pi-refresh",key:"refresh"},{label:"Filter",icon:"pi pi-filter",key:"toggle:filter-sidebar"},{label:"Config",icon:"pi pi-cog",key:"toggle:config-sidebar"},{label:"Add Contact",icon:"pi pi-plus",key:"add:contacts"}],sizerConfig:{enabled:!0,defaultDensity:"compact",densities:[{name:"comfortable",rowHeight:60,cssClass:"text-base"},{name:"cozy",rowHeight:50,cssClass:"text-sm"},{name:"compact",rowHeight:36,cssClass:"text-xs"},{name:"ultra-compact",rowHeight:28,cssClass:"text-xs"}],additionalReservedSpace:0},encryptionConfig:{enabled:!0,encryptedFields:["communication_detail","email_id"],secretKey:"my-super-secret-key-for-demo"},cardViewConfig:{cardsPerRow:4},emptyStateConfig:{enabled:!0,imageUrl:"",title:"Your Contact List is Empty",subtitle:"Get started by adding your first contact or importing from another service.",actions:[{label:"Add New Contact",icon:"pi pi-plus",key:"add:contacts",class:"bg-indigo-600 hover:bg-indigo-700 text-white"}],migration:{enabled:!0,title:"Migrate your data from third-party systems",logos:[{src:"https://picsum.photos/seed/zohocrm/120/30",alt:"Zoho CRM"},{src:"https://picsum.photos/seed/quickbooks/150/30",alt:"Quickbooks"},{src:"https://picsum.photos/seed/salesforce/120/30",alt:"Salesforce"}],moreText:"and more",action:{label:"Import Contacts",key:"import:contacts",class:"bg-cyan-500 hover:bg-cyan-600 text-white"}}},footerConfig:{enabled:!0,columns:[{code:"contact_person",aggregation:"count",display:"Total Contacts: {value}"},{code:"annual_revenue",aggregation:"sum",display:"Total Revenue: {value}"}]},styleConfig:{enableTransparency:!1,headerBackgroundColor:"var(--marg-header-bg)",footerBackgroundColor:"var(--marg-header-bg)",backgroundImageUrl:""}},advancedFilters:{enabled:!0,groups:[{name:"System Defined Filters",collapsible:!0,filters:[{code:"annual_revenue",name:"Annual Revenue",type:"numeric",operators:["=","!=",">","<",">=","<=","between","not between"],defaultOperator:">="}]},{name:"Date Filters",collapsible:!0,filters:[{code:"created_time",name:"Created Date",type:"date",dateOperators:["in the last 30 days","this month","this year","today"]}]},{name:"Lead Filters",collapsible:!1,filters:[{code:"lead_source",name:"Lead Source",type:"select",options:["Web","Organic","Referral"]}]}]},columns:[{index:0,name:"Select",code:"select_box",display:"table_cell",columnType:"CHECKBOX",width:"50px",align:"center",sortable:!1,filterable:!1,frozen:!0,showOnColumnChooser:!1},{index:1,name:"Contact Person",code:"contact_person",display:"table_cell",width:"250px",sortable:!0,filterable:!0,frozen:!0,cardHeader:!0,listRow:!0,filterOnCodes:["contact_person","organization_name"],cellTemplate:[{code:"avatar_url",columnType:"IMAGE",imageConfig:{shape:"circle"}},{code:"contact_person",tag:"p",bold:!0},{code:"organization_name",tag:"small"}]},{index:2,name:"Company",code:"organization_name",display:"table_cell",sortable:!0,filterable:!0,width:"200px"},{index:3,name:"Communication",code:"communication_detail",display:"table_cell",width:"150px",sortable:!0,filterable:!0,cardRow:!0,mask:{enabled:!0,unmaskEnabled:!0,visibleStart:0,visibleEnd:4,maskChar:"X"}},{index:4,name:"Email",code:"email_id",display:"table_cell",width:"250px",sortable:!0,filterable:!0,cardHeader1:!0,listRow:!0},{index:5,name:"Annual Revenue",code:"annual_revenue",display:"table_cell",align:"right",sortable:!0,filterable:!0,width:"150px",cardRow:!0,columnType:"numeric"},{index:6,name:"Created",code:"created_time",display:"table_cell",columnType:"DATE",width:"180px",sortable:!0,filterable:!0},{index:7,name:"Lead Source",code:"lead_source",display:"table_cell",sortable:!0,filterable:!0,width:"150px",cardRow:!0,listRow:!0},{index:8,name:"Action",code:"action",display:"table_cell",columnType:"ACTION",width:"120px",align:"center",showOnColumnChooser:!1}],rowActions:[{label:"Edit",icon:"pi pi-pencil",action:"edit",color:"text-blue-500"},{label:"Email",icon:"pi pi-envelope",action:"email",color:"text-gray-500"},{label:"Delete",icon:"pi pi-trash",action:"delete",color:"text-red-500"}],rowMenu:[{label:"Actions",items:[{label:"Edit",icon:"pi pi-pencil",action:"edit",shortcut:"E"},{label:"Duplicate",icon:"pi pi-copy",action:"duplicate"},{label:"Delete",icon:"pi pi-trash",action:"delete",shortcut:"Del"}]},{label:"Communication",items:[{label:"Call",icon:"pi pi-phone",action:"call"},{label:"WhatsApp",icon:"pi pi-whatsapp",action:"whatsapp"},{label:"Email",icon:"pi pi-envelope",action:"email"},{label:"SMS",icon:"pi pi-comment",action:"sms"}]}],headerMenu:[{label:"Bulk Actions",items:[{label:"Delete Selected",icon:"pi pi-trash",action:"delete_selected"}]}],drawerConfig:{width:"400px",position:"right",buttons:[],headerActions:[]}};configSignal=we(this.loadConfig());config=this.configSignal.asReadonly();constructor(){Zt(()=>{this.persistenceService.saveState(this.STORAGE_KEY,this.configSignal())})}loadConfig(){let e=this.persistenceService.loadState(this.STORAGE_KEY);return e?(e.config.styleConfig||(e.config.styleConfig=Rt({},this.initialTableConfig.config.styleConfig)),e.config.footerConfig||(e.config.footerConfig=Rt({},this.initialTableConfig.config.footerConfig)),e):this.initialTableConfig}updateDataStrategy(e){this.configSignal.update(t=>rn(Rt({},t),{config:rn(Rt({},t.config),{dataStrategy:e})}))}updateInfiniteScrollBehavior(e){this.configSignal.update(t=>rn(Rt({},t),{config:rn(Rt({},t.config),{infiniteScrollBehavior:e})}))}updateCardsPerRow(e){this.configSignal.update(t=>rn(Rt({},t),{config:rn(Rt({},t.config),{cardViewConfig:rn(Rt({},t.config.cardViewConfig),{cardsPerRow:e})})}))}updateFullConfig(e){this.configSignal.set(e)}resetToDefaults(){this.configSignal.set(JSON.parse(JSON.stringify(this.initialTableConfig)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ns(n,e){if(!n)return"";let t=e.visibleStart??0,i=e.visibleEnd??0,o=e.maskChar??"*";if(n.length<=t+i)return n;let s=n.substring(0,t),c=n.substring(n.length-i),f=n.length-t-i,m=o.repeat(Math.max(0,f));return`${s}${m}${c}`}function _v(n,e){let t=String(n||"").trim();if(e.required&&!t)return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 235, 238, 0.6)",textcolor:e.textcolor,tooltip:e.tooltip||"Email is required."}};if(!t)return null;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",tooltip:"Invalid email format."}};if(e.blacklist?.includes(t))return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 235, 238, 0.6)",tooltip:"This email address is blacklisted."}};let o=t.split("@")[1];return e.notAllowedDomains?.includes(o)?{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 235, 238, 0.6)",tooltip:`Emails from the domain '${o}' are not allowed.`}}:e.allowedDomains&&e.allowedDomains.length>0&&!e.allowedDomains.includes(o)?{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",tooltip:"Only emails from allowed domains are accepted."}}:null}function xv(n,e){let t=String(n||"");if(!t)return null;if(e.minLength!==void 0&&t.length<e.minLength)return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",textcolor:e.textcolor,tooltip:e.tooltip||`Must be at least ${e.minLength} characters long.`}};if(e.maxLength!==void 0&&t.length>e.maxLength)return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",textcolor:e.textcolor,tooltip:e.tooltip||`Cannot be more than ${e.maxLength} characters long.`}};if(e.onlyNumbers&&!/^\d+$/.test(t))return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",textcolor:e.textcolor,tooltip:e.tooltip||"Only numbers are allowed."}};if(e.pattern)try{if(!new RegExp(e.pattern).test(t))return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",textcolor:e.textcolor,tooltip:e.tooltip||"The format is invalid."}}}catch(i){console.error("Invalid regex pattern in configuration:",e.pattern,i)}return null}function zb(n,e){return e?.status&&(n==null||String(n).trim()==="")?{isValid:!1,style:{bgcolor:e.bgcolor,textcolor:e.textcolor,tooltip:e.tooltip}}:null}function qa(n,e,t){let i=e.validations?.find(g=>g.code===t),o=e.code===t?e.isRequired:void 0,s=e.code===t?e.emailValidation:void 0,c=e.code===t?e.genericValidation:void 0,f=i?.isRequired||o;if(f){let g=zb(n,f);if(g)return g}let m=i?.emailValidation||s;if(m){let g=_v(n,m);if(g)return g}let v=i?.genericValidation||c;if(v){let g=xv(n,v);if(g)return g}return{isValid:!0,style:null}}var zp=(n,e)=>e.label;function Gb(n,e){n&1&&at(0,"hr",1)}function qb(n,e){if(n&1&&(ne(0,"div",3)(1,"p",5),J(2),oe()()),n&2){let t=I().$implicit;L(2),Ue(t.label)}}function Wb(n,e){if(n&1&&at(0,"i"),n&2){let t=I().$implicit;qt(t.icon+" w-4 text-center")}}function $b(n,e){n&1&&at(0,"span",10)}function Kb(n,e){if(n&1&&(ne(0,"span",11),J(1),oe()),n&2){let t=I().$implicit;L(),Ue(t.shortcut)}}function Jb(n,e){n&1&&at(0,"i",12)}function Yb(n,e){if(n&1&&at(0,"i"),n&2){let t=I().$implicit;qt(t.icon+" w-4 text-center")}}function Xb(n,e){n&1&&at(0,"span",10)}function Qb(n,e){if(n&1&&(ne(0,"span",11),J(1),oe()),n&2){let t=I().$implicit;L(),Ue(t.shortcut)}}function Zb(n,e){if(n&1){let t=Ne();ne(0,"a",7),Ye("click",function(){let o=ee(t).$implicit,s=I(4);return te(s.onActionClick(o))}),ne(1,"div",8),fe(2,Yb,1,2,"i",9)(3,Xb,1,0,"span",10),ne(4,"span"),J(5),oe()(),fe(6,Qb,2,1,"span",11),oe()}if(n&2){let t=e.$implicit,i=I(4);Ze("cursor-pointer",!!t.action&&!i.isItemDisabled(t))("hover:bg-gray-100",!!t.action&&!i.isItemDisabled(t))("hover:bg-gray-100",!!t.action&&!i.isItemDisabled(t))("opacity-50",i.isItemDisabled(t))("cursor-not-allowed",i.isItemDisabled(t)),L(2),pe(t.icon?2:3),L(3),Ue(t.label),L(),pe(t.shortcut?6:-1)}}function jb(n,e){if(n&1&&(ne(0,"div",13)(1,"div",2),nt(2,Zb,7,13,"a",14,zp),oe()()),n&2){let t=I().$implicit;L(2),it(t.items)}}function ew(n,e){if(n&1){let t=Ne();ne(0,"div",6),Ye("mouseenter",function(){let o=ee(t).$implicit,s=I(2);return te(s.handleMouseEnter(o))})("mouseleave",function(){let o=ee(t).$implicit,s=I(2);return te(s.handleMouseLeave(o))}),ne(1,"a",7),Ye("click",function(){let o=ee(t).$implicit,s=I(2);return te(s.onActionClick(o))}),ne(2,"div",8),fe(3,Wb,1,2,"i",9)(4,$b,1,0,"span",10),ne(5,"span"),J(6),oe()(),ne(7,"div",8),fe(8,Kb,2,1,"span",11),fe(9,Jb,1,0,"i",12),oe()(),fe(10,jb,4,0,"div",13),oe()}if(n&2){let t=e.$implicit,i=I(2);L(),Ze("cursor-pointer",!!t.action&&!i.isItemDisabled(t))("hover:bg-gray-100",!!t.action&&!i.isItemDisabled(t))("hover:bg-gray-100",!!t.action&&!i.isItemDisabled(t))("opacity-50",i.isItemDisabled(t))("cursor-not-allowed",i.isItemDisabled(t)),L(2),pe(t.icon?3:4),L(3),Ue(t.label),L(2),pe(t.shortcut?8:-1),L(),pe(t.items?9:-1),L(),pe(t.items&&i.openSubMenu()===t.label?10:-1)}}function tw(n,e){if(n&1&&(fe(0,Gb,1,0,"hr",1),ne(1,"div",2),fe(2,qb,3,1,"div",3),nt(3,ew,11,15,"div",4,zp),oe()),n&2){let t=e.$implicit,i=e.$index;pe(i!==0?0:-1),L(),Ga("aria-labelledby",t.label),L(),pe(t.label!=="Actions"?2:-1),L(),it(t.items)}}var Rs=class n{menuConfig=be.required();row=be.required();position=be(null);actionClicked=ht();openSubMenu=we(null);isItemDisabled(e){let t=this.row();switch(e.action){case"call":case"whatsapp":case"sms":return!t.communication_detail;case"email":return!t.email_id;default:return!1}}onActionClick(e){!e.action||this.isItemDisabled(e)||this.actionClicked.emit({action:e.action,row:this.row()})}handleMouseEnter(e){e.items&&this.openSubMenu.set(e.label)}handleMouseLeave(e){e.items&&this.openSubMenu.set(null)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-row-menu"]],inputs:{menuConfig:[1,"menuConfig"],row:[1,"row"],position:[1,"position"]},outputs:{actionClicked:"actionClicked"},decls:3,vars:14,consts:[[1,"w-56","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-20"],[1,"border-gray-200"],["role","menu","aria-orientation","vertical",1,"py-1"],[1,"px-3","pt-2","pb-1"],[1,"relative"],[1,"text-xs","font-semibold","text-gray-500","uppercase","tracking-wider"],[1,"relative",3,"mouseenter","mouseleave"],["role","menuitem",1,"flex","items-center","justify-between","px-3","py-2","text-sm","text-gray-700","transition-colors","duration-150",3,"click"],[1,"flex","items-center","gap-3"],[3,"class"],[1,"w-4"],[1,"text-xs","text-gray-400"],[1,"pi","pi-chevron-right","text-xs","text-gray-400"],[1,"absolute","left-full","-top-1","ml-1","w-56","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30"],["role","menuitem",1,"flex","items-center","justify-between","px-3","py-2","text-sm","text-gray-700","transition-colors","duration-150",3,"cursor-pointer","hover:bg-gray-100","opacity-50","cursor-not-allowed"]],template:function(t,i){t&1&&(ne(0,"div",0),nt(1,tw,5,3,null,null,zp),oe()),t&2&&(ri("left",i.position()?i.position().x+"px":null)("top",i.position()?i.position().y+"px":null),Ze("origin-top-right",!i.position())("absolute",!i.position())("right-0",!i.position())("mt-2",!i.position())("fixed",!!i.position()),L(),it(i.menuConfig()))},dependencies:[kt],encapsulation:2,changeDetection:0})};var Cv=(n,e)=>e.label;function nw(n,e){if(n&1&&(ne(0,"div",2)(1,"p",5),J(2),oe()()),n&2){let t=I().$implicit;L(2),Ue(t.label)}}function iw(n,e){if(n&1){let t=Ne();ne(0,"a",6),Ye("click",function(){let o=ee(t).$implicit,s=I(2);return te(s.onActionClick(o.action))}),at(1,"i"),ne(2,"span"),J(3),oe()()}if(n&2){let t=e.$implicit;L(),qt(t.icon),L(2),Ue(t.label)}}function rw(n,e){n&1&&at(0,"hr",4)}function ow(n,e){if(n&1&&(ne(0,"div",1),fe(1,nw,3,1,"div",2),nt(2,iw,4,3,"a",3,Cv),oe(),fe(4,rw,1,0,"hr",4)),n&2){let t=e.$implicit,i=e.$index,o=e.$count,s=I();Ga("aria-labelledby",t.label),L(),pe(s.menuConfig().length>1?1:-1),L(),it(t.items),L(2),pe(i!==o-1?4:-1)}}var Bc=class n{menuConfig=be.required();actionClicked=ht();onActionClick(e){this.actionClicked.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-header-menu"]],inputs:{menuConfig:[1,"menuConfig"]},outputs:{actionClicked:"actionClicked"},decls:3,vars:0,consts:[[1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-20"],["role","menu","aria-orientation","vertical",1,"py-1"],[1,"px-4","py-2"],["href","javascript:void(0)","role","menuitem",1,"flex","items-center","gap-3","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","transition-colors","duration-150"],[1,"border-gray-200"],[1,"text-xs","text-gray-400","uppercase","tracking-wider"],["href","javascript:void(0)","role","menuitem",1,"flex","items-center","gap-3","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","transition-colors","duration-150",3,"click"]],template:function(t,i){t&1&&(ne(0,"div",0),nt(1,ow,5,3,null,null,Cv),oe()),t&2&&(L(),it(i.menuConfig()))},dependencies:[kt],encapsulation:2,changeDetection:0})};var xr=class n{elementRef=ze(Mr);clickOutside=new Ua;constructor(){Zt(()=>{let e=t=>{this.elementRef.nativeElement.contains(t.target)||this.clickOutside.emit()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}})}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Nn({type:n,selectors:[["","clickOutside",""]],outputs:{clickOutside:"clickOutside"}})};var aw=()=>["S","M","T","W","T","F","S"],sw=(n,e)=>e.date.getTime();function lw(n,e){if(n&1&&(z(0,"div",17),J(1),G()),n&2){let t=e.$implicit;L(),Ue(t)}}function uw(n,e){if(n&1){let t=Ne();z(0,"div",19)(1,"button",21),_e("click",function(){let o=ee(t).$implicit,s=I(2);return te(s.selectDate(o.date))}),J(2),oi(3,"date"),G()()}if(n&2){let t=e.$implicit,i=I(2);L(),Ze("text-gray-400",!t.isCurrentMonth)("font-semibold",i.isToday(t.date))("bg-indigo-600",i.isToday(t.date))("text-white",i.isToday(t.date))("hover:bg-gray-200",!i.isDateInRange(t.date))("bg-indigo-100",i.isDateInRange(t.date))("text-indigo-700",i.isDateInRange(t.date))("rounded-l-full",i.isRangeStart(t.date)&&!!i.rangeEnd())("rounded-r-full",i.isRangeEnd(t.date))("rounded-full",i.isRangeStart(t.date)&&!i.rangeEnd()||i.isRangeStart(t.date)&&i.isRangeEnd(t.date)),L(),Jt(" ",or(3,21,t.date,"d")," ")}}function cw(n,e){if(n&1&&(z(0,"span"),J(1),oi(2,"date"),oi(3,"date"),G()),n&2){let t=I(2);L(),Rc("",or(2,2,t.rangeStart(),"shortDate")," - ",or(3,5,t.rangeEnd(),"shortDate"))}}function dw(n,e){if(n&1&&(z(0,"span"),J(1),oi(2,"date"),G()),n&2){let t=I(2);L(),Ue(or(2,1,t.rangeStart(),"shortDate"))}}function fw(n,e){n&1&&(z(0,"span"),J(1,"Select a date or a range"),G())}function pw(n,e){if(n&1){let t=Ne();z(0,"div",6)(1,"div",10)(2,"button",11),_e("click",function(){ee(t);let o=I();return te(o.changeMonth(-1))}),Ie(3,"i",12),G(),z(4,"span",13),J(5),oi(6,"date"),G(),z(7,"button",14),_e("click",function(){ee(t);let o=I();return te(o.changeMonth(1))}),Ie(8,"i",15),G()(),z(9,"div",16),nt(10,lw,2,1,"div",17,an),G(),z(12,"div",18),nt(13,uw,4,24,"div",19,sw),G(),z(15,"div",20),fe(16,cw,4,8,"span")(17,dw,3,4,"span")(18,fw,2,0,"span"),G()()}if(n&2){let t=I();L(5),Ue(or(6,2,t.currentMonth(),"LLLL yyyy")),L(5),it(ta(5,aw)),L(3),it(t.calendarGrid()),L(3),pe(t.rangeStart()&&t.rangeEnd()?16:t.rangeStart()?17:18)}}function mw(n,e){if(n&1){let t=Ne();z(0,"li",32)(1,"input",34),_e("change",function(){let o=ee(t).$implicit,s=I(2);return te(s.toggleValue(o))}),G(),z(2,"label",35),J(3),G()()}if(n&2){let t=e.$implicit,i=I(2);L(),Je("id","filter-val-"+t)("checked",i.selectedValues().has(t)),L(),Je("for","filter-val-"+t)("title",t),L(),Ue(t)}}function hw(n,e){n&1&&(z(0,"li",33),J(1,"No values found."),G())}function gw(n,e){if(n&1){let t=Ne();z(0,"div",2)(1,"div",22)(2,"div",23),Ie(3,"i",24),G(),z(4,"input",25,0),_e("input",function(){ee(t);let o=bi(5),s=I();return te(s.searchTerm.set(o.value))}),G()()(),z(6,"div",26)(7,"div",27)(8,"input",28),_e("change",function(){ee(t);let o=I();return te(o.toggleSelectAll())}),G(),z(9,"label",29),J(10,"(Select All)"),G()(),Ie(11,"hr",30),z(12,"ul",31),nt(13,mw,4,5,"li",32,an),fe(15,hw,2,0,"li",33),G()()}if(n&2){let t=I();L(8),Je("checked",t.isAllSelected()),L(5),it(t.filteredValues()),L(2),pe(t.filteredValues().length===0?15:-1)}}var Oc=class n{column=be.required();data=be.required();activeFilter=be();apply=ht();close=ht();searchTerm=we("");selectedValues=we(new Set);currentMonth=we(new Date);rangeStart=we(null);rangeEnd=we(null);uniqueValues=ct(()=>{let e=this.column().code,t=this.data().map(i=>String(i[e]??"")).filter(i=>i.trim()!=="");return[...new Set(t)].sort()});filteredValues=ct(()=>{let e=this.searchTerm().toLowerCase();return e?this.uniqueValues().filter(t=>t.toLowerCase().includes(e)):this.uniqueValues()});isAllSelected=ct(()=>{let e=this.filteredValues();return e.length===0?!1:e.every(t=>this.selectedValues().has(t))});calendarGrid=ct(()=>{let e=this.currentMonth(),t=e.getFullYear(),i=e.getMonth(),o=new Date(t,i,1),s=new Date(t,i+1,0),c=o.getDay(),f=s.getDate(),m=[];for(let g=0;g<c;g++){let b=new Date(o);b.setDate(b.getDate()-(c-g)),m.push({date:b,isCurrentMonth:!1})}for(let g=1;g<=f;g++){let b=new Date(t,i,g);m.push({date:b,isCurrentMonth:!0})}let v=42-m.length;for(let g=1;g<=v;g++){let b=new Date(s);b.setDate(b.getDate()+g),m.push({date:b,isCurrentMonth:!1})}return m});constructor(){Zt(()=>{let e=this.column(),t=this.activeFilter();if(e.columnType==="DATE")t&&(t.operator==="="||t.operator==="between")?(this.rangeStart.set(t.value1?new Date(t.value1+"T00:00:00"):null),this.rangeEnd.set(t.value2?new Date(t.value2+"T00:00:00"):null),t.value1&&this.currentMonth.set(new Date(t.value1+"T00:00:00"))):this.resetDateSelection();else{let i=this.uniqueValues();if(t&&t.value1){let o=String(t.value1).split(",");this.selectedValues.set(new Set(o))}else this.selectedValues.set(new Set(i))}},{allowSignalWrites:!0})}toggleSelectAll(){let e=this.isAllSelected(),t=this.filteredValues();this.selectedValues.update(i=>{let o=new Set(i);return e?t.forEach(s=>o.delete(s)):t.forEach(s=>o.add(s)),o})}toggleValue(e){this.selectedValues.update(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i})}handleApply(){if(this.column().columnType==="DATE"){let e=this.rangeStart(),t=this.rangeEnd();if(e&&t&&t<e){let i=e;this.rangeStart.set(t),this.rangeEnd.set(i),t=i}if(e&&t){let i={code:this.column().code,name:this.column().name,type:"date",operator:"between",value1:e.toISOString().split("T")[0],value2:t.toISOString().split("T")[0]};this.apply.emit({filter:i})}else if(e){let i={code:this.column().code,name:this.column().name,type:"date",operator:"=",value1:e.toISOString().split("T")[0]};this.apply.emit({filter:i})}else this.apply.emit({filter:null})}else{let e=Array.from(this.selectedValues()),t=this.uniqueValues();if(e.length===0||e.length===t.length)this.apply.emit({filter:null});else{let i={code:this.column().code,name:this.column().name,type:"select",operator:"=",value1:e.join(",")};this.apply.emit({filter:i})}}}handleClear(){this.column().columnType==="DATE"?this.resetDateSelection():(this.selectedValues.set(new Set),this.searchTerm.set("")),this.apply.emit({filter:null})}handleSort(e){this.apply.emit({sort:{column:this.column().code,direction:e}})}selectDate(e){let t=this.rangeStart(),i=this.rangeEnd();!t||i?(this.rangeStart.set(e),this.rangeEnd.set(null)):this.rangeEnd.set(e)}changeMonth(e){this.currentMonth.update(t=>{let i=new Date(t);return i.setMonth(i.getMonth()+e),i})}isDateInRange(e){let t=this.rangeStart(),i=this.rangeEnd();if(!t)return!1;if(i){let o=t<i?t:i,s=t<i?i:t;return e>=o&&e<=s}return e.getTime()===t.getTime()}isRangeStart(e){return this.rangeStart()?.getTime()===e.getTime()}isRangeEnd(e){return this.rangeEnd()?.getTime()===e.getTime()}isToday(e){let t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}resetDateSelection(){this.rangeStart.set(null),this.rangeEnd.set(null),this.currentMonth.set(new Date)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-excel-filter"]],inputs:{column:[1,"column"],data:[1,"data"],activeFilter:[1,"activeFilter"]},outputs:{apply:"apply",close:"close"},decls:17,vars:1,consts:[["searchInput",""],[1,"absolute","top-full","right-0","mt-2","w-72","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30","flex","flex-col","max-h-[28rem]",3,"clickOutside","click"],[1,"p-2","border-b","border-gray-200","flex-shrink-0"],[1,"flex","items-center","gap-2","w-full","px-2","py-1.5","text-sm","rounded-md","text-gray-700","hover:bg-gray-100",3,"click"],[1,"pi","pi-sort-amount-up-alt","w-4","text-center"],[1,"pi","pi-sort-amount-down","w-4","text-center"],[1,"p-3"],[1,"p-2","border-t","border-gray-200","flex-shrink-0","flex","justify-end","gap-2"],[1,"px-3","py-1.5","text-xs","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-3","py-1.5","text-xs","font-medium","text-white","bg-indigo-600","border","border-transparent","rounded-md","hover:bg-indigo-700",3,"click"],[1,"flex","items-center","justify-between","mb-2"],["title","Previous month",1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-chevron-left","text-xs"],[1,"text-sm","font-semibold"],["title","Next month",1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-chevron-right","text-xs"],[1,"grid","grid-cols-7","text-center","text-xs","text-gray-500"],[1,"w-8","h-8","flex","items-center","justify-center","font-medium"],[1,"grid","grid-cols-7","text-center","text-sm"],[1,"flex","justify-center","items-center"],[1,"mt-3","text-xs","text-center","text-gray-500"],[1,"w-8","h-8","rounded-full","transition-colors",3,"click"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"pi","pi-search","text-gray-400","text-xs"],["type","search","placeholder","Search values...",1,"block","w-full","pl-8","pr-3","py-1.5","border","border-gray-300","rounded-md","bg-white","text-sm","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500",3,"input"],[1,"flex-grow","p-2","overflow-y-auto"],[1,"flex","items-center","px-1"],["type","checkbox","id","select-all-filter",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","checked"],["for","select-all-filter",1,"ml-2","text-sm","font-medium","text-gray-900"],[1,"my-2","border-gray-200"],[1,"space-y-1"],[1,"flex","items-center","p-1","rounded-md","hover:bg-gray-100"],[1,"px-2","py-1","text-sm","text-center","text-gray-500"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","id","checked"],[1,"ml-2","text-sm","text-gray-700","truncate",3,"for","title"]],template:function(t,i){t&1&&(z(0,"div",1),_e("clickOutside",function(){return i.close.emit()})("click",function(s){return s.stopPropagation()}),z(1,"div",2)(2,"button",3),_e("click",function(){return i.handleSort("asc")}),Ie(3,"i",4),z(4,"span"),J(5,"Sort Ascending"),G()(),z(6,"button",3),_e("click",function(){return i.handleSort("desc")}),Ie(7,"i",5),z(8,"span"),J(9,"Sort Descending"),G()()(),fe(10,pw,19,6,"div",6)(11,gw,16,2),z(12,"div",7)(13,"button",8),_e("click",function(){return i.handleClear()}),J(14," Clear "),G(),z(15,"button",9),_e("click",function(){return i.handleApply()}),J(16," Apply "),G()()()),t&2&&(L(10),pe(i.column().columnType==="DATE"?10:11))},dependencies:[kt,xr,Fs],encapsulation:2,changeDetection:0})};var Ps=(n,e)=>e.code,vw=(n,e)=>e.organization_id,yw=(n,e)=>e.action;function _w(n,e){if(n&1){let t=Ne();z(0,"input",14),_e("change",function(){ee(t);let o=I(2);return te(o.toggleSelectAll())})("click",function(o){return ee(t),te(o.stopPropagation())}),G()}if(n&2){let t=I(2);Je("checked",t.isAllSelectedOnPage())}}function xw(n,e){if(n&1){let t=Ne();z(0,"app-header-menu",18),_e("actionClicked",function(o){ee(t);let s=I(3);return te(s.handleHeaderMenuAction(o))})("clickOutside",function(){ee(t);let o=I(3);return te(o.isHeaderMenuOpen.set(!1))}),G()}if(n&2){let t=I(3);Je("menuConfig",t.headerMenuConfig())}}function Cw(n,e){if(n&1){let t=Ne();z(0,"div",11)(1,"button",15),_e("click",function(o){ee(t);let s=I(2);return o.stopPropagation(),te(s.isHeaderMenuOpen.set(!s.isHeaderMenuOpen()))}),Ie(2,"i",16),G(),fe(3,xw,1,1,"app-header-menu",17),G()}if(n&2){let t=I(2);L(),Ze("opacity-50",t.selectedIds().size===0),Je("disabled",t.selectedIds().size===0),L(2),pe(t.isHeaderMenuOpen()?3:-1)}}function bw(n,e){if(n&1&&Ie(0,"i",20),n&2){let t=I(3);Ze("pi-sort-amount-up-alt",t.sortDirection()==="asc")("pi-sort-amount-down",t.sortDirection()==="desc")}}function ww(n,e){if(n&1&&(z(0,"div",12)(1,"span"),J(2),G(),fe(3,bw,1,4,"i",19),G()),n&2){let t=I().$implicit,i=I();L(2),Ue(t.name),L(),pe(i.sortColumn()===t.code?3:-1)}}function Sw(n,e){if(n&1){let t=Ne();z(0,"app-excel-filter",24),_e("apply",function(o){ee(t);let s=I(2).$implicit,c=I();return te(c.handleApplyExcelFilter(o,s.code))})("close",function(){ee(t);let o=I(3);return te(o.closeFilterMenu())}),G()}if(n&2){let t,i=I(2).$implicit,o=I();Je("column",i)("data",o.data())("activeFilter",(t=o.activeFilters())==null?null:t[i.code])}}function Ew(n,e){if(n&1){let t=Ne();z(0,"div",13)(1,"button",21),_e("click",function(o){ee(t);let s=I().$implicit,c=I();return te(c.openFilterMenu(s,o))}),Ie(2,"i",22),G(),fe(3,Sw,1,3,"app-excel-filter",23),G()}if(n&2){let t,i=I().$implicit,o=I();L(),Ze("text-indigo-500",(t=o.activeFilters())==null?null:t[i.code]),L(2),pe(o.openFilterMenuForColumn()===i?3:-1)}}function Tw(n,e){if(n&1){let t=Ne();z(0,"th",8),_e("dragover",function(o){ee(t);let s=I();return te(s.onDragOver(o))})("drop",function(o){let s=ee(t).$index,c=I();return te(c.onDrop(o,s))})("dragend",function(){ee(t);let o=I();return te(o.onDragEnd())}),z(1,"div",9),_e("dragstart",function(){let o=ee(t).$index,s=I();return te(s.onDragStart(o))})("click",function(){let o=ee(t).$implicit,s=I();return te(s.onSort(o.code))})("keydown.enter",function(o){let s=ee(t).$implicit,c=I();return o.preventDefault(),te(c.onSort(s.code))})("keydown.space",function(o){let s=ee(t).$implicit,c=I();return o.preventDefault(),te(c.onSort(s.code))}),fe(2,_w,1,1,"input",10)(3,Cw,4,4,"div",11)(4,ww,4,2,"div",12),fe(5,Ew,4,3,"div",13),G()()}if(n&2){let t=e.$implicit,i=e.$index,o=e.$count,s=I();ri("width",t.width)("left",t.frozen?s.columnOffsets()[i]:null),Ze("border-r",i===o-1||t.frozen||s.showGridlines())("sticky",t.frozen)("z-30",t.frozen)("bg-gray-100",t.frozen)("opacity-50",s.draggedColumnIndex()===i),L(),Ze("justify-center",t.align==="center")("justify-end",t.align==="right")("justify-between",t.align!=="center"&&t.align!=="right")("cursor-pointer",t.sortable)("cursor-move",t.columnType!=="CHECKBOX"&&t.columnType!=="ACTION"&&!t.frozen),Je("title",t.sortable?s.sortColumn()===t.code?s.sortDirection()==="asc"?"Sort descending":"Sort ascending":"Sort by "+t.name:null),Ga("draggable",t.columnType!=="CHECKBOX"&&t.columnType!=="ACTION"&&!t.frozen)("tabindex",t.sortable?0:-1),L(),pe(t.columnType==="CHECKBOX"&&s.enableMultiSelect()?2:t.columnType==="ACTION"&&s.headerMenuConfig()?3:4),L(3),pe(t.filterable?5:-1)}}function Aw(n,e){if(n&1){let t=Ne();z(0,"input",30),_e("change",function(){ee(t);let o=I(3).$implicit,s=I();return te(s.toggleRowSelection(o.organization_id))})("click",function(o){return ee(t),te(o.stopPropagation())}),G()}if(n&2){let t=I(3).$implicit,i=I();Je("checked",i.selectedIds().has(t.organization_id))}}function Dw(n,e){if(n&1&&fe(0,Aw,1,1,"input",29),n&2){let t=I(3);pe(t.enableMultiSelect()?0:-1)}}function kw(n,e){if(n&1){let t=Ne();z(0,"button",36),_e("click",function(o){let s=ee(t).$implicit,c=I(4).$implicit,f=I();return o.stopPropagation(),te(f.rowAction.emit({action:s.action,row:c}))}),Ie(1,"i"),G()}if(n&2){let t=e.$implicit;qt(t.color),Je("title",t.label),L(),qt(t.icon)}}function Iw(n,e){n&1&&nt(0,kw,2,5,"button",35,yw),n&2&&it(e)}function Mw(n,e){if(n&1){let t=Ne();z(0,"app-row-menu",37),_e("actionClicked",function(o){ee(t);let s=I(4);return te(s.handleRowMenuAction(o))})("clickOutside",function(){ee(t);let o=I(4);return te(o.closeRowMenu())}),G()}if(n&2){let t=I(3).$implicit,i=I();Je("menuConfig",i.rowMenuConfig())("row",t)("position",i.contextMenuPosition())}}function Fw(n,e){if(n&1){let t=Ne();z(0,"div",28)(1,"div",31),fe(2,Iw,2,0),G(),z(3,"button",32),_e("click",function(o){ee(t);let s=I(2).$implicit,c=I();return te(c.toggleRowMenu(o,s.organization_id))}),Ie(4,"i",33),G(),fe(5,Mw,1,3,"app-row-menu",34),G()}if(n&2){let t,i=I(2),o=i.$implicit,s=i.$index,c=I();L(),Ze("opacity-100",c.keyboardActiveRowIndex()===s),L(),pe((t=c.rowActions())?2:-1,t),L(),Ze("opacity-100",c.keyboardActiveRowIndex()===s),L(2),pe(c.openMenuRowId()===o.organization_id?5:-1)}}function Nw(n,e){if(n&1&&(z(0,"span"),J(1),oi(2,"date"),G()),n&2){let t=I().$implicit,i=I().$implicit;L(),Ue(or(2,1,i[t.code],"mediumDate"))}}function Rw(n,e){if(n&1&&(z(0,"span",39),J(1),G(),z(2,"span",40),J(3),G()),n&2){let t=I(4).$implicit;L(),Ue(t.contact_person),L(2),Jt("(",t.organization_name,")")}}function Pw(n,e){if(n&1&&Ie(0,"img",41),n&2){let t=I(2).$implicit,i=I(5).$implicit;Je("src",i[t.code],Fr)}}function Vw(n,e){if(n&1&&(z(0,"div",42)(1,"span",43),J(2),G()()),n&2){let t=I(7).$implicit;L(2),Ue((t.contact_person==null?null:t.contact_person[0])||"A")}}function Lw(n,e){if(n&1&&fe(0,Pw,1,1,"img",41)(1,Vw,3,1,"div",42),n&2){let t=I().$implicit,i=I(5).$implicit;pe(i[t.code]?0:1)}}function Bw(n,e){if(n&1&&fe(0,Lw,2,1),n&2){let t=e.$implicit;pe(t.columnType==="IMAGE"?0:-1)}}function Ow(n,e){if(n&1&&(z(0,"p",39),J(1),G()),n&2){I();let t=Mi(0),i=I().$implicit;Ze("font-bold",i.bold),L(),Ue(t)}}function Hw(n,e){if(n&1&&(z(0,"small",47),J(1),G()),n&2){I();let t=Mi(0),i=I().$implicit;Ze("font-bold",i.bold),L(),Ue(t)}}function Uw(n,e){if(n&1&&(z(0,"span"),J(1),G()),n&2){I();let t=Mi(0),i=I().$implicit;Ze("font-bold",i.bold),L(),Ue(t)}}function zw(n,e){if(n&1&&(Zo(0),fe(1,Ow,2,3,"p",44)(2,Hw,2,3,"small",45)(3,Uw,2,3,"span",46)),n&2){let t,i=I().$implicit,o=I(5).$implicit;jo(o[i.code]),L(),pe((t=i.tag||"span")==="p"?1:t==="small"?2:t==="span"?3:-1)}}function Gw(n,e){if(n&1&&fe(0,zw,4,2),n&2){let t=e.$implicit;pe(t.columnType!=="IMAGE"?0:-1)}}function qw(n,e){if(n&1&&(z(0,"div",38),nt(1,Bw,1,1,null,null,Ps),z(3,"div"),nt(4,Gw,1,1,null,null,Ps),G()()),n&2){let t=I(3).$implicit;L(),it(t.cellTemplate),L(3),it(t.cellTemplate)}}function Ww(n,e){if(n&1&&fe(0,Rw,4,2)(1,qw,6,0,"div",38),n&2){let t=I(4);pe(t.density()==="ultra-compact"?0:1)}}function $w(n,e){if(n&1&&(z(0,"span"),J(1),G()),n&2){let t=I(2).$implicit,i=I().$implicit;L(),Ue(i[t.code])}}function Kw(n,e){if(n&1&&fe(0,Ww,2,1)(1,$w,2,1,"span"),n&2){let t=I().$implicit;pe(t.cellTemplate?0:1)}}function Jw(n,e){if(n&1&&(z(0,"td",27),fe(1,Dw,1,1)(2,Fw,6,6,"div",28)(3,Nw,3,4,"span")(4,Kw,2,1),G()),n&2){let t,i=e.$implicit,o=e.$index,s=e.$count,c=I().$implicit,f=Mi(0),m=I();qt(m.densityClass()),ri("left",i.frozen?m.columnOffsets()[o]:null),Ze("font-bold",f)("!text-sm",f&&(m.density()==="compact"||m.density()==="ultra-compact"))("!text-base",f&&m.density()==="cozy")("!text-lg",f&&m.density()==="comfortable")("border-r",o===s-1||i.frozen||m.showGridlines())("sticky",i.frozen)("z-10",i.frozen)("bg-white",i.frozen&&!m.selectedIds().has(c.organization_id))("group-hover:bg-gray-100",i.frozen&&m.rowHover()&&!m.selectedIds().has(c.organization_id))("bg-transparent",f)("text-center",i.align==="center")("text-right",i.align==="right")("text-left",i.align!=="center"&&i.align!=="right"),L(),pe((t=i.columnType)==="CHECKBOX"?1:t==="ACTION"?2:t==="DATE"?3:4)}}function Yw(n,e){if(n&1){let t=Ne();Zo(0),z(1,"tr",25),_e("click",function(){let o=ee(t).$implicit,s=I();return te(s.onRowClick(o))})("contextmenu",function(o){let s=ee(t).$implicit,c=I();return te(c.onRowContextMenu(o,s))}),nt(2,Jw,5,31,"td",26,Ps),G()}if(n&2){let t=e.$implicit,i=e.$index,o=I(),s=jo(o.selectedIds().has(t.organization_id)||o.keyboardActiveRowIndex()===i);L(),Ze("odd:bg-gray-50",o.stripedRows()&&!s)("hover:bg-gray-100",o.rowHover()&&!s)("z-10",s)("border-y-2",s)("border-y-indigo-400",s)("-my-px",s),Je("id","table-item-"+t.organization_id),L(),it(o.columns())}}function Xw(n,e){if(n&1&&(z(0,"td",49),J(1,"\xA0"),G()),n&2){let t=e.$index,i=e.$count,o=I(2);qt(o.densityClass()),Ze("border-r",t===i-1||o.showGridlines())}}function Qw(n,e){if(n&1&&(z(0,"tr",6),nt(1,Xw,2,4,"td",48,Ps),G()),n&2){let t=I();L(),it(t.columns())}}function Zw(n,e){if(n&1&&Ie(0,"div",52),n&2){let t=I().$implicit,i=I();Je("innerHTML",i[t.code],Ji)}}function jw(n,e){n&1&&(z(0,"span"),J(1,"\xA0"),G())}function e2(n,e){if(n&1&&(z(0,"td",51),fe(1,Zw,1,1,"div",52)(2,jw,2,0,"span"),G()),n&2){let t=e.$implicit,i=e.$index,o=e.$count,s=I(),c=I();ri("left",t.frozen?c.columnOffsets()[i]:null),Ze("border-r",i===o-1||t.frozen||c.showGridlines())("sticky",t.frozen)("z-10",t.frozen)("bg-gray-100",t.frozen)("text-center",t.align==="center")("text-right",t.align==="right")("text-left",t.align!=="center"&&t.align!=="right"),L(),pe(s[t.code]?1:2)}}function t2(n,e){if(n&1&&(z(0,"tfoot",7)(1,"tr"),nt(2,e2,3,17,"td",50,Ps),G()()),n&2){let t=I();L(2),it(t.columns())}}var Hc=class n{columns=be.required();data=be.required();sortColumn=be.required();sortDirection=be.required();density=be("cozy");densityClass=be("");rowMenuConfig=be.required();rowActions=be();headerMenuConfig=be();selectedIds=be(new Set);enableMultiSelect=be(!1);customTemplate=be(null);loading=be(!1);keyboardActiveRowIndex=be(null);pageSize=be(10);isInfiniteScroll=be(!1);activeFilters=be();stripedRows=be(!0);showGridlines=be(!1);rowHover=be(!0);footerConfig=be();sortChange=ht();rowAction=ht();headerAction=ht();selectionChange=ht();columnReorder=ht();rowClicked=ht();filterChange=ht();draggedColumnIndex=we(null);dragOverIndex=we(null);unmaskedCells=we(new Set);openMenuRowId=we(null);isHeaderMenuOpen=we(!1);contextMenuPosition=we(null);openFilterMenuForColumn=we(null);isAllSelectedOnPage=ct(()=>{let e=this.data().map(t=>t.organization_id);return e.length===0?!1:e.every(t=>this.selectedIds().has(t))});emptyRows=ct(()=>{let e=this.pageSize(),t=this.data().length;if(this.isInfiniteScroll()||t>=e)return[];let i=e-t;return Array(i).fill(0)});columnOffsets=ct(()=>{let e=this.columns(),t=new Array(e.length).fill(null),i=0;for(let o=0;o<e.length;o++){let s=e[o];if(s.frozen){t[o]=`${i}px`;let c=s.width?parseInt(s.width,10):150;i+=c}}return t});footerData=ct(()=>{let e=this.footerConfig(),t=this.data();if(!e||!e.enabled||!e.columns||t.length===0)return null;let i={},o=t.length,s={};for(let c of e.columns)s[c.code]||(s[c.code]=[]),s[c.code].push(c);for(let c in s){let f=s[c],m=0,v=0;if(f.some(C=>C.aggregation==="sum"||C.aggregation==="avg"))for(let C of t){let A=Number(C[c]);isNaN(A)||(m+=A,v++)}let b=[];for(let C of f){let A=0;switch(C.aggregation){case"count":A=o;break;case"sum":A=m;break;case"avg":A=v>0?m/v:0;break}let F;C.aggregation==="sum"||C.aggregation==="avg"?F=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(A):F=new Intl.NumberFormat("en-US").format(A),b.push(C.display.replace("{value}",F))}i[c]=b.join("<br>")}return i});onSort(e){if(!this.columns().find(i=>i.code===e)?.sortable)return;let t="asc";this.sortColumn()===e&&this.sortDirection()==="asc"&&(t="desc"),this.sortChange.emit({column:e,direction:t})}onRowClick(e){this.rowClicked.emit(e)}handleApplyExcelFilter(e,t){e.sort&&this.sortChange.emit(e.sort),Object.prototype.hasOwnProperty.call(e,"filter")&&this.filterChange.emit({code:t,filter:e.filter??null}),this.closeFilterMenu()}toggleRowSelection(e){let t=new Set(this.selectedIds());t.has(e)?t.delete(e):t.add(e),this.selectionChange.emit(t)}toggleSelectAll(){let e=this.isAllSelectedOnPage(),t=new Set(this.selectedIds()),i=this.data().map(o=>o.organization_id);e?i.forEach(o=>t.delete(o)):i.forEach(o=>t.add(o)),this.selectionChange.emit(t)}onRowContextMenu(e,t){this.selectedIds().has(t.organization_id)||this.selectionChange.emit(new Set([t.organization_id])),e.preventDefault(),this.openMenuRowId.set(t.organization_id),this.contextMenuPosition.set({x:e.clientX,y:e.clientY})}toggleRowMenu(e,t){e.stopPropagation(),this.contextMenuPosition.set(null),this.openMenuRowId.update(i=>i===t?null:t)}openFilterMenu(e,t){t.stopPropagation(),this.openFilterMenuForColumn.set(e)}closeFilterMenu(){this.openFilterMenuForColumn.set(null)}closeRowMenu(){this.openMenuRowId.set(null),this.contextMenuPosition.set(null)}handleRowMenuAction(e){this.rowAction.emit(e),this.closeRowMenu()}handleHeaderMenuAction(e){this.headerAction.emit({action:e,selectedIds:Array.from(this.selectedIds())}),this.isHeaderMenuOpen.set(!1)}onDragStart(e){let t=this.columns()[e].columnType;t==="CHECKBOX"||t==="ACTION"||this.draggedColumnIndex.set(e)}onDragOver(e){e.preventDefault()}onDragEnter(e){this.draggedColumnIndex()!==null&&this.draggedColumnIndex()!==e&&this.dragOverIndex.set(e)}onDragLeave(){this.dragOverIndex.set(null)}onDrop(e,t){e.preventDefault();let i=this.draggedColumnIndex(),o=this.columns()[t];if(o.columnType==="CHECKBOX"||o.columnType==="ACTION"){this.draggedColumnIndex.set(null),this.dragOverIndex.set(null);return}if(i===null||i===t){this.draggedColumnIndex.set(null),this.dragOverIndex.set(null);return}let s=[...this.columns()],c=s.splice(i,1)[0];s.splice(t,0,c),this.columnReorder.emit(s),this.draggedColumnIndex.set(null),this.dragOverIndex.set(null)}onDragEnd(){this.draggedColumnIndex.set(null),this.dragOverIndex.set(null)}isUnmasked(e,t){let i=`${e}-${t}`;return this.unmaskedCells().has(i)}toggleMask(e,t){let i=`${e}-${t}`;this.unmaskedCells.update(o=>{let s=new Set(o);return s.has(i)?s.delete(i):s.add(i),s})}maskString(e,t){return Ns(e,{visibleStart:t.visibleStart,visibleEnd:t.visibleEnd,maskChar:t.maskChar})}getCellValidation(e,t){let i=qa(e[t.code],t,t.code);if(!i.isValid)return i;if(t.validations)for(let o of t.validations){let s=qa(e[o.code],t,o.code);if(!s.isValid)return s}return{isValid:!0,style:null}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-table-view"]],inputs:{columns:[1,"columns"],data:[1,"data"],sortColumn:[1,"sortColumn"],sortDirection:[1,"sortDirection"],density:[1,"density"],densityClass:[1,"densityClass"],rowMenuConfig:[1,"rowMenuConfig"],rowActions:[1,"rowActions"],headerMenuConfig:[1,"headerMenuConfig"],selectedIds:[1,"selectedIds"],enableMultiSelect:[1,"enableMultiSelect"],customTemplate:[1,"customTemplate"],loading:[1,"loading"],keyboardActiveRowIndex:[1,"keyboardActiveRowIndex"],pageSize:[1,"pageSize"],isInfiniteScroll:[1,"isInfiniteScroll"],activeFilters:[1,"activeFilters"],stripedRows:[1,"stripedRows"],showGridlines:[1,"showGridlines"],rowHover:[1,"rowHover"],footerConfig:[1,"footerConfig"]},outputs:{sortChange:"sortChange",rowAction:"rowAction",headerAction:"headerAction",selectionChange:"selectionChange",columnReorder:"columnReorder",rowClicked:"rowClicked",filterChange:"filterChange"},decls:12,vars:1,consts:[[1,"h-full","overflow-auto","border-x","border-b","border-gray-300"],[1,"min-w-full","border-collapse","bg-white"],[1,"sticky","top-0","z-20","bg-gray-100"],["scope","col",1,"p-2","border-b","border-t","border-l","border-gray-300","font-semibold","text-gray-600","transition-all","duration-150","relative","text-xs",3,"width","left","border-r","sticky","z-30","bg-gray-100","opacity-50"],[1,""],[1,"transition-colors","duration-150","cursor-pointer","relative","group","border-b","border-gray-200",3,"id","odd:bg-gray-50","hover:bg-gray-100","z-10","border-y-2","border-y-indigo-400","-my-px"],[1,"border-b","border-gray-200"],[1,"sticky","bottom-0","z-20","bg-gray-100"],["scope","col",1,"p-2","border-b","border-t","border-l","border-gray-300","font-semibold","text-gray-600","transition-all","duration-150","relative","text-xs",3,"dragover","drop","dragend"],[1,"flex","items-center","gap-2","p-1","rounded-md","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-1",3,"dragstart","click","keydown.enter","keydown.space","title"],["type","checkbox","title","Select all on page",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"checked"],[1,"relative","mx-auto"],[1,"flex","items-center"],[1,"relative"],["type","checkbox","title","Select all on page",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","click","checked"],["title","Bulk actions",1,"p-1","rounded-full","hover:bg-gray-200",3,"click","disabled"],[1,"pi","pi-ellipsis-v"],[3,"menuConfig"],[3,"actionClicked","clickOutside","menuConfig"],[1,"pi","ml-2","text-xs",3,"pi-sort-amount-up-alt","pi-sort-amount-down"],[1,"pi","ml-2","text-xs"],["title","Filter column",1,"p-1","rounded-full","hover:bg-gray-200",3,"click"],[1,"pi","pi-filter"],[3,"column","data","activeFilter"],[3,"apply","close","column","data","activeFilter"],[1,"transition-colors","duration-150","cursor-pointer","relative","group","border-b","border-gray-200",3,"click","contextmenu","id"],[1,"whitespace-nowrap","p-1.5","border-l","border-gray-200","transition-all","duration-150",3,"class","font-bold","!text-sm","!text-base","!text-lg","border-r","sticky","z-10","left","bg-white","group-hover:bg-gray-100","bg-transparent","text-center","text-right","text-left"],[1,"whitespace-nowrap","p-1.5","border-l","border-gray-200","transition-all","duration-150"],[1,"flex","justify-center","items-center","gap-1","relative"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"checked"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","click","checked"],[1,"flex","items-center","gap-1","transition-opacity","opacity-0","group-hover:opacity-100","focus-within:opacity-100"],["title","More actions",1,"p-1.5","rounded-full","transition-opacity","opacity-0","group-hover:opacity-100","focus-within:opacity-100","hover:bg-gray-200",3,"click"],[1,"pi","pi-ellipsis-v","text-xs"],[3,"menuConfig","row","position"],[1,"p-1.5","rounded-full",3,"class","title"],[1,"p-1.5","rounded-full",3,"click","title"],[3,"actionClicked","clickOutside","menuConfig","row","position"],[1,"flex","items-center","gap-2"],[1,"font-semibold","text-gray-800"],[1,"text-gray-500","ml-1"],["alt","Avatar",1,"h-6","w-6","object-cover","flex-shrink-0","rounded-full",3,"src"],[1,"h-6","w-6","bg-gray-200","flex","items-center","justify-center","flex-shrink-0","rounded-full"],[1,"text-xs","font-semibold","text-gray-500"],[1,"font-semibold","text-gray-800",3,"font-bold"],[1,"text-gray-500",3,"font-bold"],[3,"font-bold"],[1,"text-gray-500"],[1,"whitespace-nowrap","p-1.5","border-l","border-gray-200",3,"border-r","class"],[1,"whitespace-nowrap","p-1.5","border-l","border-gray-200"],[1,"p-2","border-t","border-l","border-gray-300","font-semibold","text-gray-700","text-xs",3,"left","border-r","sticky","z-10","bg-gray-100","text-center","text-right","text-left"],[1,"p-2","border-t","border-l","border-gray-300","font-semibold","text-gray-700","text-xs"],[3,"innerHTML"]],template:function(t,i){if(t&1&&(z(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),nt(4,Tw,6,29,"th",3,Ps),G()(),z(6,"tbody",4),nt(7,Yw,4,14,"tr",5,vw),nt(9,Qw,3,0,"tr",6,Qo),G(),fe(11,t2,4,0,"tfoot",7),G()()),t&2){let o;L(4),it(i.columns()),L(3),it(i.data()),L(2),it(i.emptyRows()),L(2),pe((o=((o=i.footerConfig())==null?null:o.enabled)&&i.footerData())?11:-1,o)}},dependencies:[kt,Rs,Bc,xr,Oc,Fs],encapsulation:2,changeDetection:0})};var Vs=class n{template=be.required();data=be.required();sanitizer=ze(Lc);sanitizedHtml=ct(()=>{let e=this.template(),t=this.data();return!e||!t?this.sanitizer.bypassSecurityTrustHtml(""):(e=e.replace(/\{\{(.*?)\}\}/g,(i,o)=>{let s=o.trim(),c=t[s];return c!=null?String(c):""}),this.sanitizer.bypassSecurityTrustHtml(e))});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-dynamic-item"]],inputs:{template:[1,"template"],data:[1,"data"]},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,i){t&1&&at(0,"div",0),t&2&&Ft("innerHTML",i.sanitizedHtml(),Ji)},encapsulation:2,changeDetection:0})};var n2=(n,e)=>e.organization_id,i2=(n,e)=>e.code,r2=(n,e)=>e.action;function o2(n,e){if(n&1){let t=Ne();z(0,"div",3),_e("click",function(){ee(t);let o=I().$implicit,s=I();return te(s.onCardClick(o))})("contextmenu",function(o){ee(t);let s=I().$implicit,c=I();return te(c.onCardContextMenu(o,s))}),Ie(1,"app-dynamic-item",4),G()}if(n&2){let t=I(),i=t.$implicit,o=t.$index,s=I();Ze("cursor-pointer",s.enableMultiSelect())("border-transparent",!s.selectedIds().has(i.organization_id))("border-indigo-500",s.selectedIds().has(i.organization_id))("ring-2",s.selectedIds().has(i.organization_id)||s.keyboardActiveRowIndex()===o)("ring-indigo-500",s.selectedIds().has(i.organization_id)||s.keyboardActiveRowIndex()===o),Je("id","card-item-"+i.organization_id),L(),Je("template",e)("data",i)}}function a2(n,e){if(n&1&&Ie(0,"img",17),n&2){let t=I(2).$implicit,i=I();Ze("h-10",i.density()!=="compact")("w-10",i.density()!=="compact")("h-9",i.density()==="compact")("w-9",i.density()==="compact"),Je("src",t.avatar_url,Fr)}}function s2(n,e){if(n&1&&(z(0,"div",18)(1,"span",19),J(2),G()()),n&2){let t=I(2).$implicit,i=I();Ze("h-10",i.density()!=="compact")("w-10",i.density()!=="compact")("h-9",i.density()==="compact")("w-9",i.density()==="compact"),L(),Ze("text-base",i.density()!=="compact")("text-sm",i.density()==="compact"),L(),Ue((t.contact_person==null?null:t.contact_person[0])||"A")}}function l2(n,e){if(n&1){let t=Ne();z(0,"app-row-menu",23),_e("actionClicked",function(o){ee(t);let s=I(4);return te(s.handleRowMenuAction(o))})("clickOutside",function(){ee(t);let o=I(4);return te(o.closeRowMenu())}),G()}if(n&2){let t=I(3).$implicit,i=I();Je("menuConfig",i.rowMenuConfig())("row",t)("position",i.contextMenuPosition())}}function u2(n,e){if(n&1){let t=Ne();z(0,"div",13)(1,"button",20),_e("click",function(o){ee(t);let s=I(2).$implicit,c=I();return te(c.toggleRowMenu(o,s.organization_id))}),Ie(2,"i",21),G(),fe(3,l2,1,3,"app-row-menu",22),G()}if(n&2){let t=I(2).$implicit,i=I();L(3),pe(i.openMenuRowId()===t.organization_id?3:-1)}}function c2(n,e){if(n&1&&J(0),n&2){let t=I().$implicit,i=I(2).$implicit,o=I();Jt(" ",o.maskString(i[t.code],t.mask)," ")}}function d2(n,e){if(n&1&&J(0),n&2){let t=I().$implicit,i=I(2).$implicit;Jt(" ",i[t.code]||"N/A"," ")}}function f2(n,e){if(n&1&&(z(0,"div",24)(1,"dt",25),J(2),G(),z(3,"dd",26),fe(4,c2,1,1)(5,d2,1,1),G()()),n&2){let t=e.$implicit,i=I(2).$implicit,o=I(),s=o.getFieldValidationState(i,t);qt(o.densityClass()),ri("background-color",s.isValid||s.style==null?null:s.style.bgcolor),Je("title",s.isValid?"":s.style==null?null:s.style.tooltip),L(2),Ue(t.name),L(2),pe(t.mask!=null&&t.mask.enabled?4:5)}}function p2(n,e){if(n&1){let t=Ne();z(0,"button",30),_e("click",function(o){let s=ee(t).$implicit,c=I(4).$implicit,f=I();return o.stopPropagation(),te(f.rowAction.emit({action:s.action,row:c}))}),Ie(1,"i"),G()}if(n&2){let t=e.$implicit;qt(t.color),Je("title",t.label),L(),qt(t.icon)}}function m2(n,e){n&1&&nt(0,p2,2,5,"button",29,r2),n&2&&it(e)}function h2(n,e){if(n&1&&(z(0,"footer",27)(1,"div",28),fe(2,m2,2,0),G()()),n&2){let t,i=I(3);Ze("p-2",i.density()!=="compact")("p-1",i.density()==="compact"),L(2),pe((t=i.rowActions())?2:-1,t)}}function g2(n,e){if(n&1){let t=Ne();z(0,"div",5),_e("contextmenu",function(o){ee(t);let s=I().$implicit,c=I();return te(c.onCardContextMenu(o,s))}),z(1,"header",6)(2,"div",7),fe(3,a2,1,9,"img",8)(4,s2,3,13,"div",9),z(5,"div",10)(6,"h3",11),J(7),G(),z(8,"p",12),J(9),G()()(),fe(10,u2,4,1,"div",13),G(),z(11,"div",14),_e("click",function(){ee(t);let o=I().$implicit,s=I();return te(s.handleCardBodyClick(o))}),z(12,"dl"),nt(13,f2,6,7,"div",15,i2),G()(),fe(15,h2,3,5,"footer",16),G()}if(n&2){let t=I(),i=t.$implicit,o=t.$index,s=I();Ze("border-gray-200",!s.selectedIds().has(i.organization_id))("hover:shadow-xl",!s.selectedIds().has(i.organization_id))("bg-slate-50",s.selectedIds().has(i.organization_id))("border-slate-500",s.selectedIds().has(i.organization_id))("ring-2",s.keyboardActiveRowIndex()===o)("ring-offset-2",s.keyboardActiveRowIndex()===o)("ring-slate-500",s.keyboardActiveRowIndex()===o),Je("id","card-item-"+i.organization_id),L(),Ze("p-4",s.density()!=="compact")("p-3",s.density()==="compact"),L(2),pe(i.avatar_url?3:4),L(3),Ze("text-base",s.density()==="comfortable")("text-sm",s.density()==="cozy"||s.density()==="compact"),L(),Ue(i.contact_person),L(),qt(s.densityClass()),L(),Jt(" ",i.organization_name||"N/A"," "),L(),pe(s.rowMenuConfig()?10:-1),L(),Ze("p-4",s.density()!=="compact")("p-3",s.density()==="compact"),L(),Ze("space-y-3",s.density()==="comfortable")("space-y-2",s.density()!=="comfortable"),L(),it(s.cardRowColumns()),L(2),pe(s.rowActions()&&s.rowActions().length>0?15:-1)}}function v2(n,e){if(n&1&&fe(0,o2,2,13,"div",1)(1,g2,16,38,"div",2),n&2){let t,i=I();pe((t=i.customTemplate())?0:1,t)}}var Uc=class n{columns=be.required();data=be.required();density=be("cozy");densityClass=be("");selectedIds=be(new Set);enableMultiSelect=be(!1);rowMenuConfig=be();rowActions=be();cardViewConfig=be();customTemplate=be(null);keyboardActiveRowIndex=be(null);selectionChange=ht();rowAction=ht();rowClicked=ht();openMenuRowId=we(null);contextMenuPosition=we(null);cardHeaderColumn=ct(()=>this.columns().find(e=>e.cardHeader));cardHeader1Column=ct(()=>this.columns().find(e=>e.cardHeader1));cardRowColumns=ct(()=>this.columns().filter(e=>e.cardRow));imageColumn=ct(()=>this.columns().find(e=>e.columnType==="IMAGE"));gridClasses=ct(()=>{switch(Number(this.cardViewConfig()?.cardsPerRow??4)){case 1:return"grid-cols-1";case 2:return"grid-cols-2 sm:grid-cols-1";case 3:return"grid-cols-3 md:grid-cols-2 sm:grid-cols-1";case 4:return"grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1";case 5:return"grid-cols-5 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1";case 6:return"grid-cols-6 xxl:grid-cols-5 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1";default:return"grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1"}});onCardClick(e){this.rowClicked.emit(e)}onCardContextMenu(e,t){e.preventDefault(),this.openMenuRowId.set(t.organization_id),this.contextMenuPosition.set({x:e.clientX,y:e.clientY})}handleCardBodyClick(e){this.rowClicked.emit(e),this.enableMultiSelect()&&this.toggleSelection(e.organization_id)}toggleSelection(e){if(!this.enableMultiSelect())return;let t=new Set(this.selectedIds());t.has(e)?t.delete(e):t.add(e),this.selectionChange.emit(t)}getFieldValidationState(e,t){return qa(e[t.code],t,t.code)}maskString(e,t){return Ns(e,{visibleStart:t.visibleStart,visibleEnd:t.visibleEnd,maskChar:t.maskChar})}formatPhoneNumber(e){return e?e.replace(/\D/g,""):""}toggleRowMenu(e,t){if(e.stopPropagation(),this.openMenuRowId()===t){this.openMenuRowId.set(null),this.contextMenuPosition.set(null);return}let o=e.currentTarget.getBoundingClientRect(),c=o.right-224;c<0&&(c=o.left);let f=o.bottom+4;this.contextMenuPosition.set({x:c,y:f}),this.openMenuRowId.set(t)}closeRowMenu(){this.openMenuRowId.set(null),this.contextMenuPosition.set(null)}handleRowMenuAction(e){this.rowAction.emit(e),this.closeRowMenu()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-card-view"]],inputs:{columns:[1,"columns"],data:[1,"data"],density:[1,"density"],densityClass:[1,"densityClass"],selectedIds:[1,"selectedIds"],enableMultiSelect:[1,"enableMultiSelect"],rowMenuConfig:[1,"rowMenuConfig"],rowActions:[1,"rowActions"],cardViewConfig:[1,"cardViewConfig"],customTemplate:[1,"customTemplate"],keyboardActiveRowIndex:[1,"keyboardActiveRowIndex"]},outputs:{selectionChange:"selectionChange",rowAction:"rowAction",rowClicked:"rowClicked"},decls:3,vars:8,consts:[[1,"grid"],[1,"border-2","rounded-lg","transition-all","duration-200","h-full",3,"id","cursor-pointer","border-transparent","border-indigo-500","ring-2","ring-indigo-500"],[1,"border","rounded-lg","bg-white","overflow-hidden","transition-all","duration-200","flex","flex-col","relative","group",3,"id","border-gray-200","hover:shadow-xl","bg-slate-50","border-slate-500","ring-2","ring-offset-2","ring-slate-500"],[1,"border-2","rounded-lg","transition-all","duration-200","h-full",3,"click","contextmenu","id"],[3,"template","data"],[1,"border","rounded-lg","bg-white","overflow-hidden","transition-all","duration-200","flex","flex-col","relative","group",3,"contextmenu","id"],[1,"flex","justify-between","items-start","gap-4","border-b","border-gray-200","bg-gray-50"],[1,"flex","items-center","gap-4","min-w-0"],["alt","Avatar",1,"rounded-full","object-cover","flex-shrink-0",3,"src","h-10","w-10","h-9","w-9"],[1,"bg-gray-200","flex","items-center","justify-center","rounded-full","object-cover","flex-shrink-0",3,"h-10","w-10","h-9","w-9"],[1,"min-w-0"],[1,"font-bold","text-gray-900","truncate"],[1,"text-gray-600","truncate"],[1,"relative","flex-shrink-0"],[1,"flex-grow","cursor-pointer",3,"click"],[1,"grid","grid-cols-3","gap-2","p-1","-m-1","rounded-md","transition-colors","duration-150",3,"class","background-color","title"],[1,"border-t","border-gray-200","bg-gray-50","flex","items-center","justify-start",3,"p-2","p-1"],["alt","Avatar",1,"rounded-full","object-cover","flex-shrink-0",3,"src"],[1,"bg-gray-200","flex","items-center","justify-center","rounded-full","object-cover","flex-shrink-0"],[1,"font-semibold","text-gray-500"],["title","More actions",1,"p-1","rounded-full","text-gray-500","hover:text-gray-700","hover:bg-gray-200",3,"click"],[1,"pi","pi-ellipsis-v"],[3,"menuConfig","row","position"],[3,"actionClicked","clickOutside","menuConfig","row","position"],[1,"grid","grid-cols-3","gap-2","p-1","-m-1","rounded-md","transition-colors","duration-150",3,"title"],[1,"text-gray-500","font-medium","col-span-1"],[1,"text-gray-800","truncate","col-span-2"],[1,"border-t","border-gray-200","bg-gray-50","flex","items-center","justify-start"],[1,"flex","items-center","gap-1"],[1,"p-1.5","rounded-full","text-sm","hover:bg-gray-200",3,"class","title"],[1,"p-1.5","rounded-full","text-sm","hover:bg-gray-200",3,"click","title"]],template:function(t,i){t&1&&(z(0,"div",0),nt(1,v2,2,1,null,null,n2),G()),t&2&&(qt(i.gridClasses()),Ze("gap-6",i.density()==="comfortable")("gap-4",i.density()==="cozy")("gap-3",i.density()==="compact"),L(),it(i.data()))},dependencies:[kt,Rs,xr,Vs],encapsulation:2,changeDetection:0})};var y2=(n,e)=>e.organization_id;function _2(n,e){if(n&1&&(z(0,"div",6),Ie(1,"app-dynamic-item",7),G()),n&2){let t=I().$implicit,i=I();Ze("border-transparent",!i.selectedIds().has(t.organization_id))("border-indigo-500",i.selectedIds().has(t.organization_id)),L(),Je("template",e)("data",t)}}function x2(n,e){if(n&1&&Ie(0,"img",18),n&2){let t=I(),i=I(2).$implicit,o=I();Ze("h-10",o.density()!=="compact")("w-10",o.density()!=="compact")("mr-4",o.density()!=="compact")("h-8",o.density()==="compact")("w-8",o.density()==="compact")("mr-3",o.density()==="compact"),Je("src",i[t.code],Fr)}}function C2(n,e){if(n&1&&(z(0,"div",19)(1,"span",20),J(2),G()()),n&2){let t=I(3).$implicit,i=I();Ze("h-10",i.density()!=="compact")("w-10",i.density()!=="compact")("mr-4",i.density()!=="compact")("h-8",i.density()==="compact")("w-8",i.density()==="compact")("mr-3",i.density()==="compact"),L(),Ze("text-sm",i.density()!=="compact")("text-xs",i.density()==="compact"),L(),Ue((t.contact_person==null?null:t.contact_person[0])||"A")}}function b2(n,e){if(n&1&&fe(0,x2,1,13,"img",16)(1,C2,3,17,"div",17),n&2){let t=I(2).$implicit;pe(t[e.code]?0:1)}}function w2(n,e){if(n&1&&(z(0,"p",21),J(1),G()),n&2){let t=I(2).$implicit,i=I();Ze("text-md",i.density()==="comfortable")("text-sm",i.density()==="cozy")("text-xs",i.density()==="compact"||i.density()==="ultra-compact"),L(),Ue(t[e.code])}}function S2(n,e){if(n&1&&J(0),n&2){I();let t=Mi(0),i=I(2).$implicit,o=I();Jt(" ",o.maskString(i[t.code],t.mask)," ")}}function E2(n,e){if(n&1&&J(0),n&2){I();let t=Mi(0),i=I(2).$implicit;Jt(" ",i[t.code]||"N/A"," ")}}function T2(n,e){if(n&1&&(Zo(0),z(1,"p",22),fe(2,S2,1,1)(3,E2,1,1),G()),n&2){let t=I(2).$implicit,i=I(),o=jo(i.rowColumns()[0]),s=i.getFieldValidationState(t,o);L(),ri("background-color",s.isValid||s.style==null?null:s.style.bgcolor),Je("title",s.isValid?"":s.style==null?null:s.style.tooltip),L(),pe(o.mask!=null&&o.mask.enabled?2:3)}}function A2(n,e){if(n&1&&J(0),n&2){I();let t=Mi(0),i=I(2).$implicit,o=I();Jt(" ",o.maskString(i[t.code],t.mask)," ")}}function D2(n,e){if(n&1&&J(0),n&2){I();let t=Mi(0),i=I(2).$implicit;Jt(" ",i[t.code]||"N/A"," ")}}function k2(n,e){if(n&1&&(Zo(0),z(1,"span",23),fe(2,A2,1,1)(3,D2,1,1),G()),n&2){let t=I(2).$implicit,i=I(),o=jo(i.rowColumns()[1]),s=i.getFieldValidationState(t,o);L(),qt(i.densityClass()),ri("background-color",s.isValid||s.style==null?null:s.style.bgcolor),Je("title",s.isValid?"":s.style==null?null:s.style.tooltip),L(),pe(o.mask!=null&&o.mask.enabled?2:3)}}function I2(n,e){if(n&1){let t=Ne();z(0,"div",8),fe(1,b2,2,1),z(2,"div",9),fe(3,w2,2,7,"p",10),fe(4,T2,4,5,"p",11),G(),z(5,"div",12),fe(6,k2,4,7,"span",13),G(),z(7,"button",14),_e("click",function(o){return ee(t),te(o.stopPropagation())}),Ie(8,"i",15),G()()}if(n&2){let t,i,o=I(2);Ze("p-4",o.density()==="comfortable")("p-3",o.density()==="cozy")("p-2",o.density()==="compact")("p-1",o.density()==="ultra-compact"),L(),pe((t=o.density()!=="ultra-compact"&&o.imageColumn())?1:-1,t),L(),qt(o.densityClass()),L(),pe((i=o.headerColumn())?3:-1,i),L(),pe(o.rowColumns().length>0?4:-1),L(),Ze("ml-4",o.density()!=="compact")("ml-2",o.density()==="compact"),L(),pe(o.rowColumns().length>1?6:-1),L(),Ze("ml-4",o.density()!=="compact")("ml-2",o.density()==="compact")}}function M2(n,e){if(n&1){let t=Ne();z(0,"li",3),_e("click",function(){let o=ee(t).$implicit,s=I();return te(s.onItemClick(o))}),fe(1,_2,2,6,"div",4)(2,I2,9,22,"div",5),G()}if(n&2){let t,i=e.$implicit,o=e.$index,s=I();Ze("cursor-pointer",!0)("hover:bg-gray-200/50",!s.selectedIds().has(i.organization_id))("bg-slate-50",s.selectedIds().has(i.organization_id))("ring-2",s.keyboardActiveRowIndex()===o)("ring-offset-2",s.keyboardActiveRowIndex()===o)("ring-slate-500",s.keyboardActiveRowIndex()===o),Je("id","list-item-"+i.organization_id),L(),pe((t=s.customTemplate())?1:2,t)}}var zc=class n{columns=be.required();data=be.required();density=be("cozy");densityClass=be("");selectedIds=be(new Set);enableMultiSelect=be(!1);customTemplate=be(null);keyboardActiveRowIndex=be(null);selectionChange=ht();rowClicked=ht();headerColumn=ct(()=>this.columns().find(e=>e.cardHeader));rowColumns=ct(()=>this.columns().filter(e=>e.listRow));imageColumn=ct(()=>this.columns().find(e=>e.columnType==="IMAGE"));onItemClick(e){this.rowClicked.emit(e),this.enableMultiSelect()&&this.toggleSelection(e.organization_id)}toggleSelection(e){if(!this.enableMultiSelect())return;let t=new Set(this.selectedIds());t.has(e)?t.delete(e):t.add(e),this.selectionChange.emit(t)}getFieldValidationState(e,t){return qa(e[t.code],t,t.code)}maskString(e,t){return Ns(e,{visibleStart:t.visibleStart,visibleEnd:t.visibleEnd,maskChar:t.maskChar})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-list-view"]],inputs:{columns:[1,"columns"],data:[1,"data"],density:[1,"density"],densityClass:[1,"densityClass"],selectedIds:[1,"selectedIds"],enableMultiSelect:[1,"enableMultiSelect"],customTemplate:[1,"customTemplate"],keyboardActiveRowIndex:[1,"keyboardActiveRowIndex"]},outputs:{selectionChange:"selectionChange",rowClicked:"rowClicked"},decls:4,vars:0,consts:[[1,"border","border-gray-200","rounded-lg"],[1,"divide-y","divide-gray-200"],[1,"transition-colors","duration-150","relative",3,"id","cursor-pointer","hover:bg-gray-200/50","bg-slate-50","ring-2","ring-offset-2","ring-slate-500"],[1,"transition-colors","duration-150","relative",3,"click","id"],[1,"border-2","rounded-lg",3,"border-transparent","border-indigo-500"],[1,"flex","items-center","justify-between",3,"p-4","p-3","p-2","p-1"],[1,"border-2","rounded-lg"],[3,"template","data"],[1,"flex","items-center","justify-between"],[1,"flex-1","min-w-0"],[1,"font-semibold","text-indigo-600","truncate",3,"text-md","text-sm","text-xs"],[1,"text-gray-500","truncate","p-1","-ml-1","rounded-md",3,"background-color","title"],[1,"inline-flex","items-center","text-base","font-semibold","text-gray-900"],[1,"text-gray-600","p-1","rounded-md",3,"class","background-color","title"],["title","View Details",1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"pi","pi-chevron-right"],["alt","Avatar",1,"rounded-full","object-cover","flex-shrink-0",3,"src","h-10","w-10","mr-4","h-8","w-8","mr-3"],[1,"bg-gray-200","flex","items-center","justify-center","rounded-full","object-cover","flex-shrink-0",3,"h-10","w-10","mr-4","h-8","w-8","mr-3"],["alt","Avatar",1,"rounded-full","object-cover","flex-shrink-0",3,"src"],[1,"bg-gray-200","flex","items-center","justify-center","rounded-full","object-cover","flex-shrink-0"],[1,"font-semibold","text-gray-500"],[1,"font-semibold","text-indigo-600","truncate"],[1,"text-gray-500","truncate","p-1","-ml-1","rounded-md",3,"title"],[1,"text-gray-600","p-1","rounded-md",3,"title"]],template:function(t,i){t&1&&(z(0,"div",0)(1,"ul",1),nt(2,M2,3,14,"li",2,y2),G()()),t&2&&(L(2),it(i.data()))},dependencies:[kt,Vs],encapsulation:2,changeDetection:0})};function Wa(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Gp(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Gc(n){let e,t,i;n.length!==2?(e=Wa,t=(f,m)=>Wa(n(f),m),i=(f,m)=>n(f)-m):(e=n===Wa||n===Gp?n:F2,t=n,i=n);function o(f,m,v=0,g=f.length){if(v<g){if(e(m,m)!==0)return g;do{let b=v+g>>>1;t(f[b],m)<0?v=b+1:g=b}while(v<g)}return v}function s(f,m,v=0,g=f.length){if(v<g){if(e(m,m)!==0)return g;do{let b=v+g>>>1;t(f[b],m)<=0?v=b+1:g=b}while(v<g)}return v}function c(f,m,v=0,g=f.length){let b=o(f,m,v,g-1);return b>v&&i(f[b-1],m)>-i(f[b],m)?b-1:b}return{left:o,center:c,right:s}}function F2(){return 0}function qp(n){return n===null?NaN:+n}var bv=Gc(Wa),wv=bv.right,N2=bv.left,R2=Gc(qp).center,Wp=wv;var Ls=class extends Map{constructor(e,t=L2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(let[i,o]of e)this.set(i,o)}get(e){return super.get(Sv(this,e))}has(e){return super.has(Sv(this,e))}set(e,t){return super.set(P2(this,e),t)}delete(e){return super.delete(V2(this,e))}};function Sv({_intern:n,_key:e},t){let i=e(t);return n.has(i)?n.get(i):t}function P2({_intern:n,_key:e},t){let i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function V2({_intern:n,_key:e},t){let i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function L2(n){return n!==null&&typeof n=="object"?n.valueOf():n}var B2=Math.sqrt(50),O2=Math.sqrt(10),H2=Math.sqrt(2);function qc(n,e,t){let i=(e-n)/Math.max(0,t),o=Math.floor(Math.log10(i)),s=i/Math.pow(10,o),c=s>=B2?10:s>=O2?5:s>=H2?2:1,f,m,v;return o<0?(v=Math.pow(10,-o)/c,f=Math.round(n*v),m=Math.round(e*v),f/v<n&&++f,m/v>e&&--m,v=-v):(v=Math.pow(10,o)*c,f=Math.round(n/v),m=Math.round(e/v),f*v<n&&++f,m*v>e&&--m),m<f&&.5<=t&&t<2?qc(n,e,t*2):[f,m,v]}function Wc(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];let i=e<n,[o,s,c]=i?qc(e,n,t):qc(n,e,t);if(!(s>=o))return[];let f=s-o+1,m=new Array(f);if(i)if(c<0)for(let v=0;v<f;++v)m[v]=(s-v)/-c;else for(let v=0;v<f;++v)m[v]=(s-v)*c;else if(c<0)for(let v=0;v<f;++v)m[v]=(o+v)/-c;else for(let v=0;v<f;++v)m[v]=(o+v)*c;return m}function au(n,e,t){return e=+e,n=+n,t=+t,qc(n,e,t)[2]}function $p(n,e,t){e=+e,n=+n,t=+t;let i=e<n,o=i?au(e,n,t):au(n,e,t);return(i?-1:1)*(o<0?1/-o:o)}function $c(n,e){let t;if(e===void 0)for(let i of n)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let o of n)(o=e(o,++i,n))!=null&&(t<o||t===void 0&&o>=o)&&(t=o)}return t}function Kc(n,e,t){n=+n,e=+e,t=(o=arguments.length)<2?(e=n,n=0,1):o<3?1:+t;for(var i=-1,o=Math.max(0,Math.ceil((e-n)/t))|0,s=new Array(o);++i<o;)s[i]=n+i*t;return s}function Ev(n){return n}var Kp=1,Jp=2,Yp=3,su=4,Tv=1e-6;function U2(n){return"translate("+n+",0)"}function z2(n){return"translate(0,"+n+")"}function G2(n){return e=>+n(e)}function q2(n,e){return e=Math.max(0,n.bandwidth()-e*2)/2,n.round()&&(e=Math.round(e)),t=>+n(t)+e}function W2(){return!this.__axis}function Av(n,e){var t=[],i=null,o=null,s=6,c=6,f=3,m=typeof window<"u"&&window.devicePixelRatio>1?0:.5,v=n===Kp||n===su?-1:1,g=n===su||n===Jp?"x":"y",b=n===Kp||n===Yp?U2:z2;function C(A){var F=i??(e.ticks?e.ticks.apply(e,t):e.domain()),R=o??(e.tickFormat?e.tickFormat.apply(e,t):Ev),B=Math.max(s,0)+f,N=e.range(),O=+N[0]+m,q=+N[N.length-1]+m,X=(e.bandwidth?q2:G2)(e.copy(),m),j=A.selection?A.selection():A,ie=j.selectAll(".domain").data([null]),he=j.selectAll(".tick").data(F,e).order(),ve=he.exit(),me=he.enter().append("g").attr("class","tick"),Te=he.select("line"),$=he.select("text");ie=ie.merge(ie.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),he=he.merge(me),Te=Te.merge(me.append("line").attr("stroke","currentColor").attr(g+"2",v*s)),$=$.merge(me.append("text").attr("fill","currentColor").attr(g,v*B).attr("dy",n===Kp?"0em":n===Yp?"0.71em":"0.32em")),A!==j&&(ie=ie.transition(A),he=he.transition(A),Te=Te.transition(A),$=$.transition(A),ve=ve.transition(A).attr("opacity",Tv).attr("transform",function(le){return isFinite(le=X(le))?b(le+m):this.getAttribute("transform")}),me.attr("opacity",Tv).attr("transform",function(le){var H=this.parentNode.__axis;return b((H&&isFinite(H=H(le))?H:X(le))+m)})),ve.remove(),ie.attr("d",n===su||n===Jp?c?"M"+v*c+","+O+"H"+m+"V"+q+"H"+v*c:"M"+m+","+O+"V"+q:c?"M"+O+","+v*c+"V"+m+"H"+q+"V"+v*c:"M"+O+","+m+"H"+q),he.attr("opacity",1).attr("transform",function(le){return b(X(le)+m)}),Te.attr(g+"2",v*s),$.attr(g,v*B).text(R),j.filter(W2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",n===Jp?"start":n===su?"end":"middle"),j.each(function(){this.__axis=X})}return C.scale=function(A){return arguments.length?(e=A,C):e},C.ticks=function(){return t=Array.from(arguments),C},C.tickArguments=function(A){return arguments.length?(t=A==null?[]:Array.from(A),C):t.slice()},C.tickValues=function(A){return arguments.length?(i=A==null?null:Array.from(A),C):i&&i.slice()},C.tickFormat=function(A){return arguments.length?(o=A,C):o},C.tickSize=function(A){return arguments.length?(s=c=+A,C):s},C.tickSizeInner=function(A){return arguments.length?(s=+A,C):s},C.tickSizeOuter=function(A){return arguments.length?(c=+A,C):c},C.tickPadding=function(A){return arguments.length?(f=+A,C):f},C.offset=function(A){return arguments.length?(m=+A,C):m},C}function Xp(n){return Av(Yp,n)}function Qp(n){return Av(su,n)}var $2={value:()=>{}};function kv(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new Jc(t)}function Jc(n){this._=n}function K2(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",o=t.indexOf(".");if(o>=0&&(i=t.slice(o+1),t=t.slice(0,o)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}Jc.prototype=kv.prototype={constructor:Jc,on:function(n,e){var t=this._,i=K2(n+"",t),o,s=-1,c=i.length;if(arguments.length<2){for(;++s<c;)if((o=(n=i[s]).type)&&(o=J2(t[o],n.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<c;)if(o=(n=i[s]).type)t[o]=Dv(t[o],n.name,e);else if(e==null)for(o in t)t[o]=Dv(t[o],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Jc(n)},call:function(n,e){if((o=arguments.length-2)>0)for(var t=new Array(o),i=0,o,s;i<o;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,o=s.length;i<o;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],o=0,s=i.length;o<s;++o)i[o].value.apply(e,t)}};function J2(n,e){for(var t=0,i=n.length,o;t<i;++t)if((o=n[t]).name===e)return o.value}function Dv(n,e,t){for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n[i]=$2,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var Zp=kv;var Yc="http://www.w3.org/1999/xhtml",jp={svg:"http://www.w3.org/2000/svg",xhtml:Yc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yo(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),jp.hasOwnProperty(e)?{space:jp[e],local:n}:n}function Y2(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Yc&&e.documentElement.namespaceURI===Yc?e.createElement(n):e.createElementNS(t,n)}}function X2(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Xc(n){var e=yo(n);return(e.local?X2:Y2)(e)}function Q2(){}function $a(n){return n==null?Q2:function(){return this.querySelector(n)}}function Iv(n){typeof n!="function"&&(n=$a(n));for(var e=this._groups,t=e.length,i=new Array(t),o=0;o<t;++o)for(var s=e[o],c=s.length,f=i[o]=new Array(c),m,v,g=0;g<c;++g)(m=s[g])&&(v=n.call(m,m.__data__,g,s))&&("__data__"in m&&(v.__data__=m.__data__),f[g]=v);return new Rn(i,this._parents)}function em(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Z2(){return[]}function lu(n){return n==null?Z2:function(){return this.querySelectorAll(n)}}function j2(n){return function(){return em(n.apply(this,arguments))}}function Mv(n){typeof n=="function"?n=j2(n):n=lu(n);for(var e=this._groups,t=e.length,i=[],o=[],s=0;s<t;++s)for(var c=e[s],f=c.length,m,v=0;v<f;++v)(m=c[v])&&(i.push(n.call(m,m.__data__,v,c)),o.push(m));return new Rn(i,o)}function uu(n){return function(){return this.matches(n)}}function Qc(n){return function(e){return e.matches(n)}}var eS=Array.prototype.find;function tS(n){return function(){return eS.call(this.children,n)}}function nS(){return this.firstElementChild}function Fv(n){return this.select(n==null?nS:tS(typeof n=="function"?n:Qc(n)))}var iS=Array.prototype.filter;function rS(){return Array.from(this.children)}function oS(n){return function(){return iS.call(this.children,n)}}function Nv(n){return this.selectAll(n==null?rS:oS(typeof n=="function"?n:Qc(n)))}function Rv(n){typeof n!="function"&&(n=uu(n));for(var e=this._groups,t=e.length,i=new Array(t),o=0;o<t;++o)for(var s=e[o],c=s.length,f=i[o]=[],m,v=0;v<c;++v)(m=s[v])&&n.call(m,m.__data__,v,s)&&f.push(m);return new Rn(i,this._parents)}function Zc(n){return new Array(n.length)}function Pv(){return new Rn(this._enter||this._groups.map(Zc),this._parents)}function cu(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}cu.prototype={constructor:cu,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Vv(n){return function(){return n}}function aS(n,e,t,i,o,s){for(var c=0,f,m=e.length,v=s.length;c<v;++c)(f=e[c])?(f.__data__=s[c],i[c]=f):t[c]=new cu(n,s[c]);for(;c<m;++c)(f=e[c])&&(o[c]=f)}function sS(n,e,t,i,o,s,c){var f,m,v=new Map,g=e.length,b=s.length,C=new Array(g),A;for(f=0;f<g;++f)(m=e[f])&&(C[f]=A=c.call(m,m.__data__,f,e)+"",v.has(A)?o[f]=m:v.set(A,m));for(f=0;f<b;++f)A=c.call(n,s[f],f,s)+"",(m=v.get(A))?(i[f]=m,m.__data__=s[f],v.delete(A)):t[f]=new cu(n,s[f]);for(f=0;f<g;++f)(m=e[f])&&v.get(C[f])===m&&(o[f]=m)}function lS(n){return n.__data__}function Lv(n,e){if(!arguments.length)return Array.from(this,lS);var t=e?sS:aS,i=this._parents,o=this._groups;typeof n!="function"&&(n=Vv(n));for(var s=o.length,c=new Array(s),f=new Array(s),m=new Array(s),v=0;v<s;++v){var g=i[v],b=o[v],C=b.length,A=uS(n.call(g,g&&g.__data__,v,i)),F=A.length,R=f[v]=new Array(F),B=c[v]=new Array(F),N=m[v]=new Array(C);t(g,b,R,B,N,A,e);for(var O=0,q=0,X,j;O<F;++O)if(X=R[O]){for(O>=q&&(q=O+1);!(j=B[q])&&++q<F;);X._next=j||null}}return c=new Rn(c,i),c._enter=f,c._exit=m,c}function uS(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Bv(){return new Rn(this._exit||this._groups.map(Zc),this._parents)}function Ov(n,e,t){var i=this.enter(),o=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(o=e(o),o&&(o=o.selection())),t==null?s.remove():t(s),i&&o?i.merge(o).order():o}function Hv(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,o=t.length,s=i.length,c=Math.min(o,s),f=new Array(o),m=0;m<c;++m)for(var v=t[m],g=i[m],b=v.length,C=f[m]=new Array(b),A,F=0;F<b;++F)(A=v[F]||g[F])&&(C[F]=A);for(;m<o;++m)f[m]=t[m];return new Rn(f,this._parents)}function Uv(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],o=i.length-1,s=i[o],c;--o>=0;)(c=i[o])&&(s&&c.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(c,s),s=c);return this}function zv(n){n||(n=cS);function e(b,C){return b&&C?n(b.__data__,C.__data__):!b-!C}for(var t=this._groups,i=t.length,o=new Array(i),s=0;s<i;++s){for(var c=t[s],f=c.length,m=o[s]=new Array(f),v,g=0;g<f;++g)(v=c[g])&&(m[g]=v);m.sort(e)}return new Rn(o,this._parents).order()}function cS(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Gv(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function qv(){return Array.from(this)}function Wv(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],o=0,s=i.length;o<s;++o){var c=i[o];if(c)return c}return null}function $v(){let n=0;for(let e of this)++n;return n}function Kv(){return!this.node()}function Jv(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var o=e[t],s=0,c=o.length,f;s<c;++s)(f=o[s])&&n.call(f,f.__data__,s,o);return this}function dS(n){return function(){this.removeAttribute(n)}}function fS(n){return function(){this.removeAttributeNS(n.space,n.local)}}function pS(n,e){return function(){this.setAttribute(n,e)}}function mS(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function hS(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function gS(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function Yv(n,e){var t=yo(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?fS:dS:typeof e=="function"?t.local?gS:hS:t.local?mS:pS)(t,e))}function jc(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function vS(n){return function(){this.style.removeProperty(n)}}function yS(n,e,t){return function(){this.style.setProperty(n,e,t)}}function _S(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function Xv(n,e,t){return arguments.length>1?this.each((e==null?vS:typeof e=="function"?_S:yS)(n,e,t??"")):na(this.node(),n)}function na(n,e){return n.style.getPropertyValue(e)||jc(n).getComputedStyle(n,null).getPropertyValue(e)}function xS(n){return function(){delete this[n]}}function CS(n,e){return function(){this[n]=e}}function bS(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function Qv(n,e){return arguments.length>1?this.each((e==null?xS:typeof e=="function"?bS:CS)(n,e)):this.node()[n]}function Zv(n){return n.trim().split(/^|\s+/)}function tm(n){return n.classList||new jv(n)}function jv(n){this._node=n,this._names=Zv(n.getAttribute("class")||"")}jv.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function ey(n,e){for(var t=tm(n),i=-1,o=e.length;++i<o;)t.add(e[i])}function ty(n,e){for(var t=tm(n),i=-1,o=e.length;++i<o;)t.remove(e[i])}function wS(n){return function(){ey(this,n)}}function SS(n){return function(){ty(this,n)}}function ES(n,e){return function(){(e.apply(this,arguments)?ey:ty)(this,n)}}function ny(n,e){var t=Zv(n+"");if(arguments.length<2){for(var i=tm(this.node()),o=-1,s=t.length;++o<s;)if(!i.contains(t[o]))return!1;return!0}return this.each((typeof e=="function"?ES:e?wS:SS)(t,e))}function TS(){this.textContent=""}function AS(n){return function(){this.textContent=n}}function DS(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function iy(n){return arguments.length?this.each(n==null?TS:(typeof n=="function"?DS:AS)(n)):this.node().textContent}function kS(){this.innerHTML=""}function IS(n){return function(){this.innerHTML=n}}function MS(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function ry(n){return arguments.length?this.each(n==null?kS:(typeof n=="function"?MS:IS)(n)):this.node().innerHTML}function FS(){this.nextSibling&&this.parentNode.appendChild(this)}function oy(){return this.each(FS)}function NS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ay(){return this.each(NS)}function sy(n){var e=typeof n=="function"?n:Xc(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function RS(){return null}function ly(n,e){var t=typeof n=="function"?n:Xc(n),i=e==null?RS:typeof e=="function"?e:$a(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function PS(){var n=this.parentNode;n&&n.removeChild(this)}function uy(){return this.each(PS)}function VS(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function LS(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function cy(n){return this.select(n?LS:VS)}function dy(n){return arguments.length?this.property("__data__",n):this.node().__data__}function BS(n){return function(e){n.call(this,e,this.__data__)}}function OS(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function HS(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,o=e.length,s;t<o;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function US(n,e,t){return function(){var i=this.__on,o,s=BS(e);if(i){for(var c=0,f=i.length;c<f;++c)if((o=i[c]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=t),o.value=e;return}}this.addEventListener(n.type,s,t),o={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(o):this.__on=[o]}}function fy(n,e,t){var i=OS(n+""),o,s=i.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var m=0,v=f.length,g;m<v;++m)for(o=0,g=f[m];o<s;++o)if((c=i[o]).type===g.type&&c.name===g.name)return g.value}return}for(f=e?US:HS,o=0;o<s;++o)this.each(f(i[o],e,t));return this}function py(n,e,t){var i=jc(n),o=i.CustomEvent;typeof o=="function"?o=new o(e,t):(o=i.document.createEvent("Event"),t?(o.initEvent(e,t.bubbles,t.cancelable),o.detail=t.detail):o.initEvent(e,!1,!1)),n.dispatchEvent(o)}function zS(n,e){return function(){return py(this,n,e)}}function GS(n,e){return function(){return py(this,n,e.apply(this,arguments))}}function my(n,e){return this.each((typeof e=="function"?GS:zS)(n,e))}function*hy(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],o=0,s=i.length,c;o<s;++o)(c=i[o])&&(yield c)}var nm=[null];function Rn(n,e){this._groups=n,this._parents=e}function gy(){return new Rn([[document.documentElement]],nm)}function qS(){return this}Rn.prototype=gy.prototype={constructor:Rn,select:Iv,selectAll:Mv,selectChild:Fv,selectChildren:Nv,filter:Rv,data:Lv,enter:Pv,exit:Bv,join:Ov,merge:Hv,selection:qS,order:Uv,sort:zv,call:Gv,nodes:qv,node:Wv,size:$v,empty:Kv,each:Jv,attr:Yv,style:Xv,property:Qv,classed:ny,text:iy,html:ry,raise:oy,lower:ay,append:sy,insert:ly,remove:uy,clone:cy,datum:dy,on:fy,dispatch:my,[Symbol.iterator]:hy};var _o=gy;function ed(n){return typeof n=="string"?new Rn([[document.querySelector(n)]],[document.documentElement]):new Rn([[n]],nm)}function td(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function im(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function pu(){}var du=.7,rd=1/du,Bs="\\s*([+-]?\\d+)\\s*",fu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",io="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",WS=/^#([0-9a-f]{3,8})$/,$S=new RegExp(`^rgb\\(${Bs},${Bs},${Bs}\\)$`),KS=new RegExp(`^rgb\\(${io},${io},${io}\\)$`),JS=new RegExp(`^rgba\\(${Bs},${Bs},${Bs},${fu}\\)$`),YS=new RegExp(`^rgba\\(${io},${io},${io},${fu}\\)$`),XS=new RegExp(`^hsl\\(${fu},${io},${io}\\)$`),QS=new RegExp(`^hsla\\(${fu},${io},${io},${fu}\\)$`),vy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};td(pu,Rr,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:yy,formatHex:yy,formatHex8:ZS,formatHsl:jS,formatRgb:_y,toString:_y});function yy(){return this.rgb().formatHex()}function ZS(){return this.rgb().formatHex8()}function jS(){return Ey(this).formatHsl()}function _y(){return this.rgb().formatRgb()}function Rr(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=WS.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?xy(e):t===3?new Yi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?nd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?nd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$S.exec(n))?new Yi(e[1],e[2],e[3],1):(e=KS.exec(n))?new Yi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=JS.exec(n))?nd(e[1],e[2],e[3],e[4]):(e=YS.exec(n))?nd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=XS.exec(n))?wy(e[1],e[2]/100,e[3]/100,1):(e=QS.exec(n))?wy(e[1],e[2]/100,e[3]/100,e[4]):vy.hasOwnProperty(n)?xy(vy[n]):n==="transparent"?new Yi(NaN,NaN,NaN,0):null}function xy(n){return new Yi(n>>16&255,n>>8&255,n&255,1)}function nd(n,e,t,i){return i<=0&&(n=e=t=NaN),new Yi(n,e,t,i)}function eE(n){return n instanceof pu||(n=Rr(n)),n?(n=n.rgb(),new Yi(n.r,n.g,n.b,n.opacity)):new Yi}function Os(n,e,t,i){return arguments.length===1?eE(n):new Yi(n,e,t,i??1)}function Yi(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}td(Yi,Os,im(pu,{brighter(n){return n=n==null?rd:Math.pow(rd,n),new Yi(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?du:Math.pow(du,n),new Yi(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Yi(Ja(this.r),Ja(this.g),Ja(this.b),od(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cy,formatHex:Cy,formatHex8:tE,formatRgb:by,toString:by}));function Cy(){return`#${Ka(this.r)}${Ka(this.g)}${Ka(this.b)}`}function tE(){return`#${Ka(this.r)}${Ka(this.g)}${Ka(this.b)}${Ka((isNaN(this.opacity)?1:this.opacity)*255)}`}function by(){let n=od(this.opacity);return`${n===1?"rgb(":"rgba("}${Ja(this.r)}, ${Ja(this.g)}, ${Ja(this.b)}${n===1?")":`, ${n})`}`}function od(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ja(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ka(n){return n=Ja(n),(n<16?"0":"")+n.toString(16)}function wy(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Nr(n,e,t,i)}function Ey(n){if(n instanceof Nr)return new Nr(n.h,n.s,n.l,n.opacity);if(n instanceof pu||(n=Rr(n)),!n)return new Nr;if(n instanceof Nr)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,o=Math.min(e,t,i),s=Math.max(e,t,i),c=NaN,f=s-o,m=(s+o)/2;return f?(e===s?c=(t-i)/f+(t<i)*6:t===s?c=(i-e)/f+2:c=(e-t)/f+4,f/=m<.5?s+o:2-s-o,c*=60):f=m>0&&m<1?0:c,new Nr(c,f,m,n.opacity)}function Ty(n,e,t,i){return arguments.length===1?Ey(n):new Nr(n,e,t,i??1)}function Nr(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}td(Nr,Ty,im(pu,{brighter(n){return n=n==null?rd:Math.pow(rd,n),new Nr(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?du:Math.pow(du,n),new Nr(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,o=2*t-i;return new Yi(rm(n>=240?n-240:n+120,o,i),rm(n,o,i),rm(n<120?n+240:n-120,o,i),this.opacity)},clamp(){return new Nr(Sy(this.h),id(this.s),id(this.l),od(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let n=od(this.opacity);return`${n===1?"hsl(":"hsla("}${Sy(this.h)}, ${id(this.s)*100}%, ${id(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Sy(n){return n=(n||0)%360,n<0?n+360:n}function id(n){return Math.max(0,Math.min(1,n||0))}function rm(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}function om(n,e,t,i,o){var s=n*n,c=s*n;return((1-3*n+3*s-c)*e+(4-6*s+3*c)*t+(1+3*n+3*s-3*c)*i+c*o)/6}function Ay(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),o=n[i],s=n[i+1],c=i>0?n[i-1]:2*o-s,f=i<e-1?n[i+2]:2*s-o;return om((t-i/e)*e,c,o,s,f)}}function Dy(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e),o=n[(i+e-1)%e],s=n[i%e],c=n[(i+1)%e],f=n[(i+2)%e];return om((t-i/e)*e,o,s,c,f)}}var mu=n=>()=>n;function nE(n,e){return function(t){return n+t*e}}function iE(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function ky(n){return(n=+n)==1?ad:function(e,t){return t-e?iE(e,t,n):mu(isNaN(e)?t:e)}}function ad(n,e){var t=e-n;return t?nE(n,t):mu(isNaN(n)?e:n)}var Ya=(function n(e){var t=ky(e);function i(o,s){var c=t((o=Os(o)).r,(s=Os(s)).r),f=t(o.g,s.g),m=t(o.b,s.b),v=ad(o.opacity,s.opacity);return function(g){return o.r=c(g),o.g=f(g),o.b=m(g),o.opacity=v(g),o+""}}return i.gamma=n,i})(1);function Iy(n){return function(e){var t=e.length,i=new Array(t),o=new Array(t),s=new Array(t),c,f;for(c=0;c<t;++c)f=Os(e[c]),i[c]=f.r||0,o[c]=f.g||0,s[c]=f.b||0;return i=n(i),o=n(o),s=n(s),f.opacity=1,function(m){return f.r=i(m),f.g=o(m),f.b=s(m),f+""}}}var rE=Iy(Ay),oE=Iy(Dy);function My(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,i=e.slice(),o;return function(s){for(o=0;o<t;++o)i[o]=n[o]*(1-s)+e[o]*s;return i}}function Fy(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Ny(n,e){var t=e?e.length:0,i=n?Math.min(t,n.length):0,o=new Array(i),s=new Array(t),c;for(c=0;c<i;++c)o[c]=Xa(n[c],e[c]);for(;c<t;++c)s[c]=e[c];return function(f){for(c=0;c<i;++c)s[c]=o[c](f);return s}}function Ry(n,e){var t=new Date;return n=+n,e=+e,function(i){return t.setTime(n*(1-i)+e*i),t}}function gi(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Py(n,e){var t={},i={},o;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in n?t[o]=Xa(n[o],e[o]):i[o]=e[o];return function(s){for(o in t)i[o]=t[o](s);return i}}var sm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,am=new RegExp(sm.source,"g");function aE(n){return function(){return n}}function sE(n){return function(e){return n(e)+""}}function hu(n,e){var t=sm.lastIndex=am.lastIndex=0,i,o,s,c=-1,f=[],m=[];for(n=n+"",e=e+"";(i=sm.exec(n))&&(o=am.exec(e));)(s=o.index)>t&&(s=e.slice(t,s),f[c]?f[c]+=s:f[++c]=s),(i=i[0])===(o=o[0])?f[c]?f[c]+=o:f[++c]=o:(f[++c]=null,m.push({i:c,x:gi(i,o)})),t=am.lastIndex;return t<e.length&&(s=e.slice(t),f[c]?f[c]+=s:f[++c]=s),f.length<2?m[0]?sE(m[0].x):aE(e):(e=m.length,function(v){for(var g=0,b;g<e;++g)f[(b=m[g]).i]=b.x(v);return f.join("")})}function Xa(n,e){var t=typeof e,i;return e==null||t==="boolean"?mu(e):(t==="number"?gi:t==="string"?(i=Rr(e))?(e=i,Ya):hu:e instanceof Rr?Ya:e instanceof Date?Ry:Fy(e)?My:Array.isArray(e)?Ny:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Py:gi)(n,e)}function lm(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}var Vy=180/Math.PI,sd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function um(n,e,t,i,o,s){var c,f,m;return(c=Math.sqrt(n*n+e*e))&&(n/=c,e/=c),(m=n*t+e*i)&&(t-=n*m,i-=e*m),(f=Math.sqrt(t*t+i*i))&&(t/=f,i/=f,m/=f),n*i<e*t&&(n=-n,e=-e,m=-m,c=-c),{translateX:o,translateY:s,rotate:Math.atan2(e,n)*Vy,skewX:Math.atan(m)*Vy,scaleX:c,scaleY:f}}var ld;function Ly(n){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?sd:um(e.a,e.b,e.c,e.d,e.e,e.f)}function By(n){return n==null?sd:(ld||(ld=document.createElementNS("http://www.w3.org/2000/svg","g")),ld.setAttribute("transform",n),(n=ld.transform.baseVal.consolidate())?(n=n.matrix,um(n.a,n.b,n.c,n.d,n.e,n.f)):sd)}function Oy(n,e,t,i){function o(v){return v.length?v.pop()+" ":""}function s(v,g,b,C,A,F){if(v!==b||g!==C){var R=A.push("translate(",null,e,null,t);F.push({i:R-4,x:gi(v,b)},{i:R-2,x:gi(g,C)})}else(b||C)&&A.push("translate("+b+e+C+t)}function c(v,g,b,C){v!==g?(v-g>180?g+=360:g-v>180&&(v+=360),C.push({i:b.push(o(b)+"rotate(",null,i)-2,x:gi(v,g)})):g&&b.push(o(b)+"rotate("+g+i)}function f(v,g,b,C){v!==g?C.push({i:b.push(o(b)+"skewX(",null,i)-2,x:gi(v,g)}):g&&b.push(o(b)+"skewX("+g+i)}function m(v,g,b,C,A,F){if(v!==b||g!==C){var R=A.push(o(A)+"scale(",null,",",null,")");F.push({i:R-4,x:gi(v,b)},{i:R-2,x:gi(g,C)})}else(b!==1||C!==1)&&A.push(o(A)+"scale("+b+","+C+")")}return function(v,g){var b=[],C=[];return v=n(v),g=n(g),s(v.translateX,v.translateY,g.translateX,g.translateY,b,C),c(v.rotate,g.rotate,b,C),f(v.skewX,g.skewX,b,C),m(v.scaleX,v.scaleY,g.scaleX,g.scaleY,b,C),v=g=null,function(A){for(var F=-1,R=C.length,B;++F<R;)b[(B=C[F]).i]=B.x(A);return b.join("")}}}var cm=Oy(Ly,"px, ","px)","deg)"),dm=Oy(By,", ",")",")");var Hs=0,vu=0,gu=0,Uy=1e3,ud,yu,cd=0,Qa=0,dd=0,_u=typeof performance=="object"&&performance.now?performance:Date,zy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Cu(){return Qa||(zy(lE),Qa=_u.now()+dd)}function lE(){Qa=0}function xu(){this._call=this._time=this._next=null}xu.prototype=fd.prototype={constructor:xu,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Cu():+t)+(e==null?0:+e),!this._next&&yu!==this&&(yu?yu._next=this:ud=this,yu=this),this._call=n,this._time=t,fm()},stop:function(){this._call&&(this._call=null,this._time=1/0,fm())}};function fd(n,e,t){var i=new xu;return i.restart(n,e,t),i}function Gy(){Cu(),++Hs;for(var n=ud,e;n;)(e=Qa-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Hs}function Hy(){Qa=(cd=_u.now())+dd,Hs=vu=0;try{Gy()}finally{Hs=0,cE(),Qa=0}}function uE(){var n=_u.now(),e=n-cd;e>Uy&&(dd-=e,cd=n)}function cE(){for(var n,e=ud,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:ud=t);yu=n,fm(i)}function fm(n){if(!Hs){vu&&(vu=clearTimeout(vu));var e=n-Qa;e>24?(n<1/0&&(vu=setTimeout(Hy,n-_u.now()-dd)),gu&&(gu=clearInterval(gu))):(gu||(cd=_u.now(),gu=setInterval(uE,Uy)),Hs=1,zy(Hy))}}function pd(n,e,t){var i=new xu;return e=e==null?0:+e,i.restart(o=>{i.stop(),n(o+e)},e,t),i}var dE=Zp("start","end","cancel","interrupt"),fE=[],$y=0,qy=1,hd=2,md=3,Wy=4,gd=5,bu=6;function ia(n,e,t,i,o,s){var c=n.__transition;if(!c)n.__transition={};else if(t in c)return;pE(n,t,{name:e,index:i,group:o,on:dE,tween:fE,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$y})}function wu(n,e){var t=Jn(n,e);if(t.state>$y)throw new Error("too late; already scheduled");return t}function vi(n,e){var t=Jn(n,e);if(t.state>md)throw new Error("too late; already running");return t}function Jn(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function pE(n,e,t){var i=n.__transition,o;i[e]=t,t.timer=fd(s,0,t.time);function s(v){t.state=qy,t.timer.restart(c,t.delay,t.time),t.delay<=v&&c(v-t.delay)}function c(v){var g,b,C,A;if(t.state!==qy)return m();for(g in i)if(A=i[g],A.name===t.name){if(A.state===md)return pd(c);A.state===Wy?(A.state=bu,A.timer.stop(),A.on.call("interrupt",n,n.__data__,A.index,A.group),delete i[g]):+g<e&&(A.state=bu,A.timer.stop(),A.on.call("cancel",n,n.__data__,A.index,A.group),delete i[g])}if(pd(function(){t.state===md&&(t.state=Wy,t.timer.restart(f,t.delay,t.time),f(v))}),t.state=hd,t.on.call("start",n,n.__data__,t.index,t.group),t.state===hd){for(t.state=md,o=new Array(C=t.tween.length),g=0,b=-1;g<C;++g)(A=t.tween[g].value.call(n,n.__data__,t.index,t.group))&&(o[++b]=A);o.length=b+1}}function f(v){for(var g=v<t.duration?t.ease.call(null,v/t.duration):(t.timer.restart(m),t.state=gd,1),b=-1,C=o.length;++b<C;)o[b].call(n,g);t.state===gd&&(t.on.call("end",n,n.__data__,t.index,t.group),m())}function m(){t.state=bu,t.timer.stop(),delete i[e];for(var v in i)return;delete n.__transition}}function vd(n,e){var t=n.__transition,i,o,s=!0,c;if(t){e=e==null?null:e+"";for(c in t){if((i=t[c]).name!==e){s=!1;continue}o=i.state>hd&&i.state<gd,i.state=bu,i.timer.stop(),i.on.call(o?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[c]}s&&delete n.__transition}}function Ky(n){return this.each(function(){vd(this,n)})}function mE(n,e){var t,i;return function(){var o=vi(this,n),s=o.tween;if(s!==t){i=t=s;for(var c=0,f=i.length;c<f;++c)if(i[c].name===e){i=i.slice(),i.splice(c,1);break}}o.tween=i}}function hE(n,e,t){var i,o;if(typeof t!="function")throw new Error;return function(){var s=vi(this,n),c=s.tween;if(c!==i){o=(i=c).slice();for(var f={name:e,value:t},m=0,v=o.length;m<v;++m)if(o[m].name===e){o[m]=f;break}m===v&&o.push(f)}s.tween=o}}function Jy(n,e){var t=this._id;if(n+="",arguments.length<2){for(var i=Jn(this.node(),t).tween,o=0,s=i.length,c;o<s;++o)if((c=i[o]).name===n)return c.value;return null}return this.each((e==null?mE:hE)(t,n,e))}function Us(n,e,t){var i=n._id;return n.each(function(){var o=vi(this,i);(o.value||(o.value={}))[e]=t.apply(this,arguments)}),function(o){return Jn(o,i).value[e]}}function yd(n,e){var t;return(typeof e=="number"?gi:e instanceof Rr?Ya:(t=Rr(e))?(e=t,Ya):hu)(n,e)}function gE(n){return function(){this.removeAttribute(n)}}function vE(n){return function(){this.removeAttributeNS(n.space,n.local)}}function yE(n,e,t){var i,o=t+"",s;return function(){var c=this.getAttribute(n);return c===o?null:c===i?s:s=e(i=c,t)}}function _E(n,e,t){var i,o=t+"",s;return function(){var c=this.getAttributeNS(n.space,n.local);return c===o?null:c===i?s:s=e(i=c,t)}}function xE(n,e,t){var i,o,s;return function(){var c,f=t(this),m;return f==null?void this.removeAttribute(n):(c=this.getAttribute(n),m=f+"",c===m?null:c===i&&m===o?s:(o=m,s=e(i=c,f)))}}function CE(n,e,t){var i,o,s;return function(){var c,f=t(this),m;return f==null?void this.removeAttributeNS(n.space,n.local):(c=this.getAttributeNS(n.space,n.local),m=f+"",c===m?null:c===i&&m===o?s:(o=m,s=e(i=c,f)))}}function Yy(n,e){var t=yo(n),i=t==="transform"?dm:yd;return this.attrTween(n,typeof e=="function"?(t.local?CE:xE)(t,i,Us(this,"attr."+n,e)):e==null?(t.local?vE:gE)(t):(t.local?_E:yE)(t,i,e))}function bE(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function wE(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function SE(n,e){var t,i;function o(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&wE(n,s)),t}return o._value=e,o}function EE(n,e){var t,i;function o(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&bE(n,s)),t}return o._value=e,o}function Xy(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=yo(n);return this.tween(t,(i.local?SE:EE)(i,e))}function TE(n,e){return function(){wu(this,n).delay=+e.apply(this,arguments)}}function AE(n,e){return e=+e,function(){wu(this,n).delay=e}}function Qy(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?TE:AE)(e,n)):Jn(this.node(),e).delay}function DE(n,e){return function(){vi(this,n).duration=+e.apply(this,arguments)}}function kE(n,e){return e=+e,function(){vi(this,n).duration=e}}function Zy(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?DE:kE)(e,n)):Jn(this.node(),e).duration}function IE(n,e){if(typeof e!="function")throw new Error;return function(){vi(this,n).ease=e}}function jy(n){var e=this._id;return arguments.length?this.each(IE(e,n)):Jn(this.node(),e).ease}function ME(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;vi(this,n).ease=t}}function e_(n){if(typeof n!="function")throw new Error;return this.each(ME(this._id,n))}function t_(n){typeof n!="function"&&(n=uu(n));for(var e=this._groups,t=e.length,i=new Array(t),o=0;o<t;++o)for(var s=e[o],c=s.length,f=i[o]=[],m,v=0;v<c;++v)(m=s[v])&&n.call(m,m.__data__,v,s)&&f.push(m);return new Fi(i,this._parents,this._name,this._id)}function n_(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,o=t.length,s=Math.min(i,o),c=new Array(i),f=0;f<s;++f)for(var m=e[f],v=t[f],g=m.length,b=c[f]=new Array(g),C,A=0;A<g;++A)(C=m[A]||v[A])&&(b[A]=C);for(;f<i;++f)c[f]=e[f];return new Fi(c,this._parents,this._name,this._id)}function FE(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function NE(n,e,t){var i,o,s=FE(e)?wu:vi;return function(){var c=s(this,n),f=c.on;f!==i&&(o=(i=f).copy()).on(e,t),c.on=o}}function i_(n,e){var t=this._id;return arguments.length<2?Jn(this.node(),t).on.on(n):this.each(NE(t,n,e))}function RE(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function r_(){return this.on("end.remove",RE(this._id))}function o_(n){var e=this._name,t=this._id;typeof n!="function"&&(n=$a(n));for(var i=this._groups,o=i.length,s=new Array(o),c=0;c<o;++c)for(var f=i[c],m=f.length,v=s[c]=new Array(m),g,b,C=0;C<m;++C)(g=f[C])&&(b=n.call(g,g.__data__,C,f))&&("__data__"in g&&(b.__data__=g.__data__),v[C]=b,ia(v[C],e,t,C,v,Jn(g,t)));return new Fi(s,this._parents,e,t)}function a_(n){var e=this._name,t=this._id;typeof n!="function"&&(n=lu(n));for(var i=this._groups,o=i.length,s=[],c=[],f=0;f<o;++f)for(var m=i[f],v=m.length,g,b=0;b<v;++b)if(g=m[b]){for(var C=n.call(g,g.__data__,b,m),A,F=Jn(g,t),R=0,B=C.length;R<B;++R)(A=C[R])&&ia(A,e,t,R,C,F);s.push(C),c.push(g)}return new Fi(s,c,e,t)}var PE=_o.prototype.constructor;function s_(){return new PE(this._groups,this._parents)}function VE(n,e){var t,i,o;return function(){var s=na(this,n),c=(this.style.removeProperty(n),na(this,n));return s===c?null:s===t&&c===i?o:o=e(t=s,i=c)}}function l_(n){return function(){this.style.removeProperty(n)}}function LE(n,e,t){var i,o=t+"",s;return function(){var c=na(this,n);return c===o?null:c===i?s:s=e(i=c,t)}}function BE(n,e,t){var i,o,s;return function(){var c=na(this,n),f=t(this),m=f+"";return f==null&&(m=f=(this.style.removeProperty(n),na(this,n))),c===m?null:c===i&&m===o?s:(o=m,s=e(i=c,f))}}function OE(n,e){var t,i,o,s="style."+e,c="end."+s,f;return function(){var m=vi(this,n),v=m.on,g=m.value[s]==null?f||(f=l_(e)):void 0;(v!==t||o!==g)&&(i=(t=v).copy()).on(c,o=g),m.on=i}}function u_(n,e,t){var i=(n+="")=="transform"?cm:yd;return e==null?this.styleTween(n,VE(n,i)).on("end.style."+n,l_(n)):typeof e=="function"?this.styleTween(n,BE(n,i,Us(this,"style."+n,e))).each(OE(this._id,n)):this.styleTween(n,LE(n,i,e),t).on("end.style."+n,null)}function HE(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function UE(n,e,t){var i,o;function s(){var c=e.apply(this,arguments);return c!==o&&(i=(o=c)&&HE(n,c,t)),i}return s._value=e,s}function c_(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,UE(n,e,t??""))}function zE(n){return function(){this.textContent=n}}function GE(n){return function(){var e=n(this);this.textContent=e??""}}function d_(n){return this.tween("text",typeof n=="function"?GE(Us(this,"text",n)):zE(n==null?"":n+""))}function qE(n){return function(e){this.textContent=n.call(this,e)}}function WE(n){var e,t;function i(){var o=n.apply(this,arguments);return o!==t&&(e=(t=o)&&qE(o)),e}return i._value=n,i}function f_(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,WE(n))}function p_(){for(var n=this._name,e=this._id,t=_d(),i=this._groups,o=i.length,s=0;s<o;++s)for(var c=i[s],f=c.length,m,v=0;v<f;++v)if(m=c[v]){var g=Jn(m,e);ia(m,n,t,v,c,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Fi(i,this._parents,n,t)}function m_(){var n,e,t=this,i=t._id,o=t.size();return new Promise(function(s,c){var f={value:c},m={value:function(){--o===0&&s()}};t.each(function(){var v=vi(this,i),g=v.on;g!==n&&(e=(n=g).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(m)),v.on=e}),o===0&&s()})}var $E=0;function Fi(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function h_(n){return _o().transition(n)}function _d(){return++$E}var xo=_o.prototype;Fi.prototype=h_.prototype={constructor:Fi,select:o_,selectAll:a_,selectChild:xo.selectChild,selectChildren:xo.selectChildren,filter:t_,merge:n_,selection:s_,transition:p_,call:xo.call,nodes:xo.nodes,node:xo.node,size:xo.size,empty:xo.empty,each:xo.each,on:i_,attr:Yy,attrTween:Xy,style:u_,styleTween:c_,text:d_,textTween:f_,remove:r_,tween:Jy,delay:Qy,duration:Zy,ease:jy,easeVarying:e_,end:m_,[Symbol.iterator]:xo[Symbol.iterator]};function xd(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var KE={time:null,delay:0,duration:250,ease:xd};function JE(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function g_(n){var e,t;n instanceof Fi?(e=n._id,n=n._name):(e=_d(),(t=KE).time=Cu(),n=n==null?null:n+"");for(var i=this._groups,o=i.length,s=0;s<o;++s)for(var c=i[s],f=c.length,m,v=0;v<f;++v)(m=c[v])&&ia(m,n,e,v,c,t||JE(m,e));return new Fi(i,this._parents,n,e)}_o.prototype.interrupt=Ky;_o.prototype.transition=g_;var{abs:i7,max:r7,min:o7}=Math;function v_(n){return[+n[0],+n[1]]}function YE(n){return[v_(n[0]),v_(n[1])]}var a7={name:"x",handles:["w","e"].map(pm),input:function(n,e){return n==null?null:[[+n[0],e[0][1]],[+n[1],e[1][1]]]},output:function(n){return n&&[n[0][0],n[1][0]]}},s7={name:"y",handles:["n","s"].map(pm),input:function(n,e){return n==null?null:[[e[0][0],+n[0]],[e[1][0],+n[1]]]},output:function(n){return n&&[n[0][1],n[1][1]]}},l7={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(pm),input:function(n){return n==null?null:YE(n)},output:function(n){return n}};function pm(n){return{type:n}}function y_(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Za(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,i=n.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+n.slice(t+1)]}function ro(n){return n=Za(Math.abs(n)),n?n[1]:NaN}function __(n,e){return function(t,i){for(var o=t.length,s=[],c=0,f=n[0],m=0;o>0&&f>0&&(m+f+1>i&&(f=Math.max(1,i-m)),s.push(t.substring(o-=f,o+f)),!((m+=f+1)>i));)f=n[c=(c+1)%n.length];return s.reverse().join(e)}}function x_(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var XE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ra(n){if(!(e=XE.exec(n)))throw new Error("invalid format: "+n);var e;return new Cd({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ra.prototype=Cd.prototype;function Cd(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}Cd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function C_(n){e:for(var e=n.length,t=1,i=-1,o;t<e;++t)switch(n[t]){case".":i=o=t;break;case"0":i===0&&(i=t),o=t;break;default:if(!+n[t])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(o+1):n}var mm;function b_(n,e){var t=Za(n,e);if(!t)return n+"";var i=t[0],o=t[1],s=o-(mm=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,c=i.length;return s===c?i:s>c?i+new Array(s-c+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Za(n,Math.max(0,e+s-1))[0]}function hm(n,e){var t=Za(n,e);if(!t)return n+"";var i=t[0],o=t[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}var gm={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:y_,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>hm(n*100,e),r:hm,s:b_,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function vm(n){return n}var w_=Array.prototype.map,S_=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function E_(n){var e=n.grouping===void 0||n.thousands===void 0?vm:__(w_.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",o=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?vm:x_(w_.call(n.numerals,String)),c=n.percent===void 0?"%":n.percent+"",f=n.minus===void 0?"\u2212":n.minus+"",m=n.nan===void 0?"NaN":n.nan+"";function v(b){b=ra(b);var C=b.fill,A=b.align,F=b.sign,R=b.symbol,B=b.zero,N=b.width,O=b.comma,q=b.precision,X=b.trim,j=b.type;j==="n"?(O=!0,j="g"):gm[j]||(q===void 0&&(q=12),X=!0,j="g"),(B||C==="0"&&A==="=")&&(B=!0,C="0",A="=");var ie=R==="$"?t:R==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",he=R==="$"?i:/[%p]/.test(j)?c:"",ve=gm[j],me=/[defgprs%]/.test(j);q=q===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,q)):Math.max(0,Math.min(20,q));function Te($){var le=ie,H=he,De,pt,Xe;if(j==="c")H=ve($)+H,$="";else{$=+$;var ft=$<0||1/$<0;if($=isNaN($)?m:ve(Math.abs($),q),X&&($=C_($)),ft&&+$==0&&F!=="+"&&(ft=!1),le=(ft?F==="("?F:f:F==="-"||F==="("?"":F)+le,H=(j==="s"?S_[8+mm/3]:"")+H+(ft&&F==="("?")":""),me){for(De=-1,pt=$.length;++De<pt;)if(Xe=$.charCodeAt(De),48>Xe||Xe>57){H=(Xe===46?o+$.slice(De+1):$.slice(De))+H,$=$.slice(0,De);break}}}O&&!B&&($=e($,1/0));var yt=le.length+$.length+H.length,xe=yt<N?new Array(N-yt+1).join(C):"";switch(O&&B&&($=e(xe+$,xe.length?N-H.length:1/0),xe=""),A){case"<":$=le+$+H+xe;break;case"=":$=le+xe+$+H;break;case"^":$=xe.slice(0,yt=xe.length>>1)+le+$+H+xe.slice(yt);break;default:$=xe+le+$+H;break}return s($)}return Te.toString=function(){return b+""},Te}function g(b,C){var A=v((b=ra(b),b.type="f",b)),F=Math.max(-8,Math.min(8,Math.floor(ro(C)/3)))*3,R=Math.pow(10,-F),B=S_[8+F/3];return function(N){return A(R*N)+B}}return{format:v,formatPrefix:g}}var bd,wd,Sd;ym({thousands:",",grouping:[3],currency:["$",""]});function ym(n){return bd=E_(n),wd=bd.format,Sd=bd.formatPrefix,bd}function _m(n){return Math.max(0,-ro(Math.abs(n)))}function xm(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ro(e)/3)))*3-ro(Math.abs(n)))}function Cm(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,ro(e)-ro(n))+1}function zs(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}var T_=Symbol("implicit");function Ed(){var n=new Ls,e=[],t=[],i=T_;function o(s){let c=n.get(s);if(c===void 0){if(i!==T_)return i;n.set(s,c=e.push(s)-1)}return t[c%t.length]}return o.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new Ls;for(let c of s)n.has(c)||n.set(c,e.push(c)-1);return o},o.range=function(s){return arguments.length?(t=Array.from(s),o):t.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.copy=function(){return Ed(e,t).unknown(i)},zs.apply(o,arguments),o}function Su(){var n=Ed().unknown(void 0),e=n.domain,t=n.range,i=0,o=1,s,c,f=!1,m=0,v=0,g=.5;delete n.unknown;function b(){var C=e().length,A=o<i,F=A?o:i,R=A?i:o;s=(R-F)/Math.max(1,C-m+v*2),f&&(s=Math.floor(s)),F+=(R-F-s*(C-m))*g,c=s*(1-m),f&&(F=Math.round(F),c=Math.round(c));var B=Kc(C).map(function(N){return F+s*N});return t(A?B.reverse():B)}return n.domain=function(C){return arguments.length?(e(C),b()):e()},n.range=function(C){return arguments.length?([i,o]=C,i=+i,o=+o,b()):[i,o]},n.rangeRound=function(C){return[i,o]=C,i=+i,o=+o,f=!0,b()},n.bandwidth=function(){return c},n.step=function(){return s},n.round=function(C){return arguments.length?(f=!!C,b()):f},n.padding=function(C){return arguments.length?(m=Math.min(1,v=+C),b()):m},n.paddingInner=function(C){return arguments.length?(m=Math.min(1,C),b()):m},n.paddingOuter=function(C){return arguments.length?(v=+C,b()):v},n.align=function(C){return arguments.length?(g=Math.max(0,Math.min(1,C)),b()):g},n.copy=function(){return Su(e(),[i,o]).round(f).paddingInner(m).paddingOuter(v).align(g)},zs.apply(b(),arguments)}function bm(n){return function(){return n}}function wm(n){return+n}var A_=[0,1];function Gs(n){return n}function Sm(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:bm(isNaN(e)?NaN:.5)}function QE(n,e){var t;return n>e&&(t=n,n=e,e=t),function(i){return Math.max(n,Math.min(e,i))}}function ZE(n,e,t){var i=n[0],o=n[1],s=e[0],c=e[1];return o<i?(i=Sm(o,i),s=t(c,s)):(i=Sm(i,o),s=t(s,c)),function(f){return s(i(f))}}function jE(n,e,t){var i=Math.min(n.length,e.length)-1,o=new Array(i),s=new Array(i),c=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++c<i;)o[c]=Sm(n[c],n[c+1]),s[c]=t(e[c],e[c+1]);return function(f){var m=Wp(n,f,1,i)-1;return s[m](o[m](f))}}function D_(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function eT(){var n=A_,e=A_,t=Xa,i,o,s,c=Gs,f,m,v;function g(){var C=Math.min(n.length,e.length);return c!==Gs&&(c=QE(n[0],n[C-1])),f=C>2?jE:ZE,m=v=null,b}function b(C){return C==null||isNaN(C=+C)?s:(m||(m=f(n.map(i),e,t)))(i(c(C)))}return b.invert=function(C){return c(o((v||(v=f(e,n.map(i),gi)))(C)))},b.domain=function(C){return arguments.length?(n=Array.from(C,wm),g()):n.slice()},b.range=function(C){return arguments.length?(e=Array.from(C),g()):e.slice()},b.rangeRound=function(C){return e=Array.from(C),t=lm,g()},b.clamp=function(C){return arguments.length?(c=C?!0:Gs,g()):c!==Gs},b.interpolate=function(C){return arguments.length?(t=C,g()):t},b.unknown=function(C){return arguments.length?(s=C,b):s},function(C,A){return i=C,o=A,g()}}function Em(){return eT()(Gs,Gs)}function Tm(n,e,t,i){var o=$p(n,e,t),s;switch(i=ra(i??",f"),i.type){case"s":{var c=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(s=xm(o,c))&&(i.precision=s),Sd(i,c)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Cm(o,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=_m(o))&&(i.precision=s-(i.type==="%")*2);break}}return wd(i)}function tT(n){var e=n.domain;return n.ticks=function(t){var i=e();return Wc(i[0],i[i.length-1],t??10)},n.tickFormat=function(t,i){var o=e();return Tm(o[0],o[o.length-1],t??10,i)},n.nice=function(t){t==null&&(t=10);var i=e(),o=0,s=i.length-1,c=i[o],f=i[s],m,v,g=10;for(f<c&&(v=c,c=f,f=v,v=o,o=s,s=v);g-- >0;){if(v=au(c,f,t),v===m)return i[o]=c,i[s]=f,e(i);if(v>0)c=Math.floor(c/v)*v,f=Math.ceil(f/v)*v;else if(v<0)c=Math.ceil(c*v)/v,f=Math.floor(f*v)/v;else break;m=v}return n},n}function Eu(){var n=Em();return n.copy=function(){return D_(n,Eu())},zs.apply(n,arguments),tT(n)}function oa(n,e,t){this.k=n,this.x=e,this.y=t}oa.prototype={constructor:oa,scale:function(n){return n===1?this:new oa(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new oa(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Am=new oa(1,0,0);Dm.prototype=oa.prototype;function Dm(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Am;return n.__zoom}var Td=class n{el=ze(Mr);data=be();constructor(){Zt(()=>{let e=this.data();e&&e.length>0&&this.createChart(e)})}createChart(e){ed(this.el.nativeElement).select("svg").remove();let t=this.el.nativeElement,i={top:20,right:20,bottom:70,left:40},o=t.clientWidth-i.left-i.right,s=400-i.top-i.bottom,c=ed(t).append("svg").attr("width",o+i.left+i.right).attr("height",s+i.top+i.bottom).append("g").attr("transform",`translate(${i.left},${i.top})`),f=Su().range([0,o]).domain(e.map(v=>v.label)).padding(.2);c.append("g").attr("transform",`translate(0,${s})`).call(Xp(f)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end").style("fill","#9ca3af");let m=Eu().domain([0,$c(e,v=>v.value)??0]).range([s,0]);c.append("g").call(Qp(m)).selectAll("text").style("fill","#9ca3af"),c.selectAll("mybar").data(e).enter().append("rect").attr("x",v=>f(v.label)).attr("y",v=>m(v.value)).attr("width",f.bandwidth()).attr("height",v=>s-m(v.value)).attr("fill","#4f46e5")}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Nn({type:n,selectors:[["","appD3BarChart",""]],inputs:{data:[1,"data"]}})};var iT,rT;function oT(){return{geminiUrl:iT,vertexUrl:rT}}function aT(n,e,t,i){var o,s;if(!n?.baseUrl){let c=oT();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(s=c.geminiUrl)!==null&&s!==void 0?s:i}return n.baseUrl}var Lr=class{};function vt(n,e){let t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){let s=e[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function h(n,e,t){for(let s=0;s<e.length-1;s++){let c=e[s];if(c.endsWith("[]")){let f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){let m=n[f];if(Array.isArray(t))for(let v=0;v<m.length;v++){let g=m[v];h(g,e.slice(s+1),t[v])}else for(let v of m)h(v,e.slice(s+1),t)}return}else if(c.endsWith("[0]")){let f=c.slice(0,-3);f in n||(n[f]=[{}]);let m=n[f];h(m[0],e.slice(s+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}let i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function p(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;let o=e[i];if(o.endsWith("[]")){let s=o.slice(0,-2);if(s in n){let c=n[s];return Array.isArray(c)?c.map(f=>p(f,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function sT(n,e){for(let[t,i]of Object.entries(e)){let o=t.split("."),s=i.split("."),c=new Set,f=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){f=m;break}if(f!==-1&&s.length>f)for(let m=f;m<s.length;m++){let v=s[m];v!=="*"&&!v.endsWith("[]")&&!v.endsWith("[0]")&&c.add(v)}Mm(n,o,s,0,c)}}function Mm(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;let s=e[i];if(s.endsWith("[]")){let c=s.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(let m of f[c])Mm(m,e,t,i+1,o)}else if(s==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){let c=n,f=Object.keys(c).filter(v=>!v.startsWith("_")&&!o.has(v)),m={};for(let v of f)m[v]=c[v];for(let[v,g]of Object.entries(m)){let b=[];for(let C of t.slice(i))C==="*"?b.push(v):b.push(C);h(c,b,g)}for(let v of f)delete c[v]}}else{let c=n;s in c&&Mm(c[s],e,t,i+1,o)}}function kh(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function lT(n){let e={},t=p(n,["operationName"]);t!=null&&h(e,["operationName"],t);let i=p(n,["resourceName"]);return i!=null&&h(e,["_url","resourceName"],i),e}function uT(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["metadata"]);i!=null&&h(e,["metadata"],i);let o=p(n,["done"]);o!=null&&h(e,["done"],o);let s=p(n,["error"]);s!=null&&h(e,["error"],s);let c=p(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],dT(c)),e}function cT(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["metadata"]);i!=null&&h(e,["metadata"],i);let o=p(n,["done"]);o!=null&&h(e,["done"],o);let s=p(n,["error"]);s!=null&&h(e,["error"],s);let c=p(n,["response"]);return c!=null&&h(e,["response"],fT(c)),e}function dT(n){let e={},t=p(n,["generatedSamples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(c=>pT(c))),h(e,["generatedVideos"],s)}let i=p(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);let o=p(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function fT(n){let e={},t=p(n,["videos"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(c=>mT(c))),h(e,["generatedVideos"],s)}let i=p(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);let o=p(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function pT(n){let e={},t=p(n,["video"]);return t!=null&&h(e,["video"],xT(t)),e}function mT(n){let e={},t=p(n,["_self"]);return t!=null&&h(e,["video"],CT(t)),e}function hT(n){let e={},t=p(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function gT(n){let e={},t=p(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function vT(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["metadata"]);i!=null&&h(e,["metadata"],i);let o=p(n,["done"]);o!=null&&h(e,["done"],o);let s=p(n,["error"]);s!=null&&h(e,["error"],s);let c=p(n,["response"]);return c!=null&&h(e,["response"],yT(c)),e}function yT(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["parent"]);i!=null&&h(e,["parent"],i);let o=p(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function ex(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["metadata"]);i!=null&&h(e,["metadata"],i);let o=p(n,["done"]);o!=null&&h(e,["done"],o);let s=p(n,["error"]);s!=null&&h(e,["error"],s);let c=p(n,["response"]);return c!=null&&h(e,["response"],_T(c)),e}function _T(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["parent"]);i!=null&&h(e,["parent"],i);let o=p(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function xT(n){let e={},t=p(n,["uri"]);t!=null&&h(e,["uri"],t);let i=p(n,["encodedVideo"]);i!=null&&h(e,["videoBytes"],kh(i));let o=p(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function CT(n){let e={},t=p(n,["gcsUri"]);t!=null&&h(e,["uri"],t);let i=p(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],kh(i));let o=p(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}var Ct=(function(n){return n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL",n})(Ct||{});var Fm=(function(n){return n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO",n})(Fm||{});var tx=(function(n){return n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",n})(tx||{});var Au=(function(n){return n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT",n})(Au||{});var ku=class{constructor(e){let t={};for(let i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}};var es=class{get text(){var e,t,i,o,s,c,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let v="",g=!1,b=[];for(let C of(m=(f=(c=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(let[A,F]of Object.entries(C))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(F!==null||F!==void 0)&&b.push(A);if(typeof C.text=="string"){if(typeof C.thought=="boolean"&&C.thought)continue;g=!0,v+=C.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?v:void 0}get data(){var e,t,i,o,s,c,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let v="",g=[];for(let b of(m=(f=(c=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(let[C,A]of Object.entries(b))C!=="inlineData"&&(A!==null||A!==void 0)&&g.push(C);b.inlineData&&typeof b.inlineData.data=="string"&&(v+=atob(b.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),v.length>0?btoa(v):void 0}get functionCalls(){var e,t,i,o,s,c,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let v=(m=(f=(c=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if(v?.length!==0)return v}get executableCode(){var e,t,i,o,s,c,f,m,v;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let g=(m=(f=(c=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if(g?.length!==0)return(v=g?.[0])===null||v===void 0?void 0:v.code}get codeExecutionResult(){var e,t,i,o,s,c,f,m,v;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let g=(m=(f=(c=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if(g?.length!==0)return(v=g?.[0])===null||v===void 0?void 0:v.output}},Rd=class{},Pd=class{},Nm=class{},Rm=class{},Pm=class{},Vm=class{},Vd=class{},Ld=class{},Bd=class{},Lm=class{};var Od=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,o,s=e;return t?o=cT(s):o=uT(s),Object.assign(i,o),i}},Hd=class{},Ud=class{},zd=class{},Gd=class{},Bm=class{},Om=class{},Hm=class{};var Um=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,s=vT(e);return Object.assign(i,s),i}},zm=class{},Gm=class{},qm=class{};var qd=class{};var Wm=class{get text(){var e,t,i;let o="",s=!1,c=[];for(let f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(let[m,v]of Object.entries(f))m!=="text"&&m!=="thought"&&v!==null&&c.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;s=!0,o+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var e,t,i;let o="",s=[];for(let c of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(let[f,m]of Object.entries(c))f!=="inlineData"&&m!==null&&s.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var $m=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var Km=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,s=ex(e);return Object.assign(i,s),i}};function en(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function nx(n,e){let t=en(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function ix(n){return Array.isArray(n)?n.map(e=>Wd(e)):[Wd(n)]}function Wd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function rx(n){let e=Wd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ox(n){let e=Wd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function k_(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function ax(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>k_(e)):[k_(n)]}function Jm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function I_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function M_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function wi(n){if(n==null)throw new Error("ContentUnion is required");return Jm(n)?n:{role:"user",parts:ax(n)}}function Ih(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{let i=wi(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){let t=wi(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>wi(t)):[wi(e)]}function Cr(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(I_(n)||M_(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wi(n)]}let e=[],t=[],i=Jm(n[0]);for(let o of n){let s=Jm(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(o);else{if(I_(o)||M_(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:ax(t)}),e}function bT(n,e){n.includes("null")&&(e.nullable=!0);let t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Ct).includes(t[0].toUpperCase())?t[0].toUpperCase():Ct.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let i of t)e.anyOf.push({type:Object.values(Ct).includes(i.toUpperCase())?i.toUpperCase():Ct.TYPE_UNSPECIFIED})}}function Ws(n){let e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");let s=n.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,n=s[1]):s[1].type==="null"&&(e.nullable=!0,n=s[0])),n.type instanceof Array&&bT(n.type,e);for(let[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Ct).includes(f.toUpperCase())?f.toUpperCase():Ct.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Ws(f);else if(i.includes(c)){let m=[];for(let v of f){if(v.type=="null"){e.nullable=!0;continue}m.push(Ws(v))}e[c]=m}else if(o.includes(c)){let m={};for(let[v,g]of Object.entries(f))m[v]=Ws(g);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=f}return e}function Mh(n){return Ws(n)}function Fh(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Nh(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ys(n){if(n.functionDeclarations)for(let e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ws(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ws(e.response));return n}function Xs(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");let e=[];for(let t of n)e.push(t);return e}function wT(n,e,t,i=1){let o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function bo(n,e){if(typeof e!="string")throw new Error("name must be a string");return wT(n,e,"cachedContents")}function sx(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function aa(n){return kh(n)}function ST(n){return n!=null&&typeof n=="object"&&"name"in n}function ET(n){return n!=null&&typeof n=="object"&&"video"in n}function TT(n){return n!=null&&typeof n=="object"&&"uri"in n}function lx(n){var e;let t;if(ST(n)&&(t=n.name),!(TT(n)&&(t=n.uri,t===void 0))&&!(ET(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){let o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function ux(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function cx(n){for(let e of["models","tunedModels","publisherModels"])if(AT(n,e))return n[e];return[]}function AT(n,e){return n!==null&&typeof n=="object"&&e in n}function DT(n,e={}){let t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function kT(n,e={}){let t=[],i=new Set;for(let o of n){let s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);let c=DT(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function dx(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;let i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function IT(n){if(typeof n!="string")return n;let e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function fx(n){if(typeof n!="object"||n===null)return{};let e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;let o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let s=!1;for(let c of o){if(typeof c!="object"||c===null)continue;let m=c.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Qs(n,e){let t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function px(n){let e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function MT(n){let e={},t=p(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);let i=p(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>dA(c))),h(e,["inlinedResponses"],s)}let o=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>c)),h(e,["inlinedEmbedContentResponses"],s)}return e}function FT(n){let e={},t=p(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);let i=p(n,["gcsDestination","outputUriPrefix"]);i!=null&&h(e,["gcsUri"],i);let o=p(n,["bigqueryDestination","outputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function NT(n){let e={},t=p(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);let i=p(n,["gcsUri"]);i!=null&&h(e,["gcsDestination","outputUriPrefix"],i);let o=p(n,["bigqueryUri"]);if(o!=null&&h(e,["bigqueryDestination","outputUri"],o),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Fd(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["metadata","displayName"]);i!=null&&h(e,["displayName"],i);let o=p(n,["metadata","state"]);o!=null&&h(e,["state"],px(o));let s=p(n,["metadata","createTime"]);s!=null&&h(e,["createTime"],s);let c=p(n,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);let f=p(n,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);let m=p(n,["metadata","model"]);m!=null&&h(e,["model"],m);let v=p(n,["metadata","output"]);return v!=null&&h(e,["dest"],MT(fx(v))),e}function Ym(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["displayName"]);i!=null&&h(e,["displayName"],i);let o=p(n,["state"]);o!=null&&h(e,["state"],px(o));let s=p(n,["error"]);s!=null&&h(e,["error"],s);let c=p(n,["createTime"]);c!=null&&h(e,["createTime"],c);let f=p(n,["startTime"]);f!=null&&h(e,["startTime"],f);let m=p(n,["endTime"]);m!=null&&h(e,["endTime"],m);let v=p(n,["updateTime"]);v!=null&&h(e,["updateTime"],v);let g=p(n,["model"]);g!=null&&h(e,["model"],g);let b=p(n,["inputConfig"]);b!=null&&h(e,["src"],RT(b));let C=p(n,["outputConfig"]);C!=null&&h(e,["dest"],FT(fx(C)));let A=p(n,["completionStats"]);return A!=null&&h(e,["completionStats"],A),e}function RT(n){let e={},t=p(n,["instancesFormat"]);t!=null&&h(e,["format"],t);let i=p(n,["gcsSource","uris"]);i!=null&&h(e,["gcsUri"],i);let o=p(n,["bigquerySource","inputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function PT(n,e){let t={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=p(e,["fileName"]);i!=null&&h(t,["fileName"],i);let o=p(e,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>cA(n,c))),h(t,["requests","requests"],s)}return t}function VT(n){let e={},t=p(n,["format"]);t!=null&&h(e,["instancesFormat"],t);let i=p(n,["gcsUri"]);i!=null&&h(e,["gcsSource","uris"],i);let o=p(n,["bigqueryUri"]);if(o!=null&&h(e,["bigquerySource","inputUri"],o),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function LT(n){let e={},t=p(n,["data"]);if(t!=null&&h(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function BT(n,e){let t={},i=p(e,["name"]);return i!=null&&h(t,["_url","name"],Qs(n,i)),t}function OT(n,e){let t={},i=p(e,["name"]);return i!=null&&h(t,["_url","name"],Qs(n,i)),t}function HT(n){let e={},t=p(n,["content"]);t!=null&&h(e,["content"],t);let i=p(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],UT(i));let o=p(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);let s=p(n,["finishReason"]);s!=null&&h(e,["finishReason"],s);let c=p(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);let f=p(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);let m=p(n,["index"]);m!=null&&h(e,["index"],m);let v=p(n,["logprobsResult"]);v!=null&&h(e,["logprobsResult"],v);let g=p(n,["safetyRatings"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(A=>A)),h(e,["safetyRatings"],C)}let b=p(n,["urlContextMetadata"]);return b!=null&&h(e,["urlContextMetadata"],b),e}function UT(n){let e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["citations"],i)}return e}function mx(n){let e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>yA(s))),h(e,["parts"],o)}let i=p(n,["role"]);return i!=null&&h(e,["role"],i),e}function zT(n,e){let t={},i=p(n,["displayName"]);if(e!==void 0&&i!=null&&h(e,["batch","displayName"],i),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function GT(n,e){let t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);let o=p(n,["dest"]);return e!==void 0&&o!=null&&h(e,["outputConfig"],NT(IT(o))),t}function F_(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["src"]);o!=null&&h(t,["batch","inputConfig"],PT(n,dx(n,o)));let s=p(e,["config"]);return s!=null&&zT(s,t),t}function qT(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["model"],en(n,i));let o=p(e,["src"]);o!=null&&h(t,["inputConfig"],VT(dx(n,o)));let s=p(e,["config"]);return s!=null&&GT(s,t),t}function WT(n,e){let t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&h(e,["batch","displayName"],i),t}function $T(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["src"]);o!=null&&h(t,["batch","inputConfig"],jT(n,o));let s=p(e,["config"]);return s!=null&&WT(s,t),t}function KT(n,e){let t={},i=p(e,["name"]);return i!=null&&h(t,["_url","name"],Qs(n,i)),t}function JT(n,e){let t={},i=p(e,["name"]);return i!=null&&h(t,["_url","name"],Qs(n,i)),t}function YT(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["name"]);i!=null&&h(e,["name"],i);let o=p(n,["done"]);o!=null&&h(e,["done"],o);let s=p(n,["error"]);return s!=null&&h(e,["error"],s),e}function XT(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["name"]);i!=null&&h(e,["name"],i);let o=p(n,["done"]);o!=null&&h(e,["done"],o);let s=p(n,["error"]);return s!=null&&h(e,["error"],s),e}function QT(n,e){let t={},i=p(e,["contents"]);if(i!=null){let s=Ih(n,i);Array.isArray(s)&&(s=s.map(c=>c)),h(t,["requests[]","request","content"],s)}let o=p(e,["config"]);return o!=null&&(h(t,["_self"],ZT(o,t)),sT(t,{"requests[].*":"requests[].request.*"})),t}function ZT(n,e){let t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);let o=p(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);let s=p(n,["outputDimensionality"]);if(e!==void 0&&s!=null&&h(e,["requests[]","outputDimensionality"],s),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function jT(n,e){let t={},i=p(e,["fileName"]);i!=null&&h(t,["file_name"],i);let o=p(e,["inlinedRequests"]);return o!=null&&h(t,["requests"],QT(n,o)),t}function eA(n){let e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=p(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function tA(n){let e={},t=p(n,["id"]);t!=null&&h(e,["id"],t);let i=p(n,["args"]);i!=null&&h(e,["args"],i);let o=p(n,["name"]);if(o!=null&&h(e,["name"],o),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nA(n){let e={},t=p(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);let i=p(n,["mode"]);if(i!=null&&h(e,["mode"],i),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iA(n,e,t){let i={},o=p(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],mx(wi(o)));let s=p(e,["temperature"]);s!=null&&h(i,["temperature"],s);let c=p(e,["topP"]);c!=null&&h(i,["topP"],c);let f=p(e,["topK"]);f!=null&&h(i,["topK"],f);let m=p(e,["candidateCount"]);m!=null&&h(i,["candidateCount"],m);let v=p(e,["maxOutputTokens"]);v!=null&&h(i,["maxOutputTokens"],v);let g=p(e,["stopSequences"]);g!=null&&h(i,["stopSequences"],g);let b=p(e,["responseLogprobs"]);b!=null&&h(i,["responseLogprobs"],b);let C=p(e,["logprobs"]);C!=null&&h(i,["logprobs"],C);let A=p(e,["presencePenalty"]);A!=null&&h(i,["presencePenalty"],A);let F=p(e,["frequencyPenalty"]);F!=null&&h(i,["frequencyPenalty"],F);let R=p(e,["seed"]);R!=null&&h(i,["seed"],R);let B=p(e,["responseMimeType"]);B!=null&&h(i,["responseMimeType"],B);let N=p(e,["responseSchema"]);N!=null&&h(i,["responseSchema"],Mh(N));let O=p(e,["responseJsonSchema"]);if(O!=null&&h(i,["responseJsonSchema"],O),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let q=p(e,["safetySettings"]);if(t!==void 0&&q!=null){let H=q;Array.isArray(H)&&(H=H.map(De=>_A(De))),h(t,["safetySettings"],H)}let X=p(e,["tools"]);if(t!==void 0&&X!=null){let H=Xs(X);Array.isArray(H)&&(H=H.map(De=>CA(Ys(De)))),h(t,["tools"],H)}let j=p(e,["toolConfig"]);if(t!==void 0&&j!=null&&h(t,["toolConfig"],xA(j)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let ie=p(e,["cachedContent"]);t!==void 0&&ie!=null&&h(t,["cachedContent"],bo(n,ie));let he=p(e,["responseModalities"]);he!=null&&h(i,["responseModalities"],he);let ve=p(e,["mediaResolution"]);ve!=null&&h(i,["mediaResolution"],ve);let me=p(e,["speechConfig"]);if(me!=null&&h(i,["speechConfig"],Fh(me)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let Te=p(e,["thinkingConfig"]);Te!=null&&h(i,["thinkingConfig"],Te);let $=p(e,["imageConfig"]);$!=null&&h(i,["imageConfig"],uA($));let le=p(e,["enableEnhancedCivicAnswers"]);return le!=null&&h(i,["enableEnhancedCivicAnswers"],le),i}function rA(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(v=>HT(v))),h(e,["candidates"],m)}let o=p(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);let s=p(n,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);let c=p(n,["responseId"]);c!=null&&h(e,["responseId"],c);let f=p(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function oA(n,e){let t={},i=p(e,["name"]);return i!=null&&h(t,["_url","name"],Qs(n,i)),t}function aA(n,e){let t={},i=p(e,["name"]);return i!=null&&h(t,["_url","name"],Qs(n,i)),t}function sA(n){let e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=p(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function lA(n){let e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=p(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function uA(n){let e={},t=p(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);let i=p(n,["imageSize"]);if(i!=null&&h(e,["imageSize"],i),p(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function cA(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["request","model"],en(n,i));let o=p(e,["contents"]);if(o!=null){let f=Cr(o);Array.isArray(f)&&(f=f.map(m=>mx(m))),h(t,["request","contents"],f)}let s=p(e,["metadata"]);s!=null&&h(t,["metadata"],s);let c=p(e,["config"]);return c!=null&&h(t,["request","generationConfig"],iA(n,c,p(t,["request"],{}))),t}function dA(n){let e={},t=p(n,["response"]);t!=null&&h(e,["response"],rA(t));let i=p(n,["error"]);return i!=null&&h(e,["error"],i),e}function fA(n,e){let t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);let o=p(n,["pageToken"]);if(e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function pA(n,e){let t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);let o=p(n,["pageToken"]);e!==void 0&&o!=null&&h(e,["_query","pageToken"],o);let s=p(n,["filter"]);return e!==void 0&&s!=null&&h(e,["_query","filter"],s),t}function mA(n){let e={},t=p(n,["config"]);return t!=null&&fA(t,e),e}function hA(n){let e={},t=p(n,["config"]);return t!=null&&pA(t,e),e}function gA(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);let o=p(n,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>Fd(c))),h(e,["batchJobs"],s)}return e}function vA(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);let o=p(n,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>Ym(c))),h(e,["batchJobs"],s)}return e}function yA(n){let e={},t=p(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);let i=p(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);let o=p(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);let s=p(n,["fileData"]);s!=null&&h(e,["fileData"],eA(s));let c=p(n,["functionCall"]);c!=null&&h(e,["functionCall"],tA(c));let f=p(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);let m=p(n,["inlineData"]);m!=null&&h(e,["inlineData"],LT(m));let v=p(n,["text"]);v!=null&&h(e,["text"],v);let g=p(n,["thought"]);g!=null&&h(e,["thought"],g);let b=p(n,["thoughtSignature"]);b!=null&&h(e,["thoughtSignature"],b);let C=p(n,["videoMetadata"]);return C!=null&&h(e,["videoMetadata"],C),e}function _A(n){let e={},t=p(n,["category"]);if(t!=null&&h(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=p(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function xA(n){let e={},t=p(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);let i=p(n,["functionCallingConfig"]);return i!=null&&h(e,["functionCallingConfig"],nA(i)),e}function CA(n){let e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=p(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);let i=p(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);let o=p(n,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=p(n,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(b=>b)),h(e,["functionDeclarations"],g)}let c=p(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],sA(c));let f=p(n,["googleSearch"]);f!=null&&h(e,["googleSearch"],lA(f));let m=p(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);let v=p(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}var sa=(function(n){return n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents",n})(sa||{}),Co=class{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,s;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(s=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var Xm=class extends Lr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Co(sa.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){let t=F_(this.apiClient,e),i=t._url,o=vt("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,m=f.requests,v=[];for(let g of m){let b=Object.assign({},g);if(b.systemInstruction){let C=b.systemInstruction;delete b.systemInstruction;let A=b.request;A.systemInstruction=C,b.request=A}v.push(b)}return f.requests=v,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){let i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){let s=this.getGcsUri(e),c=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(c)i.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=qT(this.apiClient,e);return f=vt("batchPredictionJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>Ym(g))}else{let v=F_(this.apiClient,e);return f=vt("{model}:batchGenerateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),c.then(g=>Fd(g))}}async createEmbeddingsInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=$T(this.apiClient,e);return s=vt("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Fd(m))}}async get(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=aA(this.apiClient,e);return f=vt("batchPredictionJobs/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>Ym(g))}else{let v=oA(this.apiClient,e);return f=vt("batches/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),c.then(g=>Fd(g))}}async cancel(e){var t,i,o,s;let c="",f={};if(this.apiClient.isVertexAI()){let m=OT(this.apiClient,e);c=vt("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let m=BT(this.apiClient,e);c=vt("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=hA(e);return f=vt("batchPredictionJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=vA(g),C=new qd;return Object.assign(C,b),C})}else{let v=mA(e);return f=vt("batches",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=gA(g),C=new qd;return Object.assign(C,b),C})}}async delete(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=JT(this.apiClient,e);return f=vt("batchPredictionJobs/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>XT(g))}else{let v=KT(this.apiClient,e);return f=vt("batches/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>YT(g))}}};function bA(n){let e={},t=p(n,["data"]);if(t!=null&&h(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function N_(n){let e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>WA(s))),h(e,["parts"],o)}let i=p(n,["role"]);return i!=null&&h(e,["role"],i),e}function wA(n,e){let t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);let o=p(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);let s=p(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);let c=p(n,["contents"]);if(e!==void 0&&c!=null){let g=Cr(c);Array.isArray(g)&&(g=g.map(b=>N_(b))),h(e,["contents"],g)}let f=p(n,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],N_(wi(f)));let m=p(n,["tools"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(b=>KA(b))),h(e,["tools"],g)}let v=p(n,["toolConfig"]);if(e!==void 0&&v!=null&&h(e,["toolConfig"],$A(v)),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function SA(n,e){let t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);let o=p(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);let s=p(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);let c=p(n,["contents"]);if(e!==void 0&&c!=null){let b=Cr(c);Array.isArray(b)&&(b=b.map(C=>C)),h(e,["contents"],b)}let f=p(n,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],wi(f));let m=p(n,["tools"]);if(e!==void 0&&m!=null){let b=m;Array.isArray(b)&&(b=b.map(C=>JA(C))),h(e,["tools"],b)}let v=p(n,["toolConfig"]);e!==void 0&&v!=null&&h(e,["toolConfig"],v);let g=p(n,["kmsKeyName"]);return e!==void 0&&g!=null&&h(e,["encryption_spec","kmsKeyName"],g),t}function EA(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["model"],nx(n,i));let o=p(e,["config"]);return o!=null&&wA(o,t),t}function TA(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["model"],nx(n,i));let o=p(e,["config"]);return o!=null&&SA(o,t),t}function AA(n,e){let t={},i=p(e,["name"]);return i!=null&&h(t,["_url","name"],bo(n,i)),t}function DA(n,e){let t={},i=p(e,["name"]);return i!=null&&h(t,["_url","name"],bo(n,i)),t}function kA(n){let e={},t=p(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function IA(n){let e={},t=p(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function MA(n){let e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=p(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function FA(n){let e={},t=p(n,["id"]);t!=null&&h(e,["id"],t);let i=p(n,["args"]);i!=null&&h(e,["args"],i);let o=p(n,["name"]);if(o!=null&&h(e,["name"],o),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NA(n){let e={},t=p(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);let i=p(n,["mode"]);if(i!=null&&h(e,["mode"],i),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function RA(n){let e={},t=p(n,["description"]);t!=null&&h(e,["description"],t);let i=p(n,["name"]);i!=null&&h(e,["name"],i);let o=p(n,["parameters"]);o!=null&&h(e,["parameters"],o);let s=p(n,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);let c=p(n,["response"]);c!=null&&h(e,["response"],c);let f=p(n,["responseJsonSchema"]);if(f!=null&&h(e,["responseJsonSchema"],f),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function PA(n,e){let t={},i=p(e,["name"]);return i!=null&&h(t,["_url","name"],bo(n,i)),t}function VA(n,e){let t={},i=p(e,["name"]);return i!=null&&h(t,["_url","name"],bo(n,i)),t}function LA(n){let e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=p(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function BA(n){let e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=p(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function OA(n,e){let t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);let o=p(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function HA(n,e){let t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);let o=p(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function UA(n){let e={},t=p(n,["config"]);return t!=null&&OA(t,e),e}function zA(n){let e={},t=p(n,["config"]);return t!=null&&HA(t,e),e}function GA(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);let o=p(n,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>c)),h(e,["cachedContents"],s)}return e}function qA(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);let o=p(n,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>c)),h(e,["cachedContents"],s)}return e}function WA(n){let e={},t=p(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);let i=p(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);let o=p(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);let s=p(n,["fileData"]);s!=null&&h(e,["fileData"],MA(s));let c=p(n,["functionCall"]);c!=null&&h(e,["functionCall"],FA(c));let f=p(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);let m=p(n,["inlineData"]);m!=null&&h(e,["inlineData"],bA(m));let v=p(n,["text"]);v!=null&&h(e,["text"],v);let g=p(n,["thought"]);g!=null&&h(e,["thought"],g);let b=p(n,["thoughtSignature"]);b!=null&&h(e,["thoughtSignature"],b);let C=p(n,["videoMetadata"]);return C!=null&&h(e,["videoMetadata"],C),e}function $A(n){let e={},t=p(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);let i=p(n,["functionCallingConfig"]);return i!=null&&h(e,["functionCallingConfig"],NA(i)),e}function KA(n){let e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=p(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);let i=p(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);let o=p(n,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=p(n,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(b=>b)),h(e,["functionDeclarations"],g)}let c=p(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],LA(c));let f=p(n,["googleSearch"]);f!=null&&h(e,["googleSearch"],BA(f));let m=p(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);let v=p(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function JA(n){let e={},t=p(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);let i=p(n,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=p(n,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);let s=p(n,["enterpriseWebSearch"]);s!=null&&h(e,["enterpriseWebSearch"],s);let c=p(n,["functionDeclarations"]);if(c!=null){let b=c;Array.isArray(b)&&(b=b.map(C=>RA(C))),h(e,["functionDeclarations"],b)}let f=p(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],f);let m=p(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);let v=p(n,["googleSearchRetrieval"]);v!=null&&h(e,["googleSearchRetrieval"],v);let g=p(n,["urlContext"]);return g!=null&&h(e,["urlContext"],g),e}function YA(n,e){let t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);let o=p(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function XA(n,e){let t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);let o=p(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function QA(n,e){let t={},i=p(e,["name"]);i!=null&&h(t,["_url","name"],bo(n,i));let o=p(e,["config"]);return o!=null&&YA(o,t),t}function ZA(n,e){let t={},i=p(e,["name"]);i!=null&&h(t,["_url","name"],bo(n,i));let o=p(e,["config"]);return o!=null&&XA(o,t),t}var Qm=class extends Lr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Co(sa.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=TA(this.apiClient,e);return f=vt("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>g)}else{let v=EA(this.apiClient,e);return f=vt("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),c.then(g=>g)}}async get(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=VA(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>g)}else{let v=PA(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),c.then(g=>g)}}async delete(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=DA(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=IA(g),C=new zd;return Object.assign(C,b),C})}else{let v=AA(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=kA(g),C=new zd;return Object.assign(C,b),C})}}async update(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=ZA(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>g)}else{let v=QA(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),c.then(g=>g)}}async listInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=zA(e);return f=vt("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=qA(g),C=new Gd;return Object.assign(C,b),C})}else{let v=UA(e);return f=vt("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=GA(g),C=new Gd;return Object.assign(C,b),C})}}};function $d(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function R_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vt(n){return this instanceof Vt?(this.v=n,this):new Vt(n)}function Pr(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(A){return function(F){return Promise.resolve(F).then(A,b)}}function f(A,F){i[A]&&(o[A]=function(R){return new Promise(function(B,N){s.push([A,R,B,N])>1||m(A,R)})},F&&(o[A]=F(o[A])))}function m(A,F){try{v(i[A](F))}catch(R){C(s[0][3],R)}}function v(A){A.value instanceof Vt?Promise.resolve(A.value.v).then(g,b):C(s[0][2],A)}function g(A){m("next",A)}function b(A){m("throw",A)}function C(A,F){A(F),s.shift(),s.length&&m(s[0][0],s[0][1])}}function Vr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof R_=="function"?R_(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(c){return new Promise(function(f,m){c=n[s](c),o(f,m,c.done,c.value)})}}function o(s,c,f,m){Promise.resolve(m).then(function(v){s({value:v,done:f})},c)}}function jA(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;let t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:hx(t)}function hx(n){if(n.parts===void 0||n.parts.length===0)return!1;for(let e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function eD(n){if(n.length!==0){for(let e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function P_(n){if(n===void 0||n.length===0)return[];let e=[],t=n.length,i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{let o=[],s=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),s&&!hx(n[i])&&(s=!1),i++;s?e.push(...o):e.pop()}return e}var Zm=class{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new jm(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},jm=class{constructor(e,t,i,o={},s=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),eD(s)}async sendMessage(e){var t;await this.sendPromise;let i=wi(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var s,c,f;let m=await o,v=(c=(s=m.candidates)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.content,g=m.automaticFunctionCallingHistory,b=this.getHistory(!0).length,C=[];g!=null&&(C=(f=g.slice(b))!==null&&f!==void 0?f:[]);let A=v?[v]:[];this.recordHistory(i,A,C)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;let i=wi(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let s=await o;return this.processStreamResponse(s,i)}getHistory(e=!1){let t=e?P_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Pr(this,arguments,function*(){var o,s,c,f,m,v;let g=[];try{for(var b=!0,C=Vr(e),A;A=yield Vt(C.next()),o=A.done,!o;b=!0){f=A.value,b=!1;let F=f;if(jA(F)){let R=(v=(m=F.candidates)===null||m===void 0?void 0:m[0])===null||v===void 0?void 0:v.content;R!==void 0&&g.push(R)}yield yield Vt(F)}}catch(F){s={error:F}}finally{try{!b&&!o&&(c=C.return)&&(yield Vt(c.call(C)))}finally{if(s)throw s.error}}this.recordHistory(t,g)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(s=>s.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...P_(i)):this.history.push(e),this.history.push(...o)}};var Kd=class n extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,n.prototype)}};function tD(n){let e={},t=p(n,["file"]);return t!=null&&h(e,["file"],t),e}function nD(n){let e={},t=p(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function iD(n){let e={},t=p(n,["name"]);return t!=null&&h(e,["_url","file"],lx(t)),e}function rD(n){let e={},t=p(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function oD(n){let e={},t=p(n,["name"]);return t!=null&&h(e,["_url","file"],lx(t)),e}function aD(n,e){let t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);let o=p(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function sD(n){let e={},t=p(n,["config"]);return t!=null&&aD(t,e),e}function lD(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);let o=p(n,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>c)),h(e,["files"],s)}return e}var eh=class extends Lr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Co(sa.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=sD(e);return s=vt("files",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{let g=v;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{let v=lD(m),g=new zm;return Object.assign(g,v),g})}}async createInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=tD(e);return s=vt("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{let v=nD(m),g=new Gm;return Object.assign(g,v),g})}}async get(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=oD(e);return s=vt("files/{file}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=iD(e);return s=vt("files/{file}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{let g=v;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{let v=rD(m),g=new qm;return Object.assign(g,v),g})}}};function Nd(n){let e={},t=p(n,["data"]);if(t!=null&&h(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function uD(n){let e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>ED(s))),h(e,["parts"],o)}let i=p(n,["role"]);return i!=null&&h(e,["role"],i),e}function cD(n){let e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=p(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function dD(n){let e={},t=p(n,["id"]);t!=null&&h(e,["id"],t);let i=p(n,["args"]);i!=null&&h(e,["args"],i);let o=p(n,["name"]);if(o!=null&&h(e,["name"],o),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fD(n){let e={},t=p(n,["description"]);t!=null&&h(e,["description"],t);let i=p(n,["name"]);i!=null&&h(e,["name"],i);let o=p(n,["parameters"]);o!=null&&h(e,["parameters"],o);let s=p(n,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);let c=p(n,["response"]);c!=null&&h(e,["response"],c);let f=p(n,["responseJsonSchema"]);if(f!=null&&h(e,["responseJsonSchema"],f),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pD(n){let e={},t=p(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);let i=p(n,["responseJsonSchema"]);i!=null&&h(e,["responseJsonSchema"],i);let o=p(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);let s=p(n,["candidateCount"]);s!=null&&h(e,["candidateCount"],s);let c=p(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);let f=p(n,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);let m=p(n,["logprobs"]);m!=null&&h(e,["logprobs"],m);let v=p(n,["maxOutputTokens"]);v!=null&&h(e,["maxOutputTokens"],v);let g=p(n,["mediaResolution"]);g!=null&&h(e,["mediaResolution"],g);let b=p(n,["presencePenalty"]);b!=null&&h(e,["presencePenalty"],b);let C=p(n,["responseLogprobs"]);C!=null&&h(e,["responseLogprobs"],C);let A=p(n,["responseMimeType"]);A!=null&&h(e,["responseMimeType"],A);let F=p(n,["responseModalities"]);F!=null&&h(e,["responseModalities"],F);let R=p(n,["responseSchema"]);R!=null&&h(e,["responseSchema"],R);let B=p(n,["routingConfig"]);B!=null&&h(e,["routingConfig"],B);let N=p(n,["seed"]);N!=null&&h(e,["seed"],N);let O=p(n,["speechConfig"]);O!=null&&h(e,["speechConfig"],O);let q=p(n,["stopSequences"]);q!=null&&h(e,["stopSequences"],q);let X=p(n,["temperature"]);X!=null&&h(e,["temperature"],X);let j=p(n,["thinkingConfig"]);j!=null&&h(e,["thinkingConfig"],j);let ie=p(n,["topK"]);ie!=null&&h(e,["topK"],ie);let he=p(n,["topP"]);if(he!=null&&h(e,["topP"],he),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mD(n){let e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=p(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function hD(n){let e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=p(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function gD(n,e){let t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);let o=p(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);let s=p(n,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);let c=p(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);let f=p(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);let m=p(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);let v=p(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);let g=p(n,["seed"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","seed"],g);let b=p(n,["speechConfig"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","speechConfig"],Nh(b));let C=p(n,["thinkingConfig"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","thinkingConfig"],C);let A=p(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],A);let F=p(n,["systemInstruction"]);e!==void 0&&F!=null&&h(e,["setup","systemInstruction"],uD(wi(F)));let R=p(n,["tools"]);if(e!==void 0&&R!=null){let ie=Xs(R);Array.isArray(ie)&&(ie=ie.map(he=>AD(Ys(he)))),h(e,["setup","tools"],ie)}let B=p(n,["sessionResumption"]);e!==void 0&&B!=null&&h(e,["setup","sessionResumption"],TD(B));let N=p(n,["inputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","inputAudioTranscription"],N);let O=p(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&h(e,["setup","outputAudioTranscription"],O);let q=p(n,["realtimeInputConfig"]);e!==void 0&&q!=null&&h(e,["setup","realtimeInputConfig"],q);let X=p(n,["contextWindowCompression"]);e!==void 0&&X!=null&&h(e,["setup","contextWindowCompression"],X);let j=p(n,["proactivity"]);if(e!==void 0&&j!=null&&h(e,["setup","proactivity"],j),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function vD(n,e){let t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],pD(i));let o=p(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);let s=p(n,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);let c=p(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);let f=p(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);let m=p(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);let v=p(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);let g=p(n,["seed"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","seed"],g);let b=p(n,["speechConfig"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","speechConfig"],Nh(b));let C=p(n,["thinkingConfig"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","thinkingConfig"],C);let A=p(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],A);let F=p(n,["systemInstruction"]);e!==void 0&&F!=null&&h(e,["setup","systemInstruction"],wi(F));let R=p(n,["tools"]);if(e!==void 0&&R!=null){let he=Xs(R);Array.isArray(he)&&(he=he.map(ve=>DD(Ys(ve)))),h(e,["setup","tools"],he)}let B=p(n,["sessionResumption"]);e!==void 0&&B!=null&&h(e,["setup","sessionResumption"],B);let N=p(n,["inputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","inputAudioTranscription"],N);let O=p(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&h(e,["setup","outputAudioTranscription"],O);let q=p(n,["realtimeInputConfig"]);e!==void 0&&q!=null&&h(e,["setup","realtimeInputConfig"],q);let X=p(n,["contextWindowCompression"]);e!==void 0&&X!=null&&h(e,["setup","contextWindowCompression"],X);let j=p(n,["proactivity"]);e!==void 0&&j!=null&&h(e,["setup","proactivity"],j);let ie=p(n,["explicitVadSignal"]);return e!==void 0&&ie!=null&&h(e,["setup","explicitVadSignal"],ie),t}function yD(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["setup","model"],en(n,i));let o=p(e,["config"]);return o!=null&&h(t,["config"],gD(o,t)),t}function _D(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["setup","model"],en(n,i));let o=p(e,["config"]);return o!=null&&h(t,["config"],vD(o,t)),t}function xD(n){let e={},t=p(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function CD(n){let e={},t=p(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["weightedPrompts"],i)}return e}function bD(n){let e={},t=p(n,["media"]);if(t!=null){let v=ix(t);Array.isArray(v)&&(v=v.map(g=>Nd(g))),h(e,["mediaChunks"],v)}let i=p(n,["audio"]);i!=null&&h(e,["audio"],Nd(ox(i)));let o=p(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);let s=p(n,["video"]);s!=null&&h(e,["video"],Nd(rx(s)));let c=p(n,["text"]);c!=null&&h(e,["text"],c);let f=p(n,["activityStart"]);f!=null&&h(e,["activityStart"],f);let m=p(n,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function wD(n){let e={},t=p(n,["media"]);if(t!=null){let v=ix(t);Array.isArray(v)&&(v=v.map(g=>g)),h(e,["mediaChunks"],v)}let i=p(n,["audio"]);i!=null&&h(e,["audio"],ox(i));let o=p(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);let s=p(n,["video"]);s!=null&&h(e,["video"],rx(s));let c=p(n,["text"]);c!=null&&h(e,["text"],c);let f=p(n,["activityStart"]);f!=null&&h(e,["activityStart"],f);let m=p(n,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function SD(n){let e={},t=p(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);let i=p(n,["serverContent"]);i!=null&&h(e,["serverContent"],i);let o=p(n,["toolCall"]);o!=null&&h(e,["toolCall"],o);let s=p(n,["toolCallCancellation"]);s!=null&&h(e,["toolCallCancellation"],s);let c=p(n,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],kD(c));let f=p(n,["goAway"]);f!=null&&h(e,["goAway"],f);let m=p(n,["sessionResumptionUpdate"]);m!=null&&h(e,["sessionResumptionUpdate"],m);let v=p(n,["voiceActivityDetectionSignal"]);return v!=null&&h(e,["voiceActivityDetectionSignal"],v),e}function ED(n){let e={},t=p(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);let i=p(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);let o=p(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);let s=p(n,["fileData"]);s!=null&&h(e,["fileData"],cD(s));let c=p(n,["functionCall"]);c!=null&&h(e,["functionCall"],dD(c));let f=p(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);let m=p(n,["inlineData"]);m!=null&&h(e,["inlineData"],Nd(m));let v=p(n,["text"]);v!=null&&h(e,["text"],v);let g=p(n,["thought"]);g!=null&&h(e,["thought"],g);let b=p(n,["thoughtSignature"]);b!=null&&h(e,["thoughtSignature"],b);let C=p(n,["videoMetadata"]);return C!=null&&h(e,["videoMetadata"],C),e}function TD(n){let e={},t=p(n,["handle"]);if(t!=null&&h(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function AD(n){let e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=p(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);let i=p(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);let o=p(n,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=p(n,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(b=>b)),h(e,["functionDeclarations"],g)}let c=p(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],mD(c));let f=p(n,["googleSearch"]);f!=null&&h(e,["googleSearch"],hD(f));let m=p(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);let v=p(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function DD(n){let e={},t=p(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);let i=p(n,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=p(n,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);let s=p(n,["enterpriseWebSearch"]);s!=null&&h(e,["enterpriseWebSearch"],s);let c=p(n,["functionDeclarations"]);if(c!=null){let b=c;Array.isArray(b)&&(b=b.map(C=>fD(C))),h(e,["functionDeclarations"],b)}let f=p(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],f);let m=p(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);let v=p(n,["googleSearchRetrieval"]);v!=null&&h(e,["googleSearchRetrieval"],v);let g=p(n,["urlContext"]);return g!=null&&h(e,["urlContext"],g),e}function kD(n){let e={},t=p(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);let i=p(n,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);let o=p(n,["candidatesTokenCount"]);o!=null&&h(e,["responseTokenCount"],o);let s=p(n,["toolUsePromptTokenCount"]);s!=null&&h(e,["toolUsePromptTokenCount"],s);let c=p(n,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);let f=p(n,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);let m=p(n,["promptTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(F=>F)),h(e,["promptTokensDetails"],A)}let v=p(n,["cacheTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(F=>F)),h(e,["cacheTokensDetails"],A)}let g=p(n,["candidatesTokensDetails"]);if(g!=null){let A=g;Array.isArray(A)&&(A=A.map(F=>F)),h(e,["responseTokensDetails"],A)}let b=p(n,["toolUsePromptTokensDetails"]);if(b!=null){let A=b;Array.isArray(A)&&(A=A.map(F=>F)),h(e,["toolUsePromptTokensDetails"],A)}let C=p(n,["trafficType"]);return C!=null&&h(e,["trafficType"],C),e}function ID(n){let e={},t=p(n,["data"]);if(t!=null&&h(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function MD(n){let e={},t=p(n,["content"]);t!=null&&h(e,["content"],t);let i=p(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],FD(i));let o=p(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);let s=p(n,["finishReason"]);s!=null&&h(e,["finishReason"],s);let c=p(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);let f=p(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);let m=p(n,["index"]);m!=null&&h(e,["index"],m);let v=p(n,["logprobsResult"]);v!=null&&h(e,["logprobsResult"],v);let g=p(n,["safetyRatings"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(A=>A)),h(e,["safetyRatings"],C)}let b=p(n,["urlContextMetadata"]);return b!=null&&h(e,["urlContextMetadata"],b),e}function FD(n){let e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["citations"],i)}return e}function ND(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["contents"]);if(o!=null){let s=Cr(o);Array.isArray(s)&&(s=s.map(c=>c)),h(t,["contents"],s)}return t}function RD(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["tokensInfo"],o)}return e}function PD(n){let e={},t=p(n,["values"]);t!=null&&h(e,["values"],t);let i=p(n,["statistics"]);return i!=null&&h(e,["statistics"],VD(i)),e}function VD(n){let e={},t=p(n,["truncated"]);t!=null&&h(e,["truncated"],t);let i=p(n,["token_count"]);return i!=null&&h(e,["tokenCount"],i),e}function uf(n){let e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>Wk(s))),h(e,["parts"],o)}let i=p(n,["role"]);return i!=null&&h(e,["role"],i),e}function LD(n){let e={},t=p(n,["controlType"]);t!=null&&h(e,["controlType"],t);let i=p(n,["enableControlImageComputation"]);return i!=null&&h(e,["computeControl"],i),e}function BD(n){let e={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function OD(n,e){let t={},i=p(n,["systemInstruction"]);e!==void 0&&i!=null&&h(e,["systemInstruction"],wi(i));let o=p(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>_x(f))),h(e,["tools"],c)}let s=p(n,["generationConfig"]);return e!==void 0&&s!=null&&h(e,["generationConfig"],Ik(s)),t}function HD(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["contents"]);if(o!=null){let c=Cr(o);Array.isArray(c)&&(c=c.map(f=>uf(f))),h(t,["contents"],c)}let s=p(e,["config"]);return s!=null&&BD(s),t}function UD(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["contents"]);if(o!=null){let c=Cr(o);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["contents"],c)}let s=p(e,["config"]);return s!=null&&OD(s,t),t}function zD(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["totalTokens"]);i!=null&&h(e,["totalTokens"],i);let o=p(n,["cachedContentTokenCount"]);return o!=null&&h(e,["cachedContentTokenCount"],o),e}function GD(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["totalTokens"]);return i!=null&&h(e,["totalTokens"],i),e}function qD(n,e){let t={},i=p(e,["model"]);return i!=null&&h(t,["_url","name"],en(n,i)),t}function WD(n,e){let t={},i=p(e,["model"]);return i!=null&&h(t,["_url","name"],en(n,i)),t}function $D(n){let e={},t=p(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function KD(n){let e={},t=p(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function JD(n,e){let t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);let o=p(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);let s=p(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);let c=p(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);let f=p(n,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);let m=p(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);let v=p(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);let g=p(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);let b=p(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&h(e,["parameters","includeSafetyAttributes"],b);let C=p(n,["includeRaiReason"]);e!==void 0&&C!=null&&h(e,["parameters","includeRaiReason"],C);let A=p(n,["language"]);e!==void 0&&A!=null&&h(e,["parameters","language"],A);let F=p(n,["outputMimeType"]);e!==void 0&&F!=null&&h(e,["parameters","outputOptions","mimeType"],F);let R=p(n,["outputCompressionQuality"]);e!==void 0&&R!=null&&h(e,["parameters","outputOptions","compressionQuality"],R);let B=p(n,["addWatermark"]);e!==void 0&&B!=null&&h(e,["parameters","addWatermark"],B);let N=p(n,["labels"]);e!==void 0&&N!=null&&h(e,["labels"],N);let O=p(n,["editMode"]);e!==void 0&&O!=null&&h(e,["parameters","editMode"],O);let q=p(n,["baseSteps"]);return e!==void 0&&q!=null&&h(e,["parameters","editConfig","baseSteps"],q),t}function YD(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);let s=p(e,["referenceImages"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>Qk(m))),h(t,["instances[0]","referenceImages"],f)}let c=p(e,["config"]);return c!=null&&JD(c,t),t}function XD(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>cf(s))),h(e,["generatedImages"],o)}return e}function QD(n,e){let t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);let o=p(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);let s=p(n,["outputDimensionality"]);if(e!==void 0&&s!=null&&h(e,["requests[]","outputDimensionality"],s),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function ZD(n,e){let t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&h(e,["instances[]","task_type"],i);let o=p(n,["title"]);e!==void 0&&o!=null&&h(e,["instances[]","title"],o);let s=p(n,["outputDimensionality"]);e!==void 0&&s!=null&&h(e,["parameters","outputDimensionality"],s);let c=p(n,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);let f=p(n,["autoTruncate"]);return e!==void 0&&f!=null&&h(e,["parameters","autoTruncate"],f),t}function jD(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["contents"]);if(o!=null){let f=Ih(n,o);Array.isArray(f)&&(f=f.map(m=>m)),h(t,["requests[]","content"],f)}let s=p(e,["config"]);s!=null&&QD(s,t);let c=p(e,["model"]);return c!==void 0&&h(t,["requests[]","model"],en(n,c)),t}function ek(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["contents"]);if(o!=null){let c=Ih(n,o);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["instances[]","content"],c)}let s=p(e,["config"]);return s!=null&&ZD(s,t),t}function tk(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>c)),h(e,["embeddings"],s)}let o=p(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function nk(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>PD(c))),h(e,["embeddings"],s)}let o=p(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function ik(n){let e={},t=p(n,["endpoint"]);t!=null&&h(e,["name"],t);let i=p(n,["deployedModelId"]);return i!=null&&h(e,["deployedModelId"],i),e}function rk(n){let e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=p(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function ok(n){let e={},t=p(n,["id"]);t!=null&&h(e,["id"],t);let i=p(n,["args"]);i!=null&&h(e,["args"],i);let o=p(n,["name"]);if(o!=null&&h(e,["name"],o),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ak(n){let e={},t=p(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);let i=p(n,["mode"]);if(i!=null&&h(e,["mode"],i),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sk(n){let e={},t=p(n,["description"]);t!=null&&h(e,["description"],t);let i=p(n,["name"]);i!=null&&h(e,["name"],i);let o=p(n,["parameters"]);o!=null&&h(e,["parameters"],o);let s=p(n,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);let c=p(n,["response"]);c!=null&&h(e,["response"],c);let f=p(n,["responseJsonSchema"]);if(f!=null&&h(e,["responseJsonSchema"],f),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function lk(n,e,t){let i={},o=p(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],uf(wi(o)));let s=p(e,["temperature"]);s!=null&&h(i,["temperature"],s);let c=p(e,["topP"]);c!=null&&h(i,["topP"],c);let f=p(e,["topK"]);f!=null&&h(i,["topK"],f);let m=p(e,["candidateCount"]);m!=null&&h(i,["candidateCount"],m);let v=p(e,["maxOutputTokens"]);v!=null&&h(i,["maxOutputTokens"],v);let g=p(e,["stopSequences"]);g!=null&&h(i,["stopSequences"],g);let b=p(e,["responseLogprobs"]);b!=null&&h(i,["responseLogprobs"],b);let C=p(e,["logprobs"]);C!=null&&h(i,["logprobs"],C);let A=p(e,["presencePenalty"]);A!=null&&h(i,["presencePenalty"],A);let F=p(e,["frequencyPenalty"]);F!=null&&h(i,["frequencyPenalty"],F);let R=p(e,["seed"]);R!=null&&h(i,["seed"],R);let B=p(e,["responseMimeType"]);B!=null&&h(i,["responseMimeType"],B);let N=p(e,["responseSchema"]);N!=null&&h(i,["responseSchema"],Mh(N));let O=p(e,["responseJsonSchema"]);if(O!=null&&h(i,["responseJsonSchema"],O),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let q=p(e,["safetySettings"]);if(t!==void 0&&q!=null){let H=q;Array.isArray(H)&&(H=H.map(De=>Zk(De))),h(t,["safetySettings"],H)}let X=p(e,["tools"]);if(t!==void 0&&X!=null){let H=Xs(X);Array.isArray(H)&&(H=H.map(De=>o3(Ys(De)))),h(t,["tools"],H)}let j=p(e,["toolConfig"]);if(t!==void 0&&j!=null&&h(t,["toolConfig"],r3(j)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let ie=p(e,["cachedContent"]);t!==void 0&&ie!=null&&h(t,["cachedContent"],bo(n,ie));let he=p(e,["responseModalities"]);he!=null&&h(i,["responseModalities"],he);let ve=p(e,["mediaResolution"]);ve!=null&&h(i,["mediaResolution"],ve);let me=p(e,["speechConfig"]);if(me!=null&&h(i,["speechConfig"],Fh(me)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let Te=p(e,["thinkingConfig"]);Te!=null&&h(i,["thinkingConfig"],Te);let $=p(e,["imageConfig"]);$!=null&&h(i,["imageConfig"],Pk($));let le=p(e,["enableEnhancedCivicAnswers"]);return le!=null&&h(i,["enableEnhancedCivicAnswers"],le),i}function uk(n,e,t){let i={},o=p(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],wi(o));let s=p(e,["temperature"]);s!=null&&h(i,["temperature"],s);let c=p(e,["topP"]);c!=null&&h(i,["topP"],c);let f=p(e,["topK"]);f!=null&&h(i,["topK"],f);let m=p(e,["candidateCount"]);m!=null&&h(i,["candidateCount"],m);let v=p(e,["maxOutputTokens"]);v!=null&&h(i,["maxOutputTokens"],v);let g=p(e,["stopSequences"]);g!=null&&h(i,["stopSequences"],g);let b=p(e,["responseLogprobs"]);b!=null&&h(i,["responseLogprobs"],b);let C=p(e,["logprobs"]);C!=null&&h(i,["logprobs"],C);let A=p(e,["presencePenalty"]);A!=null&&h(i,["presencePenalty"],A);let F=p(e,["frequencyPenalty"]);F!=null&&h(i,["frequencyPenalty"],F);let R=p(e,["seed"]);R!=null&&h(i,["seed"],R);let B=p(e,["responseMimeType"]);B!=null&&h(i,["responseMimeType"],B);let N=p(e,["responseSchema"]);N!=null&&h(i,["responseSchema"],Mh(N));let O=p(e,["responseJsonSchema"]);O!=null&&h(i,["responseJsonSchema"],O);let q=p(e,["routingConfig"]);q!=null&&h(i,["routingConfig"],q);let X=p(e,["modelSelectionConfig"]);X!=null&&h(i,["modelConfig"],X);let j=p(e,["safetySettings"]);if(t!==void 0&&j!=null){let Xe=j;Array.isArray(Xe)&&(Xe=Xe.map(ft=>ft)),h(t,["safetySettings"],Xe)}let ie=p(e,["tools"]);if(t!==void 0&&ie!=null){let Xe=Xs(ie);Array.isArray(Xe)&&(Xe=Xe.map(ft=>_x(Ys(ft)))),h(t,["tools"],Xe)}let he=p(e,["toolConfig"]);t!==void 0&&he!=null&&h(t,["toolConfig"],he);let ve=p(e,["labels"]);t!==void 0&&ve!=null&&h(t,["labels"],ve);let me=p(e,["cachedContent"]);t!==void 0&&me!=null&&h(t,["cachedContent"],bo(n,me));let Te=p(e,["responseModalities"]);Te!=null&&h(i,["responseModalities"],Te);let $=p(e,["mediaResolution"]);$!=null&&h(i,["mediaResolution"],$);let le=p(e,["speechConfig"]);le!=null&&h(i,["speechConfig"],Fh(le));let H=p(e,["audioTimestamp"]);H!=null&&h(i,["audioTimestamp"],H);let De=p(e,["thinkingConfig"]);De!=null&&h(i,["thinkingConfig"],De);let pt=p(e,["imageConfig"]);if(pt!=null&&h(i,["imageConfig"],Vk(pt)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function V_(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["contents"]);if(o!=null){let c=Cr(o);Array.isArray(c)&&(c=c.map(f=>uf(f))),h(t,["contents"],c)}let s=p(e,["config"]);return s!=null&&h(t,["generationConfig"],lk(n,s,t)),t}function L_(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["contents"]);if(o!=null){let c=Cr(o);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["contents"],c)}let s=p(e,["config"]);return s!=null&&h(t,["generationConfig"],uk(n,s,t)),t}function B_(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(v=>MD(v))),h(e,["candidates"],m)}let o=p(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);let s=p(n,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);let c=p(n,["responseId"]);c!=null&&h(e,["responseId"],c);let f=p(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function O_(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["candidates"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(g=>g)),h(e,["candidates"],v)}let o=p(n,["createTime"]);o!=null&&h(e,["createTime"],o);let s=p(n,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);let c=p(n,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);let f=p(n,["responseId"]);f!=null&&h(e,["responseId"],f);let m=p(n,["usageMetadata"]);return m!=null&&h(e,["usageMetadata"],m),e}function ck(n,e){let t={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=p(n,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);let o=p(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);let s=p(n,["guidanceScale"]);if(e!==void 0&&s!=null&&h(e,["parameters","guidanceScale"],s),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let c=p(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);let f=p(n,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);let m=p(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);let v=p(n,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);let g=p(n,["language"]);e!==void 0&&g!=null&&h(e,["parameters","language"],g);let b=p(n,["outputMimeType"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","mimeType"],b);let C=p(n,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&h(e,["parameters","outputOptions","compressionQuality"],C),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let A=p(n,["imageSize"]);if(e!==void 0&&A!=null&&h(e,["parameters","sampleImageSize"],A),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function dk(n,e){let t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);let o=p(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);let s=p(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);let c=p(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);let f=p(n,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);let m=p(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);let v=p(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);let g=p(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);let b=p(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&h(e,["parameters","includeSafetyAttributes"],b);let C=p(n,["includeRaiReason"]);e!==void 0&&C!=null&&h(e,["parameters","includeRaiReason"],C);let A=p(n,["language"]);e!==void 0&&A!=null&&h(e,["parameters","language"],A);let F=p(n,["outputMimeType"]);e!==void 0&&F!=null&&h(e,["parameters","outputOptions","mimeType"],F);let R=p(n,["outputCompressionQuality"]);e!==void 0&&R!=null&&h(e,["parameters","outputOptions","compressionQuality"],R);let B=p(n,["addWatermark"]);e!==void 0&&B!=null&&h(e,["parameters","addWatermark"],B);let N=p(n,["labels"]);e!==void 0&&N!=null&&h(e,["labels"],N);let O=p(n,["imageSize"]);e!==void 0&&O!=null&&h(e,["parameters","sampleImageSize"],O);let q=p(n,["enhancePrompt"]);return e!==void 0&&q!=null&&h(e,["parameters","enhancePrompt"],q),t}function fk(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);let s=p(e,["config"]);return s!=null&&ck(s,t),t}function pk(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);let s=p(e,["config"]);return s!=null&&dk(s,t),t}function mk(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>Tk(c))),h(e,["generatedImages"],s)}let o=p(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],vx(o)),e}function hk(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>cf(c))),h(e,["generatedImages"],s)}let o=p(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],yx(o)),e}function gk(n,e){let t={},i=p(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let o=p(n,["durationSeconds"]);if(e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=p(n,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);let c=p(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);let f=p(n,["personGeneration"]);if(e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let m=p(n,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);let v=p(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let g=p(n,["lastFrame"]);e!==void 0&&g!=null&&h(e,["instances[0]","lastFrame"],df(g));let b=p(n,["referenceImages"]);if(e!==void 0&&b!=null){let C=b;Array.isArray(C)&&(C=C.map(A=>y3(A))),h(e,["instances[0]","referenceImages"],C)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function vk(n,e){let t={},i=p(n,["numberOfVideos"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);let o=p(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);let s=p(n,["fps"]);e!==void 0&&s!=null&&h(e,["parameters","fps"],s);let c=p(n,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);let f=p(n,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);let m=p(n,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);let v=p(n,["resolution"]);e!==void 0&&v!=null&&h(e,["parameters","resolution"],v);let g=p(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);let b=p(n,["pubsubTopic"]);e!==void 0&&b!=null&&h(e,["parameters","pubsubTopic"],b);let C=p(n,["negativePrompt"]);e!==void 0&&C!=null&&h(e,["parameters","negativePrompt"],C);let A=p(n,["enhancePrompt"]);e!==void 0&&A!=null&&h(e,["parameters","enhancePrompt"],A);let F=p(n,["generateAudio"]);e!==void 0&&F!=null&&h(e,["parameters","generateAudio"],F);let R=p(n,["lastFrame"]);e!==void 0&&R!=null&&h(e,["instances[0]","lastFrame"],Br(R));let B=p(n,["referenceImages"]);if(e!==void 0&&B!=null){let q=B;Array.isArray(q)&&(q=q.map(X=>_3(X))),h(e,["instances[0]","referenceImages"],q)}let N=p(n,["mask"]);e!==void 0&&N!=null&&h(e,["instances[0]","mask"],v3(N));let O=p(n,["compressionQuality"]);return e!==void 0&&O!=null&&h(e,["parameters","compressionQuality"],O),t}function yk(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["metadata"]);i!=null&&h(e,["metadata"],i);let o=p(n,["done"]);o!=null&&h(e,["done"],o);let s=p(n,["error"]);s!=null&&h(e,["error"],s);let c=p(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],bk(c)),e}function _k(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["metadata"]);i!=null&&h(e,["metadata"],i);let o=p(n,["done"]);o!=null&&h(e,["done"],o);let s=p(n,["error"]);s!=null&&h(e,["error"],s);let c=p(n,["response"]);return c!=null&&h(e,["response"],wk(c)),e}function xk(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);let s=p(e,["image"]);s!=null&&h(t,["instances[0]","image"],df(s));let c=p(e,["video"]);c!=null&&h(t,["instances[0]","video"],xx(c));let f=p(e,["source"]);f!=null&&Sk(f,t);let m=p(e,["config"]);return m!=null&&gk(m,t),t}function Ck(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);let s=p(e,["image"]);s!=null&&h(t,["instances[0]","image"],Br(s));let c=p(e,["video"]);c!=null&&h(t,["instances[0]","video"],Cx(c));let f=p(e,["source"]);f!=null&&Ek(f,t);let m=p(e,["config"]);return m!=null&&vk(m,t),t}function bk(n){let e={},t=p(n,["generatedSamples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(c=>Dk(c))),h(e,["generatedVideos"],s)}let i=p(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);let o=p(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function wk(n){let e={},t=p(n,["videos"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(c=>kk(c))),h(e,["generatedVideos"],s)}let i=p(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);let o=p(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function Sk(n,e){let t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);let o=p(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],df(o));let s=p(n,["video"]);return e!==void 0&&s!=null&&h(e,["instances[0]","video"],xx(s)),t}function Ek(n,e){let t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);let o=p(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],Br(o));let s=p(n,["video"]);return e!==void 0&&s!=null&&h(e,["instances[0]","video"],Cx(s)),t}function Tk(n){let e={},t=p(n,["_self"]);t!=null&&h(e,["image"],Lk(t));let i=p(n,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);let o=p(n,["_self"]);return o!=null&&h(e,["safetyAttributes"],vx(o)),e}function cf(n){let e={},t=p(n,["_self"]);t!=null&&h(e,["image"],gx(t));let i=p(n,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);let o=p(n,["_self"]);o!=null&&h(e,["safetyAttributes"],yx(o));let s=p(n,["prompt"]);return s!=null&&h(e,["enhancedPrompt"],s),e}function Ak(n){let e={},t=p(n,["_self"]);t!=null&&h(e,["mask"],gx(t));let i=p(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["labels"],o)}return e}function Dk(n){let e={},t=p(n,["video"]);return t!=null&&h(e,["video"],h3(t)),e}function kk(n){let e={},t=p(n,["_self"]);return t!=null&&h(e,["video"],g3(t)),e}function Ik(n){let e={},t=p(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);let i=p(n,["responseJsonSchema"]);i!=null&&h(e,["responseJsonSchema"],i);let o=p(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);let s=p(n,["candidateCount"]);s!=null&&h(e,["candidateCount"],s);let c=p(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);let f=p(n,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);let m=p(n,["logprobs"]);m!=null&&h(e,["logprobs"],m);let v=p(n,["maxOutputTokens"]);v!=null&&h(e,["maxOutputTokens"],v);let g=p(n,["mediaResolution"]);g!=null&&h(e,["mediaResolution"],g);let b=p(n,["presencePenalty"]);b!=null&&h(e,["presencePenalty"],b);let C=p(n,["responseLogprobs"]);C!=null&&h(e,["responseLogprobs"],C);let A=p(n,["responseMimeType"]);A!=null&&h(e,["responseMimeType"],A);let F=p(n,["responseModalities"]);F!=null&&h(e,["responseModalities"],F);let R=p(n,["responseSchema"]);R!=null&&h(e,["responseSchema"],R);let B=p(n,["routingConfig"]);B!=null&&h(e,["routingConfig"],B);let N=p(n,["seed"]);N!=null&&h(e,["seed"],N);let O=p(n,["speechConfig"]);O!=null&&h(e,["speechConfig"],O);let q=p(n,["stopSequences"]);q!=null&&h(e,["stopSequences"],q);let X=p(n,["temperature"]);X!=null&&h(e,["temperature"],X);let j=p(n,["thinkingConfig"]);j!=null&&h(e,["thinkingConfig"],j);let ie=p(n,["topK"]);ie!=null&&h(e,["topK"],ie);let he=p(n,["topP"]);if(he!=null&&h(e,["topP"],he),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Mk(n,e){let t={},i=p(e,["model"]);return i!=null&&h(t,["_url","name"],en(n,i)),t}function Fk(n,e){let t={},i=p(e,["model"]);return i!=null&&h(t,["_url","name"],en(n,i)),t}function Nk(n){let e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=p(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Rk(n){let e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=p(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function Pk(n){let e={},t=p(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);let i=p(n,["imageSize"]);if(i!=null&&h(e,["imageSize"],i),p(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Vk(n){let e={},t=p(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);let i=p(n,["imageSize"]);i!=null&&h(e,["imageSize"],i);let o=p(n,["personGeneration"]);o!=null&&h(e,["personGeneration"],o);let s=p(n,["outputMimeType"]);s!=null&&h(e,["imageOutputOptions","mimeType"],s);let c=p(n,["outputCompressionQuality"]);return c!=null&&h(e,["imageOutputOptions","compressionQuality"],c),e}function Lk(n){let e={},t=p(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],aa(t));let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function gx(n){let e={},t=p(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);let i=p(n,["bytesBase64Encoded"]);i!=null&&h(e,["imageBytes"],aa(i));let o=p(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function df(n){let e={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let t=p(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],aa(t));let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Br(n){let e={},t=p(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);let i=p(n,["imageBytes"]);i!=null&&h(e,["bytesBase64Encoded"],aa(i));let o=p(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Bk(n,e,t){let i={},o=p(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);let s=p(e,["pageToken"]);t!==void 0&&s!=null&&h(t,["_query","pageToken"],s);let c=p(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);let f=p(e,["queryBase"]);return t!==void 0&&f!=null&&h(t,["_url","models_url"],ux(n,f)),i}function Ok(n,e,t){let i={},o=p(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);let s=p(e,["pageToken"]);t!==void 0&&s!=null&&h(t,["_query","pageToken"],s);let c=p(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);let f=p(e,["queryBase"]);return t!==void 0&&f!=null&&h(t,["_url","models_url"],ux(n,f)),i}function Hk(n,e){let t={},i=p(e,["config"]);return i!=null&&Bk(n,i,t),t}function Uk(n,e){let t={},i=p(e,["config"]);return i!=null&&Ok(n,i,t),t}function zk(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);let o=p(n,["_self"]);if(o!=null){let s=cx(o);Array.isArray(s)&&(s=s.map(c=>th(c))),h(e,["models"],s)}return e}function Gk(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);let o=p(n,["_self"]);if(o!=null){let s=cx(o);Array.isArray(s)&&(s=s.map(c=>nh(c))),h(e,["models"],s)}return e}function qk(n){let e={},t=p(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);let i=p(n,["segmentationClasses"]);i!=null&&h(e,["maskClasses"],i);let o=p(n,["maskDilation"]);return o!=null&&h(e,["dilation"],o),e}function th(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["displayName"]);i!=null&&h(e,["displayName"],i);let o=p(n,["description"]);o!=null&&h(e,["description"],o);let s=p(n,["version"]);s!=null&&h(e,["version"],s);let c=p(n,["_self"]);c!=null&&h(e,["tunedModelInfo"],a3(c));let f=p(n,["inputTokenLimit"]);f!=null&&h(e,["inputTokenLimit"],f);let m=p(n,["outputTokenLimit"]);m!=null&&h(e,["outputTokenLimit"],m);let v=p(n,["supportedGenerationMethods"]);v!=null&&h(e,["supportedActions"],v);let g=p(n,["temperature"]);g!=null&&h(e,["temperature"],g);let b=p(n,["maxTemperature"]);b!=null&&h(e,["maxTemperature"],b);let C=p(n,["topP"]);C!=null&&h(e,["topP"],C);let A=p(n,["topK"]);A!=null&&h(e,["topK"],A);let F=p(n,["thinking"]);return F!=null&&h(e,["thinking"],F),e}function nh(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["displayName"]);i!=null&&h(e,["displayName"],i);let o=p(n,["description"]);o!=null&&h(e,["description"],o);let s=p(n,["versionId"]);s!=null&&h(e,["version"],s);let c=p(n,["deployedModels"]);if(c!=null){let b=c;Array.isArray(b)&&(b=b.map(C=>ik(C))),h(e,["endpoints"],b)}let f=p(n,["labels"]);f!=null&&h(e,["labels"],f);let m=p(n,["_self"]);m!=null&&h(e,["tunedModelInfo"],s3(m));let v=p(n,["defaultCheckpointId"]);v!=null&&h(e,["defaultCheckpointId"],v);let g=p(n,["checkpoints"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(C=>C)),h(e,["checkpoints"],b)}return e}function Wk(n){let e={},t=p(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);let i=p(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);let o=p(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);let s=p(n,["fileData"]);s!=null&&h(e,["fileData"],rk(s));let c=p(n,["functionCall"]);c!=null&&h(e,["functionCall"],ok(c));let f=p(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);let m=p(n,["inlineData"]);m!=null&&h(e,["inlineData"],ID(m));let v=p(n,["text"]);v!=null&&h(e,["text"],v);let g=p(n,["thought"]);g!=null&&h(e,["thought"],g);let b=p(n,["thoughtSignature"]);b!=null&&h(e,["thoughtSignature"],b);let C=p(n,["videoMetadata"]);return C!=null&&h(e,["videoMetadata"],C),e}function $k(n){let e={},t=p(n,["productImage"]);return t!=null&&h(e,["image"],Br(t)),e}function Kk(n,e){let t={},i=p(n,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);let o=p(n,["baseSteps"]);e!==void 0&&o!=null&&h(e,["parameters","baseSteps"],o);let s=p(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);let c=p(n,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);let f=p(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);let m=p(n,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);let v=p(n,["addWatermark"]);e!==void 0&&v!=null&&h(e,["parameters","addWatermark"],v);let g=p(n,["outputMimeType"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","mimeType"],g);let b=p(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","compressionQuality"],b);let C=p(n,["enhancePrompt"]);e!==void 0&&C!=null&&h(e,["parameters","enhancePrompt"],C);let A=p(n,["labels"]);return e!==void 0&&A!=null&&h(e,["labels"],A),t}function Jk(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["source"]);o!=null&&Xk(o,t);let s=p(e,["config"]);return s!=null&&Kk(s,t),t}function Yk(n){let e={},t=p(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>cf(o))),h(e,["generatedImages"],i)}return e}function Xk(n,e){let t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);let o=p(n,["personImage"]);e!==void 0&&o!=null&&h(e,["instances[0]","personImage","image"],Br(o));let s=p(n,["productImages"]);if(e!==void 0&&s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>$k(f))),h(e,["instances[0]","productImages"],c)}return t}function Qk(n){let e={},t=p(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],Br(t));let i=p(n,["referenceId"]);i!=null&&h(e,["referenceId"],i);let o=p(n,["referenceType"]);o!=null&&h(e,["referenceType"],o);let s=p(n,["maskImageConfig"]);s!=null&&h(e,["maskImageConfig"],qk(s));let c=p(n,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],LD(c));let f=p(n,["styleImageConfig"]);f!=null&&h(e,["styleImageConfig"],f);let m=p(n,["subjectImageConfig"]);return m!=null&&h(e,["subjectImageConfig"],m),e}function vx(n){let e={},t=p(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);let i=p(n,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);let o=p(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function yx(n){let e={},t=p(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);let i=p(n,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);let o=p(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function Zk(n){let e={},t=p(n,["category"]);if(t!=null&&h(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=p(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function jk(n){let e={},t=p(n,["image"]);return t!=null&&h(e,["image"],Br(t)),e}function e3(n,e){let t={},i=p(n,["mode"]);e!==void 0&&i!=null&&h(e,["parameters","mode"],i);let o=p(n,["maxPredictions"]);e!==void 0&&o!=null&&h(e,["parameters","maxPredictions"],o);let s=p(n,["confidenceThreshold"]);e!==void 0&&s!=null&&h(e,["parameters","confidenceThreshold"],s);let c=p(n,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);let f=p(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&h(e,["parameters","binaryColorThreshold"],f);let m=p(n,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),t}function t3(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["source"]);o!=null&&i3(o,t);let s=p(e,["config"]);return s!=null&&e3(s,t),t}function n3(n){let e={},t=p(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Ak(o))),h(e,["generatedMasks"],i)}return e}function i3(n,e){let t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);let o=p(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],Br(o));let s=p(n,["scribbleImage"]);return e!==void 0&&s!=null&&h(e,["instances[0]","scribble"],jk(s)),t}function r3(n){let e={},t=p(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);let i=p(n,["functionCallingConfig"]);return i!=null&&h(e,["functionCallingConfig"],ak(i)),e}function o3(n){let e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=p(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);let i=p(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);let o=p(n,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=p(n,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(b=>b)),h(e,["functionDeclarations"],g)}let c=p(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],Nk(c));let f=p(n,["googleSearch"]);f!=null&&h(e,["googleSearch"],Rk(f));let m=p(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);let v=p(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function _x(n){let e={},t=p(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);let i=p(n,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=p(n,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);let s=p(n,["enterpriseWebSearch"]);s!=null&&h(e,["enterpriseWebSearch"],s);let c=p(n,["functionDeclarations"]);if(c!=null){let b=c;Array.isArray(b)&&(b=b.map(C=>sk(C))),h(e,["functionDeclarations"],b)}let f=p(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],f);let m=p(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);let v=p(n,["googleSearchRetrieval"]);v!=null&&h(e,["googleSearchRetrieval"],v);let g=p(n,["urlContext"]);return g!=null&&h(e,["urlContext"],g),e}function a3(n){let e={},t=p(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);let i=p(n,["createTime"]);i!=null&&h(e,["createTime"],i);let o=p(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function s3(n){let e={},t=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);let i=p(n,["createTime"]);i!=null&&h(e,["createTime"],i);let o=p(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function l3(n,e){let t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);let o=p(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);let s=p(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&h(e,["defaultCheckpointId"],s),t}function u3(n,e){let t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);let o=p(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);let s=p(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&h(e,["defaultCheckpointId"],s),t}function c3(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","name"],en(n,i));let o=p(e,["config"]);return o!=null&&l3(o,t),t}function d3(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["config"]);return o!=null&&u3(o,t),t}function f3(n,e){let t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);let o=p(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);let s=p(n,["personGeneration"]);e!==void 0&&s!=null&&h(e,["parameters","personGeneration"],s);let c=p(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);let f=p(n,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);let m=p(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);let v=p(n,["enhanceInputImage"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],v);let g=p(n,["imagePreservationFactor"]);e!==void 0&&g!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],g);let b=p(n,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);let C=p(n,["numberOfImages"]);e!==void 0&&C!=null&&h(e,["parameters","sampleCount"],C);let A=p(n,["mode"]);return e!==void 0&&A!=null&&h(e,["parameters","mode"],A),t}function p3(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["_url","model"],en(n,i));let o=p(e,["image"]);o!=null&&h(t,["instances[0]","image"],Br(o));let s=p(e,["upscaleFactor"]);s!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],s);let c=p(e,["config"]);return c!=null&&f3(c,t),t}function m3(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>cf(s))),h(e,["generatedImages"],o)}return e}function h3(n){let e={},t=p(n,["uri"]);t!=null&&h(e,["uri"],t);let i=p(n,["encodedVideo"]);i!=null&&h(e,["videoBytes"],aa(i));let o=p(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function g3(n){let e={},t=p(n,["gcsUri"]);t!=null&&h(e,["uri"],t);let i=p(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],aa(i));let o=p(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function v3(n){let e={},t=p(n,["image"]);t!=null&&h(e,["_self"],Br(t));let i=p(n,["maskMode"]);return i!=null&&h(e,["maskMode"],i),e}function y3(n){let e={},t=p(n,["image"]);t!=null&&h(e,["image"],df(t));let i=p(n,["referenceType"]);return i!=null&&h(e,["referenceType"],i),e}function _3(n){let e={},t=p(n,["image"]);t!=null&&h(e,["image"],Br(t));let i=p(n,["referenceType"]);return i!=null&&h(e,["referenceType"],i),e}function xx(n){let e={},t=p(n,["uri"]);t!=null&&h(e,["uri"],t);let i=p(n,["videoBytes"]);i!=null&&h(e,["encodedVideo"],aa(i));let o=p(n,["mimeType"]);return o!=null&&h(e,["encoding"],o),e}function Cx(n){let e={},t=p(n,["uri"]);t!=null&&h(e,["gcsUri"],t);let i=p(n,["videoBytes"]);i!=null&&h(e,["bytesBase64Encoded"],aa(i));let o=p(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function x3(n,e){let t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&h(e,["displayName"],i),t}function C3(n){let e={},t=p(n,["config"]);return t!=null&&x3(t,e),e}function b3(n,e){let t={},i=p(n,["force"]);return e!==void 0&&i!=null&&h(e,["_query","force"],i),t}function w3(n){let e={},t=p(n,["name"]);t!=null&&h(e,["_url","name"],t);let i=p(n,["config"]);return i!=null&&b3(i,e),e}function S3(n){let e={},t=p(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function E3(n,e){let t={},i=p(n,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>c)),h(e,["customMetadata"],s)}let o=p(n,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),t}function T3(n){let e={},t=p(n,["name"]);t!=null&&h(e,["name"],t);let i=p(n,["metadata"]);i!=null&&h(e,["metadata"],i);let o=p(n,["done"]);o!=null&&h(e,["done"],o);let s=p(n,["error"]);s!=null&&h(e,["error"],s);let c=p(n,["response"]);return c!=null&&h(e,["response"],D3(c)),e}function A3(n){let e={},t=p(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);let i=p(n,["fileName"]);i!=null&&h(e,["fileName"],i);let o=p(n,["config"]);return o!=null&&E3(o,e),e}function D3(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["parent"]);i!=null&&h(e,["parent"],i);let o=p(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function k3(n,e){let t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);let o=p(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function I3(n){let e={},t=p(n,["config"]);return t!=null&&k3(t,e),e}function M3(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);let o=p(n,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>c)),h(e,["fileSearchStores"],s)}return e}function bx(n,e){let t={},i=p(n,["mimeType"]);e!==void 0&&i!=null&&h(e,["mimeType"],i);let o=p(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);let s=p(n,["customMetadata"]);if(e!==void 0&&s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>m)),h(e,["customMetadata"],f)}let c=p(n,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),t}function F3(n){let e={},t=p(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);let i=p(n,["config"]);return i!=null&&bx(i,e),e}function N3(n){let e={},t=p(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}var R3="Content-Type",P3="X-Server-Timeout",V3="User-Agent",ih="x-goog-api-client",L3="1.35.0",B3=`google-genai-sdk/${L3}`,O3="v1beta1",H3="v1beta",rh=class{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:O3,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:H3,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){let o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(let[c,f]of Object.entries(e.queryParams))o.searchParams.append(c,String(f));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,t,o.toString(),e.abortSignal),this.unaryApiCall(o,s,e.httpMethod)}patchHttpOptions(e,t){let i=JSON.parse(JSON.stringify(e));for(let[o,s]of Object.entries(t))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,t,o.toString(),e.abortSignal),this.streamApiCall(o,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){let s=new AbortController,c=s.signal;if(t.timeout&&t?.timeout>0){let f=setTimeout(()=>s.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=c}return t&&t.extraBody!==null&&U3(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await H_(o),new ku(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await H_(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Pr(this,arguments,function*(){var i;let o=(i=e?.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="",f="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:v,value:g}=yield Vt(o.read());if(v){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let b=s.decode(g,{stream:!0});try{let F=JSON.parse(b);if("error"in F){let R=JSON.parse(JSON.stringify(F.error)),B=R.status,N=R.code,O=`got status: ${B}. ${JSON.stringify(F)}`;if(N>=400&&N<600)throw new Kd({message:O,status:N})}}catch(F){if(F.name==="ApiError")throw F}c+=b;let C=-1,A=0;for(;;){C=-1,A=0;for(let B of m){let N=c.indexOf(B);N!==-1&&(C===-1||N<C)&&(C=N,A=B.length)}if(C===-1)break;let F=c.substring(0,C);c=c.substring(C+A);let R=F.trim();if(R.startsWith(f)){let B=R.substring(f.length).trim();try{let N=new Response(B,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Vt(new ku(N))}catch(N){throw new Error(`exception parsing stream chunk ${B}. ${N}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let e={},t=B3+" "+this.clientOptions.userAgentExtra;return e[V3]=t,e[ih]=t,e[R3]="application/json",e}async getHeadersInternal(e,t){let i=new Headers;if(e&&e.headers){for(let[o,s]of Object.entries(e.headers))i.append(o,s);e.timeout&&e.timeout>0&&i.append(P3,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;let o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let s=this.clientOptions.uploader,c=await s.stat(e);o.sizeBytes=String(c.size);let f=(i=t?.mimeType)!==null&&i!==void 0?i:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;let m={file:o},v=this.getFileName(e),g=vt("upload/v1beta/files",m._url),b=await this.fetchUploadUrl(g,o.sizeBytes,o.mimeType,v,m,t?.httpOptions);return s.upload(e,b,this)}async uploadFileToFileSearchStore(e,t,i){var o;let s=this.clientOptions.uploader,c=await s.stat(t),f=String(c.size),m=(o=i?.mimeType)!==null&&o!==void 0?o:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let v=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(t),b={};i!=null&&bx(i,b);let C=await this.fetchUploadUrl(v,f,m,g,b,i?.httpOptions);return s.uploadToFileSearchStore(t,C,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,s,c){var f;let m={};c?m=c:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};let v=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:m});if(!v||!v?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let g=(f=v?.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}};async function H_(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){let t=n.status,i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};let o=JSON.stringify(i);throw t>=400&&t<600?new Kd({message:o,status:t}):new Error(o)}}function U3(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{let s=JSON.parse(n.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))t=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,c){let f=Object.assign({},s);for(let m in c)if(Object.prototype.hasOwnProperty.call(c,m)){let v=c[m],g=f[m];v&&typeof v=="object"&&!Array.isArray(v)&&g&&typeof g=="object"&&!Array.isArray(g)?f[m]=i(g,v):(g&&v&&typeof g!=typeof v&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof g}, New type: ${typeof v}. Overwriting.`),f[m]=v)}return f}let o=i(t,e);n.body=JSON.stringify(o)}var z3="mcp_used/unknown",G3=!1;function wx(n){for(let e of n)if(q3(e)||typeof e=="object"&&"inputSchema"in e)return!0;return G3}function Sx(n){var e;let t=(e=n[ih])!==null&&e!==void 0?e:"";n[ih]=(t+` ${z3}`).trimStart()}function q3(n){return n!==null&&typeof n=="object"&&n instanceof oh}function W3(n){return Pr(this,arguments,function*(t,i=100){let o,s=0;for(;s<i;){let c=yield Vt(t.listTools({cursor:o}));for(let f of c.tools)yield yield Vt(f),s++;if(!c.nextCursor)break;o=c.nextCursor}})}var oh=class n{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new n(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;let s={},c=[];for(let g of this.mcpClients)try{for(var f=!0,m=(t=void 0,Vr(W3(g))),v;v=await m.next(),e=v.done,!e;f=!0){o=v.value,f=!1;let b=o;c.push(b);let C=b.name;if(s[C])throw new Error(`Duplicate function name ${C} found in MCP tools. Please ensure function names are unique.`);s[C]=g}}catch(b){t={error:b}}finally{try{!f&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),kT(this.mcpTools,this.config)}async callTool(e){await this.initialize();let t=[];for(let i of e)if(i.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[i.name],s;this.config.timeout&&(s={timeout:this.config.timeout});let c=await o.callTool({name:i.name,arguments:i.args},void 0,s);t.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return t}};async function $3(n,e,t){let i=new $m,o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}var ah=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),c=J3(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${f}`,v=()=>{},g=new Promise(q=>{v=q}),b=e.callbacks,C=function(){v({})},A=this.apiClient,F={onopen:C,onmessage:q=>{$3(A,b.onmessage,q)},onerror:(t=b?.onerror)!==null&&t!==void 0?t:function(q){},onclose:(i=b?.onclose)!==null&&i!==void 0?i:function(q){}},R=this.webSocketFactory.create(m,K3(c),F);R.connect(),await g;let O={setup:{model:en(this.apiClient,e.model)}};return R.send(JSON.stringify(O)),new sh(R,this.apiClient)}},sh=class{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let t=CD(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let t=xD(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){let t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Au.PLAY)}pause(){this.sendPlaybackControl(Au.PAUSE)}stop(){this.sendPlaybackControl(Au.STOP)}resetContext(){this.sendPlaybackControl(Au.RESET_CONTEXT)}close(){this.conn.close()}};function K3(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function J3(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var Y3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function X3(n,e,t){let i=new Wm,o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;let s=JSON.parse(o);if(n.isVertexAI()){let c=SD(s);Object.assign(i,c)}else Object.assign(i,s);e(i)}var lh=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new ah(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,s,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let m=this.apiClient.getWebsocketBaseUrl(),v=this.apiClient.getApiVersion(),g,b=this.apiClient.getHeaders();e.config&&e.config.tools&&wx(e.config.tools)&&Sx(b);let C=j3(b);if(this.apiClient.isVertexAI())g=`${m}/ws/google.cloud.aiplatform.${v}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(C,g);else{let me=this.apiClient.getApiKey(),Te="BidiGenerateContent",$="key";me?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),v!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Te="BidiGenerateContentConstrained",$="access_token"),g=`${m}/ws/google.ai.generativelanguage.${v}.GenerativeService.${Te}?${$}=${me}`}let A=()=>{},F=new Promise(me=>{A=me}),R=e.callbacks,B=function(){var me;(me=R?.onopen)===null||me===void 0||me.call(R),A({})},N=this.apiClient,O={onopen:B,onmessage:me=>{X3(N,R.onmessage,me)},onerror:(t=R?.onerror)!==null&&t!==void 0?t:function(me){},onclose:(i=R?.onclose)!==null&&i!==void 0?i:function(me){}},q=this.webSocketFactory.create(g,Z3(C),O);q.connect(),await F;let X=en(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){let me=this.apiClient.getProject(),Te=this.apiClient.getLocation();X=`projects/${me}/locations/${Te}/`+X}let j={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Fm.AUDIO]}:e.config.responseModalities=[Fm.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let ie=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],he=[];for(let me of ie)if(this.isCallableTool(me)){let Te=me;he.push(await Te.tool())}else he.push(me);he.length>0&&(e.config.tools=he);let ve={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?j=_D(this.apiClient,ve):j=yD(this.apiClient,ve),delete j.config,q.send(JSON.stringify(j)),new uh(q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},Q3={turnComplete:!0},uh=class{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Cr(t.turns),e.isVertexAI()||(i=i.map(o=>uf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Y3)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Q3),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:wD(e)}:t={realtimeInput:bD(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}};function Z3(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function j3(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var U_=10;function z_(n){var e,t,i;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(let c of(t=n?.tools)!==null&&t!==void 0?t:[])if($s(c)){o=!0;break}if(!o)return!0;let s=(i=n?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function $s(n){return"callTool"in n&&typeof n.callTool=="function"}function eI(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>$s(o)))!==null&&i!==void 0?i:!1}function G_(n){var e;let t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if($s(i))return;let s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&t.push(o)}),t}function q_(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var ch=class extends Lr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,s,c,f;let m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!eI(t)||z_(t.config))return await this.generateContentInternal(m);let v=G_(t);if(v.length>0){let R=v.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${R}.`)}let g,b,C=Cr(m.contents),A=(s=(o=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:U_,F=0;for(;F<A&&(g=await this.generateContentInternal(m),!(!g.functionCalls||g.functionCalls.length===0));){let R=g.candidates[0].content,B=[];for(let N of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if($s(N)){let q=await N.callTool(g.functionCalls);B.push(...q)}F++,b={role:"user",parts:B},m.contents=Cr(m.contents),m.contents.push(R),m.contents.push(b),q_(m.config)&&(C.push(R),C.push(b))}return q_(m.config)&&(g.automaticFunctionCallingHistory=C),g},this.generateContentStream=async t=>{var i,o,s,c,f;if(this.maybeMoveToResponseJsonSchem(t),z_(t.config)){let b=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(b)}let m=G_(t);if(m.length>0){let b=m.map(C=>`tools[${C}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let v=(s=(o=(i=t?.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,g=(f=(c=t?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(v&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let s,c=[];if(i?.generatedImages)for(let m of i.generatedImages)m&&m?.safetyAttributes&&((o=m?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=m?.safetyAttributes:c.push(m);let f;return s?f={generatedImages:c,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;let c={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Co(sa.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async t=>{let i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));let o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,s,c,f,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(s=t.source)===null||s===void 0?void 0:s.video)===null||c===void 0)&&c.uri&&(!((m=(f=t.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;let s=(t=e.config)===null||t===void 0?void 0:t.tools;if(!s)return e;let c=await Promise.all(s.map(async m=>$s(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&wx(e.config.tools)){let m=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{},v=Object.assign({},m);Object.keys(v).length===0&&(v=this.apiClient.getDefaultHeaders()),Sx(v),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:v})}return f}async initAfcToolsMap(e){var t,i,o;let s=new Map;for(let c of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if($s(c)){let f=c,m=await f.tool();for(let v of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!v.name)throw new Error("Function declaration name is required.");if(s.has(v.name))throw new Error(`Duplicate tool declaration name: ${v.name}`);s.set(v.name,f)}}return s}async processAfcStream(e){var t,i,o;let s=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:U_,c=!1,f=0,m=await this.initAfcToolsMap(e);return(function(v,g,b){return Pr(this,arguments,function*(){for(var C,A,F,R,B,N;f<s;){c&&(f++,c=!1);let j=yield Vt(v.processParamsMaybeAddMcpUsage(b)),ie=yield Vt(v.generateContentStreamInternal(j)),he=[],ve=[];try{for(var O=!0,q=(A=void 0,Vr(ie)),X;X=yield Vt(q.next()),C=X.done,!C;O=!0){R=X.value,O=!1;let me=R;if(yield yield Vt(me),me.candidates&&(!((B=me.candidates[0])===null||B===void 0)&&B.content)){ve.push(me.candidates[0].content);for(let Te of(N=me.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(f<s&&Te.functionCall){if(!Te.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(Te.functionCall.name)){let $=yield Vt(g.get(Te.functionCall.name).callTool([Te.functionCall]));he.push(...$)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${Te.functionCall.name}`)}}}}catch(me){A={error:me}}finally{try{!O&&!C&&(F=q.return)&&(yield Vt(F.call(q)))}finally{if(A)throw A.error}}if(he.length>0){c=!0;let me=new es;me.candidates=[{content:{role:"user",parts:he}}],yield yield Vt(me);let Te=[];Te.push(...ve),Te.push({role:"user",parts:he});let $=Cr(b.contents).concat(Te);b.contents=$}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=L_(this.apiClient,e);return f=vt("{model}:generateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=O_(g),C=new es;return Object.assign(C,b),C})}else{let v=V_(this.apiClient,e);return f=vt("{model}:generateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=B_(g),C=new es;return Object.assign(C,b),C})}}async generateContentStreamInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=L_(this.apiClient,e);return f=vt("{model}:streamGenerateContent?alt=sse",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(b){return Pr(this,arguments,function*(){var C,A,F,R;try{for(var B=!0,N=Vr(b),O;O=yield Vt(N.next()),C=O.done,!C;B=!0){R=O.value,B=!1;let q=R,X=O_(yield Vt(q.json()));X.sdkHttpResponse={headers:q.headers};let j=new es;Object.assign(j,X),yield yield Vt(j)}}catch(q){A={error:q}}finally{try{!B&&!C&&(F=N.return)&&(yield Vt(F.call(N)))}finally{if(A)throw A.error}}})})}else{let v=V_(this.apiClient,e);return f=vt("{model}:streamGenerateContent?alt=sse",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(b){return Pr(this,arguments,function*(){var C,A,F,R;try{for(var B=!0,N=Vr(b),O;O=yield Vt(N.next()),C=O.done,!C;B=!0){R=O.value,B=!1;let q=R,X=B_(yield Vt(q.json()));X.sdkHttpResponse={headers:q.headers};let j=new es;Object.assign(j,X),yield yield Vt(j)}}catch(q){A={error:q}}finally{try{!B&&!C&&(F=N.return)&&(yield Vt(F.call(N)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=ek(this.apiClient,e);return f=vt("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=nk(g),C=new Rd;return Object.assign(C,b),C})}else{let v=jD(this.apiClient,e);return f=vt("{model}:batchEmbedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=tk(g),C=new Rd;return Object.assign(C,b),C})}}async generateImagesInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=pk(this.apiClient,e);return f=vt("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=hk(g),C=new Pd;return Object.assign(C,b),C})}else{let v=fk(this.apiClient,e);return f=vt("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=mk(g),C=new Pd;return Object.assign(C,b),C})}}async editImageInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI()){let f=YD(this.apiClient,e);return s=vt("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{let g=v;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{let v=XD(m),g=new Nm;return Object.assign(g,v),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI()){let f=p3(this.apiClient,e);return s=vt("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{let g=v;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{let v=m3(m),g=new Rm;return Object.assign(g,v),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI()){let f=Jk(this.apiClient,e);return s=vt("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{let v=Yk(m),g=new Pm;return Object.assign(g,v),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI()){let f=t3(this.apiClient,e);return s=vt("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{let v=n3(m),g=new Vm;return Object.assign(g,v),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=Fk(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>nh(g))}else{let v=Mk(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),c.then(g=>th(g))}}async listInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=Uk(this.apiClient,e);return f=vt("{models_url}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=Gk(g),C=new Vd;return Object.assign(C,b),C})}else{let v=Hk(this.apiClient,e);return f=vt("{models_url}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=zk(g),C=new Vd;return Object.assign(C,b),C})}}async update(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=d3(this.apiClient,e);return f=vt("{model}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>nh(g))}else{let v=c3(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),c.then(g=>th(g))}}async delete(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=WD(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=KD(g),C=new Ld;return Object.assign(C,b),C})}else{let v=qD(this.apiClient,e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=$D(g),C=new Ld;return Object.assign(C,b),C})}}async countTokens(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=UD(this.apiClient,e);return f=vt("{model}:countTokens",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=GD(g),C=new Bd;return Object.assign(C,b),C})}else{let v=HD(this.apiClient,e);return f=vt("{model}:countTokens",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=zD(g),C=new Bd;return Object.assign(C,b),C})}}async computeTokens(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI()){let f=ND(this.apiClient,e);return s=vt("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{let g=v;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{let v=RD(m),g=new Lm;return Object.assign(g,v),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=Ck(this.apiClient,e);return f=vt("{model}:predictLongRunning",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>{let b=_k(g),C=new Od;return Object.assign(C,b),C})}else{let v=xk(this.apiClient,e);return f=vt("{model}:predictLongRunning",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),c.then(g=>{let b=yk(g),C=new Od;return Object.assign(C,b),C})}}};var dh=class extends Lr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=t.name.split("/operations/")[0],s;i&&"httpOptions"in i&&(s=i.httpOptions);let c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=t.name.split("/operations/")[0],s;i&&"httpOptions"in i&&(s=i.httpOptions);let c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=gT(e);return f=vt("{operationName}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c}else{let v=hT(e);return f=vt("{operationName}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),c}}async fetchPredictVideosOperationInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI()){let f=lT(e);return s=vt("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};function tI(n){let e={},t=p(n,["data"]);if(t!=null&&h(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function nI(n){let e={},t=p(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>dI(s))),h(e,["parts"],o)}let i=p(n,["role"]);return i!=null&&h(e,["role"],i),e}function iI(n,e,t){let i={},o=p(e,["expireTime"]);t!==void 0&&o!=null&&h(t,["expireTime"],o);let s=p(e,["newSessionExpireTime"]);t!==void 0&&s!=null&&h(t,["newSessionExpireTime"],s);let c=p(e,["uses"]);t!==void 0&&c!=null&&h(t,["uses"],c);let f=p(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&h(t,["bidiGenerateContentSetup"],cI(n,f));let m=p(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&h(t,["fieldMask"],m),i}function rI(n,e){let t={},i=p(e,["config"]);return i!=null&&h(t,["config"],iI(n,i,t)),t}function oI(n){let e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=p(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);let i=p(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function aI(n){let e={},t=p(n,["id"]);t!=null&&h(e,["id"],t);let i=p(n,["args"]);i!=null&&h(e,["args"],i);let o=p(n,["name"]);if(o!=null&&h(e,["name"],o),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sI(n){let e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=p(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function lI(n){let e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=p(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function uI(n,e){let t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);let o=p(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);let s=p(n,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);let c=p(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);let f=p(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);let m=p(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);let v=p(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);let g=p(n,["seed"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","seed"],g);let b=p(n,["speechConfig"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","speechConfig"],Nh(b));let C=p(n,["thinkingConfig"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","thinkingConfig"],C);let A=p(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],A);let F=p(n,["systemInstruction"]);e!==void 0&&F!=null&&h(e,["setup","systemInstruction"],nI(wi(F)));let R=p(n,["tools"]);if(e!==void 0&&R!=null){let ie=Xs(R);Array.isArray(ie)&&(ie=ie.map(he=>pI(Ys(he)))),h(e,["setup","tools"],ie)}let B=p(n,["sessionResumption"]);e!==void 0&&B!=null&&h(e,["setup","sessionResumption"],fI(B));let N=p(n,["inputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","inputAudioTranscription"],N);let O=p(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&h(e,["setup","outputAudioTranscription"],O);let q=p(n,["realtimeInputConfig"]);e!==void 0&&q!=null&&h(e,["setup","realtimeInputConfig"],q);let X=p(n,["contextWindowCompression"]);e!==void 0&&X!=null&&h(e,["setup","contextWindowCompression"],X);let j=p(n,["proactivity"]);if(e!==void 0&&j!=null&&h(e,["setup","proactivity"],j),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function cI(n,e){let t={},i=p(e,["model"]);i!=null&&h(t,["setup","model"],en(n,i));let o=p(e,["config"]);return o!=null&&h(t,["config"],uI(o,t)),t}function dI(n){let e={},t=p(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);let i=p(n,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);let o=p(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);let s=p(n,["fileData"]);s!=null&&h(e,["fileData"],oI(s));let c=p(n,["functionCall"]);c!=null&&h(e,["functionCall"],aI(c));let f=p(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);let m=p(n,["inlineData"]);m!=null&&h(e,["inlineData"],tI(m));let v=p(n,["text"]);v!=null&&h(e,["text"],v);let g=p(n,["thought"]);g!=null&&h(e,["thought"],g);let b=p(n,["thoughtSignature"]);b!=null&&h(e,["thoughtSignature"],b);let C=p(n,["videoMetadata"]);return C!=null&&h(e,["videoMetadata"],C),e}function fI(n){let e={},t=p(n,["handle"]);if(t!=null&&h(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pI(n){let e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=p(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);let i=p(n,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);let o=p(n,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=p(n,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(b=>b)),h(e,["functionDeclarations"],g)}let c=p(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],sI(c));let f=p(n,["googleSearch"]);f!=null&&h(e,["googleSearch"],lI(f));let m=p(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);let v=p(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function mI(n){let e=[];for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let o=Object.keys(i).map(s=>`${t}.${s}`);e.push(...o)}else e.push(t)}return e.join(",")}function hI(n,e){let t=null,i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let s=i.setup;typeof s=="object"&&s!==null?(n.bidiGenerateContentSetup=s,t=s):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;let o=n.fieldMask;if(t){let s=mI(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?n.fieldMask=s:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],f=[];o.length>0&&(f=o.map(v=>c.includes(v)?`generationConfig.${v}`:v));let m=[];s&&m.push(s),f.length>0&&m.push(...f),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}var fh=class extends Lr{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let f=rI(this.apiClient,e);s=vt("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;let m=hI(f,e.config);return o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),o.then(v=>v)}}};function gI(n,e){let t={},i=p(n,["force"]);return e!==void 0&&i!=null&&h(e,["_query","force"],i),t}function vI(n){let e={},t=p(n,["name"]);t!=null&&h(e,["_url","name"],t);let i=p(n,["config"]);return i!=null&&gI(i,e),e}function yI(n){let e={},t=p(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function _I(n,e){let t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);let o=p(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function xI(n){let e={},t=p(n,["parent"]);t!=null&&h(e,["_url","parent"],t);let i=p(n,["config"]);return i!=null&&_I(i,e),e}function CI(n){let e={},t=p(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);let i=p(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);let o=p(n,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>c)),h(e,["documents"],s)}return e}var ph=class extends Lr{constructor(e){super(),this.apiClient=e,this.list=async t=>new Co(sa.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=yI(e);return s=vt("{name}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=vI(e);o=vt("{name}",c._url),s=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=xI(e);return s=vt("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{let v=CI(m),g=new Bm;return Object.assign(g,v),g})}}};var mh=class extends Lr{constructor(e,t=new ph(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Co(sa.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=C3(e);return s=vt("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=S3(e);return s=vt("{name}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=w3(e);o=vt("{name}",c._url),s=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=I3(e);return s=vt("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{let v=M3(m),g=new Om;return Object.assign(g,v),g})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=F3(e);return s=vt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{let v=N3(m),g=new Hm;return Object.assign(g,v),g})}}async importFile(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=A3(e);return s=vt("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{let v=T3(m),g=new Um;return Object.assign(g,v),g})}}};var Ex=function(){let{crypto:n}=globalThis;if(n?.randomUUID)return Ex=n.randomUUID.bind(n),n.randomUUID();let e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))},bI=()=>Ex();function hh(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}var gh=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){let e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};var Xi=class extends Error{},Qi=class n extends Xi{constructor(e,t,i,o){super(`${n.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){let o=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new Ks({message:i,cause:gh(t)});let s=t;return e===400?new Yd(e,s,i,o):e===401?new Xd(e,s,i,o):e===403?new Qd(e,s,i,o):e===404?new Zd(e,s,i,o):e===409?new jd(e,s,i,o):e===422?new ef(e,s,i,o):e===429?new tf(e,s,i,o):e>=500?new nf(e,s,i,o):new n(e,s,i,o)}},Iu=class extends Qi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Ks=class extends Qi{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},Jd=class extends Ks{constructor({message:e}={}){super({message:e??"Request timed out."})}},Yd=class extends Qi{},Xd=class extends Qi{},Qd=class extends Qi{},Zd=class extends Qi{},jd=class extends Qi{},ef=class extends Qi{},tf=class extends Qi{},nf=class extends Qi{};var wI=/^[a-z][a-z0-9+.-]*:/i,SI=n=>wI.test(n),vh=n=>(vh=Array.isArray,vh(n)),EI=vh,TI=EI,W_=TI;function AI(n){if(!n)return!0;for(let e in n)return!1;return!0}function DI(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var kI=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Xi(`${n} must be an integer`);if(e<0)throw new Xi(`${n} must be a positive integer`);return e},II=n=>{try{return JSON.parse(n)}catch{return}};var MI=n=>new Promise(e=>setTimeout(e,n));var qs="0.0.1";function FI(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var NI=()=>{var n,e,t,i,o;let s=FI();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qs,"X-Stainless-OS":K_(Deno.build.os),"X-Stainless-Arch":$_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qs,"X-Stainless-OS":K_((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":$_((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};let c=RI();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function RI(){if(typeof navigator>"u"||!navigator)return null;let n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:t}of n){let i=t.exec(navigator.userAgent);if(i){let o=i[1]||0,s=i[2]||0,c=i[3]||0;return{browser:e,version:`${o}.${s}.${c}`}}}return null}var $_=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",K_=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown"),Ad,PI=()=>Ad??(Ad=NI());function VI(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Tx(...n){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function LI(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Tx({start(){},async pull(t){let{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function Ax(n){if(n[Symbol.asyncIterator])return n;let e=n.getReader();return{async next(){try{let t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){let t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function BI(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}let i=n.getReader(),o=i.cancel();i.releaseLock(),await o}var OI=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var Dx=()=>{var n;if(typeof File>"u"){let{process:e}=globalThis,t=typeof((n=e?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function km(n,e,t){return Dx(),new File(n,e??"unknown_file",t)}function HI(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}var UI=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";var kx=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",zI=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&kx(n),GI=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function qI(n,e,t){if(Dx(),n=await n,zI(n))return n instanceof File?n:km([await n.arrayBuffer()],n.name);if(GI(n)){let o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),km(await yh(o),e,t)}let i=await yh(n);if(e||(e=HI(n)),!t?.type){let o=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return km(i,e,t)}async function yh(n){var e,t,i,o,s;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(kx(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(UI(n))try{for(var f=!0,m=Vr(n),v;v=await m.next(),e=v.done,!e;f=!0){o=v.value,f=!1;let g=o;c.push(...await yh(g))}}catch(g){t={error:g}}finally{try{!f&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}else{let g=(s=n?.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof n}${g?`; constructor: ${g}`:""}${WI(n)}`)}return c}function WI(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}var $I=(()=>{class n{constructor(t){this._client=t}}n._key=[];return n})();function Ix(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var J_=Object.freeze(Object.create(null)),KI=(n=Ix)=>function(t,...i){if(t.length===1)return t[0];let o=!1,s=[],c=t.reduce((g,b,C)=>{var A,F,R;/[?#]/.test(b)&&(o=!0);let B=i[C],N=(o?encodeURIComponent:n)(""+B);return C!==i.length&&(B==null||typeof B=="object"&&B.toString===((R=Object.getPrototypeOf((F=Object.getPrototypeOf((A=B.hasOwnProperty)!==null&&A!==void 0?A:J_))!==null&&F!==void 0?F:J_))===null||R===void 0?void 0:R.toString))&&(N=B+"",s.push({start:g.length+b.length,length:N.length,error:`Value of type ${Object.prototype.toString.call(B).slice(8,-1)} is not a valid path parameter`})),g+b+(C===i.length?"":N)},""),f=c.split(/[?#]/,1)[0],m=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,v;for(;(v=m.exec(f))!==null;)s.push({start:v.index,length:v[0].length,error:`Value "${v[0]}" can't be safely passed as a path parameter`});if(s.sort((g,b)=>g.start-b.start),s.length>0){let g=0,b=s.reduce((C,A)=>{let F=" ".repeat(A.start-g),R="^".repeat(A.length);return g=A.start+A.length,C+F+R},"");throw new Xi(`Path parameters result in path with invalid segments:
${s.map(C=>C.error).join(`
`)}
${c}
${b}`)}return c},Dd=KI(Ix);var rf=class extends $I{create(e,t){var i;let{api_version:o=this._client.apiVersion}=e,s=$d(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new Xi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Xi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Dd`/${o}/interactions`,Object.assign(Object.assign({body:s},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){let{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(Dd`/${o}/interactions/${e}`,i)}cancel(e,t={},i){let{api_version:o=this._client.apiVersion}=t??{};return this._client.post(Dd`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;let s=t??{},{api_version:c=this._client.apiVersion}=s,f=$d(s,["api_version"]);return this._client.get(Dd`/${c}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(o=t?.stream)!==null&&o!==void 0?o:!1}))}};rf._key=Object.freeze(["interactions"]);var of=class extends rf{};function JI(n){let e=0;for(let o of n)e+=o.length;let t=new Uint8Array(e),i=0;for(let o of n)t.set(o,i),i+=o.length;return t}var kd;function Rh(n){let e;return(kd??(e=new globalThis.TextEncoder,kd=e.encode.bind(e)))(n)}var Id;function Y_(n){let e;return(Id??(e=new globalThis.TextDecoder,Id=e.decode.bind(e)))(n)}var Js=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Rh(e):e;this.buffer=JI([this.buffer,t]);let i=[],o;for(;(o=YI(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(Y_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let s=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,c=Y_(this.buffer.subarray(0,s));i.push(c),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};Js.NEWLINE_CHARS=new Set([`
`,"\r"]);Js.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function YI(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function XI(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}var af={off:0,error:200,warn:300,info:400,debug:500},X_=(n,e,t)=>{if(n){if(DI(af,n))return n;Ni(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(af))}`)}};function Du(){}function Md(n,e,t){return!e||af[n]>af[t]?Du:e[n].bind(e)}var QI={error:Du,warn:Du,info:Du,debug:Du},Q_=new WeakMap;function Ni(n){var e;let t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return QI;let o=Q_.get(t);if(o&&o[0]===i)return o[1];let s={error:Md("error",t,i),warn:Md("warn",t,i),info:Md("info",t,i),debug:Md("debug",t,i)};return Q_.set(t,[i,s]),s}var ja=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var _h=class n{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1,s=i?Ni(i):console;function c(){return Pr(this,arguments,function*(){var m,v,g,b;if(o)throw new Xi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let C=!1;try{try{for(var A=!0,F=Vr(ZI(e,t)),R;R=yield Vt(F.next()),m=R.done,!m;A=!0){b=R.value,A=!1;let B=b;if(!C)if(B.data.startsWith("[DONE]")){C=!0;continue}else try{yield yield Vt(JSON.parse(B.data))}catch(N){throw s.error("Could not parse message into JSON:",B.data),s.error("From chunk:",B.raw),N}}}catch(B){v={error:B}}finally{try{!A&&!m&&(g=F.return)&&(yield Vt(g.call(F)))}finally{if(v)throw v.error}}C=!0}catch(B){if(hh(B))return yield Vt(void 0);throw B}finally{C||t.abort()}})}return new n(c,t,i)}static fromReadableStream(e,t,i){let o=!1;function s(){return Pr(this,arguments,function*(){var m,v,g,b;let C=new Js,A=Ax(e);try{for(var F=!0,R=Vr(A),B;B=yield Vt(R.next()),m=B.done,!m;F=!0){b=B.value,F=!1;let N=b;for(let O of C.decode(N))yield yield Vt(O)}}catch(N){v={error:N}}finally{try{!F&&!m&&(g=R.return)&&(yield Vt(g.call(R)))}finally{if(v)throw v.error}}for(let N of C.flush())yield yield Vt(N)})}function c(){return Pr(this,arguments,function*(){var m,v,g,b;if(o)throw new Xi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let C=!1;try{try{for(var A=!0,F=Vr(s()),R;R=yield Vt(F.next()),m=R.done,!m;A=!0){b=R.value,A=!1;let B=b;C||B&&(yield yield Vt(JSON.parse(B)))}}catch(B){v={error:B}}finally{try{!A&&!m&&(g=F.return)&&(yield Vt(g.call(F)))}finally{if(v)throw v.error}}C=!0}catch(B){if(hh(B))return yield Vt(void 0);throw B}finally{C||t.abort()}})}return new n(c,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],i=this.iterator(),o=s=>({next:()=>{if(s.length===0){let c=i.next();e.push(c),t.push(c)}return s.shift()}});return[new n(()=>o(e),this.controller,this.client),new n(()=>o(t),this.controller,this.client)]}toReadableStream(){let e=this,t;return Tx({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{let{value:o,done:s}=await t.next();if(s)return i.close();let c=Rh(JSON.stringify(o)+`
`);i.enqueue(c)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}};function ZI(n,e){return Pr(this,arguments,function*(){var i,o,s,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Xi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Xi("Attempted to iterate over a response with no body");let f=new xh,m=new Js,v=Ax(n.body);try{for(var g=!0,b=Vr(jI(v)),C;C=yield Vt(b.next()),i=C.done,!i;g=!0){c=C.value,g=!1;let A=c;for(let F of m.decode(A)){let R=f.decode(F);R&&(yield yield Vt(R))}}}catch(A){o={error:A}}finally{try{!g&&!i&&(s=b.return)&&(yield Vt(s.call(b)))}finally{if(o)throw o.error}}for(let A of m.flush()){let F=f.decode(A);F&&(yield yield Vt(F))}})}function jI(n){return Pr(this,arguments,function*(){var t,i,o,s;let c=new Uint8Array;try{for(var f=!0,m=Vr(n),v;v=yield Vt(m.next()),t=v.done,!t;f=!0){s=v.value,f=!1;let g=s;if(g==null)continue;let b=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?Rh(g):g,C=new Uint8Array(c.length+b.length);C.set(c),C.set(b,c.length),c=C;let A;for(;(A=XI(c))!==-1;)yield yield Vt(c.slice(0,A)),c=c.slice(A)}}catch(g){i={error:g}}finally{try{!f&&!t&&(o=m.return)&&(yield Vt(o.call(m)))}finally{if(i)throw i.error}}c.length>0&&(yield yield Vt(c))})}var xh=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=eM(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}};function eM(n,e){let t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function tM(n,e){let{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:s}=e,c=await(async()=>{var f;if(e.options.stream)return Ni(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):_h.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;let m=t.headers.get("content-type"),v=(f=m?.split(";")[0])===null||f===void 0?void 0:f.trim();return v?.includes("application/json")||v?.endsWith("+json")?await t.json():await t.text()})();return Ni(n).debug(`[${i}] response parsed`,ja({retryOfRequestLogID:o,url:t.url,status:t.status,body:c,durationMs:Date.now()-s})),c}var Ch=class n extends Promise{constructor(e,t,i=tM){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new n(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var Mx=Symbol("brand.privateNullableHeaders");function*nM(n){if(!n)return;if(Mx in n){let{values:i,nulls:o}=n;yield*i.entries();for(let s of o)yield[s,null];return}let e=!1,t;n instanceof Headers?t=n.entries():W_(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){let o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let s=W_(i[1])?i[1]:[i[1]],c=!1;for(let f of s)f!==void 0&&(e&&!c&&(c=!0,yield[o,null]),yield[o,f])}}var Tu=n=>{let e=new Headers,t=new Set;for(let i of n){let o=new Set;for(let[s,c]of nM(i)){let f=s.toLowerCase();o.has(f)||(e.delete(s),o.add(f)),c===null?(e.delete(s),t.add(f)):(e.append(s,c),t.delete(f))}}return{[Mx]:!0,values:e,nulls:t}};var Im=n=>{var e,t,i,o,s,c;if(typeof globalThis.process<"u")return(i=(t=(e=globalThis.process.env)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(c=(s=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||s===void 0?void 0:s.call(o,n))===null||c===void 0?void 0:c.trim()};var Fx,iM=(()=>{class n{constructor(t){var i,o,s,c,f,m,v,{baseURL:g=Im("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:b=(i=Im("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:C="v1beta"}=t,A=$d(t,["baseURL","apiKey","apiVersion"]);let F=Object.assign(Object.assign({apiKey:b,apiVersion:C},A),{baseURL:g||"https://generativelanguage.googleapis.com"});this.baseURL=F.baseURL,this.timeout=(o=F.timeout)!==null&&o!==void 0?o:n.DEFAULT_TIMEOUT,this.logger=(s=F.logger)!==null&&s!==void 0?s:console;let R="warn";this.logLevel=R,this.logLevel=(f=(c=X_(F.logLevel,"ClientOptions.logLevel",this))!==null&&c!==void 0?c:X_(Im("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&f!==void 0?f:R,this.fetchOptions=F.fetchOptions,this.maxRetries=(m=F.maxRetries)!==null&&m!==void 0?m:2,this.fetch=(v=F.fetch)!==null&&v!==void 0?v:VI(),this.encoder=OI,this._options=F,this.apiKey=b,this.apiVersion=C,this.clientAdapter=F.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:i}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){let i=Tu([t.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return Tu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Tu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([i,o])=>typeof o<"u").map(([i,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(i)}=`;throw new Xi(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${qs}`}defaultIdempotencyKey(){return`stainless-node-retry-${bI()}`}makeStatusError(t,i,o,s){return Qi.generate(t,i,o,s)}buildURL(t,i,o){let s=!this.baseURLOverridden()&&o||this.baseURL,c=SI(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),f=this.defaultQuery();return AI(f)||(i=Object.assign(Object.assign({},f),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(c.search=this.stringifyQuery(i)),c.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){let i=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(t,{url:i,options:o}){}get(t,i){return this.methodRequest("get",t,i)}post(t,i){return this.methodRequest("post",t,i)}patch(t,i){return this.methodRequest("patch",t,i)}put(t,i){return this.methodRequest("put",t,i)}delete(t,i){return this.methodRequest("delete",t,i)}methodRequest(t,i,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:t,path:i},s)))}request(t,i=null){return new Ch(this,this.makeRequest(t,i,void 0))}async makeRequest(t,i,o){var s,c,f;let m=await t,v=(s=m.maxRetries)!==null&&s!==void 0?s:this.maxRetries;i==null&&(i=v),await this.prepareOptions(m);let{req:g,url:b,timeout:C}=await this.buildRequest(m,{retryCount:v-i});await this.prepareRequest(g,{url:b,options:m});let A="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),F=o===void 0?"":`, retryOf: ${o}`,R=Date.now();if(Ni(this).debug(`[${A}] sending request`,ja({retryOfRequestLogID:o,method:m.method,url:b,options:m,headers:g.headers})),!((c=m.signal)===null||c===void 0)&&c.aborted)throw new Iu;let B=new AbortController,N=await this.fetchWithTimeout(b,g,C,B).catch(gh),O=Date.now();if(N instanceof globalThis.Error){let X=`retrying, ${i} attempts remaining`;if(!((f=m.signal)===null||f===void 0)&&f.aborted)throw new Iu;let j=hh(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(i)return Ni(this).info(`[${A}] connection ${j?"timed out":"failed"} - ${X}`),Ni(this).debug(`[${A}] connection ${j?"timed out":"failed"} (${X})`,ja({retryOfRequestLogID:o,url:b,durationMs:O-R,message:N.message})),this.retryRequest(m,i,o??A);throw Ni(this).info(`[${A}] connection ${j?"timed out":"failed"} - error; no more retries left`),Ni(this).debug(`[${A}] connection ${j?"timed out":"failed"} (error; no more retries left)`,ja({retryOfRequestLogID:o,url:b,durationMs:O-R,message:N.message})),j?new Jd:new Ks({cause:N})}let q=`[${A}${F}] ${g.method} ${b} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${O-R}ms`;if(!N.ok){let X=await this.shouldRetry(N);if(i&&X){let Te=`retrying, ${i} attempts remaining`;return await BI(N.body),Ni(this).info(`${q} - ${Te}`),Ni(this).debug(`[${A}] response error (${Te})`,ja({retryOfRequestLogID:o,url:N.url,status:N.status,headers:N.headers,durationMs:O-R})),this.retryRequest(m,i,o??A,N.headers)}let j=X?"error; no more retries left":"error; not retryable";Ni(this).info(`${q} - ${j}`);let ie=await N.text().catch(Te=>gh(Te).message),he=II(ie),ve=he?void 0:ie;throw Ni(this).debug(`[${A}] response error (${j})`,ja({retryOfRequestLogID:o,url:N.url,status:N.status,headers:N.headers,message:ve,durationMs:Date.now()-R})),this.makeStatusError(N.status,he,ve,N.headers)}return Ni(this).info(q),Ni(this).debug(`[${A}] response start`,ja({retryOfRequestLogID:o,url:N.url,status:N.status,headers:N.headers,durationMs:O-R})),{response:N,options:m,controller:B,requestLogID:A,retryOfRequestLogID:o,startTime:R}}async fetchWithTimeout(t,i,o,s){let c=i||{},{signal:f,method:m}=c,v=$d(c,["signal","method"]);f&&f.addEventListener("abort",()=>s.abort());let g=setTimeout(()=>s.abort(),o),b=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,C=Object.assign(Object.assign(Object.assign({signal:s.signal},b?{duplex:"half"}:{}),{method:"GET"}),v);m&&(C.method=m.toUpperCase());try{return await this.fetch.call(void 0,t,C)}finally{clearTimeout(g)}}async shouldRetry(t){let i=t.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,i,o,s){var c;let f,m=s?.get("retry-after-ms");if(m){let g=parseFloat(m);Number.isNaN(g)||(f=g)}let v=s?.get("retry-after");if(v&&!f){let g=parseFloat(v);Number.isNaN(g)?f=Date.parse(v)-Date.now():f=g*1e3}if(!(f&&0<=f&&f<60*1e3)){let g=(c=t.maxRetries)!==null&&c!==void 0?c:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(i,g)}return await MI(f),this.makeRequest(t,i-1,o)}calculateDefaultRetryTimeoutMillis(t,i){let c=i-t,f=Math.min(.5*Math.pow(2,c),8),m=1-Math.random()*.25;return f*m*1e3}async buildRequest(t,{retryCount:i=0}={}){var o,s,c;let f=Object.assign({},t),{method:m,path:v,query:g,defaultBaseURL:b}=f,C=this.buildURL(v,g,b);"timeout"in f&&kI("timeout",f.timeout),f.timeout=(o=f.timeout)!==null&&o!==void 0?o:this.timeout;let{bodyHeaders:A,body:F}=this.buildBody({options:f}),R=await this.buildHeaders({options:t,method:m,bodyHeaders:A,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:m,headers:R},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&F instanceof globalThis.ReadableStream&&{duplex:"half"}),F&&{body:F}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(c=f.fetchOptions)!==null&&c!==void 0?c:{}),url:C,timeout:f.timeout}}async buildHeaders({options:t,method:i,bodyHeaders:o,retryCount:s}){let c={};this.idempotencyHeader&&i!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=t.idempotencyKey);let f=await this.authHeaders(t),m=Tu([c,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),PI()),this._options.defaultHeaders,o,t.headers,f]);return this.validateHeaders(m),m.values}buildBody({options:{body:t,headers:i}}){if(!t)return{bodyHeaders:void 0,body:void 0};let o=Tu([i]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&o.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:LI(t)}:this.encoder({body:t,headers:o})}}return n.DEFAULT_TIMEOUT=6e4,n})(),zn=class extends iM{constructor(){super(...arguments),this.interactions=new of(this)}};Fx=zn;zn.GeminiNextGenAPIClient=Fx;zn.GeminiNextGenAPIClientError=Xi;zn.APIError=Qi;zn.APIConnectionError=Ks;zn.APIConnectionTimeoutError=Jd;zn.APIUserAbortError=Iu;zn.NotFoundError=Zd;zn.ConflictError=jd;zn.RateLimitError=tf;zn.BadRequestError=Yd;zn.AuthenticationError=Xd;zn.InternalServerError=nf;zn.PermissionDeniedError=Qd;zn.UnprocessableEntityError=ef;zn.toFile=qI;zn.Interactions=of;function rM(n,e){let t={},i=p(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function oM(n,e){let t={},i=p(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function aM(n,e){let t={},i=p(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function sM(n,e){let t={},i=p(n,["sdkHttpResponse"]);return i!=null&&h(t,["sdkHttpResponse"],i),t}function lM(n,e,t){let i={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=p(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&h(e,["displayName"],o),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let s=p(n,["epochCount"]);e!==void 0&&s!=null&&h(e,["tuningTask","hyperparameters","epochCount"],s);let c=p(n,["learningRateMultiplier"]);if(c!=null&&h(i,["tuningTask","hyperparameters","learningRateMultiplier"],c),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let f=p(n,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);let m=p(n,["learningRate"]);if(e!==void 0&&m!=null&&h(e,["tuningTask","hyperparameters","learningRate"],m),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function uM(n,e,t){let i={},o=p(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let A=p(n,["validationDataset"]);e!==void 0&&A!=null&&h(e,["supervisedTuningSpec"],Z_(A))}else if(o==="PREFERENCE_TUNING"){let A=p(n,["validationDataset"]);e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec"],Z_(A))}let s=p(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&h(e,["tunedModelDisplayName"],s);let c=p(n,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let f=p(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let A=p(n,["epochCount"]);e!==void 0&&A!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(f==="PREFERENCE_TUNING"){let A=p(n,["epochCount"]);e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let m=p(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){let A=p(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(m==="PREFERENCE_TUNING"){let A=p(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let v=p(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){let A=p(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(v==="PREFERENCE_TUNING"){let A=p(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let g=p(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){let A=p(n,["adapterSize"]);e!==void 0&&A!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(g==="PREFERENCE_TUNING"){let A=p(n,["adapterSize"]);e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(p(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let b=p(n,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);let C=p(n,["beta"]);return e!==void 0&&C!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],C),i}function cM(n,e){let t={},i=p(n,["baseModel"]);i!=null&&h(t,["baseModel"],i);let o=p(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);let s=p(n,["trainingDataset"]);s!=null&&CM(s);let c=p(n,["config"]);return c!=null&&lM(c,t),t}function dM(n,e){let t={},i=p(n,["baseModel"]);i!=null&&h(t,["baseModel"],i);let o=p(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);let s=p(n,["trainingDataset"]);s!=null&&bM(s,t,e);let c=p(n,["config"]);return c!=null&&uM(c,t,e),t}function fM(n,e){let t={},i=p(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function pM(n,e){let t={},i=p(n,["name"]);return i!=null&&h(t,["_url","name"],i),t}function mM(n,e,t){let i={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);let s=p(n,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);let c=p(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),i}function hM(n,e,t){let i={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);let s=p(n,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);let c=p(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),i}function gM(n,e){let t={},i=p(n,["config"]);return i!=null&&mM(i,t),t}function vM(n,e){let t={},i=p(n,["config"]);return i!=null&&hM(i,t),t}function yM(n,e){let t={},i=p(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);let o=p(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);let s=p(n,["tunedModels"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>Nx(f))),h(t,["tuningJobs"],c)}return t}function _M(n,e){let t={},i=p(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);let o=p(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);let s=p(n,["tuningJobs"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>bh(f))),h(t,["tuningJobs"],c)}return t}function xM(n,e){let t={},i=p(n,["name"]);i!=null&&h(t,["model"],i);let o=p(n,["name"]);return o!=null&&h(t,["endpoint"],o),t}function CM(n,e){let t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=p(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(t,["examples","examples"],o)}return t}function bM(n,e,t){let i={},o=p(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let c=p(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(o==="PREFERENCE_TUNING"){let c=p(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let s=p(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){let c=p(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(s==="PREFERENCE_TUNING"){let c=p(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Nx(n,e){let t={},i=p(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);let o=p(n,["name"]);o!=null&&h(t,["name"],o);let s=p(n,["state"]);s!=null&&h(t,["state"],sx(s));let c=p(n,["createTime"]);c!=null&&h(t,["createTime"],c);let f=p(n,["tuningTask","startTime"]);f!=null&&h(t,["startTime"],f);let m=p(n,["tuningTask","completeTime"]);m!=null&&h(t,["endTime"],m);let v=p(n,["updateTime"]);v!=null&&h(t,["updateTime"],v);let g=p(n,["description"]);g!=null&&h(t,["description"],g);let b=p(n,["baseModel"]);b!=null&&h(t,["baseModel"],b);let C=p(n,["_self"]);return C!=null&&h(t,["tunedModel"],xM(C)),t}function bh(n,e){let t={},i=p(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);let o=p(n,["name"]);o!=null&&h(t,["name"],o);let s=p(n,["state"]);s!=null&&h(t,["state"],sx(s));let c=p(n,["createTime"]);c!=null&&h(t,["createTime"],c);let f=p(n,["startTime"]);f!=null&&h(t,["startTime"],f);let m=p(n,["endTime"]);m!=null&&h(t,["endTime"],m);let v=p(n,["updateTime"]);v!=null&&h(t,["updateTime"],v);let g=p(n,["error"]);g!=null&&h(t,["error"],g);let b=p(n,["description"]);b!=null&&h(t,["description"],b);let C=p(n,["baseModel"]);C!=null&&h(t,["baseModel"],C);let A=p(n,["tunedModel"]);A!=null&&h(t,["tunedModel"],A);let F=p(n,["preTunedModel"]);F!=null&&h(t,["preTunedModel"],F);let R=p(n,["supervisedTuningSpec"]);R!=null&&h(t,["supervisedTuningSpec"],R);let B=p(n,["preferenceOptimizationSpec"]);B!=null&&h(t,["preferenceOptimizationSpec"],B);let N=p(n,["tuningDataStats"]);N!=null&&h(t,["tuningDataStats"],N);let O=p(n,["encryptionSpec"]);O!=null&&h(t,["encryptionSpec"],O);let q=p(n,["partnerModelTuningSpec"]);q!=null&&h(t,["partnerModelTuningSpec"],q);let X=p(n,["customBaseModel"]);X!=null&&h(t,["customBaseModel"],X);let j=p(n,["experiment"]);j!=null&&h(t,["experiment"],j);let ie=p(n,["labels"]);ie!=null&&h(t,["labels"],ie);let he=p(n,["outputUri"]);he!=null&&h(t,["outputUri"],he);let ve=p(n,["pipelineJob"]);ve!=null&&h(t,["pipelineJob"],ve);let me=p(n,["serviceAccount"]);me!=null&&h(t,["serviceAccount"],me);let Te=p(n,["tunedModelDisplayName"]);Te!=null&&h(t,["tunedModelDisplayName"],Te);let $=p(n,["veoTuningSpec"]);return $!=null&&h(t,["veoTuningSpec"],$),t}function wM(n,e){let t={},i=p(n,["sdkHttpResponse"]);i!=null&&h(t,["sdkHttpResponse"],i);let o=p(n,["name"]);o!=null&&h(t,["name"],o);let s=p(n,["metadata"]);s!=null&&h(t,["metadata"],s);let c=p(n,["done"]);c!=null&&h(t,["done"],c);let f=p(n,["error"]);return f!=null&&h(t,["error"],f),t}function Z_(n,e){let t={},i=p(n,["gcsUri"]);i!=null&&h(t,["validationDatasetUri"],i);let o=p(n,["vertexDatasetResource"]);return o!=null&&h(t,["validationDatasetUri"],o),t}var wh=class extends Lr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Co(sa.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){let o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);let s=Object.assign(Object.assign({},t),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{let o=Object.assign({},t);return await this.tuneInternal(o)}else{let o=Object.assign({},t),s=await this.tuneMldevInternal(o),c="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?c=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(c=s.name.split("/operations/")[0]),{name:c,state:tx.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=pM(e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>bh(g))}else{let v=fM(e);return f=vt("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>Nx(g))}}async listInternal(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=vM(e);return f=vt("tuningJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=_M(g),C=new Hd;return Object.assign(C,b),C})}else{let v=gM(e);return f=vt("tunedModels",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=yM(g),C=new Hd;return Object.assign(C,b),C})}}async cancel(e){var t,i,o,s;let c,f="",m={};if(this.apiClient.isVertexAI()){let v=oM(e);return f=vt("{name}:cancel",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=sM(g),C=new Ud;return Object.assign(C,b),C})}else{let v=rM(e);return f=vt("{name}:cancel",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(b=>{let C=b;return C.sdkHttpResponse={headers:g.headers},C})),c.then(g=>{let b=aM(g),C=new Ud;return Object.assign(C,b),C})}}async tuneInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI()){let f=dM(e,e);return s=vt("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{let g=v;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>bh(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let f=cM(e);return s=vt("tunedModels",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(v=>{let g=v;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>wM(m))}}};var Sh=class{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},SM=1024*1024*8,EM=3,TM=1e3,AM=2,sf="x-goog-upload-status";async function DM(n,e,t){var i;let o=await Rx(n,e,t),s=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[sf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function kM(n,e,t){var i;let o=await Rx(n,e,t),s=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[sf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let c=ex(s),f=new Km;return Object.assign(f,c),f}async function Rx(n,e,t){var i,o;let s=0,c=0,f=new ku(new Response),m="upload";for(s=n.size;c<s;){let v=Math.min(SM,s-c),g=n.slice(c,c+v);c+v>=s&&(m+=", finalize");let b=0,C=TM;for(;b<EM&&(f=await t.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(v)}}}),!(!((i=f?.headers)===null||i===void 0)&&i[sf]));)b++,await MM(C),C=C*AM;if(c+=v,((o=f?.headers)===null||o===void 0?void 0:o[sf])!=="active")break;if(s<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function IM(n){return{size:n.size,type:n.type}}function MM(n){return new Promise(e=>setTimeout(e,n))}var Eh=class{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DM(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kM(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IM(e)}};var Th=class{create(e,t,i){return new Ah(e,t,i)}},Ah=class{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var j_="x-goog-api-key",Dh=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(j_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(j_,this.apiKey)}}};var FM="gl-node/",lf=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let t=new zn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;let i=aT(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let o=new Dh(this.apiKey);this.apiClient=new rh({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:FM+"web",uploader:new Eh,downloader:new Sh}),this.models=new ch(this.apiClient),this.live=new lh(this.apiClient,o,new Th),this.batches=new Xm(this.apiClient),this.chats=new Zm(this.models,this.apiClient),this.caches=new Qm(this.apiClient),this.files=new eh(this.apiClient),this.operations=new dh(this.apiClient),this.authTokens=new fh(this.apiClient),this.tunings=new wh(this.apiClient),this.fileSearchStores=new mh(this.apiClient)}};var Zi=class n{ai;constructor(){let e=typeof process<"u"&&process.env?.API_KEY?process.env.API_KEY:"";this.ai=new lf({apiKey:e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var ff=class n{ai=ze(Zi).ai;async generateBiDashboard(e,t){let o=`You are a business intelligence analyst. Analyze the following JSON contact data and generate a JSON object for a dashboard. The data fields are: ${t.map(f=>f.name).join(", ")}.
    The JSON object must contain three properties: 'kpis', 'charts', and 'insights'.
    1. 'kpis': An array of 2-3 key performance indicators. Each KPI object should have a 'title' (e.g., "Total Revenue") and a 'value' (e.g., "$1.2M").
    2. 'charts': An array containing one chart object. This object must have 'type' set to 'bar', a 'title' (e.g., "Contacts by Lead Source"), and 'data' which is an array of objects, each with a 'label' and 'value'. Choose the most relevant categorical field for the chart.
    3. 'insights': An array of 2-3 brief, actionable insights in plain text.
    Data: 

${JSON.stringify(e,null,2)}`,c=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:o,config:{responseMimeType:"application/json",responseSchema:{type:Ct.OBJECT,properties:{kpis:{type:Ct.ARRAY,items:{type:Ct.OBJECT,properties:{title:{type:Ct.STRING},value:{type:Ct.STRING},change:{type:Ct.STRING,nullable:!0}},required:["title","value"]}},charts:{type:Ct.ARRAY,items:{type:Ct.OBJECT,properties:{type:{type:Ct.STRING},title:{type:Ct.STRING},data:{type:Ct.ARRAY,items:{type:Ct.OBJECT,properties:{label:{type:Ct.STRING},value:{type:Ct.NUMBER}},required:["label","value"]}}},required:["type","title","data"]}},insights:{type:Ct.ARRAY,items:{type:Ct.STRING}}},required:["kpis","charts","insights"]}}})).text.trim();return JSON.parse(c)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var NM=()=>[1,2,3],RM=(n,e)=>e.title;function PM(n,e){n&1&&(z(0,"div",4),Ie(1,"div",13)(2,"div",14),G())}function VM(n,e){n&1&&(z(0,"div",0)(1,"div",3),nt(2,PM,3,0,"div",4,an),G(),z(4,"div",5)(5,"div",6),Ie(6,"div",7)(7,"div",8),G(),z(8,"div",4),Ie(9,"div",9),z(10,"div",10),Ie(11,"div",11)(12,"div",12)(13,"div",11),G()()()()),n&2&&(L(2),it(ta(0,NM)))}function LM(n,e){if(n&1&&(z(0,"div",1),Ie(1,"i",15),z(2,"h3",16),J(3,"Error"),G(),z(4,"p"),J(5),G()()),n&2){let t=I();L(5),Ue(t.error())}}function BM(n,e){if(n&1&&(z(0,"div",17)(1,"h3",21),J(2),G(),z(3,"p",22),J(4),G()()),n&2){let t=e.$implicit;L(2),Ue(t.title),L(2),Ue(t.value)}}function OM(n,e){if(n&1&&(z(0,"div",18)(1,"h3",19),J(2),G(),Ie(3,"div",23),G()),n&2){let i=I().charts[0];L(2),Ue(i.title),L(),Je("data",i.data)}}function HM(n,e){if(n&1&&(z(0,"li",20)(1,"div",24),Ie(2,"i",25),G(),z(3,"p",26),J(4),G()()),n&2){let t=e.$implicit;L(4),Ue(t)}}function UM(n,e){if(n&1&&(z(0,"div",2)(1,"div",3),nt(2,BM,5,2,"div",17,RM),G(),z(4,"div",5),fe(5,OM,4,2,"div",18),z(6,"div",17)(7,"h3",19),J(8,"AI Insights"),G(),z(9,"ul",10),nt(10,HM,5,1,"li",20,an),G()()()()),n&2){let t=e;L(2),it(t.kpis),L(3),pe(t.charts.length>0?5:-1),L(5),it(t.insights)}}var pf=class n{data=be.required();columns=be.required();aiDashboardService=ze(ff);isLoading=we(!0);dashboardContent=we(null);error=we(null);constructor(){Zt(async e=>{let t=this.data(),i=this.columns();if(t.length>0){this.isLoading.set(!0),this.error.set(null);try{let o=await this.aiDashboardService.generateBiDashboard(t,i);this.dashboardContent.set(o)}catch(o){console.error("Failed to generate BI dashboard:",o),this.error.set("Could not load AI-powered dashboard. Please try again.")}finally{this.isLoading.set(!1)}}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-bi-view"]],inputs:{data:[1,"data"],columns:[1,"columns"]},decls:3,vars:1,consts:[[1,"space-y-8","animate-pulse"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center","text-gray-500"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-white","p-6","rounded-lg","shadow"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","bg-white","p-6","rounded-lg","shadow"],[1,"h-6","bg-gray-300","rounded","w-1/4","mb-6"],[1,"h-72","bg-gray-300","rounded"],[1,"h-6","bg-gray-300","rounded","w-1/3","mb-6"],[1,"space-y-4"],[1,"h-4","bg-gray-300","rounded","w-full"],[1,"h-4","bg-gray-300","rounded","w-5/6"],[1,"h-4","bg-gray-300","rounded","w-1/3","mb-4"],[1,"h-8","bg-gray-300","rounded","w-1/2"],[1,"pi","pi-exclamation-triangle","text-5xl","text-red-500","mb-4"],[1,"text-xl","font-semibold","mb-2"],[1,"bg-white","p-6","rounded-lg","shadow-md","border","border-gray-200"],[1,"lg:col-span-2","bg-white","p-6","rounded-lg","shadow-md","border","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"flex","items-start"],[1,"text-sm","font-medium","text-gray-500","truncate"],[1,"mt-1","text-3xl","font-semibold","tracking-tight","text-gray-900"],["appD3BarChart","",3,"data"],[1,"flex-shrink-0"],[1,"pi","pi-check-circle","text-green-500","mt-1"],[1,"ml-3","text-sm","text-gray-600"]],template:function(t,i){if(t&1&&fe(0,VM,14,1,"div",0)(1,LM,6,1,"div",1)(2,UM,12,1,"div",2),t&2){let o;pe(i.isLoading()?0:i.error()?1:(o=i.dashboardContent())?2:-1,o)}},dependencies:[kt,Td],encapsulation:2,changeDetection:0})};var Zs=class n{ai=ze(Zi).ai;async generateNarration(e,t){let o=`You are a data analyst. Based on the following JSON data representing contacts, provide a concise narrative summary. The data has the following columns: ${t.map(c=>c.name).join(", ")}. Highlight key trends, such as distribution of contacts or any notable patterns in annual revenue. Keep the summary to 3-4 sentences. Data: 

${JSON.stringify(e,null,2)}`;return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:o})).text}async suggestInsights(e,t){let o=`You are a business intelligence analyst. Analyze this JSON contact data and suggest 3 key insights or important metrics a user should focus on. Present them as a bulleted list using markdown. The available data fields are: ${t.map(c=>c.name).join(", ")}. For example, suggest looking at the average revenue or which lead source is most common. Data: 

${JSON.stringify(e,null,2)}`;return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:o})).text}async getQuickMetrics(e,t){let o=`You are a data analyst. Based on the following JSON contact data, identify the most insightful categorical column (like 'Lead Source', 'Country', or 'City') to perform a 'group by' and 'count' operation on. Then, provide the counts for each category in that column, ordered from highest to lowest count. Present the result in a clear, human-readable format with a title and use markdown for formatting. The available data fields are: ${t.map(c=>c.name).join(", ")}. Data: 

${JSON.stringify(e,null,2)}`;return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:o})).text}async summarizeCalendarDay(e){let t=`You are a helpful assistant. Summarize the following list of contacts that were created on a specific day. Mention the total number of new contacts and highlight any notable names or companies if there are fewer than 5 contacts. Keep the summary to 1-2 sentences. Data:

${JSON.stringify(e.map(o=>({name:o.contact_person,company:o.organization_name})),null,2)}`;return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:t})).text}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var zM=()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],GM=(n,e)=>e.date,qM=(n,e)=>e.organization_id;function WM(n,e){if(n&1&&(ne(0,"div",14),J(1),oe()),n&2){let t=e.$implicit;L(),Ue(t)}}function $M(n,e){if(n&1&&(ne(0,"div",19)(1,"span",20),J(2),oe()()),n&2){let t=I().$implicit;L(2),Jt(" ",t.contacts.length," ")}}function KM(n,e){if(n&1){let t=Ne();ne(0,"div",17),Ye("click",function(){let o=ee(t).$implicit,s=I();return te(s.selectDay(o))}),ne(1,"time",18),oi(2,"date"),J(3),oi(4,"date"),oe(),fe(5,$M,3,1,"div",19),oe()}if(n&2){let t=e.$implicit,i=I();Ze("cursor-pointer",t.contacts.length>0)("hover:bg-slate-50",t.contacts.length>0)("bg-gray-50",!t.isCurrentMonth),L(),Ze("text-gray-400",!t.isCurrentMonth)("text-white",i.isToday(t.date))("bg-slate-900",i.isToday(t.date))("font-semibold",i.isToday(t.date)),Ft("dateTime",or(2,17,t.date,"yyyy-MM-dd")),L(2),Jt(" ",or(4,20,t.date,"d")," "),L(2),pe(t.contacts.length>0?5:-1)}}function JM(n,e){n&1&&at(0,"div",30)}function YM(n,e){if(n&1&&(ne(0,"p",31),J(1),oe()),n&2){let t=I(2);L(),Ue(t.aiSummary())}}function XM(n,e){if(n&1&&(ne(0,"li",34),at(1,"img",35),ne(2,"div")(3,"p",36),J(4),oe(),ne(5,"p",37),J(6),oe()()()),n&2){let t=e.$implicit;L(),Ft("src",t.avatar_url,Fr),L(3),Ue(t.contact_person),L(2),Ue(t.organization_name)}}function QM(n,e){if(n&1){let t=Ne();ne(0,"div",21),Ye("click",function(){ee(t);let o=I();return te(o.selectedDay.set(null))}),ne(1,"div",22),Ye("click",function(o){return ee(t),te(o.stopPropagation())}),ne(2,"header",1)(3,"h3",23),J(4),oi(5,"date"),oe(),ne(6,"button",24),Ye("click",function(){ee(t);let o=I();return te(o.selectedDay.set(null))}),at(7,"i",25),oe()(),ne(8,"div",26)(9,"div",27)(10,"h4",28),at(11,"i",29),J(12,"AI Summary"),oe(),fe(13,JM,1,0,"div",30)(14,YM,2,1,"p",31),oe(),ne(15,"h4",32),J(16),oe(),ne(17,"ul",33),nt(18,XM,7,3,"li",34,qM),oe()()()()}if(n&2){let t=e,i=I();L(4),Jt("Activity for ",or(5,3,t.date,"longDate")),L(9),pe(i.isSummaryLoading()?13:14),L(3),Jt("New Contacts (",t.contacts.length,")"),L(2),it(t.contacts)}}var mf=class n{data=be.required();columns=be.required();config=be.required();aiSummaryService=ze(Zs);currentDate=we(new Date);selectedDay=we(null);aiSummary=we(null);isSummaryLoading=we(!1);dateFieldName=ct(()=>{let e=this.config().dateFieldCode,t=this.columns().find(i=>i.code===e);return t?t.name:this.config().dateFieldCode});contactsByDate=ct(()=>{let e=new Map,t=this.config().dateFieldCode;for(let i of this.data()){let o=i[t];if(o&&typeof o=="string"){let s=new Date(o).toISOString().split("T")[0];e.has(s)||e.set(s,[]),e.get(s).push(i)}}return e});calendarGrid=ct(()=>{let e=this.currentDate(),t=e.getFullYear(),i=e.getMonth(),o=new Date(t,i,1),s=new Date(t,i+1,0),c=o.getDay(),f=s.getDate(),m=[];for(let g=0;g<c;g++){let b=new Date(o);b.setDate(b.getDate()-(c-g)),m.push({date:b,isCurrentMonth:!1,contacts:this.getContactsForDate(b)})}for(let g=1;g<=f;g++){let b=new Date(t,i,g);m.push({date:b,isCurrentMonth:!0,contacts:this.getContactsForDate(b)})}let v=42-m.length;for(let g=1;g<=v;g++){let b=new Date(s);b.setDate(b.getDate()+g),m.push({date:b,isCurrentMonth:!1,contacts:this.getContactsForDate(b)})}return m});getContactsForDate(e){let t=e.toISOString().split("T")[0];return this.contactsByDate().get(t)||[]}async selectDay(e){if(e.contacts.length===0){this.selectedDay.set(null);return}this.selectedDay.set(e),this.isSummaryLoading.set(!0),this.aiSummary.set(null);try{let t=await this.aiSummaryService.summarizeCalendarDay(e.contacts);this.aiSummary.set(t)}catch(t){console.error("Failed to get AI summary",t),this.aiSummary.set("Could not generate summary.")}finally{this.isSummaryLoading.set(!1)}}changeMonth(e){this.currentDate.update(t=>{let i=new Date(t);return i.setMonth(i.getMonth()+e),i})}goToToday(){this.currentDate.set(new Date)}isToday(e){let t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-calendar-view"]],inputs:{data:[1,"data"],columns:[1,"columns"],config:[1,"config"]},decls:24,vars:7,consts:[[1,"bg-white","rounded-lg","shadow-md","border","border-gray-200","h-full","flex","flex-col"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"flex","items-center","gap-4"],[1,"px-4","py-2","text-sm","font-medium","border","rounded-md","hover:bg-gray-100",3,"click"],[1,"flex","items-center","gap-2"],["title","Previous month",1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-chevron-left"],["title","Next month",1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-chevron-right"],[1,"text-lg","font-semibold","text-center"],[1,"w-48","text-right"],[1,"text-sm","font-medium","text-gray-700"],[1,"font-semibold","text-indigo-600"],[1,"grid","grid-cols-7","flex-grow"],[1,"text-center","font-medium","text-xs","text-gray-500","py-2","border-b","border-r","border-gray-200"],[1,"border-b","border-r","border-gray-200","p-2","flex","flex-col","transition-colors",3,"cursor-pointer","hover:bg-slate-50","bg-gray-50"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50"],[1,"border-b","border-r","border-gray-200","p-2","flex","flex-col","transition-colors",3,"click"],[1,"h-6","w-6","flex","items-center","justify-center","rounded-full","text-sm",3,"dateTime"],[1,"mt-2","text-center"],[1,"inline-flex","items-center","justify-center","h-6","w-6","text-xs","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-lg","m-4",3,"click"],[1,"text-lg","font-semibold"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6"],[1,"bg-gray-50","p-4","rounded-lg","mb-4"],[1,"font-semibold","text-sm","mb-2","flex","items-center"],[1,"pi","pi-sparkles","text-indigo-500","mr-2"],[1,"h-4","bg-gray-300","rounded","w-full","animate-pulse"],[1,"text-sm","text-gray-700"],[1,"font-semibold","text-sm","mb-2"],[1,"divide-y","divide-gray-200","max-h-60","overflow-y-auto"],[1,"py-2","flex","items-center","gap-3"],["alt","Avatar",1,"h-8","w-8","rounded-full","object-cover",3,"src"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"]],template:function(t,i){if(t&1&&(ne(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),Ye("click",function(){return i.goToToday()}),J(4,"Today"),oe(),ne(5,"div",4)(6,"button",5),Ye("click",function(){return i.changeMonth(-1)}),at(7,"i",6),oe(),ne(8,"button",7),Ye("click",function(){return i.changeMonth(1)}),at(9,"i",8),oe()()(),ne(10,"h2",9),J(11),oi(12,"date"),oe(),ne(13,"div",10)(14,"p",11),J(15," Field: "),ne(16,"span",12),J(17),oe()()()(),ne(18,"div",13),nt(19,WM,2,1,"div",14,an),nt(21,KM,6,23,"div",15,GM),oe()(),fe(23,QM,20,6,"div",16)),t&2){let o;L(11),Ue(or(12,3,i.currentDate(),"LLLL yyyy")),L(6),Jt(" ",i.dateFieldName()," "),L(2),it(ta(6,zM)),L(2),it(i.calendarGrid()),L(2),pe((o=i.selectedDay())?23:-1,o)}},dependencies:[kt,Fs],encapsulation:2,changeDetection:0})};function ZM(n,e){if(n&1&&(ne(0,"div",2),at(1,"span",18),ne(2,"span",19),J(3),oe()()),n&2){let t=e;Ft("title","Connection is "+t.text),L(),qt(t.class),L(2),Ue(t.text)}}function jM(n,e){n&1&&(ne(0,"div",3),at(1,"i",20),ne(2,"span",7),J(3),oe()()),n&2&&(Ft("title","Current Data Strategy"),L(3),Ue(e))}function e5(n,e){n&1&&(ne(0,"span",22),J(1,"Syncing..."),oe())}function t5(n,e){if(n&1&&(ne(0,"span",23),J(1),oe()),n&2){let t=I(2);Ft("title",t.fullSyncTime()),L(),Jt("Last sync: ",t.relativeSyncTime())}}function n5(n,e){if(n&1&&(ne(0,"div",4),at(1,"i",21),fe(2,e5,2,0,"span",22)(3,t5,2,2,"span",23),oe()),n&2){let t=I();L(2),pe(t.isSyncing()?2:3)}}function i5(n,e){if(n&1&&(ne(0,"option",11),J(1),oe()),n&2){let t=e.$implicit,i=I();Ft("value",t)("selected",t===i.pageSize()),L(),Ue(t)}}function r5(n,e){n&1&&(ne(0,"span",27),J(1,"..."),oe())}function o5(n,e){if(n&1){let t=Ne();ne(0,"button",29),Ye("click",function(){ee(t);let o=I().$implicit,s=I(2);return te(s.goToPage(o))}),J(1),oe()}if(n&2){let t=I().$implicit,i=I(2);Ze("bg-slate-900",t===i.currentPage())("text-white",t===i.currentPage())("border-slate-900",t===i.currentPage()),Ft("title","Go to page "+t),L(),Jt(" ",t," ")}}function a5(n,e){if(n&1&&fe(0,r5,2,0,"span",27)(1,o5,2,8,"button",28),n&2){let t=e.$implicit;pe(t==="..."?0:1)}}function s5(n,e){if(n&1){let t=Ne();ne(0,"button",24),Ye("click",function(){ee(t);let o=I();return te(o.previousPage())}),J(1," Previous "),oe(),ne(2,"div",25),nt(3,a5,2,1,null,null,Qo),oe(),ne(5,"button",26),Ye("click",function(){ee(t);let o=I();return te(o.nextPage())}),J(6," Next "),oe()}if(n&2){let t=I();Ft("disabled",t.currentPage()===1),L(3),it(t.pages()),L(2),Ft("disabled",t.currentPage()===t.totalPages())}}function l5(n,e){n&1&&at(0,"div",15)}var hf=class n{currentPage=be.required();pageSize=be.required();totalRecords=be.required();pageSizeOptions=be([12,20,50,100]);infiniteScroll=be(!1);infiniteScrollBehavior=be("append");currentRecordCount=be(0);autoSizingEnabled=be(!1);dataStrategy=be();connectionStatus=be();lastSyncTime=be();isSyncing=be();pageChange=ht();pageSizeChange=ht();autoSizingToggle=ht();chatbotToggle=ht();isAppendMode=ct(()=>this.infiniteScroll()&&this.infiniteScrollBehavior()==="append");totalPages=ct(()=>Math.ceil(this.totalRecords()/this.pageSize()));recordRangeStart=ct(()=>this.isAppendMode()?this.totalRecords()>0?1:0:(this.currentPage()-1)*this.pageSize()+1);recordRangeEnd=ct(()=>this.isAppendMode()?this.currentRecordCount():Math.min(this.currentPage()*this.pageSize(),this.totalRecords()));pages=ct(()=>{let e=this.totalPages(),t=this.currentPage(),i=2,o=[];for(let s=Math.max(2,t-i);s<=Math.min(e-1,t+i);s++)o.push(s);return t-i>2&&o.unshift("..."),t+i<e-1&&o.push("..."),o.unshift(1),e>1&&o.push(e),o});relativeSyncTime=ct(()=>{let e=this.lastSyncTime();if(!e)return"never";let t=new Date().getTime(),i=Math.round((t-e)/1e3);if(i<2)return"just now";if(i<60)return`${i}s ago`;let o=Math.round(i/60);if(o<60)return`${o}m ago`;let s=Math.round(o/60);return s<24?`${s}h ago`:new Date(e).toLocaleDateString()});fullSyncTime=ct(()=>{let e=this.lastSyncTime();return e?new Date(e).toLocaleString():""});goToPage(e){typeof e=="number"&&e>=1&&e<=this.totalPages()&&this.pageChange.emit(e)}nextPage(){this.currentPage()<this.totalPages()&&this.goToPage(this.currentPage()+1)}previousPage(){this.currentPage()>1&&this.goToPage(this.currentPage()-1)}onPageSizeChange(e){let t=parseInt(e.target.value,10);this.pageSizeChange.emit(t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-paginator"]],inputs:{currentPage:[1,"currentPage"],pageSize:[1,"pageSize"],totalRecords:[1,"totalRecords"],pageSizeOptions:[1,"pageSizeOptions"],infiniteScroll:[1,"infiniteScroll"],infiniteScrollBehavior:[1,"infiniteScrollBehavior"],currentRecordCount:[1,"currentRecordCount"],autoSizingEnabled:[1,"autoSizingEnabled"],dataStrategy:[1,"dataStrategy"],connectionStatus:[1,"connectionStatus"],lastSyncTime:[1,"lastSyncTime"],isSyncing:[1,"isSyncing"]},outputs:{pageChange:"pageChange",pageSizeChange:"pageSizeChange",autoSizingToggle:"autoSizingToggle",chatbotToggle:"chatbotToggle"},decls:30,vars:18,consts:[["aria-label","Pagination",1,"flex","items-center","justify-between","border-t","border-gray-200","px-4","py-3","sm:px-6"],[1,"flex","items-center","gap-4"],[1,"flex","items-center","gap-2","text-xs",3,"title"],[1,"flex","items-center","gap-1.5","text-xs","text-gray-600",3,"title"],[1,"flex","items-center","gap-1.5","text-xs","text-gray-600"],[1,"block","h-6","w-px","bg-gray-300"],[1,"text-sm","text-gray-700"],[1,"font-medium"],[1,"flex","items-center","text-sm","text-gray-700"],["for","pageSize",1,"mr-2"],["id","pageSize","title","Select number of rows per page",1,"px-2","py-1","border","border-gray-300","rounded-md","bg-white","focus:outline-none","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500",3,"change"],[3,"value","selected"],[1,"px-4","py-2","rounded-md","border","transition-colors","text-sm",3,"click","title"],[1,"pi","pi-arrows-alt"],[1,"flex-1","flex","justify-between","items-center","sm:justify-end","gap-3"],[1,"flex-1"],["title","Open AI Assistant",1,"flex-shrink-0","flex","items-center","justify-center","h-8","w-8","rounded-full","bg-indigo-600","text-white","shadow-md","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","transition-transform","hover:scale-110",3,"click"],[1,"pi","pi-comments","text-lg"],[1,"h-2.5","w-2.5","rounded-full"],[1,"text-gray-600"],[1,"pi","pi-database"],[1,"pi","pi-history"],[1,"font-medium","animate-pulse"],[3,"title"],["title","Go to previous page",1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","items-center"],["title","Go to next page",1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-transparent","text-sm","font-medium","text-gray-700"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"title","bg-slate-900","text-white","border-slate-900"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","title"]],template:function(t,i){if(t&1&&(ne(0,"nav",0)(1,"div",1),fe(2,ZM,4,4,"div",2),fe(3,jM,4,2,"div",3),fe(4,n5,4,1,"div",4),at(5,"div",5),ne(6,"p",6),J(7," Showing "),ne(8,"span",7),J(9),oe(),J(10," to "),ne(11,"span",7),J(12),oe(),J(13," of "),ne(14,"span",7),J(15),oe(),J(16," results "),oe(),ne(17,"div",8)(18,"label",9),J(19,"Rows:"),oe(),ne(20,"select",10),Ye("change",function(s){return i.onPageSizeChange(s)}),nt(21,i5,2,3,"option",11,an),oe()(),ne(23,"button",12),Ye("click",function(){return i.autoSizingToggle.emit()}),at(24,"i",13),oe()(),ne(25,"div",14),fe(26,s5,7,2)(27,l5,1,0,"div",15),ne(28,"button",16),Ye("click",function(){return i.chatbotToggle.emit()}),at(29,"i",17),oe()()()),t&2){let o,s;L(2),pe((o=i.connectionStatus())?2:-1,o),L(),pe((s=i.dataStrategy())?3:-1,s),L(),pe(i.dataStrategy()==="SYNC"?4:-1),L(5),Ue(i.recordRangeStart()),L(3),Ue(i.recordRangeEnd()),L(3),Ue(i.totalRecords()),L(6),it(i.pageSizeOptions()),L(2),Ze("bg-slate-900",i.autoSizingEnabled())("text-white",i.autoSizingEnabled())("bg-white",!i.autoSizingEnabled())("border-gray-300",!i.autoSizingEnabled())("hover:bg-gray-100",!i.autoSizingEnabled()),Ft("title",i.autoSizingEnabled()?"Disable Auto Page Sizing":"Enable Auto Page Sizing"),L(3),pe(i.infiniteScroll()?27:26)}},dependencies:[kt],encapsulation:2,changeDetection:0})};var u5=(n,e)=>e.code;function c5(n,e){if(n&1){let t=Ne();ne(0,"li",7),Ye("dragstart",function(){let o=ee(t).$index,s=I();return te(s.onDragStart(o))})("dragover",function(o){ee(t);let s=I();return te(s.onDragOver(o))})("drop",function(o){let s=ee(t).$index,c=I();return te(c.onDrop(o,s))})("dragend",function(){ee(t);let o=I();return te(o.onDragEnd())}),ne(1,"input",8),Ye("change",function(o){let s=ee(t).$implicit,c=I();return te(c.onVisibilityChange(s,o))}),oe(),ne(2,"span",9),J(3),oe(),at(4,"i",10),oe()}if(n&2){let t=e.$implicit,i=e.$index,o=I();Ze("opacity-50",o.draggedColumnIndex()===i),L(),Ft("checked",o.isColumnVisible(t.code)),L(2),Ue(t.name)}}var gf=class n{allColumns=be.required();visibleColumns=be.required();visibilityChange=ht();orderChange=ht();draggedColumnIndex=we(null);isColumnVisible(e){return this.visibleColumns().some(t=>t.code===e)}onVisibilityChange(e,t){t.preventDefault(),this.visibilityChange.emit(e)}onDragStart(e){this.draggedColumnIndex.set(e)}onDragOver(e){e.preventDefault()}onDrop(e,t){e.preventDefault();let i=this.draggedColumnIndex();if(i===null||i===t){this.draggedColumnIndex.set(null);return}let o=[...this.allColumns()],[s]=o.splice(i,1);o.splice(t,0,s),this.orderChange.emit(o),this.draggedColumnIndex.set(null)}onDragEnd(){this.draggedColumnIndex.set(null)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-column-chooser"]],inputs:{allColumns:[1,"allColumns"],visibleColumns:[1,"visibleColumns"]},outputs:{visibilityChange:"visibilityChange",orderChange:"orderChange"},decls:10,vars:0,consts:[[1,"origin-top-right","absolute","right-0","mt-2","w-64","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-10"],[1,"py-1"],[1,"px-4","py-2"],[1,"text-xs","text-gray-400","uppercase","tracking-wider"],[1,"text-xs","text-gray-400"],[1,"space-y-1"],["draggable","true",1,"flex","items-center","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","transition-colors","duration-150",3,"opacity-50"],["draggable","true",1,"flex","items-center","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","transition-colors","duration-150",3,"dragstart","dragover","drop","dragend"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","checked"],[1,"ml-3"],["title","Drag to reorder",1,"pi","pi-bars","ml-auto","cursor-move","text-gray-400"]],template:function(t,i){t&1&&(ne(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),J(4,"Show/Hide Columns"),oe(),ne(5,"p",4),J(6,"Drag to reorder"),oe()(),ne(7,"ul",5),nt(8,c5,5,4,"li",6,u5),oe()()()),t&2&&(L(8),it(i.allColumns()))},dependencies:[kt],encapsulation:2,changeDetection:0})};var d5=(n,e)=>e.name,f5=(n,e)=>e.code;function p5(n,e){if(n&1){let t=Ne();z(0,"li",29),_e("click",function(){let o=ee(t).$implicit,s=I(4).$implicit,c=I(2);return te(c.updateFilterOperator(s.code,o))}),J(1),G()}if(n&2){let t=e.$implicit;L(),Ue(t)}}function m5(n,e){if(n&1){let t=Ne();z(0,"ul",27),_e("clickOutside",function(){ee(t);let o=I(5);return te(o.closeAllDropdowns())}),nt(1,p5,2,1,"li",28,an),G()}if(n&2){let t=I(3).$implicit;L(),it(t.operators)}}function h5(n,e){if(n&1){let t=Ne();z(0,"div",20)(1,"span",30),J(2,"and"),G(),z(3,"input",26),_e("input",function(o){ee(t);let s=I(3).$implicit,c=I(2);return te(c.updateFilterValue(s.code,"value2",o))}),G()()}if(n&2){I(3);let t=Mi(0);L(3),Je("value",t.value2||"")}}function g5(n,e){if(n&1){let t=Ne();z(0,"div",20)(1,"div",22)(2,"button",23),_e("click",function(){ee(t);let o=I(2).$implicit,s=I(2);return te(s.toggleDropdown(o.code))}),z(3,"span"),J(4),G(),Ie(5,"i",24),G(),fe(6,m5,3,0,"ul",25),G(),z(7,"input",26),_e("input",function(o){ee(t);let s=I(2).$implicit,c=I(2);return te(c.updateFilterValue(s.code,"value1",o))}),G()(),fe(8,h5,4,1,"div",20)}if(n&2){let t=I(2).$implicit,i=Mi(0),o=I(2);L(4),Ue(i.operator),L(2),pe(o.isDropdownOpen(t.code)?6:-1),L(),Je("value",i.value1),L(),pe(i.operator==="between"||i.operator==="not between"?8:-1)}}function v5(n,e){if(n&1){let t=Ne();z(0,"li",29),_e("click",function(){let o=ee(t).$implicit,s=I(4).$implicit,c=I(2);return te(c.updateFilterOperator(s.code,o))}),J(1),G()}if(n&2){let t=e.$implicit;L(),Ue(t)}}function y5(n,e){if(n&1){let t=Ne();z(0,"ul",27),_e("clickOutside",function(){ee(t);let o=I(5);return te(o.closeAllDropdowns())}),nt(1,v5,2,1,"li",28,an),G()}if(n&2){let t=I(3).$implicit;L(),it(t.dateOperators)}}function _5(n,e){if(n&1){let t=Ne();z(0,"div",20)(1,"div",31)(2,"button",23),_e("click",function(){ee(t);let o=I(2).$implicit,s=I(2);return te(s.toggleDropdown(o.code))}),z(3,"span"),J(4),G(),Ie(5,"i",24),G(),fe(6,y5,3,0,"ul",25),G()()}if(n&2){let t=I(2).$implicit,i=Mi(0),o=I(2);L(4),Ue(i.operator),L(2),pe(o.isDropdownOpen(t.code)?6:-1)}}function x5(n,e){if(n&1&&(z(0,"option",34),J(1),G()),n&2){let t=e.$implicit;Je("value",t),L(),Ue(t)}}function C5(n,e){if(n&1){let t=Ne();z(0,"select",32),_e("change",function(o){ee(t);let s=I(2).$implicit,c=I(2);return te(c.updateFilterValue(s.code,"value1",o))}),z(1,"option",33),J(2,"Select..."),G(),nt(3,x5,2,2,"option",34,an),G()}if(n&2){let t=I(2).$implicit,i=Mi(0);Je("value",i.value1),L(3),it(t.options)}}function b5(n,e){if(n&1&&(z(0,"div",19),fe(1,g5,9,4),fe(2,_5,7,2,"div",20),fe(3,C5,5,1,"select",21),G()),n&2){let t=I().$implicit;L(),pe(t.type==="text"||t.type==="numeric"?1:-1),L(),pe(t.type==="date"?2:-1),L(),pe(t.type==="select"?3:-1)}}function w5(n,e){if(n&1){let t=Ne();Zo(0),z(1,"li")(2,"div",16)(3,"input",17),_e("change",function(o){let s=ee(t).$implicit,c=I(2);return te(c.toggleFilter(s,o))}),G(),z(4,"label",18),J(5),G()(),fe(6,b5,4,3,"div",19),G()}if(n&2){let t=e.$implicit,i=jo(I(2).localActiveFilters()[t.code]);L(3),Je("id",t.code)("checked",!!i),L(),Je("for",t.code),L(),Ue(t.name),L(),pe(i?6:-1)}}function S5(n,e){if(n&1&&(z(0,"div",10)(1,"h3",14),J(2),G(),z(3,"ul",15),nt(4,w5,7,6,"li",null,f5),G()()),n&2){let t=e.$implicit;L(2),Ue(t.name),L(2),it(t.filters)}}var vf=class n{isOpen=be.required();config=be.required();activeFilters=be.required();close=ht();apply=ht();localActiveFilters=we({});openDropdowns=we(new Set);constructor(){Zt(()=>{this.isOpen()&&this.localActiveFilters.set(JSON.parse(JSON.stringify(this.activeFilters())))})}toggleFilter(e,t){let i=t.target.checked,o=Rt({},this.localActiveFilters());i?o[e.code]||(o[e.code]={code:e.code,name:e.name,type:e.type,operator:e.defaultOperator||(e.operators?e.operators[0]:e.dateOperators?e.dateOperators[0]:"="),value1:e.value||"",value2:e.value2}):delete o[e.code],this.localActiveFilters.set(o)}updateFilterValue(e,t,i){let o=i.target.value;this.localActiveFilters.update(s=>(s[e]&&(s[e][t]=o),Rt({},s)))}updateFilterOperator(e,t){this.localActiveFilters.update(i=>(i[e]&&(i[e].operator=t),Rt({},i))),this.toggleDropdown(e)}applyFilters(){this.apply.emit(this.localActiveFilters())}clearFilters(){this.localActiveFilters.set({}),this.apply.emit({})}toggleDropdown(e){this.openDropdowns.update(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i})}closeAllDropdowns(){this.openDropdowns.set(new Set)}isDropdownOpen(e){return this.openDropdowns().has(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-filter-sidebar"]],inputs:{isOpen:[1,"isOpen"],config:[1,"config"],activeFilters:[1,"activeFilters"]},outputs:{close:"close",apply:"apply"},decls:18,vars:4,consts:[[1,"fixed","top-0","right-0","h-full","w-96","bg-white","shadow-2xl","z-40","transform","transition-transform","duration-300","ease-in-out","flex","flex-col"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200","flex-shrink-0"],[1,"text-lg","font-semibold","text-gray-800"],["title","Close Filters",1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"pi","pi-times","text-xl"],[1,"flex-grow","p-4","overflow-y-auto","custom-scrollbar"],[1,"relative","mb-4"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"pi","pi-search","text-gray-400"],["type","search","placeholder","Search",1,"w-full","pl-10","pr-4","py-2","text-sm","border","border-gray-300","rounded-md","bg-white","focus:ring-indigo-500","focus:border-indigo-500"],[1,"mb-6"],[1,"flex","items-center","justify-end","p-4","border-t","border-gray-200","flex-shrink-0","space-x-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-slate-500",3,"click"],[1,"text-sm","font-semibold","uppercase","text-gray-500","mb-2"],[1,"space-y-2"],[1,"flex","items-center"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500","bg-white",3,"change","id","checked"],[1,"ml-3","text-sm","text-gray-700",3,"for"],[1,"mt-2","pl-7","space-y-2"],[1,"flex","items-center","gap-2"],[1,"w-full","px-2","py-1.5","text-xs","border","border-gray-300","rounded-md","bg-white","focus:ring-indigo-500","focus:border-indigo-500",3,"value"],[1,"relative","w-28"],[1,"flex","items-center","justify-between","w-full","px-2","py-1.5","text-xs","text-left","bg-white","border","border-gray-300","rounded-md",3,"click"],[1,"pi","pi-chevron-down","text-xs"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-300","rounded-md","shadow-lg","max-h-48","overflow-auto"],["type","text","placeholder","Type here",1,"flex-1","w-full","px-2","py-1.5","text-xs","border","border-gray-300","rounded-md","bg-white",3,"input","value"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-300","rounded-md","shadow-lg","max-h-48","overflow-auto",3,"clickOutside"],[1,"px-2","py-1.5","text-xs","hover:bg-indigo-50","cursor-pointer"],[1,"px-2","py-1.5","text-xs","hover:bg-indigo-50","cursor-pointer",3,"click"],[1,"text-xs","w-28","text-center"],[1,"relative","w-full"],[1,"w-full","px-2","py-1.5","text-xs","border","border-gray-300","rounded-md","bg-white","focus:ring-indigo-500","focus:border-indigo-500",3,"change","value"],["value",""],[3,"value"]],template:function(t,i){t&1&&(z(0,"aside",0)(1,"header",1)(2,"h2",2),J(3,"Filter By"),G(),z(4,"button",3),_e("click",function(){return i.close.emit()}),Ie(5,"i",4),G()(),z(6,"div",5)(7,"div",6)(8,"div",7),Ie(9,"i",8),G(),Ie(10,"input",9),G(),nt(11,S5,6,1,"div",10,d5),G(),z(13,"footer",11)(14,"button",12),_e("click",function(){return i.clearFilters()}),J(15," Clear "),G(),z(16,"button",13),_e("click",function(){return i.applyFilters()}),J(17," Apply "),G()()()),t&2&&(Ze("translate-x-0",i.isOpen())("translate-x-full",!i.isOpen()),L(11),it(i.config().groups))},dependencies:[kt,xr],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}"],changeDetection:0})};var qx=Ko(Mu()),xH=Ko(Lx()),CH=Ko(Hx()),bH=Ko(Gx());var yf=class n{el=ze(Mr);editor;isInternalChange=!1;value=be("");valueChange=ht();constructor(){Zt(()=>{let e=this.value();if(this.editor&&!this.isInternalChange&&this.editor.getValue()!==e){let t=this.editor.getCursor();this.editor.setValue(e),this.editor.setCursor(t)}})}ngAfterViewInit(){let e={value:this.value(),mode:{name:"javascript",json:!0},theme:"neo",lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,viewportMargin:1/0};this.editor=(0,qx.default)(this.el.nativeElement,e),this.editor?.on("change",t=>{let i=t.getValue();this.isInternalChange=!0,this.valueChange.emit(i),setTimeout(()=>this.isInternalChange=!1,0)})}ngOnDestroy(){if(this.editor){let e=this.editor.getWrapperElement();e.parentNode?.removeChild(e),this.editor=void 0}}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Nn({type:n,selectors:[["","appJsonEditor",""]],inputs:{value:[1,"value"]},outputs:{valueChange:"valueChange"}})};var e1=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(Fn(iu),Fn(Mr))};static \u0275dir=Nn({type:n})}return n})(),Bu=(()=>{class n extends e1{static \u0275fac=(()=>{let t;return function(o){return(t||(t=za(n)))(o||n)}})();static \u0275dir=Nn({type:n,features:[yr]})}return n})(),il=new vo(""),E5={provide:il,useExisting:Yo(()=>Uh),multi:!0},Uh=(()=>{class n extends Bu{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=za(n)))(o||n)}})();static \u0275dir=Nn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&_e("change",function(c){return o.onChange(c.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[ea([E5]),yr]})}return n})(),T5={provide:il,useExisting:Yo(()=>Df),multi:!0};function A5(){let n=Hp()?Hp().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var D5=new vo(""),Df=(()=>{class n extends e1{_compositionMode;_composing=!1;constructor(t,i,o){super(t,i),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!A5())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(Fn(iu),Fn(Mr),Fn(D5,8))};static \u0275dir=Nn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&_e("input",function(c){return o._handleInput(c.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(c){return o._compositionEnd(c.target.value)})},standalone:!1,features:[ea([T5]),yr]})}return n})();var t1=new vo(""),n1=new vo("");function i1(n){return n!=null}function r1(n){return dv(n)?$i(n):n}function o1(n){let e={};return n.forEach(t=>{e=t!=null?Rt(Rt({},e),t):e}),Object.keys(e).length===0?null:e}function a1(n,e){return e.map(t=>t(n))}function k5(n){return!n.validate}function s1(n){return n.map(e=>k5(e)?e:t=>e.validate(t))}function I5(n){if(!n)return null;let e=n.filter(i1);return e.length==0?null:function(t){return o1(a1(t,e))}}function l1(n){return n!=null?I5(s1(n)):null}function M5(n){if(!n)return null;let e=n.filter(i1);return e.length==0?null:function(t){let i=a1(t,e).map(r1);return ov(i).pipe(Jo(o1))}}function u1(n){return n!=null?M5(s1(n)):null}function Wx(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function c1(n){return n._rawValidators}function d1(n){return n._rawAsyncValidators}function Lh(n){return n?Array.isArray(n)?n:[n]:[]}function Cf(n,e){return Array.isArray(n)?n.includes(e):n===e}function $x(n,e){let t=Lh(e);return Lh(n).forEach(o=>{Cf(t,o)||t.push(o)}),t}function Kx(n,e){return Lh(e).filter(t=>!Cf(n,t))}var bf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=l1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=u1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},tl=class extends bf{name;get formDirective(){return null}get path(){return null}},Vu=class extends bf{_parent=null;name=null;valueAccessor=null},wf=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var f1=(()=>{class n extends wf{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Fn(Vu,2))};static \u0275dir=Nn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Ze("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[yr]})}return n})(),p1=(()=>{class n extends wf{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Fn(tl,10))};static \u0275dir=Nn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Ze("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[yr]})}return n})();var Fu="VALID",_f="INVALID",js="PENDING",Nu="DISABLED",la=class{},Sf=class extends la{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ru=class extends la{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Pu=class extends la{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},el=class extends la{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Bh=class extends la{source;constructor(e){super(),this.source=e}},Lu=class extends la{source;constructor(e){super(),this.source=e}};function zh(n){return(kf(n)?n.validators:n)||null}function F5(n){return Array.isArray(n)?l1(n):n||null}function Gh(n,e){return(kf(e)?e.asyncValidators:n)||null}function N5(n){return Array.isArray(n)?u1(n):n||null}function kf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function m1(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Mc(1e3,"");if(!i[t])throw new Mc(1001,"")}function h1(n,e,t){n._forEachChild((i,o)=>{if(t[o]===void 0)throw new Mc(1002,"")})}var nl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Xo(this.statusReactive)}set status(e){Xo(()=>this.statusReactive.set(e))}_status=ct(()=>this.statusReactive());statusReactive=we(void 0);get valid(){return this.status===Fu}get invalid(){return this.status===_f}get pending(){return this.status==js}get disabled(){return this.status===Nu}get enabled(){return this.status!==Nu}errors;get pristine(){return Xo(this.pristineReactive)}set pristine(e){Xo(()=>this.pristineReactive.set(e))}_pristine=ct(()=>this.pristineReactive());pristineReactive=we(!0);get dirty(){return!this.pristine}get touched(){return Xo(this.touchedReactive)}set touched(e){Xo(()=>this.touchedReactive.set(e))}_touched=ct(()=>this.touchedReactive());touchedReactive=we(!1);get untouched(){return!this.touched}_events=new ks;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($x(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($x(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Kx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Kx(e,this._rawAsyncValidators))}hasValidator(e){return Cf(this._rawValidators,e)}hasAsyncValidator(e){return Cf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(rn(Rt({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Pu(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Pu(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(rn(Rt({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ru(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ru(!0,i))}markAsPending(e={}){this.status=js;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new el(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(rn(Rt({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nu,this.errors=null,this._forEachChild(o=>{o.disable(rn(Rt({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sf(this.value,i)),this._events.next(new el(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(rn(Rt({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fu,this._forEachChild(i=>{i.enable(rn(Rt({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(rn(Rt({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fu||this.status===js)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sf(this.value,t)),this._events.next(new el(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(rn(Rt({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nu:Fu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=js,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=r1(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,o)=>i&&i._find(o),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new el(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Ua,this.statusChanges=new Ua}_calculateStatus(){return this._allControlsDisabled()?Nu:this.errors?_f:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(js)?js:this._anyControlsHaveStatus(_f)?_f:Fu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),o=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new Ru(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Pu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=F5(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=N5(this._rawAsyncValidators)}},Ef=class extends nl{constructor(e,t,i){super(zh(t),Gh(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){h1(this,!0,e),Object.keys(e).forEach(i=>{m1(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let o=this.controls[i];o&&o.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,o)=>{i.reset(e?e[o]:null,rn(Rt({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Lu(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,o)=>((i.enabled||this.disabled)&&(t[o]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((o,s)=>{i=t(i,o,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Oh=class extends Ef{};var g1=new vo("",{factory:()=>qh}),qh="always";function R5(n,e){return[...e.path,n]}function Jx(n,e,t=qh){Wh(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),V5(n,e),B5(n,e),L5(n,e),P5(n,e)}function Yx(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Af(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Tf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function P5(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Wh(n,e){let t=c1(n);e.validator!==null?n.setValidators(Wx(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=d1(n);e.asyncValidator!==null?n.setAsyncValidators(Wx(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let o=()=>n.updateValueAndValidity();Tf(e._rawValidators,o),Tf(e._rawAsyncValidators,o)}function Af(n,e){let t=!1;if(n!==null){if(e.validator!==null){let o=c1(n);if(Array.isArray(o)&&o.length>0){let s=o.filter(c=>c!==e.validator);s.length!==o.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let o=d1(n);if(Array.isArray(o)&&o.length>0){let s=o.filter(c=>c!==e.asyncValidator);s.length!==o.length&&(t=!0,n.setAsyncValidators(s))}}}let i=()=>{};return Tf(e._rawValidators,i),Tf(e._rawAsyncValidators,i),t}function V5(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&v1(n,e)})}function L5(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&v1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function v1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function B5(n,e){let t=(i,o)=>{e.valueAccessor.writeValue(i),o&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function O5(n,e){n==null,Wh(n,e)}function H5(n,e){return Af(n,e)}function U5(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function z5(n){return Object.getPrototypeOf(n.constructor)===Bu}function G5(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function q5(n,e){if(!e)return null;Array.isArray(e);let t,i,o;return e.forEach(s=>{s.constructor===Df?t=s:z5(s)?i=s:o=s}),o||i||t||null}function W5(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Xx(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Qx(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var xf=class extends nl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(zh(t),Gh(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Qx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Lu(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Xx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Xx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Qx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $5=n=>n instanceof xf;var y1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Nn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var K5={provide:il,useExisting:Yo(()=>$h),multi:!0},$h=(()=>{class n extends Bu{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=za(n)))(o||n)}})();static \u0275dir=Nn({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(i,o){i&1&&_e("change",function(c){return o.onChange(c.target.value)})("input",function(c){return o.onChange(c.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[ea([K5]),yr]})}return n})(),Hh=class extends nl{constructor(e,t,i){super(zh(t),Gh(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){h1(this,!1,e),e.forEach((i,o)=>{m1(this,!1,o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,o)=>{i.reset(e[o],rn(Rt({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Lu(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var J5=(()=>{class n extends tl{callSetDisabledState;get submitted(){return Xo(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=ct(()=>this._submittedReactive());_submittedReactive=we(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,i,o){super(),this.callSetDisabledState=o,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Af(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Jx(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Yx(t.control||null,t,!1),W5(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,i){this.form.get(t.path).setValue(i)}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,G5(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Bh(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,o=this.form.get(t.path);i!==o&&(Yx(i||null,t),$5(o)&&(Jx(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);O5(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&H5(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Wh(this.form,this),this._oldForm&&Af(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||n)(Fn(t1,10),Fn(n1,10),Fn(g1,8))};static \u0275dir=Nn({type:n,features:[yr,Bp]})}return n})();var _1=new vo("");var Y5={provide:Vu,useExisting:Yo(()=>Kh)},Kh=(()=>{class n extends Vu{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ua;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,o,s,c){super(),this._ngModelWarningConfig=c,this._parent=t,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=q5(this,s)}ngOnChanges(t){this._added||this._setUpControl(),U5(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return R5(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(Fn(tl,13),Fn(t1,10),Fn(n1,10),Fn(il,10),Fn(_1,8))};static \u0275dir=Nn({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ea([Y5]),yr,Bp]})}return n})();var X5={provide:tl,useExisting:Yo(()=>Jh)},Jh=(()=>{class n extends J5{form=null;ngSubmit=new Ua;get control(){return this.form}static \u0275fac=(()=>{let t;return function(o){return(t||(t=za(n)))(o||n)}})();static \u0275dir=Nn({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&_e("submit",function(c){return o.onSubmit(c)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ea([X5]),yr]})}return n})(),Q5={provide:il,useExisting:Yo(()=>If),multi:!0};function x1(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Z5(n){return n.split(":")[0]}var If=(()=>{class n extends Bu{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=ze(fv).injector;destroyRef=ze(uv);cdr=ze(mv);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,cv({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),o=x1(i,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=Z5(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=za(n)))(o||n)}})();static \u0275dir=Nn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&_e("change",function(c){return o.onChange(c.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ea([Q5]),yr]})}return n})(),C1=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,o){this._element=t,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(x1(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(Fn(Mr),Fn(iu),Fn(If,9))};static \u0275dir=Nn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),j5={provide:il,useExisting:Yo(()=>b1),multi:!0};function Zx(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function e4(n){return n.split(":")[0]}var b1=(()=>{class n extends Bu{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let o=t.map(s=>this._getOptionId(s));i=(s,c)=>{s._setSelected(o.indexOf(c.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let c=s;for(let f=0;f<c.length;f++){let m=c[f],v=this._getOptionValue(m.value);o.push(v)}}else{let c=i.options;for(let f=0;f<c.length;f++){let m=c[f];if(m.selected){let v=this._getOptionValue(m.value);o.push(v)}}}this.value=o,t(o)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=e4(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=za(n)))(o||n)}})();static \u0275dir=Nn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&_e("change",function(c){return o.onChange(c.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ea([j5]),yr]})}return n})(),w1=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,o){this._element=t,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Zx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Zx(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Fn(Mr),Fn(iu),Fn(b1,9))};static \u0275dir=Nn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var t4=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Op({type:n});static \u0275inj=Lp({})}return n})();function jx(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var S1=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let o=this._reduceControls(t),s={};return jx(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Ef(o,s)}record(t,i=null){let o=this._reduceControls(t);return new Oh(o,i)}control(t,i,o){let s={};return this.useNonNullable?(jx(i)?s=i:(s.validators=i,s.asyncValidators=o),new xf(t,rn(Rt({},s),{nonNullable:!0}))):new xf(t,i,o)}array(t,i,o){let s=t.map(c=>this._createControl(c));return new Hh(s,i,o)}_reduceControls(t){let i={};return Object.keys(t).forEach(o=>{i[o]=this._createControl(t[o])}),i}_createControl(t){if(t instanceof xf)return t;if(t instanceof nl)return t;if(Array.isArray(t)){let i=t[0],o=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(i,o,s)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var E1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_1,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:g1,useValue:t.callSetDisabledState??qh}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Op({type:n});static \u0275inj=Lp({imports:[t4]})}return n})();function i4(n,e){if(n&1&&(z(0,"option",8),J(1),G()),n&2){let t=e.$implicit;Je("value",t),L(),Ue(t)}}function r4(n,e){if(n&1&&(z(0,"option",8),J(1),oi(2,"titlecase"),G()),n&2){let t=e.$implicit;Je("value",t),L(),Ue(ru(2,2,t))}}function o4(n,e){if(n&1&&(z(0,"option",8),J(1),oi(2,"titlecase"),G()),n&2){let t=e.$implicit;Je("value",t),L(),Ue(ru(2,2,t))}}function a4(n,e){if(n&1&&(z(0,"div",11)(1,"label",53),J(2,"Infinite Scroll Behavior"),G(),z(3,"select",54),nt(4,o4,3,4,"option",8,an),G()()),n&2){let t=I(2);L(4),it(t.infiniteScrollBehaviors)}}function s4(n,e){if(n&1&&(z(0,"option",15),J(1),G()),n&2){let t=e.$implicit;Je("value",t),L(),Ue(t)}}function l4(n,e){if(n&1&&(z(0,"option",8),J(1),G()),n&2){let t=e.$implicit;Je("value",t),L(),Ue(t==="iconAndText"?"Icon & Text":"Icon Only")}}function u4(n,e){if(n&1&&(z(0,"form",0)(1,"section",1)(2,"h3",2),J(3,"General"),G(),z(4,"div")(5,"label",3),J(6,"Table Title"),G(),Ie(7,"input",4),G()(),z(8,"section",1)(9,"h3",2),J(10,"Data & Paging "),G(),z(11,"div",5)(12,"div")(13,"label",6),J(14,"Data Strategy"),G(),z(15,"select",7),nt(16,i4,2,2,"option",8,an),G()(),z(18,"div")(19,"label",9),J(20,"Paging Mode"),G(),z(21,"select",10),nt(22,r4,3,4,"option",8,an),G()()(),fe(24,a4,6,0,"div",11),G(),z(25,"section",1)(26,"h3",2),J(27,"Appearance"),G(),z(28,"div",12)(29,"div")(30,"label",13),J(31,"Paginator"),G(),z(32,"select",14),nt(33,s4,2,2,"option",15,an),G()(),z(35,"div")(36,"label",16),J(37,"Toolbar Buttons"),G(),z(38,"select",17),nt(39,l4,2,2,"option",8,an),G()()(),z(41,"div",18)(42,"div",19)(43,"span",20),J(44,"Striped Rows"),G(),z(45,"label",21),Ie(46,"input",22)(47,"div",23),G()(),z(48,"div",19)(49,"span",20),J(50,"Grid Lines"),G(),z(51,"label",21),Ie(52,"input",24)(53,"div",23),G()(),z(54,"div",19)(55,"span",20),J(56,"Row Hover Effect"),G(),z(57,"label",21),Ie(58,"input",25)(59,"div",23),G()()()(),z(60,"section",1)(61,"h3",2),J(62,"Table Styling "),G(),z(63,"div",1)(64,"div",19)(65,"span",20),J(66,"Enable Transparency"),G(),z(67,"label",21),Ie(68,"input",26)(69,"div",23),G()(),z(70,"div")(71,"label",27),J(72,"Header Background"),G(),z(73,"div",28),Ie(74,"input",29)(75,"input",30),G()(),z(76,"div")(77,"label",31),J(78,"Footer Background"),G(),z(79,"div",28),Ie(80,"input",32)(81,"input",33),G()(),z(82,"div")(83,"label",34),J(84,"Background Image URL"),G(),Ie(85,"input",35),G()()(),z(86,"section",1)(87,"h3",2),J(88,"Card View"),G(),z(89,"div",36)(90,"div",37)(91,"label",38),J(92,"Cards Per Row (Desktop)"),G(),z(93,"span",39),J(94),G()(),Ie(95,"input",40),z(96,"div",41)(97,"span"),J(98,"1"),G(),z(99,"span"),J(100,"2"),G(),z(101,"span"),J(102,"3"),G(),z(103,"span"),J(104,"4"),G(),z(105,"span"),J(106,"5"),G(),z(107,"span"),J(108,"6"),G()()()(),z(109,"section",1)(110,"h3",2),J(111,"Features"),G(),z(112,"div",42)(113,"div",1)(114,"div",19)(115,"span",20),J(116,"Column Chooser"),G(),z(117,"label",21),Ie(118,"input",43)(119,"div",23),G()(),z(120,"div",19)(121,"span",20),J(122,"Export Button"),G(),z(123,"label",21),Ie(124,"input",44)(125,"div",23),G()(),z(126,"div",19)(127,"span",20),J(128,"Multi-Select"),G(),z(129,"label",21),Ie(130,"input",45)(131,"div",23),G()(),z(132,"div",19)(133,"span",20),J(134,"Toolbar Config"),G(),z(135,"label",21),Ie(136,"input",46)(137,"div",23),G()(),z(138,"div",19)(139,"span",20),J(140,"Table Footer"),G(),z(141,"label",21),Ie(142,"input",47)(143,"div",23),G()()(),z(144,"div",1)(145,"div",19)(146,"span",20),J(147,"Row Menu (3-dot)"),G(),z(148,"label",21),Ie(149,"input",48)(150,"div",23),G()(),z(151,"div",19)(152,"span",20),J(153,"Header Actions"),G(),z(154,"label",21),Ie(155,"input",49)(156,"div",23),G()(),z(157,"div",19)(158,"span",20),J(159,"Saved Queries"),G(),z(160,"label",21),Ie(161,"input",50)(162,"div",23),G()(),z(163,"div",19)(164,"span",20),J(165,"Summary Chips"),G(),z(166,"label",21),Ie(167,"input",51)(168,"div",23),G()(),z(169,"div",19)(170,"span",20),J(171,"Column Freezing"),G(),z(172,"label",21),Ie(173,"input",52)(174,"div",23),G()()()()()()),n&2){let t,i,o=I();Je("formGroup",o.form),L(16),it(o.dataStrategies),L(6),it(o.pagingModes),L(2),pe(((t=o.form.get("pagingMode"))==null?null:t.value)==="infinite"?24:-1),L(9),it(o.paginatorPositions),L(6),it(o.toolbarButtonModes),L(55),Jt(" ",(i=o.form.get("cardsPerRow"))==null?null:i.value," ")}}var Mf=class n{config=be.required();configChange=ht();fb=ze(S1);form;destroy$=new ks;dataStrategies=["SYNC","ONLINE_FIRST","OFFLINE_FIRST","HYBRID"];pagingModes=["paginator","infinite"];infiniteScrollBehaviors=["append","replace"];paginatorPositions=["top","bottom","both"];toolbarButtonModes=["iconAndText","iconOnly"];constructor(){this.form=this.fb.group({title:[""],dataStrategy:[""],pagingMode:[""],infiniteScrollBehavior:[""],paginatorPosition:[""],stripedRows:[!1],showGridlines:[!1],rowHover:[!1],enableColumnChooser:[!1],enableExport:[!1],enableMultiSelect:[!1],enableConfigButton:[!1],cardsPerRow:[4],enableFooter:[!1],enableRowMenu:[!1],enableHeaderActions:[!1],enableSavedQueries:[!1],enableChipFilters:[!1],enableFreeze:[!1],toolbarButtonMode:["iconAndText"],headerBackgroundColor:["#ffffff"],footerBackgroundColor:["#ffffff"],enableTransparency:[!1],backgroundImageUrl:[""]}),Zt(()=>{let e=this.config();e&&this.form.patchValue({title:e.config.title,dataStrategy:e.config.dataStrategy,pagingMode:e.config.pagingMode,infiniteScrollBehavior:e.config.infiniteScrollBehavior,paginatorPosition:e.config.paginatorPosition??"bottom",stripedRows:e.config.stripedRows??!0,showGridlines:e.config.showGridlines??!1,rowHover:e.config.rowHover??!0,enableColumnChooser:e.config.enableColumnChooser,enableExport:e.config.exportConfig?.enabled??!1,enableMultiSelect:e.config.enableMultiSelect??!1,enableConfigButton:e.config.enableConfigButton,cardsPerRow:e.config.cardViewConfig?.cardsPerRow??4,enableFooter:e.config.footerConfig?.enabled??!1,enableRowMenu:e.config.enableRowMenu,enableHeaderActions:e.config.enableHeaderActions,enableSavedQueries:e.config.enableSavedQueries,enableChipFilters:e.config.enableChipFilters??!1,enableFreeze:e.config.enableFreeze??!1,toolbarButtonMode:e.config.toolbarButtonMode??"iconAndText",headerBackgroundColor:e.config.styleConfig?.headerBackgroundColor??"var(--marg-header-bg)",footerBackgroundColor:e.config.styleConfig?.footerBackgroundColor??"var(--marg-header-bg)",enableTransparency:e.config.styleConfig?.enableTransparency??!1,backgroundImageUrl:e.config.styleConfig?.backgroundImageUrl??""},{emitEvent:!1})}),this.form.valueChanges.pipe(Dc(200),kc(this.isEqual),lv(this.destroy$)).subscribe(e=>{let t=this.config();if(t){let i=JSON.parse(JSON.stringify(t));i.config.title=e.title,i.config.dataStrategy=e.dataStrategy,i.config.pagingMode=e.pagingMode,i.config.infiniteScrollBehavior=e.infiniteScrollBehavior,i.config.paginatorPosition=e.paginatorPosition,i.config.stripedRows=e.stripedRows,i.config.showGridlines=e.showGridlines,i.config.rowHover=e.rowHover,i.config.enableColumnChooser=e.enableColumnChooser,i.config.exportConfig?i.config.exportConfig.enabled=e.enableExport:i.config.exportConfig={enabled:e.enableExport,options:[{label:"CSV",key:"csv",icon:"pi pi-file"},{label:"Excel",key:"excel",icon:"pi pi-file-excel"},{label:"PDF",key:"pdf",icon:"pi pi-file-pdf"}]},i.config.enableMultiSelect=e.enableMultiSelect,i.config.enableConfigButton=e.enableConfigButton,i.config.cardViewConfig||(i.config.cardViewConfig={cardsPerRow:4}),i.config.cardViewConfig.cardsPerRow=Number(e.cardsPerRow),i.config.footerConfig?i.config.footerConfig.enabled=e.enableFooter:i.config.footerConfig={enabled:e.enableFooter,columns:[{code:"contact_person_composite",aggregation:"count",display:"Total: {value}"},{code:"annual_revenue",aggregation:"sum",display:"Sum: {value}"}]},i.config.styleConfig?(i.config.styleConfig.enableTransparency=e.enableTransparency,i.config.styleConfig.headerBackgroundColor=e.headerBackgroundColor,i.config.styleConfig.footerBackgroundColor=e.footerBackgroundColor,i.config.styleConfig.backgroundImageUrl=e.backgroundImageUrl):i.config.styleConfig={enableTransparency:e.enableTransparency,headerBackgroundColor:e.headerBackgroundColor,footerBackgroundColor:e.footerBackgroundColor,backgroundImageUrl:e.backgroundImageUrl},i.config.enableRowMenu=e.enableRowMenu,i.config.enableHeaderActions=e.enableHeaderActions,i.config.enableSavedQueries=e.enableSavedQueries,i.config.enableChipFilters=e.enableChipFilters,i.config.enableFreeze=e.enableFreeze,i.config.toolbarButtonMode=e.toolbarButtonMode,this.configChange.emit(i)}})}isEqual(e,t){return JSON.stringify(e)===JSON.stringify(t)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-config-form"]],inputs:{config:[1,"config"]},outputs:{configChange:"configChange"},decls:1,vars:1,consts:[[1,"space-y-8","px-1",3,"formGroup"],[1,"space-y-4"],[1,"text-xs","font-bold","text-gray-500","uppercase","tracking-wider","border-b","border-gray-100","pb-2"],["for","title",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","title","formControlName","title",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","placeholder-gray-400"],[1,"grid","grid-cols-2","gap-4"],["for","dataStrategy",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","dataStrategy","formControlName","dataStrategy",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","bg-white"],[3,"value"],["for","pagingMode",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","pagingMode","formControlName","pagingMode",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","bg-white"],[1,"bg-gray-50","p-3","rounded-md","border","border-gray-100"],[1,"grid","grid-cols-2","gap-4","mb-2"],["for","paginatorPosition",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","paginatorPosition","formControlName","paginatorPosition",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"],[1,"capitalize",3,"value"],["for","toolbarButtonMode",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","toolbarButtonMode","formControlName","toolbarButtonMode",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"],[1,"space-y-3"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-700"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","stripedRows",1,"sr-only","peer"],[1,"w-9","h-5","bg-gray-200","peer-focus:outline-none","peer-focus:ring-2","peer-focus:ring-indigo-300","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-4","after:w-4","after:transition-all","peer-checked:bg-indigo-600"],["type","checkbox","formControlName","showGridlines",1,"sr-only","peer"],["type","checkbox","formControlName","rowHover",1,"sr-only","peer"],["type","checkbox","formControlName","enableTransparency",1,"sr-only","peer"],["for","headerBackgroundColor",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"flex","gap-2"],["type","color","id","headerBackgroundColor","formControlName","headerBackgroundColor",1,"h-8","w-8","rounded-md","border-gray-300","cursor-pointer"],["type","text","formControlName","headerBackgroundColor",1,"flex-1","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"],["for","footerBackgroundColor",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","color","id","footerBackgroundColor","formControlName","footerBackgroundColor",1,"h-8","w-8","rounded-md","border-gray-300","cursor-pointer"],["type","text","formControlName","footerBackgroundColor",1,"flex-1","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"],["for","backgroundImageUrl",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","backgroundImageUrl","formControlName","backgroundImageUrl","placeholder","https://example.com/image.jpg",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"],[1,"bg-gray-50","p-4","rounded-lg","border","border-gray-200"],[1,"flex","justify-between","items-center","mb-2"],["for","cardsPerRow",1,"block","text-sm","font-medium","text-gray-700"],[1,"inline-flex","items-center","justify-center","px-2","py-1","rounded-md","bg-white","border","border-gray-200","text-xs","font-bold","text-indigo-600","shadow-sm","min-w-[2rem]"],["type","range","id","cardsPerRow","formControlName","cardsPerRow","min","1","max","6",1,"w-full","h-2","bg-gray-200","rounded-lg","appearance-none","cursor-pointer","accent-indigo-600"],[1,"flex","justify-between","text-xs","text-gray-400","mt-1","font-medium","px-1"],[1,"grid","grid-cols-2","gap-x-8","gap-y-4"],["type","checkbox","formControlName","enableColumnChooser",1,"sr-only","peer"],["type","checkbox","formControlName","enableExport",1,"sr-only","peer"],["type","checkbox","formControlName","enableMultiSelect",1,"sr-only","peer"],["type","checkbox","formControlName","enableConfigButton",1,"sr-only","peer"],["type","checkbox","formControlName","enableFooter",1,"sr-only","peer"],["type","checkbox","formControlName","enableRowMenu",1,"sr-only","peer"],["type","checkbox","formControlName","enableHeaderActions",1,"sr-only","peer"],["type","checkbox","formControlName","enableSavedQueries",1,"sr-only","peer"],["type","checkbox","formControlName","enableChipFilters",1,"sr-only","peer"],["type","checkbox","formControlName","enableFreeze",1,"sr-only","peer"],["for","infiniteScrollBehavior",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","infiniteScrollBehavior","formControlName","infiniteScrollBehavior",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"]],template:function(t,i){t&1&&fe(0,u4,175,3,"form",0),t&2&&pe(i.form?0:-1)},dependencies:[kt,E1,y1,C1,w1,Df,$h,Uh,If,f1,p1,Jh,Kh,Vc],encapsulation:2,changeDetection:0})};function c4(n,e){if(n&1){let t=Ne();z(0,"button",16),_e("click",function(){ee(t);let o=I();return te(o.copyToClipboard())}),Ie(1,"i",17),J(2),G()}if(n&2){let t=I();L(),Ze("pi-copy",!t.copySuccess())("pi-check",t.copySuccess()),L(),Jt(" ",t.copySuccess()?"Copied!":"Copy JSON"," ")}}function d4(n,e){if(n&1&&(z(0,"div",19)(1,"p",20),J(2,"Error parsing JSON"),G(),z(3,"pre",21),J(4),G()()),n&2){let t=I(2);L(4),Ue(t.parseError())}}function f4(n,e){if(n&1){let t=Ne();z(0,"div",11)(1,"div",18),_e("valueChange",function(o){ee(t);let s=I();return te(s.onJsonConfigChange(o))}),G(),fe(2,d4,5,1,"div",19),G()}if(n&2){let t=I();L(),Je("value",t.configString()),L(),pe(t.parseError()?2:-1)}}function p4(n,e){if(n&1){let t=Ne();z(0,"div",12)(1,"app-config-form",22),_e("configChange",function(o){ee(t);let s=I();return te(s.onFormConfigChange(o))}),G()()}if(n&2){let t=I();L(),Je("config",t.currentConfig())}}var Ff=class n{isOpen=be.required();config=be.required();close=ht();save=ht();resetToDefaults=ht();viewMode=we("ui");currentConfig=we(null);configString=ct(()=>{let e=this.currentConfig();return e?JSON.stringify(e,null,2):""});parseError=we(null);copySuccess=we(!1);initialConfig=null;constructor(){Zt(()=>{if(this.isOpen()){let e=this.config();this.initialConfig=e,this.currentConfig.set(JSON.parse(JSON.stringify(e))),this.parseError.set(null),this.viewMode.set("ui")}})}onJsonConfigChange(e){try{let t=JSON.parse(e);this.currentConfig.set(t),this.parseError.set(null),this.save.emit(t)}catch(t){this.parseError.set(`Invalid JSON: ${t.message}`)}}onFormConfigChange(e){this.currentConfig.set(e),this.parseError.set(null),this.save.emit(e)}handleSave(){if(this.parseError())return;let e=this.currentConfig();e&&this.save.emit(e)}handleRevertChanges(){if(this.initialConfig){let e=JSON.parse(JSON.stringify(this.initialConfig));this.currentConfig.set(e),this.parseError.set(null),this.save.emit(e)}}handleRestoreDefaults(){confirm("Are you sure you want to restore factory defaults? This will overwrite your current configuration.")&&(this.resetToDefaults.emit(),this.close.emit())}copyToClipboard(){let e=this.configString();navigator.clipboard.writeText(e).then(()=>{this.copySuccess.set(!0),setTimeout(()=>this.copySuccess.set(!1),2e3)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-config-sidebar"]],inputs:{isOpen:[1,"isOpen"],config:[1,"config"]},outputs:{close:"close",save:"save",resetToDefaults:"resetToDefaults"},decls:25,vars:31,consts:[[1,"fixed","top-0","right-0","h-full","w-[50vw]","bg-white","shadow-2xl","z-40","transform","transition-transform","duration-300","ease-in-out","flex","flex-col"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200","flex-shrink-0"],[1,"text-lg","font-semibold","text-gray-800"],[1,"flex","items-center","gap-2"],[1,"text-xs","text-red-600","hover:text-red-800","underline","mr-2",3,"click"],["title","Close Configuration",1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"pi","pi-times","text-xl"],[1,"px-4","border-b","border-gray-200","flex-shrink-0","flex","justify-between","items-center"],[1,"-mb-px","flex","space-x-6"],[1,"whitespace-nowrap","py-3","px-1","border-b-2","font-medium","text-sm","transition-colors",3,"click"],[1,"text-xs","flex","items-center","gap-1","text-indigo-600","hover:text-indigo-800","transition-colors"],[1,"flex-grow","p-4","flex","flex-col","min-h-0","h-full"],[1,"flex-grow","p-4","overflow-y-auto","custom-scrollbar","min-h-0"],[1,"flex","items-center","justify-end","p-4","border-t","border-gray-200","flex-shrink-0","space-x-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-slate-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-xs","flex","items-center","gap-1","text-indigo-600","hover:text-indigo-800","transition-colors",3,"click"],[1,"pi"],["appJsonEditor","",1,"w-full","flex-grow","h-full","font-mono","text-sm","border","border-indigo-100","rounded-md","overflow-hidden","config-editor-wrapper","flex","flex-col","shadow-inner","bg-slate-50","relative",3,"valueChange","value"],[1,"mt-2","p-3","bg-red-100","border","border-red-400","text-red-700","rounded-md","text-sm","flex-shrink-0"],[1,"font-bold"],[1,"whitespace-pre-wrap","mt-1"],[3,"configChange","config"]],template:function(t,i){t&1&&(z(0,"aside",0)(1,"header",1)(2,"h2",2),J(3,"Table Configuration"),G(),z(4,"div",3)(5,"button",4),_e("click",function(){return i.handleRestoreDefaults()}),J(6," Restore Factory Defaults "),G(),z(7,"button",5),_e("click",function(){return i.close.emit()}),Ie(8,"i",6),G()()(),z(9,"div",7)(10,"nav",8)(11,"button",9),_e("click",function(){return i.viewMode.set("ui")}),J(12," UI Editor "),G(),z(13,"button",9),_e("click",function(){return i.viewMode.set("json")}),J(14," JSON Editor "),G()(),fe(15,c4,3,5,"button",10),G(),fe(16,f4,3,2,"div",11)(17,p4,2,1,"div",12),z(18,"footer",13)(19,"button",14),_e("click",function(){return i.handleRevertChanges()}),J(20," Reset Changes "),G(),z(21,"button",14),_e("click",function(){return i.close.emit()}),J(22," Cancel "),G(),z(23,"button",15),_e("click",function(){return i.handleSave()}),J(24," Save and Apply "),G()()()),t&2&&(Ze("translate-x-0",i.isOpen())("translate-x-full",!i.isOpen()),L(11),Ze("border-indigo-500",i.viewMode()==="ui")("text-indigo-600",i.viewMode()==="ui")("border-transparent",i.viewMode()!=="ui")("text-gray-500",i.viewMode()!=="ui")("hover:text-gray-700",i.viewMode()!=="ui")("hover:border-gray-300",i.viewMode()!=="ui"),L(2),Ze("border-indigo-500",i.viewMode()==="json")("text-indigo-600",i.viewMode()==="json")("border-transparent",i.viewMode()!=="json")("text-gray-500",i.viewMode()!=="json")("hover:text-gray-700",i.viewMode()!=="json")("hover:border-gray-300",i.viewMode()!=="json"),L(2),pe(i.viewMode()==="json"?15:-1),L(),pe(i.viewMode()==="json"?16:17),L(7),Je("disabled",!!i.parseError()))},dependencies:[kt,yf,Mf],styles:[".CodeMirror[_ngcontent-%COMP%]{height:100%!important;background-color:#f8fafc}.cm-s-neo.CodeMirror[_ngcontent-%COMP%]{background-color:#f8fafc}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;height:16px;width:16px;border-radius:50%;background:#4f46e5;cursor:pointer;margin-top:-6px;box-shadow:0 1px 2px #0003}input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:4px;cursor:pointer;background:#e2e8f0;border-radius:2px}"],changeDetection:0})};function m4(n){switch(n){case"=":return"EXACT";case"!=":return"NOT_EQUAL";case">":return"GREATER_THAN";case">=":return"GREATER_THAN_OR_EQUAL";case"<":return"LESS_THAN";case"<=":return"LESS_THAN_OR_EQUAL";case"between":return"BETWEEN";case"not between":return"NOT_BETWEEN";case"contains":return"CONTAINS";default:return"CONTAINS"}}function Ou(n,e,t,i,o,s,c){let f=[];o&&f.push({parameter_name:"GLOBAL_SEARCH",parameter_code:"GS",parameter_value:o,conditional_operator:"AND",wildcard_operator:"CONTAINS"});for(let v in s){let g=s[v];g&&g.value1!==void 0&&g.value1!==""&&f.push({parameter_name:g.name,parameter_code:g.code,parameter_value:`${g.value1}${g.value2?","+g.value2:""}`,conditional_operator:"AND",wildcard_operator:m4(g.operator)})}let m=[];return t&&m.push({coloum_id:t,short_type:i}),{page_number:n,page_size:e,search_filters:f,sort_column:m}}var T1=(n,e)=>e.code;function h4(n,e){n&1&&(ne(0,"th",3),at(1,"div",4),oe())}function g4(n,e){n&1&&at(0,"div",6)}function v4(n,e){n&1&&at(0,"div",7)}function y4(n,e){n&1&&(ne(0,"div",8),at(1,"div",10)(2,"div",11),oe())}function _4(n,e){n&1&&at(0,"div",9)}function x4(n,e){if(n&1&&(ne(0,"td",5),fe(1,g4,1,0,"div",6)(2,v4,1,0,"div",7)(3,y4,3,0,"div",8)(4,_4,1,0,"div",9),oe()),n&2){let t=e.$implicit;L(),pe(t.columnType==="IMAGE"?1:t.columnType==="CHECKBOX"?2:t.cellTemplate&&t.cellTemplate.length>0?3:4)}}function C4(n,e){if(n&1&&(ne(0,"tr"),nt(1,x4,5,1,"td",5,T1),oe()),n&2){let t=I();L(),it(t.columns())}}var Nf=class n{columns=be.required();rows=be(10);skeletonRows=ct(()=>Array(this.rows()).fill(0));static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-table-skeleton-loader"]],inputs:{columns:[1,"columns"],rows:[1,"rows"]},decls:9,vars:0,consts:[[1,"overflow-x-auto","border","border-gray-200","rounded-lg"],[1,"min-w-full","border-collapse"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","border-b","border-gray-200","text-left"],[1,"h-4","bg-gray-300","rounded","w-3/4","animate-pulse"],[1,"px-6","py-4","whitespace-nowrap","border-t","border-gray-200"],[1,"h-10","w-10","bg-gray-300","rounded-full","animate-pulse"],[1,"h-4","w-4","bg-gray-300","rounded","animate-pulse"],[1,"space-y-2"],[1,"h-4","bg-gray-300","rounded","w-full","animate-pulse"],[1,"h-4","bg-gray-300","rounded","w-5/6","animate-pulse"],[1,"h-3","bg-gray-300","rounded","w-3/4","animate-pulse"]],template:function(t,i){t&1&&(ne(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),nt(4,h4,2,0,"th",3,T1),oe()(),ne(6,"tbody"),nt(7,C4,3,0,"tr",null,Qo),oe()()()),t&2&&(L(4),it(i.columns()),L(3),it(i.skeletonRows()))},dependencies:[kt],encapsulation:2,changeDetection:0})};function b4(n,e){n&1&&(ne(0,"div",1)(1,"div",2)(2,"div",3),at(3,"div",4),ne(4,"div",5),at(5,"div",6)(6,"div",7),oe()(),ne(7,"div",8),at(8,"div",9)(9,"div",10),oe()()())}var Rf=class n{count=be(8);skeletonItems=ct(()=>Array(this.count()).fill(0).map((e,t)=>t));static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-card-skeleton-loader"]],inputs:{count:[1,"count"]},decls:3,vars:0,consts:[[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6","animate-pulse"],[1,"border","border-gray-200","rounded-lg","overflow-hidden"],[1,"p-5"],[1,"flex","items-center","gap-4"],[1,"h-12","w-12","bg-gray-300","rounded-full"],[1,"flex-1","space-y-2"],[1,"h-4","bg-gray-300","rounded","w-3/4"],[1,"h-3","bg-gray-300","rounded","w-1/2"],[1,"space-y-4","mt-6"],[1,"h-3","bg-gray-300","rounded","w-full"],[1,"h-3","bg-gray-300","rounded","w-5/6"]],template:function(t,i){t&1&&(ne(0,"div",0),nt(1,b4,10,0,"div",1,an),oe()),t&2&&(L(),it(i.skeletonItems()))},dependencies:[kt],encapsulation:2,changeDetection:0})};function w4(n,e){n&1&&(ne(0,"li",2)(1,"div",3),at(2,"div",4),ne(3,"div",5),at(4,"div",6)(5,"div",7),oe(),at(6,"div",8),oe()())}var Pf=class n{count=be(10);skeletonItems=ct(()=>Array(this.count()).fill(0).map((e,t)=>t));static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-list-skeleton-loader"]],inputs:{count:[1,"count"]},decls:4,vars:0,consts:[[1,"border","border-gray-200","rounded-lg"],[1,"divide-y","divide-gray-200"],[1,"p-4","animate-pulse"],[1,"flex","items-center"],[1,"h-10","w-10","bg-gray-300","rounded-full","mr-4","flex-shrink-0"],[1,"flex-1","min-w-0","space-y-2"],[1,"h-4","bg-gray-300","rounded","w-2/5"],[1,"h-3","bg-gray-300","rounded","w-3/5"],[1,"ml-4","h-4","bg-gray-300","rounded","w-1/6"]],template:function(t,i){t&1&&(ne(0,"div",0)(1,"ul",1),nt(2,w4,7,0,"li",2,an),oe()()),t&2&&(L(2),it(i.skeletonItems()))},dependencies:[kt],encapsulation:2,changeDetection:0})};function Yh(n,e,t=0){if(!n||e<=0)return 10;let i=n.clientHeight-t,o=Math.floor(i/e);return Math.max(1,o)}function xn(n,e){return new Date(n.getTime()+Math.random()*(e.getTime()-n.getTime())).toISOString()}function Cn(n,e){return new Date(n.getTime()+Math.random()*(e.getTime()-n.getTime())).toISOString()}var rl=class n{configService=ze(ai);mockData=[{organization_id:1,organization_name:"Innovate Inc.",contact_person:"Alice Johnson",communication_detail:"5550101123",email_id:"alice.j@innovate.com",avatar_url:"https://picsum.photos/seed/1/40/40",annual_revenue:5e6,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:2,organization_name:"Solutions Corp.",contact_person:"Bob Smith",communication_detail:"5550102456",email_id:"bob.s@solutions.com",avatar_url:"https://picsum.photos/seed/2/40/40",annual_revenue:72e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:3,organization_name:"Quantum Systems",contact_person:"Charlie Brown",communication_detail:"5550103789",email_id:"charlie.b@quantum.com",avatar_url:"https://picsum.photos/seed/3/40/40",annual_revenue:12e6,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:4,organization_name:"Apex Enterprises",contact_person:"Diana Prince",communication_detail:"5550104101",email_id:"diana.p@apex.com",avatar_url:"https://picsum.photos/seed/4/40/40",annual_revenue:35e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:5,organization_name:"Stellar Tech",contact_person:"Ethan Hunt",communication_detail:"5550105112",email_id:"ethan.h@stellar.com",avatar_url:"https://picsum.photos/seed/5/40/40",annual_revenue:98e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:6,organization_name:"Fusion Dynamics",contact_person:"Fiona Glenanne",communication_detail:"5550106131",email_id:"fiona.g@fusion.com",avatar_url:"https://picsum.photos/seed/6/40/40",annual_revenue:21e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:7,organization_name:"Synergy Group",contact_person:"George Costanza",communication_detail:"5550107141",email_id:"george.c@synergy.com",avatar_url:"https://picsum.photos/seed/7/40/40",annual_revenue:83e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:8,organization_name:"Pioneer Labs",contact_person:"Hannah Abbott",communication_detail:"5550108151",email_id:"hannah.a@pioneer.com",avatar_url:"https://picsum.photos/seed/8/40/40",annual_revenue:45e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:9,organization_name:"Vertex Innovations",contact_person:"Ian Malcolm",communication_detail:"5550109161",email_id:"ian.m@vertex.com",avatar_url:"https://picsum.photos/seed/9/40/40",annual_revenue:61e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:10,organization_name:"Horizon Solutions",contact_person:"Jane Doe",communication_detail:"5550110171",email_id:"jane.d@horizon.com",avatar_url:"https://picsum.photos/seed/10/40/40",annual_revenue:15e6,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:11,organization_name:"Global Connect",contact_person:"Kara Danvers",communication_detail:"5550111181",email_id:"kara.d@global.com",avatar_url:"https://picsum.photos/seed/11/40/40",annual_revenue:112e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:12,organization_name:"Nexus Platforms",contact_person:"Leo Fitz",communication_detail:"5550112191",email_id:"leo.f@nexus.com",avatar_url:"https://picsum.photos/seed/12/40/40",annual_revenue:78e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:13,organization_name:"Momentum Works",contact_person:"Monica Geller",communication_detail:"5550113202",email_id:"monica.g@momentum.com",avatar_url:"https://picsum.photos/seed/13/40/40",annual_revenue:49e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:14,organization_name:"Omega Industries",contact_person:"Ned Stark",communication_detail:"5550114212",email_id:"ned.s@omega.com",avatar_url:"https://picsum.photos/seed/14/40/40",annual_revenue:25e6,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:15,organization_name:"Zenith Tech",contact_person:"Oscar Martinez",communication_detail:"5550115222",email_id:"oscar.m@zenith.com",avatar_url:"https://picsum.photos/seed/15/40/40",annual_revenue:33e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:16,organization_name:"Apex Solutions",contact_person:"Pam Beesly",communication_detail:"5550116232",email_id:"pam.b@apex.com",avatar_url:"https://picsum.photos/seed/16/40/40",annual_revenue:56e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:17,organization_name:"Quantum Dynamics",contact_person:"Quinn Fabray",communication_detail:"5550117242",email_id:"quinn.f@quantum.com",avatar_url:"https://picsum.photos/seed/17/40/40",annual_revenue:135e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:18,organization_name:"Stellar Innovations",contact_person:"Rachel Green",communication_detail:"5550118252",email_id:"rachel.g@stellar.com",avatar_url:"https://picsum.photos/seed/18/40/40",annual_revenue:88e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:19,organization_name:"Fusion Solutions",contact_person:"Sam Winchester",communication_detail:"5550119262",email_id:"sam.w@fusion.com",avatar_url:"https://picsum.photos/seed/19/40/40",annual_revenue:18e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:20,organization_name:"Synergy Systems",contact_person:"Ted Mosby",communication_detail:"5550120272",email_id:"ted.m@synergy.com",avatar_url:"https://picsum.photos/seed/20/40/40",annual_revenue:67e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:21,organization_name:"Pioneer Enterprises",contact_person:"Uma Thurman",communication_detail:"5550121282",email_id:"uma.t@pioneer.com",avatar_url:"https://picsum.photos/seed/21/40/40",annual_revenue:41e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:22,organization_name:"Vertex Corp.",contact_person:"Victor Vance",communication_detail:"5550122292",email_id:"victor.v@vertex.com",avatar_url:"https://picsum.photos/seed/22/40/40",annual_revenue:73e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:23,organization_name:"Horizon Labs",contact_person:"Walter White",communication_detail:"5550123303",email_id:"walter.w@horizon.com",avatar_url:"https://picsum.photos/seed/23/40/40",annual_revenue:17e6,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:"Web"},...Array.from({length:5e3},(e,t)=>{let i=["Web","Organic","Referral"];return{organization_id:24+t,organization_name:`Test Corp ${t+1}`,contact_person:`Person ${t+1}`,communication_detail:`55502${(t+1).toString().padStart(5,"0")}`,email_id:`person.${t+1}@test.com`,avatar_url:`https://picsum.photos/seed/${24+t}/40/40`,annual_revenue:Math.floor(Math.random()*1e7)+1e5,created_time:xn(new Date(2023,10,1),new Date),last_activity_date:Cn(new Date(2024,0,1),new Date),lead_source:i[t%3]}})];getData(e){let t=[...this.mockData],i=this.configService.config().config.globalFilterFields;if(e.search_filters.length>0&&(t=t.filter(v=>e.search_filters.every(g=>{if(!g.parameter_code||!g.parameter_value)return!0;let b=g.parameter_value.toLowerCase();if(g.parameter_code==="GS"){let F=this.configService.config().columns.filter(q=>q.columnType==="DATE").map(q=>q.code),R=b.split(" to "),B=!1,N=null,O=null;if(R.length===2){let q=new Date(R[0].trim()),X=new Date(R[1].trim());!isNaN(q.getTime())&&!isNaN(X.getTime())&&(B=!0,N=q,O=X,O.setHours(23,59,59,999))}return i&&i.length>0?i.some(q=>{let X=v[q];if(!X)return!1;if(F.includes(q)){let j=new Date(X);return isNaN(j.getTime())?!1:B?j>=N&&j<=O:String(X).toLowerCase().includes(b)}return String(X).toLowerCase().includes(b)}):String(v.organization_name||"").toLowerCase().includes(b)||String(v.contact_person||"").toLowerCase().includes(b)||String(v.communication_detail||"").toLowerCase().includes(b)||String(v.email_id||"").toLowerCase().includes(b)||String(v.created_time||"").toLowerCase().includes(b)}if(this.configService.config().columns.find(F=>F.code===g.parameter_code)?.columnType==="DATE"){let F=v[g.parameter_code];if(!F)return!1;let R=new Date(F);if(isNaN(R.getTime()))return!1;if(R.setUTCHours(0,0,0,0),g.wildcard_operator==="BETWEEN"){if(!g.parameter_value.includes(","))return!1;let[B,N]=g.parameter_value.split(","),O=new Date(B+"T00:00:00Z"),q=new Date(N+"T00:00:00Z");return isNaN(O.getTime())||isNaN(q.getTime())?!1:(q.setUTCHours(23,59,59,999),R>=O&&R<=q)}else if(g.wildcard_operator==="EXACT"){let B=new Date(g.parameter_value+"T00:00:00Z");return isNaN(B.getTime())?!1:R.getTime()===B.getTime()}return!1}let A=String(v[g.parameter_code]||"").toLowerCase();return b.includes(",")?b.split(",").includes(A):A.includes(b)}))),e.sort_column.length>0){let v=e.sort_column[0];t.sort((g,b)=>{let C=g[v.coloum_id],A=b[v.coloum_id];return C<A?v.short_type==="asc"?-1:1:C>A?v.short_type==="asc"?1:-1:0})}let o=t.length,s=Number(e.page_number),c=Number(e.page_size),f=(s-1)*c,m=t.slice(f,f+c);return Ki({data:m,total_records:o}).pipe(av(500))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vf=Ko(A1(),1),D1=Symbol.for("Dexie"),Lf=globalThis[D1]||(globalThis[D1]=Vf.default);if(Vf.default.semVer!==Lf.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Vf.default.semVer} and ${Lf.semVer}`);var{liveQuery:Bf,mergeRanges:IU,rangesOverlap:MU,RangeSet:FU,cmp:NU,Entity:RU,PropModification:PU,replacePrefix:VU,add:LU,remove:BU,DexieYProvider:OU}=Lf;var Of=Lf;var Hf=class n extends Of{contacts;constructor(){let t=`${ze(ai).config().feature}_DB`;super(t),this.version(2).stores({contacts:"++organization_id, organization_name, contact_person, communication_detail, email_id, annual_revenue, created_time, lead_source"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Uu=Ko(E0());var T0=class n{configService=ze(ai);config=this.configService.config().config;isEnabled(){return this.config.encryptionConfig?.enabled??!1}getSecretKey(){return this.config.encryptionConfig?.secretKey||"default-secret"}getEncryptedFields(){return this.config.encryptionConfig?.encryptedFields||[]}encryptRecord(e){if(!this.isEnabled())return e;let t=Rt({},e),i=this.getEncryptedFields(),o=this.getSecretKey();for(let s of i)t[s]&&(t[s]=Uu.AES.encrypt(t[s],o).toString());return t}decryptRecord(e){if(!this.isEnabled())return e;let t=Rt({},e),i=this.getEncryptedFields(),o=this.getSecretKey();for(let s of i)if(t[s])try{let c=Uu.AES.decrypt(t[s],o);t[s]=c.toString(Uu.enc.Utf8)}catch(c){console.error(`Failed to decrypt field '${s}' for record ID ${e.organization_id}. It might not be encrypted.`,c)}return t}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var ol=class n{db=ze(Hf);encryptionService=ze(T0);configService=ze(ai);bulkUpsert(e){let t=e.map(i=>this.encryptionService.encryptRecord(i));return $i(this.db.contacts.bulkPut(t)).pipe(Jo(()=>{}))}getData(e){let{page_number:t,page_size:i,sort_column:o,search_filters:s}=e,c=this.configService.config().config.globalFilterFields,f;if(o.length>0&&o[0].coloum_id){let{coloum_id:F,short_type:R}=o[0];f=this.db.contacts.orderBy(F),R==="desc"&&(f=f.reverse())}else f=this.db.contacts.toCollection();s.length>0&&(f=f.filter(F=>{let R=this.encryptionService.decryptRecord(F);return s.every(B=>{if(!B.parameter_code||!B.parameter_value)return!0;let N=B.parameter_value.toLowerCase();if(B.parameter_code==="GS"){let X=this.configService.config().columns.filter(me=>me.columnType==="DATE").map(me=>me.code),j=N.split(" to "),ie=!1,he=null,ve=null;if(j.length===2){let me=new Date(j[0].trim()),Te=new Date(j[1].trim());!isNaN(me.getTime())&&!isNaN(Te.getTime())&&(ie=!0,he=me,ve=Te,ve.setHours(23,59,59,999))}return c&&c.length>0?c.some(me=>{let Te=R[me];if(!Te)return!1;if(X.includes(me)){let $=new Date(Te);return isNaN($.getTime())?!1:ie?$>=he&&$<=ve:String(Te).toLowerCase().includes(N)}return String(Te).toLowerCase().includes(N)}):String(R.organization_name||"").toLowerCase().includes(N)||String(R.contact_person||"").toLowerCase().includes(N)||String(R.communication_detail||"").toLowerCase().includes(N)||String(R.email_id||"").toLowerCase().includes(N)||String(R.created_time||"").toLowerCase().includes(N)}if(this.configService.config().columns.find(X=>X.code===B.parameter_code)?.columnType==="DATE"){let X=R[B.parameter_code];if(!X)return!1;let j=new Date(X);if(isNaN(j.getTime()))return!1;if(j.setUTCHours(0,0,0,0),B.wildcard_operator==="BETWEEN"){if(!B.parameter_value.includes(","))return!1;let[ie,he]=B.parameter_value.split(","),ve=new Date(ie+"T00:00:00Z"),me=new Date(he+"T00:00:00Z");return isNaN(ve.getTime())||isNaN(me.getTime())?!1:(me.setUTCHours(23,59,59,999),j>=ve&&j<=me)}else if(B.wildcard_operator==="EXACT"){let ie=new Date(B.parameter_value+"T00:00:00Z");return isNaN(ie.getTime())?!1:j.getTime()===ie.getTime()}return!1}let q=String(R[B.parameter_code]||"").toLowerCase();return N.includes(",")?N.split(",").includes(q):q.includes(N)})}));let m=f.count(),v=Number(t),g=Number(i),b=(v-1)*g,C=f.offset(b).limit(g).toArray(),A=Promise.all([m,C]).then(([F,R])=>({data:R.map(N=>this.encryptionService.decryptRecord(N)),total_records:F}));return $i(A)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var da=class n{status=we("Connecting");setOnline(){this.status.set("Online")}setConnecting(){this.status.set("Connecting")}setOffline(){this.status.set("Offline")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var br=class n extends Of{TableMaster;ApiConfiguration;_recycleBin;RowContact;SyncLog;constructor(){super("AIJunctionDB_Refactored"),this.version(1).stores({TableMaster:"Table_Code, Table_Name, Sync_Frequency",ApiConfiguration:"API_CODE, Api_End_point",_recycleBin:"++id, originalTable, deletedAt",RowContact:"rowContactUniqueId, contactPerson, organizationName, mobileNumber, emailId, syncStatus",SyncLog:"++id, entityType, status, timestamp"})}async ensureDynamicTables(){this.isOpen()||await this.open();let e=await this.table("TableMaster").toArray();if(e.length===0)return;let t={TableMaster:"Table_Code, Table_Name, Sync_Frequency",ApiConfiguration:"API_CODE, Api_End_point",_recycleBin:"++id, originalTable, deletedAt",RowContact:"rowContactUniqueId, contactPerson, organizationName, mobileNumber, emailId, syncStatus",SyncLog:"++id, entityType, status, timestamp"};e.forEach(i=>{i.Table_Schema&&(t[i.Table_Name]=i.Table_Schema)}),this.close(),this.version(100).stores(t),await this.open()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var LC=class n{constructor(e){this.db=e}getAll(){return $i(this.db.ApiConfiguration.toArray())}async put(e){return this.db.ApiConfiguration.put(e)}static \u0275fac=function(t){return new(t||n)(hi(br))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var BC=class n{constructor(e){this.db=e}async getAll(e){return this.db.table(e).toArray()}async add(e,t){return this.db.table(e).add(t)}async update(e,t,i){return this.db.table(e).update(t,i)}async delete(e,t){return this.db.table(e).delete(t)}static \u0275fac=function(t){return new(t||n)(hi(br))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var OC=class n{constructor(e){this.db=e}getAll(){return $i(this.db.TableMaster.toArray())}async addOrUpdate(e){await this.db.TableMaster.put(e),await this.db.ensureDynamicTables()}async delete(e){await this.db.TableMaster.delete(e)}static \u0275fac=function(t){return new(t||n)(hi(br))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gu=Ko(E0());var HC=class n{key="default-secret-key";encrypt(e){return e?Gu.AES.encrypt(JSON.stringify(e),this.key).toString():""}decrypt(e){if(!e)return null;try{let t=Gu.AES.decrypt(e,this.key);return JSON.parse(t.toString(Gu.enc.Utf8))}catch{return null}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var UC=class n{validateDexieSchema(e){return!!e&&e.includes(",")&&!e.endsWith(",")}validateFunctionality(e){let t=["I","U","D","V","R"];return e.every(i=>t.includes(i))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var A0=class n{constructor(e){this.db=e}getAll(){return Bf(()=>this.db.RowContact.toArray())}async getById(e){return this.db.RowContact.get(e)}async add(e){return await this.db.RowContact.add(e),e.rowContactUniqueId}async update(e,t){return this.db.RowContact.update(e,t)}async delete(e){return this.db.RowContact.delete(e)}async count(){return this.db.RowContact.count()}static \u0275fac=function(t){return new(t||n)(hi(br))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var D0=class{static toEntity(e){return rn(Rt({},e),{createDate:e.createDate?new Date(e.createDate):void 0,verificationDate:e.verificationDate?new Date(e.verificationDate):void 0,nextVerificationDate:e.nextVerificationDate?new Date(e.nextVerificationDate):void 0,lastActivityDateTime:e.lastActivityDateTime?new Date(e.lastActivityDateTime):void 0,syncStatus:"SYNCED",lastModified:Date.now()})}static toDto(e){let s=e,{syncStatus:t,lastModified:i}=s,o=nv(s,["syncStatus","lastModified"]);return rn(Rt({},o),{createDate:e.createDate?.toISOString(),verificationDate:e.verificationDate?.toISOString(),nextVerificationDate:e.nextVerificationDate?.toISOString(),lastActivityDateTime:e.lastActivityDateTime?.toISOString()})}static toModel(e){return{id:e.rowContactUniqueId,contactPerson:e.contactPerson||"",organizationName:e.organizationName||"",email:e.emailId||"",phone:e.mobileNumber||"",communicationDetail:e.communicationDetail,communicationType:e.communicationType,address:e.address,city:e.city,state:e.state,country:e.country,pinCode:e.pinCode,status:e.systemContactStatus,createdAt:e.createDate,verifiedAt:e.verificationDate,originalData:e}}};var al=class n{constructor(e){this.db=e}async addLog(e){return this.db.SyncLog.add(e)}async getPendingLogs(){return this.db.SyncLog.where("status").equals("PENDING").toArray()}async updateStatus(e,t,i){return this.db.SyncLog.update(e,{status:t,errorMessage:i,retryCount:t==="FAILED"?void 0:0})}async clearCompleted(){return this.db.SyncLog.where("status").equals("COMPLETED").delete()}livePendingCount(){return Bf(()=>this.db.SyncLog.where("status").equals("PENDING").count())}static \u0275fac=function(t){return new(t||n)(hi(br))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var k0=class n{constructor(e,t){this.offlineRepo=e;this.syncLogRepo=t}ENTITY_TYPE="ROW_CONTACT";configService=ze(ai);getAll(){return this.offlineRepo.getAll()}async getById(e){return this.offlineRepo.getById(e)}async create(e){let t=D0.toEntity(e);t.syncStatus="PENDING";let i=await this.offlineRepo.add(t),o={entityType:this.ENTITY_TYPE,entityId:i,operation:"CREATE",data:e,timestamp:Date.now(),status:"PENDING",retryCount:0};return await this.syncLogRepo.addLog(o),i}async update(e,t){if(!await this.offlineRepo.getById(e))throw new Error("Entity not found");await this.offlineRepo.update(e,rn(Rt({},t),{syncStatus:"PENDING",lastModified:Date.now()}));let o={entityType:this.ENTITY_TYPE,entityId:e,operation:"UPDATE",data:t,timestamp:Date.now(),status:"PENDING",retryCount:0};await this.syncLogRepo.addLog(o)}async delete(e){await this.offlineRepo.delete(e);let t={entityType:this.ENTITY_TYPE,entityId:e,operation:"DELETE",data:{rowContactUniqueId:e},timestamp:Date.now(),status:"PENDING",retryCount:0};await this.syncLogRepo.addLog(t)}bulkUpsert(e){let t=e.map(i=>rn(Rt({},i),{syncStatus:"SYNCED",lastModified:Date.now()}));return $i(this.offlineRepo.db.RowContact.bulkPut(t)).pipe(Jo(()=>{}))}getData(e){let{page_number:t,page_size:i,sort_column:o,search_filters:s}=e,c=this.offlineRepo.db.RowContact,f;if(o.length>0&&o[0].coloum_id){let{coloum_id:A,short_type:F}=o[0];f=c.orderBy(A),F==="desc"&&(f=f.reverse())}else f=c.toCollection();s.length>0&&(f=f.filter(A=>s.every(F=>{if(!F.parameter_code||!F.parameter_value)return!0;let R=F.parameter_value.toLowerCase();return String(A[F.parameter_code]||"").toLowerCase().includes(R)})));let m=f.count(),v=Number(t),g=Number(i),b=(v-1)*g,C=f.offset(b).limit(g).toArray();return $i(Promise.all([m,C]).then(([A,F])=>({data:F,total_records:A})))}static \u0275fac=function(t){return new(t||n)(hi(A0),hi(al))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var qu=Ko(E0());var I0=class n{isBrowser;SECRET="AVINYA_ERP_2025_SECRET_KEY";constructor(e){this.isBrowser=no(e)}encrypt(e){return qu.AES.encrypt(e,this.SECRET).toString()}decrypt(e){try{return qu.AES.decrypt(e,this.SECRET).toString(qu.enc.Utf8)||null}catch{return null}}saveData(e,t){if(!this.isBrowser)return;let i=typeof t=="string"?t:JSON.stringify(t),o=this.encrypt(i);localStorage.setItem(e,o)}getData(e){if(!this.isBrowser)return null;let t=localStorage.getItem(e);if(!t)return null;let i=this.decrypt(t);if(!i)return null;try{return JSON.parse(i)}catch{return i}}removeData(e){this.isBrowser&&localStorage.removeItem(e)}clearData(){this.isBrowser&&localStorage.clear()}static \u0275fac=function(t){return new(t||n)(hi(Ms))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var M0=class n{unwrapResponse(e){return e&&typeof e=="object"&&"data"in e?e.data:e}handleError(e){console.error("An error occurred:",e);let t="Unknown Error";return e.error instanceof ErrorEvent?t=e.error.message:t=`Error Code: ${e.status}
Message: ${e.message}`,rv(()=>new Error(t))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var GC=new vo("API_CONFIG");var F0=class n{http=ze(yv);localStorageService=ze(I0);apiHelper=ze(M0);apiConfig=ze(GC);constructor(){}resolveBaseUrl(e){let t=this.apiConfig;switch(e){case"CUSTOMER":return t.CUSTOMER_SERVICE||e;case"INVENTORY":return t.INVENTORY||e;case"CONTACT":return t.CONTACT||e;case"TRAVEL":return t.TRAVEL||e;case"MASTERDATA":return t.MASTERDATA||e;default:return t[e]?t[e]:e||""}}buildHeaders(){return new gv({"Content-Type":"application/json",session_id:this.localStorageService.getData("sessionId")??"",company_id:this.localStorageService.getData("companyId")??"",work_mode:"Demo"})}buildOptions(e,t){let i;return e instanceof Up?i=e:e&&typeof e=="object"&&(i=new Up({fromObject:e})),{headers:this.buildHeaders(),params:i,body:t,context:new vv}}request(e,t,i,o){let c=`${this.resolveBaseUrl(e)}${i}`,f=this.buildOptions(o?.params,o?.body);return this.http.request(t,c,f).pipe(Jo(m=>this.apiHelper.unwrapResponse(m)),Is(m=>this.apiHelper.handleError(m)))}getAll(e,t,i){return this.request(e,"GET",i,{params:t})}create(e,t,i){return this.request(e,"POST",i,{body:t})}updatePost(e,t,i){return this.request(e,"POST",i,{body:t})}update(e,t,i){return this.request(e,"PATCH",i,{body:t})}delete(e,t,i){return this.request(e,"DELETE",i,{body:t})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var ts=class n{handlers=new Map;isProcessing=!1;syncStateSubject=new iv("PENDING");syncState$=this.syncStateSubject.asObservable();isOnline=we(!0);logRepo=ze(al);platformId=ze(Ms);constructor(){no(this.platformId)&&(this.isOnline.set(navigator.onLine),window.addEventListener("online",()=>this.handleConnectionChange(!0)),window.addEventListener("offline",()=>this.handleConnectionChange(!1))),Zt(()=>{this.isOnline()&&this.processQueue()})}getPendingCount(){return $i(this.logRepo.livePendingCount())}handleConnectionChange(e){this.isOnline.set(e),e?(console.log("[SyncManager] Online. Attempting sync..."),this.processQueue()):console.log("[SyncManager] Offline. Sync paused.")}registerHandler(e,t){this.handlers.set(e,t)}async processQueue(){if(!(this.isProcessing||!this.isOnline()))try{this.isProcessing=!0,this.syncStateSubject.next("IN_PROGRESS");let e=await this.logRepo.getPendingLogs();if(e.length===0){this.isProcessing=!1,this.syncStateSubject.next("COMPLETED");return}console.log(`[SyncManager] Processing ${e.length} pending operations...`);for(let i of e)await this.processLog(i);(await this.logRepo.getPendingLogs()).length>0?await this.processQueue():this.syncStateSubject.next("COMPLETED")}catch(e){console.error("[SyncManager] Queue processing error",e),this.syncStateSubject.next("FAILED")}finally{this.isProcessing=!1}}async processLog(e){let t=this.handlers.get(e.entityType);if(!t){console.warn(`[SyncManager] No handler registered for entity type: ${e.entityType}`);return}try{await this.logRepo.updateStatus(e.id,"IN_PROGRESS"),await t.sync(e.operation,e.data),await this.logRepo.updateStatus(e.id,"COMPLETED"),console.log(`[SyncManager] Synced log #${e.id} (${e.entityType} - ${e.operation})`)}catch(i){console.error(`[SyncManager] Failed to sync log #${e.id}`,i),await this.logRepo.updateStatus(e.id,"FAILED",i.message||"Unknown error")}}ngOnDestroy(){no(this.platformId)&&(window.removeEventListener("online",()=>{}),window.removeEventListener("offline",()=>{}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var N0=class n{constructor(e){this.syncManager=e;this.syncManager.registerHandler(this.ENTITY_TYPE,this)}ENTITY_TYPE="ROW_CONTACT";http=ze(F0);MODULE_KEY="CONTACT";API_PATH="/RowContact";async sync(e,t){switch(e){case"CREATE":return nu(this.http.create(this.MODULE_KEY,t,this.API_PATH));case"UPDATE":return nu(this.http.update(this.MODULE_KEY,t,`${this.API_PATH}/${t.rowContactUniqueId}`));case"DELETE":return nu(this.http.delete(this.MODULE_KEY,t,`${this.API_PATH}/${t.rowContactUniqueId}`));case"SOFT_DELETE":return nu(this.http.updatePost(this.MODULE_KEY,rn(Rt({},t),{isDeleted:!0}),`${this.API_PATH}/${t.rowContactUniqueId}`));default:throw new Error(`Unsupported sync operation: ${e}`)}}static \u0275fac=function(t){return new(t||n)(hi(ts))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var R0=class n{configService=ze(ai);onlineDataService=ze(rl);offlineDataService=ze(ol);connectionStatusService=ze(da);rowContactDataService=ze(k0);rowContactSyncHandler=ze(N0);syncManager=ze(ts);getData(e){let t=this.configService.config(),i=t.config.dataStrategy;if(t.key==="RowContact"||t.feature==="RowContact")return this.rowContactDataService.getData(e);switch(i){case"ONLINE_FIRST":return console.log("[DataManager] Using ONLINE_FIRST strategy."),this.connectionStatusService.setConnecting(),this.onlineDataService.getData(e).pipe(Ic(()=>this.connectionStatusService.setOnline()),Is(o=>(console.warn("[DataManager] ONLINE_FIRST failed, falling back to offline.",o),this.connectionStatusService.setOffline(),this.offlineDataService.getData(e))));case"OFFLINE_FIRST":return console.log("[DataManager] Using OFFLINE_FIRST strategy."),this.offlineDataService.getData(e);case"HYBRID":return console.log("[DataManager] Using HYBRID strategy."),this.connectionStatusService.setConnecting(),this.onlineDataService.getData(e).pipe(Ic(o=>{console.log("[DataManager] HYBRID: Fetched online, updating local DB in background."),this.connectionStatusService.setOnline(),this.offlineDataService.bulkUpsert(o.data).subscribe({next:()=>console.log("[DataManager] HYBRID: Local DB updated successfully."),error:s=>console.error("[DataManager] HYBRID: Error updating local DB.",s)})}),Is(o=>(console.warn("[DataManager] HYBRID: Online fetch failed, falling back to offline.",o),this.connectionStatusService.setOffline(),this.offlineDataService.getData(e))));case"SYNC":return console.log("[DataManager] Using SYNC strategy (reading from local DB)."),this.offlineDataService.getData(e);default:return console.warn(`[DataManager] Unknown data strategy: ${i}. Defaulting to ONLINE_FIRST.`),this.connectionStatusService.setConnecting(),this.onlineDataService.getData(e).pipe(Ic(()=>this.connectionStatusService.setOnline()),Is(o=>(this.connectionStatusService.setOffline(),this.offlineDataService.getData(e))))}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var P0=class n{constructor(){}logChange(e,t){console.log(`[SyncLogService] Logging action: ${e}`,t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var V0=class n{onlineDataService=ze(rl);offlineDataService=ze(ol);syncLogService=ze(P0);connectionStatusService=ze(da);persistenceService=ze(_r);LAST_SYNC_KEY="smartTableLastSync";isPrimed=we(!1);lastSyncTime=we(this.persistenceService.loadState(this.LAST_SYNC_KEY));isSyncing=we(!1);constructor(){this.lastSyncTime()&&(this.isPrimed.set(!0),console.log("[SyncService] Local data is primed from a previous session."))}startFullSync(){console.log("[SyncService] Starting full sync..."),this.primeDataFromServer()}primeDataFromServer(){if(this.isSyncing()){console.log("[SyncService] Sync already in progress.");return}console.log("[SyncService] Starting to prime data from server..."),this.isSyncing.set(!0),this.isPrimed.set(!1),this.connectionStatusService.setConnecting();let e={page_number:1,page_size:5e3,search_filters:[],sort_column:[]};this.onlineDataService.getData(e).pipe(sv(()=>{this.isSyncing.set(!1),console.log("[SyncService] Data priming finished.")})).subscribe({next:t=>{console.log(`[SyncService] Fetched ${t.data.length} records from server.`),this.offlineDataService.bulkUpsert(t.data).subscribe(()=>{console.log("[SyncService] Successfully saved records to local DB.");let i=Date.now();this.lastSyncTime.set(i),this.persistenceService.saveState(this.LAST_SYNC_KEY,i),this.isPrimed.set(!0)}),this.connectionStatusService.setOnline()},error:t=>{console.error("[SyncService] Error priming data from server:",t),this.connectionStatusService.setOffline()}})}pushLocalChanges(){console.log("[SyncService] Pushing local changes to server...")}pullRemoteChanges(){console.log("[SyncService] Pulling remote changes from server...")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var L0=class n{ai=ze(Zi).ai;async generateFilterFromQuery(e,t){let i=t.map(f=>({name:f.name,code:f.code,type:f.columnType||"TEXT"})),o=`You are an AI assistant for a data table. Your task is to interpret the user's query and generate a JSON object with filtering instructions and a conversational response.
    1. If the query is a command to filter or search the data, generate the appropriate filter objects.
    2. If the query is a general question, set both 'globalSearch' and 'advancedFilters' to null and provide a helpful answer in 'aiResponse'.
    
    The JSON object must have these properties: 'globalSearch' (string | null), 'advancedFilters' (array of filter objects | null), and 'aiResponse' (string).
    - Use 'globalSearch' for general, non-specific text searches (e.g., names, companies).
    - Use 'advancedFilters' for specific, structured conditions.
    - 'globalSearch' and 'advancedFilters' should be mutually exclusive. Set one to a value and the other to null.
    
    FILTERING RULES:
    - Multiple Conditions: For queries with multiple conditions (e.g., "web leads with revenue over 1M"), provide an array of filter objects in 'advancedFilters'.
    - Date Queries: Interpret relative dates (e.g., 'last month', 'yesterday') and return them in YYYY-MM-DD format. Use the 'between' operator for date ranges.
    - Supported operators for numeric/text are: '=', '!=', '>', '<', '>=', '<=', 'contains', 'between'.

    Available columns for filtering: ${JSON.stringify(i)}
    
    User Query: "${e}"

    Example 1 (Global Search):
    Query: "find contacts at Innovate Inc."
    Response: { "globalSearch": "Innovate Inc.", "advancedFilters": null, "aiResponse": "Sure, I'm now showing contacts from Innovate Inc." }

    Example 2 (Structured Filter):
    Query: "show me who has more than 5M revenue"
    Response: { "globalSearch": null, "advancedFilters": [{ "code": "annual_revenue", "name": "Annual Revenue", "type": "numeric", "operator": ">", "value1": "5000000" }], "aiResponse": "Okay, I've filtered for contacts with annual revenue greater than 5,000,000." }
    
    Example 3 (Multiple Conditions):
    Query: "find web leads with revenue over 1 million"
    Response: { "globalSearch": null, "advancedFilters": [{ "code": "lead_source", "name": "Lead Source", "type": "select", "operator": "=", "value1": "Web" }, { "code": "annual_revenue", "name": "Annual Revenue", "type": "numeric", "operator": ">", "value1": "1000000" }], "aiResponse": "Filtering for web leads with revenue over 1M." }

    Example 4 (Date Range):
    Query: "show contacts created last month"
    Response: { "globalSearch": null, "advancedFilters": [{ "code": "created_time", "name": "Created", "type": "date", "operator": "between", "value1": "2024-07-01", "value2": "2024-07-31"}], "aiResponse": "Showing contacts created last month." }
    
    Example 5 (Question):
    Query: "how many contacts are there?"
    Response: { "globalSearch": null, "advancedFilters": null, "aiResponse": "I can't count the contacts, but I can help you filter them. For example, you can ask me to show contacts from a specific company." }
    `,c=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:o,config:{responseMimeType:"application/json",responseSchema:{type:Ct.OBJECT,properties:{globalSearch:{type:Ct.STRING,nullable:!0},advancedFilters:{type:Ct.ARRAY,nullable:!0,items:{type:Ct.OBJECT,properties:{code:{type:Ct.STRING},name:{type:Ct.STRING},type:{type:Ct.STRING,enum:["numeric","text","date","select"]},operator:{type:Ct.STRING},value1:{type:Ct.STRING},value2:{type:Ct.STRING,nullable:!0}},required:["code","name","type","operator","value1"]}},aiResponse:{type:Ct.STRING}},required:["globalSearch","advancedFilters","aiResponse"]}}})).text.trim();return JSON.parse(c)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var A4=["chatInput"];function D4(n,e){if(n&1&&(ne(0,"div",17),J(1),oe()),n&2){let t=I().$implicit;L(),Jt(" ",t.text," ")}}function k4(n,e){if(n&1&&(ne(0,"div",18)(1,"div",19)(2,"p",20),J(3),oe()()()),n&2){let t=I().$implicit;L(3),Ue(t.text)}}function I4(n,e){if(n&1&&(ne(0,"div",11)(1,"div",21),at(2,"p",22),oe()()),n&2){let t=I().$implicit;L(2),Ft("innerHTML",t.text.replace(/\n/g,"<br>"),Ji)}}function M4(n,e){if(n&1&&fe(0,D4,2,1,"div",17)(1,k4,4,1,"div",18)(2,I4,3,1,"div",11),n&2){let t,i=e.$implicit;pe((t=i.sender)==="system"?0:t==="user"?1:t==="ai"?2:-1)}}function F4(n,e){n&1&&(ne(0,"div",11)(1,"div",23)(2,"div",24),at(3,"span",25)(4,"span",26)(5,"span",27),oe()()())}var B0=class n{data=be.required();columns=be.required();close=ht();filterApplied=ht();aiChatbotService=ze(L0);messages=we([{sender:"system",text:"Ask me anything or tell me how to filter the data."}]);isLoading=we(!1);chatInput=Pc("chatInput");async sendMessage(){let e=this.chatInput()?.nativeElement;if(!e||!e.value.trim()||this.isLoading())return;let t=e.value.trim();e.value="",this.messages.update(i=>[...i,{sender:"user",text:t}]),this.isLoading.set(!0);try{let i=await this.aiChatbotService.generateFilterFromQuery(t,this.columns());this.messages.update(o=>[...o,{sender:"ai",text:i.aiResponse}]),(i.globalSearch||i.advancedFilters&&i.advancedFilters.length>0)&&(this.filterApplied.emit({globalSearch:i.globalSearch,advancedFilters:i.advancedFilters}),setTimeout(()=>this.close.emit(),1e3))}catch(i){console.error("Error querying AI:",i);let o="Sorry, I encountered an error. Please try again.";this.messages.update(s=>[...s,{sender:"system",text:o}])}finally{this.isLoading.set(!1)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-ai-chatbot"]],viewQuery:function(t,i){t&1&&Fc(i.chatInput,A4,5),t&2&&Nc()},inputs:{data:[1,"data"],columns:[1,"columns"]},outputs:{close:"close",filterApplied:"filterApplied"},decls:20,vars:3,consts:[["chatInput",""],[1,"fixed","bottom-20","right-8","w-96","h-[60vh]","max-h-[700px]","bg-white","rounded-lg","shadow-2xl","z-50","flex","flex-col","border","border-gray-200"],[1,"flex","items-center","justify-between","p-3","border-b","border-gray-200","flex-shrink-0"],[1,"flex","items-center","gap-3"],[1,"p-1.5","bg-indigo-100","rounded-full"],[1,"pi","pi-sparkles","text-indigo-600"],[1,"text-md","font-semibold","text-gray-800"],["title","Close Chat",1,"p-2","rounded-full","text-gray-500","hover:text-gray-700","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"flex-grow","p-4","overflow-y-auto"],[1,"space-y-4"],[1,"flex","justify-start"],[1,"p-3","border-t","border-gray-200","flex-shrink-0"],[1,"flex","items-center","gap-2"],["type","text","placeholder","Type your question...",1,"flex-1","w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","bg-white","focus:ring-indigo-500","focus:border-indigo-500","disabled:opacity-50",3,"keydown.enter","disabled"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-indigo-600","border","border-transparent","rounded-md","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"pi","pi-send"],[1,"text-center","text-xs","text-gray-500","italic"],[1,"flex","justify-end"],[1,"bg-indigo-600","text-white","rounded-lg","rounded-br-none","py-2","px-3","max-w-xs"],[1,"text-sm"],[1,"bg-gray-200","text-gray-800","rounded-lg","rounded-bl-none","py-2","px-3","max-w-xs"],[1,"text-sm",3,"innerHTML"],[1,"bg-gray-200","rounded-lg","rounded-bl-none","py-2","px-3"],[1,"flex","items-center","space-x-1"],[1,"h-2","w-2","bg-indigo-400","rounded-full","animate-pulse","[animation-delay:-0.3s]"],[1,"h-2","w-2","bg-indigo-400","rounded-full","animate-pulse","[animation-delay:-0.15s]"],[1,"h-2","w-2","bg-indigo-400","rounded-full","animate-pulse"]],template:function(t,i){if(t&1){let o=Ne();ne(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4),at(4,"i",5),oe(),ne(5,"h2",6),J(6,"AI Assistant"),oe()(),ne(7,"button",7),Ye("click",function(){return ee(o),te(i.close.emit())}),at(8,"i",8),oe()(),ne(9,"div",9)(10,"div",10),nt(11,M4,3,1,null,null,Qo),fe(13,F4,6,0,"div",11),oe()(),ne(14,"footer",12)(15,"div",13)(16,"input",14,0),Ye("keydown.enter",function(){return ee(o),te(i.sendMessage())}),oe(),ne(18,"button",15),Ye("click",function(){return ee(o),te(i.sendMessage())}),at(19,"i",16),oe()()()()}t&2&&(L(11),it(i.messages()),L(2),pe(i.isLoading()?13:-1),L(3),Ft("disabled",i.isLoading()),L(2),Ft("disabled",i.isLoading()))},dependencies:[kt],encapsulation:2,changeDetection:0})};var O0=class n{STORAGE_KEY="smartTableSavedQueries";getQueriesFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading saved queries from localStorage",e),[]}}saveQueriesToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving queries to localStorage",t)}}getSavedQueries(){return Ki(this.getQueriesFromStorage())}saveQuery(e,t){let i=this.getQueriesFromStorage(),o={id:new Date().toISOString(),name:e,state:t};return i.push(o),this.saveQueriesToStorage(i),Ki(o)}deleteQuery(e){let t=this.getQueriesFromStorage();return t=t.filter(i=>i.id!==e),this.saveQueriesToStorage(t),Ki(void 0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};function N4(n,e){if(n&1){let t=Ne();ne(0,"div",2),Ye("click",function(){ee(t);let o=I();return te(o.close.emit())}),ne(1,"div",3),Ye("click",function(o){return ee(t),te(o.stopPropagation())}),ne(2,"header",4)(3,"h3",5),J(4,"Save Current View"),oe(),ne(5,"button",6),Ye("click",function(){ee(t);let o=I();return te(o.close.emit())}),at(6,"i",7),oe()(),ne(7,"div",8)(8,"label",9),J(9,"View Name"),oe(),ne(10,"input",10,0),Ye("input",function(){ee(t);let o=bi(11),s=I();return te(s.queryName.set(o.value))})("keydown.enter",function(){ee(t);let o=I();return te(o.handleSave())}),oe()(),ne(12,"footer",11)(13,"button",12),Ye("click",function(){ee(t);let o=I();return te(o.close.emit())}),J(14,"Cancel"),oe(),ne(15,"button",13),Ye("click",function(){ee(t);let o=I();return te(o.handleSave())}),J(16,"Save"),oe()()()()}if(n&2){let t=I();L(10),Ft("value",t.queryName()),L(5),Ft("disabled",!t.queryName().trim())}}var H0=class n{isOpen=be.required();close=ht();save=ht();queryName=we("");handleSave(){let e=this.queryName().trim();e&&(this.save.emit(e),this.close.emit())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-save-query-modal"]],inputs:{isOpen:[1,"isOpen"]},outputs:{close:"close",save:"save"},decls:1,vars:1,consts:[["queryNameInput",""],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-md","m-4",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6"],["for","queryName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","queryName","placeholder","e.g., 'High-Revenue Web Leads'",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"input","keydown.enter","value"],[1,"p-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"]],template:function(t,i){t&1&&fe(0,N4,17,2,"div",1),t&2&&pe(i.isOpen()?0:-1)},dependencies:[kt],encapsulation:2,changeDetection:0})};var U0=class n{STORAGE_KEY="smartTableCustomLayouts";getLayoutsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading custom layouts from localStorage",e),[]}}saveLayoutsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving layouts to localStorage",t)}}getLayouts(){return Ki(this.getLayoutsFromStorage())}saveLayout(e){let t=this.getLayoutsFromStorage(),i=Rt({id:new Date().toISOString()},e);return t.push(i),this.saveLayoutsToStorage(t),Ki(i)}deleteLayout(e){let t=this.getLayoutsFromStorage();return t=t.filter(i=>i.id!==e),this.saveLayoutsToStorage(t),Ki(void 0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};function R4(n,e){if(n&1&&(ne(0,"span",35),J(1),oe(),J(2," selected ")),n&2){let t=I(2);L(),Ue(t.fileName())}}function P4(n,e){n&1&&(ne(0,"span"),J(1,"Upload a file"),oe(),J(2," or drag and drop "))}function V4(n,e){if(n&1){let t=Ne();ne(0,"div")(1,"label",27)(2,"div",28)(3,"div",29),at(4,"i",30),ne(5,"div",31)(6,"p",32),fe(7,R4,3,1)(8,P4,3,0),oe()(),ne(9,"p",33),J(10,"PNG, JPG, GIF up to 10MB"),oe()()()(),ne(11,"input",34),Ye("change",function(o){ee(t);let s=I();return te(s.handleFileChange(o))}),oe()()}if(n&2){let t=I();L(7),pe(t.fileName()?7:8)}}function L4(n,e){if(n&1){let t=Ne();ne(0,"div")(1,"textarea",36,2),Ye("input",function(){ee(t);let o=bi(2),s=I();return te(s.htmlPrompt.set(o.value))}),oe(),ne(3,"p",37),J(4,"Provide a simple HTML structure. The AI will add styling and map the data fields."),oe()()}if(n&2){let t=I();L(),Ft("placeholder","e.g., <div><h2>{{ organization_name }}</h2></div>")("value",t.htmlPrompt())}}var z0=class n{close=ht();generate=ht();activeTab=we("image");layoutName=we("");targetView=we("card");htmlPrompt=we("");imageBase64=we(null);fileName=we("");formIsValid=ct(()=>{let e=this.layoutName().trim().length>0,t=this.activeTab()==="image"&&!!this.imageBase64()||this.activeTab()==="html"&&this.htmlPrompt().trim().length>0;return e&&t});handleFileChange(e){let i=e.target.files?.[0];if(i){this.fileName.set(i.name);let o=new FileReader;o.onload=s=>{this.imageBase64.set(s.target?.result)},o.readAsDataURL(i)}}handleGenerate(){if(!this.formIsValid())return;let e={name:this.layoutName().trim(),targetView:this.targetView(),prompt:{}};if(this.activeTab()==="image"&&this.imageBase64()){let t=this.imageBase64().split(","),i=t[0].match(/:(.*?);/)?.[1]||"image/jpeg",o=t[1];e.prompt.image={data:o,mimeType:i}}else e.prompt.html=this.htmlPrompt();this.generate.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-create-layout-modal"]],outputs:{close:"close",generate:"generate"},decls:46,vars:12,consts:[["nameInput",""],["targetSelect",""],["htmlInput",""],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","m-4","flex","flex-col","max-h-[90vh]",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","flex","items-center","gap-2"],[1,"pi","pi-sparkles","text-indigo-500"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","space-y-6","overflow-y-auto"],[1,"font-medium","text-gray-800","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","layoutName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","layoutName","placeholder","e.g., 'Modern Contact Card'",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"input","value"],["for","targetView",1,"block","text-sm","font-medium","text-gray-700"],["id","targetView",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"change","value"],["value","card"],["value","list-item"],["value","table-row"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-4"],[1,"border-transparent","text-gray-500","hover:text-gray-700","hover:border-gray-300","whitespace-nowrap","py-3","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"pt-4"],[1,"p-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-indigo-600","border","border-transparent","rounded-md","hover:bg-indigo-700","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["for","file-upload",1,"relative","cursor-pointer","bg-white","rounded-md","font-medium","text-indigo-600","hover:text-indigo-500"],[1,"mt-1","flex","justify-center","px-6","pt-5","pb-6","border-2","border-gray-300","border-dashed","rounded-md"],[1,"space-y-1","text-center"],[1,"pi","pi-image","mx-auto","h-12","w-12","text-gray-400"],[1,"flex","text-sm","text-gray-600"],[1,"pl-1"],[1,"text-xs","text-gray-500"],["id","file-upload","name","file-upload","type","file","accept","image/*",1,"sr-only",3,"change"],[1,"font-semibold"],["rows","8",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","font-mono",3,"input","placeholder","value"],[1,"mt-2","text-xs","text-gray-500"]],template:function(t,i){if(t&1){let o=Ne();ne(0,"div",3),Ye("click",function(){return ee(o),te(i.close.emit())}),ne(1,"div",4),Ye("click",function(c){return ee(o),te(c.stopPropagation())}),ne(2,"header",5)(3,"h3",6),at(4,"i",7),J(5,"Create Layout with AI"),oe(),ne(6,"button",8),Ye("click",function(){return ee(o),te(i.close.emit())}),at(7,"i",9),oe()(),ne(8,"div",10)(9,"div")(10,"h4",11),J(11,"1. Name and Target"),oe(),ne(12,"div",12)(13,"div")(14,"label",13),J(15,"Layout Name"),oe(),ne(16,"input",14,0),Ye("input",function(){ee(o);let c=bi(17);return te(i.layoutName.set(c.value))}),oe()(),ne(18,"div")(19,"label",15),J(20,"Target View"),oe(),ne(21,"select",16,1),Ye("change",function(){ee(o);let c=bi(22);return te(i.targetView.set(c.value))}),ne(23,"option",17),J(24,"Card"),oe(),ne(25,"option",18),J(26,"List Item"),oe(),ne(27,"option",19),J(28,"Table Row"),oe()()()()(),ne(29,"div")(30,"h4",11),J(31,"2. Provide Design Input"),oe(),ne(32,"div",20)(33,"nav",21)(34,"button",22),Ye("click",function(){return ee(o),te(i.activeTab.set("image"))}),J(35," Upload Image "),oe(),ne(36,"button",22),Ye("click",function(){return ee(o),te(i.activeTab.set("html"))}),J(37," Use HTML "),oe()()(),ne(38,"div",23),fe(39,V4,12,1,"div")(40,L4,5,2,"div"),oe()()(),ne(41,"footer",24)(42,"button",25),Ye("click",function(){return ee(o),te(i.close.emit())}),J(43,"Cancel"),oe(),ne(44,"button",26),Ye("click",function(){return ee(o),te(i.handleGenerate())}),J(45," Generate "),oe()()()()}t&2&&(L(16),Ft("value",i.layoutName()),L(5),Ft("value",i.targetView()),L(13),Ze("border-indigo-500",i.activeTab()==="image")("text-indigo-600",i.activeTab()==="image"),L(2),Ze("border-indigo-500",i.activeTab()==="html")("text-indigo-600",i.activeTab()==="html"),L(3),pe(i.activeTab()==="image"?39:40),L(5),Ft("disabled",!i.formIsValid()))},dependencies:[kt],encapsulation:2,changeDetection:0})};var B4={type:Ct.OBJECT,properties:{index:{type:Ct.NUMBER},name:{type:Ct.STRING},code:{type:Ct.STRING},display:{type:Ct.STRING},columnType:{type:Ct.STRING,nullable:!0},width:{type:Ct.STRING,nullable:!0},align:{type:Ct.STRING,nullable:!0},sortable:{type:Ct.BOOLEAN,nullable:!0},filterable:{type:Ct.BOOLEAN,nullable:!0},cardHeader:{type:Ct.BOOLEAN,nullable:!0},cardHeader1:{type:Ct.BOOLEAN,nullable:!0},cardRow:{type:Ct.BOOLEAN,nullable:!0},listRow:{type:Ct.BOOLEAN,nullable:!0},showOnColumnChooser:{type:Ct.BOOLEAN,nullable:!0}},required:["index","name","code","display"]},sl=class n{ai=ze(Zi).ai;async getAutoAdoptedConfig(e,t){let i=`You are a UI/UX expert tasked with making a data table responsive. Given a screen width of ${t}px, adapt the following table configuration JSON to provide the best user experience. 
    For smaller screens (under 768px), you should: 
    1. Reduce 'cardsPerRow' to 1 or 2. 
    2. Hide less important columns in the table view by setting their 'display' property to 'none'. Keep essential columns like contact name and primary contact info visible.
    For medium screens (768px to 1280px), you can show more columns and set 'cardsPerRow' to 3 or 4.
    For large screens (above 1280px), most columns can be visible and 'cardsPerRow' can be 4 or more.
    Return the complete, modified JSON object that adheres to the provided schema. Original Config: 

${JSON.stringify(e,null,2)}`,s=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Ct.OBJECT,properties:{config:{type:Ct.OBJECT,properties:{cardViewConfig:{type:Ct.OBJECT,properties:{cardsPerRow:{type:Ct.INTEGER}},required:["cardsPerRow"],nullable:!0}}},columns:{type:Ct.ARRAY,items:B4}},required:["config","columns"]}}})).text.trim(),c=JSON.parse(s),f=JSON.parse(JSON.stringify(e));return f.config.cardViewConfig=c.config.cardViewConfig,f.columns=c.columns,f}async generateLayout(e,t,i){let o=i.map(v=>`\`${v.code}\` (${v.name})`).join(", "),s=`You are an expert front-end developer specializing in Tailwind CSS. Your task is to create a single, self-contained HTML template for a ${t}.
The component must display data from the following available fields: ${o}.
Use placeholders in the format \`{{ field_code }}\` to show where the data should go. For example, to display the organization's name, use \`{{ organization_name }}\`.

**Styling Rules:**
1.  **Use ONLY Tailwind CSS classes for styling.** Do not use inline styles or \`<style>\` tags.
2.  The design must be **fully responsive**.
3.  The design must support **dark mode** using \`dark:\` variants (e.g., \`bg-white dark:bg-gray-800\`).
4.  Ensure good contrast and accessibility.
5.  The final HTML should be a single block, like one \`<div>\` or one \`<li>\` that contains everything. For a 'table-row' target, you can use a \`<td>\` with a div inside it, and you must apply a colspan like \`<td colspan="100%">\`.

**Input:**
You will be given either a basic HTML structure or an image of a design. You must interpret this input and create a production-ready component from it.
`,c={parts:[]};if(e.image)s+=`
**Design Input (Image):** Create an HTML component based on the provided image.`,c.parts.push({text:s}),c.parts.push({inlineData:{mimeType:e.image.mimeType,data:e.image.data}});else if(e.html)s+=`
**Design Input (HTML):** Create an HTML component based on the following structure: 
\`\`\`html
${e.html}
\`\`\``,c.parts.push({text:s});else throw new Error("No prompt provided for layout generation.");let m=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:c,config:{responseMimeType:"application/json",responseSchema:{type:Ct.OBJECT,properties:{htmlTemplate:{type:Ct.STRING}},required:["htmlTemplate"]}}})).text.trim();return JSON.parse(m)}async suggestLayoutImprovements(e,t,i){let o=`You are a UI/UX expert specializing in responsive design with Tailwind CSS and dark mode.
    Analyze the following HTML template and suggest improvements.

    **Context:**
    - Screen Width: ${t}px
    - Data Density: ${i} (e.g., 'compact' means less space per item, 'comfortable' means more space)
    - The template is used to display a single item in a list or grid.
    - It must be responsive and support dark mode (using 'dark:' prefixes).

    **HTML Template:**
    \`\`\`html
    ${e}
    \`\`\`

    **Your Task:**
    Provide a bulleted list of 2-4 actionable suggestions using markdown to improve the layout's responsiveness, readability, and modern aesthetics for the given screen size and density. Focus on better use of space, typography, and component structure. The suggestions should be concise.

    Respond with a JSON object containing a single key "suggestions" which is a string containing the markdown-formatted bullet points.`,c=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:o,config:{responseMimeType:"application/json",responseSchema:{type:Ct.OBJECT,properties:{suggestions:{type:Ct.STRING}},required:["suggestions"]}}})).text.trim();return JSON.parse(c)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var ll=class n{persistenceService=ze(_r);configService=ze(ai);STORAGE_KEY="smartTableDensity";density=we(this.getInitialDensity());constructor(){Zt(()=>{this.persistenceService.saveState(this.STORAGE_KEY,this.density())})}setDensity(e){this.density.set(e)}getInitialDensity(){return this.persistenceService.loadState(this.STORAGE_KEY)??this.configService.config().config.sizerConfig.defaultDensity}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var O4=(n,e)=>e.id;function H4(n,e){n&1&&(z(0,"div",20),Ie(1,"i",22),G())}function U4(n,e){n&1&&(z(0,"div",20),Ie(1,"i",22),G())}function z4(n,e){if(n&1){let t=Ne();z(0,"div",15),_e("click",function(){let o=ee(t).$implicit,s=I(2);return te(s.handleApply(o.id))}),z(1,"div",23),Ie(2,"div",24),G(),z(3,"div",18)(4,"h4",19),J(5),G(),z(6,"p",25),J(7),G()(),fe(8,U4,2,0,"div",20),z(9,"button",26),_e("click",function(o){let s=ee(t).$implicit,c=I(2);return o.stopPropagation(),te(c.deleteLayout.emit(s.id))}),Ie(10,"i",27),G()()}if(n&2){let t=e.$implicit,i=I(2);Ze("border-indigo-500",i.isLayoutActive(t.id))("border-gray-300",!i.isLayoutActive(t.id)),L(2),Je("innerHTML",t.htmlTemplate,Ji),L(3),Ue(t.name),L(2),Ue(t.targetView.replace("-"," ")),L(),pe(i.isLayoutActive(t.id)?8:-1)}}function G4(n,e){if(n&1){let t=Ne();z(0,"div",2),_e("click",function(){ee(t);let o=I();return te(o.close.emit())}),z(1,"div",3),_e("click",function(o){return ee(t),te(o.stopPropagation())}),z(2,"header",4)(3,"h3",5),J(4,"UI Gallery"),G(),z(5,"div",6)(6,"button",7),_e("click",function(){ee(t);let o=I();return te(o.handleSuggestImprovements())}),Ie(7,"i",8),z(8,"span"),J(9,"Suggest Improvements"),G()(),z(10,"button",9),_e("click",function(){ee(t);let o=I();return te(o.showCreateModal.set(!0))}),Ie(11,"i",10),z(12,"span"),J(13,"Create with AI"),G()(),z(14,"button",11),_e("click",function(){ee(t);let o=I();return te(o.close.emit())}),Ie(15,"i",12),G()()(),z(16,"div",13)(17,"div",14)(18,"div",15),_e("click",function(){ee(t);let o=I();return te(o.handleApply(null))}),z(19,"div",16),Ie(20,"i",17),G(),z(21,"div",18)(22,"h4",19),J(23,"Default Layout"),G()(),fe(24,H4,2,0,"div",20),G(),nt(25,z4,11,8,"div",21,O4),G()()()()}if(n&2){let t=I();L(6),Je("disabled",!t.activeCustomLayout()),L(12),Ze("border-indigo-500",t.isLayoutActive(null))("border-gray-300",!t.isLayoutActive(null)),L(6),pe(t.isLayoutActive(null)?24:-1),L(),it(t.layouts())}}function q4(n,e){if(n&1){let t=Ne();z(0,"app-create-layout-modal",28),_e("close",function(){ee(t);let o=I();return te(o.showCreateModal.set(!1))})("generate",function(o){ee(t);let s=I();return s.generateLayout.emit(o),te(s.showCreateModal.set(!1))}),G()}}function W4(n,e){n&1&&(z(0,"div",34),Ie(1,"i",36),z(2,"p"),J(3,"Analyzing your layout..."),G()())}function $4(n,e){if(n&1&&Ie(0,"div",35),n&2){let t=I(2);Je("innerHTML",t.suggestions(),Ji)}}function K4(n,e){if(n&1){let t=Ne();z(0,"div",29),_e("click",function(){ee(t);let o=I();return te(o.suggestions.set(""))}),z(1,"div",30),_e("click",function(o){return ee(t),te(o.stopPropagation())}),z(2,"header",4)(3,"h3",31),Ie(4,"i",32),J(5,"AI Suggestions"),G(),z(6,"button",11),_e("click",function(){ee(t);let o=I();return te(o.suggestions.set(""))}),Ie(7,"i",12),G()(),z(8,"div",33),fe(9,W4,4,0,"div",34)(10,$4,1,1,"div",35),G()()()}if(n&2){let t=I();L(9),pe(t.isGeneratingSuggestions()?9:10)}}var G0=class n{isOpen=be.required();layouts=be.required();currentView=be.required();activeLayouts=be.required();close=ht();applyLayout=ht();deleteLayout=ht();generateLayout=ht();aiLayoutService=ze(sl);densityService=ze(ll);showCreateModal=we(!1);suggestions=we("");isGeneratingSuggestions=we(!1);activeCustomLayout=ct(()=>{let e=this.currentView(),t=this.activeLayouts(),i=null;return e==="table"&&(i=t.table),e==="list"&&(i=t.list),e==="card"&&(i=t.card),i?this.layouts().find(o=>o.id===i)??null:null});getLayoutTarget(){return this.currentView()==="table"?"table-row":this.currentView()==="list"?"list-item":"card"}isLayoutActive(e){let t=this.currentView();return t==="table"?this.activeLayouts().table===e:t==="list"?this.activeLayouts().list===e:this.activeLayouts().card===e}handleApply(e){this.applyLayout.emit({view:this.currentView(),layoutId:e}),this.close.emit()}async handleSuggestImprovements(){let e=this.activeCustomLayout();if(e){this.isGeneratingSuggestions.set(!0),this.suggestions.set("");try{let i=(await this.aiLayoutService.suggestLayoutImprovements(e.htmlTemplate,window.innerWidth,this.densityService.density())).suggestions;i=i.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),i=i.replace(/^\* (.*)$/gm,'<li class="ml-4 list-disc">$1</li>'),i.includes("<li")&&(i=`<ul>${i}</ul>`),this.suggestions.set(i)}catch(t){console.error("Error getting layout suggestions:",t),this.suggestions.set('<p class="text-red-500">Sorry, I was unable to generate suggestions at this time.</p>')}finally{this.isGeneratingSuggestions.set(!1)}}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-ui-gallery"]],inputs:{isOpen:[1,"isOpen"],layouts:[1,"layouts"],currentView:[1,"currentView"],activeLayouts:[1,"activeLayouts"]},outputs:{close:"close",applyLayout:"applyLayout",deleteLayout:"deleteLayout",generateLayout:"generateLayout"},decls:3,vars:3,consts:[[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50"],[1,"fixed","inset-0","bg-gray-900/80","flex","items-center","justify-center","z-[60]"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-4xl","m-4","flex","flex-col","max-h-[90vh]",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold"],[1,"flex","items-center","gap-2"],["title","Get AI suggestions for the active custom layout",1,"flex","items-center","gap-2","px-3","py-1.5","text-sm","font-medium","text-indigo-600","bg-indigo-100","border","border-transparent","rounded-md","hover:bg-indigo-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"pi","pi-lightbulb"],[1,"flex","items-center","gap-2","px-4","py-2","text-sm","font-medium","text-white","bg-indigo-600","border","border-transparent","rounded-md","hover:bg-indigo-700",3,"click"],[1,"pi","pi-sparkles"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","overflow-y-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6"],[1,"border-2","rounded-lg","cursor-pointer","transition-all","group","relative",3,"click"],[1,"aspect-[4/3]","bg-gray-100","flex","items-center","justify-center","rounded-t-md"],[1,"pi","pi-table","text-4xl","text-gray-400"],[1,"p-3"],[1,"font-semibold","text-sm","truncate"],[1,"absolute","top-2","right-2","bg-indigo-600","text-white","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"border-2","rounded-lg","cursor-pointer","transition-all","group","relative",3,"border-indigo-500","border-gray-300"],[1,"pi","pi-check","text-xs"],[1,"aspect-[4/3]","bg-gray-100","flex","items-center","justify-center","rounded-t-md","p-2","overflow-hidden"],[1,"transform","scale-[0.3]","origin-top-left",3,"innerHTML"],[1,"text-xs","text-gray-500","capitalize"],["title","Delete this layout",1,"absolute","top-1","right-1","p-1","rounded-full","opacity-0","group-hover:opacity-100","bg-white/50","hover:bg-red-100","text-red-500","transition-opacity",3,"click"],[1,"pi","pi-trash","text-xs"],[3,"close","generate"],[1,"fixed","inset-0","bg-gray-900/80","flex","items-center","justify-center","z-[60]",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-lg","m-4",3,"click"],[1,"text-lg","font-semibold","flex","items-center","gap-2"],[1,"pi","pi-lightbulb","text-yellow-400"],[1,"p-6"],[1,"flex","items-center","gap-3"],[1,"prose","max-w-none","text-sm",3,"innerHTML"],[1,"pi","pi-spin","pi-spinner","text-2xl","text-indigo-500"]],template:function(t,i){t&1&&(fe(0,G4,27,6,"div",0),fe(1,q4,1,0,"app-create-layout-modal"),fe(2,K4,11,1,"div",1)),t&2&&(pe(i.isOpen()?0:-1),L(),pe(i.showCreateModal()?1:-1),L(),pe((i.isGeneratingSuggestions()||i.suggestions())&&i.isOpen()?2:-1))},dependencies:[kt,z0],encapsulation:2,changeDetection:0})};var ul=class n{platformId=ze(Ms);STORAGE_KEY_THEME="smart-table-theme";STORAGE_KEY_DIR="smart-table-dir";STORAGE_KEY_LAYOUT="smart-table-layout";theme=we("system");direction=we("ltr");layout=we("full");mediaQuery;mediaQueryListener;constructor(){no(this.platformId)&&(this.theme.set(this.getInitialState(this.STORAGE_KEY_THEME,"system")),this.direction.set(this.getInitialState(this.STORAGE_KEY_DIR,"ltr")),this.layout.set(this.getInitialState(this.STORAGE_KEY_LAYOUT,"full")),this.applyTheme(this.theme()),this.applyDirection(this.direction()),Zt(()=>{let e=this.theme();localStorage.setItem(this.STORAGE_KEY_THEME,e),this.applyTheme(e)}),Zt(()=>{let e=this.direction();localStorage.setItem(this.STORAGE_KEY_DIR,e),this.applyDirection(e)}),Zt(()=>{let e=this.layout();localStorage.setItem(this.STORAGE_KEY_LAYOUT,e)}),this.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.mediaQueryListener=e=>{this.theme()==="system"&&this.applySystemTheme()},this.mediaQuery.addEventListener("change",this.mediaQueryListener))}ngOnDestroy(){no(this.platformId)&&this.mediaQuery&&this.mediaQueryListener&&this.mediaQuery.removeEventListener("change",this.mediaQueryListener)}setTheme(e){this.theme.set(e)}setDirection(e){this.direction.set(e)}setLayout(e){this.layout.set(e)}getInitialState(e,t){try{let i=localStorage.getItem(e);return i||t}catch{return t}}applyTheme(e){if(!no(this.platformId))return;let t=document.documentElement;t.classList.remove("dark"),e==="system"?this.applySystemTheme():e==="dark"&&t.classList.add("dark")}applyDirection(e){no(this.platformId)&&document.documentElement.setAttribute("dir",e)}applySystemTheme(){let e=window.matchMedia("(prefers-color-scheme: dark)").matches,t=document.documentElement;e?t.classList.add("dark"):t.classList.remove("dark")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var q0=class n{STORAGE_KEY="smartTableSavedCalendarViews";getViewsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading saved calendar views from localStorage",e),[]}}saveViewsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving calendar views to localStorage",t)}}getSavedViews(){return Ki(this.getViewsFromStorage())}saveView(e,t){let i=this.getViewsFromStorage(),o={id:new Date().toISOString(),name:e,dateFieldCode:t};return i.push(o),this.saveViewsToStorage(i),Ki(o)}deleteView(e){let t=this.getViewsFromStorage();return t=t.filter(i=>i.id!==e),this.saveViewsToStorage(t),Ki(void 0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var W0=class n{ai=ze(Zi).ai;async suggestCalendarViewName(e){let t=`You are a helpful assistant. Your task is to suggest a short, descriptive name for a saved calendar view in a data table. The view is based on a date field.

    Date Field Name: "${e}"

    Respond with a JSON object containing a single key "name".

    Example 1:
    Date Field Name: "Created Time"
    Response: { "name": "Contacts by Creation Date" }

    Example 2:
    Date Field Name: "last_activity_date"
    Response: { "name": "Contacts by Last Activity" }
    
    Example 3:
    Date Field Name: "Subscription End Date"
    Response: { "name": "Subscription Expirations" }`,o=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:t,config:{responseMimeType:"application/json",responseSchema:{type:Ct.OBJECT,properties:{name:{type:Ct.STRING}},required:["name"]}}})).text.trim();return JSON.parse(o)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var J4=(n,e)=>e.code,Y4=(n,e)=>e.id;function X4(n,e){if(n&1){let t=Ne();ne(0,"div",12)(1,"div",18)(2,"input",19),Ye("change",function(){let o=ee(t).$implicit,s=I(2);return te(s.selectField(o.code))}),oe()(),ne(3,"div",20)(4,"label",21),J(5),oe()()()}if(n&2){let t=e.$implicit,i=I(2);L(2),Ft("id","date-field-"+t.code)("checked",i.selectedFieldCode()===t.code),L(2),Ft("htmlFor","date-field-"+t.code),L(),Ue(t.name)}}function Q4(n,e){n&1&&(at(0,"i",27),J(1," Saving... "))}function Z4(n,e){n&1&&(at(0,"i",28),J(1," Save View "))}function j4(n,e){if(n&1){let t=Ne();ne(0,"div")(1,"h4",10),J(2,"2. Save this view for later"),oe(),ne(3,"div",22)(4,"input",23,0),Ye("input",function(){ee(t);let o=bi(5),s=I(2);return te(s.newViewName.set(o.value))}),oe(),ne(6,"button",24),Ye("click",function(){ee(t);let o=I(2);return te(o.suggestName())}),at(7,"i",25),oe()(),ne(8,"button",26),Ye("click",function(){ee(t);let o=I(2);return te(o.saveView())}),fe(9,Q4,2,0)(10,Z4,2,0),oe()()}if(n&2){let t=I(2);L(4),Ft("value",t.newViewName()),L(2),Ft("disabled",t.isSuggestingName()),L(),Ze("pi-sparkles",!t.isSuggestingName())("pi-spin",t.isSuggestingName())("pi-spinner",t.isSuggestingName()),L(),Ft("disabled",!t.canSave()||t.isSaving()),L(),pe(t.isSaving()?9:10)}}function eF(n,e){if(n&1){let t=Ne();ne(0,"li",29)(1,"div")(2,"p",30),J(3),oe(),ne(4,"p",31),J(5),oe()(),ne(6,"div",32)(7,"button",33),Ye("click",function(){let o=ee(t).$implicit,s=I(3);return te(s.applyView(o.dateFieldCode))}),at(8,"i",34),oe(),ne(9,"button",35),Ye("click",function(){let o=ee(t).$implicit,s=I(3);return te(s.deleteView(o.id))}),at(10,"i",36),oe()()()}if(n&2){let t=e.$implicit,i=I(3);L(3),Ue(t.name),L(2),Jt("Field: ",i.getDateFieldName(t.dateFieldCode))}}function tF(n,e){if(n&1&&(ne(0,"ul",11),nt(1,eF,11,2,"li",29,Y4),oe()),n&2){let t=I(2);L(),it(t.savedViews())}}function nF(n,e){n&1&&(ne(0,"p",14),J(1,"No saved views yet. Select a field and save it to get started."),oe())}function iF(n,e){if(n&1){let t=Ne();ne(0,"div",2),Ye("click",function(){ee(t);let o=I();return te(o.close.emit())}),ne(1,"div",3),Ye("click",function(o){return ee(t),te(o.stopPropagation())}),ne(2,"header",4)(3,"h3",5),J(4,"Configure Calendar View"),oe(),ne(5,"button",6),Ye("click",function(){ee(t);let o=I();return te(o.close.emit())}),at(6,"i",7),oe()(),ne(7,"div",8)(8,"div",9)(9,"div")(10,"h4",10),J(11,"1. Choose a date field to plot"),oe(),ne(12,"fieldset",11),nt(13,X4,6,4,"div",12,J4),oe()(),fe(15,j4,11,10,"div"),oe(),ne(16,"div",13)(17,"h4",10),J(18,"Saved Calendar Views"),oe(),fe(19,tF,3,0,"ul",11)(20,nF,2,0,"p",14),oe()(),ne(21,"footer",15)(22,"button",16),Ye("click",function(){ee(t);let o=I();return te(o.close.emit())}),J(23,"Cancel"),oe(),ne(24,"button",17),Ye("click",function(){ee(t);let o=I();return te(o.applyView(o.selectedFieldCode()))}),J(25," Apply Selected Field "),oe()()()()}if(n&2){let t=I();L(13),it(t.dateColumns()),L(2),pe(t.selectedFieldCode()?15:-1),L(4),pe(t.savedViews().length>0?19:20),L(5),Ft("disabled",!t.selectedFieldCode())}}var $0=class n{isOpen=be.required();dateColumns=be.required();close=ht();apply=ht();calendarViewConfigService=ze(q0);aiNamingService=ze(W0);savedViews=we([]);selectedFieldCode=we("");newViewName=we("");isSaving=we(!1);isSuggestingName=we(!1);canSave=ct(()=>this.selectedFieldCode()&&this.newViewName().trim().length>0);constructor(){this.loadSavedViews()}loadSavedViews(){this.calendarViewConfigService.getSavedViews().subscribe(e=>{this.savedViews.set(e)})}selectField(e){this.selectedFieldCode.set(e),this.newViewName.set("")}async suggestName(){let e=this.selectedFieldCode();if(!e)return;let t=this.dateColumns().find(i=>i.code===e);if(t){this.isSuggestingName.set(!0);try{let i=await this.aiNamingService.suggestCalendarViewName(t.name);this.newViewName.set(i.name)}catch(i){console.error("Error suggesting name:",i)}finally{this.isSuggestingName.set(!1)}}}saveView(){this.canSave()&&(this.isSaving.set(!0),this.calendarViewConfigService.saveView(this.newViewName().trim(),this.selectedFieldCode()).subscribe(()=>{this.loadSavedViews(),this.newViewName.set(""),this.isSaving.set(!1)}))}deleteView(e){this.calendarViewConfigService.deleteView(e).subscribe(()=>{this.loadSavedViews()})}applyView(e){this.apply.emit({dateFieldCode:e})}getDateFieldName(e){let t=this.dateColumns().find(i=>i.code===e);return t?t.name:e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-calendar-config-modal"]],inputs:{isOpen:[1,"isOpen"],dateColumns:[1,"dateColumns"]},outputs:{close:"close",apply:"apply"},decls:1,vars:1,consts:[["nameInput",""],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","m-4","flex","flex-col","max-h-[90vh]",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","grid","grid-cols-1","md:grid-cols-2","gap-6","overflow-y-auto"],[1,"space-y-6"],[1,"font-medium","text-gray-800","mb-2"],[1,"space-y-2"],[1,"relative","flex","items-start"],[1,"border-t","md:border-t-0","md:border-l","border-gray-200","md:pl-6","pt-6","md:pt-0"],[1,"text-sm","text-gray-500","italic"],[1,"p-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","h-6","items-center"],["name","date-field","type","radio",1,"h-4","w-4","border-gray-300","text-indigo-600","focus:ring-indigo-600",3,"change","id","checked"],[1,"ml-3","text-sm","leading-6"],[1,"font-medium","text-gray-900",3,"for"],[1,"flex","items-center","gap-2"],["type","text","placeholder","e.g., Contacts by Creation",1,"flex-grow","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"input","value"],["title","Suggest a name with AI",1,"p-2","rounded-md","bg-indigo-50","text-indigo-600","hover:bg-indigo-100","disabled:opacity-50",3,"click","disabled"],[1,"pi"],[1,"mt-3","w-full","flex","justify-center","items-center","gap-2","px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50",3,"click","disabled"],[1,"pi","pi-spin","pi-spinner"],[1,"pi","pi-save"],[1,"p-2","rounded-md","bg-gray-50","flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"flex","items-center","gap-1"],["title","Apply this view",1,"p-2","text-sm","rounded-md","text-white","bg-slate-900","hover:bg-slate-800",3,"click"],[1,"pi","pi-check"],["title","Delete this view",1,"p-2","text-sm","rounded-md","text-red-600","hover:bg-red-100",3,"click"],[1,"pi","pi-trash"]],template:function(t,i){t&1&&fe(0,iF,26,3,"div",1),t&2&&pe(i.isOpen()?0:-1)},dependencies:[kt],encapsulation:2,changeDetection:0})};var K0=class n{close=ht();startSync=ht();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-sync-options-modal"]],outputs:{close:"close",startSync:"startSync"},decls:21,vars:0,consts:[[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-md","m-4",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","flex","items-center","gap-2"],[1,"pi","pi-sync","text-indigo-500"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","text-sm","text-gray-600","space-y-4"],[1,"p-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800",3,"click"]],template:function(t,i){t&1&&(ne(0,"div",0),Ye("click",function(){return i.close.emit()}),ne(1,"div",1),Ye("click",function(s){return s.stopPropagation()}),ne(2,"header",2)(3,"h3",3),at(4,"i",4),J(5,"Enable Offline Sync?"),oe(),ne(6,"button",5),Ye("click",function(){return i.close.emit()}),at(7,"i",6),oe()(),ne(8,"div",7)(9,"p"),J(10," Switching to "),ne(11,"strong"),J(12,"SYNC"),oe(),J(13," mode will download all contact data to your device for fast, offline access. "),oe(),ne(14,"p"),J(15," The initial download may take a moment. Future loads will be instantaneous. "),oe()(),ne(16,"footer",8)(17,"button",9),Ye("click",function(){return i.close.emit()}),J(18,"Cancel"),oe(),ne(19,"button",10),Ye("click",function(){return i.startSync.emit()}),J(20," Start Sync "),oe()()()())},dependencies:[kt],encapsulation:2,changeDetection:0})};var J0=class n{persistenceService=ze(_r);STORAGE_KEY="smartTableChips";chips=we(this.loadChips());constructor(){Zt(()=>{this.saveChips(this.chips())})}addChip(e){let t=Rt({id:new Date().toISOString()},e);this.chips.update(i=>[...i,t])}removeChip(e){this.chips.update(t=>t.filter(i=>i.id!==e))}loadChips(){return this.persistenceService.loadState(this.STORAGE_KEY)??[]}saveChips(e){this.persistenceService.saveState(this.STORAGE_KEY,e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Y0=class n{ai=ze(Zi).ai;async generateChipConfig(e,t){let i=t.map(f=>({name:f.name,code:f.code,type:f.columnType||"TEXT"})),o=`You are an AI assistant that creates configuration for summary "chips" based on user requests.
    Analyze the user's prompt and determine the correct column, aggregation method, and label.
    - For requests to count specific categories (e.g., "count web leads"), use the 'count' aggregation and specify the 'filterValue'. The label should reflect this, like "Web Leads".
    - For requests to summarize a numeric column (e.g., "total revenue"), use 'sum' or 'average' and do not provide a 'filterValue'. The label should be "Total Revenue".
    - If the user just says "show revenue", assume they mean 'sum'.
    - If the user just says "count contacts", use 'count' on the primary key 'organization_id' and label it "Total Contacts".
    
    Respond with a single JSON object.

    Available columns: ${JSON.stringify(i)}
    `,c=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{systemInstruction:o,responseMimeType:"application/json",responseSchema:{type:Ct.OBJECT,properties:{label:{type:Ct.STRING},columnCode:{type:Ct.STRING},aggregation:{type:Ct.STRING,enum:["count","sum","average"]},filterValue:{type:Ct.STRING,nullable:!0}},required:["label","columnCode","aggregation"]}}})).text.trim();return JSON.parse(c)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var qC=(n,e)=>e.code;function rF(n,e){if(n&1&&(ne(0,"option",28),J(1),oe()),n&2){let t=e.$implicit;Ft("value",t.code),L(),Ue(t.name)}}function oF(n,e){if(n&1&&(ne(0,"option",28),J(1),oe()),n&2){let t=e.$implicit;Ft("value",t.code),L(),Ue(t.name)}}function aF(n,e){if(n&1&&(ne(0,"option",32),J(1),oe()),n&2){let t=e.$implicit;Ft("value",t),L(),Ue(t)}}function sF(n,e){if(n&1){let t=Ne();ne(0,"div")(1,"label",30),J(2,"Calculation"),oe(),ne(3,"select",31,2),Ye("change",function(){ee(t);let o=bi(4),s=I(3);return te(s.selectedAggregation.set(o.value))}),nt(5,aF,2,2,"option",32,an),oe()()}if(n&2){let t=I(3);L(3),Ft("value",t.selectedAggregation()),L(2),it(t.availableAggregations())}}function lF(n,e){if(n&1){let t=Ne();ne(0,"div")(1,"label",33),J(2,"Value to Count"),oe(),ne(3,"input",34,3),Ye("input",function(){ee(t);let o=bi(4),s=I(3);return te(s.filterValue.set(o.value))}),oe(),ne(5,"p",35),J(6,"Specify which value in the selected column to count (e.g., 'Web' for Lead Source)."),oe()()}if(n&2){let t=I(3);L(3),Ft("value",t.filterValue())}}function uF(n,e){if(n&1){let t=Ne();ne(0,"div",17)(1,"div")(2,"label",22),J(3,"Chip Label"),oe(),ne(4,"input",23,0),Ye("input",function(){ee(t);let o=bi(5),s=I(2);return te(s.label.set(o.value))}),oe()(),ne(6,"div")(7,"label",24),J(8,"Column"),oe(),ne(9,"select",25,1),Ye("change",function(){ee(t);let o=bi(10),s=I(2);return s.selectedColumnCode.set(o.value),te(s.selectedAggregation.set("count"))}),ne(11,"option",26),J(12,"Select a column..."),oe(),ne(13,"optgroup",27),nt(14,rF,2,2,"option",28,qC),oe(),ne(16,"optgroup",29),nt(17,oF,2,2,"option",28,qC),oe()()(),fe(19,sF,7,1,"div"),fe(20,lF,7,1,"div"),oe()}if(n&2){let t=I(2);L(4),Ft("value",t.label()),L(5),Ft("value",t.selectedColumnCode()),L(5),it(t.numericColumns()),L(3),it(t.categoricalColumns()),L(2),pe(t.selectedColumnCode()?19:-1),L(),pe(t.isCategoricalCount()?20:-1)}}function cF(n,e){if(n&1){let t=Ne();ne(0,"div",17)(1,"div")(2,"label",36),J(3,"What do you want to see?"),oe(),ne(4,"textarea",37,4),Ye("input",function(){ee(t);let o=bi(5),s=I(2);return te(s.aiPrompt.set(o.value))}),oe()()()}if(n&2){let t=I(2);L(4),Ft("value",t.aiPrompt())}}function dF(n,e){if(n&1){let t=Ne();ne(0,"button",38),Ye("click",function(){ee(t);let o=I(2);return te(o.handleManualSave())}),J(1," Add Chip "),oe()}if(n&2){let t=I(2);Ft("disabled",!t.manualFormIsValid())}}function fF(n,e){n&1&&(at(0,"i",40),ne(1,"span"),J(2,"Generating..."),oe())}function pF(n,e){n&1&&(at(0,"i",41),ne(1,"span"),J(2,"Generate & Add"),oe())}function mF(n,e){if(n&1){let t=Ne();ne(0,"button",39),Ye("click",function(){ee(t);let o=I(2);return te(o.handleAiGenerate())}),fe(1,fF,3,0)(2,pF,3,0),oe()}if(n&2){let t=I(2);Ft("disabled",!t.aiPrompt().trim()||t.isGenerating()),L(),pe(t.isGenerating()?1:2)}}function hF(n,e){if(n&1){let t=Ne();ne(0,"div",6),Ye("click",function(){ee(t);let o=I();return te(o.close.emit())}),ne(1,"div",7),Ye("click",function(o){return ee(t),te(o.stopPropagation())}),ne(2,"header",8)(3,"h3",9),J(4,"Add Summary Chip"),oe(),ne(5,"button",10),Ye("click",function(){ee(t);let o=I();return te(o.close.emit())}),at(6,"i",11),oe()(),ne(7,"div",12)(8,"div",13)(9,"nav",14)(10,"button",15),Ye("click",function(){ee(t);let o=I();return te(o.activeTab.set("manual"))}),J(11," Manual "),oe(),ne(12,"button",15),Ye("click",function(){ee(t);let o=I();return te(o.activeTab.set("ai"))}),J(13," Create with AI "),oe()()(),ne(14,"div",16),fe(15,uF,21,4,"div",17)(16,cF,6,1,"div",17),oe()(),ne(17,"footer",18)(18,"button",19),Ye("click",function(){ee(t);let o=I();return te(o.close.emit())}),J(19,"Cancel"),oe(),fe(20,dF,2,1,"button",20)(21,mF,3,2,"button",21),oe()()()}if(n&2){let t=I();L(10),Ze("border-indigo-500",t.activeTab()==="manual")("text-indigo-600",t.activeTab()==="manual"),L(2),Ze("border-indigo-500",t.activeTab()==="ai")("text-indigo-600",t.activeTab()==="ai"),L(3),pe(t.activeTab()==="manual"?15:16),L(5),pe(t.activeTab()==="manual"?20:21)}}var X0=class n{isOpen=be.required();columns=be.required();close=ht();addChip=ht();aiChipService=ze(Y0);activeTab=we("manual");label=we("");selectedColumnCode=we("");selectedAggregation=we("count");filterValue=we("");aiPrompt=we("");isGenerating=we(!1);numericColumns=ct(()=>this.columns().filter(e=>e.columnType==="numeric"));categoricalColumns=ct(()=>this.columns().filter(e=>e.columnType!=="numeric"&&e.filterable));availableAggregations=ct(()=>{let e=this.selectedColumnCode();return this.numericColumns().some(i=>i.code===e)?["sum","average","count"]:["count"]});isCategoricalCount=ct(()=>{let e=this.selectedColumnCode(),t=this.numericColumns().some(i=>i.code===e);return this.selectedAggregation()==="count"&&!t});manualFormIsValid=ct(()=>this.label().trim()&&this.selectedColumnCode());handleManualSave(){this.manualFormIsValid()&&(this.addChip.emit({label:this.label().trim(),columnCode:this.selectedColumnCode(),aggregation:this.selectedAggregation(),filterValue:this.isCategoricalCount()?this.filterValue().trim():void 0}),this.resetForms())}async handleAiGenerate(){if(this.aiPrompt().trim()){this.isGenerating.set(!0);try{let e=await this.aiChipService.generateChipConfig(this.aiPrompt(),this.columns());this.addChip.emit(e),this.resetForms()}catch(e){console.error("AI chip generation failed",e)}finally{this.isGenerating.set(!1)}}}resetForms(){this.label.set(""),this.selectedColumnCode.set(""),this.selectedAggregation.set("count"),this.filterValue.set(""),this.aiPrompt.set("")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-add-chip-modal"]],inputs:{isOpen:[1,"isOpen"],columns:[1,"columns"]},outputs:{close:"close",addChip:"addChip"},decls:1,vars:1,consts:[["labelInput",""],["columnSelect",""],["aggSelect",""],["filterValueInput",""],["promptInput",""],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-lg","m-4","flex","flex-col","max-h-[90vh]",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","overflow-y-auto"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-6"],[1,"border-transparent","text-gray-500","hover:text-gray-700","hover:border-gray-300","whitespace-nowrap","py-3","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"pt-6"],[1,"space-y-4"],[1,"p-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"disabled"],["for","chipLabel",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","chipLabel","placeholder","e.g., Total Revenue",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"input","value"],["for","chipColumn",1,"block","text-sm","font-medium","text-gray-700"],["id","chipColumn",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"change","value"],["value","","disabled",""],["label","Numeric Fields"],[3,"value"],["label","Other Fields"],["for","chipAggregation",1,"block","text-sm","font-medium","text-gray-700"],["id","chipAggregation",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"change","value"],[1,"capitalize",3,"value"],["for","chipFilterValue",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","chipFilterValue","placeholder","e.g., Web",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"input","value"],[1,"mt-1","text-xs","text-gray-500"],["for","aiPrompt",1,"block","text-sm","font-medium","text-gray-700"],["id","aiPrompt","rows","4","placeholder","e.g., 'Show total revenue' or 'Count of leads from Web'",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","font-mono",3,"input","value"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"click","disabled"],[1,"pi","pi-spin","pi-spinner"],[1,"pi","pi-sparkles"]],template:function(t,i){t&1&&fe(0,hF,22,10,"div",5),t&2&&pe(i.isOpen()?0:-1)},dependencies:[kt],encapsulation:2,changeDetection:0})};var gF=(n,e)=>e.id;function vF(n,e){if(n&1){let t=Ne();ne(0,"div",4),Ye("click",function(){let o=ee(t).$implicit,s=I();return te(s.onChipClick(o))}),ne(1,"span"),J(2),ne(3,"span",5),J(4),oe()(),ne(5,"button",6),Ye("click",function(o){let s=ee(t).$implicit,c=I();return o.stopPropagation(),te(c.removeChip.emit(s.id))}),at(6,"i",7),oe()()}if(n&2){let t=e.$implicit;Ze("cursor-pointer",t.aggregation==="count"&&t.filterValue)("hover:bg-indigo-200",t.aggregation==="count"&&t.filterValue),Ft("title",t.aggregation==="count"&&t.filterValue?"Click to filter":""),L(2),Jt("",t.label,": "),L(2),Ue(t.displayValue)}}var Q0=class n{chips=be.required();chipClicked=ht();removeChip=ht();addChip=ht();onChipClick(e){e.aggregation==="count"&&e.filterValue&&this.chipClicked.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-chip-filter-bar"]],inputs:{chips:[1,"chips"]},outputs:{chipClicked:"chipClicked",removeChip:"removeChip",addChip:"addChip"},decls:7,vars:0,consts:[[1,"flex","items-center","gap-2","flex-wrap"],[1,"flex","items-center","gap-2","pl-3","pr-1","py-1","rounded-full","text-xs","font-medium","bg-gray-200","text-gray-800",3,"cursor-pointer","hover:bg-indigo-200","title"],["title","Add another chip",1,"flex","items-center","gap-1.5","px-2","py-1","rounded-full","text-xs","font-medium","border","border-dashed","border-gray-400","text-gray-600","hover:bg-gray-100",3,"click"],[1,"pi","pi-plus","text-xs"],[1,"flex","items-center","gap-2","pl-3","pr-1","py-1","rounded-full","text-xs","font-medium","bg-gray-200","text-gray-800",3,"click","title"],[1,"font-bold"],["title","Remove chip",1,"p-1","rounded-full","hover:bg-gray-300",3,"click"],[1,"pi","pi-times","text-xs"]],template:function(t,i){t&1&&(ne(0,"div",0),nt(1,vF,7,7,"div",1,gF),ne(3,"button",2),Ye("click",function(){return i.addChip.emit()}),at(4,"i",3),ne(5,"span"),J(6,"Add"),oe()()()),t&2&&(L(),it(i.chips()))},dependencies:[kt],encapsulation:2,changeDetection:0})};var Z0=class{data=[];activeIndex=null;selection=new Set;anchorIndex=null;updateState(e,t,i,o){this.data=e,this.activeIndex=t,this.selection=i,this.anchorIndex=o}handleKeydown(e){if(this.data.length===0)return null;if(e.ctrlKey&&e.key.toLowerCase()==="a")return e.preventDefault(),this.handleSelectAll();let t=["ArrowUp","ArrowDown","Home","End"].includes(e.key),i=[" ","Enter"].includes(e.key);return!t&&!i?null:(e.preventDefault(),i?this.handleToggleSelection(e.shiftKey):t?this.handleNavigation(e.key,e.shiftKey):null)}handleSelectAll(){let e=this.activeIndex??0,t=this.anchorIndex??e;return{newActiveIndex:e,newSelection:new Set(this.data.map(i=>i.organization_id)),newAnchorIndex:t}}handleToggleSelection(e){if(this.activeIndex===null&&!e)return null;if(e){let t=this.activeIndex??0,i=this.anchorIndex??t,o=Math.min(i,t),s=Math.max(i,t),c=new Set(this.selection);for(let f=o;f<=s;f++)c.add(this.data[f].organization_id);return{newActiveIndex:t,newSelection:c,newAnchorIndex:i}}else{let t=this.activeIndex,i=new Set(this.selection),o=this.data[t].organization_id;return i.has(o)?i.delete(o):i.add(o),{newActiveIndex:t,newSelection:i,newAnchorIndex:t}}}handleNavigation(e,t){let i=this.activeIndex??-1,o=i;switch(e){case"ArrowUp":o=i<=0?0:i-1;break;case"ArrowDown":o=i<0?0:Math.min(this.data.length-1,i+1);break;case"Home":o=0;break;case"End":o=this.data.length-1;break}let s=new Set(this.selection),c=this.anchorIndex;if(t){let f=this.anchorIndex??this.activeIndex??0,m=Math.min(f,o),v=Math.max(f,o),g=new Set;for(let b=m;b<=v;b++)g.add(this.data[b].organization_id);s=g}else c=o;return{newActiveIndex:o,newSelection:s,newAnchorIndex:c}}};var eg=(n,e)=>e.value;function yF(n,e){if(n&1){let t=Ne();ne(0,"div",11),Ye("click",function(){ee(t);let o=I();return te(o.close.emit())}),oe()}}function _F(n,e){if(n&1){let t=Ne();ne(0,"button",12),Ye("click",function(){let o=ee(t).$implicit,s=I();return te(s.themeService.setTheme(o.value))}),at(1,"i"),ne(2,"span"),J(3),oe()()}if(n&2){let t=e.$implicit,i=I();qt(i.themeService.theme()===t.value?"bg-indigo-100 text-indigo-700":"bg-gray-100 hover:bg-gray-200"),Ze("ring-2",i.themeService.theme()===t.value),L(),qt(t.icon),L(2),Ue(t.label)}}function xF(n,e){if(n&1){let t=Ne();ne(0,"button",12),Ye("click",function(){let o=ee(t).$implicit,s=I();return te(s.themeService.setDirection(o.value))}),at(1,"i"),ne(2,"span"),J(3),oe()()}if(n&2){let t=e.$implicit,i=I();qt(i.themeService.direction()===t.value?"bg-indigo-100 text-indigo-700":"bg-gray-100 hover:bg-gray-200"),Ze("ring-2",i.themeService.direction()===t.value),L(),qt(t.icon),L(2),Ue(t.label)}}function CF(n,e){if(n&1){let t=Ne();ne(0,"button",12),Ye("click",function(){let o=ee(t).$implicit,s=I();return te(s.themeService.setLayout(o.value))}),at(1,"i"),ne(2,"span"),J(3),oe()()}if(n&2){let t=e.$implicit,i=I();qt(i.themeService.layout()===t.value?"bg-indigo-100 text-indigo-700":"bg-gray-100 hover:bg-gray-200"),Ze("ring-2",i.themeService.layout()===t.value),L(),qt(t.icon),L(2),Ue(t.label)}}var j0=class n{isOpen=be.required();close=ht();themeService=ze(ul);themes=[{label:"Light",value:"light",icon:"pi pi-sun"},{label:"Dark",value:"dark",icon:"pi pi-moon"},{label:"System",value:"system",icon:"pi pi-desktop"}];directions=[{label:"LTR",value:"ltr",icon:"pi pi-align-left"},{label:"RTL",value:"rtl",icon:"pi pi-align-right"}];layouts=[{label:"Full",value:"full",icon:"pi pi-window-maximize"},{label:"Boxed",value:"box",icon:"pi pi-th-large"}];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-theme-settings"]],inputs:{isOpen:[1,"isOpen"]},outputs:{close:"close"},decls:26,vars:5,consts:[[1,"fixed","inset-0","bg-black/20","z-40"],[1,"fixed","top-0","right-0","h-full","w-72","bg-white","shadow-lg","transform","transition-transform","duration-300","ease-in-out","z-50","border-l","border-gray-200"],[1,"p-4","border-b","border-gray-200","flex","justify-between","items-center"],[1,"text-lg","font-semibold","text-gray-800"],[1,"text-gray-500","hover:text-gray-700","p-1","rounded-full","hover:bg-gray-100","transition-colors",3,"click"],[1,"pi","pi-times","text-sm"],[1,"p-4","space-y-6"],[1,"font-medium","text-gray-700","mb-2"],[1,"grid","grid-cols-3","gap-2"],[1,"px-3","py-2","text-sm","rounded-md","flex","items-center","justify-center","gap-2","ring-indigo-500","transition-all","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"ring-2","class"],[1,"grid","grid-cols-2","gap-2"],[1,"fixed","inset-0","bg-black/20","z-40",3,"click"],[1,"px-3","py-2","text-sm","rounded-md","flex","items-center","justify-center","gap-2","ring-indigo-500","transition-all","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"]],template:function(t,i){t&1&&(fe(0,yF,1,0,"div",0),ne(1,"div",1)(2,"div",2)(3,"h2",3),J(4,"Theme Settings"),oe(),ne(5,"button",4),Ye("click",function(){return i.close.emit()}),at(6,"i",5),oe()(),ne(7,"div",6)(8,"div")(9,"h3",7),J(10,"Color Scheme"),oe(),ne(11,"div",8),nt(12,_F,4,7,"button",9,eg),oe()(),ne(14,"div")(15,"h3",7),J(16,"Direction"),oe(),ne(17,"div",10),nt(18,xF,4,7,"button",9,eg),oe()(),ne(20,"div")(21,"h3",7),J(22,"Layout Mode"),oe(),ne(23,"div",10),nt(24,CF,4,7,"button",9,eg),oe()()()()),t&2&&(pe(i.isOpen()?0:-1),L(),Ze("translate-x-0",i.isOpen())("translate-x-full",!i.isOpen()),L(11),it(i.themes),L(6),it(i.directions),L(6),it(i.layouts))},dependencies:[kt],encapsulation:2,changeDetection:0})};var ep=class n{exportData(e,t,i,o){switch(e){case"csv":this.exportAsCsv(t,i,o);break;case"excel":this.exportAsCsv(t,i,o,"xlsx");break;case"pdf":alert("PDF export is not implemented in this demo."),console.warn("PDF export is not implemented.");break}}exportAsCsv(e,t,i,o="csv"){if(!e||e.length===0)return;let s=",",c=t.filter(C=>C.columnType!=="ACTION"&&C.columnType!=="CHECKBOX"),f=c.map(C=>this.escapeCsvCell(C.name)).join(s),m=e.map(C=>c.map(A=>{let F;A.cellTemplate?F=A.cellTemplate.filter(B=>B.columnType!=="IMAGE").map(B=>C[B.code]).join(" "):F=C[A.code];let R=F==null?"":String(F);return this.escapeCsvCell(R)}).join(s)),v=[f,...m].join(`
`),g=new Blob(["\uFEFF"+v],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a");if(b.download!==void 0){let C=URL.createObjectURL(g);b.setAttribute("href",C);let A=i.replace(/[^a-z0-9]/gi,"_").toLowerCase(),F=new Date().toISOString().split("T")[0];b.setAttribute("download",`${A}_${F}.${o}`),document.body.appendChild(b),b.click(),document.body.removeChild(b)}}escapeCsvCell(e){return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}static \u0275fac=function(t){return new(t||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})};var bF=(n,e)=>e.key,wF=(n,e)=>e.src;function SF(n,e){if(n&1&&at(0,"img",1),n&2){let t=I();Ft("src",t.imageUrl,Fr)}}function EF(n,e){n&1&&at(0,"i",2)}function TF(n,e){if(n&1&&at(0,"i"),n&2){let t=I().$implicit;qt(t.icon+" mr-2")}}function AF(n,e){if(n&1){let t=Ne();ne(0,"button",8),Ye("click",function(){let o=ee(t).$implicit,s=I(3);return te(s.action.emit(o.key))}),fe(1,TF,1,2,"i",9),ne(2,"span"),J(3),oe()()}if(n&2){let t=e.$implicit;qt(t.class||"bg-indigo-600 hover:bg-indigo-700 text-white"),L(),pe(t.icon?1:-1),L(2),Ue(t.label)}}function DF(n,e){if(n&1&&(ne(0,"div",5),nt(1,AF,4,4,"button",7,bF),oe()),n&2){let t=I();L(),it(t.actions)}}function kF(n,e){if(n&1&&at(0,"img",12),n&2){let t=e.$implicit;Ft("src",t.src,Fr)("alt",t.alt)}}function IF(n,e){if(n&1&&(ne(0,"span",13),J(1),oe()),n&2){let t=I(2);L(),Ue(t.migration.moreText)}}function MF(n,e){if(n&1&&at(0,"i"),n&2){let t=I(3);qt(t.migration.action.icon+" mr-2")}}function FF(n,e){if(n&1){let t=Ne();ne(0,"div",14)(1,"button",15),Ye("click",function(){ee(t);let o=I(2),s=I();return te(s.action.emit(o.migration.action.key))}),fe(2,MF,1,2,"i",9),ne(3,"span"),J(4),oe()()()}if(n&2){let t=I(2);L(),qt(t.migration.action.class||"bg-cyan-500 hover:bg-cyan-600 text-white"),L(),pe(t.migration.action.icon?2:-1),L(2),Ue(t.migration.action.label)}}function NF(n,e){if(n&1&&(ne(0,"div",6)(1,"p",10),J(2),oe(),ne(3,"div",11),nt(4,kF,1,2,"img",12,wF),fe(6,IF,2,1,"span",13),oe(),fe(7,FF,5,4,"div",14),oe()),n&2){let t=I();L(2),Ue(t.migration.title),L(2),it(t.migration.logos),L(2),pe(t.migration.moreText?6:-1),L(),pe(t.migration.action?7:-1)}}function RF(n,e){if(n&1&&(ne(0,"div",0),fe(1,SF,1,1,"img",1)(2,EF,1,0,"i",2),ne(3,"h2",3),J(4),oe(),ne(5,"p",4),J(6),oe(),fe(7,DF,3,0,"div",5),fe(8,NF,8,3,"div",6),oe()),n&2){let t=e;L(),pe(t.imageUrl?1:2),L(3),Ue(t.title),L(2),Ue(t.subtitle),L(),pe(t.actions&&t.actions.length>0?7:-1),L(),pe(t.migration!=null&&t.migration.enabled?8:-1)}}var tp=class n{config=be.required();action=ht();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-empty-view"]],inputs:{config:[1,"config"]},outputs:{action:"action"},decls:1,vars:1,consts:[[1,"flex","flex-col","items-center","justify-center","h-full","text-center","p-8"],["alt","",1,"h-40","w-40","mb-6","text-gray-400",3,"src"],[1,"pi","pi-inbox","text-6xl","text-gray-400","mb-6"],[1,"text-2xl","font-semibold","text-gray-800"],[1,"mt-2","max-w-lg","text-gray-600"],[1,"mt-8","flex","items-center","justify-center","gap-4"],[1,"mt-12","p-8","rounded-lg","bg-cyan-50","w-full","max-w-2xl","border","border-cyan-200"],[1,"px-5","py-2.5","text-sm","font-semibold","rounded-md","shadow-sm","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600","flex","items-center",3,"class"],[1,"px-5","py-2.5","text-sm","font-semibold","rounded-md","shadow-sm","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600","flex","items-center",3,"click"],[3,"class"],[1,"font-medium","text-gray-700"],[1,"mt-4","flex","justify-center","items-center","gap-6","flex-wrap"],[1,"h-8","object-contain",3,"src","alt"],[1,"text-sm","text-gray-600"],[1,"mt-8"],[1,"px-8","py-2.5","text-sm","font-semibold","rounded-md","shadow-sm","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-cyan-600","flex","items-center","mx-auto",3,"click"]],template:function(t,i){if(t&1&&fe(0,RF,9,5,"div",0),t&2){let o;pe((o=i.config())?0:-1,o)}},dependencies:[kt],encapsulation:2,changeDetection:0})};var Wu={user:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" /></svg>',envelope:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" /></svg>',phone:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" /></svg>',lock:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" /></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>',eye:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg>',eyeSlash:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88" /></svg>',calendar:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z" /></svg>',shieldCheck:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-2.104 2.703c-.625.266-1.36.451-2.16.52a25.575 25.575 0 0 1-4.2.067c-.792-.069-1.518-.254-2.128-.52a3.745 3.745 0 0 1-2.115-2.737c-.632-.586-1.059-1.487-1.059-2.398 0-3.351 1.956-6.305 4.965-7.74a1.8 1.8 0 0 1 1.623 0A10.25 10.25 0 0 1 12 6.75a10.25 10.25 0 0 1 5.378-2.673 1.8 1.8 0 0 1 1.623 0c3.009 1.435 4.965 4.39 4.965 7.74 0 .911-.427 1.812-1.059 2.398Z" /></svg>',checkCircle:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>',briefcase:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 2.25 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z" /></svg>',documentText:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" /></svg>',cog:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 0 1 0 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 0 1 0-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg>',trash:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" /></svg>',plus:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>',bold:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 4.5h7.125c3.314 0 6 2.686 6 6 0 1.956-.935 3.69-2.39 4.79C18.935 16.31 19.875 18.044 19.875 20c0 3.314-2.686 6-6 6H6.75A.75.75 0 0 1 6 25.25v-20a.75.75 0 0 1 .75-.75Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 14.25h5.625c1.657 0 3 1.343 3 3s-1.343 3-3 3H6.75v-6Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 6h5.625c1.657 0 3 1.343 3 3s-1.343 3-3 3H6.75v-6Z" /></svg>',italic:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M5.25 4.5h3.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75H6.557l4.606 10.5h1.587a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75H8.25a.75.75 0 0 1-.75-.75v-.75a.75.75 0 0 1 .75-.75h2.443L6.087 6H4.5a.75.75 0 0 1-.75-.75v-.75a.75.75 0 0 1 .75-.75Z" /></svg>',underline:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M17.25 4.5v7.125a5.25 5.25 0 1 1-10.5 0V4.5M3 19.5h18" /></svg>',strikethrough:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z" /></svg>',subscript:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18h2v2h-2zm-3-5l-4 4m0-4l4 4M5 7h8v10H5z" /></svg>',superscript:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M18 6h2v2h-2zm-3 5l-4 4m0-4l4 4M5 17h8V7H5z" /></svg>',fontColor:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.75H14.25L20.25 18H18L16.5 14.25H7.5L6 18H3.75L9.75 3.75ZM8.25 12H15.75L12 5.25L8.25 12Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M3 21H21" stroke="currentColor" stroke-width="3" /></svg>',highlight:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 3.487a2.25 2.25 0 1 1 3.182 3.182L7.394 19.319l-4.144 1.243 1.243-4.144L16.862 3.487Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5h5.25" /></svg>',listBullet:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 17.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" /></svg>',listOrdered:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 12h9.75m-9.75 6h9.75M4.5 6h.75M4.5 12h.75m-1.5 6h1.5" /></svg>',undo:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3" /></svg>',redo:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3" /></svg>',code:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5" /></svg>',inlineCode:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.25 9.75L16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z" /></svg>',alignLeft:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" /></svg>',alignCenter:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>',alignRight:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>',alignJustify:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>',indent:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12m-1.5-5.25 3 3m0 0-3 3m3-3h-7.5" /></svg>',outdent:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12m9-5.25-3 3m0 0 3 3m-3-3h7.5" /></svg>',language:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802" /></svg>',magic:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" /></svg>',layers:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.429 9.75 2.25 12l4.179 2.25m0-4.5 5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0 4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0-5.571 3-5.571-3" /></svg>',tag:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6Z" /></svg>',percent:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" /></svg>',cursor:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59" /></svg>',chevronRight:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" /></svg>'};var PF={sync:{prime:"pi pi-sync",fontawesome:"fa-solid fa-sync",material:"sync"},spinner:{prime:"pi pi-spin pi-spinner",fontawesome:"fa-solid fa-spinner fa-spin",material:"autorenew"},filter:{prime:"pi pi-filter",fontawesome:"fa-solid fa-filter",material:"filter_list"},tag:{prime:"pi pi-tag",fontawesome:"fa-solid fa-tag",material:"local_offer"},table:{prime:"pi pi-table",fontawesome:"fa-solid fa-table",material:"table_chart"},freeze:{prime:"pi pi-snowflake",fontawesome:"fa-regular fa-snowflake",material:"ac_unit"},columns:{prime:"pi pi-th-large",fontawesome:"fa-solid fa-table-columns",material:"view_column"},database:{prime:"pi pi-database",fontawesome:"fa-solid fa-database",material:"storage"},download:{prime:"pi pi-download",fontawesome:"fa-solid fa-download",material:"download"},eye:{prime:"pi pi-eye",fontawesome:"fa-regular fa-eye",material:"visibility"},sparkles:{prime:"pi pi-sparkles",fontawesome:"fa-solid fa-wand-magic-sparkles",material:"auto_awesome"},add:{prime:"pi pi-plus",fontawesome:"fa-solid fa-plus",material:"add"},search:{prime:"pi pi-search",fontawesome:"fa-solid fa-search",material:"search"},"chevron-down":{prime:"pi pi-chevron-down",fontawesome:"fa-solid fa-chevron-down",material:"expand_more"},calendar:{prime:"pi pi-calendar",fontawesome:"fa-regular fa-calendar",material:"calendar_today"},user:{prime:"pi pi-user",fontawesome:"fa-regular fa-user",material:"person"},check:{prime:"pi pi-check",fontawesome:"fa-solid fa-check",material:"check"},times:{prime:"pi pi-times",fontawesome:"fa-solid fa-times",material:"close"},trash:{prime:"pi pi-trash",fontawesome:"fa-solid fa-trash",material:"delete"},pencil:{prime:"pi pi-pencil",fontawesome:"fa-solid fa-pencil",material:"edit"},refresh:{prime:"pi pi-refresh",fontawesome:"fa-solid fa-rotate",material:"refresh"},home:{prime:"pi pi-home",fontawesome:"fa-solid fa-home",material:"home"},cog:{prime:"pi pi-cog",fontawesome:"fa-solid fa-cog",material:"settings"},envelope:{prime:"pi pi-envelope",fontawesome:"fa-solid fa-envelope",material:"email"},lock:{prime:"pi pi-lock",fontawesome:"fa-solid fa-lock",material:"lock"},folder:{prime:"pi pi-folder",fontawesome:"fa-solid fa-folder",material:"folder"},file:{prime:"pi pi-file",fontawesome:"fa-solid fa-file",material:"description"},list:{prime:"pi pi-list",fontawesome:"fa-solid fa-list",material:"list"},bars:{prime:"pi pi-bars",fontawesome:"fa-solid fa-bars",material:"menu"},"ellipsis-v":{prime:"pi pi-ellipsis-v",fontawesome:"fa-solid fa-ellipsis-vertical",material:"more_vert"},"ellipsis-h":{prime:"pi pi-ellipsis-h",fontawesome:"fa-solid fa-ellipsis",material:"more_horiz"}},$u=class{static getIcon(e,t="prime"){if(!e)return{class:"",type:t};let i=PF[e];return i?t==="prime"&&i.prime?{class:i.prime,type:"prime"}:t==="fontawesome"&&i.fontawesome?{class:i.fontawesome,type:"fontawesome"}:t==="material"&&i.material?{class:i.material,type:"material"}:t==="svg"&&i.svg?{content:i.svg,type:"svg"}:i.prime?{class:i.prime,type:"prime"}:i.fontawesome?{class:i.fontawesome,type:"fontawesome"}:i.material?{class:i.material,type:"material"}:i.svg?{content:i.svg,type:"svg"}:{class:"",type:t}:t==="svg"&&Wu[e]?{content:Wu[e],type:"svg"}:{class:"",type:t}}};var VF=(n,e)=>[n,e];function LF(n,e){if(n&1&&Ie(0,"span",6),n&2){let t=I(2);qt(t.iconSizeClass()),Je("innerHTML",t.sanitizedIconHtml(),Ji)}}function BF(n,e){if(n&1&&Ie(0,"i"),n&2){let t=I(),i=I();qt(t.class+" "+i.fontSizeClass()),ri("font-size",i.customIconSize())}}function OF(n,e){if(n&1&&fe(0,LF,1,3,"span",4)(1,BF,1,4,"i",5),n&2){let t=e;pe(t.type==="svg"&&t.content?0:t.class?1:-1)}}function HF(n,e){if(n&1&&(z(0,"span"),J(1),G()),n&2){let t=I();L(),Ue(t.label())}}function UF(n,e){if(n&1&&(z(0,"kbd",7),J(1),G()),n&2){let t=I();Ze("text-[10px]",t.size()==="sm")("text-xs",t.size()!=="sm"),L(),Jt(" ",t.shortcut()," ")}}function zF(n,e){if(n&1&&Ie(0,"span",10),n&2){let t=I(2);Ze("rotate-180",t.endIconRotate()),Je("innerHTML",t.sanitizedEndIconHtml(),Ji)}}function GF(n,e){if(n&1&&Ie(0,"i"),n&2){let t=I(),i=I();qt(t.class),Ze("ml-1",!0)("text-xs",!0)("transition-transform",!0)("rotate-180",i.endIconRotate())}}function qF(n,e){if(n&1&&fe(0,zF,1,3,"span",8)(1,GF,1,10,"i",9),n&2){let t=e;pe(t.type==="svg"&&t.content?0:t.class?1:-1)}}function WF(n,e){n&1&&Ie(0,"div",3)}var np=class n{icon=be();iconClass=be();iconName=be();iconType=be("prime");endIconName=be();customSize=be();customIconSize=be();customColor=be();customBgColor=be();label=be();showLabel=be(!0);shortcut=be();endIconClass=be();endIconRotate=be(!1);size=be("sm");color=be("default");withSeparator=be(!1);active=be(!1);disabled=be(!1);clicked=ht();sanitizer=ze(Lc);resolvedIcon=ct(()=>this.iconClass()?{class:this.iconClass(),type:"prime"}:this.iconName()?$u.getIcon(this.iconName(),this.iconType()):this.icon()?{content:Wu[this.icon()],type:"svg"}:{class:"",type:"prime"});resolvedEndIcon=ct(()=>this.endIconClass()?{class:this.endIconClass(),type:"prime"}:this.endIconName()?$u.getIcon(this.endIconName(),this.iconType()):null);sanitizedIconHtml=ct(()=>{let e=this.resolvedIcon();if(e.type==="svg"&&e.content){let t=e.content;return t=t.replace(/class="([^"]*)"/,(i,o)=>`class="${o.replace(/w-\d+/,"").replace(/h-\d+/,"")} w-full h-full"`),this.sanitizer.bypassSecurityTrustHtml(t)}return null});sanitizedEndIconHtml=ct(()=>{let e=this.resolvedEndIcon();return e?.type==="svg"&&e.content?this.sanitizer.bypassSecurityTrustHtml(e.content):null});constructor(){}sizeClasses=ct(()=>{if(this.customSize())return"";switch(this.size()){case"lg":return"px-4 py-2 text-sm";case"md":return"px-3 py-1.5 text-xs";case"sm":default:return"px-2 py-1 text-[11px]"}});colorClasses=ct(()=>{if(this.customBgColor())return"";if(this.active())return"bg-indigo-50 border-indigo-200 text-indigo-700 hover:bg-indigo-100 hover:border-indigo-300";switch(this.color()){case"primary":return"bg-indigo-600 border-indigo-600 text-white hover:bg-indigo-700 hover:border-indigo-700";case"danger":return"bg-red-50 border-red-200 text-red-700 hover:bg-red-100 hover:border-red-300";case"default":default:return"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300"}});iconSizeClass=ct(()=>{switch(this.size()){case"lg":return"w-5 h-5";case"md":return"w-4 h-4";case"sm":default:return"w-3.5 h-3.5"}});fontSizeClass=ct(()=>{if(this.customIconSize())return"";switch(this.size()){case"lg":return"text-lg";case"md":return"text-base";case"sm":default:return"text-sm"}});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-toolbar-button"]],inputs:{icon:[1,"icon"],iconClass:[1,"iconClass"],iconName:[1,"iconName"],iconType:[1,"iconType"],endIconName:[1,"endIconName"],customSize:[1,"customSize"],customIconSize:[1,"customIconSize"],customColor:[1,"customColor"],customBgColor:[1,"customBgColor"],label:[1,"label"],showLabel:[1,"showLabel"],shortcut:[1,"shortcut"],endIconClass:[1,"endIconClass"],endIconRotate:[1,"endIconRotate"],size:[1,"size"],color:[1,"color"],withSeparator:[1,"withSeparator"],active:[1,"active"],disabled:[1,"disabled"]},outputs:{clicked:"clicked"},decls:7,vars:25,consts:[[1,"flex","items-center","gap-2"],["type","button",1,"flex","items-center","gap-1.5","rounded","shadow-sm","border","active:scale-95","transition-all","font-medium","select-none","justify-center",3,"click","ngClass","title","disabled"],[1,"hidden","sm:inline-block","ml-1","px-1","py-0.5","leading-none","font-sans","bg-white/50","border","border-black/10","rounded-sm","opacity-60",3,"text-[10px]","text-xs"],[1,"h-5","w-px","bg-gray-300","mx-1"],[3,"innerHTML","class"],[3,"class","fontSize"],[3,"innerHTML"],[1,"hidden","sm:inline-block","ml-1","px-1","py-0.5","leading-none","font-sans","bg-white/50","border","border-black/10","rounded-sm","opacity-60"],[1,"transition-transform","ml-1","w-3","h-3","flex","items-center","justify-center",3,"innerHTML","rotate-180"],[3,"class","ml-1","text-xs","transition-transform","rotate-180"],[1,"transition-transform","ml-1","w-3","h-3","flex","items-center","justify-center",3,"innerHTML"]],template:function(t,i){if(t&1&&(z(0,"div",0)(1,"button",1),_e("click",function(s){return i.clicked.emit(s)}),fe(2,OF,2,1),fe(3,HF,2,1,"span"),fe(4,UF,2,5,"kbd",2),fe(5,qF,2,1),G(),fe(6,WF,1,0,"div",3),G()),t&2){let o,s;L(),ri("width",i.customSize())("height",i.customSize())("color",i.customColor())("background-color",i.customBgColor())("border-color",i.customBgColor()),Ze("opacity-50",i.disabled())("cursor-not-allowed",i.disabled()),Je("ngClass",pv(22,VF,i.sizeClasses(),i.colorClasses()))("title",i.label()||"")("disabled",i.disabled()),L(),pe((o=i.resolvedIcon())?2:-1,o),L(),pe(i.label()&&i.showLabel()?3:-1),L(),pe(i.shortcut()?4:-1),L(),pe((s=i.resolvedEndIcon())?5:-1,s),L(),pe(i.withSeparator()?6:-1)}},dependencies:[kt,hv],encapsulation:2})};var $F=["scrollContainer"],KF=()=>[1,2,3,4,5,6],WC=(n,e)=>e.key,JF=(n,e)=>e.name;function YF(n,e){if(n&1){let t=Ne();z(0,"app-toolbar-button",40),_e("clicked",function(){ee(t);let o=I().$implicit,s=I(2);return te(s.handleToolbarAction(o.key))}),G()}if(n&2){let t=I().$implicit,i=I();Je("iconClass",t.icon)("label",t.label)("showLabel",i.config.toolbarButtonMode!=="iconOnly")("color",t.key==="add:contacts"?"primary":"default")("title",(i.config.toolbarButtonMode==="iconOnly",t.label))}}function XF(n,e){if(n&1&&fe(0,YF,1,5,"app-toolbar-button",39),n&2){let t=e.$implicit;pe(t.key!=="toggle:config-sidebar"&&t.key!=="refresh"&&t.key!=="toggle:filter-sidebar"?0:-1)}}function QF(n,e){n&1&&Ie(0,"i",45)}function ZF(n,e){if(n&1){let t=Ne();z(0,"a",48),_e("click",function(){ee(t);let o=I(3);return o.showAddChipModal.set(!0),te(o.showFilterMenu.set(!1))}),Ie(1,"i",49),z(2,"span"),J(3,"Add Summary Chip"),G()()}}function jF(n,e){n&1&&Ie(0,"i",45)}function eN(n,e){if(n&1){let t=Ne();z(0,"a",42),_e("click",function(){ee(t);let o=I(3);return o.showColumnChooser.set(!o.showColumnChooser()),te(o.showFilterMenu.set(!1))}),z(1,"span",43),Ie(2,"i",50),J(3," Columns"),G(),fe(4,jF,1,0,"i",45),G()}if(n&2){let t=I(3);L(4),pe(t.showColumnChooser()?4:-1)}}function tN(n,e){if(n&1){let t=Ne();z(0,"div",15)(1,"div",41)(2,"a",42),_e("click",function(){ee(t);let o=I(2);return o.handleToolbarAction("toggle:filter-sidebar"),te(o.showFilterMenu.set(!1))}),z(3,"span",43),Ie(4,"i",44),J(5," Advanced Filters"),G(),fe(6,QF,1,0,"i",45),G(),fe(7,ZF,4,0,"a",46),fe(8,eN,5,1,"a",47),G()()}if(n&2){let t=I(),i=I();L(6),pe(i.showFilterSidebar()?6:-1),L(),pe(t.config.enableChipFilters?7:-1),L(),pe(t.config.enableColumnChooser?8:-1)}}function nN(n,e){if(n&1){let t=Ne();z(0,"app-column-chooser",51),_e("visibilityChange",function(o){ee(t);let s=I(2);return te(s.toggleColumnVisibility(o))})("orderChange",function(o){ee(t);let s=I(2);return te(s.handleAllColumnsOrderChange(o))}),G()}if(n&2){let t=I(2);Je("allColumns",t.chooserColumns())("visibleColumns",t.visibleTableColumns())}}function iN(n,e){n&1&&Ie(0,"div",17)}function rN(n,e){n&1&&Ie(0,"i",45)}function oN(n,e){if(n&1){let t=Ne();z(0,"a",42),_e("click",function(){let o=ee(t).$implicit,s=I(4);return s.handleCardsPerRowChange(o),te(s.showCardsPerRowChooser.set(!1))}),z(1,"span"),J(2),G(),fe(3,rN,1,0,"i",45),G()}if(n&2){let t=e.$implicit,i=I(3);L(2),Rc("",t," ",t===1?"Card":"Cards"," / row"),L(),pe(((i.config.cardViewConfig==null?null:i.config.cardViewConfig.cardsPerRow)??4)===t?3:-1)}}function aN(n,e){n&1&&(z(0,"div",53)(1,"div",41),nt(2,oN,4,3,"a",47,an),G()()),n&2&&(L(2),it(ta(0,KF)))}function sN(n,e){if(n&1){let t=Ne();z(0,"div",13),_e("clickOutside",function(){ee(t);let o=I(2);return te(o.showCardsPerRowChooser.set(!1))}),z(1,"app-toolbar-button",52),_e("clicked",function(){ee(t);let o=I(2);return te(o.showCardsPerRowChooser.set(!o.showCardsPerRowChooser()))}),G(),fe(2,aN,4,1,"div",53),G()}if(n&2){let t=I(),i=I();L(),Je("label",((t.config.cardViewConfig==null?null:t.config.cardViewConfig.cardsPerRow)??4)+" Cards")("active",i.showCardsPerRowChooser()),L(),pe(i.showCardsPerRowChooser()?2:-1)}}function lN(n,e){if(n&1){let t=Ne();z(0,"div",20)(1,"div",41)(2,"a",55),_e("click",function(){ee(t);let o=I(3);return te(o.handleFreezeColumns(0))}),J(3,"Unfreeze All"),G(),z(4,"a",55),_e("click",function(){ee(t);let o=I(3);return te(o.handleFreezeColumns(1))}),J(5,"Freeze 1 Column"),G(),z(6,"a",55),_e("click",function(){ee(t);let o=I(3);return te(o.handleFreezeColumns(2))}),J(7,"Freeze 2 Columns"),G(),z(8,"a",55),_e("click",function(){ee(t);let o=I(3);return te(o.handleFreezeColumns(3))}),J(9,"Freeze 3 Columns"),G()()()}}function uN(n,e){if(n&1){let t=Ne();z(0,"div",13),_e("clickOutside",function(){ee(t);let o=I(2);return te(o.showFreezeOptions.set(!1))}),z(1,"app-toolbar-button",54),_e("clicked",function(){ee(t);let o=I(2);return te(o.showFreezeOptions.set(!o.showFreezeOptions()))}),G(),fe(2,lN,10,0,"div",20),G()}if(n&2){let t=I(2);L(),Je("active",t.showFreezeOptions()),L(),pe(t.showFreezeOptions()?2:-1)}}function cN(n,e){n&1&&Ie(0,"i",45)}function dN(n,e){if(n&1){let t=Ne();z(0,"a",57),_e("click",function(){let o=ee(t).$implicit,s=I(3);return s.changeDataStrategy(o),te(s.showStrategyChooser.set(!1))}),z(1,"span"),J(2),G(),fe(3,cN,1,0,"i",45),G()}if(n&2){let t=e.$implicit,i=I(2),o=I();Je("title",o.strategyDescriptions[t]),L(2),Ue(t),L(),pe(i.config.dataStrategy===t?3:-1)}}function fN(n,e){if(n&1&&(z(0,"div",20)(1,"div",41),nt(2,dN,4,3,"a",56,an),G()()),n&2){let t=I(2);L(2),it(t.dataStrategies)}}function pN(n,e){if(n&1){let t=Ne();z(0,"a",48),_e("click",function(){let o=ee(t).$implicit,s=I(4);return te(s.handleExport(o.key))}),Ie(1,"i"),z(2,"span"),J(3),G()()}if(n&2){let t=e.$implicit;L(),qt(t.icon),L(2),Ue(t.label)}}function mN(n,e){if(n&1&&(z(0,"div",53)(1,"div",41),nt(2,pN,4,3,"a",46,WC),G()()),n&2){let t=I(2);L(2),it(t.config.exportConfig.options)}}function hN(n,e){if(n&1){let t=Ne();z(0,"div",13),_e("clickOutside",function(){ee(t);let o=I(2);return te(o.showExportOptions.set(!1))}),z(1,"app-toolbar-button",58),_e("clicked",function(){ee(t);let o=I(2);return te(o.showExportOptions.set(!o.showExportOptions()))}),G(),fe(2,mN,4,0,"div",53),G()}if(n&2){let t=I(2);L(),Je("endIconRotate",t.showExportOptions())("active",t.showExportOptions()),L(),pe(t.showExportOptions()?2:-1)}}function gN(n,e){if(n&1){let t=Ne();z(0,"a",48),_e("click",function(){ee(t);let o=I(3);return o.handleManualSync(),te(o.showViewOptions.set(!1))}),Ie(1,"i",69),z(2,"span"),J(3),G()(),Ie(4,"div",62)}if(n&2){let t=I(3);L(),Ze("pi-spin",t.syncService.isSyncing())("pi-spinner",t.syncService.isSyncing())("pi-sync",!t.syncService.isSyncing()),L(2),Ue(t.syncService.isSyncing()?"Syncing...":"Refresh Data")}}function vN(n,e){if(n&1){let t=Ne();z(0,"button",70),_e("click",function(){let o=ee(t).$implicit,s=I(3);return te(s.setDensity(o.name))}),Ie(1,"i",69),z(2,"span"),J(3),oi(4,"titlecase"),G()()}if(n&2){let t=e.$implicit,i=I(3);Ze("bg-indigo-50",i.currentDensity()===t.name)("border-indigo-200",i.currentDensity()===t.name)("text-indigo-700",i.currentDensity()===t.name)("border-gray-200",i.currentDensity()!==t.name),L(),qt(i.getDensityIcon(t.name)),L(2),Ue(ru(4,11,t.name))}}function yN(n,e){n&1&&Ie(0,"i",45)}function _N(n,e){n&1&&Ie(0,"i",45)}function xN(n,e){n&1&&Ie(0,"i",45)}function CN(n,e){n&1&&Ie(0,"i",45)}function bN(n,e){n&1&&Ie(0,"i",45)}function wN(n,e){if(n&1){let t=Ne();z(0,"div",23)(1,"div",41),fe(2,gN,5,7),z(3,"div",59),J(4,"Row Sizing"),G(),z(5,"div",60),nt(6,vN,5,13,"button",61,JF),G(),Ie(8,"div",62),z(9,"div",59),J(10,"View Mode"),G(),z(11,"a",42),_e("click",function(){ee(t);let o=I(2);return te(o.changeView("table"))}),z(12,"span",43),Ie(13,"i",63),J(14," Table"),G(),fe(15,yN,1,0,"i",45),G(),z(16,"a",42),_e("click",function(){ee(t);let o=I(2);return te(o.changeView("card"))}),z(17,"span",43),Ie(18,"i",64),J(19," Card"),G(),fe(20,_N,1,0,"i",45),G(),z(21,"a",42),_e("click",function(){ee(t);let o=I(2);return te(o.changeView("list"))}),z(22,"span",43),Ie(23,"i",65),J(24," List"),G(),fe(25,xN,1,0,"i",45),G(),Ie(26,"div",62),z(27,"a",42),_e("click",function(){ee(t);let o=I(2);return te(o.changeView("bi"))}),z(28,"span",43),Ie(29,"i",66),J(30," BI Dashboard"),G(),fe(31,CN,1,0,"i",45),G(),z(32,"a",42),_e("click",function(){ee(t);let o=I(2);return te(o.changeView("calendar"))}),z(33,"span",43),Ie(34,"i",67),J(35," Calendar"),G(),fe(36,bN,1,0,"i",45),G(),Ie(37,"div",62),z(38,"a",48),_e("click",function(){ee(t);let o=I(2);return te(o.resetViewAndFilters())}),Ie(39,"i",68),z(40,"span"),J(41,"Reset View & Filters"),G()()()()}if(n&2){let t=I(),i=I();L(2),pe(t.config.dataStrategy==="SYNC"?2:-1),L(4),it(t.config.sizerConfig.densities),L(9),pe(i.viewMode()==="table"?15:-1),L(5),pe(i.viewMode()==="card"?20:-1),L(5),pe(i.viewMode()==="list"?25:-1),L(6),pe(i.viewMode()==="bi"?31:-1),L(5),pe(i.viewMode()==="calendar"?36:-1)}}function SN(n,e){if(n&1){let t=Ne();z(0,"div",15)(1,"div",41)(2,"a",48),_e("click",function(){ee(t);let o=I(2);return te(o.handleAiAction("adopt"))}),Ie(3,"i",71),z(4,"span"),J(5,"Auto-Adopt Layout"),G()(),z(6,"a",48),_e("click",function(){ee(t);let o=I(2);return te(o.handleAiAction("narrate"))}),Ie(7,"i",72),z(8,"span"),J(9,"Generate Narration"),G()(),z(10,"a",48),_e("click",function(){ee(t);let o=I(2);return te(o.handleAiAction("insights"))}),Ie(11,"i",73),z(12,"span"),J(13,"Suggest Insights"),G()(),z(14,"a",48),_e("click",function(){ee(t);let o=I(2);return te(o.handleAiAction("metrics"))}),Ie(15,"i",74),z(16,"span"),J(17,"Get Quick Metrics"),G()(),Ie(18,"div",62),z(19,"a",48),_e("click",function(){ee(t);let o=I(2);return o.showUiGallery.set(!0),te(o.showAiActions.set(!1))}),Ie(20,"i",75),z(21,"span"),J(22,"Customize UI..."),G()()()()}}function EN(n,e){if(n&1){let t=Ne();z(0,"div",25)(1,"app-chip-filter-bar",76),_e("addChip",function(){ee(t);let o=I(2);return te(o.showAddChipModal.set(!0))})("removeChip",function(o){ee(t);let s=I(2);return te(s.handleRemoveChip(o))})("chipClicked",function(o){ee(t);let s=I(2);return te(s.handleApplyChipFilter(o))}),G()()}if(n&2){let t=I(2);L(),Je("chips",t.calculatedChips())}}function TN(n,e){if(n&1){let t=Ne();z(0,"div",26)(1,"app-paginator",77),_e("pageChange",function(o){ee(t);let s=I(2);return te(s.handlePageChange(o))})("pageSizeChange",function(o){ee(t);let s=I(2);return te(s.handlePageSizeChange(o))})("autoSizingToggle",function(){ee(t);let o=I(2);return te(o.handleAutoSizingToggle())})("chatbotToggle",function(){ee(t);let o=I(2);return te(o.showChatbot.set(!0))}),G()()}if(n&2){let t=I(),i=I();L(),Je("currentPage",i.currentPage())("pageSize",i.pageSize())("totalRecords",i.totalRecords())("autoSizingEnabled",i.autoSizingEnabled())("infiniteScroll",i.isInfiniteScroll())("infiniteScrollBehavior",t.config.infiniteScrollBehavior??"append")("currentRecordCount",i.data().length)("dataStrategy",t.config.dataStrategy)("connectionStatus",i.connectionStatus())("lastSyncTime",i.syncService.lastSyncTime())("isSyncing",i.syncService.isSyncing())}}function AN(n,e){if(n&1&&Ie(0,"app-table-skeleton-loader",78),n&2){let t=I(3);Je("columns",t.visibleTableColumns())("rows",t.pageSize())}}function DN(n,e){if(n&1&&Ie(0,"app-card-skeleton-loader",79),n&2){let t=I(3);Je("count",t.pageSize())}}function kN(n,e){if(n&1&&Ie(0,"app-list-skeleton-loader",79),n&2){let t=I(3);Je("count",t.pageSize())}}function IN(n,e){n&1&&(z(0,"div",80),J(1,"Loading..."),G())}function MN(n,e){if(n&1&&fe(0,AN,1,2,"app-table-skeleton-loader",78)(1,DN,1,1,"app-card-skeleton-loader",79)(2,kN,1,1,"app-list-skeleton-loader",79)(3,IN,2,0,"div",80),n&2){let t,i=I(2);pe((t=i.viewMode())==="table"?0:t==="card"?1:t==="list"?2:3)}}function FN(n,e){if(n&1){let t=Ne();z(0,"app-empty-view",83),_e("action",function(o){ee(t);let s=I(3);return te(s.handleEmptyStateAction(o))}),G()}if(n&2){let t=I(2);Je("config",t.config.emptyStateConfig)}}function NN(n,e){n&1&&(z(0,"div",82),Ie(1,"i",84),z(2,"span",85),J(3,"No Records Found"),G()())}function RN(n,e){if(n&1&&fe(0,FN,1,1,"app-empty-view",81)(1,NN,4,0,"div",82),n&2){let t=I();pe(t.config.emptyStateConfig!=null&&t.config.emptyStateConfig.enabled?0:1)}}function PN(n,e){if(n&1){let t=Ne();z(0,"app-table-view",89),_e("sortChange",function(o){ee(t);let s=I(3);return te(s.handleSort(o))})("rowAction",function(o){ee(t);let s=I(3);return te(s.handleRowAction(o))})("rowClicked",function(o){ee(t);let s=I(3);return te(s.handleRowClick(o))})("headerAction",function(o){ee(t);let s=I(3);return te(s.handleHeaderAction(o))})("columnReorder",function(o){ee(t);let s=I(3);return te(s.handleVisibleColumnReorder(o))})("filterChange",function(o){ee(t);let s=I(3);return te(s.handleFilterChange(o))})("selectionChange",function(o){ee(t);let s=I(3);return te(s.handleSelectionChange(o))}),G()}if(n&2){let t=I(2),i=I();Je("columns",i.visibleTableColumns())("data",i.data())("sortColumn",i.sortColumn())("sortDirection",i.sortDirection())("density",i.currentDensity())("densityClass",i.currentDensitySetting().cssClass)("rowMenuConfig",t.rowMenu)("rowActions",t.rowActions)("headerMenuConfig",t.headerMenu)("enableMultiSelect",t.config.enableMultiSelect??!1)("selectedIds",i.selectedIds())("activeFilters",i.advancedFilters())("customTemplate",i.activeCustomTemplate())("loading",i.loading())("keyboardActiveRowIndex",i.keyboardActiveRowIndex())("pageSize",i.pageSize())("isInfiniteScroll",i.isInfiniteScroll())("stripedRows",t.config.stripedRows??!0)("showGridlines",t.config.showGridlines??!1)("rowHover",t.config.rowHover??!0)("footerConfig",t.config.footerConfig)}}function VN(n,e){if(n&1){let t=Ne();z(0,"app-card-view",90),_e("selectionChange",function(o){ee(t);let s=I(3);return te(s.handleSelectionChange(o))})("rowAction",function(o){ee(t);let s=I(3);return te(s.handleRowAction(o))})("rowClicked",function(o){ee(t);let s=I(3);return te(s.handleRowClick(o))}),G()}if(n&2){let t=I(2),i=I();Je("columns",i.allTableColumns())("data",i.data())("density",i.currentDensity())("densityClass",i.currentDensitySetting().cssClass)("selectedIds",i.selectedIds())("rowMenuConfig",t.rowMenu)("rowActions",t.rowActions)("enableMultiSelect",t.config.enableMultiSelect??!1)("cardViewConfig",t.config.cardViewConfig)("customTemplate",i.activeCustomTemplate())("keyboardActiveRowIndex",i.keyboardActiveRowIndex())}}function LN(n,e){if(n&1){let t=Ne();z(0,"app-list-view",91),_e("selectionChange",function(o){ee(t);let s=I(3);return te(s.handleSelectionChange(o))})("rowClicked",function(o){ee(t);let s=I(3);return te(s.handleRowClick(o))}),G()}if(n&2){let t=I(2),i=I();Je("columns",i.allTableColumns())("data",i.data())("density",i.currentDensity())("densityClass",i.currentDensitySetting().cssClass)("selectedIds",i.selectedIds())("enableMultiSelect",t.config.enableMultiSelect??!1)("customTemplate",i.activeCustomTemplate())("keyboardActiveRowIndex",i.keyboardActiveRowIndex())}}function BN(n,e){if(n&1&&Ie(0,"app-bi-view",33),n&2){let t=I(3);Je("data",t.data())("columns",t.allTableColumns())}}function ON(n,e){if(n&1&&Ie(0,"app-calendar-view",92),n&2){let t=I(4);Je("data",t.data())("columns",t.allTableColumns())("config",e)}}function HN(n,e){n&1&&(z(0,"div",93),J(1,"Please configure the calendar view first by clicking the 'Calendar' view button again."),G())}function UN(n,e){if(n&1&&fe(0,ON,1,3,"app-calendar-view",92)(1,HN,2,0,"div",93),n&2){let t,i=I(3);pe((t=i.activeCalendarConfig())?0:1,t)}}function zN(n,e){if(n&1&&fe(0,PN,1,21,"app-table-view",86)(1,VN,1,11,"app-card-view",87)(2,LN,1,8,"app-list-view",88)(3,BN,1,2,"app-bi-view",33)(4,UN,2,1),n&2){let t,i=I(2);pe((t=i.viewMode())==="table"?0:t==="card"?1:t==="list"?2:t==="bi"?3:t==="calendar"?4:-1)}}function GN(n,e){n&1&&(z(0,"div",28),Ie(1,"i",94),G())}function qN(n,e){if(n&1){let t=Ne();z(0,"footer",95)(1,"app-paginator",77),_e("pageChange",function(o){ee(t);let s=I(2);return te(s.handlePageChange(o))})("pageSizeChange",function(o){ee(t);let s=I(2);return te(s.handlePageSizeChange(o))})("autoSizingToggle",function(){ee(t);let o=I(2);return te(o.handleAutoSizingToggle())})("chatbotToggle",function(){ee(t);let o=I(2);return te(o.showChatbot.set(!0))}),G()()}if(n&2){let t=I(),i=I();ri("background-color",t.config.styleConfig==null?null:t.config.styleConfig.footerBackgroundColor),Ze("bg-white",!(t.config.styleConfig!=null&&t.config.styleConfig.footerBackgroundColor)&&!(t.config.styleConfig!=null&&t.config.styleConfig.enableTransparency)),L(),Je("currentPage",i.currentPage())("pageSize",i.pageSize())("totalRecords",i.totalRecords())("autoSizingEnabled",i.autoSizingEnabled())("infiniteScroll",i.isInfiniteScroll())("infiniteScrollBehavior",t.config.infiniteScrollBehavior??"append")("currentRecordCount",i.data().length)("dataStrategy",t.config.dataStrategy)("connectionStatus",i.connectionStatus())("lastSyncTime",i.syncService.lastSyncTime())("isSyncing",i.syncService.isSyncing())}}function WN(n,e){if(n&1){let t=Ne();z(0,"app-filter-sidebar",96),_e("close",function(){ee(t);let o=I(2);return te(o.showFilterSidebar.set(!1))})("apply",function(o){ee(t);let s=I(2);return te(s.handleApplyFilters(o))}),G()}if(n&2){let t=I(),i=I();Je("isOpen",i.showFilterSidebar())("config",t.advancedFilters)("activeFilters",i.advancedFilters())}}function $N(n,e){if(n&1){let t=Ne();z(0,"app-config-sidebar",97),_e("close",function(){ee(t);let o=I(2);return te(o.showConfigSidebar.set(!1))})("save",function(o){ee(t);let s=I(2);return te(s.handleConfigSave(o))})("resetToDefaults",function(){ee(t);let o=I(2);return te(o.handleConfigReset())}),G()}if(n&2){let t=I(2);Je("isOpen",t.showConfigSidebar())("config",t.config())}}function KN(n,e){if(n&1){let t=Ne();z(0,"app-ai-chatbot",98),_e("close",function(){ee(t);let o=I(2);return te(o.showChatbot.set(!1))})("filterApplied",function(o){ee(t);let s=I(2);return te(s.handleAiFilter(o))}),G()}if(n&2){let t=I(2);Je("data",t.data())("columns",t.allTableColumns())}}function JN(n,e){if(n&1){let t=Ne();z(0,"app-sync-options-modal",99),_e("close",function(){ee(t);let o=I(2);return te(o.showSyncOptionsModal.set(!1))})("startSync",function(){ee(t);let o=I(2);return te(o.handleStartSync())}),G()}}function YN(n,e){n&1&&(z(0,"div",100),Ie(1,"i",102),z(2,"p",103),J(3,"AI is thinking..."),G()())}function XN(n,e){if(n&1){let t=Ne();z(0,"div",104),_e("click",function(o){return ee(t),te(o.stopPropagation())}),z(1,"header",105)(2,"h3",106),Ie(3,"i",107),J(4),G(),z(5,"button",108),_e("click",function(){ee(t);let o=I(3);return te(o.aiModalContent.set(null))}),Ie(6,"i",109),G()(),Ie(7,"div",110),G()}if(n&2){let t=I(3);L(4),Ue(t.aiModalFormattedContent().title),L(3),Je("innerHTML",t.aiModalFormattedContent().content,Ji)}}function QN(n,e){if(n&1&&(z(0,"div",38),fe(1,YN,4,0,"div",100),fe(2,XN,8,2,"div",101),G()),n&2){let t,i=I(2);L(),pe(i.isAiLoading()&&!i.aiModalContent()?1:-1),L(),pe((t=i.aiModalContent())?2:-1,t)}}function ZN(n,e){if(n&1&&(z(0,"div",38)(1,"div",100),Ie(2,"i",102),z(3,"p",103),J(4),G()()()),n&2){let t=I(2);L(4),Ue(t.exportingMessage())}}function jN(n,e){if(n&1){let t=Ne();z(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4)(4,"h1",5),J(5),G(),z(6,"div",6),J(7),G()(),z(8,"div",7)(9,"div",8)(10,"div",9),Ie(11,"i",10),G(),z(12,"input",11),_e("input",function(o){ee(t);let s=I();return te(s.onGlobalSearch(o))}),G()()(),z(13,"div",12),nt(14,XF,1,1,null,null,WC),z(16,"div",13),_e("clickOutside",function(){ee(t);let o=I();return te(o.showFilterMenu.set(!1))}),z(17,"app-toolbar-button",14),_e("clicked",function(){ee(t);let o=I();return te(o.showFilterMenu.set(!o.showFilterMenu()))}),G(),fe(18,tN,9,3,"div",15),fe(19,nN,1,2,"app-column-chooser",16),G(),fe(20,iN,1,0,"div",17),fe(21,sN,3,3,"div",18),fe(22,uN,3,2,"div",18),z(23,"div",13),_e("clickOutside",function(){ee(t);let o=I();return te(o.showStrategyChooser.set(!1))}),z(24,"app-toolbar-button",19),_e("clicked",function(){ee(t);let o=I();return te(o.showStrategyChooser.set(!o.showStrategyChooser()))}),G(),fe(25,fN,4,0,"div",20),G(),fe(26,hN,3,3,"div",18),z(27,"app-toolbar-button",21),_e("clicked",function(){ee(t);let o=I();return te(o.showConfigSidebar.set(!0))}),G(),z(28,"div",13),_e("clickOutside",function(){ee(t);let o=I();return te(o.showViewOptions.set(!1))}),z(29,"app-toolbar-button",22),_e("clicked",function(){ee(t);let o=I();return te(o.showViewOptions.set(!o.showViewOptions()))}),G(),fe(30,wN,42,6,"div",23),G(),z(31,"div",13),_e("clickOutside",function(){ee(t);let o=I();return te(o.showAiActions.set(!1))}),z(32,"app-toolbar-button",24),_e("clicked",function(){ee(t);let o=I();return te(o.showAiActions.set(!o.showAiActions()))}),G(),fe(33,SN,23,0,"div",15),G()()(),fe(34,EN,2,1,"div",25),G(),fe(35,TN,2,11,"div",26),z(36,"main",27,0),_e("scroll",function(o){ee(t);let s=I();return te(s.onContentScroll(o))})("keydown",function(o){ee(t);let s=I();return te(s.handleContentKeydown(o))}),fe(38,MN,4,1)(39,RN,2,1)(40,zN,5,1),fe(41,GN,2,0,"div",28),G(),fe(42,qN,2,15,"footer",29),G(),fe(43,WN,1,3,"app-filter-sidebar",30),fe(44,$N,1,2,"app-config-sidebar",31),z(45,"app-theme-settings",32),_e("close",function(){ee(t);let o=I();return te(o.showThemeSettings.set(!1))}),G(),fe(46,KN,1,2,"app-ai-chatbot",33),z(47,"app-save-query-modal",34),_e("close",function(){ee(t);let o=I();return te(o.showSaveQueryModal.set(!1))})("save",function(o){ee(t);let s=I();return te(s.handleSaveQuery(o))}),G(),z(48,"app-ui-gallery",35),_e("close",function(){ee(t);let o=I();return te(o.showUiGallery.set(!1))})("applyLayout",function(o){ee(t);let s=I();return te(s.handleApplyLayout(o))})("deleteLayout",function(o){ee(t);let s=I();return te(s.handleDeleteLayout(o))})("generateLayout",function(o){ee(t);let s=I();return te(s.handleGenerateLayout(o))}),G(),z(49,"app-calendar-config-modal",36),_e("close",function(){ee(t);let o=I();return te(o.showCalendarConfigModal.set(!1))})("apply",function(o){ee(t);let s=I();return te(s.handleApplyCalendarConfig(o))}),G(),fe(50,JN,1,0,"app-sync-options-modal"),z(51,"app-add-chip-modal",37),_e("close",function(){ee(t);let o=I();return te(o.showAddChipModal.set(!1))})("addChip",function(o){ee(t);let s=I();return te(s.handleAddChip(o))}),G(),fe(52,QN,3,2,"div",38),fe(53,ZN,5,1,"div",38)}if(n&2){let t=e,i=I();ri("background-image",t.config.styleConfig!=null&&t.config.styleConfig.backgroundImageUrl?"url("+(t.config.styleConfig==null?null:t.config.styleConfig.backgroundImageUrl)+")":null)("background-size","cover")("background-position","center"),Ze("bg-white",!(t.config.styleConfig!=null&&t.config.styleConfig.enableTransparency))("bg-transparent",t.config.styleConfig==null?null:t.config.styleConfig.enableTransparency),L(),ri("background-color",t.config.styleConfig==null?null:t.config.styleConfig.headerBackgroundColor),Ze("bg-white",!(t.config.styleConfig!=null&&t.config.styleConfig.headerBackgroundColor)&&!(t.config.styleConfig!=null&&t.config.styleConfig.enableTransparency)),L(4),Ue(t.config.title),L(2),Jt(" ",i.totalRecords()," "),L(5),Je("value",i.globalFilterTerm()),L(2),it(t.config.toolbarActions),L(3),Je("endIconRotate",i.showFilterMenu())("active",i.showFilterMenu()||i.showFilterSidebar()||i.showColumnChooser()),L(),pe(i.showFilterMenu()?18:-1),L(),pe(i.showColumnChooser()?19:-1),L(),pe(t.config.enableChipFilters?-1:20),L(),pe(i.viewMode()==="card"?21:-1),L(),pe(i.viewMode()==="table"&&t.config.enableFreeze?22:-1),L(2),Je("label",t.config.dataStrategy)("endIconRotate",i.showStrategyChooser())("title","Current Data Strategy: "+t.config.dataStrategy),L(),pe(i.showStrategyChooser()?25:-1),L(),pe(t.config.exportConfig!=null&&t.config.exportConfig.enabled?26:-1),L(),Je("active",i.showConfigSidebar()),L(2),Je("endIconRotate",i.showViewOptions())("active",i.showViewOptions()),L(),pe(i.showViewOptions()?30:-1),L(2),Je("active",i.showAiActions()),L(),pe(i.showAiActions()?33:-1),L(),pe(t.config.enableChipFilters&&i.calculatedChips().length>0?34:-1),L(),pe(!i.isInfiniteScroll()&&(t.config.paginatorPosition==="top"||t.config.paginatorPosition==="both")?35:-1),L(3),pe(i.loading()&&i.data().length===0?38:i.data().length===0?39:40),L(3),pe(i.isInfiniteScroll()&&i.loading()&&i.data().length>0?41:-1),L(),pe(!i.isInfiniteScroll()&&(t.config.paginatorPosition==="bottom"||t.config.paginatorPosition==="both"||!t.config.paginatorPosition)?42:-1),L(),pe(i.showFilterSidebar()?43:-1),L(),pe(i.showConfigSidebar()?44:-1),L(),Je("isOpen",i.showThemeSettings()),L(),pe(i.showChatbot()?46:-1),L(),Je("isOpen",i.showSaveQueryModal()),L(),Je("isOpen",i.showUiGallery())("layouts",i.customLayouts())("currentView",i.viewMode())("activeLayouts",i.activeLayouts()),L(),Je("isOpen",i.showCalendarConfigModal())("dateColumns",i.dateColumns()),L(),pe(i.showSyncOptionsModal()?50:-1),L(),Je("isOpen",i.showAddChipModal())("columns",i.allTableColumns()),L(),pe(i.isAiLoading()||i.aiModalContent()?52:-1),L(),pe(i.isExporting()?53:-1)}}var ip=class n{configService=ze(ai);dataManager=ze(R0);syncService=ze(V0);connectionStatusService=ze(da);persistenceService=ze(_r);savedQueriesService=ze(O0);customLayoutService=ze(U0);themeService=ze(ul);densityService=ze(ll);aiSummaryService=ze(Zs);aiLayoutService=ze(sl);chipFilterService=ze(J0);exportService=ze(ep);config=this.configService.config;data=we([]);totalRecords=we(0);loading=we(!0);showAiActions=we(!1);isAiLoading=we(!1);aiModalContent=we(null);showChatbot=we(!1);showSavedQueriesMenu=we(!1);showSaveQueryModal=we(!1);savedQueries=we([]);showUiGallery=we(!1);customLayouts=we([]);activeLayouts;showCalendarConfigModal=we(!1);activeCalendarConfig=we(null);showSyncOptionsModal=we(!1);showAddChipModal=we(!1);chips=this.chipFilterService.chips;showExportOptions=we(!1);isExporting=we(!1);exportingMessage=we("");isMobile=we(window.innerWidth<640);viewMode;currentPage;pageSize;sortColumn;sortDirection;globalFilterTerm;advancedFilters;showFilterSidebar=we(!1);showConfigSidebar=we(!1);showThemeSettings=we(!1);showFreezeOptions=we(!1);showColumnChooser=we(!1);showCardsPerRowChooser=we(!1);showViewOptions=we(!1);showFilterMenu=we(!1);showMobileActionsMenu=we(!1);allTableColumns=we([]);visibleTableColumns=we([]);scrollContainer=Pc("scrollContainer");autoSizingEnabled=we(this.config().config.sizerConfig.enabled);currentDensity=this.densityService.density;currentDensitySetting=ct(()=>{let e=this.currentDensity(),t=this.config().config.sizerConfig;return t.densities.find(i=>i.name===e)??t.densities[1]});keyboardActiveRowIndex=we(null);selectionAnchorIndex=we(null);keyboardManager=new Z0;postFetchFocus=we(null);showStrategyChooser=we(!1);dataStrategies=["SYNC","ONLINE_FIRST","OFFLINE_FIRST","HYBRID"];strategyDescriptions={SYNC:"Fast, offline access. Data is synced with the server in the background.",ONLINE_FIRST:"Always fetches the latest data from the server. Falls back to local data if the server is unavailable.",OFFLINE_FIRST:"Loads instantly from your device. May not be the absolute latest data.",HYBRID:"Fetches latest data and updates your device for offline use. Falls back to local data if the server is unavailable."};isInfiniteScroll=ct(()=>this.config().config.pagingMode==="infinite");totalPages=ct(()=>{let e=this.totalRecords(),t=this.pageSize();return t<=0?0:Math.ceil(e/t)});allDataLoaded=ct(()=>{let e=this.totalRecords();return e===0&&this.data().length>0?!1:e===0?!0:(this.config().config.infiniteScrollBehavior??"append")==="append"?this.data().length>=e:this.currentPage()>=this.totalPages()});chooserColumns=ct(()=>this.allTableColumns().filter(e=>e.showOnColumnChooser!==!1));dateColumns=ct(()=>this.allTableColumns().filter(e=>e.columnType==="DATE"));connectionStatus=ct(()=>{switch(this.connectionStatusService.status()){case"Online":return{text:"Online",class:"bg-green-500"};case"Connecting":return{text:"Connecting...",class:"bg-yellow-500 animate-pulse"};case"Offline":return{text:"Offline",class:"bg-red-500"};default:return{text:"Unknown",class:"bg-gray-500"}}});aiModalFormattedContent=ct(()=>{let e=this.aiModalContent();if(!e||!e.content)return{title:"",content:""};let t=e.content;return t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),t.match(/^\* .*/m)&&(t="<ul>"+t.replace(/^\* (.*)$/gm,'<li class="ml-4 list-disc">$1</li>')+"</ul>"),{title:e.title,content:t}});activeCustomTemplate=ct(()=>{let e=this.customLayouts(),t=this.activeLayouts(),i=this.viewMode(),o=null;if(i==="card"&&(o=t.card),i==="list"&&(o=t.list),i==="table"&&(o=t.table),!o)return null;let s=e.find(c=>c.id===o);return s?s.htmlTemplate:null});calculatedChips=ct(()=>{let e=this.data(),t=this.chips();if(e.length===0||t.length===0)return[];let i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),o=new Intl.NumberFormat("en-US");return t.map(s=>{let c,f,m=e;switch(s.aggregation==="count"&&s.filterValue&&(m=e.filter(v=>String(v[s.columnCode]).toLowerCase()===String(s.filterValue).toLowerCase())),s.aggregation){case"count":c=m.length,f=o.format(c);break;case"sum":c=m.reduce((g,b)=>g+(Number(b[s.columnCode])||0),0),f=i.format(c);break;case"average":let v=m.reduce((g,b)=>g+(Number(b[s.columnCode])||0),0);c=m.length>0?v/m.length:0,f=i.format(c);break;default:c=0,f="N/A"}return rn(Rt({},s),{displayValue:f})})});searchSubject=new ks;lastFocusedElementId=we(null);initialFetchDone=we(!1);initialState;selectedIds=we(new Set);constructor(){this.initialState={viewMode:this.isMobile()?"card":"table",currentPage:1,pageSize:this.config().api.defaultPageSize,sortColumn:"organization_name",sortDirection:"asc",globalFilterTerm:"",advancedFilters:{},activeLayouts:{card:null,list:null,table:null}};let e=this.persistenceService.loadState("smartTableState");this.viewMode=we(e?.viewMode??this.initialState.viewMode),this.currentPage=we(e?.currentPage??this.initialState.currentPage),this.pageSize=we(e?.pageSize??this.initialState.pageSize),this.sortColumn=we(e?.sortColumn??this.initialState.sortColumn),this.sortDirection=we(e?.sortDirection??this.initialState.sortDirection),this.globalFilterTerm=we(e?.globalFilterTerm??this.initialState.globalFilterTerm),this.advancedFilters=we(e?.advancedFilters??this.initialState.advancedFilters),this.activeLayouts=we(e?.activeLayouts??this.initialState.activeLayouts),this.loadSavedQueries(),this.loadCustomLayouts();let t=()=>{this.loading.set(!0);let o=this.currentPage();if(this.isInfiniteScroll()&&this.config().config.infiniteScrollBehavior==="append"&&o>1)this.fetchPagesSequentially(o).then(()=>{this.initialFetchDone.set(!0)});else{let s=this.isInfiniteScroll()&&this.config().config.infiniteScrollBehavior==="replace"?1:o;this.isInfiniteScroll()&&this.config().config.infiniteScrollBehavior==="replace"&&this.currentPage.set(1),this.fetchPage(s),this.initialFetchDone.set(!0)}};Zt(()=>{this.config().config.dataStrategy==="SYNC"&&this.syncService.isPrimed()&&!this.initialFetchDone()&&(t(),this.showSyncOptionsModal()&&setTimeout(()=>this.showSyncOptionsModal.set(!1),500))},{allowSignalWrites:!0}),this.config().config.dataStrategy==="SYNC"?this.syncService.isPrimed()?t():(this.showSyncOptionsModal.set(!0),this.loading.set(!1)):t(),Zt(()=>{let o=[...this.config().columns].sort((f,m)=>f.index-m.index);this.allTableColumns.set(o);let s=o.filter(f=>f.display==="table_cell").map(f=>f.code),c=new Set(e?.visibleColumnCodes??s);this.visibleTableColumns.set(o.filter(f=>c.has(f.code)))},{allowSignalWrites:!0}),this.searchSubject.pipe(Dc(400),kc()).subscribe(o=>{this.globalFilterTerm.set(o),this.resetAndFetch()}),Zt(()=>{let o=this.loading(),s=this.lastFocusedElementId();!o&&s&&setTimeout(()=>{let c=document.getElementById(s);c&&(c.focus(),c instanceof HTMLInputElement&&c.select()),this.lastFocusedElementId.set(null)},0)}),Zt(o=>{let s=this.currentDensity(),c=this.config().config.sizerConfig,f=()=>{if(this.isMobile.set(window.innerWidth<640),this.autoSizingEnabled()){let m=this.scrollContainer()?.nativeElement;if(m){let g=(c.densities.find(A=>A.name===s)??c.densities[1]).rowHeight,b=c.additionalReservedSpace??0,C=Yh(m,g,b);C!==this.pageSize()&&(this.pageSize.set(C),this.resetAndFetch())}}};window.addEventListener("resize",f),setTimeout(()=>f(),50),o(()=>window.removeEventListener("resize",f))},{allowSignalWrites:!0}),this.setupStatePersistence()}setupStatePersistence(){Zt(()=>{let e={viewMode:this.viewMode(),currentPage:this.currentPage(),pageSize:this.pageSize(),sortColumn:this.sortColumn(),sortDirection:this.sortDirection(),globalFilterTerm:this.globalFilterTerm(),advancedFilters:this.advancedFilters(),visibleColumnCodes:this.visibleTableColumns().map(t=>t.code),activeLayouts:this.activeLayouts()};this.persistenceService.saveState("smartTableState",e)})}resetViewAndFilters(){this.persistenceService.clearState("smartTableState"),this.densityService.setDensity(this.config().config.sizerConfig.defaultDensity),this.viewMode.set(this.initialState.viewMode),this.currentPage.set(this.initialState.currentPage),this.pageSize.set(this.initialState.pageSize),this.sortColumn.set(this.initialState.sortColumn),this.sortDirection.set(this.initialState.sortDirection),this.globalFilterTerm.set(""),this.advancedFilters.set(this.initialState.advancedFilters),this.visibleTableColumns.set(this.allTableColumns().filter(e=>e.display==="table_cell")),this.activeLayouts.set(this.initialState.activeLayouts),this.showViewOptions.set(!1),this.resetAndFetch()}async handleAiAction(e){this.showAiActions.set(!1),this.isAiLoading.set(!0);try{switch(e){case"narrate":let t=await this.aiSummaryService.generateNarration(this.data(),this.allTableColumns());this.aiModalContent.set({title:"Data Narration",content:t});break;case"insights":let i=await this.aiSummaryService.suggestInsights(this.data(),this.allTableColumns());this.aiModalContent.set({title:"Suggested Insights",content:i});break;case"adopt":let o=await this.aiLayoutService.getAutoAdoptedConfig(this.config(),window.innerWidth);this.configService.updateFullConfig(o);break;case"metrics":let s=await this.aiSummaryService.getQuickMetrics(this.data(),this.allTableColumns());this.aiModalContent.set({title:"Key Metrics",content:s});break}}catch(t){console.error(`AI Action '${e}' failed:`,t),this.aiModalContent.set({title:"Error",content:"An error occurred while processing the AI request."})}finally{this.isAiLoading.set(!1)}}handleAiFilter(e){if(e.globalSearch)this.globalFilterTerm.set(e.globalSearch),this.advancedFilters.set({});else if(e.advancedFilters&&e.advancedFilters.length>0){let t={};for(let i of e.advancedFilters)t[i.code]=i;this.advancedFilters.set(t),this.globalFilterTerm.set("")}this.resetAndFetch()}loadSavedQueries(){this.savedQueriesService.getSavedQueries().subscribe(e=>{this.savedQueries.set(e)})}openSaveQueryModal(){this.showSavedQueriesMenu.set(!1),this.showSaveQueryModal.set(!0)}handleSaveQuery(e){this.showSaveQueryModal.set(!1);let t={globalFilterTerm:this.globalFilterTerm(),advancedFilters:this.advancedFilters(),sortColumn:this.sortColumn(),sortDirection:this.sortDirection()};this.savedQueriesService.saveQuery(e,t).subscribe(()=>{this.loadSavedQueries()})}handleApplySavedQuery(e){this.showSavedQueriesMenu.set(!1);let t=this.savedQueries().find(i=>i.id===e);if(t){let i=t.state;this.globalFilterTerm.set(i.globalFilterTerm??this.initialState.globalFilterTerm),this.advancedFilters.set(i.advancedFilters??this.initialState.advancedFilters),this.sortColumn.set(i.sortColumn??this.initialState.sortColumn),this.sortDirection.set(i.sortDirection??this.initialState.sortDirection),this.resetAndFetch()}}handleDeleteSavedQuery(e){this.savedQueriesService.deleteQuery(e).subscribe(()=>{this.loadSavedQueries()})}loadCustomLayouts(){this.customLayoutService.getLayouts().subscribe(e=>{this.customLayouts.set(e)})}async handleGenerateLayout(e){this.isAiLoading.set(!0);try{let t=await this.aiLayoutService.generateLayout(e.prompt,e.targetView,this.allTableColumns());this.customLayoutService.saveLayout({name:e.name,targetView:e.targetView,htmlTemplate:t.htmlTemplate}).subscribe(()=>{this.loadCustomLayouts()})}catch(t){console.error("AI layout generation failed:",t),this.aiModalContent.set({title:"Layout Generation Error",content:"An error occurred while generating the layout."})}finally{this.isAiLoading.set(!1)}}handleApplyLayout(e){let{view:t,layoutId:i}=e;this.activeLayouts.update(o=>{let s=Rt({},o);return t==="card"&&(s.card=i),t==="list"&&(s.list=i),t==="table"&&(s.table=i),s})}handleDeleteLayout(e){this.customLayoutService.deleteLayout(e).subscribe(()=>{this.loadCustomLayouts()})}handleAddChip(e){this.chipFilterService.addChip(e),this.showAddChipModal.set(!1)}handleRemoveChip(e){this.chipFilterService.removeChip(e)}handleApplyChipFilter(e){let t=this.allTableColumns().find(o=>o.code===e.columnCode);if(!t||!e.filterValue)return;let i={code:e.columnCode,name:t.name,type:"select",operator:"=",value1:e.filterValue};this.advancedFilters.set({[i.code]:i}),this.resetAndFetch()}setDensity(e){this.densityService.setDensity(e)}getDensityIcon(e){switch(e){case"comfortable":return"pi-align-justify";case"cozy":return"pi-bars";case"compact":return"pi-table";case"ultra-compact":return"pi-compress";default:return"pi-table"}}handleFreezeColumns(e){this.showFreezeOptions.set(!1);let t=this.config(),i=JSON.parse(JSON.stringify(t)),o=this.visibleTableColumns().map(s=>s.code);i.columns.forEach(s=>{let c=o.indexOf(s.code);c!==-1?s.frozen=c<e:s.frozen=!1}),this.configService.updateFullConfig(i)}checkAndFetchForFill(){setTimeout(()=>{let e=this.config().config;if(e.pagingMode!=="infinite"||e.infiniteScrollBehavior!=="append")return;let t=this.scrollContainer()?.nativeElement;t&&!this.allDataLoaded()&&t.scrollHeight<=t.clientHeight&&(this.loading()||this.fetchMoreData())},100)}async fetchPagesSequentially(e){if(e<1){this.loading.set(!1);return}this.loading.set(!0),this.currentPage.set(0),this.data.set([]);try{for(let t=1;t<=e;t++)await this.fetchAndAppendPage(t)}catch{}finally{this.loading.set(!1),this.checkAndFetchForFill()}}fetchAndAppendPage(e){return new Promise((t,i)=>{let o=Ou(e,this.pageSize(),this.sortColumn(),this.sortDirection(),this.globalFilterTerm(),this.advancedFilters(),this.config().columns);this.dataManager.getData(o).subscribe({next:s=>{this.data.update(c=>[...c,...s.data]),this.totalRecords.set(s.total_records),this.currentPage.set(e),t()},error:s=>{console.error(`Failed to fetch page ${e}`,s),this.loading.set(!1),i(s)}})})}fetchPage(e){if(e<1)return;this.loading.set(!0);let t=Ou(e,this.pageSize(),this.sortColumn(),this.sortDirection(),this.globalFilterTerm(),this.advancedFilters(),this.config().columns);this.dataManager.getData(t).subscribe({next:i=>{this.data.set(i.data),this.totalRecords.set(i.total_records),this.currentPage.set(e),this.loading.set(!1),this.checkAndFetchForFill();let o=this.postFetchFocus(),s=this.data();if(o==="first"&&s.length>0)this.keyboardActiveRowIndex.set(0),this.scrollActiveItemIntoView(s[0].organization_id);else if(o==="last"&&s.length>0){let c=s.length-1;this.keyboardActiveRowIndex.set(c),this.scrollActiveItemIntoView(s[c].organization_id)}else this.keyboardActiveRowIndex.set(null);this.postFetchFocus.set(null)},error:i=>{console.error("Failed to fetch data",i),this.loading.set(!1)}})}fetchMoreData(){if(this.loading()||!this.isInfiniteScroll()||this.allDataLoaded())return;this.loading.set(!0);let e=this.currentPage()+1,t=Ou(e,this.pageSize(),this.sortColumn(),this.sortDirection(),this.globalFilterTerm(),this.advancedFilters(),this.config().columns),i=this.config().config.infiniteScrollBehavior??"append";this.dataManager.getData(t).subscribe({next:o=>{i==="append"?this.data.update(s=>[...s,...o.data]):(this.data.set(o.data),this.scrollContainer()?.nativeElement.scrollTo({top:0,behavior:"smooth"})),this.totalRecords.set(o.total_records),this.currentPage.set(e),this.loading.set(!1),this.checkAndFetchForFill()},error:o=>{console.error("Failed to fetch more data",o),this.loading.set(!1)}})}resetAndFetch(){this.currentPage.set(1),this.keyboardActiveRowIndex.set(null),this.selectedIds.set(new Set),this.isInfiniteScroll()&&this.data.set([]),this.fetchPage(1)}handleSort(e){this.sortColumn.set(e.column),this.sortDirection.set(e.direction),this.resetAndFetch()}onGlobalSearch(e){let t=e.target.value;this.searchSubject.next(t)}handleFilterChange(e){this.advancedFilters.update(t=>{let i=Rt({},t);return e.filter?i[e.code]=e.filter:delete i[e.code],i}),this.resetAndFetch()}handlePageChange(e){this.isInfiniteScroll()||(this.currentPage.set(e),this.fetchPage(e),this.selectedIds.set(new Set))}onContentScroll(e){if(!this.isInfiniteScroll())return;let t=e.target,i=100,o=t.scrollTop+t.clientHeight,s=t.scrollHeight;o>=s-i&&this.fetchMoreData()}handlePageSizeChange(e){this.pageSize.set(e),this.resetAndFetch()}handleAutoSizingToggle(){if(this.autoSizingEnabled.update(e=>!e),this.autoSizingEnabled()){let e=this.scrollContainer()?.nativeElement;if(e){let t=this.currentDensity(),i=this.config().config.sizerConfig,s=(i.densities.find(m=>m.name===t)??i.densities[1]).rowHeight,c=i.additionalReservedSpace??0,f=Yh(e,s,c);f!==this.pageSize()&&(this.pageSize.set(f),this.resetAndFetch())}}}handleApplyFilters(e){this.advancedFilters.set(e),this.resetAndFetch(),this.showFilterSidebar.set(!1)}handleRowClick(e){let t=this.data().findIndex(i=>i.organization_id===e.organization_id);t>-1&&(this.keyboardActiveRowIndex.set(t),this.selectionAnchorIndex.set(t))}handleSelectionChange(e){this.selectedIds.set(e)}toggleSelectionByIndex(e){if(e<0||e>=this.data().length)return;let t=this.data()[e].organization_id,i=new Set(this.selectedIds());i.has(t)?i.delete(t):i.add(t),this.selectedIds.set(i)}changeView(e){if(e==="calendar"&&!this.activeCalendarConfig()){this.showCalendarConfigModal.set(!0);return}this.viewMode.set(e),this.showViewOptions.set(!1)}toggleColumnVisibility(e){this.visibleTableColumns.update(t=>{if(t.some(o=>o.code===e.code))return t.filter(o=>o.code!==e.code);{let o=[];for(let s of this.allTableColumns())(t.some(c=>c.code===s.code)||s.code===e.code)&&o.push(s);return o}})}handleVisibleColumnReorder(e){this.visibleTableColumns.set(e)}handleAllColumnsOrderChange(e){this.allTableColumns.set(e),this.visibleTableColumns.update(t=>{let i=new Set(t.map(o=>o.code));return e.filter(o=>i.has(o.code))})}handleRowAction(e){let{action:t,row:i}=e,o=i.communication_detail?.replace(/\D/g,"");switch(t){case"call":o&&(window.location.href=`tel:${o}`);break;case"whatsapp":o&&window.open(`https://wa.me/${o}`,"_blank");break;case"email":i.email_id&&(window.location.href=`mailto:${i.email_id}`);break;case"sms":o&&(window.location.href=`sms:${o}`);break;default:console.log("Unhandled row action:",t,"on row:",i);break}}handleHeaderAction(e){console.log("Header action:",e.action,"on IDs:",e.selectedIds)}handleToolbarAction(e){switch(e){case"refresh":this.resetAndFetch();break;case"toggle:filter-sidebar":this.showFilterSidebar.update(t=>!t);break;case"toggle:config-sidebar":this.showConfigSidebar.update(t=>!t);break;case"toggle:theme-settings":this.showThemeSettings.update(t=>!t);break;case"add:contacts":console.log("Add new contact clicked");break;default:console.log("Toolbar action:",e)}}handleEmptyStateAction(e){console.log("Empty state action triggered:",e),this.handleToolbarAction(e)}handleConfigSave(e){this.configService.updateFullConfig(e),this.showConfigSidebar.set(!1)}handleConfigReset(){this.configService.resetToDefaults(),this.showConfigSidebar.set(!1)}handleCardsPerRowChange(e){this.configService.updateCardsPerRow(e)}changeDataStrategy(e){this.showStrategyChooser.set(!1),e==="SYNC"?this.showSyncOptionsModal.set(!0):(this.configService.updateDataStrategy(e),this.initialFetchDone.set(!1),this.resetAndFetch())}handleStartSync(){this.configService.updateDataStrategy("SYNC"),this.initialFetchDone.set(!1),this.syncService.startFullSync()}handleManualSync(){this.syncService.startFullSync()}toggleInfiniteScrollBehavior(){let t=(this.config().config.infiniteScrollBehavior??"append")==="append"?"replace":"append";this.configService.updateInfiniteScrollBehavior(t),this.resetAndFetch()}handleApplyCalendarConfig(e){this.activeCalendarConfig.set(e),this.showCalendarConfigModal.set(!1),this.viewMode.set("calendar")}async handleExport(e){this.showExportOptions.set(!1);let t=this.totalRecords();if(t===0){console.warn("No data to export.");return}this.isExporting.set(!0),this.exportingMessage.set(`Fetching all ${t} records for export...`);let i=Ou(1,t,this.sortColumn(),this.sortDirection(),this.globalFilterTerm(),this.advancedFilters(),this.config().columns);this.dataManager.getData(i).subscribe({next:o=>{this.exportingMessage.set(`Generating ${e.toUpperCase()} file...`);let s=this.viewMode()==="table"?this.visibleTableColumns():this.allTableColumns();this.exportService.exportData(e,o.data,s,this.config().config.title),setTimeout(()=>{this.isExporting.set(!1),this.exportingMessage.set("")},1e3)},error:o=>{console.error("Failed to fetch data for export:",o),this.exportingMessage.set("Error during export. Please try again."),setTimeout(()=>{this.isExporting.set(!1),this.exportingMessage.set("")},3e3)}})}handleContentKeydown(e){let t=this.data(),i=this.keyboardActiveRowIndex(),o=!this.isInfiniteScroll();if(e.key==="ArrowUp"&&i===0&&o){e.preventDefault();let c=this.currentPage()-1;c>=1&&(this.postFetchFocus.set("last"),this.handlePageChange(c));return}if(e.key==="ArrowDown"&&i===t.length-1&&o){e.preventDefault();let c=this.currentPage()+1;c<=this.totalPages()&&(this.postFetchFocus.set("first"),this.handlePageChange(c));return}this.keyboardManager.updateState(t,i,this.selectedIds(),this.selectionAnchorIndex());let s=this.keyboardManager.handleKeydown(e);if(s){this.keyboardActiveRowIndex.set(s.newActiveIndex),this.selectedIds.set(s.newSelection),this.selectionAnchorIndex.set(s.newAnchorIndex);let c=this.data()[s.newActiveIndex];c&&this.scrollActiveItemIntoView(c.organization_id)}}scrollActiveItemIntoView(e){let t=this.viewMode(),i;switch(t){case"table":i=`table-item-${e}`;break;case"card":i=`card-item-${e}`;break;case"list":i=`list-item-${e}`;break;default:return}setTimeout(()=>{document.getElementById(i)?.scrollIntoView({behavior:"smooth",block:"nearest"})},0)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-smart-table"]],viewQuery:function(t,i){t&1&&Fc(i.scrollContainer,$F,5),t&2&&Nc()},hostAttrs:[1,"block","h-full"],decls:1,vars:1,consts:[["scrollContainer",""],[1,"h-full","flex","flex-col","text-sm","transition-colors","duration-300"],[1,"flex-shrink-0","border-b","border-gray-200","shadow-sm","relative","z-40","transition-colors","duration-300"],[1,"flex","flex-nowrap","items-center","justify-between","gap-4","p-2"],[1,"flex","items-center","gap-4","flex-shrink-0","min-w-0"],[1,"text-lg","font-bold","text-gray-900","truncate"],["title","Total Records",1,"px-2","py-0.5","text-xs","font-semibold","rounded-full","bg-indigo-50","text-indigo-700","flex-shrink-0"],["title","Global Search (Alt + G)",1,"flex-1","flex","justify-center","max-w-xl","mx-4","min-w-0"],[1,"relative","w-full"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"pi","pi-search","text-gray-400"],["id","global-search-input","type","search","placeholder","Search...",1,"block","w-full","pl-10","pr-3","py-1.5","border","border-gray-300","rounded-md","leading-5","bg-white","text-gray-900","placeholder-gray-400","focus:outline-none","focus:placeholder-gray-500","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500","text-sm",3,"input","value"],[1,"flex","flex-nowrap","items-center","justify-end","gap-1.5","flex-shrink-0"],[1,"relative",3,"clickOutside"],["iconName","filter","label","Filter","endIconName","chevron-down",3,"clicked","endIconRotate","active"],[1,"origin-top-right","absolute","right-0","mt-2","w-56","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30"],[3,"allColumns","visibleColumns"],[1,"h-6","w-px","bg-gray-300","mx-1"],[1,"relative"],["iconName","database","endIconName","chevron-down",3,"clicked","label","endIconRotate","title"],[1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30"],["iconName","cog","label","Config","title","Table Configuration",3,"clicked","active"],["iconName","eye","label","View","endIconName","chevron-down",3,"clicked","endIconRotate","active"],[1,"origin-top-right","absolute","right-0","mt-2","w-64","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30"],["iconName","sparkles","title","AI Actions","color","primary","size","md",3,"clicked","active"],[1,"p-2","border-t","border-gray-200"],[1,"flex-shrink-0","border-b","border-gray-300"],["tabindex","0",1,"flex-grow","overflow-auto","p-2","outline-none",3,"scroll","keydown"],[1,"flex","justify-center","items-center","py-4"],[1,"flex-shrink-0","border-t","border-gray-300","transition-colors","duration-300",3,"background-color","bg-white"],[3,"isOpen","config","activeFilters"],[3,"isOpen","config"],[3,"close","isOpen"],[3,"data","columns"],[3,"close","save","isOpen"],[3,"close","applyLayout","deleteLayout","generateLayout","isOpen","layouts","currentView","activeLayouts"],[3,"close","apply","isOpen","dateColumns"],[3,"close","addChip","isOpen","columns"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-[70]"],[3,"iconClass","label","showLabel","color","title"],[3,"clicked","iconClass","label","showLabel","color","title"],[1,"py-1"],["href","javascript:void(0)",1,"flex","items-center","justify-between","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],[1,"flex","items-center","gap-3"],[1,"pi","pi-filter"],[1,"pi","pi-check","text-indigo-500"],["href","javascript:void(0)",1,"flex","items-center","gap-3","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100"],["href","javascript:void(0)",1,"flex","items-center","justify-between","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100"],["href","javascript:void(0)",1,"flex","items-center","gap-3","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],[1,"pi","pi-tag"],[1,"pi","pi-columns"],[3,"visibilityChange","orderChange","allColumns","visibleColumns"],["iconName","table","title","Number of cards per row",3,"clicked","label","active"],[1,"origin-top-right","absolute","right-0","mt-2","w-40","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30"],["iconName","freeze","label","Freeze","title","Freeze columns",3,"clicked","active"],["href","javascript:void(0)",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],["href","javascript:void(0)",1,"flex","items-center","justify-between","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"title"],["href","javascript:void(0)",1,"flex","items-center","justify-between","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click","title"],["iconName","download","label","Export","endIconName","chevron-down",3,"clicked","endIconRotate","active"],[1,"px-4","py-1","text-xs","font-semibold","text-gray-500","uppercase","tracking-wider"],[1,"px-2","pb-2","grid","grid-cols-2","gap-1"],[1,"flex","items-center","justify-center","gap-2","px-2","py-1.5","text-xs","border","rounded","hover:bg-gray-50","transition-colors",3,"bg-indigo-50","border-indigo-200","text-indigo-700","border-gray-200"],[1,"my-1","border-t","border-gray-200"],[1,"pi","pi-table"],[1,"pi","pi-id-card"],[1,"pi","pi-list"],[1,"pi","pi-chart-bar"],[1,"pi","pi-calendar"],[1,"pi","pi-replay","w-4","text-center"],[1,"pi"],[1,"flex","items-center","justify-center","gap-2","px-2","py-1.5","text-xs","border","rounded","hover:bg-gray-50","transition-colors",3,"click"],[1,"pi","pi-desktop","w-4","text-center"],[1,"pi","pi-book","w-4","text-center"],[1,"pi","pi-chart-line","w-4","text-center"],[1,"pi","pi-sort-numeric-down","w-4","text-center"],[1,"pi","pi-palette","w-4","text-center"],[3,"addChip","removeChip","chipClicked","chips"],[3,"pageChange","pageSizeChange","autoSizingToggle","chatbotToggle","currentPage","pageSize","totalRecords","autoSizingEnabled","infiniteScroll","infiniteScrollBehavior","currentRecordCount","dataStrategy","connectionStatus","lastSyncTime","isSyncing"],[3,"columns","rows"],[3,"count"],[1,"text-center","p-8"],[3,"config"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center","text-gray-500"],[3,"action","config"],[1,"pi","pi-inbox","text-5xl","mb-3"],[1,"text-lg"],[3,"columns","data","sortColumn","sortDirection","density","densityClass","rowMenuConfig","rowActions","headerMenuConfig","enableMultiSelect","selectedIds","activeFilters","customTemplate","loading","keyboardActiveRowIndex","pageSize","isInfiniteScroll","stripedRows","showGridlines","rowHover","footerConfig"],[3,"columns","data","density","densityClass","selectedIds","rowMenuConfig","rowActions","enableMultiSelect","cardViewConfig","customTemplate","keyboardActiveRowIndex"],[3,"columns","data","density","densityClass","selectedIds","enableMultiSelect","customTemplate","keyboardActiveRowIndex"],[3,"sortChange","rowAction","rowClicked","headerAction","columnReorder","filterChange","selectionChange","columns","data","sortColumn","sortDirection","density","densityClass","rowMenuConfig","rowActions","headerMenuConfig","enableMultiSelect","selectedIds","activeFilters","customTemplate","loading","keyboardActiveRowIndex","pageSize","isInfiniteScroll","stripedRows","showGridlines","rowHover","footerConfig"],[3,"selectionChange","rowAction","rowClicked","columns","data","density","densityClass","selectedIds","rowMenuConfig","rowActions","enableMultiSelect","cardViewConfig","customTemplate","keyboardActiveRowIndex"],[3,"selectionChange","rowClicked","columns","data","density","densityClass","selectedIds","enableMultiSelect","customTemplate","keyboardActiveRowIndex"],[3,"data","columns","config"],[1,"text-center","p-8","text-gray-500"],[1,"pi","pi-spin","pi-spinner","text-2xl","text-indigo-500"],[1,"flex-shrink-0","border-t","border-gray-300","transition-colors","duration-300"],[3,"close","apply","isOpen","config","activeFilters"],[3,"close","save","resetToDefaults","isOpen","config"],[3,"close","filterApplied","data","columns"],[3,"close","startSync"],[1,"flex","flex-col","items-center","gap-4","bg-white","p-8","rounded-lg","shadow-xl"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","m-4"],[1,"pi","pi-spin","pi-spinner","text-4xl","text-indigo-500"],[1,"text-lg","font-medium","text-gray-800"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","m-4",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","flex","items-center","gap-2"],[1,"pi","pi-sparkles","text-indigo-500"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","prose","max-w-none",3,"innerHTML"]],template:function(t,i){if(t&1&&fe(0,jN,54,56),t&2){let o;pe((o=i.config())?0:-1,o)}},dependencies:[kt,Hc,Uc,zc,pf,mf,hf,gf,xr,Nf,Rf,Pf,vf,Ff,B0,H0,G0,$0,K0,X0,Q0,j0,tp,np,Vc],encapsulation:2,changeDetection:0})};var $C=class n{tableConfig={feature:"RowContact",key:"RowContact",api:{url:"https://localhost:7232/api",pathTable:"/row-contact",pathExport:"/row-contact/export",method:"POST",defaultPageSize:10},config:{id:"row-contact-table",title:"Row Contact List",dataStrategy:"SYNC",pagingMode:"paginator",enableColumnChooser:!0,enableRowMenu:!0,enableHeaderActions:!0,enableSavedQueries:!0,enableConfigButton:!0,enableChipFilters:!0,enableMultiSelect:!0,defaultRows:10,role:"admin",toolbarActions:[{label:"New Contact",icon:"pi pi-plus",key:"create"}],sizerConfig:{enabled:!0,defaultDensity:"comfortable",densities:[{name:"comfortable",rowHeight:50,cssClass:"p-4"},{name:"compact",rowHeight:35,cssClass:"p-2"}]}},columns:[{index:1,name:"Contact Person",code:"contact_person",display:"table_cell",columnType:"TEXT",sortable:!0,filterable:!0},{index:2,name:"Organization",code:"organization_name",display:"table_cell",columnType:"TEXT",sortable:!0,filterable:!0},{index:3,name:"Email",code:"email_id",display:"table_cell",columnType:"EMAIL",sortable:!0,filterable:!0},{index:4,name:"Phone",code:"communication_detail",display:"table_cell",columnType:"TEXT",sortable:!0,filterable:!0},{index:5,name:"Lead Source",code:"lead_source",display:"table_cell",columnType:"TEXT",sortable:!0,filterable:!0}],rowMenu:[{label:"Actions",items:[{label:"Edit",icon:"pi pi-pencil",action:"edit"},{label:"Delete",icon:"pi pi-trash",action:"delete"}]}],drawerConfig:{width:"400px",position:"right",buttons:[],headerActions:[]}};static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-row-contact-list"]],decls:2,vars:0,consts:[[1,"h-full","w-full"]],template:function(t,i){t&1&&(z(0,"div",0),Ie(1,"app-smart-table"),G())},dependencies:[kt,ip],encapsulation:2})};export{$C as RowContactListComponent};
