var V3=Object.create;var lC=Object.defineProperty,B3=Object.defineProperties,H3=Object.getOwnPropertyDescriptor,U3=Object.getOwnPropertyDescriptors,z3=Object.getOwnPropertyNames,em=Object.getOwnPropertySymbols,G3=Object.getPrototypeOf,cC=Object.prototype.hasOwnProperty,ZS=Object.prototype.propertyIsEnumerable;var XS=(t,e,n)=>e in t?lC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xt=(t,e)=>{for(var n in e||={})cC.call(e,n)&&XS(t,n,e[n]);if(em)for(var n of em(e))ZS.call(e,n)&&XS(t,n,e[n]);return t},Ht=(t,e)=>B3(t,U3(e));var eD=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var uC=(t,e)=>{var n={};for(var i in t)cC.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&em)for(var i of em(t))e.indexOf(i)<0&&ZS.call(t,i)&&(n[i]=t[i]);return n};var Jt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var $3=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of z3(e))!cC.call(t,r)&&r!==n&&lC(t,r,{get:()=>e[r],enumerable:!(i=H3(e,r))||i.enumerable});return t};var qa=(t,e,n)=>(n=t!=null?V3(G3(t)):{},$3(e||!t||!t.__esModule?lC(n,"default",{value:t,enumerable:!0}):n,t));var gM=Jt((Bb,Hb)=>{(function(t,e){typeof Bb=="object"&&typeof Hb<"u"?Hb.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Dexie=e())})(Bb,function(){"use strict";var t=function(y,_){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,D){w.__proto__=D}||function(w,D){for(var I in D)Object.prototype.hasOwnProperty.call(D,I)&&(w[I]=D[I])},t(y,_)};function e(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");t(y,_);function w(){this.constructor=y}y.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)}var n=function(){return n=Object.assign||function(_){for(var w,D=1,I=arguments.length;D<I;D++){w=arguments[D];for(var L in w)Object.prototype.hasOwnProperty.call(w,L)&&(_[L]=w[L])}return _},n.apply(this,arguments)};function i(y,_,w){if(w||arguments.length===2)for(var D=0,I=_.length,L;D<I;D++)(L||!(D in _))&&(L||(L=Array.prototype.slice.call(_,0,D)),L[D]=_[D]);return y.concat(L||Array.prototype.slice.call(_))}var r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,s=Object.keys,a=Array.isArray;typeof Promise<"u"&&!r.Promise&&(r.Promise=Promise);function c(y,_){return typeof _!="object"||s(_).forEach(function(w){y[w]=_[w]}),y}var u=Object.getPrototypeOf,p={}.hasOwnProperty;function m(y,_){return p.call(y,_)}function C(y,_){typeof _=="function"&&(_=_(u(y))),(typeof Reflect>"u"?s:Reflect.ownKeys)(_).forEach(function(w){E(y,w,_[w])})}var x=Object.defineProperty;function E(y,_,w,D){x(y,_,c(w&&m(w,"get")&&typeof w.get=="function"?{get:w.get,set:w.set,configurable:!0}:{value:w,configurable:!0,writable:!0},D))}function A(y){return{from:function(_){return y.prototype=Object.create(_.prototype),E(y.prototype,"constructor",y),{extend:C.bind(null,y.prototype)}}}}var N=Object.getOwnPropertyDescriptor;function R(y,_){var w=N(y,_),D;return w||(D=u(y))&&R(D,_)}var k=[].slice;function B(y,_,w){return k.call(y,_,w)}function $(y,_){return _(y)}function q(y){if(!y)throw new Error("Assertion Failed")}function X(y){r.setImmediate?setImmediate(y):setTimeout(y,0)}function ie(y,_){return y.reduce(function(w,D,I){var L=_(D,I);return L&&(w[L[0]]=L[1]),w},{})}function me(y,_){if(typeof _=="string"&&m(y,_))return y[_];if(!_)return y;if(typeof _!="string"){for(var w=[],D=0,I=_.length;D<I;++D){var L=me(y,_[D]);w.push(L)}return w}var U=_.indexOf(".");if(U!==-1){var W=y[_.substr(0,U)];return W==null?void 0:me(W,_.substr(U+1))}}function ye(y,_,w){if(!(!y||_===void 0)&&!("isFrozen"in Object&&Object.isFrozen(y)))if(typeof _!="string"&&"length"in _){q(typeof w!="string"&&"length"in w);for(var D=0,I=_.length;D<I;++D)ye(y,_[D],w[D])}else{var L=_.indexOf(".");if(L!==-1){var U=_.substr(0,L),W=_.substr(L+1);if(W==="")w===void 0?a(y)&&!isNaN(parseInt(U))?y.splice(U,1):delete y[U]:y[U]=w;else{var J=y[U];(!J||!m(y,U))&&(J=y[U]={}),ye(J,W,w)}}else w===void 0?a(y)&&!isNaN(parseInt(_))?y.splice(_,1):delete y[_]:y[_]=w}}function ge(y,_){typeof _=="string"?ye(y,_,void 0):"length"in _&&[].map.call(_,function(w){ye(y,w,void 0)})}function Te(y){var _={};for(var w in y)m(y,w)&&(_[w]=y[w]);return _}var j=[].concat;function le(y){return j.apply([],y)}var H="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(le([8,16,32,64].map(function(y){return["Int","Uint","Float"].map(function(_){return _+y+"Array"})}))).filter(function(y){return r[y]}),Ae=new Set(H.map(function(y){return r[y]}));function ht(y){var _={};for(var w in y)if(m(y,w)){var D=y[w];_[w]=!D||typeof D!="object"||Ae.has(D.constructor)?D:ht(D)}return _}function Xe(y){for(var _ in y)if(m(y,_))return!1;return!0}var pt=null;function _t(y){pt=new WeakMap;var _=be(y);return pt=null,_}function be(y){if(!y||typeof y!="object")return y;var _=pt.get(y);if(_)return _;if(a(y)){_=[],pt.set(y,_);for(var w=0,D=y.length;w<D;++w)_.push(be(y[w]))}else if(Ae.has(y.constructor))_=y;else{var I=u(y);_=I===Object.prototype?{}:Object.create(I),pt.set(y,_);for(var L in y)m(y,L)&&(_[L]=be(y[L]))}return _}var ze={}.toString;function Be(y){return ze.call(y).slice(8,-1)}var Le=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ut=typeof Le=="symbol"?function(y){var _;return y!=null&&(_=y[Le])&&_.apply(y)}:function(){return null};function lt(y,_){var w=y.indexOf(_);return w>=0&&y.splice(w,1),w>=0}var Ct={};function Ze(y){var _,w,D,I;if(arguments.length===1){if(a(y))return y.slice();if(this===Ct&&typeof y=="string")return[y];if(I=Ut(y)){for(w=[];D=I.next(),!D.done;)w.push(D.value);return w}if(y==null)return[y];if(_=y.length,typeof _=="number"){for(w=new Array(_);_--;)w[_]=y[_];return w}return[y]}for(_=arguments.length,w=new Array(_);_--;)w[_]=arguments[_];return w}var Qt=typeof Symbol<"u"?function(y){return y[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},yi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Bt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Dn=yi.concat(Bt),Yn={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function dn(y,_){this.name=y,this.message=_}A(dn).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Ii(y,_){return y+". Errors: "+Object.keys(_).map(function(w){return _[w].toString()}).filter(function(w,D,I){return I.indexOf(w)===D}).join(`
`)}function Pn(y,_,w,D){this.failures=_,this.failedKeys=D,this.successCount=w,this.message=Ii(y,_)}A(Pn).from(dn);function Jn(y,_){this.name="BulkError",this.failures=Object.keys(_).map(function(w){return _[w]}),this.failuresByPos=_,this.message=Ii(y,this.failures)}A(Jn).from(dn);var _i=Dn.reduce(function(y,_){return y[_]=_+"Error",y},{}),Fo=dn,je=Dn.reduce(function(y,_){var w=_+"Error";function D(I,L){this.name=w,I?typeof I=="string"?(this.message="".concat(I).concat(L?`
 `+L:""),this.inner=L||null):typeof I=="object"&&(this.message="".concat(I.name," ").concat(I.message),this.inner=I):(this.message=Yn[_]||w,this.inner=null)}return A(D).from(Fo),y[_]=D,y},{});je.Syntax=SyntaxError,je.Type=TypeError,je.Range=RangeError;var Qn=Bt.reduce(function(y,_){return y[_+"Error"]=je[_],y},{});function Ai(y,_){if(!y||y instanceof dn||y instanceof TypeError||y instanceof SyntaxError||!y.name||!Qn[y.name])return y;var w=new Qn[y.name](_||y.message,y);return"stack"in y&&E(w,"stack",{get:function(){return this.inner.stack}}),w}var Mi=Dn.reduce(function(y,_){return["Syntax","Type","Range"].indexOf(_)===-1&&(y[_+"Error"]=je[_]),y},{});Mi.ModifyError=Pn,Mi.DexieError=dn,Mi.BulkError=Jn;function nn(){}function ro(y){return y}function wr(y,_){return y==null||y===ro?_:function(w){return _(y(w))}}function zn(y,_){return function(){y.apply(this,arguments),_.apply(this,arguments)}}function ba(y,_){return y===nn?_:function(){var w=y.apply(this,arguments);w!==void 0&&(arguments[0]=w);var D=this.onsuccess,I=this.onerror;this.onsuccess=null,this.onerror=null;var L=_.apply(this,arguments);return D&&(this.onsuccess=this.onsuccess?zn(D,this.onsuccess):D),I&&(this.onerror=this.onerror?zn(I,this.onerror):I),L!==void 0?L:w}}function Er(y,_){return y===nn?_:function(){y.apply(this,arguments);var w=this.onsuccess,D=this.onerror;this.onsuccess=this.onerror=null,_.apply(this,arguments),w&&(this.onsuccess=this.onsuccess?zn(w,this.onsuccess):w),D&&(this.onerror=this.onerror?zn(D,this.onerror):D)}}function Tn(y,_){return y===nn?_:function(w){var D=y.apply(this,arguments);c(w,D);var I=this.onsuccess,L=this.onerror;this.onsuccess=null,this.onerror=null;var U=_.apply(this,arguments);return I&&(this.onsuccess=this.onsuccess?zn(I,this.onsuccess):I),L&&(this.onerror=this.onerror?zn(L,this.onerror):L),D===void 0?U===void 0?void 0:U:c(D,U)}}function Vi(y,_){return y===nn?_:function(){return _.apply(this,arguments)===!1?!1:y.apply(this,arguments)}}function di(y,_){return y===nn?_:function(){var w=y.apply(this,arguments);if(w&&typeof w.then=="function"){for(var D=this,I=arguments.length,L=new Array(I);I--;)L[I]=arguments[I];return w.then(function(){return _.apply(D,L)})}return _.apply(this,arguments)}}var oi=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function qr(y,_){oi=y}var Bi={},wa=100,$t=typeof Promise>"u"?[]:(function(){var y=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[y,u(y),y];var _=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[_,u(_),y]})(),os=$t[0],Tt=$t[1],Sr=$t[2],si=Tt&&Tt.then,fn=os&&os.constructor,bn=!!Sr;function Xi(){queueMicrotask(Wr)}var Xn=function(y,_){Ni.push([y,_]),Ln&&(Xi(),Ln=!1)},ki=!0,Ln=!0,Zi=[],Gn=[],Dr=ro,Hi={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:nn,pgp:!1,env:{},finalize:nn},st=Hi,Ni=[],Ui=0,Ro=[];function ct(y){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var _=this._PSD=st;if(typeof y!="function"){if(y!==Bi)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Ea(this,this._value);return}this._state=null,this._value=null,++_.ref,Po(this,y)}var oo={get:function(){var y=st,_=ls;function w(D,I){var L=this,U=!y.global&&(y!==st||_!==ls),W=U&&!Se(),J=new ct(function(re,de){_l(L,new ur(Vs(D,y,U,W),Vs(I,y,U,W),re,de,y))});return this._consoleTask&&(J._consoleTask=this._consoleTask),J}return w.prototype=Bi,w},set:function(y){E(this,"then",y&&y.prototype===Bi?oo:{get:function(){return y},set:oo.set})}};C(ct.prototype,{then:oo,_then:function(y,_){_l(this,new ur(null,null,y,_,st))},catch:function(y){if(arguments.length===1)return this.then(null,y);var _=arguments[0],w=arguments[1];return typeof _=="function"?this.then(null,function(D){return D instanceof _?w(D):dr(D)}):this.then(null,function(D){return D&&D.name===_?w(D):dr(D)})},finally:function(y){return this.then(function(_){return ct.resolve(y()).then(function(){return _})},function(_){return ct.resolve(y()).then(function(){return dr(_)})})},timeout:function(y,_){var w=this;return y<1/0?new ct(function(D,I){var L=setTimeout(function(){return I(new je.Timeout(_))},y);w.then(D,I).finally(clearTimeout.bind(null,L))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&E(ct.prototype,Symbol.toStringTag,"Dexie.Promise"),Hi.env=Zn();function ur(y,_,w,D,I){this.onFulfilled=typeof y=="function"?y:null,this.onRejected=typeof _=="function"?_:null,this.resolve=w,this.reject=D,this.psd=I}C(ct,{all:function(){var y=Ze.apply(null,arguments).map(Ge);return new ct(function(_,w){y.length===0&&_([]);var D=y.length;y.forEach(function(I,L){return ct.resolve(I).then(function(U){y[L]=U,--D||_(y)},w)})})},resolve:function(y){if(y instanceof ct)return y;if(y&&typeof y.then=="function")return new ct(function(w,D){y.then(w,D)});var _=new ct(Bi,!0,y);return _},reject:dr,race:function(){var y=Ze.apply(null,arguments).map(Ge);return new ct(function(_,w){y.map(function(D){return ct.resolve(D).then(_,w)})})},PSD:{get:function(){return st},set:function(y){return st=y}},totalEchoes:{get:function(){return ls}},newPSD:O,usePSD:$n,scheduler:{get:function(){return Xn},set:function(y){Xn=y}},rejectionMapper:{get:function(){return Dr},set:function(y){Dr=y}},follow:function(y,_){return new ct(function(w,D){return O(function(I,L){var U=st;U.unhandleds=[],U.onunhandled=L,U.finalize=zn(function(){var W=this;Da(function(){W.unhandleds.length===0?I():L(W.unhandleds[0])})},U.finalize),y()},_,w,D)})}}),fn&&(fn.allSettled&&E(ct,"allSettled",function(){var y=Ze.apply(null,arguments).map(Ge);return new ct(function(_){y.length===0&&_([]);var w=y.length,D=new Array(w);y.forEach(function(I,L){return ct.resolve(I).then(function(U){return D[L]={status:"fulfilled",value:U}},function(U){return D[L]={status:"rejected",reason:U}}).then(function(){return--w||_(D)})})})}),fn.any&&typeof AggregateError<"u"&&E(ct,"any",function(){var y=Ze.apply(null,arguments).map(Ge);return new ct(function(_,w){y.length===0&&w(new AggregateError([]));var D=y.length,I=new Array(D);y.forEach(function(L,U){return ct.resolve(L).then(function(W){return _(W)},function(W){I[U]=W,--D||w(new AggregateError(I))})})})}),fn.withResolvers&&(ct.withResolvers=fn.withResolvers));function Po(y,_){try{_(function(w){if(y._state===null){if(w===y)throw new TypeError("A promise cannot be resolved with itself.");var D=y._lib&&Fi();w&&typeof w.then=="function"?Po(y,function(I,L){w instanceof ct?w._then(I,L):w.then(I,L)}):(y._state=!0,y._value=w,Tr(y)),D&&Ir()}},Ea.bind(null,y))}catch(w){Ea(y,w)}}function Ea(y,_){if(Gn.push(_),y._state===null){var w=y._lib&&Fi();_=Dr(_),y._state=!1,y._value=_,as(y),Tr(y),w&&Ir()}}function Tr(y){var _=y._listeners;y._listeners=[];for(var w=0,D=_.length;w<D;++w)_l(y,_[w]);var I=y._PSD;--I.ref||I.finalize(),Ui===0&&(++Ui,Xn(function(){--Ui===0&&ss()},[]))}function _l(y,_){if(y._state===null){y._listeners.push(_);return}var w=y._state?_.onFulfilled:_.onRejected;if(w===null)return(y._state?_.resolve:_.reject)(y._value);++_.psd.ref,++Ui,Xn(Sa,[w,y,_])}function Sa(y,_,w){try{var D,I=_._value;!_._state&&Gn.length&&(Gn=[]),D=oi&&_._consoleTask?_._consoleTask.run(function(){return y(I)}):y(I),!_._state&&Gn.indexOf(I)===-1&&Ta(_),w.resolve(D)}catch(L){w.reject(L)}finally{--Ui===0&&ss(),--w.psd.ref||w.psd.finalize()}}function Wr(){$n(Hi,function(){Fi()&&Ir()})}function Fi(){var y=ki;return ki=!1,Ln=!1,y}function Ir(){var y,_,w;do for(;Ni.length>0;)for(y=Ni,Ni=[],w=y.length,_=0;_<w;++_){var D=y[_];D[0].apply(null,D[1])}while(Ni.length>0);ki=!0,Ln=!0}function ss(){var y=Zi;Zi=[],y.forEach(function(D){D._PSD.onunhandled.call(null,D._value,D)});for(var _=Ro.slice(0),w=_.length;w;)_[--w]()}function Da(y){function _(){y(),Ro.splice(Ro.indexOf(_),1)}Ro.push(_),++Ui,Xn(function(){--Ui===0&&ss()},[])}function as(y){Zi.some(function(_){return _._value===y._value})||Zi.push(y)}function Ta(y){for(var _=Zi.length;_;)if(Zi[--_]._value===y._value){Zi.splice(_,1);return}}function dr(y){return new ct(Bi,!1,y)}function vn(y,_){var w=st;return function(){var D=Fi(),I=st;try{return Xt(w,!0),y.apply(this,arguments)}catch(L){_&&_(L)}finally{Xt(I,!1),D&&Ir()}}}var An={awaits:0,echoes:0,id:0},Mn=0,wt=[],Ar=0,ls=0,fr=0;function O(y,_,w,D){var I=st,L=Object.create(I);L.parent=I,L.ref=0,L.global=!1,L.id=++fr,Hi.env,L.env=bn?{Promise:ct,PromiseProp:{value:ct,configurable:!0,writable:!0},all:ct.all,race:ct.race,allSettled:ct.allSettled,any:ct.any,resolve:ct.resolve,reject:ct.reject}:{},_&&c(L,_),++I.ref,L.finalize=function(){--this.parent.ref||this.parent.finalize()};var U=$n(L,y,w,D);return L.ref===0&&L.finalize(),U}function Q(){return An.id||(An.id=++Mn),++An.awaits,An.echoes+=wa,An.id}function Se(){return An.awaits?(--An.awaits===0&&(An.id=0),An.echoes=An.awaits*wa,!0):!1}(""+si).indexOf("[native code]")===-1&&(Q=Se=nn);function Ge(y){return An.echoes&&y&&y.constructor===fn?(Q(),y.then(function(_){return Se(),_},function(_){return Se(),Et(_)})):y}function _e(y){++ls,(!An.echoes||--An.echoes===0)&&(An.echoes=An.awaits=An.id=0),wt.push(st),Xt(y,!0)}function at(){var y=wt[wt.length-1];wt.pop(),Xt(y,!1)}function Xt(y,_){var w=st;if((_?An.echoes&&(!Ar++||y!==st):Ar&&(!--Ar||y!==st))&&queueMicrotask(_?_e.bind(null,y):at),y!==st&&(st=y,w===Hi&&(Hi.env=Zn()),bn)){var D=Hi.env.Promise,I=y.env;(w.global||y.global)&&(Object.defineProperty(r,"Promise",I.PromiseProp),D.all=I.all,D.race=I.race,D.resolve=I.resolve,D.reject=I.reject,I.allSettled&&(D.allSettled=I.allSettled),I.any&&(D.any=I.any))}}function Zn(){var y=r.Promise;return bn?{Promise:y,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:y.all,race:y.race,allSettled:y.allSettled,any:y.any,resolve:y.resolve,reject:y.reject}:{}}function $n(y,_,w,D,I){var L=st;try{return Xt(y,!0),_(w,D,I)}finally{Xt(L,!1)}}function Vs(y,_,w,D){return typeof y!="function"?y:function(){var I=st;w&&Q(),Xt(_,!0);try{return y.apply(this,arguments)}finally{Xt(I,!1),D&&queueMicrotask(Se)}}}function zc(y){Promise===fn&&An.echoes===0?Ar===0?y():enqueueNativeMicroTask(y):setTimeout(y,0)}var Et=ct.reject;function Ad(y,_,w,D){if(!y.idbdb||!y._state.openComplete&&!st.letThrough&&!y._vip){if(y._state.openComplete)return Et(new je.DatabaseClosed(y._state.dbOpenError));if(!y._state.isBeingOpened){if(!y._state.autoOpen)return Et(new je.DatabaseClosed);y.open().catch(nn)}return y._state.dbReadyPromise.then(function(){return Ad(y,_,w,D)})}else{var I=y._createTransaction(_,w,y._dbSchema);try{I.create(),y._state.PR1398_maxLoop=3}catch(L){return L.name===_i.InvalidState&&y.isOpen()&&--y._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),y.close({disableAutoOpen:!1}),y.open().then(function(){return Ad(y,_,w,D)})):Et(L)}return I._promise(_,function(L,U){return O(function(){return st.trans=I,D(L,U,I)})}).then(function(L){if(_==="readwrite")try{I.idbtrans.commit()}catch{}return _==="readonly"?L:I._completion.then(function(){return L})})}}var Md="4.2.1",so="\uFFFF",Mr=-1/0,ao="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kd="String expected.",lo=[],Ia="__dbnames",Gc="readonly",Cl="readwrite";function cs(y,_){return y?_?function(){return y.apply(this,arguments)&&_.apply(this,arguments)}:y:_}var Nd={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xl(y){return typeof y=="string"&&!/\./.test(y)?function(_){return _[y]===void 0&&y in _&&(_=_t(_),delete _[y]),_}:function(_){return _}}function Fd(){throw je.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function rn(y,_){try{var w=co(y),D=co(_);if(w!==D)return w==="Array"?1:D==="Array"?-1:w==="binary"?1:D==="binary"?-1:w==="string"?1:D==="string"?-1:w==="Date"?1:D!=="Date"?NaN:-1;switch(w){case"number":case"Date":case"string":return y>_?1:y<_?-1:0;case"binary":return _h(Ch(y),Ch(_));case"Array":return A_(y,_)}}catch{}return NaN}function A_(y,_){for(var w=y.length,D=_.length,I=w<D?w:D,L=0;L<I;++L){var U=rn(y[L],_[L]);if(U!==0)return U}return w===D?0:w<D?-1:1}function _h(y,_){for(var w=y.length,D=_.length,I=w<D?w:D,L=0;L<I;++L)if(y[L]!==_[L])return y[L]<_[L]?-1:1;return w===D?0:w<D?-1:1}function co(y){var _=typeof y;if(_!=="object")return _;if(ArrayBuffer.isView(y))return"binary";var w=Be(y);return w==="ArrayBuffer"?"binary":w}function Ch(y){return y instanceof Uint8Array?y:ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y)}function $c(y,_,w){var D=y.schema.yProps;return D?(_&&w.numFailures>0&&(_=_.filter(function(I,L){return!w.failures[L]})),Promise.all(D.map(function(I){var L=I.updatesTable;return _?y.db.table(L).where("k").anyOf(_).delete():y.db.table(L).clear()})).then(function(){return w})):w}var us=(function(){function y(_){this["@@propmod"]=_}return y.prototype.execute=function(_){var w,D=this["@@propmod"];if(D.add!==void 0){var I=D.add;if(a(I))return i(i([],a(_)?_:[],!0),I,!0).sort();if(typeof I=="number")return(Number(_)||0)+I;if(typeof I=="bigint")try{return BigInt(_)+I}catch{return BigInt(0)+I}throw new TypeError("Invalid term ".concat(I))}if(D.remove!==void 0){var L=D.remove;if(a(L))return a(_)?_.filter(function(W){return!L.includes(W)}).sort():[];if(typeof L=="number")return Number(_)-L;if(typeof L=="bigint")try{return BigInt(_)-L}catch{return BigInt(0)-L}throw new TypeError("Invalid subtrahend ".concat(L))}var U=(w=D.replacePrefix)===null||w===void 0?void 0:w[0];return U&&typeof _=="string"&&_.startsWith(U)?D.replacePrefix[1]+_.substring(U.length):_},y})();function Aa(y,_){for(var w=s(_),D=w.length,I=!1,L=0;L<D;++L){var U=w[L],W=_[U],J=me(y,U);W instanceof us?(ye(y,U,W.execute(J)),I=!0):J!==W&&(ye(y,U,W),I=!0)}return I}var xh=(function(){function y(){}return y.prototype._trans=function(_,w,D){var I=this._tx||st.trans,L=this.name,U=oi&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(_==="readonly"?"read":"write"," ").concat(this.name));function W(de,ae,Ie){if(!Ie.schema[L])throw new je.NotFound("Table "+L+" not part of transaction");return w(Ie.idbtrans,Ie)}var J=Fi();try{var re=I&&I.db._novip===this.db._novip?I===st.trans?I._promise(_,W,D):O(function(){return I._promise(_,W,D)},{trans:I,transless:st.transless||st}):Ad(this.db,_,[this.name],W);return U&&(re._consoleTask=U,re=re.catch(function(de){return console.trace(de),Et(de)})),re}finally{J&&Ir()}},y.prototype.get=function(_,w){var D=this;return _&&_.constructor===Object?this.where(_).first(w):_==null?Et(new je.Type("Invalid argument to Table.get()")):this._trans("readonly",function(I){return D.core.get({trans:I,key:_}).then(function(L){return D.hook.reading.fire(L)})}).then(w)},y.prototype.where=function(_){if(typeof _=="string")return new this.db.WhereClause(this,_);if(a(_))return new this.db.WhereClause(this,"[".concat(_.join("+"),"]"));var w=s(_);if(w.length===1)return this.where(w[0]).equals(_[w[0]]);var D=this.schema.indexes.concat(this.schema.primKey).filter(function(de){if(de.compound&&w.every(function(Ie){return de.keyPath.indexOf(Ie)>=0})){for(var ae=0;ae<w.length;++ae)if(w.indexOf(de.keyPath[ae])===-1)return!1;return!0}return!1}).sort(function(de,ae){return de.keyPath.length-ae.keyPath.length})[0];if(D&&this.db._maxKey!==so){var I=D.keyPath.slice(0,w.length);return this.where(I).equals(I.map(function(de){return _[de]}))}!D&&oi&&console.warn("The query ".concat(JSON.stringify(_)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(w.join("+"),"]"));var L=this.schema.idxByName;function U(de,ae){return rn(de,ae)===0}var W=w.reduce(function(de,ae){var Ie=de[0],$e=de[1],ce=L[ae],ve=_[ae];return[Ie||ce,Ie||!ce?cs($e,ce&&ce.multi?function(De){var Ne=me(De,ae);return a(Ne)&&Ne.some(function(Oe){return U(ve,Oe)})}:function(De){return U(ve,me(De,ae))}):$e]},[null,null]),J=W[0],re=W[1];return J?this.where(J.name).equals(_[J.keyPath]).filter(re):D?this.filter(re):this.where(w).equals("")},y.prototype.filter=function(_){return this.toCollection().and(_)},y.prototype.count=function(_){return this.toCollection().count(_)},y.prototype.offset=function(_){return this.toCollection().offset(_)},y.prototype.limit=function(_){return this.toCollection().limit(_)},y.prototype.each=function(_){return this.toCollection().each(_)},y.prototype.toArray=function(_){return this.toCollection().toArray(_)},y.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},y.prototype.orderBy=function(_){return new this.db.Collection(new this.db.WhereClause(this,a(_)?"[".concat(_.join("+"),"]"):_))},y.prototype.reverse=function(){return this.toCollection().reverse()},y.prototype.mapToClass=function(_){var w=this,D=w.db,I=w.name;this.schema.mappedClass=_,_.prototype instanceof Fd&&(_=(function(J){e(re,J);function re(){return J!==null&&J.apply(this,arguments)||this}return Object.defineProperty(re.prototype,"db",{get:function(){return D},enumerable:!1,configurable:!0}),re.prototype.table=function(){return I},re})(_));for(var L=new Set,U=_.prototype;U;U=u(U))Object.getOwnPropertyNames(U).forEach(function(J){return L.add(J)});var W=function(J){if(!J)return J;var re=Object.create(_.prototype);for(var de in J)if(!L.has(de))try{re[de]=J[de]}catch{}return re};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=W,this.hook("reading",W),_},y.prototype.defineClass=function(){function _(w){c(this,w)}return this.mapToClass(_)},y.prototype.add=function(_,w){var D=this,I=this.schema.primKey,L=I.auto,U=I.keyPath,W=_;return U&&L&&(W=xl(U)(_)),this._trans("readwrite",function(J){return D.core.mutate({trans:J,type:"add",keys:w!=null?[w]:null,values:[W]})}).then(function(J){return J.numFailures?ct.reject(J.failures[0]):J.lastResult}).then(function(J){if(U)try{ye(_,U,J)}catch{}return J})},y.prototype.upsert=function(_,w){var D=this,I=this.schema.primKey.keyPath;return this._trans("readwrite",function(L){return D.core.get({trans:L,key:_}).then(function(U){var W=U??{};return Aa(W,w),I&&ye(W,I,_),D.core.mutate({trans:L,type:"put",values:[W],keys:[_],upsert:!0,updates:{keys:[_],changeSpecs:[w]}}).then(function(J){return J.numFailures?ct.reject(J.failures[0]):!!U})})})},y.prototype.update=function(_,w){if(typeof _=="object"&&!a(_)){var D=me(_,this.schema.primKey.keyPath);return D===void 0?Et(new je.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(D).modify(w)}else return this.where(":id").equals(_).modify(w)},y.prototype.put=function(_,w){var D=this,I=this.schema.primKey,L=I.auto,U=I.keyPath,W=_;return U&&L&&(W=xl(U)(_)),this._trans("readwrite",function(J){return D.core.mutate({trans:J,type:"put",values:[W],keys:w!=null?[w]:null})}).then(function(J){return J.numFailures?ct.reject(J.failures[0]):J.lastResult}).then(function(J){if(U)try{ye(_,U,J)}catch{}return J})},y.prototype.delete=function(_){var w=this;return this._trans("readwrite",function(D){return w.core.mutate({trans:D,type:"delete",keys:[_]}).then(function(I){return $c(w,[_],I)}).then(function(I){return I.numFailures?ct.reject(I.failures[0]):void 0})})},y.prototype.clear=function(){var _=this;return this._trans("readwrite",function(w){return _.core.mutate({trans:w,type:"deleteRange",range:Nd}).then(function(D){return $c(_,null,D)})}).then(function(w){return w.numFailures?ct.reject(w.failures[0]):void 0})},y.prototype.bulkGet=function(_){var w=this;return this._trans("readonly",function(D){return w.core.getMany({keys:_,trans:D}).then(function(I){return I.map(function(L){return w.hook.reading.fire(L)})})})},y.prototype.bulkAdd=function(_,w,D){var I=this,L=Array.isArray(w)?w:void 0;D=D||(L?void 0:w);var U=D?D.allKeys:void 0;return this._trans("readwrite",function(W){var J=I.schema.primKey,re=J.auto,de=J.keyPath;if(de&&L)throw new je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(L&&L.length!==_.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");var ae=_.length,Ie=de&&re?_.map(xl(de)):_;return I.core.mutate({trans:W,type:"add",keys:L,values:Ie,wantResults:U}).then(function($e){var ce=$e.numFailures,ve=$e.results,De=$e.lastResult,Ne=$e.failures,Oe=U?ve:De;if(ce===0)return Oe;throw new Jn("".concat(I.name,".bulkAdd(): ").concat(ce," of ").concat(ae," operations failed"),Ne)})})},y.prototype.bulkPut=function(_,w,D){var I=this,L=Array.isArray(w)?w:void 0;D=D||(L?void 0:w);var U=D?D.allKeys:void 0;return this._trans("readwrite",function(W){var J=I.schema.primKey,re=J.auto,de=J.keyPath;if(de&&L)throw new je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(L&&L.length!==_.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");var ae=_.length,Ie=de&&re?_.map(xl(de)):_;return I.core.mutate({trans:W,type:"put",keys:L,values:Ie,wantResults:U}).then(function($e){var ce=$e.numFailures,ve=$e.results,De=$e.lastResult,Ne=$e.failures,Oe=U?ve:De;if(ce===0)return Oe;throw new Jn("".concat(I.name,".bulkPut(): ").concat(ce," of ").concat(ae," operations failed"),Ne)})})},y.prototype.bulkUpdate=function(_){var w=this,D=this.core,I=_.map(function(W){return W.key}),L=_.map(function(W){return W.changes}),U=[];return this._trans("readwrite",function(W){return D.getMany({trans:W,keys:I,cache:"clone"}).then(function(J){var re=[],de=[];_.forEach(function(Ie,$e){var ce=Ie.key,ve=Ie.changes,De=J[$e];if(De){for(var Ne=0,Oe=Object.keys(ve);Ne<Oe.length;Ne++){var Ve=Oe[Ne],He=ve[Ve];if(Ve===w.schema.primKey.keyPath){if(rn(He,ce)!==0)throw new je.Constraint("Cannot update primary key in bulkUpdate()")}else ye(De,Ve,He)}U.push($e),re.push(ce),de.push(De)}});var ae=re.length;return D.mutate({trans:W,type:"put",keys:re,values:de,updates:{keys:I,changeSpecs:L}}).then(function(Ie){var $e=Ie.numFailures,ce=Ie.failures;if($e===0)return ae;for(var ve=0,De=Object.keys(ce);ve<De.length;ve++){var Ne=De[ve],Oe=U[Number(Ne)];if(Oe!=null){var Ve=ce[Ne];delete ce[Ne],ce[Oe]=Ve}}throw new Jn("".concat(w.name,".bulkUpdate(): ").concat($e," of ").concat(ae," operations failed"),ce)})})})},y.prototype.bulkDelete=function(_){var w=this,D=_.length;return this._trans("readwrite",function(I){return w.core.mutate({trans:I,type:"delete",keys:_}).then(function(L){return $c(w,_,L)})}).then(function(I){var L=I.numFailures,U=I.lastResult,W=I.failures;if(L===0)return U;throw new Jn("".concat(w.name,".bulkDelete(): ").concat(L," of ").concat(D," operations failed"),W)})},y})();function bl(y){var _={},w=function(W,J){if(J){for(var re=arguments.length,de=new Array(re-1);--re;)de[re-1]=arguments[re];return _[W].subscribe.apply(null,de),y}else if(typeof W=="string")return _[W]};w.addEventType=L;for(var D=1,I=arguments.length;D<I;++D)L(arguments[D]);return w;function L(W,J,re){if(typeof W=="object")return U(W);J||(J=Vi),re||(re=nn);var de={subscribers:[],fire:re,subscribe:function(ae){de.subscribers.indexOf(ae)===-1&&(de.subscribers.push(ae),de.fire=J(de.fire,ae))},unsubscribe:function(ae){de.subscribers=de.subscribers.filter(function(Ie){return Ie!==ae}),de.fire=de.subscribers.reduce(J,re)}};return _[W]=w[W]=de,de}function U(W){s(W).forEach(function(J){var re=W[J];if(a(re))L(J,W[J][0],W[J][1]);else if(re==="asap")var de=L(J,ro,function(){for(var Ie=arguments.length,$e=new Array(Ie);Ie--;)$e[Ie]=arguments[Ie];de.subscribers.forEach(function(ce){X(function(){ce.apply(null,$e)})})});else throw new je.InvalidArgument("Invalid event config")})}}function wl(y,_){return A(_).from({prototype:y}),_}function M_(y){return wl(xh.prototype,function(w,D,I){this.db=y,this._tx=I,this.name=w,this.schema=D,this.hook=y._allTables[w]?y._allTables[w].hook:bl(null,{creating:[ba,nn],reading:[wr,ro],updating:[Tn,nn],deleting:[Er,nn]})})}function ds(y,_){return!(y.filter||y.algorithm||y.or)&&(_?y.justLimit:!y.replayFilter)}function qc(y,_){y.filter=cs(y.filter,_)}function Rd(y,_,w){var D=y.replayFilter;y.replayFilter=D?function(){return cs(D(),_())}:_,y.justLimit=w&&!D}function bh(y,_){y.isMatch=cs(y.isMatch,_)}function El(y,_){if(y.isPrimKey)return _.primaryKey;var w=_.getIndexByKeyPath(y.index);if(!w)throw new je.Schema("KeyPath "+y.index+" on object store "+_.name+" is not indexed");return w}function Sl(y,_,w){var D=El(y,_.schema);return _.openCursor({trans:w,values:!y.keysOnly,reverse:y.dir==="prev",unique:!!y.unique,query:{index:D,range:y.range}})}function Bs(y,_,w,D){var I=y.replayFilter?cs(y.filter,y.replayFilter()):y.filter;if(y.or){var L={},U=function(W,J,re){if(!I||I(J,re,function(Ie){return J.stop(Ie)},function(Ie){return J.fail(Ie)})){var de=J.primaryKey,ae=""+de;ae==="[object ArrayBuffer]"&&(ae=""+new Uint8Array(de)),m(L,ae)||(L[ae]=!0,_(W,J,re))}};return Promise.all([y.or._iterate(U,w),Wc(Sl(y,D,w),y.algorithm,U,!y.keysOnly&&y.valueMapper)])}else return Wc(Sl(y,D,w),cs(y.algorithm,I),_,!y.keysOnly&&y.valueMapper)}function Wc(y,_,w,D){var I=D?function(U,W,J){return w(D(U),W,J)}:w,L=vn(I);return y.then(function(U){if(U)return U.start(function(){var W=function(){return U.continue()};(!_||_(U,function(J){return W=J},function(J){U.stop(J),W=nn},function(J){U.fail(J),W=nn}))&&L(U.value,U,function(J){return W=J}),W()})})}var wh=(function(){function y(){}return y.prototype._read=function(_,w){var D=this._ctx;return D.error?D.table._trans(null,Et.bind(null,D.error)):D.table._trans("readonly",_).then(w)},y.prototype._write=function(_){var w=this._ctx;return w.error?w.table._trans(null,Et.bind(null,w.error)):w.table._trans("readwrite",_,"locked")},y.prototype._addAlgorithm=function(_){var w=this._ctx;w.algorithm=cs(w.algorithm,_)},y.prototype._iterate=function(_,w){return Bs(this._ctx,_,w,this._ctx.table.core)},y.prototype.clone=function(_){var w=Object.create(this.constructor.prototype),D=Object.create(this._ctx);return _&&c(D,_),w._ctx=D,w},y.prototype.raw=function(){return this._ctx.valueMapper=null,this},y.prototype.each=function(_){var w=this._ctx;return this._read(function(D){return Bs(w,_,D,w.table.core)})},y.prototype.count=function(_){var w=this;return this._read(function(D){var I=w._ctx,L=I.table.core;if(ds(I,!0))return L.count({trans:D,query:{index:El(I,L.schema),range:I.range}}).then(function(W){return Math.min(W,I.limit)});var U=0;return Bs(I,function(){return++U,!1},D,L).then(function(){return U})}).then(_)},y.prototype.sortBy=function(_,w){var D=_.split(".").reverse(),I=D[0],L=D.length-1;function U(re,de){return de?U(re[D[de]],de-1):re[I]}var W=this._ctx.dir==="next"?1:-1;function J(re,de){var ae=U(re,L),Ie=U(de,L);return rn(ae,Ie)*W}return this.toArray(function(re){return re.sort(J)}).then(w)},y.prototype.toArray=function(_){var w=this;return this._read(function(D){var I=w._ctx;if(I.dir==="next"&&ds(I,!0)&&I.limit>0){var L=I.valueMapper,U=El(I,I.table.core.schema);return I.table.core.query({trans:D,limit:I.limit,values:!0,query:{index:U,range:I.range}}).then(function(J){var re=J.result;return L?re.map(L):re})}else{var W=[];return Bs(I,function(J){return W.push(J)},D,I.table.core).then(function(){return W})}},_)},y.prototype.offset=function(_){var w=this._ctx;return _<=0?this:(w.offset+=_,ds(w)?Rd(w,function(){var D=_;return function(I,L){return D===0?!0:D===1?(--D,!1):(L(function(){I.advance(D),D=0}),!1)}}):Rd(w,function(){var D=_;return function(){return--D<0}}),this)},y.prototype.limit=function(_){return this._ctx.limit=Math.min(this._ctx.limit,_),Rd(this._ctx,function(){var w=_;return function(D,I,L){return--w<=0&&I(L),w>=0}},!0),this},y.prototype.until=function(_,w){return qc(this._ctx,function(D,I,L){return _(D.value)?(I(L),w):!0}),this},y.prototype.first=function(_){return this.limit(1).toArray(function(w){return w[0]}).then(_)},y.prototype.last=function(_){return this.reverse().first(_)},y.prototype.filter=function(_){return qc(this._ctx,function(w){return _(w.value)}),bh(this._ctx,_),this},y.prototype.and=function(_){return this.filter(_)},y.prototype.or=function(_){return new this.db.WhereClause(this._ctx.table,_,this)},y.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},y.prototype.desc=function(){return this.reverse()},y.prototype.eachKey=function(_){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(D,I){_(I.key,I)})},y.prototype.eachUniqueKey=function(_){return this._ctx.unique="unique",this.eachKey(_)},y.prototype.eachPrimaryKey=function(_){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(D,I){_(I.primaryKey,I)})},y.prototype.keys=function(_){var w=this._ctx;w.keysOnly=!w.isMatch;var D=[];return this.each(function(I,L){D.push(L.key)}).then(function(){return D}).then(_)},y.prototype.primaryKeys=function(_){var w=this._ctx;if(w.dir==="next"&&ds(w,!0)&&w.limit>0)return this._read(function(I){var L=El(w,w.table.core.schema);return w.table.core.query({trans:I,values:!1,limit:w.limit,query:{index:L,range:w.range}})}).then(function(I){var L=I.result;return L}).then(_);w.keysOnly=!w.isMatch;var D=[];return this.each(function(I,L){D.push(L.primaryKey)}).then(function(){return D}).then(_)},y.prototype.uniqueKeys=function(_){return this._ctx.unique="unique",this.keys(_)},y.prototype.firstKey=function(_){return this.limit(1).keys(function(w){return w[0]}).then(_)},y.prototype.lastKey=function(_){return this.reverse().firstKey(_)},y.prototype.distinct=function(){var _=this._ctx,w=_.index&&_.table.schema.idxByName[_.index];if(!w||!w.multi)return this;var D={};return qc(this._ctx,function(I){var L=I.primaryKey.toString(),U=m(D,L);return D[L]=!0,!U}),this},y.prototype.modify=function(_){var w=this,D=this._ctx;return this._write(function(I){var L;typeof _=="function"?L=_:L=function(Ne){return Aa(Ne,_)};var U=D.table.core,W=U.schema.primaryKey,J=W.outbound,re=W.extractKey,de=200,ae=w.db._options.modifyChunkSize;ae&&(typeof ae=="object"?de=ae[U.name]||ae["*"]||200:de=ae);var Ie=[],$e=0,ce=[],ve=function(Ne,Oe){var Ve=Oe.failures,He=Oe.numFailures;$e+=Ne-He;for(var Me=0,We=s(Ve);Me<We.length;Me++){var nt=We[Me];Ie.push(Ve[nt])}},De=_===Pd;return w.clone().primaryKeys().then(function(Ne){var Oe=ds(D)&&D.limit===1/0&&(typeof _!="function"||De)&&{index:D.index,range:D.range},Ve=function(He){var Me=Math.min(de,Ne.length-He),We=Ne.slice(He,He+Me);return(De?Promise.resolve([]):U.getMany({trans:I,keys:We,cache:"immutable"})).then(function(nt){var Ke=[],kt=[],Kt=J?[]:null,mt=De?We:[];if(!De)for(var Wt=0;Wt<Me;++Wt){var Pt=nt[Wt],on={value:_t(Pt),primKey:Ne[He+Wt]};L.call(on,on.value,on)!==!1&&(on.value==null?mt.push(Ne[He+Wt]):!J&&rn(re(Pt),re(on.value))!==0?(mt.push(Ne[He+Wt]),Ke.push(on.value)):(kt.push(on.value),J&&Kt.push(Ne[He+Wt])))}return Promise.resolve(Ke.length>0&&U.mutate({trans:I,type:"add",values:Ke}).then(function(It){for(var Nn in It.failures)mt.splice(parseInt(Nn),1);ve(Ke.length,It)})).then(function(){return(kt.length>0||Oe&&typeof _=="object")&&U.mutate({trans:I,type:"put",keys:Kt,values:kt,criteria:Oe,changeSpec:typeof _!="function"&&_,isAdditionalChunk:He>0}).then(function(It){return ve(kt.length,It)})}).then(function(){return(mt.length>0||Oe&&De)&&U.mutate({trans:I,type:"delete",keys:mt,criteria:Oe,isAdditionalChunk:He>0}).then(function(It){return $c(D.table,mt,It)}).then(function(It){return ve(mt.length,It)})}).then(function(){return Ne.length>He+Me&&Ve(He+de)})})};return Ve(0).then(function(){if(Ie.length>0)throw new Pn("Error modifying one or more objects",Ie,$e,ce);return Ne.length})})})},y.prototype.delete=function(){var _=this._ctx,w=_.range;return ds(_)&&!_.table.schema.yProps&&(_.isPrimKey||w.type===3)?this._write(function(D){var I=_.table.core.schema.primaryKey,L=w;return _.table.core.count({trans:D,query:{index:I,range:L}}).then(function(U){return _.table.core.mutate({trans:D,type:"deleteRange",range:L}).then(function(W){var J=W.failures,re=W.numFailures;if(re)throw new Pn("Could not delete some values",Object.keys(J).map(function(de){return J[de]}),U-re);return U-re})})}):this.modify(Pd)},y})(),Pd=function(y,_){return _.value=null};function jc(y){return wl(wh.prototype,function(w,D){this.db=y;var I=Nd,L=null;if(D)try{I=D()}catch(re){L=re}var U=w._ctx,W=U.table,J=W.hook.reading.fire;this._ctx={table:W,index:U.index,isPrimKey:!U.index||W.schema.primKey.keyPath&&U.index===W.schema.primKey.name,range:I,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:L,or:U.or,valueMapper:J!==ro?J:null}})}function k_(y,_){return y<_?-1:y===_?0:1}function Eh(y,_){return y>_?-1:y===_?0:1}function kn(y,_,w){var D=y instanceof Dl?new y.Collection(y):y;return D._ctx.error=w?new w(_):new TypeError(_),D}function Ma(y){return new y.Collection(y,function(){return fo("")}).limit(0)}function N_(y){return y==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()}}function Ld(y){return y==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()}}function Sh(y,_,w,D,I,L){for(var U=Math.min(y.length,D.length),W=-1,J=0;J<U;++J){var re=_[J];if(re!==D[J])return I(y[J],w[J])<0?y.substr(0,J)+w[J]+w.substr(J+1):I(y[J],D[J])<0?y.substr(0,J)+D[J]+w.substr(J+1):W>=0?y.substr(0,W)+_[W]+w.substr(W+1):null;I(y[J],re)<0&&(W=J)}return U<D.length&&L==="next"?y+w.substr(y.length):U<y.length&&L==="prev"?y.substr(0,w.length):W<0?null:y.substr(0,W)+D[W]+w.substr(W+1)}function jr(y,_,w,D){var I,L,U,W,J,re,de,ae=w.length;if(!w.every(function(ve){return typeof ve=="string"}))return kn(y,kd);function Ie(ve){I=N_(ve),L=Ld(ve),U=ve==="next"?k_:Eh;var De=w.map(function(Ne){return{lower:L(Ne),upper:I(Ne)}}).sort(function(Ne,Oe){return U(Ne.lower,Oe.lower)});W=De.map(function(Ne){return Ne.upper}),J=De.map(function(Ne){return Ne.lower}),re=ve,de=ve==="next"?"":D}Ie("next");var $e=new y.Collection(y,function(){return uo(W[0],J[ae-1]+D)});$e._ondirectionchange=function(ve){Ie(ve)};var ce=0;return $e._addAlgorithm(function(ve,De,Ne){var Oe=ve.key;if(typeof Oe!="string")return!1;var Ve=L(Oe);if(_(Ve,J,ce))return!0;for(var He=null,Me=ce;Me<ae;++Me){var We=Sh(Oe,Ve,W[Me],J[Me],U,re);We===null&&He===null?ce=Me+1:(He===null||U(He,We)>0)&&(He=We)}return De(He!==null?function(){ve.continue(He+de)}:Ne),!1}),$e}function uo(y,_,w,D){return{type:2,lower:y,upper:_,lowerOpen:w,upperOpen:D}}function fo(y){return{type:1,lower:y,upper:y}}var Dl=(function(){function y(){}return Object.defineProperty(y.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),y.prototype.between=function(_,w,D,I){D=D!==!1,I=I===!0;try{return this._cmp(_,w)>0||this._cmp(_,w)===0&&(D||I)&&!(D&&I)?Ma(this):new this.Collection(this,function(){return uo(_,w,!D,!I)})}catch{return kn(this,ao)}},y.prototype.equals=function(_){return _==null?kn(this,ao):new this.Collection(this,function(){return fo(_)})},y.prototype.above=function(_){return _==null?kn(this,ao):new this.Collection(this,function(){return uo(_,void 0,!0)})},y.prototype.aboveOrEqual=function(_){return _==null?kn(this,ao):new this.Collection(this,function(){return uo(_,void 0,!1)})},y.prototype.below=function(_){return _==null?kn(this,ao):new this.Collection(this,function(){return uo(void 0,_,!1,!0)})},y.prototype.belowOrEqual=function(_){return _==null?kn(this,ao):new this.Collection(this,function(){return uo(void 0,_)})},y.prototype.startsWith=function(_){return typeof _!="string"?kn(this,kd):this.between(_,_+so,!0,!0)},y.prototype.startsWithIgnoreCase=function(_){return _===""?this.startsWith(_):jr(this,function(w,D){return w.indexOf(D[0])===0},[_],so)},y.prototype.equalsIgnoreCase=function(_){return jr(this,function(w,D){return w===D[0]},[_],"")},y.prototype.anyOfIgnoreCase=function(){var _=Ze.apply(Ct,arguments);return _.length===0?Ma(this):jr(this,function(w,D){return D.indexOf(w)!==-1},_,"")},y.prototype.startsWithAnyOfIgnoreCase=function(){var _=Ze.apply(Ct,arguments);return _.length===0?Ma(this):jr(this,function(w,D){return D.some(function(I){return w.indexOf(I)===0})},_,so)},y.prototype.anyOf=function(){var _=this,w=Ze.apply(Ct,arguments),D=this._cmp;try{w.sort(D)}catch{return kn(this,ao)}if(w.length===0)return Ma(this);var I=new this.Collection(this,function(){return uo(w[0],w[w.length-1])});I._ondirectionchange=function(U){D=U==="next"?_._ascending:_._descending,w.sort(D)};var L=0;return I._addAlgorithm(function(U,W,J){for(var re=U.key;D(re,w[L])>0;)if(++L,L===w.length)return W(J),!1;return D(re,w[L])===0?!0:(W(function(){U.continue(w[L])}),!1)}),I},y.prototype.notEqual=function(_){return this.inAnyRange([[Mr,_],[_,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},y.prototype.noneOf=function(){var _=Ze.apply(Ct,arguments);if(_.length===0)return new this.Collection(this);try{_.sort(this._ascending)}catch{return kn(this,ao)}var w=_.reduce(function(D,I){return D?D.concat([[D[D.length-1][1],I]]):[[Mr,I]]},null);return w.push([_[_.length-1],this.db._maxKey]),this.inAnyRange(w,{includeLowers:!1,includeUppers:!1})},y.prototype.inAnyRange=function(_,w){var D=this,I=this._cmp,L=this._ascending,U=this._descending,W=this._min,J=this._max;if(_.length===0)return Ma(this);if(!_.every(function(Me){return Me[0]!==void 0&&Me[1]!==void 0&&L(Me[0],Me[1])<=0}))return kn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",je.InvalidArgument);var re=!w||w.includeLowers!==!1,de=w&&w.includeUppers===!0;function ae(Me,We){for(var nt=0,Ke=Me.length;nt<Ke;++nt){var kt=Me[nt];if(I(We[0],kt[1])<0&&I(We[1],kt[0])>0){kt[0]=W(kt[0],We[0]),kt[1]=J(kt[1],We[1]);break}}return nt===Ke&&Me.push(We),Me}var Ie=L;function $e(Me,We){return Ie(Me[0],We[0])}var ce;try{ce=_.reduce(ae,[]),ce.sort($e)}catch{return kn(this,ao)}var ve=0,De=de?function(Me){return L(Me,ce[ve][1])>0}:function(Me){return L(Me,ce[ve][1])>=0},Ne=re?function(Me){return U(Me,ce[ve][0])>0}:function(Me){return U(Me,ce[ve][0])>=0};function Oe(Me){return!De(Me)&&!Ne(Me)}var Ve=De,He=new this.Collection(this,function(){return uo(ce[0][0],ce[ce.length-1][1],!re,!de)});return He._ondirectionchange=function(Me){Me==="next"?(Ve=De,Ie=L):(Ve=Ne,Ie=U),ce.sort($e)},He._addAlgorithm(function(Me,We,nt){for(var Ke=Me.key;Ve(Ke);)if(++ve,ve===ce.length)return We(nt),!1;return Oe(Ke)?!0:(D._cmp(Ke,ce[ve][1])===0||D._cmp(Ke,ce[ve][0])===0||We(function(){Ie===L?Me.continue(ce[ve][0]):Me.continue(ce[ve][1])}),!1)}),He},y.prototype.startsWithAnyOf=function(){var _=Ze.apply(Ct,arguments);return _.every(function(w){return typeof w=="string"})?_.length===0?Ma(this):this.inAnyRange(_.map(function(w){return[w,w+so]})):kn(this,"startsWithAnyOf() only works with strings")},y})();function Od(y){return wl(Dl.prototype,function(w,D,I){if(this.db=y,this._ctx={table:w,index:D===":id"?null:D,or:I},this._cmp=this._ascending=rn,this._descending=function(L,U){return rn(U,L)},this._max=function(L,U){return rn(L,U)>0?L:U},this._min=function(L,U){return rn(L,U)<0?L:U},this._IDBKeyRange=y._deps.IDBKeyRange,!this._IDBKeyRange)throw new je.MissingAPI})}function zi(y){return vn(function(_){return Tl(_),y(_.target.error),!1})}function Tl(y){y.stopPropagation&&y.stopPropagation(),y.preventDefault&&y.preventDefault()}var Il="storagemutated",Vd="x-storagemutated-1",fs=bl(null,Il),Dh=(function(){function y(){}return y.prototype._lock=function(){return q(!st.global),++this._reculock,this._reculock===1&&!st.global&&(st.lockOwnerFor=this),this},y.prototype._unlock=function(){if(q(!st.global),--this._reculock===0)for(st.global||(st.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var _=this._blockedFuncs.shift();try{$n(_[1],_[0])}catch{}}return this},y.prototype._locked=function(){return this._reculock&&st.lockOwnerFor!==this},y.prototype.create=function(_){var w=this;if(!this.mode)return this;var D=this.db.idbdb,I=this.db._state.dbOpenError;if(q(!this.idbtrans),!_&&!D)switch(I&&I.name){case"DatabaseClosedError":throw new je.DatabaseClosed(I);case"MissingAPIError":throw new je.MissingAPI(I.message,I);default:throw new je.OpenFailed(I)}if(!this.active)throw new je.TransactionInactive;return q(this._completion._state===null),_=this.idbtrans=_||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):D.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),_.onerror=vn(function(L){Tl(L),w._reject(_.error)}),_.onabort=vn(function(L){Tl(L),w.active&&w._reject(new je.Abort(_.error)),w.active=!1,w.on("abort").fire(L)}),_.oncomplete=vn(function(){w.active=!1,w._resolve(),"mutatedParts"in _&&fs.storagemutated.fire(_.mutatedParts)}),this},y.prototype._promise=function(_,w,D){var I=this;if(_==="readwrite"&&this.mode!=="readwrite")return Et(new je.ReadOnly("Transaction is readonly"));if(!this.active)return Et(new je.TransactionInactive);if(this._locked())return new ct(function(U,W){I._blockedFuncs.push([function(){I._promise(_,w,D).then(U,W)},st])});if(D)return O(function(){var U=new ct(function(W,J){I._lock();var re=w(W,J,I);re&&re.then&&re.then(W,J)});return U.finally(function(){return I._unlock()}),U._lib=!0,U});var L=new ct(function(U,W){var J=w(U,W,I);J&&J.then&&J.then(U,W)});return L._lib=!0,L},y.prototype._root=function(){return this.parent?this.parent._root():this},y.prototype.waitFor=function(_){var w=this._root(),D=ct.resolve(_);if(w._waitingFor)w._waitingFor=w._waitingFor.then(function(){return D});else{w._waitingFor=D,w._waitingQueue=[];var I=w.idbtrans.objectStore(w.storeNames[0]);(function U(){for(++w._spinCount;w._waitingQueue.length;)w._waitingQueue.shift()();w._waitingFor&&(I.get(-1/0).onsuccess=U)})()}var L=w._waitingFor;return new ct(function(U,W){D.then(function(J){return w._waitingQueue.push(vn(U.bind(null,J)))},function(J){return w._waitingQueue.push(vn(W.bind(null,J)))}).finally(function(){w._waitingFor===L&&(w._waitingFor=null)})})},y.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new je.Abort))},y.prototype.table=function(_){var w=this._memoizedTables||(this._memoizedTables={});if(m(w,_))return w[_];var D=this.schema[_];if(!D)throw new je.NotFound("Table "+_+" not part of transaction");var I=new this.db.Table(_,D,this);return I.core=this.db.core.table(_),w[_]=I,I},y})();function Th(y){return wl(Dh.prototype,function(w,D,I,L,U){var W=this;w!=="readonly"&&D.forEach(function(J){var re,de=(re=I[J])===null||re===void 0?void 0:re.yProps;de&&(D=D.concat(de.map(function(ae){return ae.updatesTable})))}),this.db=y,this.mode=w,this.storeNames=D,this.schema=I,this.chromeTransactionDurability=L,this.idbtrans=null,this.on=bl(this,"complete","error","abort"),this.parent=U||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ct(function(J,re){W._resolve=J,W._reject=re}),this._completion.then(function(){W.active=!1,W.on.complete.fire()},function(J){var re=W.active;return W.active=!1,W.on.error.fire(J),W.parent?W.parent._reject(J):re&&W.idbtrans&&W.idbtrans.abort(),Et(J)})})}function Bd(y,_,w,D,I,L,U,W){return{name:y,keyPath:_,unique:w,multi:D,auto:I,compound:L,src:(w&&!U?"&":"")+(D?"*":"")+(I?"++":"")+Ih(_),type:W}}function Ih(y){return typeof y=="string"?y:y?"["+[].join.call(y,"+")+"]":""}function Hd(y,_,w){return{name:y,primKey:_,indexes:w,mappedClass:null,idxByName:ie(w,function(D){return[D.name,D]})}}function F_(y){return y.length===1?y[0]:y}var ka=function(y){try{return y.only([[]]),ka=function(){return[[]]},[[]]}catch{return ka=function(){return so},so}};function Ud(y){return y==null?function(){}:typeof y=="string"?Ah(y):function(_){return me(_,y)}}function Ah(y){var _=y.split(".");return _.length===1?function(w){return w[y]}:function(w){return me(w,y)}}function Al(y){return[].slice.call(y)}var Na=0;function Ml(y){return y==null?":id":typeof y=="string"?y:"[".concat(y.join("+"),"]")}function R_(y,_,w){function D(ae,Ie){var $e=Al(ae.objectStoreNames);return{schema:{name:ae.name,tables:$e.map(function(ce){return Ie.objectStore(ce)}).map(function(ce){var ve=ce.keyPath,De=ce.autoIncrement,Ne=a(ve),Oe=ve==null,Ve={},He={name:ce.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Oe,compound:Ne,keyPath:ve,autoIncrement:De,unique:!0,extractKey:Ud(ve)},indexes:Al(ce.indexNames).map(function(Me){return ce.index(Me)}).map(function(Me){var We=Me.name,nt=Me.unique,Ke=Me.multiEntry,kt=Me.keyPath,Kt=a(kt),mt={name:We,compound:Kt,keyPath:kt,unique:nt,multiEntry:Ke,extractKey:Ud(kt)};return Ve[Ml(kt)]=mt,mt}),getIndexByKeyPath:function(Me){return Ve[Ml(Me)]}};return Ve[":id"]=He.primaryKey,ve!=null&&(Ve[Ml(ve)]=He.primaryKey),He})},hasGetAll:$e.length>0&&"getAll"in Ie.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function I(ae){if(ae.type===3)return null;if(ae.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ie=ae.lower,$e=ae.upper,ce=ae.lowerOpen,ve=ae.upperOpen,De=Ie===void 0?$e===void 0?null:_.upperBound($e,!!ve):$e===void 0?_.lowerBound(Ie,!!ce):_.bound(Ie,$e,!!ce,!!ve);return De}function L(ae){var Ie=ae.name;function $e(De){var Ne=De.trans,Oe=De.type,Ve=De.keys,He=De.values,Me=De.range;return new Promise(function(We,nt){We=vn(We);var Ke=Ne.objectStore(Ie),kt=Ke.keyPath==null,Kt=Oe==="put"||Oe==="add";if(!Kt&&Oe!=="delete"&&Oe!=="deleteRange")throw new Error("Invalid operation type: "+Oe);var mt=(Ve||He||{length:1}).length;if(Ve&&He&&Ve.length!==He.length)throw new Error("Given keys array must have same length as given values array.");if(mt===0)return We({numFailures:0,failures:{},results:[],lastResult:void 0});var Wt,Pt=[],on=[],It=0,Nn=function(Yr){++It,Tl(Yr)};if(Oe==="deleteRange"){if(Me.type===4)return We({numFailures:It,failures:on,results:[],lastResult:void 0});Me.type===3?Pt.push(Wt=Ke.clear()):Pt.push(Wt=Ke.delete(I(Me)))}else{var fi=Kt?kt?[He,Ve]:[He,null]:[Ve,null],go=fi[0],Ri=fi[1];if(Kt)for(var er=0;er<mt;++er)Pt.push(Wt=Ri&&Ri[er]!==void 0?Ke[Oe](go[er],Ri[er]):Ke[Oe](go[er])),Wt.onerror=Nn;else for(var er=0;er<mt;++er)Pt.push(Wt=Ke[Oe](go[er])),Wt.onerror=Nn}var Vo=function(Yr){var qs=Yr.target.result;Pt.forEach(function(Fr,Cs){return Fr.error!=null&&(on[Cs]=Fr.error)}),We({numFailures:It,failures:on,results:Oe==="delete"?Ve:Pt.map(function(Fr){return Fr.result}),lastResult:qs})};Wt.onerror=function(Yr){Nn(Yr),Vo(Yr)},Wt.onsuccess=Vo})}function ce(De){var Ne=De.trans,Oe=De.values,Ve=De.query,He=De.reverse,Me=De.unique;return new Promise(function(We,nt){We=vn(We);var Ke=Ve.index,kt=Ve.range,Kt=Ne.objectStore(Ie),mt=Ke.isPrimaryKey?Kt:Kt.index(Ke.name),Wt=He?Me?"prevunique":"prev":Me?"nextunique":"next",Pt=Oe||!("openKeyCursor"in mt)?mt.openCursor(I(kt),Wt):mt.openKeyCursor(I(kt),Wt);Pt.onerror=zi(nt),Pt.onsuccess=vn(function(on){var It=Pt.result;if(!It){We(null);return}It.___id=++Na,It.done=!1;var Nn=It.continue.bind(It),fi=It.continuePrimaryKey;fi&&(fi=fi.bind(It));var go=It.advance.bind(It),Ri=function(){throw new Error("Cursor not started")},er=function(){throw new Error("Cursor not stopped")};It.trans=Ne,It.stop=It.continue=It.continuePrimaryKey=It.advance=Ri,It.fail=vn(nt),It.next=function(){var Vo=this,Yr=1;return this.start(function(){return Yr--?Vo.continue():Vo.stop()}).then(function(){return Vo})},It.start=function(Vo){var Yr=new Promise(function(Fr,Cs){Fr=vn(Fr),Pt.onerror=zi(Cs),It.fail=Cs,It.stop=function(G_){It.stop=It.continue=It.continuePrimaryKey=It.advance=er,Fr(G_)}}),qs=function(){if(Pt.result)try{Vo()}catch(Fr){It.fail(Fr)}else It.done=!0,It.start=function(){throw new Error("Cursor behind last entry")},It.stop()};return Pt.onsuccess=vn(function(Fr){Pt.onsuccess=qs,qs()}),It.continue=Nn,It.continuePrimaryKey=fi,It.advance=go,qs(),Yr},We(It)},nt)})}function ve(De){return function(Ne){return new Promise(function(Oe,Ve){Oe=vn(Oe);var He=Ne.trans,Me=Ne.values,We=Ne.limit,nt=Ne.query,Ke=We===1/0?void 0:We,kt=nt.index,Kt=nt.range,mt=He.objectStore(Ie),Wt=kt.isPrimaryKey?mt:mt.index(kt.name),Pt=I(Kt);if(We===0)return Oe({result:[]});if(De){var on=Me?Wt.getAll(Pt,Ke):Wt.getAllKeys(Pt,Ke);on.onsuccess=function(go){return Oe({result:go.target.result})},on.onerror=zi(Ve)}else{var It=0,Nn=Me||!("openKeyCursor"in Wt)?Wt.openCursor(Pt):Wt.openKeyCursor(Pt),fi=[];Nn.onsuccess=function(go){var Ri=Nn.result;if(!Ri)return Oe({result:fi});if(fi.push(Me?Ri.value:Ri.primaryKey),++It===We)return Oe({result:fi});Ri.continue()},Nn.onerror=zi(Ve)}})}}return{name:Ie,schema:ae,mutate:$e,getMany:function(De){var Ne=De.trans,Oe=De.keys;return new Promise(function(Ve,He){Ve=vn(Ve);for(var Me=Ne.objectStore(Ie),We=Oe.length,nt=new Array(We),Ke=0,kt=0,Kt,mt=function(It){var Nn=It.target;(nt[Nn._pos]=Nn.result)!=null,++kt===Ke&&Ve(nt)},Wt=zi(He),Pt=0;Pt<We;++Pt){var on=Oe[Pt];on!=null&&(Kt=Me.get(Oe[Pt]),Kt._pos=Pt,Kt.onsuccess=mt,Kt.onerror=Wt,++Ke)}Ke===0&&Ve(nt)})},get:function(De){var Ne=De.trans,Oe=De.key;return new Promise(function(Ve,He){Ve=vn(Ve);var Me=Ne.objectStore(Ie),We=Me.get(Oe);We.onsuccess=function(nt){return Ve(nt.target.result)},We.onerror=zi(He)})},query:ve(J),openCursor:ce,count:function(De){var Ne=De.query,Oe=De.trans,Ve=Ne.index,He=Ne.range;return new Promise(function(Me,We){var nt=Oe.objectStore(Ie),Ke=Ve.isPrimaryKey?nt:nt.index(Ve.name),kt=I(He),Kt=kt?Ke.count(kt):Ke.count();Kt.onsuccess=vn(function(mt){return Me(mt.target.result)}),Kt.onerror=zi(We)})}}}var U=D(y,w),W=U.schema,J=U.hasGetAll,re=W.tables.map(function(ae){return L(ae)}),de={};return re.forEach(function(ae){return de[ae.name]=ae}),{stack:"dbcore",transaction:y.transaction.bind(y),table:function(ae){var Ie=de[ae];if(!Ie)throw new Error("Table '".concat(ae,"' not found"));return de[ae]},MIN_KEY:-1/0,MAX_KEY:ka(_),schema:W}}function P_(y,_){return _.reduce(function(w,D){var I=D.create;return n(n({},w),I(w))},y)}function kl(y,_,w,D){var I=w.IDBKeyRange;w.indexedDB;var L=P_(R_(_,I,D),y.dbcore);return{dbcore:L}}function On(y,_){var w=_.db,D=kl(y._middlewares,w,y._deps,_);y.core=D.dbcore,y.tables.forEach(function(I){var L=I.name;y.core.schema.tables.some(function(U){return U.name===L})&&(I.core=y.core.table(L),y[L]instanceof y.Table&&(y[L].core=I.core))})}function Kc(y,_,w,D){w.forEach(function(I){var L=D[I];_.forEach(function(U){var W=R(U,I);(!W||"value"in W&&W.value===void 0)&&(U===y.Transaction.prototype||U instanceof y.Transaction?E(U,I,{get:function(){return this.table(I)},set:function(J){x(this,I,{value:J,writable:!0,configurable:!0,enumerable:!0})}}):U[I]=new y.Table(I,L))})})}function Yc(y,_){_.forEach(function(w){for(var D in w)w[D]instanceof y.Table&&delete w[D]})}function Nl(y,_){return y._cfg.version-_._cfg.version}function L_(y,_,w,D){var I=y._dbSchema;w.objectStoreNames.contains("$meta")&&!I.$meta&&(I.$meta=Hd("$meta",Xc("")[0],[]),y._storeNames.push("$meta"));var L=y._createTransaction("readwrite",y._storeNames,I);L.create(w),L._completion.catch(D);var U=L._reject.bind(L),W=st.transless||st;O(function(){if(st.trans=L,st.transless=W,_===0)s(I).forEach(function(J){Gd(w,J,I[J].primKey,I[J].indexes)}),On(y,w),ct.follow(function(){return y.on.populate.fire(L)}).catch(U);else return On(y,w),O_(y,L,_).then(function(J){return zd(y,J,L,w)}).catch(U)})}function Mh(y,_){kh(y._dbSchema,_),_.db.version%10===0&&!_.objectStoreNames.contains("$meta")&&_.db.createObjectStore("$meta").add(Math.ceil(_.db.version/10-1),"version");var w=Qc(y,y.idbdb,_);Hs(y,y._dbSchema,_);for(var D=Jc(w,y._dbSchema),I=function(re){if(re.change.length||re.recreate)return console.warn("Unable to patch indexes of table ".concat(re.name," because it has changes on the type of index or primary key.")),{value:void 0};var de=_.objectStore(re.name);re.add.forEach(function(ae){oi&&console.debug("Dexie upgrade patch: Creating missing index ".concat(re.name,".").concat(ae.src)),Fl(de,ae)})},L=0,U=D.change;L<U.length;L++){var W=U[L],J=I(W);if(typeof J=="object")return J.value}}function O_(y,_,w){return _.storeNames.includes("$meta")?_.table("$meta").get("version").then(function(D){return D??w}):ct.resolve(w)}function zd(y,_,w,D){var I=[],L=y._versions,U=y._dbSchema=Qc(y,y.idbdb,D),W=L.filter(function(re){return re._cfg.version>=_});if(W.length===0)return ct.resolve();W.forEach(function(re){I.push(function(){var de=U,ae=re._cfg.dbschema;Hs(y,de,D),Hs(y,ae,D),U=y._dbSchema=ae;var Ie=Jc(de,ae);Ie.add.forEach(function(Oe){Gd(D,Oe[0],Oe[1].primKey,Oe[1].indexes)}),Ie.change.forEach(function(Oe){if(Oe.recreate)throw new je.Upgrade("Not yet support for changing primary key");var Ve=D.objectStore(Oe.name);Oe.add.forEach(function(He){return Fl(Ve,He)}),Oe.change.forEach(function(He){Ve.deleteIndex(He.name),Fl(Ve,He)}),Oe.del.forEach(function(He){return Ve.deleteIndex(He)})});var $e=re._cfg.contentUpgrade;if($e&&re._cfg.version>_){On(y,D),w._memoizedTables={};var ce=Te(ae);Ie.del.forEach(function(Oe){ce[Oe]=de[Oe]}),Yc(y,[y.Transaction.prototype]),Kc(y,[y.Transaction.prototype],s(ce),ce),w.schema=ce;var ve=Qt($e);ve&&Q();var De,Ne=ct.follow(function(){if(De=$e(w),De&&ve){var Oe=Se.bind(null,null);De.then(Oe,Oe)}});return De&&typeof De.then=="function"?ct.resolve(De):Ne.then(function(){return De})}}),I.push(function(de){var ae=re._cfg.dbschema;Nh(ae,de),Yc(y,[y.Transaction.prototype]),Kc(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),w.schema=y._dbSchema}),I.push(function(de){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===re._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function(ae){return ae!=="$meta"})):de.objectStore("$meta").put(re._cfg.version,"version"))})});function J(){return I.length?ct.resolve(I.shift()(w.idbtrans)).then(J):ct.resolve()}return J().then(function(){kh(U,D)})}function Jc(y,_){var w={del:[],add:[],change:[]},D;for(D in y)_[D]||w.del.push(D);for(D in _){var I=y[D],L=_[D];if(!I)w.add.push([D,L]);else{var U={name:D,def:L,recreate:!1,del:[],add:[],change:[]};if(""+(I.primKey.keyPath||"")!=""+(L.primKey.keyPath||"")||I.primKey.auto!==L.primKey.auto)U.recreate=!0,w.change.push(U);else{var W=I.idxByName,J=L.idxByName,re=void 0;for(re in W)J[re]||U.del.push(re);for(re in J){var de=W[re],ae=J[re];de?de.src!==ae.src&&U.change.push(ae):U.add.push(ae)}(U.del.length>0||U.add.length>0||U.change.length>0)&&w.change.push(U)}}}return w}function Gd(y,_,w,D){var I=y.db.createObjectStore(_,w.keyPath?{keyPath:w.keyPath,autoIncrement:w.auto}:{autoIncrement:w.auto});return D.forEach(function(L){return Fl(I,L)}),I}function kh(y,_){s(y).forEach(function(w){_.db.objectStoreNames.contains(w)||(oi&&console.debug("Dexie: Creating missing table",w),Gd(_,w,y[w].primKey,y[w].indexes))})}function Nh(y,_){[].slice.call(_.db.objectStoreNames).forEach(function(w){return y[w]==null&&_.db.deleteObjectStore(w)})}function Fl(y,_){y.createIndex(_.name,_.keyPath,{unique:_.unique,multiEntry:_.multi})}function Qc(y,_,w){var D={},I=B(_.objectStoreNames,0);return I.forEach(function(L){for(var U=w.objectStore(L),W=U.keyPath,J=Bd(Ih(W),W||"",!0,!1,!!U.autoIncrement,W&&typeof W!="string",!0),re=[],de=0;de<U.indexNames.length;++de){var ae=U.index(U.indexNames[de]);W=ae.keyPath;var Ie=Bd(ae.name,W,!!ae.unique,!!ae.multiEntry,!1,W&&typeof W!="string",!1);re.push(Ie)}D[L]=Hd(L,J,re)}),D}function Rl(y,_,w){y.verno=_.version/10;var D=y._dbSchema=Qc(y,_,w);y._storeNames=B(_.objectStoreNames,0),Kc(y,[y._allTables],s(D),D)}function Lo(y,_){var w=Qc(y,y.idbdb,_),D=Jc(w,y._dbSchema);return!(D.add.length||D.change.some(function(I){return I.add.length||I.change.length}))}function Hs(y,_,w){for(var D=w.db.objectStoreNames,I=0;I<D.length;++I){var L=D[I],U=w.objectStore(L);y._hasGetAll="getAll"in U;for(var W=0;W<U.indexNames.length;++W){var J=U.indexNames[W],re=U.index(J).keyPath,de=typeof re=="string"?re:"["+B(re).join("+")+"]";if(_[L]){var ae=_[L].idxByName[de];ae&&(ae.name=J,delete _[L].idxByName[de],_[L].idxByName[J]=ae)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(y._hasGetAll=!1)}function Xc(y){return y.split(",").map(function(_,w){var D,I=_.split(":"),L=(D=I[1])===null||D===void 0?void 0:D.trim();_=I[0].trim();var U=_.replace(/([&*]|\+\+)/g,""),W=/^\[/.test(U)?U.match(/^\[(.*)\]$/)[1].split("+"):U;return Bd(U,W||null,/\&/.test(_),/\*/.test(_),/\+\+/.test(_),a(W),w===0,L)})}var Fh=(function(){function y(){}return y.prototype._createTableSchema=function(_,w,D){return Hd(_,w,D)},y.prototype._parseIndexSyntax=function(_){return Xc(_)},y.prototype._parseStoresSpec=function(_,w){var D=this;s(_).forEach(function(I){if(_[I]!==null){var L=D._parseIndexSyntax(_[I]),U=L.shift();if(!U)throw new je.Schema("Invalid schema for table "+I+": "+_[I]);if(U.unique=!0,U.multi)throw new je.Schema("Primary key cannot be multiEntry*");L.forEach(function(J){if(J.auto)throw new je.Schema("Only primary key can be marked as autoIncrement (++)");if(!J.keyPath)throw new je.Schema("Index must have a name and cannot be an empty string")});var W=D._createTableSchema(I,U,L);w[I]=W}})},y.prototype.stores=function(_){var w=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,_):_;var D=w._versions,I={},L={};return D.forEach(function(U){c(I,U._cfg.storesSource),L=U._cfg.dbschema={},U._parseStoresSpec(I,L)}),w._dbSchema=L,Yc(w,[w._allTables,w,w.Transaction.prototype]),Kc(w,[w._allTables,w,w.Transaction.prototype,this._cfg.tables],s(L),L),w._storeNames=s(L),this},y.prototype.upgrade=function(_){return this._cfg.contentUpgrade=di(this._cfg.contentUpgrade||nn,_),this},y})();function po(y){return wl(Fh.prototype,function(w){this.db=y,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Oo(y,_){var w=y._dbNamesDB;return w||(w=y._dbNamesDB=new Kr(Ia,{addons:[],indexedDB:y,IDBKeyRange:_}),w.version(1).stores({dbnames:"name"})),w.table("dbnames")}function Pl(y){return y&&typeof y.databases=="function"}function V_(y){var _=y.indexedDB,w=y.IDBKeyRange;return Pl(_)?Promise.resolve(_.databases()).then(function(D){return D.map(function(I){return I.name}).filter(function(I){return I!==Ia})}):Oo(_,w).toCollection().primaryKeys()}function Rh(y,_){var w=y.indexedDB,D=y.IDBKeyRange;!Pl(w)&&_!==Ia&&Oo(w,D).put({name:_}).catch(nn)}function B_(y,_){var w=y.indexedDB,D=y.IDBKeyRange;!Pl(w)&&_!==Ia&&Oo(w,D).delete(_).catch(nn)}function Zc(y){return O(function(){return st.letThrough=!0,y()})}function $d(){var y=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!y||!indexedDB.databases)return Promise.resolve();var _;return new Promise(function(w){var D=function(){return indexedDB.databases().finally(w)};_=setInterval(D,100),D()}).finally(function(){return clearInterval(_)})}var ps;function kr(y){return!("from"in y)}var Ci=function(y,_){if(this)c(this,arguments.length?{d:1,from:y,to:arguments.length>1?_:y}:{d:0});else{var w=new Ci;return y&&"d"in y&&c(w,y),w}};C(Ci.prototype,(ps={add:function(y){return Ll(this,y),this},addKey:function(y){return Fa(this,y,y),this},addKeys:function(y){var _=this;return y.forEach(function(w){return Fa(_,w,w)}),this},hasKey:function(y){var _=eu(this).next(y).value;return _&&rn(_.from,y)<=0&&rn(_.to,y)>=0}},ps[Le]=function(){return eu(this)},ps));function Fa(y,_,w){var D=rn(_,w);if(!isNaN(D)){if(D>0)throw RangeError();if(kr(y))return c(y,{from:_,to:w,d:1});var I=y.l,L=y.r;if(rn(w,y.from)<0)return I?Fa(I,_,w):y.l={from:_,to:w,d:1,l:null,r:null},qd(y);if(rn(_,y.to)>0)return L?Fa(L,_,w):y.r={from:_,to:w,d:1,l:null,r:null},qd(y);rn(_,y.from)<0&&(y.from=_,y.l=null,y.d=L?L.d+1:1),rn(w,y.to)>0&&(y.to=w,y.r=null,y.d=y.l?y.l.d+1:1);var U=!y.r;I&&!y.l&&Ll(y,I),L&&U&&Ll(y,L)}}function Ll(y,_){function w(D,I){var L=I.from,U=I.to,W=I.l,J=I.r;Fa(D,L,U),W&&w(D,W),J&&w(D,J)}kr(_)||w(y,_)}function Ph(y,_){var w=eu(_),D=w.next();if(D.done)return!1;for(var I=D.value,L=eu(y),U=L.next(I.from),W=U.value;!D.done&&!U.done;){if(rn(W.from,I.to)<=0&&rn(W.to,I.from)>=0)return!0;rn(I.from,W.from)<0?I=(D=w.next(W.from)).value:W=(U=L.next(I.from)).value}return!1}function eu(y){var _=kr(y)?null:{s:0,n:y};return{next:function(w){for(var D=arguments.length>0;_;)switch(_.s){case 0:if(_.s=1,D)for(;_.n.l&&rn(w,_.n.from)<0;)_={up:_,n:_.n.l,s:1};else for(;_.n.l;)_={up:_,n:_.n.l,s:1};case 1:if(_.s=2,!D||rn(w,_.n.to)<=0)return{value:_.n,done:!1};case 2:if(_.n.r){_.s=3,_={up:_,n:_.n.r,s:0};continue}case 3:_=_.up}return{done:!0}}}}function qd(y){var _,w,D=(((_=y.r)===null||_===void 0?void 0:_.d)||0)-(((w=y.l)===null||w===void 0?void 0:w.d)||0),I=D>1?"r":D<-1?"l":"";if(I){var L=I==="r"?"l":"r",U=n({},y),W=y[I];y.from=W.from,y.to=W.to,y[I]=W[I],U[I]=W[L],y[L]=U,U.d=Wd(U)}y.d=Wd(y)}function Wd(y){var _=y.r,w=y.l;return(_?w?Math.max(_.d,w.d):_.d:w?w.d:0)+1}function hs(y,_){return s(_).forEach(function(w){y[w]?Ll(y[w],_[w]):y[w]=ht(_[w])}),y}function tu(y,_){return y.all||_.all||Object.keys(y).some(function(w){return _[w]&&Ph(_[w],y[w])})}var ms={},Ol={},Ra=!1;function Vl(y,_){hs(Ol,y),Ra||(Ra=!0,setTimeout(function(){Ra=!1;var w=Ol;Ol={},Pa(w,!1)},0))}function Pa(y,_){_===void 0&&(_=!1);var w=new Set;if(y.all)for(var D=0,I=Object.values(ms);D<I.length;D++){var L=I[D];Nr(L,y,w,_)}else for(var U in y){var W=/^idb\:\/\/(.*)\/(.*)\//.exec(U);if(W){var J=W[1],re=W[2],L=ms["idb://".concat(J,"/").concat(re)];L&&Nr(L,y,w,_)}}w.forEach(function(de){return de()})}function Nr(y,_,w,D){for(var I=[],L=0,U=Object.entries(y.queries.query);L<U.length;L++){for(var W=U[L],J=W[0],re=W[1],de=[],ae=0,Ie=re;ae<Ie.length;ae++){var $e=Ie[ae];tu(_,$e.obsSet)?$e.subscribers.forEach(function(Ne){return w.add(Ne)}):D&&de.push($e)}D&&I.push([J,de])}if(D)for(var ce=0,ve=I;ce<ve.length;ce++){var De=ve[ce],J=De[0],de=De[1];y.queries.query[J]=de}}function Lh(y){var _=y._state,w=y._deps.indexedDB;if(_.isBeingOpened||y.idbdb)return _.dbReadyPromise.then(function(){return _.dbOpenError?Et(_.dbOpenError):y});_.isBeingOpened=!0,_.dbOpenError=null,_.openComplete=!1;var D=_.openCanceller,I=Math.round(y.verno*10),L=!1;function U(){if(_.openCanceller!==D)throw new je.DatabaseClosed("db.open() was cancelled")}var W=_.dbReadyResolve,J=null,re=!1,de=function(){return new ct(function(ae,Ie){if(U(),!w)throw new je.MissingAPI;var $e=y.name,ce=_.autoSchema||!I?w.open($e):w.open($e,I);if(!ce)throw new je.MissingAPI;ce.onerror=zi(Ie),ce.onblocked=vn(y._fireOnBlocked),ce.onupgradeneeded=vn(function(ve){if(J=ce.transaction,_.autoSchema&&!y._options.allowEmptyDB){ce.onerror=Tl,J.abort(),ce.result.close();var De=w.deleteDatabase($e);De.onsuccess=De.onerror=vn(function(){Ie(new je.NoSuchDatabase("Database ".concat($e," doesnt exist")))})}else{J.onerror=zi(Ie);var Ne=ve.oldVersion>Math.pow(2,62)?0:ve.oldVersion;re=Ne<1,y.idbdb=ce.result,L&&Mh(y,J),L_(y,Ne/10,J,Ie)}},Ie),ce.onsuccess=vn(function(){J=null;var ve=y.idbdb=ce.result,De=B(ve.objectStoreNames);if(De.length>0)try{var Ne=ve.transaction(F_(De),"readonly");if(_.autoSchema)Rl(y,ve,Ne);else if(Hs(y,y._dbSchema,Ne),!Lo(y,Ne)&&!L)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ve.close(),I=ve.version+1,L=!0,ae(de());On(y,Ne)}catch{}lo.push(y),ve.onversionchange=vn(function(Oe){_.vcFired=!0,y.on("versionchange").fire(Oe)}),ve.onclose=vn(function(){y.close({disableAutoOpen:!1})}),re&&Rh(y._deps,$e),ae()},Ie)}).catch(function(ae){switch(ae?.name){case"UnknownError":if(_.PR1398_maxLoop>0)return _.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),de();break;case"VersionError":if(I>0)return I=0,de();break}return ct.reject(ae)})};return ct.race([D,(typeof navigator>"u"?ct.resolve():$d()).then(de)]).then(function(){return U(),_.onReadyBeingFired=[],ct.resolve(Zc(function(){return y.on.ready.fire(y.vip)})).then(function ae(){if(_.onReadyBeingFired.length>0){var Ie=_.onReadyBeingFired.reduce(di,nn);return _.onReadyBeingFired=[],ct.resolve(Zc(function(){return Ie(y.vip)})).then(ae)}})}).finally(function(){_.openCanceller===D&&(_.onReadyBeingFired=null,_.isBeingOpened=!1)}).catch(function(ae){_.dbOpenError=ae;try{J&&J.abort()}catch{}return D===_.openCanceller&&y._close(),Et(ae)}).finally(function(){_.openComplete=!0,W()}).then(function(){if(re){var ae={};y.tables.forEach(function(Ie){Ie.schema.indexes.forEach(function($e){$e.name&&(ae["idb://".concat(y.name,"/").concat(Ie.name,"/").concat($e.name)]=new Ci(-1/0,[[[]]]))}),ae["idb://".concat(y.name,"/").concat(Ie.name,"/")]=ae["idb://".concat(y.name,"/").concat(Ie.name,"/:dels")]=new Ci(-1/0,[[[]]])}),fs(Il).fire(ae),Pa(ae,!0)}return y})}function Bl(y){var _=function(U){return y.next(U)},w=function(U){return y.throw(U)},D=L(_),I=L(w);function L(U){return function(W){var J=U(W),re=J.value;return J.done?re:!re||typeof re.then!="function"?a(re)?Promise.all(re).then(D,I):D(re):re.then(D,I)}}return L(_)()}function jd(y,_,w){var D=arguments.length;if(D<2)throw new je.InvalidArgument("Too few arguments");for(var I=new Array(D-1);--D;)I[D-1]=arguments[D];w=I.pop();var L=le(I);return[y,L,w]}function Kd(y,_,w,D,I){return ct.resolve().then(function(){var L=st.transless||st,U=y._createTransaction(_,w,y._dbSchema,D);U.explicit=!0;var W={trans:U,transless:L};if(D)U.idbtrans=D.idbtrans;else try{U.create(),U.idbtrans._explicit=!0,y._state.PR1398_maxLoop=3}catch(ae){return ae.name===_i.InvalidState&&y.isOpen()&&--y._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),y.close({disableAutoOpen:!1}),y.open().then(function(){return Kd(y,_,w,null,I)})):Et(ae)}var J=Qt(I);J&&Q();var re,de=ct.follow(function(){if(re=I.call(U,U),re)if(J){var ae=Se.bind(null,null);re.then(ae,ae)}else typeof re.next=="function"&&typeof re.throw=="function"&&(re=Bl(re))},W);return(re&&typeof re.then=="function"?ct.resolve(re).then(function(ae){return U.active?ae:Et(new je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):de.then(function(){return re})).then(function(ae){return D&&U._resolve(),U._completion.then(function(){return ae})}).catch(function(ae){return U._reject(ae),Et(ae)})})}function Hl(y,_,w){for(var D=a(y)?y.slice():[y],I=0;I<w;++I)D.push(_);return D}function Yd(y){return n(n({},y),{table:function(_){var w=y.table(_),D=w.schema,I={},L=[];function U(ve,De,Ne){var Oe=Ml(ve),Ve=I[Oe]=I[Oe]||[],He=ve==null?0:typeof ve=="string"?1:ve.length,Me=De>0,We=n(n({},Ne),{name:Me?"".concat(Oe,"(virtual-from:").concat(Ne.name,")"):Ne.name,lowLevelIndex:Ne,isVirtual:Me,keyTail:De,keyLength:He,extractKey:Ud(ve),unique:!Me&&Ne.unique});if(Ve.push(We),We.isPrimaryKey||L.push(We),He>1){var nt=He===2?ve[0]:ve.slice(0,He-1);U(nt,De+1,Ne)}return Ve.sort(function(Ke,kt){return Ke.keyTail-kt.keyTail}),We}var W=U(D.primaryKey.keyPath,0,D.primaryKey);I[":id"]=[W];for(var J=0,re=D.indexes;J<re.length;J++){var de=re[J];U(de.keyPath,0,de)}function ae(ve){var De=I[Ml(ve)];return De&&De[0]}function Ie(ve,De){return{type:ve.type===1?2:ve.type,lower:Hl(ve.lower,ve.lowerOpen?y.MAX_KEY:y.MIN_KEY,De),lowerOpen:!0,upper:Hl(ve.upper,ve.upperOpen?y.MIN_KEY:y.MAX_KEY,De),upperOpen:!0}}function $e(ve){var De=ve.query.index;return De.isVirtual?n(n({},ve),{query:{index:De.lowLevelIndex,range:Ie(ve.query.range,De.keyTail)}}):ve}var ce=n(n({},w),{schema:n(n({},D),{primaryKey:W,indexes:L,getIndexByKeyPath:ae}),count:function(ve){return w.count($e(ve))},query:function(ve){return w.query($e(ve))},openCursor:function(ve){var De=ve.query.index,Ne=De.keyTail,Oe=De.isVirtual,Ve=De.keyLength;if(!Oe)return w.openCursor(ve);function He(Me){function We(Ke){Ke!=null?Me.continue(Hl(Ke,ve.reverse?y.MAX_KEY:y.MIN_KEY,Ne)):ve.unique?Me.continue(Me.key.slice(0,Ve).concat(ve.reverse?y.MIN_KEY:y.MAX_KEY,Ne)):Me.continue()}var nt=Object.create(Me,{continue:{value:We},continuePrimaryKey:{value:function(Ke,kt){Me.continuePrimaryKey(Hl(Ke,y.MAX_KEY,Ne),kt)}},primaryKey:{get:function(){return Me.primaryKey}},key:{get:function(){var Ke=Me.key;return Ve===1?Ke[0]:Ke.slice(0,Ve)}},value:{get:function(){return Me.value}}});return nt}return w.openCursor($e(ve)).then(function(Me){return Me&&He(Me)})}});return ce}})}var H_={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Yd};function Jd(y,_,w,D){return w=w||{},D=D||"",s(y).forEach(function(I){if(!m(_,I))w[D+I]=void 0;else{var L=y[I],U=_[I];if(typeof L=="object"&&typeof U=="object"&&L&&U){var W=Be(L),J=Be(U);W!==J?w[D+I]=_[I]:W==="Object"?Jd(L,U,w,D+I+"."):L!==U&&(w[D+I]=_[I])}else L!==U&&(w[D+I]=_[I])}}),s(_).forEach(function(I){m(y,I)||(w[D+I]=_[I])}),w}function Qd(y,_){return _.type==="delete"?_.keys:_.keys||_.values.map(y.extractKey)}var Us={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(y){return n(n({},y),{table:function(_){var w=y.table(_),D=w.schema.primaryKey,I=n(n({},w),{mutate:function(L){var U=st.trans,W=U.table(_).hook,J=W.deleting,re=W.creating,de=W.updating;switch(L.type){case"add":if(re.fire===nn)break;return U._promise("readwrite",function(){return ae(L)},!0);case"put":if(re.fire===nn&&de.fire===nn)break;return U._promise("readwrite",function(){return ae(L)},!0);case"delete":if(J.fire===nn)break;return U._promise("readwrite",function(){return ae(L)},!0);case"deleteRange":if(J.fire===nn)break;return U._promise("readwrite",function(){return Ie(L)},!0)}return w.mutate(L);function ae(ce){var ve=st.trans,De=ce.keys||Qd(D,ce);if(!De)throw new Error("Keys missing");return ce=ce.type==="add"||ce.type==="put"?n(n({},ce),{keys:De}):n({},ce),ce.type!=="delete"&&(ce.values=i([],ce.values,!0)),ce.keys&&(ce.keys=i([],ce.keys,!0)),La(w,ce,De).then(function(Ne){var Oe=De.map(function(Ve,He){var Me=Ne[He],We={onerror:null,onsuccess:null};if(ce.type==="delete")J.fire.call(We,Ve,Me,ve);else if(ce.type==="add"||Me===void 0){var nt=re.fire.call(We,Ve,ce.values[He],ve);Ve==null&&nt!=null&&(Ve=nt,ce.keys[He]=Ve,D.outbound||ye(ce.values[He],D.keyPath,Ve))}else{var Ke=Jd(Me,ce.values[He]),kt=de.fire.call(We,Ke,Ve,Me,ve);if(kt){var Kt=ce.values[He];Object.keys(kt).forEach(function(mt){m(Kt,mt)?Kt[mt]=kt[mt]:ye(Kt,mt,kt[mt])})}}return We});return w.mutate(ce).then(function(Ve){for(var He=Ve.failures,Me=Ve.results,We=Ve.numFailures,nt=Ve.lastResult,Ke=0;Ke<De.length;++Ke){var kt=Me?Me[Ke]:De[Ke],Kt=Oe[Ke];kt==null?Kt.onerror&&Kt.onerror(He[Ke]):Kt.onsuccess&&Kt.onsuccess(ce.type==="put"&&Ne[Ke]?ce.values[Ke]:kt)}return{failures:He,results:Me,numFailures:We,lastResult:nt}}).catch(function(Ve){return Oe.forEach(function(He){return He.onerror&&He.onerror(Ve)}),Promise.reject(Ve)})})}function Ie(ce){return $e(ce.trans,ce.range,1e4)}function $e(ce,ve,De){return w.query({trans:ce,values:!1,query:{index:D,range:ve},limit:De}).then(function(Ne){var Oe=Ne.result;return ae({type:"delete",keys:Oe,trans:ce}).then(function(Ve){return Ve.numFailures>0?Promise.reject(Ve.failures[0]):Oe.length<De?{failures:[],numFailures:0,lastResult:void 0}:$e(ce,n(n({},ve),{lower:Oe[Oe.length-1],lowerOpen:!0}),De)})})}}});return I}})}};function La(y,_,w){return _.type==="add"?Promise.resolve([]):y.getMany({trans:_.trans,keys:w,cache:"immutable"})}function zs(y,_,w){try{if(!_||_.keys.length<y.length)return null;for(var D=[],I=0,L=0;I<_.keys.length&&L<y.length;++I)rn(_.keys[I],y[L])===0&&(D.push(w?_t(_.values[I]):_.values[I]),++L);return D.length===y.length?D:null}catch{return null}}var Xd={stack:"dbcore",level:-1,create:function(y){return{table:function(_){var w=y.table(_);return n(n({},w),{getMany:function(D){if(!D.cache)return w.getMany(D);var I=zs(D.keys,D.trans._cache,D.cache==="clone");return I?ct.resolve(I):w.getMany(D).then(function(L){return D.trans._cache={keys:D.keys,values:D.cache==="clone"?_t(L):L},L})},mutate:function(D){return D.type!=="add"&&(D.trans._cache=null),w.mutate(D)}})}}}};function nu(y,_){return y.trans.mode==="readonly"&&!!y.subscr&&!y.trans.explicit&&y.trans.db._options.cache!=="disabled"&&!_.schema.primaryKey.outbound}function Zd(y,_){switch(y){case"query":return _.values&&!_.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var ef={stack:"dbcore",level:0,name:"Observability",create:function(y){var _=y.schema.name,w=new Ci(y.MIN_KEY,y.MAX_KEY);return n(n({},y),{transaction:function(D,I,L){if(st.subscr&&I!=="readonly")throw new je.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(st.querier));return y.transaction(D,I,L)},table:function(D){var I=y.table(D),L=I.schema,U=L.primaryKey,W=L.indexes,J=U.extractKey,re=U.outbound,de=U.autoIncrement&&W.filter(function(ce){return ce.compound&&ce.keyPath.includes(U.keyPath)}),ae=n(n({},I),{mutate:function(ce){var ve,De,Ne=ce.trans,Oe=ce.mutatedParts||(ce.mutatedParts={}),Ve=function(Pt){var on="idb://".concat(_,"/").concat(D,"/").concat(Pt);return Oe[on]||(Oe[on]=new Ci)},He=Ve(""),Me=Ve(":dels"),We=ce.type,nt=ce.type==="deleteRange"?[ce.range]:ce.type==="delete"?[ce.keys]:ce.values.length<50?[Qd(U,ce).filter(function(Pt){return Pt}),ce.values]:[],Ke=nt[0],kt=nt[1],Kt=ce.trans._cache;if(a(Ke)){He.addKeys(Ke);var mt=We==="delete"||Ke.length===kt.length?zs(Ke,Kt):null;mt||Me.addKeys(Ke),(mt||kt)&&Gs(Ve,L,mt,kt)}else if(Ke){var Wt={from:(ve=Ke.lower)!==null&&ve!==void 0?ve:y.MIN_KEY,to:(De=Ke.upper)!==null&&De!==void 0?De:y.MAX_KEY};Me.add(Wt),He.add(Wt)}else He.add(w),Me.add(w),L.indexes.forEach(function(Pt){return Ve(Pt.name).add(w)});return I.mutate(ce).then(function(Pt){return Ke&&(ce.type==="add"||ce.type==="put")&&(He.addKeys(Pt.results),de&&de.forEach(function(on){for(var It=ce.values.map(function(Ri){return on.extractKey(Ri)}),Nn=on.keyPath.findIndex(function(Ri){return Ri===U.keyPath}),fi=0,go=Pt.results.length;fi<go;++fi)It[fi][Nn]=Pt.results[fi];Ve(on.name).addKeys(It)})),Ne.mutatedParts=hs(Ne.mutatedParts||{},Oe),Pt})}}),Ie=function(ce){var ve,De,Ne=ce.query,Oe=Ne.index,Ve=Ne.range;return[Oe,new Ci((ve=Ve.lower)!==null&&ve!==void 0?ve:y.MIN_KEY,(De=Ve.upper)!==null&&De!==void 0?De:y.MAX_KEY)]},$e={get:function(ce){return[U,new Ci(ce.key)]},getMany:function(ce){return[U,new Ci().addKeys(ce.keys)]},count:Ie,query:Ie,openCursor:Ie};return s($e).forEach(function(ce){ae[ce]=function(ve){var De=st.subscr,Ne=!!De,Oe=nu(st,I)&&Zd(ce,ve),Ve=Oe?ve.obsSet={}:De;if(Ne){var He=function(mt){var Wt="idb://".concat(_,"/").concat(D,"/").concat(mt);return Ve[Wt]||(Ve[Wt]=new Ci)},Me=He(""),We=He(":dels"),nt=$e[ce](ve),Ke=nt[0],kt=nt[1];if(ce==="query"&&Ke.isPrimaryKey&&!ve.values?We.add(kt):He(Ke.name||"").add(kt),!Ke.isPrimaryKey)if(ce==="count")We.add(w);else{var Kt=ce==="query"&&re&&ve.values&&I.query(n(n({},ve),{values:!1}));return I[ce].apply(this,arguments).then(function(mt){if(ce==="query"){if(re&&ve.values)return Kt.then(function(It){var Nn=It.result;return Me.addKeys(Nn),mt});var Wt=ve.values?mt.result.map(J):mt.result;ve.values?Me.addKeys(Wt):We.addKeys(Wt)}else if(ce==="openCursor"){var Pt=mt,on=ve.values;return Pt&&Object.create(Pt,{key:{get:function(){return We.addKey(Pt.primaryKey),Pt.key}},primaryKey:{get:function(){var It=Pt.primaryKey;return We.addKey(It),It}},value:{get:function(){return on&&Me.addKey(Pt.primaryKey),Pt.value}}})}return mt})}}return I[ce].apply(this,arguments)}}),ae}})}};function Gs(y,_,w,D){function I(L){var U=y(L.name||"");function W(re){return re!=null?L.extractKey(re):null}var J=function(re){return L.multiEntry&&a(re)?re.forEach(function(de){return U.addKey(de)}):U.addKey(re)};(w||D).forEach(function(re,de){var ae=w&&W(w[de]),Ie=D&&W(D[de]);rn(ae,Ie)!==0&&(ae!=null&&J(ae),Ie!=null&&J(Ie))})}_.indexes.forEach(I)}function gs(y,_,w){if(w.numFailures===0)return _;if(_.type==="deleteRange")return null;var D=_.keys?_.keys.length:"values"in _&&_.values?_.values.length:1;if(w.numFailures===D)return null;var I=n({},_);return a(I.keys)&&(I.keys=I.keys.filter(function(L,U){return!(U in w.failures)})),"values"in I&&a(I.values)&&(I.values=I.values.filter(function(L,U){return!(U in w.failures)})),I}function Gi(y,_){return _.lower===void 0?!0:_.lowerOpen?rn(y,_.lower)>0:rn(y,_.lower)>=0}function vs(y,_){return _.upper===void 0?!0:_.upperOpen?rn(y,_.upper)<0:rn(y,_.upper)<=0}function ho(y,_){return Gi(y,_)&&vs(y,_)}function Ul(y,_,w,D,I,L){if(!w||w.length===0)return y;var U=_.query.index,W=U.multiEntry,J=_.query.range,re=D.schema.primaryKey,de=re.extractKey,ae=U.extractKey,Ie=(U.lowLevelIndex||U).extractKey,$e=w.reduce(function(ce,ve){var De=ce,Ne=[];if(ve.type==="add"||ve.type==="put")for(var Oe=new Ci,Ve=ve.values.length-1;Ve>=0;--Ve){var He=ve.values[Ve],Me=de(He);if(!Oe.hasKey(Me)){var We=ae(He);(W&&a(We)?We.some(function(mt){return ho(mt,J)}):ho(We,J))&&(Oe.addKey(Me),Ne.push(He))}}switch(ve.type){case"add":{var nt=new Ci().addKeys(_.values?ce.map(function(mt){return de(mt)}):ce);De=ce.concat(_.values?Ne.filter(function(mt){var Wt=de(mt);return nt.hasKey(Wt)?!1:(nt.addKey(Wt),!0)}):Ne.map(function(mt){return de(mt)}).filter(function(mt){return nt.hasKey(mt)?!1:(nt.addKey(mt),!0)}));break}case"put":{var Ke=new Ci().addKeys(ve.values.map(function(mt){return de(mt)}));De=ce.filter(function(mt){return!Ke.hasKey(_.values?de(mt):mt)}).concat(_.values?Ne:Ne.map(function(mt){return de(mt)}));break}case"delete":var kt=new Ci().addKeys(ve.keys);De=ce.filter(function(mt){return!kt.hasKey(_.values?de(mt):mt)});break;case"deleteRange":var Kt=ve.range;De=ce.filter(function(mt){return!ho(de(mt),Kt)});break}return De},y);return $e===y?y:($e.sort(function(ce,ve){return rn(Ie(ce),Ie(ve))||rn(de(ce),de(ve))}),_.limit&&_.limit<1/0&&($e.length>_.limit?$e.length=_.limit:y.length===_.limit&&$e.length<_.limit&&(I.dirty=!0)),L?Object.freeze($e):$e)}function Oh(y,_){return rn(y.lower,_.lower)===0&&rn(y.upper,_.upper)===0&&!!y.lowerOpen==!!_.lowerOpen&&!!y.upperOpen==!!_.upperOpen}function Vh(y,_,w,D){if(y===void 0)return _!==void 0?-1:0;if(_===void 0)return 1;var I=rn(y,_);if(I===0){if(w&&D)return 0;if(w)return 1;if(D)return-1}return I}function zl(y,_,w,D){if(y===void 0)return _!==void 0?1:0;if(_===void 0)return-1;var I=rn(y,_);if(I===0){if(w&&D)return 0;if(w)return-1;if(D)return 1}return I}function Bh(y,_){return Vh(y.lower,_.lower,y.lowerOpen,_.lowerOpen)<=0&&zl(y.upper,_.upper,y.upperOpen,_.upperOpen)>=0}function tf(y,_,w,D){var I=ms["idb://".concat(y,"/").concat(_)];if(!I)return[];var L=I.queries[w];if(!L)return[null,!1,I,null];var U=D.query?D.query.index.name:null,W=L[U||""];if(!W)return[null,!1,I,null];switch(w){case"query":var J=W.find(function(ae){return ae.req.limit===D.limit&&ae.req.values===D.values&&Oh(ae.req.query.range,D.query.range)});if(J)return[J,!0,I,W];var re=W.find(function(ae){var Ie="limit"in ae.req?ae.req.limit:1/0;return Ie>=D.limit&&(D.values?ae.req.values:!0)&&Bh(ae.req.query.range,D.query.range)});return[re,!1,I,W];case"count":var de=W.find(function(ae){return Oh(ae.req.query.range,D.query.range)});return[de,!!de,I,W]}}function iu(y,_,w,D){y.subscribers.add(w),D.addEventListener("abort",function(){y.subscribers.delete(w),y.subscribers.size===0&&U_(y,_)})}function U_(y,_){setTimeout(function(){y.subscribers.size===0&&lt(_,y)},3e3)}var nf={stack:"dbcore",level:0,name:"Cache",create:function(y){var _=y.schema.name,w=n(n({},y),{transaction:function(D,I,L){var U=y.transaction(D,I,L);if(I==="readwrite"){var W=new AbortController,J=W.signal,re=function(de){return function(){if(W.abort(),I==="readwrite"){for(var ae=new Set,Ie=0,$e=D;Ie<$e.length;Ie++){var ce=$e[Ie],ve=ms["idb://".concat(_,"/").concat(ce)];if(ve){var De=y.table(ce),Ne=ve.optimisticOps.filter(function(on){return on.trans===U});if(U._explicit&&de&&U.mutatedParts)for(var Oe=0,Ve=Object.values(ve.queries.query);Oe<Ve.length;Oe++)for(var He=Ve[Oe],Me=0,We=He.slice();Me<We.length;Me++){var nt=We[Me];tu(nt.obsSet,U.mutatedParts)&&(lt(He,nt),nt.subscribers.forEach(function(on){return ae.add(on)}))}else if(Ne.length>0){ve.optimisticOps=ve.optimisticOps.filter(function(on){return on.trans!==U});for(var Ke=0,kt=Object.values(ve.queries.query);Ke<kt.length;Ke++)for(var He=kt[Ke],Kt=0,mt=He.slice();Kt<mt.length;Kt++){var nt=mt[Kt];if(nt.res!=null&&U.mutatedParts)if(de&&!nt.dirty){var Wt=Object.isFrozen(nt.res),Pt=Ul(nt.res,nt.req,Ne,De,nt,Wt);nt.dirty?(lt(He,nt),nt.subscribers.forEach(function(Nn){return ae.add(Nn)})):Pt!==nt.res&&(nt.res=Pt,nt.promise=ct.resolve({result:Pt}))}else nt.dirty&&lt(He,nt),nt.subscribers.forEach(function(Nn){return ae.add(Nn)})}}}}ae.forEach(function(on){return on()})}}};U.addEventListener("abort",re(!1),{signal:J}),U.addEventListener("error",re(!1),{signal:J}),U.addEventListener("complete",re(!0),{signal:J})}return U},table:function(D){var I=y.table(D),L=I.schema.primaryKey,U=n(n({},I),{mutate:function(W){var J=st.trans;if(L.outbound||J.db._options.cache==="disabled"||J.explicit||J.idbtrans.mode!=="readwrite")return I.mutate(W);var re=ms["idb://".concat(_,"/").concat(D)];if(!re)return I.mutate(W);var de=I.mutate(W);return(W.type==="add"||W.type==="put")&&(W.values.length>=50||Qd(L,W).some(function(ae){return ae==null}))?de.then(function(ae){var Ie=n(n({},W),{values:W.values.map(function(ce,ve){var De;if(ae.failures[ve])return ce;var Ne=!((De=L.keyPath)===null||De===void 0)&&De.includes(".")?_t(ce):n({},ce);return ye(Ne,L.keyPath,ae.results[ve]),Ne})}),$e=gs(re,Ie,ae);re.optimisticOps.push($e),queueMicrotask(function(){return W.mutatedParts&&Vl(W.mutatedParts)})}):(re.optimisticOps.push(W),W.mutatedParts&&Vl(W.mutatedParts),de.then(function(ae){if(ae.numFailures>0){lt(re.optimisticOps,W);var Ie=gs(re,W,ae);Ie&&re.optimisticOps.push(Ie),W.mutatedParts&&Vl(W.mutatedParts)}}),de.catch(function(){lt(re.optimisticOps,W),W.mutatedParts&&Vl(W.mutatedParts)})),de},query:function(W){var J;if(!nu(st,I)||!Zd("query",W))return I.query(W);var re=((J=st.trans)===null||J===void 0?void 0:J.db._options.cache)==="immutable",de=st,ae=de.requery,Ie=de.signal,$e=tf(_,D,"query",W),ce=$e[0],ve=$e[1],De=$e[2],Ne=$e[3];if(ce&&ve)ce.obsSet=W.obsSet;else{var Oe=I.query(W).then(function(Ve){var He=Ve.result;if(ce&&(ce.res=He),re){for(var Me=0,We=He.length;Me<We;++Me)Object.freeze(He[Me]);Object.freeze(He)}else Ve.result=_t(He);return Ve}).catch(function(Ve){return Ne&&ce&&lt(Ne,ce),Promise.reject(Ve)});ce={obsSet:W.obsSet,promise:Oe,subscribers:new Set,type:"query",req:W,dirty:!1},Ne?Ne.push(ce):(Ne=[ce],De||(De=ms["idb://".concat(_,"/").concat(D)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),De.queries.query[W.query.index.name||""]=Ne)}return iu(ce,Ne,ae,Ie),ce.promise.then(function(Ve){return{result:Ul(Ve.result,W,De?.optimisticOps,I,ce,re)}})}});return U}});return w}};function Gl(y,_){return new Proxy(y,{get:function(w,D,I){return D==="db"?_:Reflect.get(w,D,I)}})}var Kr=(function(){function y(_,w){var D=this;this._middlewares={},this.verno=0;var I=y.dependencies;this._options=w=n({addons:y.addons,autoOpen:!0,indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange,cache:"cloned"},w),this._deps={indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange};var L=w.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var U={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:nn,dbReadyPromise:null,cancelOpen:nn,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:w.autoOpen};U.dbReadyPromise=new ct(function(J){U.dbReadyResolve=J}),U.openCanceller=new ct(function(J,re){U.cancelOpen=re}),this._state=U,this.name=_,this.on=bl(this,"populate","blocked","versionchange","close",{ready:[di,nn]}),this.once=function(J,re){var de=function(){for(var ae=[],Ie=0;Ie<arguments.length;Ie++)ae[Ie]=arguments[Ie];D.on(J).unsubscribe(de),re.apply(D,ae)};return D.on(J,de)},this.on.ready.subscribe=$(this.on.ready.subscribe,function(J){return function(re,de){y.vip(function(){var ae=D._state;if(ae.openComplete)ae.dbOpenError||ct.resolve().then(re),de&&J(re);else if(ae.onReadyBeingFired)ae.onReadyBeingFired.push(re),de&&J(re);else{J(re);var Ie=D;de||J(function $e(){Ie.on.ready.unsubscribe(re),Ie.on.ready.unsubscribe($e)})}})}}),this.Collection=jc(this),this.Table=M_(this),this.Transaction=Th(this),this.Version=po(this),this.WhereClause=Od(this),this.on("versionchange",function(J){J.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(D.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(D.name,"'. Closing db now to resume the delete request.")),D.close({disableAutoOpen:!1})}),this.on("blocked",function(J){!J.newVersion||J.newVersion<J.oldVersion?console.warn("Dexie.delete('".concat(D.name,"') was blocked")):console.warn("Upgrade '".concat(D.name,"' blocked by other connection holding version ").concat(J.oldVersion/10))}),this._maxKey=ka(w.IDBKeyRange),this._createTransaction=function(J,re,de,ae){return new D.Transaction(J,re,de,D._options.chromeTransactionDurability,ae)},this._fireOnBlocked=function(J){D.on("blocked").fire(J),lo.filter(function(re){return re.name===D.name&&re!==D&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(J)})},this.use(Xd),this.use(nf),this.use(ef),this.use(H_),this.use(Us);var W=new Proxy(this,{get:function(J,re,de){if(re==="_vip")return!0;if(re==="table")return function(Ie){return Gl(D.table(Ie),W)};var ae=Reflect.get(J,re,de);return ae instanceof xh?Gl(ae,W):re==="tables"?ae.map(function(Ie){return Gl(Ie,W)}):re==="_createTransaction"?function(){var Ie=ae.apply(this,arguments);return Gl(Ie,W)}:ae}});this.vip=W,L.forEach(function(J){return J(D)})}return y.prototype.version=function(_){if(isNaN(_)||_<.1)throw new je.Type("Given version is not a positive number");if(_=Math.round(_*10)/10,this.idbdb||this._state.isBeingOpened)throw new je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,_);var w=this._versions,D=w.filter(function(I){return I._cfg.version===_})[0];return D||(D=new this.Version(_),w.push(D),w.sort(Nl),D.stores({}),this._state.autoSchema=!1,D)},y.prototype._whenReady=function(_){var w=this;return this.idbdb&&(this._state.openComplete||st.letThrough||this._vip)?_():new ct(function(D,I){if(w._state.openComplete)return I(new je.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen){I(new je.DatabaseClosed);return}w.open().catch(nn)}w._state.dbReadyPromise.then(D,I)}).then(_)},y.prototype.use=function(_){var w=_.stack,D=_.create,I=_.level,L=_.name;L&&this.unuse({stack:w,name:L});var U=this._middlewares[w]||(this._middlewares[w]=[]);return U.push({stack:w,create:D,level:I??10,name:L}),U.sort(function(W,J){return W.level-J.level}),this},y.prototype.unuse=function(_){var w=_.stack,D=_.name,I=_.create;return w&&this._middlewares[w]&&(this._middlewares[w]=this._middlewares[w].filter(function(L){return I?L.create!==I:D?L.name!==D:!1})),this},y.prototype.open=function(){var _=this;return $n(Hi,function(){return Lh(_)})},y.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var _=this._state,w=lo.indexOf(this);if(w>=0&&lo.splice(w,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}_.isBeingOpened||(_.dbReadyPromise=new ct(function(D){_.dbReadyResolve=D}),_.openCanceller=new ct(function(D,I){_.cancelOpen=I}))},y.prototype.close=function(_){var w=_===void 0?{disableAutoOpen:!0}:_,D=w.disableAutoOpen,I=this._state;D?(I.isBeingOpened&&I.cancelOpen(new je.DatabaseClosed),this._close(),I.autoOpen=!1,I.dbOpenError=new je.DatabaseClosed):(this._close(),I.autoOpen=this._options.autoOpen||I.isBeingOpened,I.openComplete=!1,I.dbOpenError=null)},y.prototype.delete=function(_){var w=this;_===void 0&&(_={disableAutoOpen:!0});var D=arguments.length>0&&typeof arguments[0]!="object",I=this._state;return new ct(function(L,U){var W=function(){w.close(_);var J=w._deps.indexedDB.deleteDatabase(w.name);J.onsuccess=vn(function(){B_(w._deps,w.name),L()}),J.onerror=zi(U),J.onblocked=w._fireOnBlocked};if(D)throw new je.InvalidArgument("Invalid closeOptions argument to db.delete()");I.isBeingOpened?I.dbReadyPromise.then(W):W()})},y.prototype.backendDB=function(){return this.idbdb},y.prototype.isOpen=function(){return this.idbdb!==null},y.prototype.hasBeenClosed=function(){var _=this._state.dbOpenError;return _&&_.name==="DatabaseClosed"},y.prototype.hasFailed=function(){return this._state.dbOpenError!==null},y.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(y.prototype,"tables",{get:function(){var _=this;return s(this._allTables).map(function(w){return _._allTables[w]})},enumerable:!1,configurable:!0}),y.prototype.transaction=function(){var _=jd.apply(this,arguments);return this._transaction.apply(this,_)},y.prototype._transaction=function(_,w,D){var I=this,L=st.trans;(!L||L.db!==this||_.indexOf("!")!==-1)&&(L=null);var U=_.indexOf("?")!==-1;_=_.replace("!","").replace("?","");var W,J;try{if(J=w.map(function(de){var ae=de instanceof I.Table?de.name:de;if(typeof ae!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ae}),_=="r"||_===Gc)W=Gc;else if(_=="rw"||_==Cl)W=Cl;else throw new je.InvalidArgument("Invalid transaction mode: "+_);if(L){if(L.mode===Gc&&W===Cl)if(U)L=null;else throw new je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");L&&J.forEach(function(de){if(L&&L.storeNames.indexOf(de)===-1)if(U)L=null;else throw new je.SubTransaction("Table "+de+" not included in parent transaction.")}),U&&L&&!L.active&&(L=null)}}catch(de){return L?L._promise(null,function(ae,Ie){Ie(de)}):Et(de)}var re=Kd.bind(null,this,W,J,L,D);return L?L._promise(W,re,"lock"):st.trans?$n(st.transless,function(){return I._whenReady(re)}):this._whenReady(re)},y.prototype.table=function(_){if(!m(this._allTables,_))throw new je.InvalidTable("Table ".concat(_," does not exist"));return this._allTables[_]},y})(),rf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Oa=(function(){function y(_){this._subscribe=_}return y.prototype.subscribe=function(_,w,D){return this._subscribe(!_||typeof _=="function"?{next:_,error:w,complete:D}:_)},y.prototype[rf]=function(){return this},y})(),$s;try{$s={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch{$s={indexedDB:null,IDBKeyRange:null}}function of(y){var _=!1,w,D=new Oa(function(I){var L=Qt(y);function U(Ne){var Oe=Fi();try{L&&Q();var Ve=O(y,Ne);return L&&(Ve=Ve.finally(Se)),Ve}finally{Oe&&Ir()}}var W=!1,J,re={},de={},ae={get closed(){return W},unsubscribe:function(){W||(W=!0,J&&J.abort(),Ie&&fs.storagemutated.unsubscribe(ve))}};I.start&&I.start(ae);var Ie=!1,$e=function(){return zc(De)};function ce(){return tu(de,re)}var ve=function(Ne){hs(re,Ne),ce()&&$e()},De=function(){if(!(W||!$s.indexedDB)){re={};var Ne={};J&&J.abort(),J=new AbortController;var Oe={subscr:Ne,signal:J.signal,requery:$e,querier:y,trans:null},Ve=U(Oe);Promise.resolve(Ve).then(function(He){_=!0,w=He,!(W||Oe.signal.aborted)&&(re={},de=Ne,!Xe(de)&&!Ie&&(fs(Il,ve),Ie=!0),zc(function(){return!W&&I.next&&I.next(He)}))},function(He){_=!1,["DatabaseClosedError","AbortError"].includes(He?.name)||W||zc(function(){W||I.error&&I.error(He)})})}};return setTimeout($e,0),ae});return D.hasValue=function(){return _},D.getValue=function(){return w},D}var mo=Kr;C(mo,n(n({},Mi),{delete:function(y){var _=new mo(y,{addons:[]});return _.delete()},exists:function(y){return new mo(y,{addons:[]}).open().then(function(_){return _.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(y){try{return V_(mo.dependencies).then(y)}catch{return Et(new je.MissingAPI)}},defineClass:function(){function y(_){c(this,_)}return y},ignoreTransaction:function(y){return st.trans?$n(st.transless,y):y()},vip:Zc,async:function(y){return function(){try{var _=Bl(y.apply(this,arguments));return!_||typeof _.then!="function"?ct.resolve(_):_}catch(w){return Et(w)}}},spawn:function(y,_,w){try{var D=Bl(y.apply(w,_||[]));return!D||typeof D.then!="function"?ct.resolve(D):D}catch(I){return Et(I)}},currentTransaction:{get:function(){return st.trans||null}},waitFor:function(y,_){var w=ct.resolve(typeof y=="function"?mo.ignoreTransaction(y):y).timeout(_||6e4);return st.trans?st.trans.waitFor(w):w},Promise:ct,debug:{get:function(){return oi},set:function(y){qr(y)}},derive:A,extend:c,props:C,override:$,Events:bl,on:fs,liveQuery:of,extendObservabilitySet:hs,getByKeyPath:me,setByKeyPath:ye,delByKeyPath:ge,shallowClone:Te,deepClone:_t,getObjectDiff:Jd,cmp:rn,asap:X,minKey:Mr,addons:[],connections:lo,errnames:_i,dependencies:$s,cache:ms,semVer:Md,version:Md.split(".").map(function(y){return parseInt(y)}).reduce(function(y,_,w){return y+_/Math.pow(10,w*2)})})),mo.maxKey=ka(mo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(fs(Il,function(y){if(!ys){var _;_=new CustomEvent(Vd,{detail:y}),ys=!0,dispatchEvent(_),ys=!1}}),addEventListener(Vd,function(y){var _=y.detail;ys||sf(_)}));function sf(y){var _=ys;try{ys=!0,fs.storagemutated.fire(y),Pa(y,!0)}finally{ys=_}}var ys=!1,_s,$l=function(){};typeof BroadcastChannel<"u"&&($l=function(){_s=new BroadcastChannel(Vd),_s.onmessage=function(y){return y.data&&sf(y.data)}},$l(),typeof _s.unref=="function"&&_s.unref(),fs(Il,function(y){ys||_s.postMessage(y)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(y){if(!Kr.disableBfCache&&y.persisted){oi&&console.debug("Dexie: handling persisted pagehide"),_s?.close();for(var _=0,w=lo;_<w.length;_++){var D=w[_];D.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(y){!Kr.disableBfCache&&y.persisted&&(oi&&console.debug("Dexie: handling persisted pageshow"),$l(),sf({all:new Ci(-1/0,[[]])}))}));function af(y){return new us({add:y})}function Va(y){return new us({remove:y})}function ql(y,_){return new us({replacePrefix:[y,_]})}ct.rejectionMapper=Ai,qr(oi);var z_=Object.freeze({__proto__:null,Dexie:Kr,liveQuery:of,Entity:Fd,cmp:rn,PropModification:us,replacePrefix:ql,add:af,remove:Va,default:Kr,RangeSet:Ci,mergeRanges:Ll,rangesOverlap:Ph});return n(Kr,z_,{default:Kr}),Kr})});var xM=Jt(()=>{});var cn=Jt((vg,bM)=>{(function(t,e){typeof vg=="object"?bM.exports=vg=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(vg,function(){var t=t||(function(e,n){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof global<"u"&&global.crypto&&(i=global.crypto),!i&&typeof eD=="function")try{i=xM()}catch{}var r=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||(function(){function k(){}return function(B){var $;return k.prototype=B,$=new k,k.prototype=null,$}})(),a={},c=a.lib={},u=c.Base=(function(){return{extend:function(k){var B=s(this);return k&&B.mixIn(k),(!B.hasOwnProperty("init")||this.init===B.init)&&(B.init=function(){B.$super.init.apply(this,arguments)}),B.init.prototype=B,B.$super=this,B},create:function(){var k=this.extend();return k.init.apply(k,arguments),k},init:function(){},mixIn:function(k){for(var B in k)k.hasOwnProperty(B)&&(this[B]=k[B]);k.hasOwnProperty("toString")&&(this.toString=k.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),p=c.WordArray=u.extend({init:function(k,B){k=this.words=k||[],B!=n?this.sigBytes=B:this.sigBytes=k.length*4},toString:function(k){return(k||C).stringify(this)},concat:function(k){var B=this.words,$=k.words,q=this.sigBytes,X=k.sigBytes;if(this.clamp(),q%4)for(var ie=0;ie<X;ie++){var me=$[ie>>>2]>>>24-ie%4*8&255;B[q+ie>>>2]|=me<<24-(q+ie)%4*8}else for(var ye=0;ye<X;ye+=4)B[q+ye>>>2]=$[ye>>>2];return this.sigBytes+=X,this},clamp:function(){var k=this.words,B=this.sigBytes;k[B>>>2]&=4294967295<<32-B%4*8,k.length=e.ceil(B/4)},clone:function(){var k=u.clone.call(this);return k.words=this.words.slice(0),k},random:function(k){for(var B=[],$=0;$<k;$+=4)B.push(r());return new p.init(B,k)}}),m=a.enc={},C=m.Hex={stringify:function(k){for(var B=k.words,$=k.sigBytes,q=[],X=0;X<$;X++){var ie=B[X>>>2]>>>24-X%4*8&255;q.push((ie>>>4).toString(16)),q.push((ie&15).toString(16))}return q.join("")},parse:function(k){for(var B=k.length,$=[],q=0;q<B;q+=2)$[q>>>3]|=parseInt(k.substr(q,2),16)<<24-q%8*4;return new p.init($,B/2)}},x=m.Latin1={stringify:function(k){for(var B=k.words,$=k.sigBytes,q=[],X=0;X<$;X++){var ie=B[X>>>2]>>>24-X%4*8&255;q.push(String.fromCharCode(ie))}return q.join("")},parse:function(k){for(var B=k.length,$=[],q=0;q<B;q++)$[q>>>2]|=(k.charCodeAt(q)&255)<<24-q%4*8;return new p.init($,B)}},E=m.Utf8={stringify:function(k){try{return decodeURIComponent(escape(x.stringify(k)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(k){return x.parse(unescape(encodeURIComponent(k)))}},A=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(k){typeof k=="string"&&(k=E.parse(k)),this._data.concat(k),this._nDataBytes+=k.sigBytes},_process:function(k){var B,$=this._data,q=$.words,X=$.sigBytes,ie=this.blockSize,me=ie*4,ye=X/me;k?ye=e.ceil(ye):ye=e.max((ye|0)-this._minBufferSize,0);var ge=ye*ie,Te=e.min(ge*4,X);if(ge){for(var j=0;j<ge;j+=ie)this._doProcessBlock(q,j);B=q.splice(0,ge),$.sigBytes-=Te}return new p.init(B,Te)},clone:function(){var k=u.clone.call(this);return k._data=this._data.clone(),k},_minBufferSize:0}),N=c.Hasher=A.extend({cfg:u.extend(),init:function(k){this.cfg=this.cfg.extend(k),this.reset()},reset:function(){A.reset.call(this),this._doReset()},update:function(k){return this._append(k),this._process(),this},finalize:function(k){k&&this._append(k);var B=this._doFinalize();return B},blockSize:512/32,_createHelper:function(k){return function(B,$){return new k.init($).finalize(B)}},_createHmacHelper:function(k){return function(B,$){return new R.HMAC.init(k,$).finalize(B)}}}),R=a.algo={};return a})(Math);return t})});var Np=Jt((yg,wM)=>{(function(t,e){typeof yg=="object"?wM.exports=yg=e(cn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(yg,function(t){return(function(e){var n=t,i=n.lib,r=i.Base,s=i.WordArray,a=n.x64={},c=a.Word=r.extend({init:function(p,m){this.high=p,this.low=m}}),u=a.WordArray=r.extend({init:function(p,m){p=this.words=p||[],m!=e?this.sigBytes=m:this.sigBytes=p.length*8},toX32:function(){for(var p=this.words,m=p.length,C=[],x=0;x<m;x++){var E=p[x];C.push(E.high),C.push(E.low)}return s.create(C,this.sigBytes)},clone:function(){for(var p=r.clone.call(this),m=p.words=this.words.slice(0),C=m.length,x=0;x<C;x++)m[x]=m[x].clone();return p}})})(),t})});var SM=Jt((_g,EM)=>{(function(t,e){typeof _g=="object"?EM.exports=_g=e(cn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(_g,function(t){return(function(){if(typeof ArrayBuffer=="function"){var e=t,n=e.lib,i=n.WordArray,r=i.init,s=i.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var c=a.byteLength,u=[],p=0;p<c;p++)u[p>>>2]|=a[p]<<24-p%4*8;r.call(this,u,c)}else r.apply(this,arguments)};s.prototype=i}})(),t.lib.WordArray})});var TM=Jt((Cg,DM)=>{(function(t,e){typeof Cg=="object"?DM.exports=Cg=e(cn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Cg,function(t){return(function(){var e=t,n=e.lib,i=n.WordArray,r=e.enc,s=r.Utf16=r.Utf16BE={stringify:function(c){for(var u=c.words,p=c.sigBytes,m=[],C=0;C<p;C+=2){var x=u[C>>>2]>>>16-C%4*8&65535;m.push(String.fromCharCode(x))}return m.join("")},parse:function(c){for(var u=c.length,p=[],m=0;m<u;m++)p[m>>>1]|=c.charCodeAt(m)<<16-m%2*16;return i.create(p,u*2)}};r.Utf16LE={stringify:function(c){for(var u=c.words,p=c.sigBytes,m=[],C=0;C<p;C+=2){var x=a(u[C>>>2]>>>16-C%4*8&65535);m.push(String.fromCharCode(x))}return m.join("")},parse:function(c){for(var u=c.length,p=[],m=0;m<u;m++)p[m>>>1]|=a(c.charCodeAt(m)<<16-m%2*16);return i.create(p,u*2)}};function a(c){return c<<8&4278255360|c>>>8&16711935}})(),t.enc.Utf16})});var cl=Jt((xg,IM)=>{(function(t,e){typeof xg=="object"?IM.exports=xg=e(cn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(xg,function(t){return(function(){var e=t,n=e.lib,i=n.WordArray,r=e.enc,s=r.Base64={stringify:function(c){var u=c.words,p=c.sigBytes,m=this._map;c.clamp();for(var C=[],x=0;x<p;x+=3)for(var E=u[x>>>2]>>>24-x%4*8&255,A=u[x+1>>>2]>>>24-(x+1)%4*8&255,N=u[x+2>>>2]>>>24-(x+2)%4*8&255,R=E<<16|A<<8|N,k=0;k<4&&x+k*.75<p;k++)C.push(m.charAt(R>>>6*(3-k)&63));var B=m.charAt(64);if(B)for(;C.length%4;)C.push(B);return C.join("")},parse:function(c){var u=c.length,p=this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var C=0;C<p.length;C++)m[p.charCodeAt(C)]=C}var x=p.charAt(64);if(x){var E=c.indexOf(x);E!==-1&&(u=E)}return a(c,u,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,u,p){for(var m=[],C=0,x=0;x<u;x++)if(x%4){var E=p[c.charCodeAt(x-1)]<<x%4*2,A=p[c.charCodeAt(x)]>>>6-x%4*2,N=E|A;m[C>>>2]|=N<<24-C%4*8,C++}return i.create(m,C)}})(),t.enc.Base64})});var MM=Jt((bg,AM)=>{(function(t,e){typeof bg=="object"?AM.exports=bg=e(cn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(bg,function(t){return(function(){var e=t,n=e.lib,i=n.WordArray,r=e.enc,s=r.Base64url={stringify:function(c,u){u===void 0&&(u=!0);var p=c.words,m=c.sigBytes,C=u?this._safe_map:this._map;c.clamp();for(var x=[],E=0;E<m;E+=3)for(var A=p[E>>>2]>>>24-E%4*8&255,N=p[E+1>>>2]>>>24-(E+1)%4*8&255,R=p[E+2>>>2]>>>24-(E+2)%4*8&255,k=A<<16|N<<8|R,B=0;B<4&&E+B*.75<m;B++)x.push(C.charAt(k>>>6*(3-B)&63));var $=C.charAt(64);if($)for(;x.length%4;)x.push($);return x.join("")},parse:function(c,u){u===void 0&&(u=!0);var p=c.length,m=u?this._safe_map:this._map,C=this._reverseMap;if(!C){C=this._reverseMap=[];for(var x=0;x<m.length;x++)C[m.charCodeAt(x)]=x}var E=m.charAt(64);if(E){var A=c.indexOf(E);A!==-1&&(p=A)}return a(c,p,C)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,u,p){for(var m=[],C=0,x=0;x<u;x++)if(x%4){var E=p[c.charCodeAt(x-1)]<<x%4*2,A=p[c.charCodeAt(x)]>>>6-x%4*2,N=E|A;m[C>>>2]|=N<<24-C%4*8,C++}return i.create(m,C)}})(),t.enc.Base64url})});var ul=Jt((wg,kM)=>{(function(t,e){typeof wg=="object"?kM.exports=wg=e(cn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(wg,function(t){return(function(e){var n=t,i=n.lib,r=i.WordArray,s=i.Hasher,a=n.algo,c=[];(function(){for(var E=0;E<64;E++)c[E]=e.abs(e.sin(E+1))*4294967296|0})();var u=a.MD5=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(E,A){for(var N=0;N<16;N++){var R=A+N,k=E[R];E[R]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var B=this._hash.words,$=E[A+0],q=E[A+1],X=E[A+2],ie=E[A+3],me=E[A+4],ye=E[A+5],ge=E[A+6],Te=E[A+7],j=E[A+8],le=E[A+9],H=E[A+10],Ae=E[A+11],ht=E[A+12],Xe=E[A+13],pt=E[A+14],_t=E[A+15],be=B[0],ze=B[1],Be=B[2],Le=B[3];be=p(be,ze,Be,Le,$,7,c[0]),Le=p(Le,be,ze,Be,q,12,c[1]),Be=p(Be,Le,be,ze,X,17,c[2]),ze=p(ze,Be,Le,be,ie,22,c[3]),be=p(be,ze,Be,Le,me,7,c[4]),Le=p(Le,be,ze,Be,ye,12,c[5]),Be=p(Be,Le,be,ze,ge,17,c[6]),ze=p(ze,Be,Le,be,Te,22,c[7]),be=p(be,ze,Be,Le,j,7,c[8]),Le=p(Le,be,ze,Be,le,12,c[9]),Be=p(Be,Le,be,ze,H,17,c[10]),ze=p(ze,Be,Le,be,Ae,22,c[11]),be=p(be,ze,Be,Le,ht,7,c[12]),Le=p(Le,be,ze,Be,Xe,12,c[13]),Be=p(Be,Le,be,ze,pt,17,c[14]),ze=p(ze,Be,Le,be,_t,22,c[15]),be=m(be,ze,Be,Le,q,5,c[16]),Le=m(Le,be,ze,Be,ge,9,c[17]),Be=m(Be,Le,be,ze,Ae,14,c[18]),ze=m(ze,Be,Le,be,$,20,c[19]),be=m(be,ze,Be,Le,ye,5,c[20]),Le=m(Le,be,ze,Be,H,9,c[21]),Be=m(Be,Le,be,ze,_t,14,c[22]),ze=m(ze,Be,Le,be,me,20,c[23]),be=m(be,ze,Be,Le,le,5,c[24]),Le=m(Le,be,ze,Be,pt,9,c[25]),Be=m(Be,Le,be,ze,ie,14,c[26]),ze=m(ze,Be,Le,be,j,20,c[27]),be=m(be,ze,Be,Le,Xe,5,c[28]),Le=m(Le,be,ze,Be,X,9,c[29]),Be=m(Be,Le,be,ze,Te,14,c[30]),ze=m(ze,Be,Le,be,ht,20,c[31]),be=C(be,ze,Be,Le,ye,4,c[32]),Le=C(Le,be,ze,Be,j,11,c[33]),Be=C(Be,Le,be,ze,Ae,16,c[34]),ze=C(ze,Be,Le,be,pt,23,c[35]),be=C(be,ze,Be,Le,q,4,c[36]),Le=C(Le,be,ze,Be,me,11,c[37]),Be=C(Be,Le,be,ze,Te,16,c[38]),ze=C(ze,Be,Le,be,H,23,c[39]),be=C(be,ze,Be,Le,Xe,4,c[40]),Le=C(Le,be,ze,Be,$,11,c[41]),Be=C(Be,Le,be,ze,ie,16,c[42]),ze=C(ze,Be,Le,be,ge,23,c[43]),be=C(be,ze,Be,Le,le,4,c[44]),Le=C(Le,be,ze,Be,ht,11,c[45]),Be=C(Be,Le,be,ze,_t,16,c[46]),ze=C(ze,Be,Le,be,X,23,c[47]),be=x(be,ze,Be,Le,$,6,c[48]),Le=x(Le,be,ze,Be,Te,10,c[49]),Be=x(Be,Le,be,ze,pt,15,c[50]),ze=x(ze,Be,Le,be,ye,21,c[51]),be=x(be,ze,Be,Le,ht,6,c[52]),Le=x(Le,be,ze,Be,ie,10,c[53]),Be=x(Be,Le,be,ze,H,15,c[54]),ze=x(ze,Be,Le,be,q,21,c[55]),be=x(be,ze,Be,Le,j,6,c[56]),Le=x(Le,be,ze,Be,_t,10,c[57]),Be=x(Be,Le,be,ze,ge,15,c[58]),ze=x(ze,Be,Le,be,Xe,21,c[59]),be=x(be,ze,Be,Le,me,6,c[60]),Le=x(Le,be,ze,Be,Ae,10,c[61]),Be=x(Be,Le,be,ze,X,15,c[62]),ze=x(ze,Be,Le,be,le,21,c[63]),B[0]=B[0]+be|0,B[1]=B[1]+ze|0,B[2]=B[2]+Be|0,B[3]=B[3]+Le|0},_doFinalize:function(){var E=this._data,A=E.words,N=this._nDataBytes*8,R=E.sigBytes*8;A[R>>>5]|=128<<24-R%32;var k=e.floor(N/4294967296),B=N;A[(R+64>>>9<<4)+15]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,A[(R+64>>>9<<4)+14]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,E.sigBytes=(A.length+1)*4,this._process();for(var $=this._hash,q=$.words,X=0;X<4;X++){var ie=q[X];q[X]=(ie<<8|ie>>>24)&16711935|(ie<<24|ie>>>8)&4278255360}return $},clone:function(){var E=s.clone.call(this);return E._hash=this._hash.clone(),E}});function p(E,A,N,R,k,B,$){var q=E+(A&N|~A&R)+k+$;return(q<<B|q>>>32-B)+A}function m(E,A,N,R,k,B,$){var q=E+(A&R|N&~R)+k+$;return(q<<B|q>>>32-B)+A}function C(E,A,N,R,k,B,$){var q=E+(A^N^R)+k+$;return(q<<B|q>>>32-B)+A}function x(E,A,N,R,k,B,$){var q=E+(N^(A|~R))+k+$;return(q<<B|q>>>32-B)+A}n.MD5=s._createHelper(u),n.HmacMD5=s._createHmacHelper(u)})(Math),t.MD5})});var Ub=Jt((Eg,NM)=>{(function(t,e){typeof Eg=="object"?NM.exports=Eg=e(cn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Eg,function(t){return(function(){var e=t,n=e.lib,i=n.WordArray,r=n.Hasher,s=e.algo,a=[],c=s.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,p){for(var m=this._hash.words,C=m[0],x=m[1],E=m[2],A=m[3],N=m[4],R=0;R<80;R++){if(R<16)a[R]=u[p+R]|0;else{var k=a[R-3]^a[R-8]^a[R-14]^a[R-16];a[R]=k<<1|k>>>31}var B=(C<<5|C>>>27)+N+a[R];R<20?B+=(x&E|~x&A)+1518500249:R<40?B+=(x^E^A)+1859775393:R<60?B+=(x&E|x&A|E&A)-1894007588:B+=(x^E^A)-899497514,N=A,A=E,E=x<<30|x>>>2,x=C,C=B}m[0]=m[0]+C|0,m[1]=m[1]+x|0,m[2]=m[2]+E|0,m[3]=m[3]+A|0,m[4]=m[4]+N|0},_doFinalize:function(){var u=this._data,p=u.words,m=this._nDataBytes*8,C=u.sigBytes*8;return p[C>>>5]|=128<<24-C%32,p[(C+64>>>9<<4)+14]=Math.floor(m/4294967296),p[(C+64>>>9<<4)+15]=m,u.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var u=r.clone.call(this);return u._hash=this._hash.clone(),u}});e.SHA1=r._createHelper(c),e.HmacSHA1=r._createHmacHelper(c)})(),t.SHA1})});var Dg=Jt((Sg,FM)=>{(function(t,e){typeof Sg=="object"?FM.exports=Sg=e(cn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Sg,function(t){return(function(e){var n=t,i=n.lib,r=i.WordArray,s=i.Hasher,a=n.algo,c=[],u=[];(function(){function C(N){for(var R=e.sqrt(N),k=2;k<=R;k++)if(!(N%k))return!1;return!0}function x(N){return(N-(N|0))*4294967296|0}for(var E=2,A=0;A<64;)C(E)&&(A<8&&(c[A]=x(e.pow(E,1/2))),u[A]=x(e.pow(E,1/3)),A++),E++})();var p=[],m=a.SHA256=s.extend({_doReset:function(){this._hash=new r.init(c.slice(0))},_doProcessBlock:function(C,x){for(var E=this._hash.words,A=E[0],N=E[1],R=E[2],k=E[3],B=E[4],$=E[5],q=E[6],X=E[7],ie=0;ie<64;ie++){if(ie<16)p[ie]=C[x+ie]|0;else{var me=p[ie-15],ye=(me<<25|me>>>7)^(me<<14|me>>>18)^me>>>3,ge=p[ie-2],Te=(ge<<15|ge>>>17)^(ge<<13|ge>>>19)^ge>>>10;p[ie]=ye+p[ie-7]+Te+p[ie-16]}var j=B&$^~B&q,le=A&N^A&R^N&R,H=(A<<30|A>>>2)^(A<<19|A>>>13)^(A<<10|A>>>22),Ae=(B<<26|B>>>6)^(B<<21|B>>>11)^(B<<7|B>>>25),ht=X+Ae+j+u[ie]+p[ie],Xe=H+le;X=q,q=$,$=B,B=k+ht|0,k=R,R=N,N=A,A=ht+Xe|0}E[0]=E[0]+A|0,E[1]=E[1]+N|0,E[2]=E[2]+R|0,E[3]=E[3]+k|0,E[4]=E[4]+B|0,E[5]=E[5]+$|0,E[6]=E[6]+q|0,E[7]=E[7]+X|0},_doFinalize:function(){var C=this._data,x=C.words,E=this._nDataBytes*8,A=C.sigBytes*8;return x[A>>>5]|=128<<24-A%32,x[(A+64>>>9<<4)+14]=e.floor(E/4294967296),x[(A+64>>>9<<4)+15]=E,C.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var C=s.clone.call(this);return C._hash=this._hash.clone(),C}});n.SHA256=s._createHelper(m),n.HmacSHA256=s._createHmacHelper(m)})(Math),t.SHA256})});var PM=Jt((Tg,RM)=>{(function(t,e,n){typeof Tg=="object"?RM.exports=Tg=e(cn(),Dg()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(Tg,function(t){return(function(){var e=t,n=e.lib,i=n.WordArray,r=e.algo,s=r.SHA256,a=r.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=s._doFinalize.call(this);return c.sigBytes-=4,c}});e.SHA224=s._createHelper(a),e.HmacSHA224=s._createHmacHelper(a)})(),t.SHA224})});var zb=Jt((Ig,LM)=>{(function(t,e,n){typeof Ig=="object"?LM.exports=Ig=e(cn(),Np()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(Ig,function(t){return(function(){var e=t,n=e.lib,i=n.Hasher,r=e.x64,s=r.Word,a=r.WordArray,c=e.algo;function u(){return s.create.apply(s,arguments)}var p=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],m=[];(function(){for(var x=0;x<80;x++)m[x]=u()})();var C=c.SHA512=i.extend({_doReset:function(){this._hash=new a.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(x,E){for(var A=this._hash.words,N=A[0],R=A[1],k=A[2],B=A[3],$=A[4],q=A[5],X=A[6],ie=A[7],me=N.high,ye=N.low,ge=R.high,Te=R.low,j=k.high,le=k.low,H=B.high,Ae=B.low,ht=$.high,Xe=$.low,pt=q.high,_t=q.low,be=X.high,ze=X.low,Be=ie.high,Le=ie.low,Ut=me,lt=ye,Ct=ge,Ze=Te,Qt=j,yi=le,Bt=H,Dn=Ae,Yn=ht,dn=Xe,Ii=pt,Pn=_t,Jn=be,_i=ze,Fo=Be,je=Le,Qn=0;Qn<80;Qn++){var Ai,Mi,nn=m[Qn];if(Qn<16)Mi=nn.high=x[E+Qn*2]|0,Ai=nn.low=x[E+Qn*2+1]|0;else{var ro=m[Qn-15],wr=ro.high,zn=ro.low,ba=(wr>>>1|zn<<31)^(wr>>>8|zn<<24)^wr>>>7,Er=(zn>>>1|wr<<31)^(zn>>>8|wr<<24)^(zn>>>7|wr<<25),Tn=m[Qn-2],Vi=Tn.high,di=Tn.low,oi=(Vi>>>19|di<<13)^(Vi<<3|di>>>29)^Vi>>>6,qr=(di>>>19|Vi<<13)^(di<<3|Vi>>>29)^(di>>>6|Vi<<26),Bi=m[Qn-7],wa=Bi.high,$t=Bi.low,os=m[Qn-16],Tt=os.high,Sr=os.low;Ai=Er+$t,Mi=ba+wa+(Ai>>>0<Er>>>0?1:0),Ai=Ai+qr,Mi=Mi+oi+(Ai>>>0<qr>>>0?1:0),Ai=Ai+Sr,Mi=Mi+Tt+(Ai>>>0<Sr>>>0?1:0),nn.high=Mi,nn.low=Ai}var si=Yn&Ii^~Yn&Jn,fn=dn&Pn^~dn&_i,bn=Ut&Ct^Ut&Qt^Ct&Qt,Xi=lt&Ze^lt&yi^Ze&yi,Xn=(Ut>>>28|lt<<4)^(Ut<<30|lt>>>2)^(Ut<<25|lt>>>7),ki=(lt>>>28|Ut<<4)^(lt<<30|Ut>>>2)^(lt<<25|Ut>>>7),Ln=(Yn>>>14|dn<<18)^(Yn>>>18|dn<<14)^(Yn<<23|dn>>>9),Zi=(dn>>>14|Yn<<18)^(dn>>>18|Yn<<14)^(dn<<23|Yn>>>9),Gn=p[Qn],Dr=Gn.high,Hi=Gn.low,st=je+Zi,Ni=Fo+Ln+(st>>>0<je>>>0?1:0),st=st+fn,Ni=Ni+si+(st>>>0<fn>>>0?1:0),st=st+Hi,Ni=Ni+Dr+(st>>>0<Hi>>>0?1:0),st=st+Ai,Ni=Ni+Mi+(st>>>0<Ai>>>0?1:0),Ui=ki+Xi,Ro=Xn+bn+(Ui>>>0<ki>>>0?1:0);Fo=Jn,je=_i,Jn=Ii,_i=Pn,Ii=Yn,Pn=dn,dn=Dn+st|0,Yn=Bt+Ni+(dn>>>0<Dn>>>0?1:0)|0,Bt=Qt,Dn=yi,Qt=Ct,yi=Ze,Ct=Ut,Ze=lt,lt=st+Ui|0,Ut=Ni+Ro+(lt>>>0<st>>>0?1:0)|0}ye=N.low=ye+lt,N.high=me+Ut+(ye>>>0<lt>>>0?1:0),Te=R.low=Te+Ze,R.high=ge+Ct+(Te>>>0<Ze>>>0?1:0),le=k.low=le+yi,k.high=j+Qt+(le>>>0<yi>>>0?1:0),Ae=B.low=Ae+Dn,B.high=H+Bt+(Ae>>>0<Dn>>>0?1:0),Xe=$.low=Xe+dn,$.high=ht+Yn+(Xe>>>0<dn>>>0?1:0),_t=q.low=_t+Pn,q.high=pt+Ii+(_t>>>0<Pn>>>0?1:0),ze=X.low=ze+_i,X.high=be+Jn+(ze>>>0<_i>>>0?1:0),Le=ie.low=Le+je,ie.high=Be+Fo+(Le>>>0<je>>>0?1:0)},_doFinalize:function(){var x=this._data,E=x.words,A=this._nDataBytes*8,N=x.sigBytes*8;E[N>>>5]|=128<<24-N%32,E[(N+128>>>10<<5)+30]=Math.floor(A/4294967296),E[(N+128>>>10<<5)+31]=A,x.sigBytes=E.length*4,this._process();var R=this._hash.toX32();return R},clone:function(){var x=i.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:1024/32});e.SHA512=i._createHelper(C),e.HmacSHA512=i._createHmacHelper(C)})(),t.SHA512})});var VM=Jt((Ag,OM)=>{(function(t,e,n){typeof Ag=="object"?OM.exports=Ag=e(cn(),Np(),zb()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(Ag,function(t){return(function(){var e=t,n=e.x64,i=n.Word,r=n.WordArray,s=e.algo,a=s.SHA512,c=s.SHA384=a.extend({_doReset:function(){this._hash=new r.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=a._doFinalize.call(this);return u.sigBytes-=16,u}});e.SHA384=a._createHelper(c),e.HmacSHA384=a._createHmacHelper(c)})(),t.SHA384})});var HM=Jt((Mg,BM)=>{(function(t,e,n){typeof Mg=="object"?BM.exports=Mg=e(cn(),Np()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(Mg,function(t){return(function(e){var n=t,i=n.lib,r=i.WordArray,s=i.Hasher,a=n.x64,c=a.Word,u=n.algo,p=[],m=[],C=[];(function(){for(var A=1,N=0,R=0;R<24;R++){p[A+5*N]=(R+1)*(R+2)/2%64;var k=N%5,B=(2*A+3*N)%5;A=k,N=B}for(var A=0;A<5;A++)for(var N=0;N<5;N++)m[A+5*N]=N+(2*A+3*N)%5*5;for(var $=1,q=0;q<24;q++){for(var X=0,ie=0,me=0;me<7;me++){if($&1){var ye=(1<<me)-1;ye<32?ie^=1<<ye:X^=1<<ye-32}$&128?$=$<<1^113:$<<=1}C[q]=c.create(X,ie)}})();var x=[];(function(){for(var A=0;A<25;A++)x[A]=c.create()})();var E=u.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var A=this._state=[],N=0;N<25;N++)A[N]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(A,N){for(var R=this._state,k=this.blockSize/2,B=0;B<k;B++){var $=A[N+2*B],q=A[N+2*B+1];$=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,q=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360;var X=R[B];X.high^=q,X.low^=$}for(var ie=0;ie<24;ie++){for(var me=0;me<5;me++){for(var ye=0,ge=0,Te=0;Te<5;Te++){var X=R[me+5*Te];ye^=X.high,ge^=X.low}var j=x[me];j.high=ye,j.low=ge}for(var me=0;me<5;me++)for(var le=x[(me+4)%5],H=x[(me+1)%5],Ae=H.high,ht=H.low,ye=le.high^(Ae<<1|ht>>>31),ge=le.low^(ht<<1|Ae>>>31),Te=0;Te<5;Te++){var X=R[me+5*Te];X.high^=ye,X.low^=ge}for(var Xe=1;Xe<25;Xe++){var ye,ge,X=R[Xe],pt=X.high,_t=X.low,be=p[Xe];be<32?(ye=pt<<be|_t>>>32-be,ge=_t<<be|pt>>>32-be):(ye=_t<<be-32|pt>>>64-be,ge=pt<<be-32|_t>>>64-be);var ze=x[m[Xe]];ze.high=ye,ze.low=ge}var Be=x[0],Le=R[0];Be.high=Le.high,Be.low=Le.low;for(var me=0;me<5;me++)for(var Te=0;Te<5;Te++){var Xe=me+5*Te,X=R[Xe],Ut=x[Xe],lt=x[(me+1)%5+5*Te],Ct=x[(me+2)%5+5*Te];X.high=Ut.high^~lt.high&Ct.high,X.low=Ut.low^~lt.low&Ct.low}var X=R[0],Ze=C[ie];X.high^=Ze.high,X.low^=Ze.low}},_doFinalize:function(){var A=this._data,N=A.words,R=this._nDataBytes*8,k=A.sigBytes*8,B=this.blockSize*32;N[k>>>5]|=1<<24-k%32,N[(e.ceil((k+1)/B)*B>>>5)-1]|=128,A.sigBytes=N.length*4,this._process();for(var $=this._state,q=this.cfg.outputLength/8,X=q/8,ie=[],me=0;me<X;me++){var ye=$[me],ge=ye.high,Te=ye.low;ge=(ge<<8|ge>>>24)&16711935|(ge<<24|ge>>>8)&4278255360,Te=(Te<<8|Te>>>24)&16711935|(Te<<24|Te>>>8)&4278255360,ie.push(Te),ie.push(ge)}return new r.init(ie,q)},clone:function(){for(var A=s.clone.call(this),N=A._state=this._state.slice(0),R=0;R<25;R++)N[R]=N[R].clone();return A}});n.SHA3=s._createHelper(E),n.HmacSHA3=s._createHmacHelper(E)})(Math),t.SHA3})});var zM=Jt((kg,UM)=>{(function(t,e){typeof kg=="object"?UM.exports=kg=e(cn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(kg,function(t){return(function(e){var n=t,i=n.lib,r=i.WordArray,s=i.Hasher,a=n.algo,c=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),p=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),C=r.create([0,1518500249,1859775393,2400959708,2840853838]),x=r.create([1352829926,1548603684,1836072691,2053994217,0]),E=a.RIPEMD160=s.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(q,X){for(var ie=0;ie<16;ie++){var me=X+ie,ye=q[me];q[me]=(ye<<8|ye>>>24)&16711935|(ye<<24|ye>>>8)&4278255360}var ge=this._hash.words,Te=C.words,j=x.words,le=c.words,H=u.words,Ae=p.words,ht=m.words,Xe,pt,_t,be,ze,Be,Le,Ut,lt,Ct;Be=Xe=ge[0],Le=pt=ge[1],Ut=_t=ge[2],lt=be=ge[3],Ct=ze=ge[4];for(var Ze,ie=0;ie<80;ie+=1)Ze=Xe+q[X+le[ie]]|0,ie<16?Ze+=A(pt,_t,be)+Te[0]:ie<32?Ze+=N(pt,_t,be)+Te[1]:ie<48?Ze+=R(pt,_t,be)+Te[2]:ie<64?Ze+=k(pt,_t,be)+Te[3]:Ze+=B(pt,_t,be)+Te[4],Ze=Ze|0,Ze=$(Ze,Ae[ie]),Ze=Ze+ze|0,Xe=ze,ze=be,be=$(_t,10),_t=pt,pt=Ze,Ze=Be+q[X+H[ie]]|0,ie<16?Ze+=B(Le,Ut,lt)+j[0]:ie<32?Ze+=k(Le,Ut,lt)+j[1]:ie<48?Ze+=R(Le,Ut,lt)+j[2]:ie<64?Ze+=N(Le,Ut,lt)+j[3]:Ze+=A(Le,Ut,lt)+j[4],Ze=Ze|0,Ze=$(Ze,ht[ie]),Ze=Ze+Ct|0,Be=Ct,Ct=lt,lt=$(Ut,10),Ut=Le,Le=Ze;Ze=ge[1]+_t+lt|0,ge[1]=ge[2]+be+Ct|0,ge[2]=ge[3]+ze+Be|0,ge[3]=ge[4]+Xe+Le|0,ge[4]=ge[0]+pt+Ut|0,ge[0]=Ze},_doFinalize:function(){var q=this._data,X=q.words,ie=this._nDataBytes*8,me=q.sigBytes*8;X[me>>>5]|=128<<24-me%32,X[(me+64>>>9<<4)+14]=(ie<<8|ie>>>24)&16711935|(ie<<24|ie>>>8)&4278255360,q.sigBytes=(X.length+1)*4,this._process();for(var ye=this._hash,ge=ye.words,Te=0;Te<5;Te++){var j=ge[Te];ge[Te]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}return ye},clone:function(){var q=s.clone.call(this);return q._hash=this._hash.clone(),q}});function A(q,X,ie){return q^X^ie}function N(q,X,ie){return q&X|~q&ie}function R(q,X,ie){return(q|~X)^ie}function k(q,X,ie){return q&ie|X&~ie}function B(q,X,ie){return q^(X|~ie)}function $(q,X){return q<<X|q>>>32-X}n.RIPEMD160=s._createHelper(E),n.HmacRIPEMD160=s._createHmacHelper(E)})(Math),t.RIPEMD160})});var Fg=Jt((Ng,GM)=>{(function(t,e){typeof Ng=="object"?GM.exports=Ng=e(cn()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Ng,function(t){(function(){var e=t,n=e.lib,i=n.Base,r=e.enc,s=r.Utf8,a=e.algo,c=a.HMAC=i.extend({init:function(u,p){u=this._hasher=new u.init,typeof p=="string"&&(p=s.parse(p));var m=u.blockSize,C=m*4;p.sigBytes>C&&(p=u.finalize(p)),p.clamp();for(var x=this._oKey=p.clone(),E=this._iKey=p.clone(),A=x.words,N=E.words,R=0;R<m;R++)A[R]^=1549556828,N[R]^=909522486;x.sigBytes=E.sigBytes=C,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var p=this._hasher,m=p.finalize(u);p.reset();var C=p.finalize(this._oKey.clone().concat(m));return C}})})()})});var qM=Jt((Rg,$M)=>{(function(t,e,n){typeof Rg=="object"?$M.exports=Rg=e(cn(),Dg(),Fg()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(Rg,function(t){return(function(){var e=t,n=e.lib,i=n.Base,r=n.WordArray,s=e.algo,a=s.SHA256,c=s.HMAC,u=s.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:a,iterations:25e4}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,m){for(var C=this.cfg,x=c.create(C.hasher,p),E=r.create(),A=r.create([1]),N=E.words,R=A.words,k=C.keySize,B=C.iterations;N.length<k;){var $=x.update(m).finalize(A);x.reset();for(var q=$.words,X=q.length,ie=$,me=1;me<B;me++){ie=x.finalize(ie),x.reset();for(var ye=ie.words,ge=0;ge<X;ge++)q[ge]^=ye[ge]}E.concat($),R[0]++}return E.sigBytes=k*4,E}});e.PBKDF2=function(p,m,C){return u.create(C).compute(p,m)}})(),t.PBKDF2})});var ga=Jt((Pg,WM)=>{(function(t,e,n){typeof Pg=="object"?WM.exports=Pg=e(cn(),Ub(),Fg()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(Pg,function(t){return(function(){var e=t,n=e.lib,i=n.Base,r=n.WordArray,s=e.algo,a=s.MD5,c=s.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:a,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,p){for(var m,C=this.cfg,x=C.hasher.create(),E=r.create(),A=E.words,N=C.keySize,R=C.iterations;A.length<N;){m&&x.update(m),m=x.update(u).finalize(p),x.reset();for(var k=1;k<R;k++)m=x.finalize(m),x.reset();E.concat(m)}return E.sigBytes=N*4,E}});e.EvpKDF=function(u,p,m){return c.create(m).compute(u,p)}})(),t.EvpKDF})});var Di=Jt((Lg,jM)=>{(function(t,e,n){typeof Lg=="object"?jM.exports=Lg=e(cn(),ga()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(Lg,function(t){t.lib.Cipher||(function(e){var n=t,i=n.lib,r=i.Base,s=i.WordArray,a=i.BufferedBlockAlgorithm,c=n.enc,u=c.Utf8,p=c.Base64,m=n.algo,C=m.EvpKDF,x=i.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(j,le){return this.create(this._ENC_XFORM_MODE,j,le)},createDecryptor:function(j,le){return this.create(this._DEC_XFORM_MODE,j,le)},init:function(j,le,H){this.cfg=this.cfg.extend(H),this._xformMode=j,this._key=le,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(j){return this._append(j),this._process()},finalize:function(j){j&&this._append(j);var le=this._doFinalize();return le},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function j(le){return typeof le=="string"?Te:me}return function(le){return{encrypt:function(H,Ae,ht){return j(Ae).encrypt(le,H,Ae,ht)},decrypt:function(H,Ae,ht){return j(Ae).decrypt(le,H,Ae,ht)}}}})()}),E=i.StreamCipher=x.extend({_doFinalize:function(){var j=this._process(!0);return j},blockSize:1}),A=n.mode={},N=i.BlockCipherMode=r.extend({createEncryptor:function(j,le){return this.Encryptor.create(j,le)},createDecryptor:function(j,le){return this.Decryptor.create(j,le)},init:function(j,le){this._cipher=j,this._iv=le}}),R=A.CBC=(function(){var j=N.extend();j.Encryptor=j.extend({processBlock:function(H,Ae){var ht=this._cipher,Xe=ht.blockSize;le.call(this,H,Ae,Xe),ht.encryptBlock(H,Ae),this._prevBlock=H.slice(Ae,Ae+Xe)}}),j.Decryptor=j.extend({processBlock:function(H,Ae){var ht=this._cipher,Xe=ht.blockSize,pt=H.slice(Ae,Ae+Xe);ht.decryptBlock(H,Ae),le.call(this,H,Ae,Xe),this._prevBlock=pt}});function le(H,Ae,ht){var Xe,pt=this._iv;pt?(Xe=pt,this._iv=e):Xe=this._prevBlock;for(var _t=0;_t<ht;_t++)H[Ae+_t]^=Xe[_t]}return j})(),k=n.pad={},B=k.Pkcs7={pad:function(j,le){for(var H=le*4,Ae=H-j.sigBytes%H,ht=Ae<<24|Ae<<16|Ae<<8|Ae,Xe=[],pt=0;pt<Ae;pt+=4)Xe.push(ht);var _t=s.create(Xe,Ae);j.concat(_t)},unpad:function(j){var le=j.words[j.sigBytes-1>>>2]&255;j.sigBytes-=le}},$=i.BlockCipher=x.extend({cfg:x.cfg.extend({mode:R,padding:B}),reset:function(){var j;x.reset.call(this);var le=this.cfg,H=le.iv,Ae=le.mode;this._xformMode==this._ENC_XFORM_MODE?j=Ae.createEncryptor:(j=Ae.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==j?this._mode.init(this,H&&H.words):(this._mode=j.call(Ae,this,H&&H.words),this._mode.__creator=j)},_doProcessBlock:function(j,le){this._mode.processBlock(j,le)},_doFinalize:function(){var j,le=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(le.pad(this._data,this.blockSize),j=this._process(!0)):(j=this._process(!0),le.unpad(j)),j},blockSize:128/32}),q=i.CipherParams=r.extend({init:function(j){this.mixIn(j)},toString:function(j){return(j||this.formatter).stringify(this)}}),X=n.format={},ie=X.OpenSSL={stringify:function(j){var le,H=j.ciphertext,Ae=j.salt;return Ae?le=s.create([1398893684,1701076831]).concat(Ae).concat(H):le=H,le.toString(p)},parse:function(j){var le,H=p.parse(j),Ae=H.words;return Ae[0]==1398893684&&Ae[1]==1701076831&&(le=s.create(Ae.slice(2,4)),Ae.splice(0,4),H.sigBytes-=16),q.create({ciphertext:H,salt:le})}},me=i.SerializableCipher=r.extend({cfg:r.extend({format:ie}),encrypt:function(j,le,H,Ae){Ae=this.cfg.extend(Ae);var ht=j.createEncryptor(H,Ae),Xe=ht.finalize(le),pt=ht.cfg;return q.create({ciphertext:Xe,key:H,iv:pt.iv,algorithm:j,mode:pt.mode,padding:pt.padding,blockSize:j.blockSize,formatter:Ae.format})},decrypt:function(j,le,H,Ae){Ae=this.cfg.extend(Ae),le=this._parse(le,Ae.format);var ht=j.createDecryptor(H,Ae).finalize(le.ciphertext);return ht},_parse:function(j,le){return typeof j=="string"?le.parse(j,this):j}}),ye=n.kdf={},ge=ye.OpenSSL={execute:function(j,le,H,Ae,ht){if(Ae||(Ae=s.random(64/8)),ht)var Xe=C.create({keySize:le+H,hasher:ht}).compute(j,Ae);else var Xe=C.create({keySize:le+H}).compute(j,Ae);var pt=s.create(Xe.words.slice(le),H*4);return Xe.sigBytes=le*4,q.create({key:Xe,iv:pt,salt:Ae})}},Te=i.PasswordBasedCipher=me.extend({cfg:me.cfg.extend({kdf:ge}),encrypt:function(j,le,H,Ae){Ae=this.cfg.extend(Ae);var ht=Ae.kdf.execute(H,j.keySize,j.ivSize,Ae.salt,Ae.hasher);Ae.iv=ht.iv;var Xe=me.encrypt.call(this,j,le,ht.key,Ae);return Xe.mixIn(ht),Xe},decrypt:function(j,le,H,Ae){Ae=this.cfg.extend(Ae),le=this._parse(le,Ae.format);var ht=Ae.kdf.execute(H,j.keySize,j.ivSize,le.salt,Ae.hasher);Ae.iv=ht.iv;var Xe=me.decrypt.call(this,j,le,ht.key,Ae);return Xe}})})()})});var YM=Jt((Og,KM)=>{(function(t,e,n){typeof Og=="object"?KM.exports=Og=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Og,function(t){return t.mode.CFB=(function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(i,r){var s=this._cipher,a=s.blockSize;n.call(this,i,r,a,s),this._prevBlock=i.slice(r,r+a)}}),e.Decryptor=e.extend({processBlock:function(i,r){var s=this._cipher,a=s.blockSize,c=i.slice(r,r+a);n.call(this,i,r,a,s),this._prevBlock=c}});function n(i,r,s,a){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,a.encryptBlock(c,0);for(var p=0;p<s;p++)i[r+p]^=c[p]}return e})(),t.mode.CFB})});var QM=Jt((Vg,JM)=>{(function(t,e,n){typeof Vg=="object"?JM.exports=Vg=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Vg,function(t){return t.mode.CTR=(function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(i,r){var s=this._cipher,a=s.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var p=u.slice(0);s.encryptBlock(p,0),u[a-1]=u[a-1]+1|0;for(var m=0;m<a;m++)i[r+m]^=p[m]}});return e.Decryptor=n,e})(),t.mode.CTR})});var ZM=Jt((Bg,XM)=>{(function(t,e,n){typeof Bg=="object"?XM.exports=Bg=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Bg,function(t){return t.mode.CTRGladman=(function(){var e=t.lib.BlockCipherMode.extend();function n(s){if((s>>24&255)===255){var a=s>>16&255,c=s>>8&255,u=s&255;a===255?(a=0,c===255?(c=0,u===255?u=0:++u):++c):++a,s=0,s+=a<<16,s+=c<<8,s+=u}else s+=1<<24;return s}function i(s){return(s[0]=n(s[0]))===0&&(s[1]=n(s[1])),s}var r=e.Encryptor=e.extend({processBlock:function(s,a){var c=this._cipher,u=c.blockSize,p=this._iv,m=this._counter;p&&(m=this._counter=p.slice(0),this._iv=void 0),i(m);var C=m.slice(0);c.encryptBlock(C,0);for(var x=0;x<u;x++)s[a+x]^=C[x]}});return e.Decryptor=r,e})(),t.mode.CTRGladman})});var tk=Jt((Hg,ek)=>{(function(t,e,n){typeof Hg=="object"?ek.exports=Hg=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Hg,function(t){return t.mode.OFB=(function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(i,r){var s=this._cipher,a=s.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),s.encryptBlock(u,0);for(var p=0;p<a;p++)i[r+p]^=u[p]}});return e.Decryptor=n,e})(),t.mode.OFB})});var ik=Jt((Ug,nk)=>{(function(t,e,n){typeof Ug=="object"?nk.exports=Ug=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Ug,function(t){return t.mode.ECB=(function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(n,i){this._cipher.encryptBlock(n,i)}}),e.Decryptor=e.extend({processBlock:function(n,i){this._cipher.decryptBlock(n,i)}}),e})(),t.mode.ECB})});var ok=Jt((zg,rk)=>{(function(t,e,n){typeof zg=="object"?rk.exports=zg=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(zg,function(t){return t.pad.AnsiX923={pad:function(e,n){var i=e.sigBytes,r=n*4,s=r-i%r,a=i+s-1;e.clamp(),e.words[a>>>2]|=s<<24-a%4*8,e.sigBytes+=s},unpad:function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n}},t.pad.Ansix923})});var ak=Jt((Gg,sk)=>{(function(t,e,n){typeof Gg=="object"?sk.exports=Gg=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Gg,function(t){return t.pad.Iso10126={pad:function(e,n){var i=n*4,r=i-e.sigBytes%i;e.concat(t.lib.WordArray.random(r-1)).concat(t.lib.WordArray.create([r<<24],1))},unpad:function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n}},t.pad.Iso10126})});var ck=Jt(($g,lk)=>{(function(t,e,n){typeof $g=="object"?lk.exports=$g=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})($g,function(t){return t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971})});var dk=Jt((qg,uk)=>{(function(t,e,n){typeof qg=="object"?uk.exports=qg=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(qg,function(t){return t.pad.ZeroPadding={pad:function(e,n){var i=n*4;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var n=e.words,i=e.sigBytes-1,i=e.sigBytes-1;i>=0;i--)if(n[i>>>2]>>>24-i%4*8&255){e.sigBytes=i+1;break}}},t.pad.ZeroPadding})});var pk=Jt((Wg,fk)=>{(function(t,e,n){typeof Wg=="object"?fk.exports=Wg=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Wg,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})});var mk=Jt((jg,hk)=>{(function(t,e,n){typeof jg=="object"?hk.exports=jg=e(cn(),Di()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(jg,function(t){return(function(e){var n=t,i=n.lib,r=i.CipherParams,s=n.enc,a=s.Hex,c=n.format,u=c.Hex={stringify:function(p){return p.ciphertext.toString(a)},parse:function(p){var m=a.parse(p);return r.create({ciphertext:m})}}})(),t.format.Hex})});var vk=Jt((Kg,gk)=>{(function(t,e,n){typeof Kg=="object"?gk.exports=Kg=e(cn(),cl(),ul(),ga(),Di()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Kg,function(t){return(function(){var e=t,n=e.lib,i=n.BlockCipher,r=e.algo,s=[],a=[],c=[],u=[],p=[],m=[],C=[],x=[],E=[],A=[];(function(){for(var k=[],B=0;B<256;B++)B<128?k[B]=B<<1:k[B]=B<<1^283;for(var $=0,q=0,B=0;B<256;B++){var X=q^q<<1^q<<2^q<<3^q<<4;X=X>>>8^X&255^99,s[$]=X,a[X]=$;var ie=k[$],me=k[ie],ye=k[me],ge=k[X]*257^X*16843008;c[$]=ge<<24|ge>>>8,u[$]=ge<<16|ge>>>16,p[$]=ge<<8|ge>>>24,m[$]=ge;var ge=ye*16843009^me*65537^ie*257^$*16843008;C[X]=ge<<24|ge>>>8,x[X]=ge<<16|ge>>>16,E[X]=ge<<8|ge>>>24,A[X]=ge,$?($=ie^k[k[k[ye^ie]]],q^=k[k[q]]):$=q=1}})();var N=[0,1,2,4,8,16,32,64,128,27,54],R=r.AES=i.extend({_doReset:function(){var k;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var B=this._keyPriorReset=this._key,$=B.words,q=B.sigBytes/4,X=this._nRounds=q+6,ie=(X+1)*4,me=this._keySchedule=[],ye=0;ye<ie;ye++)ye<q?me[ye]=$[ye]:(k=me[ye-1],ye%q?q>6&&ye%q==4&&(k=s[k>>>24]<<24|s[k>>>16&255]<<16|s[k>>>8&255]<<8|s[k&255]):(k=k<<8|k>>>24,k=s[k>>>24]<<24|s[k>>>16&255]<<16|s[k>>>8&255]<<8|s[k&255],k^=N[ye/q|0]<<24),me[ye]=me[ye-q]^k);for(var ge=this._invKeySchedule=[],Te=0;Te<ie;Te++){var ye=ie-Te;if(Te%4)var k=me[ye];else var k=me[ye-4];Te<4||ye<=4?ge[Te]=k:ge[Te]=C[s[k>>>24]]^x[s[k>>>16&255]]^E[s[k>>>8&255]]^A[s[k&255]]}}},encryptBlock:function(k,B){this._doCryptBlock(k,B,this._keySchedule,c,u,p,m,s)},decryptBlock:function(k,B){var $=k[B+1];k[B+1]=k[B+3],k[B+3]=$,this._doCryptBlock(k,B,this._invKeySchedule,C,x,E,A,a);var $=k[B+1];k[B+1]=k[B+3],k[B+3]=$},_doCryptBlock:function(k,B,$,q,X,ie,me,ye){for(var ge=this._nRounds,Te=k[B]^$[0],j=k[B+1]^$[1],le=k[B+2]^$[2],H=k[B+3]^$[3],Ae=4,ht=1;ht<ge;ht++){var Xe=q[Te>>>24]^X[j>>>16&255]^ie[le>>>8&255]^me[H&255]^$[Ae++],pt=q[j>>>24]^X[le>>>16&255]^ie[H>>>8&255]^me[Te&255]^$[Ae++],_t=q[le>>>24]^X[H>>>16&255]^ie[Te>>>8&255]^me[j&255]^$[Ae++],be=q[H>>>24]^X[Te>>>16&255]^ie[j>>>8&255]^me[le&255]^$[Ae++];Te=Xe,j=pt,le=_t,H=be}var Xe=(ye[Te>>>24]<<24|ye[j>>>16&255]<<16|ye[le>>>8&255]<<8|ye[H&255])^$[Ae++],pt=(ye[j>>>24]<<24|ye[le>>>16&255]<<16|ye[H>>>8&255]<<8|ye[Te&255])^$[Ae++],_t=(ye[le>>>24]<<24|ye[H>>>16&255]<<16|ye[Te>>>8&255]<<8|ye[j&255])^$[Ae++],be=(ye[H>>>24]<<24|ye[Te>>>16&255]<<16|ye[j>>>8&255]<<8|ye[le&255])^$[Ae++];k[B]=Xe,k[B+1]=pt,k[B+2]=_t,k[B+3]=be},keySize:256/32});e.AES=i._createHelper(R)})(),t.AES})});var _k=Jt((Yg,yk)=>{(function(t,e,n){typeof Yg=="object"?yk.exports=Yg=e(cn(),cl(),ul(),ga(),Di()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Yg,function(t){return(function(){var e=t,n=e.lib,i=n.WordArray,r=n.BlockCipher,s=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],p=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],C=s.DES=r.extend({_doReset:function(){for(var N=this._key,R=N.words,k=[],B=0;B<56;B++){var $=a[B]-1;k[B]=R[$>>>5]>>>31-$%32&1}for(var q=this._subKeys=[],X=0;X<16;X++){for(var ie=q[X]=[],me=u[X],B=0;B<24;B++)ie[B/6|0]|=k[(c[B]-1+me)%28]<<31-B%6,ie[4+(B/6|0)]|=k[28+(c[B+24]-1+me)%28]<<31-B%6;ie[0]=ie[0]<<1|ie[0]>>>31;for(var B=1;B<7;B++)ie[B]=ie[B]>>>(B-1)*4+3;ie[7]=ie[7]<<5|ie[7]>>>27}for(var ye=this._invSubKeys=[],B=0;B<16;B++)ye[B]=q[15-B]},encryptBlock:function(N,R){this._doCryptBlock(N,R,this._subKeys)},decryptBlock:function(N,R){this._doCryptBlock(N,R,this._invSubKeys)},_doCryptBlock:function(N,R,k){this._lBlock=N[R],this._rBlock=N[R+1],x.call(this,4,252645135),x.call(this,16,65535),E.call(this,2,858993459),E.call(this,8,16711935),x.call(this,1,1431655765);for(var B=0;B<16;B++){for(var $=k[B],q=this._lBlock,X=this._rBlock,ie=0,me=0;me<8;me++)ie|=p[me][((X^$[me])&m[me])>>>0];this._lBlock=X,this._rBlock=q^ie}var ye=this._lBlock;this._lBlock=this._rBlock,this._rBlock=ye,x.call(this,1,1431655765),E.call(this,8,16711935),E.call(this,2,858993459),x.call(this,16,65535),x.call(this,4,252645135),N[R]=this._lBlock,N[R+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function x(N,R){var k=(this._lBlock>>>N^this._rBlock)&R;this._rBlock^=k,this._lBlock^=k<<N}function E(N,R){var k=(this._rBlock>>>N^this._lBlock)&R;this._lBlock^=k,this._rBlock^=k<<N}e.DES=r._createHelper(C);var A=s.TripleDES=r.extend({_doReset:function(){var N=this._key,R=N.words;if(R.length!==2&&R.length!==4&&R.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var k=R.slice(0,2),B=R.length<4?R.slice(0,2):R.slice(2,4),$=R.length<6?R.slice(0,2):R.slice(4,6);this._des1=C.createEncryptor(i.create(k)),this._des2=C.createEncryptor(i.create(B)),this._des3=C.createEncryptor(i.create($))},encryptBlock:function(N,R){this._des1.encryptBlock(N,R),this._des2.decryptBlock(N,R),this._des3.encryptBlock(N,R)},decryptBlock:function(N,R){this._des3.decryptBlock(N,R),this._des2.encryptBlock(N,R),this._des1.decryptBlock(N,R)},keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=r._createHelper(A)})(),t.TripleDES})});var xk=Jt((Jg,Ck)=>{(function(t,e,n){typeof Jg=="object"?Ck.exports=Jg=e(cn(),cl(),ul(),ga(),Di()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Jg,function(t){return(function(){var e=t,n=e.lib,i=n.StreamCipher,r=e.algo,s=r.RC4=i.extend({_doReset:function(){for(var u=this._key,p=u.words,m=u.sigBytes,C=this._S=[],x=0;x<256;x++)C[x]=x;for(var x=0,E=0;x<256;x++){var A=x%m,N=p[A>>>2]>>>24-A%4*8&255;E=(E+C[x]+N)%256;var R=C[x];C[x]=C[E],C[E]=R}this._i=this._j=0},_doProcessBlock:function(u,p){u[p]^=a.call(this)},keySize:256/32,ivSize:0});function a(){for(var u=this._S,p=this._i,m=this._j,C=0,x=0;x<4;x++){p=(p+1)%256,m=(m+u[p])%256;var E=u[p];u[p]=u[m],u[m]=E,C|=u[(u[p]+u[m])%256]<<24-x*8}return this._i=p,this._j=m,C}e.RC4=i._createHelper(s);var c=r.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)a.call(this)}});e.RC4Drop=i._createHelper(c)})(),t.RC4})});var wk=Jt((Qg,bk)=>{(function(t,e,n){typeof Qg=="object"?bk.exports=Qg=e(cn(),cl(),ul(),ga(),Di()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Qg,function(t){return(function(){var e=t,n=e.lib,i=n.StreamCipher,r=e.algo,s=[],a=[],c=[],u=r.Rabbit=i.extend({_doReset:function(){for(var m=this._key.words,C=this.cfg.iv,x=0;x<4;x++)m[x]=(m[x]<<8|m[x]>>>24)&16711935|(m[x]<<24|m[x]>>>8)&4278255360;var E=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],A=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var x=0;x<4;x++)p.call(this);for(var x=0;x<8;x++)A[x]^=E[x+4&7];if(C){var N=C.words,R=N[0],k=N[1],B=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,$=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,q=B>>>16|$&4294901760,X=$<<16|B&65535;A[0]^=B,A[1]^=q,A[2]^=$,A[3]^=X,A[4]^=B,A[5]^=q,A[6]^=$,A[7]^=X;for(var x=0;x<4;x++)p.call(this)}},_doProcessBlock:function(m,C){var x=this._X;p.call(this),s[0]=x[0]^x[5]>>>16^x[3]<<16,s[1]=x[2]^x[7]>>>16^x[5]<<16,s[2]=x[4]^x[1]>>>16^x[7]<<16,s[3]=x[6]^x[3]>>>16^x[1]<<16;for(var E=0;E<4;E++)s[E]=(s[E]<<8|s[E]>>>24)&16711935|(s[E]<<24|s[E]>>>8)&4278255360,m[C+E]^=s[E]},blockSize:128/32,ivSize:64/32});function p(){for(var m=this._X,C=this._C,x=0;x<8;x++)a[x]=C[x];C[0]=C[0]+1295307597+this._b|0,C[1]=C[1]+3545052371+(C[0]>>>0<a[0]>>>0?1:0)|0,C[2]=C[2]+886263092+(C[1]>>>0<a[1]>>>0?1:0)|0,C[3]=C[3]+1295307597+(C[2]>>>0<a[2]>>>0?1:0)|0,C[4]=C[4]+3545052371+(C[3]>>>0<a[3]>>>0?1:0)|0,C[5]=C[5]+886263092+(C[4]>>>0<a[4]>>>0?1:0)|0,C[6]=C[6]+1295307597+(C[5]>>>0<a[5]>>>0?1:0)|0,C[7]=C[7]+3545052371+(C[6]>>>0<a[6]>>>0?1:0)|0,this._b=C[7]>>>0<a[7]>>>0?1:0;for(var x=0;x<8;x++){var E=m[x]+C[x],A=E&65535,N=E>>>16,R=((A*A>>>17)+A*N>>>15)+N*N,k=((E&4294901760)*E|0)+((E&65535)*E|0);c[x]=R^k}m[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,m[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,m[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,m[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,m[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,m[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,m[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,m[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}e.Rabbit=i._createHelper(u)})(),t.Rabbit})});var Sk=Jt((Xg,Ek)=>{(function(t,e,n){typeof Xg=="object"?Ek.exports=Xg=e(cn(),cl(),ul(),ga(),Di()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Xg,function(t){return(function(){var e=t,n=e.lib,i=n.StreamCipher,r=e.algo,s=[],a=[],c=[],u=r.RabbitLegacy=i.extend({_doReset:function(){var m=this._key.words,C=this.cfg.iv,x=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],E=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var A=0;A<4;A++)p.call(this);for(var A=0;A<8;A++)E[A]^=x[A+4&7];if(C){var N=C.words,R=N[0],k=N[1],B=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,$=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,q=B>>>16|$&4294901760,X=$<<16|B&65535;E[0]^=B,E[1]^=q,E[2]^=$,E[3]^=X,E[4]^=B,E[5]^=q,E[6]^=$,E[7]^=X;for(var A=0;A<4;A++)p.call(this)}},_doProcessBlock:function(m,C){var x=this._X;p.call(this),s[0]=x[0]^x[5]>>>16^x[3]<<16,s[1]=x[2]^x[7]>>>16^x[5]<<16,s[2]=x[4]^x[1]>>>16^x[7]<<16,s[3]=x[6]^x[3]>>>16^x[1]<<16;for(var E=0;E<4;E++)s[E]=(s[E]<<8|s[E]>>>24)&16711935|(s[E]<<24|s[E]>>>8)&4278255360,m[C+E]^=s[E]},blockSize:128/32,ivSize:64/32});function p(){for(var m=this._X,C=this._C,x=0;x<8;x++)a[x]=C[x];C[0]=C[0]+1295307597+this._b|0,C[1]=C[1]+3545052371+(C[0]>>>0<a[0]>>>0?1:0)|0,C[2]=C[2]+886263092+(C[1]>>>0<a[1]>>>0?1:0)|0,C[3]=C[3]+1295307597+(C[2]>>>0<a[2]>>>0?1:0)|0,C[4]=C[4]+3545052371+(C[3]>>>0<a[3]>>>0?1:0)|0,C[5]=C[5]+886263092+(C[4]>>>0<a[4]>>>0?1:0)|0,C[6]=C[6]+1295307597+(C[5]>>>0<a[5]>>>0?1:0)|0,C[7]=C[7]+3545052371+(C[6]>>>0<a[6]>>>0?1:0)|0,this._b=C[7]>>>0<a[7]>>>0?1:0;for(var x=0;x<8;x++){var E=m[x]+C[x],A=E&65535,N=E>>>16,R=((A*A>>>17)+A*N>>>15)+N*N,k=((E&4294901760)*E|0)+((E&65535)*E|0);c[x]=R^k}m[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,m[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,m[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,m[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,m[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,m[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,m[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,m[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}e.RabbitLegacy=i._createHelper(u)})(),t.RabbitLegacy})});var Tk=Jt((Zg,Dk)=>{(function(t,e,n){typeof Zg=="object"?Dk.exports=Zg=e(cn(),cl(),ul(),ga(),Di()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Zg,function(t){return(function(){var e=t,n=e.lib,i=n.BlockCipher,r=e.algo;let s=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function p(A,N){let R=N>>24&255,k=N>>16&255,B=N>>8&255,$=N&255,q=A.sbox[0][R]+A.sbox[1][k];return q=q^A.sbox[2][B],q=q+A.sbox[3][$],q}function m(A,N,R){let k=N,B=R,$;for(let q=0;q<s;++q)k=k^A.pbox[q],B=p(A,k)^B,$=k,k=B,B=$;return $=k,k=B,B=$,B=B^A.pbox[s],k=k^A.pbox[s+1],{left:k,right:B}}function C(A,N,R){let k=N,B=R,$;for(let q=s+1;q>1;--q)k=k^A.pbox[q],B=p(A,k)^B,$=k,k=B,B=$;return $=k,k=B,B=$,B=B^A.pbox[1],k=k^A.pbox[0],{left:k,right:B}}function x(A,N,R){for(let X=0;X<4;X++){A.sbox[X]=[];for(let ie=0;ie<256;ie++)A.sbox[X][ie]=c[X][ie]}let k=0;for(let X=0;X<s+2;X++)A.pbox[X]=a[X]^N[k],k++,k>=R&&(k=0);let B=0,$=0,q=0;for(let X=0;X<s+2;X+=2)q=m(A,B,$),B=q.left,$=q.right,A.pbox[X]=B,A.pbox[X+1]=$;for(let X=0;X<4;X++)for(let ie=0;ie<256;ie+=2)q=m(A,B,$),B=q.left,$=q.right,A.sbox[X][ie]=B,A.sbox[X][ie+1]=$;return!0}var E=r.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var A=this._keyPriorReset=this._key,N=A.words,R=A.sigBytes/4;x(u,N,R)}},encryptBlock:function(A,N){var R=m(u,A[N],A[N+1]);A[N]=R.left,A[N+1]=R.right},decryptBlock:function(A,N){var R=C(u,A[N],A[N+1]);A[N]=R.left,A[N+1]=R.right},blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=i._createHelper(E)})(),t.Blowfish})});var tv=Jt((ev,Ik)=>{(function(t,e,n){typeof ev=="object"?Ik.exports=ev=e(cn(),Np(),SM(),TM(),cl(),MM(),ul(),Ub(),Dg(),PM(),zb(),VM(),HM(),zM(),Fg(),qM(),ga(),Di(),YM(),QM(),ZM(),tk(),ik(),ok(),ak(),ck(),dk(),pk(),mk(),vk(),_k(),xk(),wk(),Sk(),Tk()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(ev,function(t){return t})});var sh=Jt((LE,OE)=>{(function(t,e){typeof LE=="object"&&typeof OE<"u"?OE.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.CodeMirror=e())})(LE,function(){"use strict";var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),i=/MSIE \d/.test(t),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),s=/Edge\/(\d+)/.exec(t),a=i||r||s,c=a&&(i?document.documentMode||6:+(s||r)[1]),u=!s&&/WebKit\//.test(t),p=u&&/Qt\/\d+\.\d+/.test(t),m=!s&&/Chrome\/(\d+)/.exec(t),C=m&&+m[1],x=/Opera\//.test(t),E=/Apple Computer/.test(navigator.vendor),A=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),N=/PhantomJS/.test(t),R=E&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),k=/Android/.test(t),B=R||k||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),$=R||/Mac/.test(e),q=/\bCrOS\b/.test(t),X=/win/i.test(e),ie=x&&t.match(/Version\/(\d*\.\d*)/);ie&&(ie=Number(ie[1])),ie&&ie>=15&&(x=!1,u=!0);var me=$&&(p||x&&(ie==null||ie<12.11)),ye=n||a&&c>=9;function ge(o){return new RegExp("(^|\\s)"+o+"(?:$|\\s)\\s*")}var Te=function(o,l){var f=o.className,d=ge(l).exec(f);if(d){var h=f.slice(d.index+d[0].length);o.className=f.slice(0,d.index)+(h?d[1]+h:"")}};function j(o){for(var l=o.childNodes.length;l>0;--l)o.removeChild(o.firstChild);return o}function le(o,l){return j(o).appendChild(l)}function H(o,l,f,d){var h=document.createElement(o);if(f&&(h.className=f),d&&(h.style.cssText=d),typeof l=="string")h.appendChild(document.createTextNode(l));else if(l)for(var b=0;b<l.length;++b)h.appendChild(l[b]);return h}function Ae(o,l,f,d){var h=H(o,l,f,d);return h.setAttribute("role","presentation"),h}var ht;document.createRange?ht=function(o,l,f,d){var h=document.createRange();return h.setEnd(d||o,f),h.setStart(o,l),h}:ht=function(o,l,f){var d=document.body.createTextRange();try{d.moveToElementText(o.parentNode)}catch{return d}return d.collapse(!0),d.moveEnd("character",f),d.moveStart("character",l),d};function Xe(o,l){if(l.nodeType==3&&(l=l.parentNode),o.contains)return o.contains(l);do if(l.nodeType==11&&(l=l.host),l==o)return!0;while(l=l.parentNode)}function pt(o){var l=o.ownerDocument||o,f;try{f=o.activeElement}catch{f=l.body||null}for(;f&&f.shadowRoot&&f.shadowRoot.activeElement;)f=f.shadowRoot.activeElement;return f}function _t(o,l){var f=o.className;ge(l).test(f)||(o.className+=(f?" ":"")+l)}function be(o,l){for(var f=o.split(" "),d=0;d<f.length;d++)f[d]&&!ge(f[d]).test(l)&&(l+=" "+f[d]);return l}var ze=function(o){o.select()};R?ze=function(o){o.selectionStart=0,o.selectionEnd=o.value.length}:a&&(ze=function(o){try{o.select()}catch{}});function Be(o){return o.display.wrapper.ownerDocument}function Le(o){return Ut(o.display.wrapper)}function Ut(o){return o.getRootNode?o.getRootNode():o.ownerDocument}function lt(o){return Be(o).defaultView}function Ct(o){var l=Array.prototype.slice.call(arguments,1);return function(){return o.apply(null,l)}}function Ze(o,l,f){l||(l={});for(var d in o)o.hasOwnProperty(d)&&(f!==!1||!l.hasOwnProperty(d))&&(l[d]=o[d]);return l}function Qt(o,l,f,d,h){l==null&&(l=o.search(/[^\s\u00a0]/),l==-1&&(l=o.length));for(var b=d||0,S=h||0;;){var T=o.indexOf("	",b);if(T<0||T>=l)return S+(l-b);S+=T-b,S+=f-S%f,b=T+1}}var yi=function(){this.id=null,this.f=null,this.time=0,this.handler=Ct(this.onTimeout,this)};yi.prototype.onTimeout=function(o){o.id=0,o.time<=+new Date?o.f():setTimeout(o.handler,o.time-+new Date)},yi.prototype.set=function(o,l){this.f=l;var f=+new Date+o;(!this.id||f<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,o),this.time=f)};function Bt(o,l){for(var f=0;f<o.length;++f)if(o[f]==l)return f;return-1}var Dn=50,Yn={toString:function(){return"CodeMirror.Pass"}},dn={scroll:!1},Ii={origin:"*mouse"},Pn={origin:"+move"};function Jn(o,l,f){for(var d=0,h=0;;){var b=o.indexOf("	",d);b==-1&&(b=o.length);var S=b-d;if(b==o.length||h+S>=l)return d+Math.min(S,l-h);if(h+=b-d,h+=f-h%f,d=b+1,h>=l)return d}}var _i=[""];function Fo(o){for(;_i.length<=o;)_i.push(je(_i)+" ");return _i[o]}function je(o){return o[o.length-1]}function Qn(o,l){for(var f=[],d=0;d<o.length;d++)f[d]=l(o[d],d);return f}function Ai(o,l,f){for(var d=0,h=f(l);d<o.length&&f(o[d])<=h;)d++;o.splice(d,0,l)}function Mi(){}function nn(o,l){var f;return Object.create?f=Object.create(o):(Mi.prototype=o,f=new Mi),l&&Ze(l,f),f}var ro=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function wr(o){return/\w/.test(o)||o>"\x80"&&(o.toUpperCase()!=o.toLowerCase()||ro.test(o))}function zn(o,l){return l?l.source.indexOf("\\w")>-1&&wr(o)?!0:l.test(o):wr(o)}function ba(o){for(var l in o)if(o.hasOwnProperty(l)&&o[l])return!1;return!0}var Er=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Tn(o){return o.charCodeAt(0)>=768&&Er.test(o)}function Vi(o,l,f){for(;(f<0?l>0:l<o.length)&&Tn(o.charAt(l));)l+=f;return l}function di(o,l,f){for(var d=l>f?-1:1;;){if(l==f)return l;var h=(l+f)/2,b=d<0?Math.ceil(h):Math.floor(h);if(b==l)return o(b)?l:f;o(b)?f=b:l=b+d}}function oi(o,l,f,d){if(!o)return d(l,f,"ltr",0);for(var h=!1,b=0;b<o.length;++b){var S=o[b];(S.from<f&&S.to>l||l==f&&S.to==l)&&(d(Math.max(S.from,l),Math.min(S.to,f),S.level==1?"rtl":"ltr",b),h=!0)}h||d(l,f,"ltr")}var qr=null;function Bi(o,l,f){var d;qr=null;for(var h=0;h<o.length;++h){var b=o[h];if(b.from<l&&b.to>l)return h;b.to==l&&(b.from!=b.to&&f=="before"?d=h:qr=h),b.from==l&&(b.from!=b.to&&f!="before"?d=h:qr=h)}return d??qr}var wa=(function(){var o="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",l="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function f(P){return P<=247?o.charAt(P):1424<=P&&P<=1524?"R":1536<=P&&P<=1785?l.charAt(P-1536):1774<=P&&P<=2220?"r":8192<=P&&P<=8203?"w":P==8204?"b":"L"}var d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,h=/[stwN]/,b=/[LRr]/,S=/[Lb1n]/,T=/[1n]/;function M(P,K,Z){this.level=P,this.from=K,this.to=Z}return function(P,K){var Z=K=="ltr"?"L":"R";if(P.length==0||K=="ltr"&&!d.test(P))return!1;for(var ue=P.length,se=[],we=0;we<ue;++we)se.push(f(P.charCodeAt(we)));for(var Re=0,qe=Z;Re<ue;++Re){var it=se[Re];it=="m"?se[Re]=qe:qe=it}for(var dt=0,rt=Z;dt<ue;++dt){var vt=se[dt];vt=="1"&&rt=="r"?se[dt]="n":b.test(vt)&&(rt=vt,vt=="r"&&(se[dt]="R"))}for(var Rt=1,At=se[0];Rt<ue-1;++Rt){var Yt=se[Rt];Yt=="+"&&At=="1"&&se[Rt+1]=="1"?se[Rt]="1":Yt==","&&At==se[Rt+1]&&(At=="1"||At=="n")&&(se[Rt]=At),At=Yt}for(var En=0;En<ue;++En){var xi=se[En];if(xi==",")se[En]="N";else if(xi=="%"){var Vn=void 0;for(Vn=En+1;Vn<ue&&se[Vn]=="%";++Vn);for(var Rr=En&&se[En-1]=="!"||Vn<ue&&se[Vn]=="1"?"1":"N",hr=En;hr<Vn;++hr)se[hr]=Rr;En=Vn-1}}for(var ai=0,mr=Z;ai<ue;++ai){var Pi=se[ai];mr=="L"&&Pi=="1"?se[ai]="L":b.test(Pi)&&(mr=Pi)}for(var pi=0;pi<ue;++pi)if(h.test(se[pi])){var li=void 0;for(li=pi+1;li<ue&&h.test(se[li]);++li);for(var qn=(pi?se[pi-1]:Z)=="L",gr=(li<ue?se[li]:Z)=="L",pu=qn==gr?qn?"L":"R":Z,$a=pi;$a<li;++$a)se[$a]=pu;pi=li-1}for(var qi=[],xs,bi=0;bi<ue;)if(S.test(se[bi])){var sC=bi;for(++bi;bi<ue&&S.test(se[bi]);++bi);qi.push(new M(0,sC,bi))}else{var Ks=bi,Wl=qi.length,jl=K=="rtl"?1:0;for(++bi;bi<ue&&se[bi]!="L";++bi);for(var tr=Ks;tr<bi;)if(T.test(se[tr])){Ks<tr&&(qi.splice(Wl,0,new M(1,Ks,tr)),Wl+=jl);var hu=tr;for(++tr;tr<bi&&T.test(se[tr]);++tr);qi.splice(Wl,0,new M(2,hu,tr)),Wl+=jl,Ks=tr}else++tr;Ks<bi&&qi.splice(Wl,0,new M(1,Ks,bi))}return K=="ltr"&&(qi[0].level==1&&(xs=P.match(/^\s+/))&&(qi[0].from=xs[0].length,qi.unshift(new M(0,0,xs[0].length))),je(qi).level==1&&(xs=P.match(/\s+$/))&&(je(qi).to-=xs[0].length,qi.push(new M(0,ue-xs[0].length,ue)))),K=="rtl"?qi.reverse():qi}})();function $t(o,l){var f=o.order;return f==null&&(f=o.order=wa(o.text,l)),f}var os=[],Tt=function(o,l,f){if(o.addEventListener)o.addEventListener(l,f,!1);else if(o.attachEvent)o.attachEvent("on"+l,f);else{var d=o._handlers||(o._handlers={});d[l]=(d[l]||os).concat(f)}};function Sr(o,l){return o._handlers&&o._handlers[l]||os}function si(o,l,f){if(o.removeEventListener)o.removeEventListener(l,f,!1);else if(o.detachEvent)o.detachEvent("on"+l,f);else{var d=o._handlers,h=d&&d[l];if(h){var b=Bt(h,f);b>-1&&(d[l]=h.slice(0,b).concat(h.slice(b+1)))}}}function fn(o,l){var f=Sr(o,l);if(f.length)for(var d=Array.prototype.slice.call(arguments,2),h=0;h<f.length;++h)f[h].apply(null,d)}function bn(o,l,f){return typeof l=="string"&&(l={type:l,preventDefault:function(){this.defaultPrevented=!0}}),fn(o,f||l.type,o,l),Gn(l)||l.codemirrorIgnore}function Xi(o){var l=o._handlers&&o._handlers.cursorActivity;if(l)for(var f=o.curOp.cursorActivityHandlers||(o.curOp.cursorActivityHandlers=[]),d=0;d<l.length;++d)Bt(f,l[d])==-1&&f.push(l[d])}function Xn(o,l){return Sr(o,l).length>0}function ki(o){o.prototype.on=function(l,f){Tt(this,l,f)},o.prototype.off=function(l,f){si(this,l,f)}}function Ln(o){o.preventDefault?o.preventDefault():o.returnValue=!1}function Zi(o){o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}function Gn(o){return o.defaultPrevented!=null?o.defaultPrevented:o.returnValue==!1}function Dr(o){Ln(o),Zi(o)}function Hi(o){return o.target||o.srcElement}function st(o){var l=o.which;return l==null&&(o.button&1?l=1:o.button&2?l=3:o.button&4&&(l=2)),$&&o.ctrlKey&&l==1&&(l=3),l}var Ni=(function(){if(a&&c<9)return!1;var o=H("div");return"draggable"in o||"dragDrop"in o})(),Ui;function Ro(o){if(Ui==null){var l=H("span","\u200B");le(o,H("span",[l,document.createTextNode("x")])),o.firstChild.offsetHeight!=0&&(Ui=l.offsetWidth<=1&&l.offsetHeight>2&&!(a&&c<8))}var f=Ui?H("span","\u200B"):H("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return f.setAttribute("cm-text",""),f}var ct;function oo(o){if(ct!=null)return ct;var l=le(o,document.createTextNode("A\u062EA")),f=ht(l,0,1).getBoundingClientRect(),d=ht(l,1,2).getBoundingClientRect();return j(o),!f||f.left==f.right?!1:ct=d.right-f.right<3}var ur=`

b`.split(/\n/).length!=3?function(o){for(var l=0,f=[],d=o.length;l<=d;){var h=o.indexOf(`
`,l);h==-1&&(h=o.length);var b=o.slice(l,o.charAt(h-1)=="\r"?h-1:h),S=b.indexOf("\r");S!=-1?(f.push(b.slice(0,S)),l+=S+1):(f.push(b),l=h+1)}return f}:function(o){return o.split(/\r\n?|\n/)},Po=window.getSelection?function(o){try{return o.selectionStart!=o.selectionEnd}catch{return!1}}:function(o){var l;try{l=o.ownerDocument.selection.createRange()}catch{}return!l||l.parentElement()!=o?!1:l.compareEndPoints("StartToEnd",l)!=0},Ea=(function(){var o=H("div");return"oncopy"in o?!0:(o.setAttribute("oncopy","return;"),typeof o.oncopy=="function")})(),Tr=null;function _l(o){if(Tr!=null)return Tr;var l=le(o,H("span","x")),f=l.getBoundingClientRect(),d=ht(l,0,1).getBoundingClientRect();return Tr=Math.abs(f.left-d.left)>1}var Sa={},Wr={};function Fi(o,l){arguments.length>2&&(l.dependencies=Array.prototype.slice.call(arguments,2)),Sa[o]=l}function Ir(o,l){Wr[o]=l}function ss(o){if(typeof o=="string"&&Wr.hasOwnProperty(o))o=Wr[o];else if(o&&typeof o.name=="string"&&Wr.hasOwnProperty(o.name)){var l=Wr[o.name];typeof l=="string"&&(l={name:l}),o=nn(l,o),o.name=l.name}else{if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(o))return ss("application/xml");if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(o))return ss("application/json")}return typeof o=="string"?{name:o}:o||{name:"null"}}function Da(o,l){l=ss(l);var f=Sa[l.name];if(!f)return Da(o,"text/plain");var d=f(o,l);if(as.hasOwnProperty(l.name)){var h=as[l.name];for(var b in h)h.hasOwnProperty(b)&&(d.hasOwnProperty(b)&&(d["_"+b]=d[b]),d[b]=h[b])}if(d.name=l.name,l.helperType&&(d.helperType=l.helperType),l.modeProps)for(var S in l.modeProps)d[S]=l.modeProps[S];return d}var as={};function Ta(o,l){var f=as.hasOwnProperty(o)?as[o]:as[o]={};Ze(l,f)}function dr(o,l){if(l===!0)return l;if(o.copyState)return o.copyState(l);var f={};for(var d in l){var h=l[d];h instanceof Array&&(h=h.concat([])),f[d]=h}return f}function vn(o,l){for(var f;o.innerMode&&(f=o.innerMode(l),!(!f||f.mode==o));)l=f.state,o=f.mode;return f||{mode:o,state:l}}function An(o,l,f){return o.startState?o.startState(l,f):!0}var Mn=function(o,l,f){this.pos=this.start=0,this.string=o,this.tabSize=l||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=f};Mn.prototype.eol=function(){return this.pos>=this.string.length},Mn.prototype.sol=function(){return this.pos==this.lineStart},Mn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Mn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Mn.prototype.eat=function(o){var l=this.string.charAt(this.pos),f;if(typeof o=="string"?f=l==o:f=l&&(o.test?o.test(l):o(l)),f)return++this.pos,l},Mn.prototype.eatWhile=function(o){for(var l=this.pos;this.eat(o););return this.pos>l},Mn.prototype.eatSpace=function(){for(var o=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o},Mn.prototype.skipToEnd=function(){this.pos=this.string.length},Mn.prototype.skipTo=function(o){var l=this.string.indexOf(o,this.pos);if(l>-1)return this.pos=l,!0},Mn.prototype.backUp=function(o){this.pos-=o},Mn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Qt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Qt(this.string,this.lineStart,this.tabSize):0)},Mn.prototype.indentation=function(){return Qt(this.string,null,this.tabSize)-(this.lineStart?Qt(this.string,this.lineStart,this.tabSize):0)},Mn.prototype.match=function(o,l,f){if(typeof o=="string"){var d=function(S){return f?S.toLowerCase():S},h=this.string.substr(this.pos,o.length);if(d(h)==d(o))return l!==!1&&(this.pos+=o.length),!0}else{var b=this.string.slice(this.pos).match(o);return b&&b.index>0?null:(b&&l!==!1&&(this.pos+=b[0].length),b)}},Mn.prototype.current=function(){return this.string.slice(this.start,this.pos)},Mn.prototype.hideFirstChars=function(o,l){this.lineStart+=o;try{return l()}finally{this.lineStart-=o}},Mn.prototype.lookAhead=function(o){var l=this.lineOracle;return l&&l.lookAhead(o)},Mn.prototype.baseToken=function(){var o=this.lineOracle;return o&&o.baseToken(this.pos)};function wt(o,l){if(l-=o.first,l<0||l>=o.size)throw new Error("There is no line "+(l+o.first)+" in the document.");for(var f=o;!f.lines;)for(var d=0;;++d){var h=f.children[d],b=h.chunkSize();if(l<b){f=h;break}l-=b}return f.lines[l]}function Ar(o,l,f){var d=[],h=l.line;return o.iter(l.line,f.line+1,function(b){var S=b.text;h==f.line&&(S=S.slice(0,f.ch)),h==l.line&&(S=S.slice(l.ch)),d.push(S),++h}),d}function ls(o,l,f){var d=[];return o.iter(l,f,function(h){d.push(h.text)}),d}function fr(o,l){var f=l-o.height;if(f)for(var d=o;d;d=d.parent)d.height+=f}function O(o){if(o.parent==null)return null;for(var l=o.parent,f=Bt(l.lines,o),d=l.parent;d;l=d,d=d.parent)for(var h=0;d.children[h]!=l;++h)f+=d.children[h].chunkSize();return f+l.first}function Q(o,l){var f=o.first;e:do{for(var d=0;d<o.children.length;++d){var h=o.children[d],b=h.height;if(l<b){o=h;continue e}l-=b,f+=h.chunkSize()}return f}while(!o.lines);for(var S=0;S<o.lines.length;++S){var T=o.lines[S],M=T.height;if(l<M)break;l-=M}return f+S}function Se(o,l){return l>=o.first&&l<o.first+o.size}function Ge(o,l){return String(o.lineNumberFormatter(l+o.firstLineNumber))}function _e(o,l,f){if(f===void 0&&(f=null),!(this instanceof _e))return new _e(o,l,f);this.line=o,this.ch=l,this.sticky=f}function at(o,l){return o.line-l.line||o.ch-l.ch}function Xt(o,l){return o.sticky==l.sticky&&at(o,l)==0}function Zn(o){return _e(o.line,o.ch)}function $n(o,l){return at(o,l)<0?l:o}function Vs(o,l){return at(o,l)<0?o:l}function zc(o,l){return Math.max(o.first,Math.min(l,o.first+o.size-1))}function Et(o,l){if(l.line<o.first)return _e(o.first,0);var f=o.first+o.size-1;return l.line>f?_e(f,wt(o,f).text.length):Ad(l,wt(o,l.line).text.length)}function Ad(o,l){var f=o.ch;return f==null||f>l?_e(o.line,l):f<0?_e(o.line,0):o}function Md(o,l){for(var f=[],d=0;d<l.length;d++)f[d]=Et(o,l[d]);return f}var so=function(o,l){this.state=o,this.lookAhead=l},Mr=function(o,l,f,d){this.state=l,this.doc=o,this.line=f,this.maxLookAhead=d||0,this.baseTokens=null,this.baseTokenPos=1};Mr.prototype.lookAhead=function(o){var l=this.doc.getLine(this.line+o);return l!=null&&o>this.maxLookAhead&&(this.maxLookAhead=o),l},Mr.prototype.baseToken=function(o){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=o;)this.baseTokenPos+=2;var l=this.baseTokens[this.baseTokenPos+1];return{type:l&&l.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-o}},Mr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Mr.fromSaved=function(o,l,f){return l instanceof so?new Mr(o,dr(o.mode,l.state),f,l.lookAhead):new Mr(o,dr(o.mode,l),f)},Mr.prototype.save=function(o){var l=o!==!1?dr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new so(l,this.maxLookAhead):l};function ao(o,l,f,d){var h=[o.state.modeGen],b={};Fd(o,l.text,o.doc.mode,f,function(P,K){return h.push(P,K)},b,d);for(var S=f.state,T=function(P){f.baseTokens=h;var K=o.state.overlays[P],Z=1,ue=0;f.state=!0,Fd(o,l.text,K.mode,f,function(se,we){for(var Re=Z;ue<se;){var qe=h[Z];qe>se&&h.splice(Z,1,se,h[Z+1],qe),Z+=2,ue=Math.min(se,qe)}if(we)if(K.opaque)h.splice(Re,Z-Re,se,"overlay "+we),Z=Re+2;else for(;Re<Z;Re+=2){var it=h[Re+1];h[Re+1]=(it?it+" ":"")+"overlay "+we}},b),f.state=S,f.baseTokens=null,f.baseTokenPos=1},M=0;M<o.state.overlays.length;++M)T(M);return{styles:h,classes:b.bgClass||b.textClass?b:null}}function kd(o,l,f){if(!l.styles||l.styles[0]!=o.state.modeGen){var d=lo(o,O(l)),h=l.text.length>o.options.maxHighlightLength&&dr(o.doc.mode,d.state),b=ao(o,l,d);h&&(d.state=h),l.stateAfter=d.save(!h),l.styles=b.styles,b.classes?l.styleClasses=b.classes:l.styleClasses&&(l.styleClasses=null),f===o.doc.highlightFrontier&&(o.doc.modeFrontier=Math.max(o.doc.modeFrontier,++o.doc.highlightFrontier))}return l.styles}function lo(o,l,f){var d=o.doc,h=o.display;if(!d.mode.startState)return new Mr(d,!0,l);var b=rn(o,l,f),S=b>d.first&&wt(d,b-1).stateAfter,T=S?Mr.fromSaved(d,S,b):new Mr(d,An(d.mode),b);return d.iter(b,l,function(M){Ia(o,M.text,T);var P=T.line;M.stateAfter=P==l-1||P%5==0||P>=h.viewFrom&&P<h.viewTo?T.save():null,T.nextLine()}),f&&(d.modeFrontier=T.line),T}function Ia(o,l,f,d){var h=o.doc.mode,b=new Mn(l,o.options.tabSize,f);for(b.start=b.pos=d||0,l==""&&Gc(h,f.state);!b.eol();)Cl(h,b,f.state),b.start=b.pos}function Gc(o,l){if(o.blankLine)return o.blankLine(l);if(o.innerMode){var f=vn(o,l);if(f.mode.blankLine)return f.mode.blankLine(f.state)}}function Cl(o,l,f,d){for(var h=0;h<10;h++){d&&(d[0]=vn(o,f).mode);var b=o.token(l,f);if(l.pos>l.start)return b}throw new Error("Mode "+o.name+" failed to advance stream.")}var cs=function(o,l,f){this.start=o.start,this.end=o.pos,this.string=o.current(),this.type=l||null,this.state=f};function Nd(o,l,f,d){var h=o.doc,b=h.mode,S;l=Et(h,l);var T=wt(h,l.line),M=lo(o,l.line,f),P=new Mn(T.text,o.options.tabSize,M),K;for(d&&(K=[]);(d||P.pos<l.ch)&&!P.eol();)P.start=P.pos,S=Cl(b,P,M.state),d&&K.push(new cs(P,S,dr(h.mode,M.state)));return d?K:new cs(P,S,M.state)}function xl(o,l){if(o)for(;;){var f=o.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!f)break;o=o.slice(0,f.index)+o.slice(f.index+f[0].length);var d=f[1]?"bgClass":"textClass";l[d]==null?l[d]=f[2]:new RegExp("(?:^|\\s)"+f[2]+"(?:$|\\s)").test(l[d])||(l[d]+=" "+f[2])}return o}function Fd(o,l,f,d,h,b,S){var T=f.flattenSpans;T==null&&(T=o.options.flattenSpans);var M=0,P=null,K=new Mn(l,o.options.tabSize,d),Z,ue=o.options.addModeClass&&[null];for(l==""&&xl(Gc(f,d.state),b);!K.eol();){if(K.pos>o.options.maxHighlightLength?(T=!1,S&&Ia(o,l,d,K.pos),K.pos=l.length,Z=null):Z=xl(Cl(f,K,d.state,ue),b),ue){var se=ue[0].name;se&&(Z="m-"+(Z?se+" "+Z:se))}if(!T||P!=Z){for(;M<K.start;)M=Math.min(K.start,M+5e3),h(M,P);P=Z}K.start=K.pos}for(;M<K.pos;){var we=Math.min(K.pos,M+5e3);h(we,P),M=we}}function rn(o,l,f){for(var d,h,b=o.doc,S=f?-1:l-(o.doc.mode.innerMode?1e3:100),T=l;T>S;--T){if(T<=b.first)return b.first;var M=wt(b,T-1),P=M.stateAfter;if(P&&(!f||T+(P instanceof so?P.lookAhead:0)<=b.modeFrontier))return T;var K=Qt(M.text,null,o.options.tabSize);(h==null||d>K)&&(h=T-1,d=K)}return h}function A_(o,l){if(o.modeFrontier=Math.min(o.modeFrontier,l),!(o.highlightFrontier<l-10)){for(var f=o.first,d=l-1;d>f;d--){var h=wt(o,d).stateAfter;if(h&&(!(h instanceof so)||d+h.lookAhead<l)){f=d+1;break}}o.highlightFrontier=Math.min(o.highlightFrontier,f)}}var _h=!1,co=!1;function Ch(){_h=!0}function $c(){co=!0}function us(o,l,f){this.marker=o,this.from=l,this.to=f}function Aa(o,l){if(o)for(var f=0;f<o.length;++f){var d=o[f];if(d.marker==l)return d}}function xh(o,l){for(var f,d=0;d<o.length;++d)o[d]!=l&&(f||(f=[])).push(o[d]);return f}function bl(o,l,f){var d=f&&window.WeakSet&&(f.markedSpans||(f.markedSpans=new WeakSet));d&&o.markedSpans&&d.has(o.markedSpans)?o.markedSpans.push(l):(o.markedSpans=o.markedSpans?o.markedSpans.concat([l]):[l],d&&d.add(o.markedSpans)),l.marker.attachLine(o)}function wl(o,l,f){var d;if(o)for(var h=0;h<o.length;++h){var b=o[h],S=b.marker,T=b.from==null||(S.inclusiveLeft?b.from<=l:b.from<l);if(T||b.from==l&&S.type=="bookmark"&&(!f||!b.marker.insertLeft)){var M=b.to==null||(S.inclusiveRight?b.to>=l:b.to>l);(d||(d=[])).push(new us(S,b.from,M?null:b.to))}}return d}function M_(o,l,f){var d;if(o)for(var h=0;h<o.length;++h){var b=o[h],S=b.marker,T=b.to==null||(S.inclusiveRight?b.to>=l:b.to>l);if(T||b.from==l&&S.type=="bookmark"&&(!f||b.marker.insertLeft)){var M=b.from==null||(S.inclusiveLeft?b.from<=l:b.from<l);(d||(d=[])).push(new us(S,M?null:b.from-l,b.to==null?null:b.to-l))}}return d}function ds(o,l){if(l.full)return null;var f=Se(o,l.from.line)&&wt(o,l.from.line).markedSpans,d=Se(o,l.to.line)&&wt(o,l.to.line).markedSpans;if(!f&&!d)return null;var h=l.from.ch,b=l.to.ch,S=at(l.from,l.to)==0,T=wl(f,h,S),M=M_(d,b,S),P=l.text.length==1,K=je(l.text).length+(P?h:0);if(T)for(var Z=0;Z<T.length;++Z){var ue=T[Z];if(ue.to==null){var se=Aa(M,ue.marker);se?P&&(ue.to=se.to==null?null:se.to+K):ue.to=h}}if(M)for(var we=0;we<M.length;++we){var Re=M[we];if(Re.to!=null&&(Re.to+=K),Re.from==null){var qe=Aa(T,Re.marker);qe||(Re.from=K,P&&(T||(T=[])).push(Re))}else Re.from+=K,P&&(T||(T=[])).push(Re)}T&&(T=qc(T)),M&&M!=T&&(M=qc(M));var it=[T];if(!P){var dt=l.text.length-2,rt;if(dt>0&&T)for(var vt=0;vt<T.length;++vt)T[vt].to==null&&(rt||(rt=[])).push(new us(T[vt].marker,null,null));for(var Rt=0;Rt<dt;++Rt)it.push(rt);it.push(M)}return it}function qc(o){for(var l=0;l<o.length;++l){var f=o[l];f.from!=null&&f.from==f.to&&f.marker.clearWhenEmpty!==!1&&o.splice(l--,1)}return o.length?o:null}function Rd(o,l,f){var d=null;if(o.iter(l.line,f.line+1,function(se){if(se.markedSpans)for(var we=0;we<se.markedSpans.length;++we){var Re=se.markedSpans[we].marker;Re.readOnly&&(!d||Bt(d,Re)==-1)&&(d||(d=[])).push(Re)}}),!d)return null;for(var h=[{from:l,to:f}],b=0;b<d.length;++b)for(var S=d[b],T=S.find(0),M=0;M<h.length;++M){var P=h[M];if(!(at(P.to,T.from)<0||at(P.from,T.to)>0)){var K=[M,1],Z=at(P.from,T.from),ue=at(P.to,T.to);(Z<0||!S.inclusiveLeft&&!Z)&&K.push({from:P.from,to:T.from}),(ue>0||!S.inclusiveRight&&!ue)&&K.push({from:T.to,to:P.to}),h.splice.apply(h,K),M+=K.length-3}}return h}function bh(o){var l=o.markedSpans;if(l){for(var f=0;f<l.length;++f)l[f].marker.detachLine(o);o.markedSpans=null}}function El(o,l){if(l){for(var f=0;f<l.length;++f)l[f].marker.attachLine(o);o.markedSpans=l}}function Sl(o){return o.inclusiveLeft?-1:0}function Bs(o){return o.inclusiveRight?1:0}function Wc(o,l){var f=o.lines.length-l.lines.length;if(f!=0)return f;var d=o.find(),h=l.find(),b=at(d.from,h.from)||Sl(o)-Sl(l);if(b)return-b;var S=at(d.to,h.to)||Bs(o)-Bs(l);return S||l.id-o.id}function wh(o,l){var f=co&&o.markedSpans,d;if(f)for(var h=void 0,b=0;b<f.length;++b)h=f[b],h.marker.collapsed&&(l?h.from:h.to)==null&&(!d||Wc(d,h.marker)<0)&&(d=h.marker);return d}function Pd(o){return wh(o,!0)}function jc(o){return wh(o,!1)}function k_(o,l){var f=co&&o.markedSpans,d;if(f)for(var h=0;h<f.length;++h){var b=f[h];b.marker.collapsed&&(b.from==null||b.from<l)&&(b.to==null||b.to>l)&&(!d||Wc(d,b.marker)<0)&&(d=b.marker)}return d}function Eh(o,l,f,d,h){var b=wt(o,l),S=co&&b.markedSpans;if(S)for(var T=0;T<S.length;++T){var M=S[T];if(M.marker.collapsed){var P=M.marker.find(0),K=at(P.from,f)||Sl(M.marker)-Sl(h),Z=at(P.to,d)||Bs(M.marker)-Bs(h);if(!(K>=0&&Z<=0||K<=0&&Z>=0)&&(K<=0&&(M.marker.inclusiveRight&&h.inclusiveLeft?at(P.to,f)>=0:at(P.to,f)>0)||K>=0&&(M.marker.inclusiveRight&&h.inclusiveLeft?at(P.from,d)<=0:at(P.from,d)<0)))return!0}}}function kn(o){for(var l;l=Pd(o);)o=l.find(-1,!0).line;return o}function Ma(o){for(var l;l=jc(o);)o=l.find(1,!0).line;return o}function N_(o){for(var l,f;l=jc(o);)o=l.find(1,!0).line,(f||(f=[])).push(o);return f}function Ld(o,l){var f=wt(o,l),d=kn(f);return f==d?l:O(d)}function Sh(o,l){if(l>o.lastLine())return l;var f=wt(o,l),d;if(!jr(o,f))return l;for(;d=jc(f);)f=d.find(1,!0).line;return O(f)+1}function jr(o,l){var f=co&&l.markedSpans;if(f){for(var d=void 0,h=0;h<f.length;++h)if(d=f[h],!!d.marker.collapsed){if(d.from==null)return!0;if(!d.marker.widgetNode&&d.from==0&&d.marker.inclusiveLeft&&uo(o,l,d))return!0}}}function uo(o,l,f){if(f.to==null){var d=f.marker.find(1,!0);return uo(o,d.line,Aa(d.line.markedSpans,f.marker))}if(f.marker.inclusiveRight&&f.to==l.text.length)return!0;for(var h=void 0,b=0;b<l.markedSpans.length;++b)if(h=l.markedSpans[b],h.marker.collapsed&&!h.marker.widgetNode&&h.from==f.to&&(h.to==null||h.to!=f.from)&&(h.marker.inclusiveLeft||f.marker.inclusiveRight)&&uo(o,l,h))return!0}function fo(o){o=kn(o);for(var l=0,f=o.parent,d=0;d<f.lines.length;++d){var h=f.lines[d];if(h==o)break;l+=h.height}for(var b=f.parent;b;f=b,b=f.parent)for(var S=0;S<b.children.length;++S){var T=b.children[S];if(T==f)break;l+=T.height}return l}function Dl(o){if(o.height==0)return 0;for(var l=o.text.length,f,d=o;f=Pd(d);){var h=f.find(0,!0);d=h.from.line,l+=h.from.ch-h.to.ch}for(d=o;f=jc(d);){var b=f.find(0,!0);l-=d.text.length-b.from.ch,d=b.to.line,l+=d.text.length-b.to.ch}return l}function Od(o){var l=o.display,f=o.doc;l.maxLine=wt(f,f.first),l.maxLineLength=Dl(l.maxLine),l.maxLineChanged=!0,f.iter(function(d){var h=Dl(d);h>l.maxLineLength&&(l.maxLineLength=h,l.maxLine=d)})}var zi=function(o,l,f){this.text=o,El(this,l),this.height=f?f(this):1};zi.prototype.lineNo=function(){return O(this)},ki(zi);function Tl(o,l,f,d){o.text=l,o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null),o.order!=null&&(o.order=null),bh(o),El(o,f);var h=d?d(o):1;h!=o.height&&fr(o,h)}function Il(o){o.parent=null,bh(o)}var Vd={},fs={};function Dh(o,l){if(!o||/^\s*$/.test(o))return null;var f=l.addModeClass?fs:Vd;return f[o]||(f[o]=o.replace(/\S+/g,"cm-$&"))}function Th(o,l){var f=Ae("span",null,null,u?"padding-right: .1px":null),d={pre:Ae("pre",[f],"CodeMirror-line"),content:f,col:0,pos:0,cm:o,trailingSpace:!1,splitSpaces:o.getOption("lineWrapping")};l.measure={};for(var h=0;h<=(l.rest?l.rest.length:0);h++){var b=h?l.rest[h-1]:l.line,S=void 0;d.pos=0,d.addToken=Ih,oo(o.display.measure)&&(S=$t(b,o.doc.direction))&&(d.addToken=F_(d.addToken,S)),d.map=[];var T=l!=o.display.externalMeasured&&O(b);Ud(b,d,kd(o,b,T)),b.styleClasses&&(b.styleClasses.bgClass&&(d.bgClass=be(b.styleClasses.bgClass,d.bgClass||"")),b.styleClasses.textClass&&(d.textClass=be(b.styleClasses.textClass,d.textClass||""))),d.map.length==0&&d.map.push(0,0,d.content.appendChild(Ro(o.display.measure))),h==0?(l.measure.map=d.map,l.measure.cache={}):((l.measure.maps||(l.measure.maps=[])).push(d.map),(l.measure.caches||(l.measure.caches=[])).push({}))}if(u){var M=d.content.lastChild;(/\bcm-tab\b/.test(M.className)||M.querySelector&&M.querySelector(".cm-tab"))&&(d.content.className="cm-tab-wrap-hack")}return fn(o,"renderLine",o,l.line,d.pre),d.pre.className&&(d.textClass=be(d.pre.className,d.textClass||"")),d}function Bd(o){var l=H("span","\u2022","cm-invalidchar");return l.title="\\u"+o.charCodeAt(0).toString(16),l.setAttribute("aria-label",l.title),l}function Ih(o,l,f,d,h,b,S){if(l){var T=o.splitSpaces?Hd(l,o.trailingSpace):l,M=o.cm.state.specialChars,P=!1,K;if(!M.test(l))o.col+=l.length,K=document.createTextNode(T),o.map.push(o.pos,o.pos+l.length,K),a&&c<9&&(P=!0),o.pos+=l.length;else{K=document.createDocumentFragment();for(var Z=0;;){M.lastIndex=Z;var ue=M.exec(l),se=ue?ue.index-Z:l.length-Z;if(se){var we=document.createTextNode(T.slice(Z,Z+se));a&&c<9?K.appendChild(H("span",[we])):K.appendChild(we),o.map.push(o.pos,o.pos+se,we),o.col+=se,o.pos+=se}if(!ue)break;Z+=se+1;var Re=void 0;if(ue[0]=="	"){var qe=o.cm.options.tabSize,it=qe-o.col%qe;Re=K.appendChild(H("span",Fo(it),"cm-tab")),Re.setAttribute("role","presentation"),Re.setAttribute("cm-text","	"),o.col+=it}else ue[0]=="\r"||ue[0]==`
`?(Re=K.appendChild(H("span",ue[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),Re.setAttribute("cm-text",ue[0]),o.col+=1):(Re=o.cm.options.specialCharPlaceholder(ue[0]),Re.setAttribute("cm-text",ue[0]),a&&c<9?K.appendChild(H("span",[Re])):K.appendChild(Re),o.col+=1);o.map.push(o.pos,o.pos+1,Re),o.pos++}}if(o.trailingSpace=T.charCodeAt(l.length-1)==32,f||d||h||P||b||S){var dt=f||"";d&&(dt+=d),h&&(dt+=h);var rt=H("span",[K],dt,b);if(S)for(var vt in S)S.hasOwnProperty(vt)&&vt!="style"&&vt!="class"&&rt.setAttribute(vt,S[vt]);return o.content.appendChild(rt)}o.content.appendChild(K)}}function Hd(o,l){if(o.length>1&&!/  /.test(o))return o;for(var f=l,d="",h=0;h<o.length;h++){var b=o.charAt(h);b==" "&&f&&(h==o.length-1||o.charCodeAt(h+1)==32)&&(b="\xA0"),d+=b,f=b==" "}return d}function F_(o,l){return function(f,d,h,b,S,T,M){h=h?h+" cm-force-border":"cm-force-border";for(var P=f.pos,K=P+d.length;;){for(var Z=void 0,ue=0;ue<l.length&&(Z=l[ue],!(Z.to>P&&Z.from<=P));ue++);if(Z.to>=K)return o(f,d,h,b,S,T,M);o(f,d.slice(0,Z.to-P),h,b,null,T,M),b=null,d=d.slice(Z.to-P),P=Z.to}}}function ka(o,l,f,d){var h=!d&&f.widgetNode;h&&o.map.push(o.pos,o.pos+l,h),!d&&o.cm.display.input.needsContentAttribute&&(h||(h=o.content.appendChild(document.createElement("span"))),h.setAttribute("cm-marker",f.id)),h&&(o.cm.display.input.setUneditable(h),o.content.appendChild(h)),o.pos+=l,o.trailingSpace=!1}function Ud(o,l,f){var d=o.markedSpans,h=o.text,b=0;if(!d){for(var S=1;S<f.length;S+=2)l.addToken(l,h.slice(b,b=f[S]),Dh(f[S+1],l.cm.options));return}for(var T=h.length,M=0,P=1,K="",Z,ue,se=0,we,Re,qe,it,dt;;){if(se==M){we=Re=qe=ue="",dt=null,it=null,se=1/0;for(var rt=[],vt=void 0,Rt=0;Rt<d.length;++Rt){var At=d[Rt],Yt=At.marker;if(Yt.type=="bookmark"&&At.from==M&&Yt.widgetNode)rt.push(Yt);else if(At.from<=M&&(At.to==null||At.to>M||Yt.collapsed&&At.to==M&&At.from==M)){if(At.to!=null&&At.to!=M&&se>At.to&&(se=At.to,Re=""),Yt.className&&(we+=" "+Yt.className),Yt.css&&(ue=(ue?ue+";":"")+Yt.css),Yt.startStyle&&At.from==M&&(qe+=" "+Yt.startStyle),Yt.endStyle&&At.to==se&&(vt||(vt=[])).push(Yt.endStyle,At.to),Yt.title&&((dt||(dt={})).title=Yt.title),Yt.attributes)for(var En in Yt.attributes)(dt||(dt={}))[En]=Yt.attributes[En];Yt.collapsed&&(!it||Wc(it.marker,Yt)<0)&&(it=At)}else At.from>M&&se>At.from&&(se=At.from)}if(vt)for(var xi=0;xi<vt.length;xi+=2)vt[xi+1]==se&&(Re+=" "+vt[xi]);if(!it||it.from==M)for(var Vn=0;Vn<rt.length;++Vn)ka(l,0,rt[Vn]);if(it&&(it.from||0)==M){if(ka(l,(it.to==null?T+1:it.to)-M,it.marker,it.from==null),it.to==null)return;it.to==M&&(it=!1)}}if(M>=T)break;for(var Rr=Math.min(T,se);;){if(K){var hr=M+K.length;if(!it){var ai=hr>Rr?K.slice(0,Rr-M):K;l.addToken(l,ai,Z?Z+we:we,qe,M+ai.length==se?Re:"",ue,dt)}if(hr>=Rr){K=K.slice(Rr-M),M=Rr;break}M=hr,qe=""}K=h.slice(b,b=f[P++]),Z=Dh(f[P++],l.cm.options)}}}function Ah(o,l,f){this.line=l,this.rest=N_(l),this.size=this.rest?O(je(this.rest))-f+1:1,this.node=this.text=null,this.hidden=jr(o,l)}function Al(o,l,f){for(var d=[],h,b=l;b<f;b=h){var S=new Ah(o.doc,wt(o.doc,b),b);h=b+S.size,d.push(S)}return d}var Na=null;function Ml(o){Na?Na.ops.push(o):o.ownsGroup=Na={ops:[o],delayedCallbacks:[]}}function R_(o){var l=o.delayedCallbacks,f=0;do{for(;f<l.length;f++)l[f].call(null);for(var d=0;d<o.ops.length;d++){var h=o.ops[d];if(h.cursorActivityHandlers)for(;h.cursorActivityCalled<h.cursorActivityHandlers.length;)h.cursorActivityHandlers[h.cursorActivityCalled++].call(null,h.cm)}}while(f<l.length)}function P_(o,l){var f=o.ownsGroup;if(f)try{R_(f)}finally{Na=null,l(f)}}var kl=null;function On(o,l){var f=Sr(o,l);if(f.length){var d=Array.prototype.slice.call(arguments,2),h;Na?h=Na.delayedCallbacks:kl?h=kl:(h=kl=[],setTimeout(Kc,0));for(var b=function(T){h.push(function(){return f[T].apply(null,d)})},S=0;S<f.length;++S)b(S)}}function Kc(){var o=kl;kl=null;for(var l=0;l<o.length;++l)o[l]()}function Yc(o,l,f,d){for(var h=0;h<l.changes.length;h++){var b=l.changes[h];b=="text"?O_(o,l):b=="gutter"?Jc(o,l,f,d):b=="class"?zd(o,l):b=="widget"&&Gd(o,l,d)}l.changes=null}function Nl(o){return o.node==o.text&&(o.node=H("div",null,null,"position: relative"),o.text.parentNode&&o.text.parentNode.replaceChild(o.node,o.text),o.node.appendChild(o.text),a&&c<8&&(o.node.style.zIndex=2)),o.node}function L_(o,l){var f=l.bgClass?l.bgClass+" "+(l.line.bgClass||""):l.line.bgClass;if(f&&(f+=" CodeMirror-linebackground"),l.background)f?l.background.className=f:(l.background.parentNode.removeChild(l.background),l.background=null);else if(f){var d=Nl(l);l.background=d.insertBefore(H("div",null,f),d.firstChild),o.display.input.setUneditable(l.background)}}function Mh(o,l){var f=o.display.externalMeasured;return f&&f.line==l.line?(o.display.externalMeasured=null,l.measure=f.measure,f.built):Th(o,l)}function O_(o,l){var f=l.text.className,d=Mh(o,l);l.text==l.node&&(l.node=d.pre),l.text.parentNode.replaceChild(d.pre,l.text),l.text=d.pre,d.bgClass!=l.bgClass||d.textClass!=l.textClass?(l.bgClass=d.bgClass,l.textClass=d.textClass,zd(o,l)):f&&(l.text.className=f)}function zd(o,l){L_(o,l),l.line.wrapClass?Nl(l).className=l.line.wrapClass:l.node!=l.text&&(l.node.className="");var f=l.textClass?l.textClass+" "+(l.line.textClass||""):l.line.textClass;l.text.className=f||""}function Jc(o,l,f,d){if(l.gutter&&(l.node.removeChild(l.gutter),l.gutter=null),l.gutterBackground&&(l.node.removeChild(l.gutterBackground),l.gutterBackground=null),l.line.gutterClass){var h=Nl(l);l.gutterBackground=H("div",null,"CodeMirror-gutter-background "+l.line.gutterClass,"left: "+(o.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px"),o.display.input.setUneditable(l.gutterBackground),h.insertBefore(l.gutterBackground,l.text)}var b=l.line.gutterMarkers;if(o.options.lineNumbers||b){var S=Nl(l),T=l.gutter=H("div",null,"CodeMirror-gutter-wrapper","left: "+(o.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");if(T.setAttribute("aria-hidden","true"),o.display.input.setUneditable(T),S.insertBefore(T,l.text),l.line.gutterClass&&(T.className+=" "+l.line.gutterClass),o.options.lineNumbers&&(!b||!b["CodeMirror-linenumbers"])&&(l.lineNumber=T.appendChild(H("div",Ge(o.options,f),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+o.display.lineNumInnerWidth+"px"))),b)for(var M=0;M<o.display.gutterSpecs.length;++M){var P=o.display.gutterSpecs[M].className,K=b.hasOwnProperty(P)&&b[P];K&&T.appendChild(H("div",[K],"CodeMirror-gutter-elt","left: "+d.gutterLeft[P]+"px; width: "+d.gutterWidth[P]+"px"))}}}function Gd(o,l,f){l.alignable&&(l.alignable=null);for(var d=ge("CodeMirror-linewidget"),h=l.node.firstChild,b=void 0;h;h=b)b=h.nextSibling,d.test(h.className)&&l.node.removeChild(h);Nh(o,l,f)}function kh(o,l,f,d){var h=Mh(o,l);return l.text=l.node=h.pre,h.bgClass&&(l.bgClass=h.bgClass),h.textClass&&(l.textClass=h.textClass),zd(o,l),Jc(o,l,f,d),Nh(o,l,d),l.node}function Nh(o,l,f){if(Fl(o,l.line,l,f,!0),l.rest)for(var d=0;d<l.rest.length;d++)Fl(o,l.rest[d],l,f,!1)}function Fl(o,l,f,d,h){if(l.widgets)for(var b=Nl(f),S=0,T=l.widgets;S<T.length;++S){var M=T[S],P=H("div",[M.node],"CodeMirror-linewidget"+(M.className?" "+M.className:""));M.handleMouseEvents||P.setAttribute("cm-ignore-events","true"),Qc(M,P,f,d),o.display.input.setUneditable(P),h&&M.above?b.insertBefore(P,f.gutter||f.text):b.appendChild(P),On(M,"redraw")}}function Qc(o,l,f,d){if(o.noHScroll){(f.alignable||(f.alignable=[])).push(l);var h=d.wrapperWidth;l.style.left=d.fixedPos+"px",o.coverGutter||(h-=d.gutterTotalWidth,l.style.paddingLeft=d.gutterTotalWidth+"px"),l.style.width=h+"px"}o.coverGutter&&(l.style.zIndex=5,l.style.position="relative",o.noHScroll||(l.style.marginLeft=-d.gutterTotalWidth+"px"))}function Rl(o){if(o.height!=null)return o.height;var l=o.doc.cm;if(!l)return 0;if(!Xe(document.body,o.node)){var f="position: relative;";o.coverGutter&&(f+="margin-left: -"+l.display.gutters.offsetWidth+"px;"),o.noHScroll&&(f+="width: "+l.display.wrapper.clientWidth+"px;"),le(l.display.measure,H("div",[o.node],null,f))}return o.height=o.node.parentNode.offsetHeight}function Lo(o,l){for(var f=Hi(l);f!=o.wrapper;f=f.parentNode)if(!f||f.nodeType==1&&f.getAttribute("cm-ignore-events")=="true"||f.parentNode==o.sizer&&f!=o.mover)return!0}function Hs(o){return o.lineSpace.offsetTop}function Xc(o){return o.mover.offsetHeight-o.lineSpace.offsetHeight}function Fh(o){if(o.cachedPaddingH)return o.cachedPaddingH;var l=le(o.measure,H("pre","x","CodeMirror-line-like")),f=window.getComputedStyle?window.getComputedStyle(l):l.currentStyle,d={left:parseInt(f.paddingLeft),right:parseInt(f.paddingRight)};return!isNaN(d.left)&&!isNaN(d.right)&&(o.cachedPaddingH=d),d}function po(o){return Dn-o.display.nativeBarWidth}function Oo(o){return o.display.scroller.clientWidth-po(o)-o.display.barWidth}function Pl(o){return o.display.scroller.clientHeight-po(o)-o.display.barHeight}function V_(o,l,f){var d=o.options.lineWrapping,h=d&&Oo(o);if(!l.measure.heights||d&&l.measure.width!=h){var b=l.measure.heights=[];if(d){l.measure.width=h;for(var S=l.text.firstChild.getClientRects(),T=0;T<S.length-1;T++){var M=S[T],P=S[T+1];Math.abs(M.bottom-P.bottom)>2&&b.push((M.bottom+P.top)/2-f.top)}}b.push(f.bottom-f.top)}}function Rh(o,l,f){if(o.line==l)return{map:o.measure.map,cache:o.measure.cache};if(o.rest){for(var d=0;d<o.rest.length;d++)if(o.rest[d]==l)return{map:o.measure.maps[d],cache:o.measure.caches[d]};for(var h=0;h<o.rest.length;h++)if(O(o.rest[h])>f)return{map:o.measure.maps[h],cache:o.measure.caches[h],before:!0}}}function B_(o,l){l=kn(l);var f=O(l),d=o.display.externalMeasured=new Ah(o.doc,l,f);d.lineN=f;var h=d.built=Th(o,d);return d.text=h.pre,le(o.display.lineMeasure,h.pre),d}function Zc(o,l,f,d){return kr(o,ps(o,l),f,d)}function $d(o,l){if(l>=o.display.viewFrom&&l<o.display.viewTo)return o.display.view[gs(o,l)];var f=o.display.externalMeasured;if(f&&l>=f.lineN&&l<f.lineN+f.size)return f}function ps(o,l){var f=O(l),d=$d(o,f);d&&!d.text?d=null:d&&d.changes&&(Yc(o,d,f,Xd(o)),o.curOp.forceUpdate=!0),d||(d=B_(o,l));var h=Rh(d,l,f);return{line:l,view:d,rect:null,map:h.map,cache:h.cache,before:h.before,hasHeights:!1}}function kr(o,l,f,d,h){l.before&&(f=-1);var b=f+(d||""),S;return l.cache.hasOwnProperty(b)?S=l.cache[b]:(l.rect||(l.rect=l.view.text.getBoundingClientRect()),l.hasHeights||(V_(o,l.view,l.rect),l.hasHeights=!0),S=Ph(o,l,f,d),S.bogus||(l.cache[b]=S)),{left:S.left,right:S.right,top:h?S.rtop:S.top,bottom:h?S.rbottom:S.bottom}}var Ci={left:0,right:0,top:0,bottom:0};function Fa(o,l,f){for(var d,h,b,S,T,M,P=0;P<o.length;P+=3)if(T=o[P],M=o[P+1],l<T?(h=0,b=1,S="left"):l<M?(h=l-T,b=h+1):(P==o.length-3||l==M&&o[P+3]>l)&&(b=M-T,h=b-1,l>=M&&(S="right")),h!=null){if(d=o[P+2],T==M&&f==(d.insertLeft?"left":"right")&&(S=f),f=="left"&&h==0)for(;P&&o[P-2]==o[P-3]&&o[P-1].insertLeft;)d=o[(P-=3)+2],S="left";if(f=="right"&&h==M-T)for(;P<o.length-3&&o[P+3]==o[P+4]&&!o[P+5].insertLeft;)d=o[(P+=3)+2],S="right";break}return{node:d,start:h,end:b,collapse:S,coverStart:T,coverEnd:M}}function Ll(o,l){var f=Ci;if(l=="left")for(var d=0;d<o.length&&(f=o[d]).left==f.right;d++);else for(var h=o.length-1;h>=0&&(f=o[h]).left==f.right;h--);return f}function Ph(o,l,f,d){var h=Fa(l.map,f,d),b=h.node,S=h.start,T=h.end,M=h.collapse,P;if(b.nodeType==3){for(var K=0;K<4;K++){for(;S&&Tn(l.line.text.charAt(h.coverStart+S));)--S;for(;h.coverStart+T<h.coverEnd&&Tn(l.line.text.charAt(h.coverStart+T));)++T;if(a&&c<9&&S==0&&T==h.coverEnd-h.coverStart?P=b.parentNode.getBoundingClientRect():P=Ll(ht(b,S,T).getClientRects(),d),P.left||P.right||S==0)break;T=S,S=S-1,M="right"}a&&c<11&&(P=eu(o.display.measure,P))}else{S>0&&(M=d="right");var Z;o.options.lineWrapping&&(Z=b.getClientRects()).length>1?P=Z[d=="right"?Z.length-1:0]:P=b.getBoundingClientRect()}if(a&&c<9&&!S&&(!P||!P.left&&!P.right)){var ue=b.parentNode.getClientRects()[0];ue?P={left:ue.left,right:ue.left+zs(o.display),top:ue.top,bottom:ue.bottom}:P=Ci}for(var se=P.top-l.rect.top,we=P.bottom-l.rect.top,Re=(se+we)/2,qe=l.view.measure.heights,it=0;it<qe.length-1&&!(Re<qe[it]);it++);var dt=it?qe[it-1]:0,rt=qe[it],vt={left:(M=="right"?P.right:P.left)-l.rect.left,right:(M=="left"?P.left:P.right)-l.rect.left,top:dt,bottom:rt};return!P.left&&!P.right&&(vt.bogus=!0),o.options.singleCursorHeightPerLine||(vt.rtop=se,vt.rbottom=we),vt}function eu(o,l){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!_l(o))return l;var f=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:l.left*f,right:l.right*f,top:l.top*d,bottom:l.bottom*d}}function qd(o){if(o.measure&&(o.measure.cache={},o.measure.heights=null,o.rest))for(var l=0;l<o.rest.length;l++)o.measure.caches[l]={}}function Wd(o){o.display.externalMeasure=null,j(o.display.lineMeasure);for(var l=0;l<o.display.view.length;l++)qd(o.display.view[l])}function hs(o){Wd(o),o.display.cachedCharWidth=o.display.cachedTextHeight=o.display.cachedPaddingH=null,o.options.lineWrapping||(o.display.maxLineChanged=!0),o.display.lineNumChars=null}function tu(o){return m&&k?-(o.body.getBoundingClientRect().left-parseInt(getComputedStyle(o.body).marginLeft)):o.defaultView.pageXOffset||(o.documentElement||o.body).scrollLeft}function ms(o){return m&&k?-(o.body.getBoundingClientRect().top-parseInt(getComputedStyle(o.body).marginTop)):o.defaultView.pageYOffset||(o.documentElement||o.body).scrollTop}function Ol(o){var l=kn(o),f=l.widgets,d=0;if(f)for(var h=0;h<f.length;++h)f[h].above&&(d+=Rl(f[h]));return d}function Ra(o,l,f,d,h){if(!h){var b=Ol(l);f.top+=b,f.bottom+=b}if(d=="line")return f;d||(d="local");var S=fo(l);if(d=="local"?S+=Hs(o.display):S-=o.display.viewOffset,d=="page"||d=="window"){var T=o.display.lineSpace.getBoundingClientRect();S+=T.top+(d=="window"?0:ms(Be(o)));var M=T.left+(d=="window"?0:tu(Be(o)));f.left+=M,f.right+=M}return f.top+=S,f.bottom+=S,f}function Vl(o,l,f){if(f=="div")return l;var d=l.left,h=l.top;if(f=="page")d-=tu(Be(o)),h-=ms(Be(o));else if(f=="local"||!f){var b=o.display.sizer.getBoundingClientRect();d+=b.left,h+=b.top}var S=o.display.lineSpace.getBoundingClientRect();return{left:d-S.left,top:h-S.top}}function Pa(o,l,f,d,h){return d||(d=wt(o.doc,l.line)),Ra(o,d,Zc(o,d,l.ch,h),f)}function Nr(o,l,f,d,h,b){d=d||wt(o.doc,l.line),h||(h=ps(o,d));function S(we,Re){var qe=kr(o,h,we,Re?"right":"left",b);return Re?qe.left=qe.right:qe.right=qe.left,Ra(o,d,qe,f)}var T=$t(d,o.doc.direction),M=l.ch,P=l.sticky;if(M>=d.text.length?(M=d.text.length,P="before"):M<=0&&(M=0,P="after"),!T)return S(P=="before"?M-1:M,P=="before");function K(we,Re,qe){var it=T[Re],dt=it.level==1;return S(qe?we-1:we,dt!=qe)}var Z=Bi(T,M,P),ue=qr,se=K(M,Z,P=="before");return ue!=null&&(se.other=K(M,ue,P!="before")),se}function Lh(o,l){var f=0;l=Et(o.doc,l),o.options.lineWrapping||(f=zs(o.display)*l.ch);var d=wt(o.doc,l.line),h=fo(d)+Hs(o.display);return{left:f,right:f,top:h,bottom:h+d.height}}function Bl(o,l,f,d,h){var b=_e(o,l,f);return b.xRel=h,d&&(b.outside=d),b}function jd(o,l,f){var d=o.doc;if(f+=o.display.viewOffset,f<0)return Bl(d.first,0,null,-1,-1);var h=Q(d,f),b=d.first+d.size-1;if(h>b)return Bl(d.first+d.size-1,wt(d,b).text.length,null,1,1);l<0&&(l=0);for(var S=wt(d,h);;){var T=H_(o,S,h,l,f),M=k_(S,T.ch+(T.xRel>0||T.outside>0?1:0));if(!M)return T;var P=M.find(1);if(P.line==h)return P;S=wt(d,h=P.line)}}function Kd(o,l,f,d){d-=Ol(l);var h=l.text.length,b=di(function(S){return kr(o,f,S-1).bottom<=d},h,0);return h=di(function(S){return kr(o,f,S).top>d},b,h),{begin:b,end:h}}function Hl(o,l,f,d){f||(f=ps(o,l));var h=Ra(o,l,kr(o,f,d),"line").top;return Kd(o,l,f,h)}function Yd(o,l,f,d){return o.bottom<=f?!1:o.top>f?!0:(d?o.left:o.right)>l}function H_(o,l,f,d,h){h-=fo(l);var b=ps(o,l),S=Ol(l),T=0,M=l.text.length,P=!0,K=$t(l,o.doc.direction);if(K){var Z=(o.options.lineWrapping?Qd:Jd)(o,l,f,b,K,d,h);P=Z.level!=1,T=P?Z.from:Z.to-1,M=P?Z.to:Z.from-1}var ue=null,se=null,we=di(function(Rt){var At=kr(o,b,Rt);return At.top+=S,At.bottom+=S,Yd(At,d,h,!1)?(At.top<=h&&At.left<=d&&(ue=Rt,se=At),!0):!1},T,M),Re,qe,it=!1;if(se){var dt=d-se.left<se.right-d,rt=dt==P;we=ue+(rt?0:1),qe=rt?"after":"before",Re=dt?se.left:se.right}else{!P&&(we==M||we==T)&&we++,qe=we==0?"after":we==l.text.length?"before":kr(o,b,we-(P?1:0)).bottom+S<=h==P?"after":"before";var vt=Nr(o,_e(f,we,qe),"line",l,b);Re=vt.left,it=h<vt.top?-1:h>=vt.bottom?1:0}return we=Vi(l.text,we,1),Bl(f,we,qe,it,d-Re)}function Jd(o,l,f,d,h,b,S){var T=di(function(Z){var ue=h[Z],se=ue.level!=1;return Yd(Nr(o,_e(f,se?ue.to:ue.from,se?"before":"after"),"line",l,d),b,S,!0)},0,h.length-1),M=h[T];if(T>0){var P=M.level!=1,K=Nr(o,_e(f,P?M.from:M.to,P?"after":"before"),"line",l,d);Yd(K,b,S,!0)&&K.top>S&&(M=h[T-1])}return M}function Qd(o,l,f,d,h,b,S){var T=Kd(o,l,d,S),M=T.begin,P=T.end;/\s/.test(l.text.charAt(P-1))&&P--;for(var K=null,Z=null,ue=0;ue<h.length;ue++){var se=h[ue];if(!(se.from>=P||se.to<=M)){var we=se.level!=1,Re=kr(o,d,we?Math.min(P,se.to)-1:Math.max(M,se.from)).right,qe=Re<b?b-Re+1e9:Re-b;(!K||Z>qe)&&(K=se,Z=qe)}}return K||(K=h[h.length-1]),K.from<M&&(K={from:M,to:K.to,level:K.level}),K.to>P&&(K={from:K.from,to:P,level:K.level}),K}var Us;function La(o){if(o.cachedTextHeight!=null)return o.cachedTextHeight;if(Us==null){Us=H("pre",null,"CodeMirror-line-like");for(var l=0;l<49;++l)Us.appendChild(document.createTextNode("x")),Us.appendChild(H("br"));Us.appendChild(document.createTextNode("x"))}le(o.measure,Us);var f=Us.offsetHeight/50;return f>3&&(o.cachedTextHeight=f),j(o.measure),f||1}function zs(o){if(o.cachedCharWidth!=null)return o.cachedCharWidth;var l=H("span","xxxxxxxxxx"),f=H("pre",[l],"CodeMirror-line-like");le(o.measure,f);var d=l.getBoundingClientRect(),h=(d.right-d.left)/10;return h>2&&(o.cachedCharWidth=h),h||10}function Xd(o){for(var l=o.display,f={},d={},h=l.gutters.clientLeft,b=l.gutters.firstChild,S=0;b;b=b.nextSibling,++S){var T=o.display.gutterSpecs[S].className;f[T]=b.offsetLeft+b.clientLeft+h,d[T]=b.clientWidth}return{fixedPos:nu(l),gutterTotalWidth:l.gutters.offsetWidth,gutterLeft:f,gutterWidth:d,wrapperWidth:l.wrapper.clientWidth}}function nu(o){return o.scroller.getBoundingClientRect().left-o.sizer.getBoundingClientRect().left}function Zd(o){var l=La(o.display),f=o.options.lineWrapping,d=f&&Math.max(5,o.display.scroller.clientWidth/zs(o.display)-3);return function(h){if(jr(o.doc,h))return 0;var b=0;if(h.widgets)for(var S=0;S<h.widgets.length;S++)h.widgets[S].height&&(b+=h.widgets[S].height);return f?b+(Math.ceil(h.text.length/d)||1)*l:b+l}}function ef(o){var l=o.doc,f=Zd(o);l.iter(function(d){var h=f(d);h!=d.height&&fr(d,h)})}function Gs(o,l,f,d){var h=o.display;if(!f&&Hi(l).getAttribute("cm-not-content")=="true")return null;var b,S,T=h.lineSpace.getBoundingClientRect();try{b=l.clientX-T.left,S=l.clientY-T.top}catch{return null}var M=jd(o,b,S),P;if(d&&M.xRel>0&&(P=wt(o.doc,M.line).text).length==M.ch){var K=Qt(P,P.length,o.options.tabSize)-P.length;M=_e(M.line,Math.max(0,Math.round((b-Fh(o.display).left)/zs(o.display))-K))}return M}function gs(o,l){if(l>=o.display.viewTo||(l-=o.display.viewFrom,l<0))return null;for(var f=o.display.view,d=0;d<f.length;d++)if(l-=f[d].size,l<0)return d}function Gi(o,l,f,d){l==null&&(l=o.doc.first),f==null&&(f=o.doc.first+o.doc.size),d||(d=0);var h=o.display;if(d&&f<h.viewTo&&(h.updateLineNumbers==null||h.updateLineNumbers>l)&&(h.updateLineNumbers=l),o.curOp.viewChanged=!0,l>=h.viewTo)co&&Ld(o.doc,l)<h.viewTo&&ho(o);else if(f<=h.viewFrom)co&&Sh(o.doc,f+d)>h.viewFrom?ho(o):(h.viewFrom+=d,h.viewTo+=d);else if(l<=h.viewFrom&&f>=h.viewTo)ho(o);else if(l<=h.viewFrom){var b=Ul(o,f,f+d,1);b?(h.view=h.view.slice(b.index),h.viewFrom=b.lineN,h.viewTo+=d):ho(o)}else if(f>=h.viewTo){var S=Ul(o,l,l,-1);S?(h.view=h.view.slice(0,S.index),h.viewTo=S.lineN):ho(o)}else{var T=Ul(o,l,l,-1),M=Ul(o,f,f+d,1);T&&M?(h.view=h.view.slice(0,T.index).concat(Al(o,T.lineN,M.lineN)).concat(h.view.slice(M.index)),h.viewTo+=d):ho(o)}var P=h.externalMeasured;P&&(f<P.lineN?P.lineN+=d:l<P.lineN+P.size&&(h.externalMeasured=null))}function vs(o,l,f){o.curOp.viewChanged=!0;var d=o.display,h=o.display.externalMeasured;if(h&&l>=h.lineN&&l<h.lineN+h.size&&(d.externalMeasured=null),!(l<d.viewFrom||l>=d.viewTo)){var b=d.view[gs(o,l)];if(b.node!=null){var S=b.changes||(b.changes=[]);Bt(S,f)==-1&&S.push(f)}}}function ho(o){o.display.viewFrom=o.display.viewTo=o.doc.first,o.display.view=[],o.display.viewOffset=0}function Ul(o,l,f,d){var h=gs(o,l),b,S=o.display.view;if(!co||f==o.doc.first+o.doc.size)return{index:h,lineN:f};for(var T=o.display.viewFrom,M=0;M<h;M++)T+=S[M].size;if(T!=l){if(d>0){if(h==S.length-1)return null;b=T+S[h].size-l,h++}else b=T-l;l+=b,f+=b}for(;Ld(o.doc,f)!=f;){if(h==(d<0?0:S.length-1))return null;f+=d*S[h-(d<0?1:0)].size,h+=d}return{index:h,lineN:f}}function Oh(o,l,f){var d=o.display,h=d.view;h.length==0||l>=d.viewTo||f<=d.viewFrom?(d.view=Al(o,l,f),d.viewFrom=l):(d.viewFrom>l?d.view=Al(o,l,d.viewFrom).concat(d.view):d.viewFrom<l&&(d.view=d.view.slice(gs(o,l))),d.viewFrom=l,d.viewTo<f?d.view=d.view.concat(Al(o,d.viewTo,f)):d.viewTo>f&&(d.view=d.view.slice(0,gs(o,f)))),d.viewTo=f}function Vh(o){for(var l=o.display.view,f=0,d=0;d<l.length;d++){var h=l[d];!h.hidden&&(!h.node||h.changes)&&++f}return f}function zl(o){o.display.input.showSelection(o.display.input.prepareSelection())}function Bh(o,l){l===void 0&&(l=!0);var f=o.doc,d={},h=d.cursors=document.createDocumentFragment(),b=d.selection=document.createDocumentFragment(),S=o.options.$customCursor;S&&(l=!0);for(var T=0;T<f.sel.ranges.length;T++)if(!(!l&&T==f.sel.primIndex)){var M=f.sel.ranges[T];if(!(M.from().line>=o.display.viewTo||M.to().line<o.display.viewFrom)){var P=M.empty();if(S){var K=S(o,M);K&&tf(o,K,h)}else(P||o.options.showCursorWhenSelecting)&&tf(o,M.head,h);P||U_(o,M,b)}}return d}function tf(o,l,f){var d=Nr(o,l,"div",null,null,!o.options.singleCursorHeightPerLine),h=f.appendChild(H("div","\xA0","CodeMirror-cursor"));if(h.style.left=d.left+"px",h.style.top=d.top+"px",h.style.height=Math.max(0,d.bottom-d.top)*o.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(o.getWrapperElement().className)){var b=Pa(o,l,"div",null,null),S=b.right-b.left;h.style.width=(S>0?S:o.defaultCharWidth())+"px"}if(d.other){var T=f.appendChild(H("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));T.style.display="",T.style.left=d.other.left+"px",T.style.top=d.other.top+"px",T.style.height=(d.other.bottom-d.other.top)*.85+"px"}}function iu(o,l){return o.top-l.top||o.left-l.left}function U_(o,l,f){var d=o.display,h=o.doc,b=document.createDocumentFragment(),S=Fh(o.display),T=S.left,M=Math.max(d.sizerWidth,Oo(o)-d.sizer.offsetLeft)-S.right,P=h.direction=="ltr";function K(rt,vt,Rt,At){vt<0&&(vt=0),vt=Math.round(vt),At=Math.round(At),b.appendChild(H("div",null,"CodeMirror-selected","position: absolute; left: "+rt+`px;
                             top: `+vt+"px; width: "+(Rt??M-rt)+`px;
                             height: `+(At-vt)+"px"))}function Z(rt,vt,Rt){var At=wt(h,rt),Yt=At.text.length,En,xi;function Vn(ai,mr){return Pa(o,_e(rt,ai),"div",At,mr)}function Rr(ai,mr,Pi){var pi=Hl(o,At,null,ai),li=mr=="ltr"==(Pi=="after")?"left":"right",qn=Pi=="after"?pi.begin:pi.end-(/\s/.test(At.text.charAt(pi.end-1))?2:1);return Vn(qn,li)[li]}var hr=$t(At,h.direction);return oi(hr,vt||0,Rt??Yt,function(ai,mr,Pi,pi){var li=Pi=="ltr",qn=Vn(ai,li?"left":"right"),gr=Vn(mr-1,li?"right":"left"),pu=vt==null&&ai==0,$a=Rt==null&&mr==Yt,qi=pi==0,xs=!hr||pi==hr.length-1;if(gr.top-qn.top<=3){var bi=(P?pu:$a)&&qi,sC=(P?$a:pu)&&xs,Ks=bi?T:(li?qn:gr).left,Wl=sC?M:(li?gr:qn).right;K(Ks,qn.top,Wl-Ks,qn.bottom)}else{var jl,tr,hu,aC;li?(jl=P&&pu&&qi?T:qn.left,tr=P?M:Rr(ai,Pi,"before"),hu=P?T:Rr(mr,Pi,"after"),aC=P&&$a&&xs?M:gr.right):(jl=P?Rr(ai,Pi,"before"):T,tr=!P&&pu&&qi?M:qn.right,hu=!P&&$a&&xs?T:gr.left,aC=P?Rr(mr,Pi,"after"):M),K(jl,qn.top,tr-jl,qn.bottom),qn.bottom<gr.top&&K(T,qn.bottom,null,gr.top),K(hu,gr.top,aC-hu,gr.bottom)}(!En||iu(qn,En)<0)&&(En=qn),iu(gr,En)<0&&(En=gr),(!xi||iu(qn,xi)<0)&&(xi=qn),iu(gr,xi)<0&&(xi=gr)}),{start:En,end:xi}}var ue=l.from(),se=l.to();if(ue.line==se.line)Z(ue.line,ue.ch,se.ch);else{var we=wt(h,ue.line),Re=wt(h,se.line),qe=kn(we)==kn(Re),it=Z(ue.line,ue.ch,qe?we.text.length+1:null).end,dt=Z(se.line,qe?0:null,se.ch).start;qe&&(it.top<dt.top-2?(K(it.right,it.top,null,it.bottom),K(T,dt.top,dt.left,dt.bottom)):K(it.right,it.top,dt.left-it.right,it.bottom)),it.bottom<dt.top&&K(T,it.bottom,null,dt.top)}f.appendChild(b)}function nf(o){if(o.state.focused){var l=o.display;clearInterval(l.blinker);var f=!0;l.cursorDiv.style.visibility="",o.options.cursorBlinkRate>0?l.blinker=setInterval(function(){o.hasFocus()||Oa(o),l.cursorDiv.style.visibility=(f=!f)?"":"hidden"},o.options.cursorBlinkRate):o.options.cursorBlinkRate<0&&(l.cursorDiv.style.visibility="hidden")}}function Gl(o){o.hasFocus()||(o.display.input.focus(),o.state.focused||rf(o))}function Kr(o){o.state.delayingBlurEvent=!0,setTimeout(function(){o.state.delayingBlurEvent&&(o.state.delayingBlurEvent=!1,o.state.focused&&Oa(o))},100)}function rf(o,l){o.state.delayingBlurEvent&&!o.state.draggingText&&(o.state.delayingBlurEvent=!1),o.options.readOnly!="nocursor"&&(o.state.focused||(fn(o,"focus",o,l),o.state.focused=!0,_t(o.display.wrapper,"CodeMirror-focused"),!o.curOp&&o.display.selForContextMenu!=o.doc.sel&&(o.display.input.reset(),u&&setTimeout(function(){return o.display.input.reset(!0)},20)),o.display.input.receivedFocus()),nf(o))}function Oa(o,l){o.state.delayingBlurEvent||(o.state.focused&&(fn(o,"blur",o,l),o.state.focused=!1,Te(o.display.wrapper,"CodeMirror-focused")),clearInterval(o.display.blinker),setTimeout(function(){o.state.focused||(o.display.shift=!1)},150))}function $s(o){for(var l=o.display,f=l.lineDiv.offsetTop,d=Math.max(0,l.scroller.getBoundingClientRect().top),h=l.lineDiv.getBoundingClientRect().top,b=0,S=0;S<l.view.length;S++){var T=l.view[S],M=o.options.lineWrapping,P=void 0,K=0;if(!T.hidden){if(h+=T.line.height,a&&c<8){var Z=T.node.offsetTop+T.node.offsetHeight;P=Z-f,f=Z}else{var ue=T.node.getBoundingClientRect();P=ue.bottom-ue.top,!M&&T.text.firstChild&&(K=T.text.firstChild.getBoundingClientRect().right-ue.left-1)}var se=T.line.height-P;if((se>.005||se<-.005)&&(h<d&&(b-=se),fr(T.line,P),of(T.line),T.rest))for(var we=0;we<T.rest.length;we++)of(T.rest[we]);if(K>o.display.sizerWidth){var Re=Math.ceil(K/zs(o.display));Re>o.display.maxLineLength&&(o.display.maxLineLength=Re,o.display.maxLine=T.line,o.display.maxLineChanged=!0)}}}Math.abs(b)>2&&(l.scroller.scrollTop+=b)}function of(o){if(o.widgets)for(var l=0;l<o.widgets.length;++l){var f=o.widgets[l],d=f.node.parentNode;d&&(f.height=d.offsetHeight)}}function mo(o,l,f){var d=f&&f.top!=null?Math.max(0,f.top):o.scroller.scrollTop;d=Math.floor(d-Hs(o));var h=f&&f.bottom!=null?f.bottom:d+o.wrapper.clientHeight,b=Q(l,d),S=Q(l,h);if(f&&f.ensure){var T=f.ensure.from.line,M=f.ensure.to.line;T<b?(b=T,S=Q(l,fo(wt(l,T))+o.wrapper.clientHeight)):Math.min(M,l.lastLine())>=S&&(b=Q(l,fo(wt(l,M))-o.wrapper.clientHeight),S=M)}return{from:b,to:Math.max(S,b+1)}}function sf(o,l){if(!bn(o,"scrollCursorIntoView")){var f=o.display,d=f.sizer.getBoundingClientRect(),h=null,b=f.wrapper.ownerDocument;if(l.top+d.top<0?h=!0:l.bottom+d.top>(b.defaultView.innerHeight||b.documentElement.clientHeight)&&(h=!1),h!=null&&!N){var S=H("div","\u200B",null,`position: absolute;
                         top: `+(l.top-f.viewOffset-Hs(o.display))+`px;
                         height: `+(l.bottom-l.top+po(o)+f.barHeight)+`px;
                         left: `+l.left+"px; width: "+Math.max(2,l.right-l.left)+"px;");o.display.lineSpace.appendChild(S),S.scrollIntoView(h),o.display.lineSpace.removeChild(S)}}}function ys(o,l,f,d){d==null&&(d=0);var h;!o.options.lineWrapping&&l==f&&(f=l.sticky=="before"?_e(l.line,l.ch+1,"before"):l,l=l.ch?_e(l.line,l.sticky=="before"?l.ch-1:l.ch,"after"):l);for(var b=0;b<5;b++){var S=!1,T=Nr(o,l),M=!f||f==l?T:Nr(o,f);h={left:Math.min(T.left,M.left),top:Math.min(T.top,M.top)-d,right:Math.max(T.left,M.left),bottom:Math.max(T.bottom,M.bottom)+d};var P=$l(o,h),K=o.doc.scrollTop,Z=o.doc.scrollLeft;if(P.scrollTop!=null&&(w(o,P.scrollTop),Math.abs(o.doc.scrollTop-K)>1&&(S=!0)),P.scrollLeft!=null&&(I(o,P.scrollLeft),Math.abs(o.doc.scrollLeft-Z)>1&&(S=!0)),!S)break}return h}function _s(o,l){var f=$l(o,l);f.scrollTop!=null&&w(o,f.scrollTop),f.scrollLeft!=null&&I(o,f.scrollLeft)}function $l(o,l){var f=o.display,d=La(o.display);l.top<0&&(l.top=0);var h=o.curOp&&o.curOp.scrollTop!=null?o.curOp.scrollTop:f.scroller.scrollTop,b=Pl(o),S={};l.bottom-l.top>b&&(l.bottom=l.top+b);var T=o.doc.height+Xc(f),M=l.top<d,P=l.bottom>T-d;if(l.top<h)S.scrollTop=M?0:l.top;else if(l.bottom>h+b){var K=Math.min(l.top,(P?T:l.bottom)-b);K!=h&&(S.scrollTop=K)}var Z=o.options.fixedGutter?0:f.gutters.offsetWidth,ue=o.curOp&&o.curOp.scrollLeft!=null?o.curOp.scrollLeft:f.scroller.scrollLeft-Z,se=Oo(o)-f.gutters.offsetWidth,we=l.right-l.left>se;return we&&(l.right=l.left+se),l.left<10?S.scrollLeft=0:l.left<ue?S.scrollLeft=Math.max(0,l.left+Z-(we?0:10)):l.right>se+ue-3&&(S.scrollLeft=l.right+(we?0:10)-se),S}function af(o,l){l!=null&&(y(o),o.curOp.scrollTop=(o.curOp.scrollTop==null?o.doc.scrollTop:o.curOp.scrollTop)+l)}function Va(o){y(o);var l=o.getCursor();o.curOp.scrollToPos={from:l,to:l,margin:o.options.cursorScrollMargin}}function ql(o,l,f){(l!=null||f!=null)&&y(o),l!=null&&(o.curOp.scrollLeft=l),f!=null&&(o.curOp.scrollTop=f)}function z_(o,l){y(o),o.curOp.scrollToPos=l}function y(o){var l=o.curOp.scrollToPos;if(l){o.curOp.scrollToPos=null;var f=Lh(o,l.from),d=Lh(o,l.to);_(o,f,d,l.margin)}}function _(o,l,f,d){var h=$l(o,{left:Math.min(l.left,f.left),top:Math.min(l.top,f.top)-d,right:Math.max(l.right,f.right),bottom:Math.max(l.bottom,f.bottom)+d});ql(o,h.scrollLeft,h.scrollTop)}function w(o,l){Math.abs(o.doc.scrollTop-l)<2||(n||fi(o,{top:l}),D(o,l,!0),n&&fi(o),kt(o,100))}function D(o,l,f){l=Math.max(0,Math.min(o.display.scroller.scrollHeight-o.display.scroller.clientHeight,l)),!(o.display.scroller.scrollTop==l&&!f)&&(o.doc.scrollTop=l,o.display.scrollbars.setScrollTop(l),o.display.scroller.scrollTop!=l&&(o.display.scroller.scrollTop=l))}function I(o,l,f,d){l=Math.max(0,Math.min(l,o.display.scroller.scrollWidth-o.display.scroller.clientWidth)),!((f?l==o.doc.scrollLeft:Math.abs(o.doc.scrollLeft-l)<2)&&!d)&&(o.doc.scrollLeft=l,Vo(o),o.display.scroller.scrollLeft!=l&&(o.display.scroller.scrollLeft=l),o.display.scrollbars.setScrollLeft(l))}function L(o){var l=o.display,f=l.gutters.offsetWidth,d=Math.round(o.doc.height+Xc(o.display));return{clientHeight:l.scroller.clientHeight,viewHeight:l.wrapper.clientHeight,scrollWidth:l.scroller.scrollWidth,clientWidth:l.scroller.clientWidth,viewWidth:l.wrapper.clientWidth,barLeft:o.options.fixedGutter?f:0,docHeight:d,scrollHeight:d+po(o)+l.barHeight,nativeBarWidth:l.nativeBarWidth,gutterWidth:f}}var U=function(o,l,f){this.cm=f;var d=this.vert=H("div",[H("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),h=this.horiz=H("div",[H("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");d.tabIndex=h.tabIndex=-1,o(d),o(h),Tt(d,"scroll",function(){d.clientHeight&&l(d.scrollTop,"vertical")}),Tt(h,"scroll",function(){h.clientWidth&&l(h.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,a&&c<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};U.prototype.update=function(o){var l=o.scrollWidth>o.clientWidth+1,f=o.scrollHeight>o.clientHeight+1,d=o.nativeBarWidth;if(f){this.vert.style.display="block",this.vert.style.bottom=l?d+"px":"0";var h=o.viewHeight-(l?d:0);this.vert.firstChild.style.height=Math.max(0,o.scrollHeight-o.clientHeight+h)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(l){this.horiz.style.display="block",this.horiz.style.right=f?d+"px":"0",this.horiz.style.left=o.barLeft+"px";var b=o.viewWidth-o.barLeft-(f?d:0);this.horiz.firstChild.style.width=Math.max(0,o.scrollWidth-o.clientWidth+b)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&o.clientHeight>0&&(d==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:f?d:0,bottom:l?d:0}},U.prototype.setScrollLeft=function(o){this.horiz.scrollLeft!=o&&(this.horiz.scrollLeft=o),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},U.prototype.setScrollTop=function(o){this.vert.scrollTop!=o&&(this.vert.scrollTop=o),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},U.prototype.zeroWidthHack=function(){var o=$&&!A?"12px":"18px";this.horiz.style.height=this.vert.style.width=o,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new yi,this.disableVert=new yi},U.prototype.enableZeroWidthBar=function(o,l,f){o.style.visibility="";function d(){var h=o.getBoundingClientRect(),b=f=="vert"?document.elementFromPoint(h.right-1,(h.top+h.bottom)/2):document.elementFromPoint((h.right+h.left)/2,h.bottom-1);b!=o?o.style.visibility="hidden":l.set(1e3,d)}l.set(1e3,d)},U.prototype.clear=function(){var o=this.horiz.parentNode;o.removeChild(this.horiz),o.removeChild(this.vert)};var W=function(){};W.prototype.update=function(){return{bottom:0,right:0}},W.prototype.setScrollLeft=function(){},W.prototype.setScrollTop=function(){},W.prototype.clear=function(){};function J(o,l){l||(l=L(o));var f=o.display.barWidth,d=o.display.barHeight;re(o,l);for(var h=0;h<4&&f!=o.display.barWidth||d!=o.display.barHeight;h++)f!=o.display.barWidth&&o.options.lineWrapping&&$s(o),re(o,L(o)),f=o.display.barWidth,d=o.display.barHeight}function re(o,l){var f=o.display,d=f.scrollbars.update(l);f.sizer.style.paddingRight=(f.barWidth=d.right)+"px",f.sizer.style.paddingBottom=(f.barHeight=d.bottom)+"px",f.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(f.scrollbarFiller.style.display="block",f.scrollbarFiller.style.height=d.bottom+"px",f.scrollbarFiller.style.width=d.right+"px"):f.scrollbarFiller.style.display="",d.bottom&&o.options.coverGutterNextToScrollbar&&o.options.fixedGutter?(f.gutterFiller.style.display="block",f.gutterFiller.style.height=d.bottom+"px",f.gutterFiller.style.width=l.gutterWidth+"px"):f.gutterFiller.style.display=""}var de={native:U,null:W};function ae(o){o.display.scrollbars&&(o.display.scrollbars.clear(),o.display.scrollbars.addClass&&Te(o.display.wrapper,o.display.scrollbars.addClass)),o.display.scrollbars=new de[o.options.scrollbarStyle](function(l){o.display.wrapper.insertBefore(l,o.display.scrollbarFiller),Tt(l,"mousedown",function(){o.state.focused&&setTimeout(function(){return o.display.input.focus()},0)}),l.setAttribute("cm-not-content","true")},function(l,f){f=="horizontal"?I(o,l):w(o,l)},o),o.display.scrollbars.addClass&&_t(o.display.wrapper,o.display.scrollbars.addClass)}var Ie=0;function $e(o){o.curOp={cm:o,viewChanged:!1,startHeight:o.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ie,markArrays:null},Ml(o.curOp)}function ce(o){var l=o.curOp;l&&P_(l,function(f){for(var d=0;d<f.ops.length;d++)f.ops[d].cm.curOp=null;ve(f)})}function ve(o){for(var l=o.ops,f=0;f<l.length;f++)De(l[f]);for(var d=0;d<l.length;d++)Ne(l[d]);for(var h=0;h<l.length;h++)Oe(l[h]);for(var b=0;b<l.length;b++)Ve(l[b]);for(var S=0;S<l.length;S++)He(l[S])}function De(o){var l=o.cm,f=l.display;Wt(l),o.updateMaxLine&&Od(l),o.mustUpdate=o.viewChanged||o.forceUpdate||o.scrollTop!=null||o.scrollToPos&&(o.scrollToPos.from.line<f.viewFrom||o.scrollToPos.to.line>=f.viewTo)||f.maxLineChanged&&l.options.lineWrapping,o.update=o.mustUpdate&&new mt(l,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate)}function Ne(o){o.updatedDisplay=o.mustUpdate&&It(o.cm,o.update)}function Oe(o){var l=o.cm,f=l.display;o.updatedDisplay&&$s(l),o.barMeasure=L(l),f.maxLineChanged&&!l.options.lineWrapping&&(o.adjustWidthTo=Zc(l,f.maxLine,f.maxLine.text.length).left+3,l.display.sizerWidth=o.adjustWidthTo,o.barMeasure.scrollWidth=Math.max(f.scroller.clientWidth,f.sizer.offsetLeft+o.adjustWidthTo+po(l)+l.display.barWidth),o.maxScrollLeft=Math.max(0,f.sizer.offsetLeft+o.adjustWidthTo-Oo(l))),(o.updatedDisplay||o.selectionChanged)&&(o.preparedSelection=f.input.prepareSelection())}function Ve(o){var l=o.cm;o.adjustWidthTo!=null&&(l.display.sizer.style.minWidth=o.adjustWidthTo+"px",o.maxScrollLeft<l.doc.scrollLeft&&I(l,Math.min(l.display.scroller.scrollLeft,o.maxScrollLeft),!0),l.display.maxLineChanged=!1);var f=o.focus&&o.focus==pt(Le(l));o.preparedSelection&&l.display.input.showSelection(o.preparedSelection,f),(o.updatedDisplay||o.startHeight!=l.doc.height)&&J(l,o.barMeasure),o.updatedDisplay&&er(l,o.barMeasure),o.selectionChanged&&nf(l),l.state.focused&&o.updateInput&&l.display.input.reset(o.typing),f&&Gl(o.cm)}function He(o){var l=o.cm,f=l.display,d=l.doc;if(o.updatedDisplay&&Nn(l,o.update),f.wheelStartX!=null&&(o.scrollTop!=null||o.scrollLeft!=null||o.scrollToPos)&&(f.wheelStartX=f.wheelStartY=null),o.scrollTop!=null&&D(l,o.scrollTop,o.forceScroll),o.scrollLeft!=null&&I(l,o.scrollLeft,!0,!0),o.scrollToPos){var h=ys(l,Et(d,o.scrollToPos.from),Et(d,o.scrollToPos.to),o.scrollToPos.margin);sf(l,h)}var b=o.maybeHiddenMarkers,S=o.maybeUnhiddenMarkers;if(b)for(var T=0;T<b.length;++T)b[T].lines.length||fn(b[T],"hide");if(S)for(var M=0;M<S.length;++M)S[M].lines.length&&fn(S[M],"unhide");f.wrapper.offsetHeight&&(d.scrollTop=l.display.scroller.scrollTop),o.changeObjs&&fn(l,"changes",l,o.changeObjs),o.update&&o.update.finish()}function Me(o,l){if(o.curOp)return l();$e(o);try{return l()}finally{ce(o)}}function We(o,l){return function(){if(o.curOp)return l.apply(o,arguments);$e(o);try{return l.apply(o,arguments)}finally{ce(o)}}}function nt(o){return function(){if(this.curOp)return o.apply(this,arguments);$e(this);try{return o.apply(this,arguments)}finally{ce(this)}}}function Ke(o){return function(){var l=this.cm;if(!l||l.curOp)return o.apply(this,arguments);$e(l);try{return o.apply(this,arguments)}finally{ce(l)}}}function kt(o,l){o.doc.highlightFrontier<o.display.viewTo&&o.state.highlight.set(l,Ct(Kt,o))}function Kt(o){var l=o.doc;if(!(l.highlightFrontier>=o.display.viewTo)){var f=+new Date+o.options.workTime,d=lo(o,l.highlightFrontier),h=[];l.iter(d.line,Math.min(l.first+l.size,o.display.viewTo+500),function(b){if(d.line>=o.display.viewFrom){var S=b.styles,T=b.text.length>o.options.maxHighlightLength?dr(l.mode,d.state):null,M=ao(o,b,d,!0);T&&(d.state=T),b.styles=M.styles;var P=b.styleClasses,K=M.classes;K?b.styleClasses=K:P&&(b.styleClasses=null);for(var Z=!S||S.length!=b.styles.length||P!=K&&(!P||!K||P.bgClass!=K.bgClass||P.textClass!=K.textClass),ue=0;!Z&&ue<S.length;++ue)Z=S[ue]!=b.styles[ue];Z&&h.push(d.line),b.stateAfter=d.save(),d.nextLine()}else b.text.length<=o.options.maxHighlightLength&&Ia(o,b.text,d),b.stateAfter=d.line%5==0?d.save():null,d.nextLine();if(+new Date>f)return kt(o,o.options.workDelay),!0}),l.highlightFrontier=d.line,l.modeFrontier=Math.max(l.modeFrontier,d.line),h.length&&Me(o,function(){for(var b=0;b<h.length;b++)vs(o,h[b],"text")})}}var mt=function(o,l,f){var d=o.display;this.viewport=l,this.visible=mo(d,o.doc,l),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=Oo(o),this.force=f,this.dims=Xd(o),this.events=[]};mt.prototype.signal=function(o,l){Xn(o,l)&&this.events.push(arguments)},mt.prototype.finish=function(){for(var o=0;o<this.events.length;o++)fn.apply(null,this.events[o])};function Wt(o){var l=o.display;!l.scrollbarsClipped&&l.scroller.offsetWidth&&(l.nativeBarWidth=l.scroller.offsetWidth-l.scroller.clientWidth,l.heightForcer.style.height=po(o)+"px",l.sizer.style.marginBottom=-l.nativeBarWidth+"px",l.sizer.style.borderRightWidth=po(o)+"px",l.scrollbarsClipped=!0)}function Pt(o){if(o.hasFocus())return null;var l=pt(Le(o));if(!l||!Xe(o.display.lineDiv,l))return null;var f={activeElt:l};if(window.getSelection){var d=lt(o).getSelection();d.anchorNode&&d.extend&&Xe(o.display.lineDiv,d.anchorNode)&&(f.anchorNode=d.anchorNode,f.anchorOffset=d.anchorOffset,f.focusNode=d.focusNode,f.focusOffset=d.focusOffset)}return f}function on(o){if(!(!o||!o.activeElt||o.activeElt==pt(Ut(o.activeElt)))&&(o.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(o.activeElt.nodeName)&&o.anchorNode&&Xe(document.body,o.anchorNode)&&Xe(document.body,o.focusNode))){var l=o.activeElt.ownerDocument,f=l.defaultView.getSelection(),d=l.createRange();d.setEnd(o.anchorNode,o.anchorOffset),d.collapse(!1),f.removeAllRanges(),f.addRange(d),f.extend(o.focusNode,o.focusOffset)}}function It(o,l){var f=o.display,d=o.doc;if(l.editorIsHidden)return ho(o),!1;if(!l.force&&l.visible.from>=f.viewFrom&&l.visible.to<=f.viewTo&&(f.updateLineNumbers==null||f.updateLineNumbers>=f.viewTo)&&f.renderedView==f.view&&Vh(o)==0)return!1;Yr(o)&&(ho(o),l.dims=Xd(o));var h=d.first+d.size,b=Math.max(l.visible.from-o.options.viewportMargin,d.first),S=Math.min(h,l.visible.to+o.options.viewportMargin);f.viewFrom<b&&b-f.viewFrom<20&&(b=Math.max(d.first,f.viewFrom)),f.viewTo>S&&f.viewTo-S<20&&(S=Math.min(h,f.viewTo)),co&&(b=Ld(o.doc,b),S=Sh(o.doc,S));var T=b!=f.viewFrom||S!=f.viewTo||f.lastWrapHeight!=l.wrapperHeight||f.lastWrapWidth!=l.wrapperWidth;Oh(o,b,S),f.viewOffset=fo(wt(o.doc,f.viewFrom)),o.display.mover.style.top=f.viewOffset+"px";var M=Vh(o);if(!T&&M==0&&!l.force&&f.renderedView==f.view&&(f.updateLineNumbers==null||f.updateLineNumbers>=f.viewTo))return!1;var P=Pt(o);return M>4&&(f.lineDiv.style.display="none"),go(o,f.updateLineNumbers,l.dims),M>4&&(f.lineDiv.style.display=""),f.renderedView=f.view,on(P),j(f.cursorDiv),j(f.selectionDiv),f.gutters.style.height=f.sizer.style.minHeight=0,T&&(f.lastWrapHeight=l.wrapperHeight,f.lastWrapWidth=l.wrapperWidth,kt(o,400)),f.updateLineNumbers=null,!0}function Nn(o,l){for(var f=l.viewport,d=!0;;d=!1){if(!d||!o.options.lineWrapping||l.oldDisplayWidth==Oo(o)){if(f&&f.top!=null&&(f={top:Math.min(o.doc.height+Xc(o.display)-Pl(o),f.top)}),l.visible=mo(o.display,o.doc,f),l.visible.from>=o.display.viewFrom&&l.visible.to<=o.display.viewTo)break}else d&&(l.visible=mo(o.display,o.doc,f));if(!It(o,l))break;$s(o);var h=L(o);zl(o),J(o,h),er(o,h),l.force=!1}l.signal(o,"update",o),(o.display.viewFrom!=o.display.reportedViewFrom||o.display.viewTo!=o.display.reportedViewTo)&&(l.signal(o,"viewportChange",o,o.display.viewFrom,o.display.viewTo),o.display.reportedViewFrom=o.display.viewFrom,o.display.reportedViewTo=o.display.viewTo)}function fi(o,l){var f=new mt(o,l);if(It(o,f)){$s(o),Nn(o,f);var d=L(o);zl(o),J(o,d),er(o,d),f.finish()}}function go(o,l,f){var d=o.display,h=o.options.lineNumbers,b=d.lineDiv,S=b.firstChild;function T(we){var Re=we.nextSibling;return u&&$&&o.display.currentWheelTarget==we?we.style.display="none":we.parentNode.removeChild(we),Re}for(var M=d.view,P=d.viewFrom,K=0;K<M.length;K++){var Z=M[K];if(!Z.hidden)if(!Z.node||Z.node.parentNode!=b){var ue=kh(o,Z,P,f);b.insertBefore(ue,S)}else{for(;S!=Z.node;)S=T(S);var se=h&&l!=null&&l<=P&&Z.lineNumber;Z.changes&&(Bt(Z.changes,"gutter")>-1&&(se=!1),Yc(o,Z,P,f)),se&&(j(Z.lineNumber),Z.lineNumber.appendChild(document.createTextNode(Ge(o.options,P)))),S=Z.node.nextSibling}P+=Z.size}for(;S;)S=T(S)}function Ri(o){var l=o.gutters.offsetWidth;o.sizer.style.marginLeft=l+"px",On(o,"gutterChanged",o)}function er(o,l){o.display.sizer.style.minHeight=l.docHeight+"px",o.display.heightForcer.style.top=l.docHeight+"px",o.display.gutters.style.height=l.docHeight+o.display.barHeight+po(o)+"px"}function Vo(o){var l=o.display,f=l.view;if(!(!l.alignWidgets&&(!l.gutters.firstChild||!o.options.fixedGutter))){for(var d=nu(l)-l.scroller.scrollLeft+o.doc.scrollLeft,h=l.gutters.offsetWidth,b=d+"px",S=0;S<f.length;S++)if(!f[S].hidden){o.options.fixedGutter&&(f[S].gutter&&(f[S].gutter.style.left=b),f[S].gutterBackground&&(f[S].gutterBackground.style.left=b));var T=f[S].alignable;if(T)for(var M=0;M<T.length;M++)T[M].style.left=b}o.options.fixedGutter&&(l.gutters.style.left=d+h+"px")}}function Yr(o){if(!o.options.lineNumbers)return!1;var l=o.doc,f=Ge(o.options,l.first+l.size-1),d=o.display;if(f.length!=d.lineNumChars){var h=d.measure.appendChild(H("div",[H("div",f)],"CodeMirror-linenumber CodeMirror-gutter-elt")),b=h.firstChild.offsetWidth,S=h.offsetWidth-b;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(b,d.lineGutter.offsetWidth-S)+1,d.lineNumWidth=d.lineNumInnerWidth+S,d.lineNumChars=d.lineNumInnerWidth?f.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",Ri(o.display),!0}return!1}function qs(o,l){for(var f=[],d=!1,h=0;h<o.length;h++){var b=o[h],S=null;if(typeof b!="string"&&(S=b.style,b=b.className),b=="CodeMirror-linenumbers")if(l)d=!0;else continue;f.push({className:b,style:S})}return l&&!d&&f.push({className:"CodeMirror-linenumbers",style:null}),f}function Fr(o){var l=o.gutters,f=o.gutterSpecs;j(l),o.lineGutter=null;for(var d=0;d<f.length;++d){var h=f[d],b=h.className,S=h.style,T=l.appendChild(H("div",null,"CodeMirror-gutter "+b));S&&(T.style.cssText=S),b=="CodeMirror-linenumbers"&&(o.lineGutter=T,T.style.width=(o.lineNumWidth||1)+"px")}l.style.display=f.length?"":"none",Ri(o)}function Cs(o){Fr(o.display),Gi(o),Vo(o)}function G_(o,l,f,d){var h=this;this.input=f,h.scrollbarFiller=H("div",null,"CodeMirror-scrollbar-filler"),h.scrollbarFiller.setAttribute("cm-not-content","true"),h.gutterFiller=H("div",null,"CodeMirror-gutter-filler"),h.gutterFiller.setAttribute("cm-not-content","true"),h.lineDiv=Ae("div",null,"CodeMirror-code"),h.selectionDiv=H("div",null,null,"position: relative; z-index: 1"),h.cursorDiv=H("div",null,"CodeMirror-cursors"),h.measure=H("div",null,"CodeMirror-measure"),h.lineMeasure=H("div",null,"CodeMirror-measure"),h.lineSpace=Ae("div",[h.measure,h.lineMeasure,h.selectionDiv,h.cursorDiv,h.lineDiv],null,"position: relative; outline: none");var b=Ae("div",[h.lineSpace],"CodeMirror-lines");h.mover=H("div",[b],null,"position: relative"),h.sizer=H("div",[h.mover],"CodeMirror-sizer"),h.sizerWidth=null,h.heightForcer=H("div",null,null,"position: absolute; height: "+Dn+"px; width: 1px;"),h.gutters=H("div",null,"CodeMirror-gutters"),h.lineGutter=null,h.scroller=H("div",[h.sizer,h.heightForcer,h.gutters],"CodeMirror-scroll"),h.scroller.setAttribute("tabIndex","-1"),h.wrapper=H("div",[h.scrollbarFiller,h.gutterFiller,h.scroller],"CodeMirror"),m&&C>=105&&(h.wrapper.style.clipPath="inset(0px)"),h.wrapper.setAttribute("translate","no"),a&&c<8&&(h.gutters.style.zIndex=-1,h.scroller.style.paddingRight=0),!u&&!(n&&B)&&(h.scroller.draggable=!0),o&&(o.appendChild?o.appendChild(h.wrapper):o(h.wrapper)),h.viewFrom=h.viewTo=l.first,h.reportedViewFrom=h.reportedViewTo=l.first,h.view=[],h.renderedView=null,h.externalMeasured=null,h.viewOffset=0,h.lastWrapHeight=h.lastWrapWidth=0,h.updateLineNumbers=null,h.nativeBarWidth=h.barHeight=h.barWidth=0,h.scrollbarsClipped=!1,h.lineNumWidth=h.lineNumInnerWidth=h.lineNumChars=null,h.alignWidgets=!1,h.cachedCharWidth=h.cachedTextHeight=h.cachedPaddingH=null,h.maxLine=null,h.maxLineLength=0,h.maxLineChanged=!1,h.wheelDX=h.wheelDY=h.wheelStartX=h.wheelStartY=null,h.shift=!1,h.selForContextMenu=null,h.activeTouch=null,h.gutterSpecs=qs(d.gutters,d.lineNumbers),Fr(h),f.init(h)}var Hh=0,Ws=null;a?Ws=-.53:n?Ws=15:m?Ws=-.7:E&&(Ws=-1/3);function XE(o){var l=o.wheelDeltaX,f=o.wheelDeltaY;return l==null&&o.detail&&o.axis==o.HORIZONTAL_AXIS&&(l=o.detail),f==null&&o.detail&&o.axis==o.VERTICAL_AXIS?f=o.detail:f==null&&(f=o.wheelDelta),{x:l,y:f}}function GP(o){var l=XE(o);return l.x*=Ws,l.y*=Ws,l}function ZE(o,l){m&&C==102&&(o.display.chromeScrollHack==null?o.display.sizer.style.pointerEvents="none":clearTimeout(o.display.chromeScrollHack),o.display.chromeScrollHack=setTimeout(function(){o.display.chromeScrollHack=null,o.display.sizer.style.pointerEvents=""},100));var f=XE(l),d=f.x,h=f.y,b=Ws;l.deltaMode===0&&(d=l.deltaX,h=l.deltaY,b=1);var S=o.display,T=S.scroller,M=T.scrollWidth>T.clientWidth,P=T.scrollHeight>T.clientHeight;if(d&&M||h&&P){if(h&&$&&u){e:for(var K=l.target,Z=S.view;K!=T;K=K.parentNode)for(var ue=0;ue<Z.length;ue++)if(Z[ue].node==K){o.display.currentWheelTarget=K;break e}}if(d&&!n&&!x&&b!=null){h&&P&&w(o,Math.max(0,T.scrollTop+h*b)),I(o,Math.max(0,T.scrollLeft+d*b)),(!h||h&&P)&&Ln(l),S.wheelStartX=null;return}if(h&&b!=null){var se=h*b,we=o.doc.scrollTop,Re=we+S.wrapper.clientHeight;se<0?we=Math.max(0,we+se-50):Re=Math.min(o.doc.height,Re+se+50),fi(o,{top:we,bottom:Re})}Hh<20&&l.deltaMode!==0&&(S.wheelStartX==null?(S.wheelStartX=T.scrollLeft,S.wheelStartY=T.scrollTop,S.wheelDX=d,S.wheelDY=h,setTimeout(function(){if(S.wheelStartX!=null){var qe=T.scrollLeft-S.wheelStartX,it=T.scrollTop-S.wheelStartY,dt=it&&S.wheelDY&&it/S.wheelDY||qe&&S.wheelDX&&qe/S.wheelDX;S.wheelStartX=S.wheelStartY=null,dt&&(Ws=(Ws*Hh+dt)/(Hh+1),++Hh)}},200)):(S.wheelDX+=d,S.wheelDY+=h))}}var Jr=function(o,l){this.ranges=o,this.primIndex=l};Jr.prototype.primary=function(){return this.ranges[this.primIndex]},Jr.prototype.equals=function(o){if(o==this)return!0;if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length)return!1;for(var l=0;l<this.ranges.length;l++){var f=this.ranges[l],d=o.ranges[l];if(!Xt(f.anchor,d.anchor)||!Xt(f.head,d.head))return!1}return!0},Jr.prototype.deepCopy=function(){for(var o=[],l=0;l<this.ranges.length;l++)o[l]=new mn(Zn(this.ranges[l].anchor),Zn(this.ranges[l].head));return new Jr(o,this.primIndex)},Jr.prototype.somethingSelected=function(){for(var o=0;o<this.ranges.length;o++)if(!this.ranges[o].empty())return!0;return!1},Jr.prototype.contains=function(o,l){l||(l=o);for(var f=0;f<this.ranges.length;f++){var d=this.ranges[f];if(at(l,d.from())>=0&&at(o,d.to())<=0)return f}return-1};var mn=function(o,l){this.anchor=o,this.head=l};mn.prototype.from=function(){return Vs(this.anchor,this.head)},mn.prototype.to=function(){return $n(this.anchor,this.head)},mn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Bo(o,l,f){var d=o&&o.options.selectionsMayTouch,h=l[f];l.sort(function(ue,se){return at(ue.from(),se.from())}),f=Bt(l,h);for(var b=1;b<l.length;b++){var S=l[b],T=l[b-1],M=at(T.to(),S.from());if(d&&!S.empty()?M>0:M>=0){var P=Vs(T.from(),S.from()),K=$n(T.to(),S.to()),Z=T.empty()?S.from()==S.head:T.from()==T.head;b<=f&&--f,l.splice(--b,2,new mn(Z?K:P,Z?P:K))}}return new Jr(l,f)}function Ba(o,l){return new Jr([new mn(o,l||o)],0)}function Ha(o){return o.text?_e(o.from.line+o.text.length-1,je(o.text).length+(o.text.length==1?o.from.ch:0)):o.to}function eS(o,l){if(at(o,l.from)<0)return o;if(at(o,l.to)<=0)return Ha(l);var f=o.line+l.text.length-(l.to.line-l.from.line)-1,d=o.ch;return o.line==l.to.line&&(d+=Ha(l).ch-l.to.ch),_e(f,d)}function $_(o,l){for(var f=[],d=0;d<o.sel.ranges.length;d++){var h=o.sel.ranges[d];f.push(new mn(eS(h.anchor,l),eS(h.head,l)))}return Bo(o.cm,f,o.sel.primIndex)}function tS(o,l,f){return o.line==l.line?_e(f.line,o.ch-l.ch+f.ch):_e(f.line+(o.line-l.line),o.ch)}function $P(o,l,f){for(var d=[],h=_e(o.first,0),b=h,S=0;S<l.length;S++){var T=l[S],M=tS(T.from,h,b),P=tS(Ha(T),h,b);if(h=T.to,b=P,f=="around"){var K=o.sel.ranges[S],Z=at(K.head,K.anchor)<0;d[S]=new mn(Z?P:M,Z?M:P)}else d[S]=new mn(M,M)}return new Jr(d,o.sel.primIndex)}function q_(o){o.doc.mode=Da(o.options,o.doc.modeOption),lf(o)}function lf(o){o.doc.iter(function(l){l.stateAfter&&(l.stateAfter=null),l.styles&&(l.styles=null)}),o.doc.modeFrontier=o.doc.highlightFrontier=o.doc.first,kt(o,100),o.state.modeGen++,o.curOp&&Gi(o)}function nS(o,l){return l.from.ch==0&&l.to.ch==0&&je(l.text)==""&&(!o.cm||o.cm.options.wholeLineUpdateBefore)}function W_(o,l,f,d){function h(dt){return f?f[dt]:null}function b(dt,rt,vt){Tl(dt,rt,vt,d),On(dt,"change",dt,l)}function S(dt,rt){for(var vt=[],Rt=dt;Rt<rt;++Rt)vt.push(new zi(P[Rt],h(Rt),d));return vt}var T=l.from,M=l.to,P=l.text,K=wt(o,T.line),Z=wt(o,M.line),ue=je(P),se=h(P.length-1),we=M.line-T.line;if(l.full)o.insert(0,S(0,P.length)),o.remove(P.length,o.size-P.length);else if(nS(o,l)){var Re=S(0,P.length-1);b(Z,Z.text,se),we&&o.remove(T.line,we),Re.length&&o.insert(T.line,Re)}else if(K==Z)if(P.length==1)b(K,K.text.slice(0,T.ch)+ue+K.text.slice(M.ch),se);else{var qe=S(1,P.length-1);qe.push(new zi(ue+K.text.slice(M.ch),se,d)),b(K,K.text.slice(0,T.ch)+P[0],h(0)),o.insert(T.line+1,qe)}else if(P.length==1)b(K,K.text.slice(0,T.ch)+P[0]+Z.text.slice(M.ch),h(0)),o.remove(T.line+1,we);else{b(K,K.text.slice(0,T.ch)+P[0],h(0)),b(Z,ue+Z.text.slice(M.ch),se);var it=S(1,P.length-1);we>1&&o.remove(T.line+1,we-1),o.insert(T.line+1,it)}On(o,"change",o,l)}function Ua(o,l,f){function d(h,b,S){if(h.linked)for(var T=0;T<h.linked.length;++T){var M=h.linked[T];if(M.doc!=b){var P=S&&M.sharedHist;f&&!P||(l(M.doc,P),d(M.doc,h,P))}}}d(o,null,!0)}function iS(o,l){if(l.cm)throw new Error("This document is already in use.");o.doc=l,l.cm=o,ef(o),q_(o),rS(o),o.options.direction=l.direction,o.options.lineWrapping||Od(o),o.options.mode=l.modeOption,Gi(o)}function rS(o){(o.doc.direction=="rtl"?_t:Te)(o.display.lineDiv,"CodeMirror-rtl")}function qP(o){Me(o,function(){rS(o),Gi(o)})}function Uh(o){this.done=[],this.undone=[],this.undoDepth=o?o.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=o?o.maxGeneration:1}function j_(o,l){var f={from:Zn(l.from),to:Ha(l),text:Ar(o,l.from,l.to)};return aS(o,f,l.from.line,l.to.line+1),Ua(o,function(d){return aS(d,f,l.from.line,l.to.line+1)},!0),f}function oS(o){for(;o.length;){var l=je(o);if(l.ranges)o.pop();else break}}function WP(o,l){if(l)return oS(o.done),je(o.done);if(o.done.length&&!je(o.done).ranges)return je(o.done);if(o.done.length>1&&!o.done[o.done.length-2].ranges)return o.done.pop(),je(o.done)}function sS(o,l,f,d){var h=o.history;h.undone.length=0;var b=+new Date,S,T;if((h.lastOp==d||h.lastOrigin==l.origin&&l.origin&&(l.origin.charAt(0)=="+"&&h.lastModTime>b-(o.cm?o.cm.options.historyEventDelay:500)||l.origin.charAt(0)=="*"))&&(S=WP(h,h.lastOp==d)))T=je(S.changes),at(l.from,l.to)==0&&at(l.from,T.to)==0?T.to=Ha(l):S.changes.push(j_(o,l));else{var M=je(h.done);for((!M||!M.ranges)&&zh(o.sel,h.done),S={changes:[j_(o,l)],generation:h.generation},h.done.push(S);h.done.length>h.undoDepth;)h.done.shift(),h.done[0].ranges||h.done.shift()}h.done.push(f),h.generation=++h.maxGeneration,h.lastModTime=h.lastSelTime=b,h.lastOp=h.lastSelOp=d,h.lastOrigin=h.lastSelOrigin=l.origin,T||fn(o,"historyAdded")}function jP(o,l,f,d){var h=l.charAt(0);return h=="*"||h=="+"&&f.ranges.length==d.ranges.length&&f.somethingSelected()==d.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)}function KP(o,l,f,d){var h=o.history,b=d&&d.origin;f==h.lastSelOp||b&&h.lastSelOrigin==b&&(h.lastModTime==h.lastSelTime&&h.lastOrigin==b||jP(o,b,je(h.done),l))?h.done[h.done.length-1]=l:zh(l,h.done),h.lastSelTime=+new Date,h.lastSelOrigin=b,h.lastSelOp=f,d&&d.clearRedo!==!1&&oS(h.undone)}function zh(o,l){var f=je(l);f&&f.ranges&&f.equals(o)||l.push(o)}function aS(o,l,f,d){var h=l["spans_"+o.id],b=0;o.iter(Math.max(o.first,f),Math.min(o.first+o.size,d),function(S){S.markedSpans&&((h||(h=l["spans_"+o.id]={}))[b]=S.markedSpans),++b})}function YP(o){if(!o)return null;for(var l,f=0;f<o.length;++f)o[f].marker.explicitlyCleared?l||(l=o.slice(0,f)):l&&l.push(o[f]);return l?l.length?l:null:o}function JP(o,l){var f=l["spans_"+o.id];if(!f)return null;for(var d=[],h=0;h<l.text.length;++h)d.push(YP(f[h]));return d}function lS(o,l){var f=JP(o,l),d=ds(o,l);if(!f)return d;if(!d)return f;for(var h=0;h<f.length;++h){var b=f[h],S=d[h];if(b&&S)e:for(var T=0;T<S.length;++T){for(var M=S[T],P=0;P<b.length;++P)if(b[P].marker==M.marker)continue e;b.push(M)}else S&&(f[h]=S)}return f}function ru(o,l,f){for(var d=[],h=0;h<o.length;++h){var b=o[h];if(b.ranges){d.push(f?Jr.prototype.deepCopy.call(b):b);continue}var S=b.changes,T=[];d.push({changes:T});for(var M=0;M<S.length;++M){var P=S[M],K=void 0;if(T.push({from:P.from,to:P.to,text:P.text}),l)for(var Z in P)(K=Z.match(/^spans_(\d+)$/))&&Bt(l,Number(K[1]))>-1&&(je(T)[Z]=P[Z],delete P[Z])}}return d}function K_(o,l,f,d){if(d){var h=o.anchor;if(f){var b=at(l,h)<0;b!=at(f,h)<0?(h=l,l=f):b!=at(l,f)<0&&(l=f)}return new mn(h,l)}else return new mn(f||l,l)}function Gh(o,l,f,d,h){h==null&&(h=o.cm&&(o.cm.display.shift||o.extend)),$i(o,new Jr([K_(o.sel.primary(),l,f,h)],0),d)}function cS(o,l,f){for(var d=[],h=o.cm&&(o.cm.display.shift||o.extend),b=0;b<o.sel.ranges.length;b++)d[b]=K_(o.sel.ranges[b],l[b],null,h);var S=Bo(o.cm,d,o.sel.primIndex);$i(o,S,f)}function Y_(o,l,f,d){var h=o.sel.ranges.slice(0);h[l]=f,$i(o,Bo(o.cm,h,o.sel.primIndex),d)}function uS(o,l,f,d){$i(o,Ba(l,f),d)}function QP(o,l,f){var d={ranges:l.ranges,update:function(h){this.ranges=[];for(var b=0;b<h.length;b++)this.ranges[b]=new mn(Et(o,h[b].anchor),Et(o,h[b].head))},origin:f&&f.origin};return fn(o,"beforeSelectionChange",o,d),o.cm&&fn(o.cm,"beforeSelectionChange",o.cm,d),d.ranges!=l.ranges?Bo(o.cm,d.ranges,d.ranges.length-1):l}function dS(o,l,f){var d=o.history.done,h=je(d);h&&h.ranges?(d[d.length-1]=l,$h(o,l,f)):$i(o,l,f)}function $i(o,l,f){$h(o,l,f),KP(o,o.sel,o.cm?o.cm.curOp.id:NaN,f)}function $h(o,l,f){(Xn(o,"beforeSelectionChange")||o.cm&&Xn(o.cm,"beforeSelectionChange"))&&(l=QP(o,l,f));var d=f&&f.bias||(at(l.primary().head,o.sel.primary().head)<0?-1:1);fS(o,hS(o,l,d,!0)),!(f&&f.scroll===!1)&&o.cm&&o.cm.getOption("readOnly")!="nocursor"&&Va(o.cm)}function fS(o,l){l.equals(o.sel)||(o.sel=l,o.cm&&(o.cm.curOp.updateInput=1,o.cm.curOp.selectionChanged=!0,Xi(o.cm)),On(o,"cursorActivity",o))}function pS(o){fS(o,hS(o,o.sel,null,!1))}function hS(o,l,f,d){for(var h,b=0;b<l.ranges.length;b++){var S=l.ranges[b],T=l.ranges.length==o.sel.ranges.length&&o.sel.ranges[b],M=qh(o,S.anchor,T&&T.anchor,f,d),P=S.head==S.anchor?M:qh(o,S.head,T&&T.head,f,d);(h||M!=S.anchor||P!=S.head)&&(h||(h=l.ranges.slice(0,b)),h[b]=new mn(M,P))}return h?Bo(o.cm,h,l.primIndex):l}function ou(o,l,f,d,h){var b=wt(o,l.line);if(b.markedSpans)for(var S=0;S<b.markedSpans.length;++S){var T=b.markedSpans[S],M=T.marker,P="selectLeft"in M?!M.selectLeft:M.inclusiveLeft,K="selectRight"in M?!M.selectRight:M.inclusiveRight;if((T.from==null||(P?T.from<=l.ch:T.from<l.ch))&&(T.to==null||(K?T.to>=l.ch:T.to>l.ch))){if(h&&(fn(M,"beforeCursorEnter"),M.explicitlyCleared))if(b.markedSpans){--S;continue}else break;if(!M.atomic)continue;if(f){var Z=M.find(d<0?1:-1),ue=void 0;if((d<0?K:P)&&(Z=mS(o,Z,-d,Z&&Z.line==l.line?b:null)),Z&&Z.line==l.line&&(ue=at(Z,f))&&(d<0?ue<0:ue>0))return ou(o,Z,l,d,h)}var se=M.find(d<0?-1:1);return(d<0?P:K)&&(se=mS(o,se,d,se.line==l.line?b:null)),se?ou(o,se,l,d,h):null}}return l}function qh(o,l,f,d,h){var b=d||1,S=ou(o,l,f,b,h)||!h&&ou(o,l,f,b,!0)||ou(o,l,f,-b,h)||!h&&ou(o,l,f,-b,!0);return S||(o.cantEdit=!0,_e(o.first,0))}function mS(o,l,f,d){return f<0&&l.ch==0?l.line>o.first?Et(o,_e(l.line-1)):null:f>0&&l.ch==(d||wt(o,l.line)).text.length?l.line<o.first+o.size-1?_e(l.line+1,0):null:new _e(l.line,l.ch+f)}function gS(o){o.setSelection(_e(o.firstLine(),0),_e(o.lastLine()),dn)}function vS(o,l,f){var d={canceled:!1,from:l.from,to:l.to,text:l.text,origin:l.origin,cancel:function(){return d.canceled=!0}};return f&&(d.update=function(h,b,S,T){h&&(d.from=Et(o,h)),b&&(d.to=Et(o,b)),S&&(d.text=S),T!==void 0&&(d.origin=T)}),fn(o,"beforeChange",o,d),o.cm&&fn(o.cm,"beforeChange",o.cm,d),d.canceled?(o.cm&&(o.cm.curOp.updateInput=2),null):{from:d.from,to:d.to,text:d.text,origin:d.origin}}function su(o,l,f){if(o.cm){if(!o.cm.curOp)return We(o.cm,su)(o,l,f);if(o.cm.state.suppressEdits)return}if(!((Xn(o,"beforeChange")||o.cm&&Xn(o.cm,"beforeChange"))&&(l=vS(o,l,!0),!l))){var d=_h&&!f&&Rd(o,l.from,l.to);if(d)for(var h=d.length-1;h>=0;--h)yS(o,{from:d[h].from,to:d[h].to,text:h?[""]:l.text,origin:l.origin});else yS(o,l)}}function yS(o,l){if(!(l.text.length==1&&l.text[0]==""&&at(l.from,l.to)==0)){var f=$_(o,l);sS(o,l,f,o.cm?o.cm.curOp.id:NaN),cf(o,l,f,ds(o,l));var d=[];Ua(o,function(h,b){!b&&Bt(d,h.history)==-1&&(bS(h.history,l),d.push(h.history)),cf(h,l,null,ds(h,l))})}}function Wh(o,l,f){var d=o.cm&&o.cm.state.suppressEdits;if(!(d&&!f)){for(var h=o.history,b,S=o.sel,T=l=="undo"?h.done:h.undone,M=l=="undo"?h.undone:h.done,P=0;P<T.length&&(b=T[P],!(f?b.ranges&&!b.equals(o.sel):!b.ranges));P++);if(P!=T.length){for(h.lastOrigin=h.lastSelOrigin=null;;)if(b=T.pop(),b.ranges){if(zh(b,M),f&&!b.equals(o.sel)){$i(o,b,{clearRedo:!1});return}S=b}else if(d){T.push(b);return}else break;var K=[];zh(S,M),M.push({changes:K,generation:h.generation}),h.generation=b.generation||++h.maxGeneration;for(var Z=Xn(o,"beforeChange")||o.cm&&Xn(o.cm,"beforeChange"),ue=function(Re){var qe=b.changes[Re];if(qe.origin=l,Z&&!vS(o,qe,!1))return T.length=0,{};K.push(j_(o,qe));var it=Re?$_(o,qe):je(T);cf(o,qe,it,lS(o,qe)),!Re&&o.cm&&o.cm.scrollIntoView({from:qe.from,to:Ha(qe)});var dt=[];Ua(o,function(rt,vt){!vt&&Bt(dt,rt.history)==-1&&(bS(rt.history,qe),dt.push(rt.history)),cf(rt,qe,null,lS(rt,qe))})},se=b.changes.length-1;se>=0;--se){var we=ue(se);if(we)return we.v}}}}function _S(o,l){if(l!=0&&(o.first+=l,o.sel=new Jr(Qn(o.sel.ranges,function(h){return new mn(_e(h.anchor.line+l,h.anchor.ch),_e(h.head.line+l,h.head.ch))}),o.sel.primIndex),o.cm)){Gi(o.cm,o.first,o.first-l,l);for(var f=o.cm.display,d=f.viewFrom;d<f.viewTo;d++)vs(o.cm,d,"gutter")}}function cf(o,l,f,d){if(o.cm&&!o.cm.curOp)return We(o.cm,cf)(o,l,f,d);if(l.to.line<o.first){_S(o,l.text.length-1-(l.to.line-l.from.line));return}if(!(l.from.line>o.lastLine())){if(l.from.line<o.first){var h=l.text.length-1-(o.first-l.from.line);_S(o,h),l={from:_e(o.first,0),to:_e(l.to.line+h,l.to.ch),text:[je(l.text)],origin:l.origin}}var b=o.lastLine();l.to.line>b&&(l={from:l.from,to:_e(b,wt(o,b).text.length),text:[l.text[0]],origin:l.origin}),l.removed=Ar(o,l.from,l.to),f||(f=$_(o,l)),o.cm?XP(o.cm,l,d):W_(o,l,d),$h(o,f,dn),o.cantEdit&&qh(o,_e(o.firstLine(),0))&&(o.cantEdit=!1)}}function XP(o,l,f){var d=o.doc,h=o.display,b=l.from,S=l.to,T=!1,M=b.line;o.options.lineWrapping||(M=O(kn(wt(d,b.line))),d.iter(M,S.line+1,function(se){if(se==h.maxLine)return T=!0,!0})),d.sel.contains(l.from,l.to)>-1&&Xi(o),W_(d,l,f,Zd(o)),o.options.lineWrapping||(d.iter(M,b.line+l.text.length,function(se){var we=Dl(se);we>h.maxLineLength&&(h.maxLine=se,h.maxLineLength=we,h.maxLineChanged=!0,T=!1)}),T&&(o.curOp.updateMaxLine=!0)),A_(d,b.line),kt(o,400);var P=l.text.length-(S.line-b.line)-1;l.full?Gi(o):b.line==S.line&&l.text.length==1&&!nS(o.doc,l)?vs(o,b.line,"text"):Gi(o,b.line,S.line+1,P);var K=Xn(o,"changes"),Z=Xn(o,"change");if(Z||K){var ue={from:b,to:S,text:l.text,removed:l.removed,origin:l.origin};Z&&On(o,"change",o,ue),K&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(ue)}o.display.selForContextMenu=null}function au(o,l,f,d,h){var b;d||(d=f),at(d,f)<0&&(b=[d,f],f=b[0],d=b[1]),typeof l=="string"&&(l=o.splitLines(l)),su(o,{from:f,to:d,text:l,origin:h})}function CS(o,l,f,d){f<o.line?o.line+=d:l<o.line&&(o.line=l,o.ch=0)}function xS(o,l,f,d){for(var h=0;h<o.length;++h){var b=o[h],S=!0;if(b.ranges){b.copied||(b=o[h]=b.deepCopy(),b.copied=!0);for(var T=0;T<b.ranges.length;T++)CS(b.ranges[T].anchor,l,f,d),CS(b.ranges[T].head,l,f,d);continue}for(var M=0;M<b.changes.length;++M){var P=b.changes[M];if(f<P.from.line)P.from=_e(P.from.line+d,P.from.ch),P.to=_e(P.to.line+d,P.to.ch);else if(l<=P.to.line){S=!1;break}}S||(o.splice(0,h+1),h=0)}}function bS(o,l){var f=l.from.line,d=l.to.line,h=l.text.length-(d-f)-1;xS(o.done,f,d,h),xS(o.undone,f,d,h)}function uf(o,l,f,d){var h=l,b=l;return typeof l=="number"?b=wt(o,zc(o,l)):h=O(l),h==null?null:(d(b,h)&&o.cm&&vs(o.cm,h,f),b)}function df(o){this.lines=o,this.parent=null;for(var l=0,f=0;f<o.length;++f)o[f].parent=this,l+=o[f].height;this.height=l}df.prototype={chunkSize:function(){return this.lines.length},removeInner:function(o,l){for(var f=o,d=o+l;f<d;++f){var h=this.lines[f];this.height-=h.height,Il(h),On(h,"delete")}this.lines.splice(o,l)},collapse:function(o){o.push.apply(o,this.lines)},insertInner:function(o,l,f){this.height+=f,this.lines=this.lines.slice(0,o).concat(l).concat(this.lines.slice(o));for(var d=0;d<l.length;++d)l[d].parent=this},iterN:function(o,l,f){for(var d=o+l;o<d;++o)if(f(this.lines[o]))return!0}};function ff(o){this.children=o;for(var l=0,f=0,d=0;d<o.length;++d){var h=o[d];l+=h.chunkSize(),f+=h.height,h.parent=this}this.size=l,this.height=f,this.parent=null}ff.prototype={chunkSize:function(){return this.size},removeInner:function(o,l){this.size-=l;for(var f=0;f<this.children.length;++f){var d=this.children[f],h=d.chunkSize();if(o<h){var b=Math.min(l,h-o),S=d.height;if(d.removeInner(o,b),this.height-=S-d.height,h==b&&(this.children.splice(f--,1),d.parent=null),(l-=b)==0)break;o=0}else o-=h}if(this.size-l<25&&(this.children.length>1||!(this.children[0]instanceof df))){var T=[];this.collapse(T),this.children=[new df(T)],this.children[0].parent=this}},collapse:function(o){for(var l=0;l<this.children.length;++l)this.children[l].collapse(o)},insertInner:function(o,l,f){this.size+=l.length,this.height+=f;for(var d=0;d<this.children.length;++d){var h=this.children[d],b=h.chunkSize();if(o<=b){if(h.insertInner(o,l,f),h.lines&&h.lines.length>50){for(var S=h.lines.length%25+25,T=S;T<h.lines.length;){var M=new df(h.lines.slice(T,T+=25));h.height-=M.height,this.children.splice(++d,0,M),M.parent=this}h.lines=h.lines.slice(0,S),this.maybeSpill()}break}o-=b}},maybeSpill:function(){if(!(this.children.length<=10)){var o=this;do{var l=o.children.splice(o.children.length-5,5),f=new ff(l);if(o.parent){o.size-=f.size,o.height-=f.height;var h=Bt(o.parent.children,o);o.parent.children.splice(h+1,0,f)}else{var d=new ff(o.children);d.parent=o,o.children=[d,f],o=d}f.parent=o.parent}while(o.children.length>10);o.parent.maybeSpill()}},iterN:function(o,l,f){for(var d=0;d<this.children.length;++d){var h=this.children[d],b=h.chunkSize();if(o<b){var S=Math.min(l,b-o);if(h.iterN(o,S,f))return!0;if((l-=S)==0)break;o=0}else o-=b}}};var pf=function(o,l,f){if(f)for(var d in f)f.hasOwnProperty(d)&&(this[d]=f[d]);this.doc=o,this.node=l};pf.prototype.clear=function(){var o=this.doc.cm,l=this.line.widgets,f=this.line,d=O(f);if(!(d==null||!l)){for(var h=0;h<l.length;++h)l[h]==this&&l.splice(h--,1);l.length||(f.widgets=null);var b=Rl(this);fr(f,Math.max(0,f.height-b)),o&&(Me(o,function(){wS(o,f,-b),vs(o,d,"widget")}),On(o,"lineWidgetCleared",o,this,d))}},pf.prototype.changed=function(){var o=this,l=this.height,f=this.doc.cm,d=this.line;this.height=null;var h=Rl(this)-l;h&&(jr(this.doc,d)||fr(d,d.height+h),f&&Me(f,function(){f.curOp.forceUpdate=!0,wS(f,d,h),On(f,"lineWidgetChanged",f,o,O(d))}))},ki(pf);function wS(o,l,f){fo(l)<(o.curOp&&o.curOp.scrollTop||o.doc.scrollTop)&&af(o,f)}function ZP(o,l,f,d){var h=new pf(o,f,d),b=o.cm;return b&&h.noHScroll&&(b.display.alignWidgets=!0),uf(o,l,"widget",function(S){var T=S.widgets||(S.widgets=[]);if(h.insertAt==null?T.push(h):T.splice(Math.min(T.length,Math.max(0,h.insertAt)),0,h),h.line=S,b&&!jr(o,S)){var M=fo(S)<o.scrollTop;fr(S,S.height+Rl(h)),M&&af(b,h.height),b.curOp.forceUpdate=!0}return!0}),b&&On(b,"lineWidgetAdded",b,h,typeof l=="number"?l:O(l)),h}var ES=0,za=function(o,l){this.lines=[],this.type=l,this.doc=o,this.id=++ES};za.prototype.clear=function(){if(!this.explicitlyCleared){var o=this.doc.cm,l=o&&!o.curOp;if(l&&$e(o),Xn(this,"clear")){var f=this.find();f&&On(this,"clear",f.from,f.to)}for(var d=null,h=null,b=0;b<this.lines.length;++b){var S=this.lines[b],T=Aa(S.markedSpans,this);o&&!this.collapsed?vs(o,O(S),"text"):o&&(T.to!=null&&(h=O(S)),T.from!=null&&(d=O(S))),S.markedSpans=xh(S.markedSpans,T),T.from==null&&this.collapsed&&!jr(this.doc,S)&&o&&fr(S,La(o.display))}if(o&&this.collapsed&&!o.options.lineWrapping)for(var M=0;M<this.lines.length;++M){var P=kn(this.lines[M]),K=Dl(P);K>o.display.maxLineLength&&(o.display.maxLine=P,o.display.maxLineLength=K,o.display.maxLineChanged=!0)}d!=null&&o&&this.collapsed&&Gi(o,d,h+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,o&&pS(o.doc)),o&&On(o,"markerCleared",o,this,d,h),l&&ce(o),this.parent&&this.parent.clear()}},za.prototype.find=function(o,l){o==null&&this.type=="bookmark"&&(o=1);for(var f,d,h=0;h<this.lines.length;++h){var b=this.lines[h],S=Aa(b.markedSpans,this);if(S.from!=null&&(f=_e(l?b:O(b),S.from),o==-1))return f;if(S.to!=null&&(d=_e(l?b:O(b),S.to),o==1))return d}return f&&{from:f,to:d}},za.prototype.changed=function(){var o=this,l=this.find(-1,!0),f=this,d=this.doc.cm;!l||!d||Me(d,function(){var h=l.line,b=O(l.line),S=$d(d,b);if(S&&(qd(S),d.curOp.selectionChanged=d.curOp.forceUpdate=!0),d.curOp.updateMaxLine=!0,!jr(f.doc,h)&&f.height!=null){var T=f.height;f.height=null;var M=Rl(f)-T;M&&fr(h,h.height+M)}On(d,"markerChanged",d,o)})},za.prototype.attachLine=function(o){if(!this.lines.length&&this.doc.cm){var l=this.doc.cm.curOp;(!l.maybeHiddenMarkers||Bt(l.maybeHiddenMarkers,this)==-1)&&(l.maybeUnhiddenMarkers||(l.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(o)},za.prototype.detachLine=function(o){if(this.lines.splice(Bt(this.lines,o),1),!this.lines.length&&this.doc.cm){var l=this.doc.cm.curOp;(l.maybeHiddenMarkers||(l.maybeHiddenMarkers=[])).push(this)}},ki(za);function lu(o,l,f,d,h){if(d&&d.shared)return e3(o,l,f,d,h);if(o.cm&&!o.cm.curOp)return We(o.cm,lu)(o,l,f,d,h);var b=new za(o,h),S=at(l,f);if(d&&Ze(d,b,!1),S>0||S==0&&b.clearWhenEmpty!==!1)return b;if(b.replacedWith&&(b.collapsed=!0,b.widgetNode=Ae("span",[b.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||b.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(b.widgetNode.insertLeft=!0)),b.collapsed){if(Eh(o,l.line,l,f,b)||l.line!=f.line&&Eh(o,f.line,l,f,b))throw new Error("Inserting collapsed marker partially overlapping an existing one");$c()}b.addToHistory&&sS(o,{from:l,to:f,origin:"markText"},o.sel,NaN);var T=l.line,M=o.cm,P;if(o.iter(T,f.line+1,function(Z){M&&b.collapsed&&!M.options.lineWrapping&&kn(Z)==M.display.maxLine&&(P=!0),b.collapsed&&T!=l.line&&fr(Z,0),bl(Z,new us(b,T==l.line?l.ch:null,T==f.line?f.ch:null),o.cm&&o.cm.curOp),++T}),b.collapsed&&o.iter(l.line,f.line+1,function(Z){jr(o,Z)&&fr(Z,0)}),b.clearOnEnter&&Tt(b,"beforeCursorEnter",function(){return b.clear()}),b.readOnly&&(Ch(),(o.history.done.length||o.history.undone.length)&&o.clearHistory()),b.collapsed&&(b.id=++ES,b.atomic=!0),M){if(P&&(M.curOp.updateMaxLine=!0),b.collapsed)Gi(M,l.line,f.line+1);else if(b.className||b.startStyle||b.endStyle||b.css||b.attributes||b.title)for(var K=l.line;K<=f.line;K++)vs(M,K,"text");b.atomic&&pS(M.doc),On(M,"markerAdded",M,b)}return b}var hf=function(o,l){this.markers=o,this.primary=l;for(var f=0;f<o.length;++f)o[f].parent=this};hf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var o=0;o<this.markers.length;++o)this.markers[o].clear();On(this,"clear")}},hf.prototype.find=function(o,l){return this.primary.find(o,l)},ki(hf);function e3(o,l,f,d,h){d=Ze(d),d.shared=!1;var b=[lu(o,l,f,d,h)],S=b[0],T=d.widgetNode;return Ua(o,function(M){T&&(d.widgetNode=T.cloneNode(!0)),b.push(lu(M,Et(M,l),Et(M,f),d,h));for(var P=0;P<M.linked.length;++P)if(M.linked[P].isParent)return;S=je(b)}),new hf(b,S)}function SS(o){return o.findMarks(_e(o.first,0),o.clipPos(_e(o.lastLine())),function(l){return l.parent})}function t3(o,l){for(var f=0;f<l.length;f++){var d=l[f],h=d.find(),b=o.clipPos(h.from),S=o.clipPos(h.to);if(at(b,S)){var T=lu(o,b,S,d.primary,d.primary.type);d.markers.push(T),T.parent=d}}}function n3(o){for(var l=function(d){var h=o[d],b=[h.primary.doc];Ua(h.primary.doc,function(M){return b.push(M)});for(var S=0;S<h.markers.length;S++){var T=h.markers[S];Bt(b,T.doc)==-1&&(T.parent=null,h.markers.splice(S--,1))}},f=0;f<o.length;f++)l(f)}var i3=0,pr=function(o,l,f,d,h){if(!(this instanceof pr))return new pr(o,l,f,d,h);f==null&&(f=0),ff.call(this,[new df([new zi("",null)])]),this.first=f,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=f;var b=_e(f,0);this.sel=Ba(b),this.history=new Uh(null),this.id=++i3,this.modeOption=l,this.lineSep=d,this.direction=h=="rtl"?"rtl":"ltr",this.extend=!1,typeof o=="string"&&(o=this.splitLines(o)),W_(this,{from:b,to:b,text:o}),$i(this,Ba(b),dn)};pr.prototype=nn(ff.prototype,{constructor:pr,iter:function(o,l,f){f?this.iterN(o-this.first,l-o,f):this.iterN(this.first,this.first+this.size,o)},insert:function(o,l){for(var f=0,d=0;d<l.length;++d)f+=l[d].height;this.insertInner(o-this.first,l,f)},remove:function(o,l){this.removeInner(o-this.first,l)},getValue:function(o){var l=ls(this,this.first,this.first+this.size);return o===!1?l:l.join(o||this.lineSeparator())},setValue:Ke(function(o){var l=_e(this.first,0),f=this.first+this.size-1;su(this,{from:l,to:_e(f,wt(this,f).text.length),text:this.splitLines(o),origin:"setValue",full:!0},!0),this.cm&&ql(this.cm,0,0),$i(this,Ba(l),dn)}),replaceRange:function(o,l,f,d){l=Et(this,l),f=f?Et(this,f):l,au(this,o,l,f,d)},getRange:function(o,l,f){var d=Ar(this,Et(this,o),Et(this,l));return f===!1?d:f===""?d.join(""):d.join(f||this.lineSeparator())},getLine:function(o){var l=this.getLineHandle(o);return l&&l.text},getLineHandle:function(o){if(Se(this,o))return wt(this,o)},getLineNumber:function(o){return O(o)},getLineHandleVisualStart:function(o){return typeof o=="number"&&(o=wt(this,o)),kn(o)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(o){return Et(this,o)},getCursor:function(o){var l=this.sel.primary(),f;return o==null||o=="head"?f=l.head:o=="anchor"?f=l.anchor:o=="end"||o=="to"||o===!1?f=l.to():f=l.from(),f},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ke(function(o,l,f){uS(this,Et(this,typeof o=="number"?_e(o,l||0):o),null,f)}),setSelection:Ke(function(o,l,f){uS(this,Et(this,o),Et(this,l||o),f)}),extendSelection:Ke(function(o,l,f){Gh(this,Et(this,o),l&&Et(this,l),f)}),extendSelections:Ke(function(o,l){cS(this,Md(this,o),l)}),extendSelectionsBy:Ke(function(o,l){var f=Qn(this.sel.ranges,o);cS(this,Md(this,f),l)}),setSelections:Ke(function(o,l,f){if(o.length){for(var d=[],h=0;h<o.length;h++)d[h]=new mn(Et(this,o[h].anchor),Et(this,o[h].head||o[h].anchor));l==null&&(l=Math.min(o.length-1,this.sel.primIndex)),$i(this,Bo(this.cm,d,l),f)}}),addSelection:Ke(function(o,l,f){var d=this.sel.ranges.slice(0);d.push(new mn(Et(this,o),Et(this,l||o))),$i(this,Bo(this.cm,d,d.length-1),f)}),getSelection:function(o){for(var l=this.sel.ranges,f,d=0;d<l.length;d++){var h=Ar(this,l[d].from(),l[d].to());f=f?f.concat(h):h}return o===!1?f:f.join(o||this.lineSeparator())},getSelections:function(o){for(var l=[],f=this.sel.ranges,d=0;d<f.length;d++){var h=Ar(this,f[d].from(),f[d].to());o!==!1&&(h=h.join(o||this.lineSeparator())),l[d]=h}return l},replaceSelection:function(o,l,f){for(var d=[],h=0;h<this.sel.ranges.length;h++)d[h]=o;this.replaceSelections(d,l,f||"+input")},replaceSelections:Ke(function(o,l,f){for(var d=[],h=this.sel,b=0;b<h.ranges.length;b++){var S=h.ranges[b];d[b]={from:S.from(),to:S.to(),text:this.splitLines(o[b]),origin:f}}for(var T=l&&l!="end"&&$P(this,d,l),M=d.length-1;M>=0;M--)su(this,d[M]);T?dS(this,T):this.cm&&Va(this.cm)}),undo:Ke(function(){Wh(this,"undo")}),redo:Ke(function(){Wh(this,"redo")}),undoSelection:Ke(function(){Wh(this,"undo",!0)}),redoSelection:Ke(function(){Wh(this,"redo",!0)}),setExtending:function(o){this.extend=o},getExtending:function(){return this.extend},historySize:function(){for(var o=this.history,l=0,f=0,d=0;d<o.done.length;d++)o.done[d].ranges||++l;for(var h=0;h<o.undone.length;h++)o.undone[h].ranges||++f;return{undo:l,redo:f}},clearHistory:function(){var o=this;this.history=new Uh(this.history),Ua(this,function(l){return l.history=o.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(o){return o&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(o){return this.history.generation==(o||this.cleanGeneration)},getHistory:function(){return{done:ru(this.history.done),undone:ru(this.history.undone)}},setHistory:function(o){var l=this.history=new Uh(this.history);l.done=ru(o.done.slice(0),null,!0),l.undone=ru(o.undone.slice(0),null,!0)},setGutterMarker:Ke(function(o,l,f){return uf(this,o,"gutter",function(d){var h=d.gutterMarkers||(d.gutterMarkers={});return h[l]=f,!f&&ba(h)&&(d.gutterMarkers=null),!0})}),clearGutter:Ke(function(o){var l=this;this.iter(function(f){f.gutterMarkers&&f.gutterMarkers[o]&&uf(l,f,"gutter",function(){return f.gutterMarkers[o]=null,ba(f.gutterMarkers)&&(f.gutterMarkers=null),!0})})}),lineInfo:function(o){var l;if(typeof o=="number"){if(!Se(this,o)||(l=o,o=wt(this,o),!o))return null}else if(l=O(o),l==null)return null;return{line:l,handle:o,text:o.text,gutterMarkers:o.gutterMarkers,textClass:o.textClass,bgClass:o.bgClass,wrapClass:o.wrapClass,widgets:o.widgets}},addLineClass:Ke(function(o,l,f){return uf(this,o,l=="gutter"?"gutter":"class",function(d){var h=l=="text"?"textClass":l=="background"?"bgClass":l=="gutter"?"gutterClass":"wrapClass";if(!d[h])d[h]=f;else{if(ge(f).test(d[h]))return!1;d[h]+=" "+f}return!0})}),removeLineClass:Ke(function(o,l,f){return uf(this,o,l=="gutter"?"gutter":"class",function(d){var h=l=="text"?"textClass":l=="background"?"bgClass":l=="gutter"?"gutterClass":"wrapClass",b=d[h];if(b)if(f==null)d[h]=null;else{var S=b.match(ge(f));if(!S)return!1;var T=S.index+S[0].length;d[h]=b.slice(0,S.index)+(!S.index||T==b.length?"":" ")+b.slice(T)||null}else return!1;return!0})}),addLineWidget:Ke(function(o,l,f){return ZP(this,o,l,f)}),removeLineWidget:function(o){o.clear()},markText:function(o,l,f){return lu(this,Et(this,o),Et(this,l),f,f&&f.type||"range")},setBookmark:function(o,l){var f={replacedWith:l&&(l.nodeType==null?l.widget:l),insertLeft:l&&l.insertLeft,clearWhenEmpty:!1,shared:l&&l.shared,handleMouseEvents:l&&l.handleMouseEvents};return o=Et(this,o),lu(this,o,o,f,"bookmark")},findMarksAt:function(o){o=Et(this,o);var l=[],f=wt(this,o.line).markedSpans;if(f)for(var d=0;d<f.length;++d){var h=f[d];(h.from==null||h.from<=o.ch)&&(h.to==null||h.to>=o.ch)&&l.push(h.marker.parent||h.marker)}return l},findMarks:function(o,l,f){o=Et(this,o),l=Et(this,l);var d=[],h=o.line;return this.iter(o.line,l.line+1,function(b){var S=b.markedSpans;if(S)for(var T=0;T<S.length;T++){var M=S[T];!(M.to!=null&&h==o.line&&o.ch>=M.to||M.from==null&&h!=o.line||M.from!=null&&h==l.line&&M.from>=l.ch)&&(!f||f(M.marker))&&d.push(M.marker.parent||M.marker)}++h}),d},getAllMarks:function(){var o=[];return this.iter(function(l){var f=l.markedSpans;if(f)for(var d=0;d<f.length;++d)f[d].from!=null&&o.push(f[d].marker)}),o},posFromIndex:function(o){var l,f=this.first,d=this.lineSeparator().length;return this.iter(function(h){var b=h.text.length+d;if(b>o)return l=o,!0;o-=b,++f}),Et(this,_e(f,l))},indexFromPos:function(o){o=Et(this,o);var l=o.ch;if(o.line<this.first||o.ch<0)return 0;var f=this.lineSeparator().length;return this.iter(this.first,o.line,function(d){l+=d.text.length+f}),l},copy:function(o){var l=new pr(ls(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return l.scrollTop=this.scrollTop,l.scrollLeft=this.scrollLeft,l.sel=this.sel,l.extend=!1,o&&(l.history.undoDepth=this.history.undoDepth,l.setHistory(this.getHistory())),l},linkedDoc:function(o){o||(o={});var l=this.first,f=this.first+this.size;o.from!=null&&o.from>l&&(l=o.from),o.to!=null&&o.to<f&&(f=o.to);var d=new pr(ls(this,l,f),o.mode||this.modeOption,l,this.lineSep,this.direction);return o.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:o.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:o.sharedHist}],t3(d,SS(this)),d},unlinkDoc:function(o){if(o instanceof Fn&&(o=o.doc),this.linked)for(var l=0;l<this.linked.length;++l){var f=this.linked[l];if(f.doc==o){this.linked.splice(l,1),o.unlinkDoc(this),n3(SS(this));break}}if(o.history==this.history){var d=[o.id];Ua(o,function(h){return d.push(h.id)},!0),o.history=new Uh(null),o.history.done=ru(this.history.done,d),o.history.undone=ru(this.history.undone,d)}},iterLinkedDocs:function(o){Ua(this,o)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(o){return this.lineSep?o.split(this.lineSep):ur(o)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ke(function(o){o!="rtl"&&(o="ltr"),o!=this.direction&&(this.direction=o,this.iter(function(l){return l.order=null}),this.cm&&qP(this.cm))})}),pr.prototype.eachLine=pr.prototype.iter;var DS=0;function r3(o){var l=this;if(TS(l),!(bn(l,o)||Lo(l.display,o))){Ln(o),a&&(DS=+new Date);var f=Gs(l,o,!0),d=o.dataTransfer.files;if(!(!f||l.isReadOnly()))if(d&&d.length&&window.FileReader&&window.File)for(var h=d.length,b=Array(h),S=0,T=function(){++S==h&&We(l,function(){f=Et(l.doc,f);var se={from:f,to:f,text:l.doc.splitLines(b.filter(function(we){return we!=null}).join(l.doc.lineSeparator())),origin:"paste"};su(l.doc,se),dS(l.doc,Ba(Et(l.doc,f),Et(l.doc,Ha(se))))})()},M=function(se,we){if(l.options.allowDropFileTypes&&Bt(l.options.allowDropFileTypes,se.type)==-1){T();return}var Re=new FileReader;Re.onerror=function(){return T()},Re.onload=function(){var qe=Re.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(qe)){T();return}b[we]=qe,T()},Re.readAsText(se)},P=0;P<d.length;P++)M(d[P],P);else{if(l.state.draggingText&&l.doc.sel.contains(f)>-1){l.state.draggingText(o),setTimeout(function(){return l.display.input.focus()},20);return}try{var K=o.dataTransfer.getData("Text");if(K){var Z;if(l.state.draggingText&&!l.state.draggingText.copy&&(Z=l.listSelections()),$h(l.doc,Ba(f,f)),Z)for(var ue=0;ue<Z.length;++ue)au(l.doc,"",Z[ue].anchor,Z[ue].head,"drag");l.replaceSelection(K,"around","paste"),l.display.input.focus()}}catch{}}}}function o3(o,l){if(a&&(!o.state.draggingText||+new Date-DS<100)){Dr(l);return}if(!(bn(o,l)||Lo(o.display,l))&&(l.dataTransfer.setData("Text",o.getSelection()),l.dataTransfer.effectAllowed="copyMove",l.dataTransfer.setDragImage&&!E)){var f=H("img",null,null,"position: fixed; left: 0; top: 0;");f.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",x&&(f.width=f.height=1,o.display.wrapper.appendChild(f),f._top=f.offsetTop),l.dataTransfer.setDragImage(f,0,0),x&&f.parentNode.removeChild(f)}}function s3(o,l){var f=Gs(o,l);if(f){var d=document.createDocumentFragment();tf(o,f,d),o.display.dragCursor||(o.display.dragCursor=H("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),o.display.lineSpace.insertBefore(o.display.dragCursor,o.display.cursorDiv)),le(o.display.dragCursor,d)}}function TS(o){o.display.dragCursor&&(o.display.lineSpace.removeChild(o.display.dragCursor),o.display.dragCursor=null)}function IS(o){if(document.getElementsByClassName){for(var l=document.getElementsByClassName("CodeMirror"),f=[],d=0;d<l.length;d++){var h=l[d].CodeMirror;h&&f.push(h)}f.length&&f[0].operation(function(){for(var b=0;b<f.length;b++)o(f[b])})}}var AS=!1;function a3(){AS||(l3(),AS=!0)}function l3(){var o;Tt(window,"resize",function(){o==null&&(o=setTimeout(function(){o=null,IS(c3)},100))}),Tt(window,"blur",function(){return IS(Oa)})}function c3(o){var l=o.display;l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.scrollbarsClipped=!1,o.setSize()}for(var Ga={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},mf=0;mf<10;mf++)Ga[mf+48]=Ga[mf+96]=String(mf);for(var jh=65;jh<=90;jh++)Ga[jh]=String.fromCharCode(jh);for(var gf=1;gf<=12;gf++)Ga[gf+111]=Ga[gf+63235]="F"+gf;var js={};js.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},js.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},js.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},js.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},js.default=$?js.macDefault:js.pcDefault;function u3(o){var l=o.split(/-(?!$)/);o=l[l.length-1];for(var f,d,h,b,S=0;S<l.length-1;S++){var T=l[S];if(/^(cmd|meta|m)$/i.test(T))b=!0;else if(/^a(lt)?$/i.test(T))f=!0;else if(/^(c|ctrl|control)$/i.test(T))d=!0;else if(/^s(hift)?$/i.test(T))h=!0;else throw new Error("Unrecognized modifier name: "+T)}return f&&(o="Alt-"+o),d&&(o="Ctrl-"+o),b&&(o="Cmd-"+o),h&&(o="Shift-"+o),o}function d3(o){var l={};for(var f in o)if(o.hasOwnProperty(f)){var d=o[f];if(/^(name|fallthrough|(de|at)tach)$/.test(f))continue;if(d=="..."){delete o[f];continue}for(var h=Qn(f.split(" "),u3),b=0;b<h.length;b++){var S=void 0,T=void 0;b==h.length-1?(T=h.join(" "),S=d):(T=h.slice(0,b+1).join(" "),S="...");var M=l[T];if(!M)l[T]=S;else if(M!=S)throw new Error("Inconsistent bindings for "+T)}delete o[f]}for(var P in l)o[P]=l[P];return o}function cu(o,l,f,d){l=Kh(l);var h=l.call?l.call(o,d):l[o];if(h===!1)return"nothing";if(h==="...")return"multi";if(h!=null&&f(h))return"handled";if(l.fallthrough){if(Object.prototype.toString.call(l.fallthrough)!="[object Array]")return cu(o,l.fallthrough,f,d);for(var b=0;b<l.fallthrough.length;b++){var S=cu(o,l.fallthrough[b],f,d);if(S)return S}}}function MS(o){var l=typeof o=="string"?o:Ga[o.keyCode];return l=="Ctrl"||l=="Alt"||l=="Shift"||l=="Mod"}function kS(o,l,f){var d=o;return l.altKey&&d!="Alt"&&(o="Alt-"+o),(me?l.metaKey:l.ctrlKey)&&d!="Ctrl"&&(o="Ctrl-"+o),(me?l.ctrlKey:l.metaKey)&&d!="Mod"&&(o="Cmd-"+o),!f&&l.shiftKey&&d!="Shift"&&(o="Shift-"+o),o}function NS(o,l){if(x&&o.keyCode==34&&o.char)return!1;var f=Ga[o.keyCode];return f==null||o.altGraphKey?!1:(o.keyCode==3&&o.code&&(f=o.code),kS(f,o,l))}function Kh(o){return typeof o=="string"?js[o]:o}function uu(o,l){for(var f=o.doc.sel.ranges,d=[],h=0;h<f.length;h++){for(var b=l(f[h]);d.length&&at(b.from,je(d).to)<=0;){var S=d.pop();if(at(S.from,b.from)<0){b.from=S.from;break}}d.push(b)}Me(o,function(){for(var T=d.length-1;T>=0;T--)au(o.doc,"",d[T].from,d[T].to,"+delete");Va(o)})}function J_(o,l,f){var d=Vi(o.text,l+f,f);return d<0||d>o.text.length?null:d}function Q_(o,l,f){var d=J_(o,l.ch,f);return d==null?null:new _e(l.line,d,f<0?"after":"before")}function X_(o,l,f,d,h){if(o){l.doc.direction=="rtl"&&(h=-h);var b=$t(f,l.doc.direction);if(b){var S=h<0?je(b):b[0],T=h<0==(S.level==1),M=T?"after":"before",P;if(S.level>0||l.doc.direction=="rtl"){var K=ps(l,f);P=h<0?f.text.length-1:0;var Z=kr(l,K,P).top;P=di(function(ue){return kr(l,K,ue).top==Z},h<0==(S.level==1)?S.from:S.to-1,P),M=="before"&&(P=J_(f,P,1))}else P=h<0?S.to:S.from;return new _e(d,P,M)}}return new _e(d,h<0?f.text.length:0,h<0?"before":"after")}function f3(o,l,f,d){var h=$t(l,o.doc.direction);if(!h)return Q_(l,f,d);f.ch>=l.text.length?(f.ch=l.text.length,f.sticky="before"):f.ch<=0&&(f.ch=0,f.sticky="after");var b=Bi(h,f.ch,f.sticky),S=h[b];if(o.doc.direction=="ltr"&&S.level%2==0&&(d>0?S.to>f.ch:S.from<f.ch))return Q_(l,f,d);var T=function(it,dt){return J_(l,it instanceof _e?it.ch:it,dt)},M,P=function(it){return o.options.lineWrapping?(M=M||ps(o,l),Hl(o,l,M,it)):{begin:0,end:l.text.length}},K=P(f.sticky=="before"?T(f,-1):f.ch);if(o.doc.direction=="rtl"||S.level==1){var Z=S.level==1==d<0,ue=T(f,Z?1:-1);if(ue!=null&&(Z?ue<=S.to&&ue<=K.end:ue>=S.from&&ue>=K.begin)){var se=Z?"before":"after";return new _e(f.line,ue,se)}}var we=function(it,dt,rt){for(var vt=function(En,xi){return xi?new _e(f.line,T(En,1),"before"):new _e(f.line,En,"after")};it>=0&&it<h.length;it+=dt){var Rt=h[it],At=dt>0==(Rt.level!=1),Yt=At?rt.begin:T(rt.end,-1);if(Rt.from<=Yt&&Yt<Rt.to||(Yt=At?Rt.from:T(Rt.to,-1),rt.begin<=Yt&&Yt<rt.end))return vt(Yt,At)}},Re=we(b+d,d,K);if(Re)return Re;var qe=d>0?K.end:T(K.begin,-1);return qe!=null&&!(d>0&&qe==l.text.length)&&(Re=we(d>0?0:h.length-1,d,P(qe)),Re)?Re:null}var vf={selectAll:gS,singleSelection:function(o){return o.setSelection(o.getCursor("anchor"),o.getCursor("head"),dn)},killLine:function(o){return uu(o,function(l){if(l.empty()){var f=wt(o.doc,l.head.line).text.length;return l.head.ch==f&&l.head.line<o.lastLine()?{from:l.head,to:_e(l.head.line+1,0)}:{from:l.head,to:_e(l.head.line,f)}}else return{from:l.from(),to:l.to()}})},deleteLine:function(o){return uu(o,function(l){return{from:_e(l.from().line,0),to:Et(o.doc,_e(l.to().line+1,0))}})},delLineLeft:function(o){return uu(o,function(l){return{from:_e(l.from().line,0),to:l.from()}})},delWrappedLineLeft:function(o){return uu(o,function(l){var f=o.charCoords(l.head,"div").top+5,d=o.coordsChar({left:0,top:f},"div");return{from:d,to:l.from()}})},delWrappedLineRight:function(o){return uu(o,function(l){var f=o.charCoords(l.head,"div").top+5,d=o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:f},"div");return{from:l.from(),to:d}})},undo:function(o){return o.undo()},redo:function(o){return o.redo()},undoSelection:function(o){return o.undoSelection()},redoSelection:function(o){return o.redoSelection()},goDocStart:function(o){return o.extendSelection(_e(o.firstLine(),0))},goDocEnd:function(o){return o.extendSelection(_e(o.lastLine()))},goLineStart:function(o){return o.extendSelectionsBy(function(l){return FS(o,l.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(o){return o.extendSelectionsBy(function(l){return RS(o,l.head)},{origin:"+move",bias:1})},goLineEnd:function(o){return o.extendSelectionsBy(function(l){return p3(o,l.head.line)},{origin:"+move",bias:-1})},goLineRight:function(o){return o.extendSelectionsBy(function(l){var f=o.cursorCoords(l.head,"div").top+5;return o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:f},"div")},Pn)},goLineLeft:function(o){return o.extendSelectionsBy(function(l){var f=o.cursorCoords(l.head,"div").top+5;return o.coordsChar({left:0,top:f},"div")},Pn)},goLineLeftSmart:function(o){return o.extendSelectionsBy(function(l){var f=o.cursorCoords(l.head,"div").top+5,d=o.coordsChar({left:0,top:f},"div");return d.ch<o.getLine(d.line).search(/\S/)?RS(o,l.head):d},Pn)},goLineUp:function(o){return o.moveV(-1,"line")},goLineDown:function(o){return o.moveV(1,"line")},goPageUp:function(o){return o.moveV(-1,"page")},goPageDown:function(o){return o.moveV(1,"page")},goCharLeft:function(o){return o.moveH(-1,"char")},goCharRight:function(o){return o.moveH(1,"char")},goColumnLeft:function(o){return o.moveH(-1,"column")},goColumnRight:function(o){return o.moveH(1,"column")},goWordLeft:function(o){return o.moveH(-1,"word")},goGroupRight:function(o){return o.moveH(1,"group")},goGroupLeft:function(o){return o.moveH(-1,"group")},goWordRight:function(o){return o.moveH(1,"word")},delCharBefore:function(o){return o.deleteH(-1,"codepoint")},delCharAfter:function(o){return o.deleteH(1,"char")},delWordBefore:function(o){return o.deleteH(-1,"word")},delWordAfter:function(o){return o.deleteH(1,"word")},delGroupBefore:function(o){return o.deleteH(-1,"group")},delGroupAfter:function(o){return o.deleteH(1,"group")},indentAuto:function(o){return o.indentSelection("smart")},indentMore:function(o){return o.indentSelection("add")},indentLess:function(o){return o.indentSelection("subtract")},insertTab:function(o){return o.replaceSelection("	")},insertSoftTab:function(o){for(var l=[],f=o.listSelections(),d=o.options.tabSize,h=0;h<f.length;h++){var b=f[h].from(),S=Qt(o.getLine(b.line),b.ch,d);l.push(Fo(d-S%d))}o.replaceSelections(l)},defaultTab:function(o){o.somethingSelected()?o.indentSelection("add"):o.execCommand("insertTab")},transposeChars:function(o){return Me(o,function(){for(var l=o.listSelections(),f=[],d=0;d<l.length;d++)if(l[d].empty()){var h=l[d].head,b=wt(o.doc,h.line).text;if(b){if(h.ch==b.length&&(h=new _e(h.line,h.ch-1)),h.ch>0)h=new _e(h.line,h.ch+1),o.replaceRange(b.charAt(h.ch-1)+b.charAt(h.ch-2),_e(h.line,h.ch-2),h,"+transpose");else if(h.line>o.doc.first){var S=wt(o.doc,h.line-1).text;S&&(h=new _e(h.line,1),o.replaceRange(b.charAt(0)+o.doc.lineSeparator()+S.charAt(S.length-1),_e(h.line-1,S.length-1),h,"+transpose"))}}f.push(new mn(h,h))}o.setSelections(f)})},newlineAndIndent:function(o){return Me(o,function(){for(var l=o.listSelections(),f=l.length-1;f>=0;f--)o.replaceRange(o.doc.lineSeparator(),l[f].anchor,l[f].head,"+input");l=o.listSelections();for(var d=0;d<l.length;d++)o.indentLine(l[d].from().line,null,!0);Va(o)})},openLine:function(o){return o.replaceSelection(`
`,"start")},toggleOverwrite:function(o){return o.toggleOverwrite()}};function FS(o,l){var f=wt(o.doc,l),d=kn(f);return d!=f&&(l=O(d)),X_(!0,o,d,l,1)}function p3(o,l){var f=wt(o.doc,l),d=Ma(f);return d!=f&&(l=O(d)),X_(!0,o,f,l,-1)}function RS(o,l){var f=FS(o,l.line),d=wt(o.doc,f.line),h=$t(d,o.doc.direction);if(!h||h[0].level==0){var b=Math.max(f.ch,d.text.search(/\S/)),S=l.line==f.line&&l.ch<=b&&l.ch;return _e(f.line,S?0:b,f.sticky)}return f}function Yh(o,l,f){if(typeof l=="string"&&(l=vf[l],!l))return!1;o.display.input.ensurePolled();var d=o.display.shift,h=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),f&&(o.display.shift=!1),h=l(o)!=Yn}finally{o.display.shift=d,o.state.suppressEdits=!1}return h}function h3(o,l,f){for(var d=0;d<o.state.keyMaps.length;d++){var h=cu(l,o.state.keyMaps[d],f,o);if(h)return h}return o.options.extraKeys&&cu(l,o.options.extraKeys,f,o)||cu(l,o.options.keyMap,f,o)}var m3=new yi;function yf(o,l,f,d){var h=o.state.keySeq;if(h){if(MS(l))return"handled";if(/\'$/.test(l)?o.state.keySeq=null:m3.set(50,function(){o.state.keySeq==h&&(o.state.keySeq=null,o.display.input.reset())}),PS(o,h+" "+l,f,d))return!0}return PS(o,l,f,d)}function PS(o,l,f,d){var h=h3(o,l,d);return h=="multi"&&(o.state.keySeq=l),h=="handled"&&On(o,"keyHandled",o,l,f),(h=="handled"||h=="multi")&&(Ln(f),nf(o)),!!h}function LS(o,l){var f=NS(l,!0);return f?l.shiftKey&&!o.state.keySeq?yf(o,"Shift-"+f,l,function(d){return Yh(o,d,!0)})||yf(o,f,l,function(d){if(typeof d=="string"?/^go[A-Z]/.test(d):d.motion)return Yh(o,d)}):yf(o,f,l,function(d){return Yh(o,d)}):!1}function g3(o,l,f){return yf(o,"'"+f+"'",l,function(d){return Yh(o,d,!0)})}var Z_=null;function OS(o){var l=this;if(!(o.target&&o.target!=l.display.input.getField())&&(l.curOp.focus=pt(Le(l)),!bn(l,o))){a&&c<11&&o.keyCode==27&&(o.returnValue=!1);var f=o.keyCode;l.display.shift=f==16||o.shiftKey;var d=LS(l,o);x&&(Z_=d?f:null,!d&&f==88&&!Ea&&($?o.metaKey:o.ctrlKey)&&l.replaceSelection("",null,"cut")),n&&!$&&!d&&f==46&&o.shiftKey&&!o.ctrlKey&&document.execCommand&&document.execCommand("cut"),f==18&&!/\bCodeMirror-crosshair\b/.test(l.display.lineDiv.className)&&v3(l)}}function v3(o){var l=o.display.lineDiv;_t(l,"CodeMirror-crosshair");function f(d){(d.keyCode==18||!d.altKey)&&(Te(l,"CodeMirror-crosshair"),si(document,"keyup",f),si(document,"mouseover",f))}Tt(document,"keyup",f),Tt(document,"mouseover",f)}function VS(o){o.keyCode==16&&(this.doc.sel.shift=!1),bn(this,o)}function BS(o){var l=this;if(!(o.target&&o.target!=l.display.input.getField())&&!(Lo(l.display,o)||bn(l,o)||o.ctrlKey&&!o.altKey||$&&o.metaKey)){var f=o.keyCode,d=o.charCode;if(x&&f==Z_){Z_=null,Ln(o);return}if(!(x&&(!o.which||o.which<10)&&LS(l,o))){var h=String.fromCharCode(d??f);h!="\b"&&(g3(l,o,h)||l.display.input.onKeyPress(o))}}}var y3=400,eC=function(o,l,f){this.time=o,this.pos=l,this.button=f};eC.prototype.compare=function(o,l,f){return this.time+y3>o&&at(l,this.pos)==0&&f==this.button};var _f,Cf;function _3(o,l){var f=+new Date;return Cf&&Cf.compare(f,o,l)?(_f=Cf=null,"triple"):_f&&_f.compare(f,o,l)?(Cf=new eC(f,o,l),_f=null,"double"):(_f=new eC(f,o,l),Cf=null,"single")}function HS(o){var l=this,f=l.display;if(!(bn(l,o)||f.activeTouch&&f.input.supportsTouch())){if(f.input.ensurePolled(),f.shift=o.shiftKey,Lo(f,o)){u||(f.scroller.draggable=!1,setTimeout(function(){return f.scroller.draggable=!0},100));return}if(!tC(l,o)){var d=Gs(l,o),h=st(o),b=d?_3(d,h):"single";lt(l).focus(),h==1&&l.state.selectingText&&l.state.selectingText(o),!(d&&C3(l,h,d,b,o))&&(h==1?d?b3(l,d,b,o):Hi(o)==f.scroller&&Ln(o):h==2?(d&&Gh(l.doc,d),setTimeout(function(){return f.input.focus()},20)):h==3&&(ye?l.display.input.onContextMenu(o):Kr(l)))}}}function C3(o,l,f,d,h){var b="Click";return d=="double"?b="Double"+b:d=="triple"&&(b="Triple"+b),b=(l==1?"Left":l==2?"Middle":"Right")+b,yf(o,kS(b,h),h,function(S){if(typeof S=="string"&&(S=vf[S]),!S)return!1;var T=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),T=S(o,f)!=Yn}finally{o.state.suppressEdits=!1}return T})}function x3(o,l,f){var d=o.getOption("configureMouse"),h=d?d(o,l,f):{};if(h.unit==null){var b=q?f.shiftKey&&f.metaKey:f.altKey;h.unit=b?"rectangle":l=="single"?"char":l=="double"?"word":"line"}return(h.extend==null||o.doc.extend)&&(h.extend=o.doc.extend||f.shiftKey),h.addNew==null&&(h.addNew=$?f.metaKey:f.ctrlKey),h.moveOnDrag==null&&(h.moveOnDrag=!($?f.altKey:f.ctrlKey)),h}function b3(o,l,f,d){a?setTimeout(Ct(Gl,o),0):o.curOp.focus=pt(Le(o));var h=x3(o,f,d),b=o.doc.sel,S;o.options.dragDrop&&Ni&&!o.isReadOnly()&&f=="single"&&(S=b.contains(l))>-1&&(at((S=b.ranges[S]).from(),l)<0||l.xRel>0)&&(at(S.to(),l)>0||l.xRel<0)?w3(o,d,l,h):E3(o,d,l,h)}function w3(o,l,f,d){var h=o.display,b=!1,S=We(o,function(P){u&&(h.scroller.draggable=!1),o.state.draggingText=!1,o.state.delayingBlurEvent&&(o.hasFocus()?o.state.delayingBlurEvent=!1:Kr(o)),si(h.wrapper.ownerDocument,"mouseup",S),si(h.wrapper.ownerDocument,"mousemove",T),si(h.scroller,"dragstart",M),si(h.scroller,"drop",S),b||(Ln(P),d.addNew||Gh(o.doc,f,null,null,d.extend),u&&!E||a&&c==9?setTimeout(function(){h.wrapper.ownerDocument.body.focus({preventScroll:!0}),h.input.focus()},20):h.input.focus())}),T=function(P){b=b||Math.abs(l.clientX-P.clientX)+Math.abs(l.clientY-P.clientY)>=10},M=function(){return b=!0};u&&(h.scroller.draggable=!0),o.state.draggingText=S,S.copy=!d.moveOnDrag,Tt(h.wrapper.ownerDocument,"mouseup",S),Tt(h.wrapper.ownerDocument,"mousemove",T),Tt(h.scroller,"dragstart",M),Tt(h.scroller,"drop",S),o.state.delayingBlurEvent=!0,setTimeout(function(){return h.input.focus()},20),h.scroller.dragDrop&&h.scroller.dragDrop()}function US(o,l,f){if(f=="char")return new mn(l,l);if(f=="word")return o.findWordAt(l);if(f=="line")return new mn(_e(l.line,0),Et(o.doc,_e(l.line+1,0)));var d=f(o,l);return new mn(d.from,d.to)}function E3(o,l,f,d){a&&Kr(o);var h=o.display,b=o.doc;Ln(l);var S,T,M=b.sel,P=M.ranges;if(d.addNew&&!d.extend?(T=b.sel.contains(f),T>-1?S=P[T]:S=new mn(f,f)):(S=b.sel.primary(),T=b.sel.primIndex),d.unit=="rectangle")d.addNew||(S=new mn(f,f)),f=Gs(o,l,!0,!0),T=-1;else{var K=US(o,f,d.unit);d.extend?S=K_(S,K.anchor,K.head,d.extend):S=K}d.addNew?T==-1?(T=P.length,$i(b,Bo(o,P.concat([S]),T),{scroll:!1,origin:"*mouse"})):P.length>1&&P[T].empty()&&d.unit=="char"&&!d.extend?($i(b,Bo(o,P.slice(0,T).concat(P.slice(T+1)),0),{scroll:!1,origin:"*mouse"}),M=b.sel):Y_(b,T,S,Ii):(T=0,$i(b,new Jr([S],0),Ii),M=b.sel);var Z=f;function ue(rt){if(at(Z,rt)!=0)if(Z=rt,d.unit=="rectangle"){for(var vt=[],Rt=o.options.tabSize,At=Qt(wt(b,f.line).text,f.ch,Rt),Yt=Qt(wt(b,rt.line).text,rt.ch,Rt),En=Math.min(At,Yt),xi=Math.max(At,Yt),Vn=Math.min(f.line,rt.line),Rr=Math.min(o.lastLine(),Math.max(f.line,rt.line));Vn<=Rr;Vn++){var hr=wt(b,Vn).text,ai=Jn(hr,En,Rt);En==xi?vt.push(new mn(_e(Vn,ai),_e(Vn,ai))):hr.length>ai&&vt.push(new mn(_e(Vn,ai),_e(Vn,Jn(hr,xi,Rt))))}vt.length||vt.push(new mn(f,f)),$i(b,Bo(o,M.ranges.slice(0,T).concat(vt),T),{origin:"*mouse",scroll:!1}),o.scrollIntoView(rt)}else{var mr=S,Pi=US(o,rt,d.unit),pi=mr.anchor,li;at(Pi.anchor,pi)>0?(li=Pi.head,pi=Vs(mr.from(),Pi.anchor)):(li=Pi.anchor,pi=$n(mr.to(),Pi.head));var qn=M.ranges.slice(0);qn[T]=S3(o,new mn(Et(b,pi),li)),$i(b,Bo(o,qn,T),Ii)}}var se=h.wrapper.getBoundingClientRect(),we=0;function Re(rt){var vt=++we,Rt=Gs(o,rt,!0,d.unit=="rectangle");if(Rt)if(at(Rt,Z)!=0){o.curOp.focus=pt(Le(o)),ue(Rt);var At=mo(h,b);(Rt.line>=At.to||Rt.line<At.from)&&setTimeout(We(o,function(){we==vt&&Re(rt)}),150)}else{var Yt=rt.clientY<se.top?-20:rt.clientY>se.bottom?20:0;Yt&&setTimeout(We(o,function(){we==vt&&(h.scroller.scrollTop+=Yt,Re(rt))}),50)}}function qe(rt){o.state.selectingText=!1,we=1/0,rt&&(Ln(rt),h.input.focus()),si(h.wrapper.ownerDocument,"mousemove",it),si(h.wrapper.ownerDocument,"mouseup",dt),b.history.lastSelOrigin=null}var it=We(o,function(rt){rt.buttons===0||!st(rt)?qe(rt):Re(rt)}),dt=We(o,qe);o.state.selectingText=dt,Tt(h.wrapper.ownerDocument,"mousemove",it),Tt(h.wrapper.ownerDocument,"mouseup",dt)}function S3(o,l){var f=l.anchor,d=l.head,h=wt(o.doc,f.line);if(at(f,d)==0&&f.sticky==d.sticky)return l;var b=$t(h);if(!b)return l;var S=Bi(b,f.ch,f.sticky),T=b[S];if(T.from!=f.ch&&T.to!=f.ch)return l;var M=S+(T.from==f.ch==(T.level!=1)?0:1);if(M==0||M==b.length)return l;var P;if(d.line!=f.line)P=(d.line-f.line)*(o.doc.direction=="ltr"?1:-1)>0;else{var K=Bi(b,d.ch,d.sticky),Z=K-S||(d.ch-f.ch)*(T.level==1?-1:1);K==M-1||K==M?P=Z<0:P=Z>0}var ue=b[M+(P?-1:0)],se=P==(ue.level==1),we=se?ue.from:ue.to,Re=se?"after":"before";return f.ch==we&&f.sticky==Re?l:new mn(new _e(f.line,we,Re),d)}function zS(o,l,f,d){var h,b;if(l.touches)h=l.touches[0].clientX,b=l.touches[0].clientY;else try{h=l.clientX,b=l.clientY}catch{return!1}if(h>=Math.floor(o.display.gutters.getBoundingClientRect().right))return!1;d&&Ln(l);var S=o.display,T=S.lineDiv.getBoundingClientRect();if(b>T.bottom||!Xn(o,f))return Gn(l);b-=T.top-S.viewOffset;for(var M=0;M<o.display.gutterSpecs.length;++M){var P=S.gutters.childNodes[M];if(P&&P.getBoundingClientRect().right>=h){var K=Q(o.doc,b),Z=o.display.gutterSpecs[M];return fn(o,f,o,K,Z.className,l),Gn(l)}}}function tC(o,l){return zS(o,l,"gutterClick",!0)}function GS(o,l){Lo(o.display,l)||D3(o,l)||bn(o,l,"contextmenu")||ye||o.display.input.onContextMenu(l)}function D3(o,l){return Xn(o,"gutterContextMenu")?zS(o,l,"gutterContextMenu",!1):!1}function $S(o){o.display.wrapper.className=o.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+o.options.theme.replace(/(^|\s)\s*/g," cm-s-"),hs(o)}var du={toString:function(){return"CodeMirror.Init"}},qS={},Jh={};function T3(o){var l=o.optionHandlers;function f(d,h,b,S){o.defaults[d]=h,b&&(l[d]=S?function(T,M,P){P!=du&&b(T,M,P)}:b)}o.defineOption=f,o.Init=du,f("value","",function(d,h){return d.setValue(h)},!0),f("mode",null,function(d,h){d.doc.modeOption=h,q_(d)},!0),f("indentUnit",2,q_,!0),f("indentWithTabs",!1),f("smartIndent",!0),f("tabSize",4,function(d){lf(d),hs(d),Gi(d)},!0),f("lineSeparator",null,function(d,h){if(d.doc.lineSep=h,!!h){var b=[],S=d.doc.first;d.doc.iter(function(M){for(var P=0;;){var K=M.text.indexOf(h,P);if(K==-1)break;P=K+h.length,b.push(_e(S,K))}S++});for(var T=b.length-1;T>=0;T--)au(d.doc,h,b[T],_e(b[T].line,b[T].ch+h.length))}}),f("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(d,h,b){d.state.specialChars=new RegExp(h.source+(h.test("	")?"":"|	"),"g"),b!=du&&d.refresh()}),f("specialCharPlaceholder",Bd,function(d){return d.refresh()},!0),f("electricChars",!0),f("inputStyle",B?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),f("spellcheck",!1,function(d,h){return d.getInputField().spellcheck=h},!0),f("autocorrect",!1,function(d,h){return d.getInputField().autocorrect=h},!0),f("autocapitalize",!1,function(d,h){return d.getInputField().autocapitalize=h},!0),f("rtlMoveVisually",!X),f("wholeLineUpdateBefore",!0),f("theme","default",function(d){$S(d),Cs(d)},!0),f("keyMap","default",function(d,h,b){var S=Kh(h),T=b!=du&&Kh(b);T&&T.detach&&T.detach(d,S),S.attach&&S.attach(d,T||null)}),f("extraKeys",null),f("configureMouse",null),f("lineWrapping",!1,A3,!0),f("gutters",[],function(d,h){d.display.gutterSpecs=qs(h,d.options.lineNumbers),Cs(d)},!0),f("fixedGutter",!0,function(d,h){d.display.gutters.style.left=h?nu(d.display)+"px":"0",d.refresh()},!0),f("coverGutterNextToScrollbar",!1,function(d){return J(d)},!0),f("scrollbarStyle","native",function(d){ae(d),J(d),d.display.scrollbars.setScrollTop(d.doc.scrollTop),d.display.scrollbars.setScrollLeft(d.doc.scrollLeft)},!0),f("lineNumbers",!1,function(d,h){d.display.gutterSpecs=qs(d.options.gutters,h),Cs(d)},!0),f("firstLineNumber",1,Cs,!0),f("lineNumberFormatter",function(d){return d},Cs,!0),f("showCursorWhenSelecting",!1,zl,!0),f("resetSelectionOnContextMenu",!0),f("lineWiseCopyCut",!0),f("pasteLinesPerSelection",!0),f("selectionsMayTouch",!1),f("readOnly",!1,function(d,h){h=="nocursor"&&(Oa(d),d.display.input.blur()),d.display.input.readOnlyChanged(h)}),f("screenReaderLabel",null,function(d,h){h=h===""?null:h,d.display.input.screenReaderLabelChanged(h)}),f("disableInput",!1,function(d,h){h||d.display.input.reset()},!0),f("dragDrop",!0,I3),f("allowDropFileTypes",null),f("cursorBlinkRate",530),f("cursorScrollMargin",0),f("cursorHeight",1,zl,!0),f("singleCursorHeightPerLine",!0,zl,!0),f("workTime",100),f("workDelay",100),f("flattenSpans",!0,lf,!0),f("addModeClass",!1,lf,!0),f("pollInterval",100),f("undoDepth",200,function(d,h){return d.doc.history.undoDepth=h}),f("historyEventDelay",1250),f("viewportMargin",10,function(d){return d.refresh()},!0),f("maxHighlightLength",1e4,lf,!0),f("moveInputWithCursor",!0,function(d,h){h||d.display.input.resetPosition()}),f("tabindex",null,function(d,h){return d.display.input.getField().tabIndex=h||""}),f("autofocus",null),f("direction","ltr",function(d,h){return d.doc.setDirection(h)},!0),f("phrases",null)}function I3(o,l,f){var d=f&&f!=du;if(!l!=!d){var h=o.display.dragFunctions,b=l?Tt:si;b(o.display.scroller,"dragstart",h.start),b(o.display.scroller,"dragenter",h.enter),b(o.display.scroller,"dragover",h.over),b(o.display.scroller,"dragleave",h.leave),b(o.display.scroller,"drop",h.drop)}}function A3(o){o.options.lineWrapping?(_t(o.display.wrapper,"CodeMirror-wrap"),o.display.sizer.style.minWidth="",o.display.sizerWidth=null):(Te(o.display.wrapper,"CodeMirror-wrap"),Od(o)),ef(o),Gi(o),hs(o),setTimeout(function(){return J(o)},100)}function Fn(o,l){var f=this;if(!(this instanceof Fn))return new Fn(o,l);this.options=l=l?Ze(l):{},Ze(qS,l,!1);var d=l.value;typeof d=="string"?d=new pr(d,l.mode,null,l.lineSeparator,l.direction):l.mode&&(d.modeOption=l.mode),this.doc=d;var h=new Fn.inputStyles[l.inputStyle](this),b=this.display=new G_(o,d,h,l);b.wrapper.CodeMirror=this,$S(this),l.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ae(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new yi,keySeq:null,specialChars:null},l.autofocus&&!B&&b.input.focus(),a&&c<11&&setTimeout(function(){return f.display.input.reset(!0)},20),M3(this),a3(),$e(this),this.curOp.forceUpdate=!0,iS(this,d),l.autofocus&&!B||this.hasFocus()?setTimeout(function(){f.hasFocus()&&!f.state.focused&&rf(f)},20):Oa(this);for(var S in Jh)Jh.hasOwnProperty(S)&&Jh[S](this,l[S],du);Yr(this),l.finishInit&&l.finishInit(this);for(var T=0;T<nC.length;++T)nC[T](this);ce(this),u&&l.lineWrapping&&getComputedStyle(b.lineDiv).textRendering=="optimizelegibility"&&(b.lineDiv.style.textRendering="auto")}Fn.defaults=qS,Fn.optionHandlers=Jh;function M3(o){var l=o.display;Tt(l.scroller,"mousedown",We(o,HS)),a&&c<11?Tt(l.scroller,"dblclick",We(o,function(M){if(!bn(o,M)){var P=Gs(o,M);if(!(!P||tC(o,M)||Lo(o.display,M))){Ln(M);var K=o.findWordAt(P);Gh(o.doc,K.anchor,K.head)}}})):Tt(l.scroller,"dblclick",function(M){return bn(o,M)||Ln(M)}),Tt(l.scroller,"contextmenu",function(M){return GS(o,M)}),Tt(l.input.getField(),"contextmenu",function(M){l.scroller.contains(M.target)||GS(o,M)});var f,d={end:0};function h(){l.activeTouch&&(f=setTimeout(function(){return l.activeTouch=null},1e3),d=l.activeTouch,d.end=+new Date)}function b(M){if(M.touches.length!=1)return!1;var P=M.touches[0];return P.radiusX<=1&&P.radiusY<=1}function S(M,P){if(P.left==null)return!0;var K=P.left-M.left,Z=P.top-M.top;return K*K+Z*Z>400}Tt(l.scroller,"touchstart",function(M){if(!bn(o,M)&&!b(M)&&!tC(o,M)){l.input.ensurePolled(),clearTimeout(f);var P=+new Date;l.activeTouch={start:P,moved:!1,prev:P-d.end<=300?d:null},M.touches.length==1&&(l.activeTouch.left=M.touches[0].pageX,l.activeTouch.top=M.touches[0].pageY)}}),Tt(l.scroller,"touchmove",function(){l.activeTouch&&(l.activeTouch.moved=!0)}),Tt(l.scroller,"touchend",function(M){var P=l.activeTouch;if(P&&!Lo(l,M)&&P.left!=null&&!P.moved&&new Date-P.start<300){var K=o.coordsChar(l.activeTouch,"page"),Z;!P.prev||S(P,P.prev)?Z=new mn(K,K):!P.prev.prev||S(P,P.prev.prev)?Z=o.findWordAt(K):Z=new mn(_e(K.line,0),Et(o.doc,_e(K.line+1,0))),o.setSelection(Z.anchor,Z.head),o.focus(),Ln(M)}h()}),Tt(l.scroller,"touchcancel",h),Tt(l.scroller,"scroll",function(){l.scroller.clientHeight&&(w(o,l.scroller.scrollTop),I(o,l.scroller.scrollLeft,!0),fn(o,"scroll",o))}),Tt(l.scroller,"mousewheel",function(M){return ZE(o,M)}),Tt(l.scroller,"DOMMouseScroll",function(M){return ZE(o,M)}),Tt(l.wrapper,"scroll",function(){return l.wrapper.scrollTop=l.wrapper.scrollLeft=0}),l.dragFunctions={enter:function(M){bn(o,M)||Dr(M)},over:function(M){bn(o,M)||(s3(o,M),Dr(M))},start:function(M){return o3(o,M)},drop:We(o,r3),leave:function(M){bn(o,M)||TS(o)}};var T=l.input.getField();Tt(T,"keyup",function(M){return VS.call(o,M)}),Tt(T,"keydown",We(o,OS)),Tt(T,"keypress",We(o,BS)),Tt(T,"focus",function(M){return rf(o,M)}),Tt(T,"blur",function(M){return Oa(o,M)})}var nC=[];Fn.defineInitHook=function(o){return nC.push(o)};function xf(o,l,f,d){var h=o.doc,b;f==null&&(f="add"),f=="smart"&&(h.mode.indent?b=lo(o,l).state:f="prev");var S=o.options.tabSize,T=wt(h,l),M=Qt(T.text,null,S);T.stateAfter&&(T.stateAfter=null);var P=T.text.match(/^\s*/)[0],K;if(!d&&!/\S/.test(T.text))K=0,f="not";else if(f=="smart"&&(K=h.mode.indent(b,T.text.slice(P.length),T.text),K==Yn||K>150)){if(!d)return;f="prev"}f=="prev"?l>h.first?K=Qt(wt(h,l-1).text,null,S):K=0:f=="add"?K=M+o.options.indentUnit:f=="subtract"?K=M-o.options.indentUnit:typeof f=="number"&&(K=M+f),K=Math.max(0,K);var Z="",ue=0;if(o.options.indentWithTabs)for(var se=Math.floor(K/S);se;--se)ue+=S,Z+="	";if(ue<K&&(Z+=Fo(K-ue)),Z!=P)return au(h,Z,_e(l,0),_e(l,P.length),"+input"),T.stateAfter=null,!0;for(var we=0;we<h.sel.ranges.length;we++){var Re=h.sel.ranges[we];if(Re.head.line==l&&Re.head.ch<P.length){var qe=_e(l,P.length);Y_(h,we,new mn(qe,qe));break}}}var Ho=null;function Qh(o){Ho=o}function iC(o,l,f,d,h){var b=o.doc;o.display.shift=!1,d||(d=b.sel);var S=+new Date-200,T=h=="paste"||o.state.pasteIncoming>S,M=ur(l),P=null;if(T&&d.ranges.length>1)if(Ho&&Ho.text.join(`
`)==l){if(d.ranges.length%Ho.text.length==0){P=[];for(var K=0;K<Ho.text.length;K++)P.push(b.splitLines(Ho.text[K]))}}else M.length==d.ranges.length&&o.options.pasteLinesPerSelection&&(P=Qn(M,function(it){return[it]}));for(var Z=o.curOp.updateInput,ue=d.ranges.length-1;ue>=0;ue--){var se=d.ranges[ue],we=se.from(),Re=se.to();se.empty()&&(f&&f>0?we=_e(we.line,we.ch-f):o.state.overwrite&&!T?Re=_e(Re.line,Math.min(wt(b,Re.line).text.length,Re.ch+je(M).length)):T&&Ho&&Ho.lineWise&&Ho.text.join(`
`)==M.join(`
`)&&(we=Re=_e(we.line,0)));var qe={from:we,to:Re,text:P?P[ue%P.length]:M,origin:h||(T?"paste":o.state.cutIncoming>S?"cut":"+input")};su(o.doc,qe),On(o,"inputRead",o,qe)}l&&!T&&jS(o,l),Va(o),o.curOp.updateInput<2&&(o.curOp.updateInput=Z),o.curOp.typing=!0,o.state.pasteIncoming=o.state.cutIncoming=-1}function WS(o,l){var f=o.clipboardData&&o.clipboardData.getData("Text");if(f)return o.preventDefault(),!l.isReadOnly()&&!l.options.disableInput&&l.hasFocus()&&Me(l,function(){return iC(l,f,0,null,"paste")}),!0}function jS(o,l){if(!(!o.options.electricChars||!o.options.smartIndent))for(var f=o.doc.sel,d=f.ranges.length-1;d>=0;d--){var h=f.ranges[d];if(!(h.head.ch>100||d&&f.ranges[d-1].head.line==h.head.line)){var b=o.getModeAt(h.head),S=!1;if(b.electricChars){for(var T=0;T<b.electricChars.length;T++)if(l.indexOf(b.electricChars.charAt(T))>-1){S=xf(o,h.head.line,"smart");break}}else b.electricInput&&b.electricInput.test(wt(o.doc,h.head.line).text.slice(0,h.head.ch))&&(S=xf(o,h.head.line,"smart"));S&&On(o,"electricInput",o,h.head.line)}}}function KS(o){for(var l=[],f=[],d=0;d<o.doc.sel.ranges.length;d++){var h=o.doc.sel.ranges[d].head.line,b={anchor:_e(h,0),head:_e(h+1,0)};f.push(b),l.push(o.getRange(b.anchor,b.head))}return{text:l,ranges:f}}function rC(o,l,f,d){o.setAttribute("autocorrect",f?"on":"off"),o.setAttribute("autocapitalize",d?"on":"off"),o.setAttribute("spellcheck",!!l)}function YS(){var o=H("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),l=H("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return u?o.style.width="1000px":o.setAttribute("wrap","off"),R&&(o.style.border="1px solid black"),l}function k3(o){var l=o.optionHandlers,f=o.helpers={};o.prototype={constructor:o,focus:function(){lt(this).focus(),this.display.input.focus()},setOption:function(d,h){var b=this.options,S=b[d];b[d]==h&&d!="mode"||(b[d]=h,l.hasOwnProperty(d)&&We(this,l[d])(this,h,S),fn(this,"optionChange",this,d))},getOption:function(d){return this.options[d]},getDoc:function(){return this.doc},addKeyMap:function(d,h){this.state.keyMaps[h?"push":"unshift"](Kh(d))},removeKeyMap:function(d){for(var h=this.state.keyMaps,b=0;b<h.length;++b)if(h[b]==d||h[b].name==d)return h.splice(b,1),!0},addOverlay:nt(function(d,h){var b=d.token?d:o.getMode(this.options,d);if(b.startState)throw new Error("Overlays may not be stateful.");Ai(this.state.overlays,{mode:b,modeSpec:d,opaque:h&&h.opaque,priority:h&&h.priority||0},function(S){return S.priority}),this.state.modeGen++,Gi(this)}),removeOverlay:nt(function(d){for(var h=this.state.overlays,b=0;b<h.length;++b){var S=h[b].modeSpec;if(S==d||typeof d=="string"&&S.name==d){h.splice(b,1),this.state.modeGen++,Gi(this);return}}}),indentLine:nt(function(d,h,b){typeof h!="string"&&typeof h!="number"&&(h==null?h=this.options.smartIndent?"smart":"prev":h=h?"add":"subtract"),Se(this.doc,d)&&xf(this,d,h,b)}),indentSelection:nt(function(d){for(var h=this.doc.sel.ranges,b=-1,S=0;S<h.length;S++){var T=h[S];if(T.empty())T.head.line>b&&(xf(this,T.head.line,d,!0),b=T.head.line,S==this.doc.sel.primIndex&&Va(this));else{var M=T.from(),P=T.to(),K=Math.max(b,M.line);b=Math.min(this.lastLine(),P.line-(P.ch?0:1))+1;for(var Z=K;Z<b;++Z)xf(this,Z,d);var ue=this.doc.sel.ranges;M.ch==0&&h.length==ue.length&&ue[S].from().ch>0&&Y_(this.doc,S,new mn(M,ue[S].to()),dn)}}}),getTokenAt:function(d,h){return Nd(this,d,h)},getLineTokens:function(d,h){return Nd(this,_e(d),h,!0)},getTokenTypeAt:function(d){d=Et(this.doc,d);var h=kd(this,wt(this.doc,d.line)),b=0,S=(h.length-1)/2,T=d.ch,M;if(T==0)M=h[2];else for(;;){var P=b+S>>1;if((P?h[P*2-1]:0)>=T)S=P;else if(h[P*2+1]<T)b=P+1;else{M=h[P*2+2];break}}var K=M?M.indexOf("overlay "):-1;return K<0?M:K==0?null:M.slice(0,K-1)},getModeAt:function(d){var h=this.doc.mode;return h.innerMode?o.innerMode(h,this.getTokenAt(d).state).mode:h},getHelper:function(d,h){return this.getHelpers(d,h)[0]},getHelpers:function(d,h){var b=[];if(!f.hasOwnProperty(h))return b;var S=f[h],T=this.getModeAt(d);if(typeof T[h]=="string")S[T[h]]&&b.push(S[T[h]]);else if(T[h])for(var M=0;M<T[h].length;M++){var P=S[T[h][M]];P&&b.push(P)}else T.helperType&&S[T.helperType]?b.push(S[T.helperType]):S[T.name]&&b.push(S[T.name]);for(var K=0;K<S._global.length;K++){var Z=S._global[K];Z.pred(T,this)&&Bt(b,Z.val)==-1&&b.push(Z.val)}return b},getStateAfter:function(d,h){var b=this.doc;return d=zc(b,d??b.first+b.size-1),lo(this,d+1,h).state},cursorCoords:function(d,h){var b,S=this.doc.sel.primary();return d==null?b=S.head:typeof d=="object"?b=Et(this.doc,d):b=d?S.from():S.to(),Nr(this,b,h||"page")},charCoords:function(d,h){return Pa(this,Et(this.doc,d),h||"page")},coordsChar:function(d,h){return d=Vl(this,d,h||"page"),jd(this,d.left,d.top)},lineAtHeight:function(d,h){return d=Vl(this,{top:d,left:0},h||"page").top,Q(this.doc,d+this.display.viewOffset)},heightAtLine:function(d,h,b){var S=!1,T;if(typeof d=="number"){var M=this.doc.first+this.doc.size-1;d<this.doc.first?d=this.doc.first:d>M&&(d=M,S=!0),T=wt(this.doc,d)}else T=d;return Ra(this,T,{top:0,left:0},h||"page",b||S).top+(S?this.doc.height-fo(T):0)},defaultTextHeight:function(){return La(this.display)},defaultCharWidth:function(){return zs(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(d,h,b,S,T){var M=this.display;d=Nr(this,Et(this.doc,d));var P=d.bottom,K=d.left;if(h.style.position="absolute",h.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(h),M.sizer.appendChild(h),S=="over")P=d.top;else if(S=="above"||S=="near"){var Z=Math.max(M.wrapper.clientHeight,this.doc.height),ue=Math.max(M.sizer.clientWidth,M.lineSpace.clientWidth);(S=="above"||d.bottom+h.offsetHeight>Z)&&d.top>h.offsetHeight?P=d.top-h.offsetHeight:d.bottom+h.offsetHeight<=Z&&(P=d.bottom),K+h.offsetWidth>ue&&(K=ue-h.offsetWidth)}h.style.top=P+"px",h.style.left=h.style.right="",T=="right"?(K=M.sizer.clientWidth-h.offsetWidth,h.style.right="0px"):(T=="left"?K=0:T=="middle"&&(K=(M.sizer.clientWidth-h.offsetWidth)/2),h.style.left=K+"px"),b&&_s(this,{left:K,top:P,right:K+h.offsetWidth,bottom:P+h.offsetHeight})},triggerOnKeyDown:nt(OS),triggerOnKeyPress:nt(BS),triggerOnKeyUp:VS,triggerOnMouseDown:nt(HS),execCommand:function(d){if(vf.hasOwnProperty(d))return vf[d].call(null,this)},triggerElectric:nt(function(d){jS(this,d)}),findPosH:function(d,h,b,S){var T=1;h<0&&(T=-1,h=-h);for(var M=Et(this.doc,d),P=0;P<h&&(M=oC(this.doc,M,T,b,S),!M.hitSide);++P);return M},moveH:nt(function(d,h){var b=this;this.extendSelectionsBy(function(S){return b.display.shift||b.doc.extend||S.empty()?oC(b.doc,S.head,d,h,b.options.rtlMoveVisually):d<0?S.from():S.to()},Pn)}),deleteH:nt(function(d,h){var b=this.doc.sel,S=this.doc;b.somethingSelected()?S.replaceSelection("",null,"+delete"):uu(this,function(T){var M=oC(S,T.head,d,h,!1);return d<0?{from:M,to:T.head}:{from:T.head,to:M}})}),findPosV:function(d,h,b,S){var T=1,M=S;h<0&&(T=-1,h=-h);for(var P=Et(this.doc,d),K=0;K<h;++K){var Z=Nr(this,P,"div");if(M==null?M=Z.left:Z.left=M,P=JS(this,Z,T,b),P.hitSide)break}return P},moveV:nt(function(d,h){var b=this,S=this.doc,T=[],M=!this.display.shift&&!S.extend&&S.sel.somethingSelected();if(S.extendSelectionsBy(function(K){if(M)return d<0?K.from():K.to();var Z=Nr(b,K.head,"div");K.goalColumn!=null&&(Z.left=K.goalColumn),T.push(Z.left);var ue=JS(b,Z,d,h);return h=="page"&&K==S.sel.primary()&&af(b,Pa(b,ue,"div").top-Z.top),ue},Pn),T.length)for(var P=0;P<S.sel.ranges.length;P++)S.sel.ranges[P].goalColumn=T[P]}),findWordAt:function(d){var h=this.doc,b=wt(h,d.line).text,S=d.ch,T=d.ch;if(b){var M=this.getHelper(d,"wordChars");(d.sticky=="before"||T==b.length)&&S?--S:++T;for(var P=b.charAt(S),K=zn(P,M)?function(Z){return zn(Z,M)}:/\s/.test(P)?function(Z){return/\s/.test(Z)}:function(Z){return!/\s/.test(Z)&&!zn(Z)};S>0&&K(b.charAt(S-1));)--S;for(;T<b.length&&K(b.charAt(T));)++T}return new mn(_e(d.line,S),_e(d.line,T))},toggleOverwrite:function(d){d!=null&&d==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?_t(this.display.cursorDiv,"CodeMirror-overwrite"):Te(this.display.cursorDiv,"CodeMirror-overwrite"),fn(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==pt(Le(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:nt(function(d,h){ql(this,d,h)}),getScrollInfo:function(){var d=this.display.scroller;return{left:d.scrollLeft,top:d.scrollTop,height:d.scrollHeight-po(this)-this.display.barHeight,width:d.scrollWidth-po(this)-this.display.barWidth,clientHeight:Pl(this),clientWidth:Oo(this)}},scrollIntoView:nt(function(d,h){d==null?(d={from:this.doc.sel.primary().head,to:null},h==null&&(h=this.options.cursorScrollMargin)):typeof d=="number"?d={from:_e(d,0),to:null}:d.from==null&&(d={from:d,to:null}),d.to||(d.to=d.from),d.margin=h||0,d.from.line!=null?z_(this,d):_(this,d.from,d.to,d.margin)}),setSize:nt(function(d,h){var b=this,S=function(M){return typeof M=="number"||/^\d+$/.test(String(M))?M+"px":M};d!=null&&(this.display.wrapper.style.width=S(d)),h!=null&&(this.display.wrapper.style.height=S(h)),this.options.lineWrapping&&Wd(this);var T=this.display.viewFrom;this.doc.iter(T,this.display.viewTo,function(M){if(M.widgets){for(var P=0;P<M.widgets.length;P++)if(M.widgets[P].noHScroll){vs(b,T,"widget");break}}++T}),this.curOp.forceUpdate=!0,fn(this,"refresh",this)}),operation:function(d){return Me(this,d)},startOperation:function(){return $e(this)},endOperation:function(){return ce(this)},refresh:nt(function(){var d=this.display.cachedTextHeight;Gi(this),this.curOp.forceUpdate=!0,hs(this),ql(this,this.doc.scrollLeft,this.doc.scrollTop),Ri(this.display),(d==null||Math.abs(d-La(this.display))>.5||this.options.lineWrapping)&&ef(this),fn(this,"refresh",this)}),swapDoc:nt(function(d){var h=this.doc;return h.cm=null,this.state.selectingText&&this.state.selectingText(),iS(this,d),hs(this),this.display.input.reset(),ql(this,d.scrollLeft,d.scrollTop),this.curOp.forceScroll=!0,On(this,"swapDoc",this,h),h}),phrase:function(d){var h=this.options.phrases;return h&&Object.prototype.hasOwnProperty.call(h,d)?h[d]:d},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ki(o),o.registerHelper=function(d,h,b){f.hasOwnProperty(d)||(f[d]=o[d]={_global:[]}),f[d][h]=b},o.registerGlobalHelper=function(d,h,b,S){o.registerHelper(d,h,S),f[d]._global.push({pred:b,val:S})}}function oC(o,l,f,d,h){var b=l,S=f,T=wt(o,l.line),M=h&&o.direction=="rtl"?-f:f;function P(){var dt=l.line+M;return dt<o.first||dt>=o.first+o.size?!1:(l=new _e(dt,l.ch,l.sticky),T=wt(o,dt))}function K(dt){var rt;if(d=="codepoint"){var vt=T.text.charCodeAt(l.ch+(f>0?0:-1));if(isNaN(vt))rt=null;else{var Rt=f>0?vt>=55296&&vt<56320:vt>=56320&&vt<57343;rt=new _e(l.line,Math.max(0,Math.min(T.text.length,l.ch+f*(Rt?2:1))),-f)}}else h?rt=f3(o.cm,T,l,f):rt=Q_(T,l,f);if(rt==null)if(!dt&&P())l=X_(h,o.cm,T,l.line,M);else return!1;else l=rt;return!0}if(d=="char"||d=="codepoint")K();else if(d=="column")K(!0);else if(d=="word"||d=="group")for(var Z=null,ue=d=="group",se=o.cm&&o.cm.getHelper(l,"wordChars"),we=!0;!(f<0&&!K(!we));we=!1){var Re=T.text.charAt(l.ch)||`
`,qe=zn(Re,se)?"w":ue&&Re==`
`?"n":!ue||/\s/.test(Re)?null:"p";if(ue&&!we&&!qe&&(qe="s"),Z&&Z!=qe){f<0&&(f=1,K(),l.sticky="after");break}if(qe&&(Z=qe),f>0&&!K(!we))break}var it=qh(o,l,b,S,!0);return Xt(b,it)&&(it.hitSide=!0),it}function JS(o,l,f,d){var h=o.doc,b=l.left,S;if(d=="page"){var T=Math.min(o.display.wrapper.clientHeight,lt(o).innerHeight||h(o).documentElement.clientHeight),M=Math.max(T-.5*La(o.display),3);S=(f>0?l.bottom:l.top)+f*M}else d=="line"&&(S=f>0?l.bottom+3:l.top-3);for(var P;P=jd(o,b,S),!!P.outside;){if(f<0?S<=0:S>=h.height){P.hitSide=!0;break}S+=f*5}return P}var yn=function(o){this.cm=o,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new yi,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};yn.prototype.init=function(o){var l=this,f=this,d=f.cm,h=f.div=o.lineDiv;h.contentEditable=!0,rC(h,d.options.spellcheck,d.options.autocorrect,d.options.autocapitalize);function b(T){for(var M=T.target;M;M=M.parentNode){if(M==h)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(M.className))break}return!1}Tt(h,"paste",function(T){!b(T)||bn(d,T)||WS(T,d)||c<=11&&setTimeout(We(d,function(){return l.updateFromDOM()}),20)}),Tt(h,"compositionstart",function(T){l.composing={data:T.data,done:!1}}),Tt(h,"compositionupdate",function(T){l.composing||(l.composing={data:T.data,done:!1})}),Tt(h,"compositionend",function(T){l.composing&&(T.data!=l.composing.data&&l.readFromDOMSoon(),l.composing.done=!0)}),Tt(h,"touchstart",function(){return f.forceCompositionEnd()}),Tt(h,"input",function(){l.composing||l.readFromDOMSoon()});function S(T){if(!(!b(T)||bn(d,T))){if(d.somethingSelected())Qh({lineWise:!1,text:d.getSelections()}),T.type=="cut"&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var M=KS(d);Qh({lineWise:!0,text:M.text}),T.type=="cut"&&d.operation(function(){d.setSelections(M.ranges,0,dn),d.replaceSelection("",null,"cut")})}else return;if(T.clipboardData){T.clipboardData.clearData();var P=Ho.text.join(`
`);if(T.clipboardData.setData("Text",P),T.clipboardData.getData("Text")==P){T.preventDefault();return}}var K=YS(),Z=K.firstChild;rC(Z),d.display.lineSpace.insertBefore(K,d.display.lineSpace.firstChild),Z.value=Ho.text.join(`
`);var ue=pt(Ut(h));ze(Z),setTimeout(function(){d.display.lineSpace.removeChild(K),ue.focus(),ue==h&&f.showPrimarySelection()},50)}}Tt(h,"copy",S),Tt(h,"cut",S)},yn.prototype.screenReaderLabelChanged=function(o){o?this.div.setAttribute("aria-label",o):this.div.removeAttribute("aria-label")},yn.prototype.prepareSelection=function(){var o=Bh(this.cm,!1);return o.focus=pt(Ut(this.div))==this.div,o},yn.prototype.showSelection=function(o,l){!o||!this.cm.display.view.length||((o.focus||l)&&this.showPrimarySelection(),this.showMultipleSelections(o))},yn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},yn.prototype.showPrimarySelection=function(){var o=this.getSelection(),l=this.cm,f=l.doc.sel.primary(),d=f.from(),h=f.to();if(l.display.viewTo==l.display.viewFrom||d.line>=l.display.viewTo||h.line<l.display.viewFrom){o.removeAllRanges();return}var b=Xh(l,o.anchorNode,o.anchorOffset),S=Xh(l,o.focusNode,o.focusOffset);if(!(b&&!b.bad&&S&&!S.bad&&at(Vs(b,S),d)==0&&at($n(b,S),h)==0)){var T=l.display.view,M=d.line>=l.display.viewFrom&&QS(l,d)||{node:T[0].measure.map[2],offset:0},P=h.line<l.display.viewTo&&QS(l,h);if(!P){var K=T[T.length-1].measure,Z=K.maps?K.maps[K.maps.length-1]:K.map;P={node:Z[Z.length-1],offset:Z[Z.length-2]-Z[Z.length-3]}}if(!M||!P){o.removeAllRanges();return}var ue=o.rangeCount&&o.getRangeAt(0),se;try{se=ht(M.node,M.offset,P.offset,P.node)}catch{}se&&(!n&&l.state.focused?(o.collapse(M.node,M.offset),se.collapsed||(o.removeAllRanges(),o.addRange(se))):(o.removeAllRanges(),o.addRange(se)),ue&&o.anchorNode==null?o.addRange(ue):n&&this.startGracePeriod()),this.rememberSelection()}},yn.prototype.startGracePeriod=function(){var o=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){o.gracePeriod=!1,o.selectionChanged()&&o.cm.operation(function(){return o.cm.curOp.selectionChanged=!0})},20)},yn.prototype.showMultipleSelections=function(o){le(this.cm.display.cursorDiv,o.cursors),le(this.cm.display.selectionDiv,o.selection)},yn.prototype.rememberSelection=function(){var o=this.getSelection();this.lastAnchorNode=o.anchorNode,this.lastAnchorOffset=o.anchorOffset,this.lastFocusNode=o.focusNode,this.lastFocusOffset=o.focusOffset},yn.prototype.selectionInEditor=function(){var o=this.getSelection();if(!o.rangeCount)return!1;var l=o.getRangeAt(0).commonAncestorContainer;return Xe(this.div,l)},yn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||pt(Ut(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},yn.prototype.blur=function(){this.div.blur()},yn.prototype.getField=function(){return this.div},yn.prototype.supportsTouch=function(){return!0},yn.prototype.receivedFocus=function(){var o=this,l=this;this.selectionInEditor()?setTimeout(function(){return o.pollSelection()},20):Me(this.cm,function(){return l.cm.curOp.selectionChanged=!0});function f(){l.cm.state.focused&&(l.pollSelection(),l.polling.set(l.cm.options.pollInterval,f))}this.polling.set(this.cm.options.pollInterval,f)},yn.prototype.selectionChanged=function(){var o=this.getSelection();return o.anchorNode!=this.lastAnchorNode||o.anchorOffset!=this.lastAnchorOffset||o.focusNode!=this.lastFocusNode||o.focusOffset!=this.lastFocusOffset},yn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var o=this.getSelection(),l=this.cm;if(k&&m&&this.cm.display.gutterSpecs.length&&N3(o.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var f=Xh(l,o.anchorNode,o.anchorOffset),d=Xh(l,o.focusNode,o.focusOffset);f&&d&&Me(l,function(){$i(l.doc,Ba(f,d),dn),(f.bad||d.bad)&&(l.curOp.selectionChanged=!0)})}}},yn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var o=this.cm,l=o.display,f=o.doc.sel.primary(),d=f.from(),h=f.to();if(d.ch==0&&d.line>o.firstLine()&&(d=_e(d.line-1,wt(o.doc,d.line-1).length)),h.ch==wt(o.doc,h.line).text.length&&h.line<o.lastLine()&&(h=_e(h.line+1,0)),d.line<l.viewFrom||h.line>l.viewTo-1)return!1;var b,S,T;d.line==l.viewFrom||(b=gs(o,d.line))==0?(S=O(l.view[0].line),T=l.view[0].node):(S=O(l.view[b].line),T=l.view[b-1].node.nextSibling);var M=gs(o,h.line),P,K;if(M==l.view.length-1?(P=l.viewTo-1,K=l.lineDiv.lastChild):(P=O(l.view[M+1].line)-1,K=l.view[M+1].node.previousSibling),!T)return!1;for(var Z=o.doc.splitLines(F3(o,T,K,S,P)),ue=Ar(o.doc,_e(S,0),_e(P,wt(o.doc,P).text.length));Z.length>1&&ue.length>1;)if(je(Z)==je(ue))Z.pop(),ue.pop(),P--;else if(Z[0]==ue[0])Z.shift(),ue.shift(),S++;else break;for(var se=0,we=0,Re=Z[0],qe=ue[0],it=Math.min(Re.length,qe.length);se<it&&Re.charCodeAt(se)==qe.charCodeAt(se);)++se;for(var dt=je(Z),rt=je(ue),vt=Math.min(dt.length-(Z.length==1?se:0),rt.length-(ue.length==1?se:0));we<vt&&dt.charCodeAt(dt.length-we-1)==rt.charCodeAt(rt.length-we-1);)++we;if(Z.length==1&&ue.length==1&&S==d.line)for(;se&&se>d.ch&&dt.charCodeAt(dt.length-we-1)==rt.charCodeAt(rt.length-we-1);)se--,we++;Z[Z.length-1]=dt.slice(0,dt.length-we).replace(/^\u200b+/,""),Z[0]=Z[0].slice(se).replace(/\u200b+$/,"");var Rt=_e(S,se),At=_e(P,ue.length?je(ue).length-we:0);if(Z.length>1||Z[0]||at(Rt,At))return au(o.doc,Z,Rt,At,"+input"),!0},yn.prototype.ensurePolled=function(){this.forceCompositionEnd()},yn.prototype.reset=function(){this.forceCompositionEnd()},yn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},yn.prototype.readFromDOMSoon=function(){var o=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(o.readDOMTimeout=null,o.composing)if(o.composing.done)o.composing=null;else return;o.updateFromDOM()},80))},yn.prototype.updateFromDOM=function(){var o=this;(this.cm.isReadOnly()||!this.pollContent())&&Me(this.cm,function(){return Gi(o.cm)})},yn.prototype.setUneditable=function(o){o.contentEditable="false"},yn.prototype.onKeyPress=function(o){o.charCode==0||this.composing||(o.preventDefault(),this.cm.isReadOnly()||We(this.cm,iC)(this.cm,String.fromCharCode(o.charCode==null?o.keyCode:o.charCode),0))},yn.prototype.readOnlyChanged=function(o){this.div.contentEditable=String(o!="nocursor")},yn.prototype.onContextMenu=function(){},yn.prototype.resetPosition=function(){},yn.prototype.needsContentAttribute=!0;function QS(o,l){var f=$d(o,l.line);if(!f||f.hidden)return null;var d=wt(o.doc,l.line),h=Rh(f,d,l.line),b=$t(d,o.doc.direction),S="left";if(b){var T=Bi(b,l.ch);S=T%2?"right":"left"}var M=Fa(h.map,l.ch,S);return M.offset=M.collapse=="right"?M.end:M.start,M}function N3(o){for(var l=o;l;l=l.parentNode)if(/CodeMirror-gutter-wrapper/.test(l.className))return!0;return!1}function fu(o,l){return l&&(o.bad=!0),o}function F3(o,l,f,d,h){var b="",S=!1,T=o.doc.lineSeparator(),M=!1;function P(se){return function(we){return we.id==se}}function K(){S&&(b+=T,M&&(b+=T),S=M=!1)}function Z(se){se&&(K(),b+=se)}function ue(se){if(se.nodeType==1){var we=se.getAttribute("cm-text");if(we){Z(we);return}var Re=se.getAttribute("cm-marker"),qe;if(Re){var it=o.findMarks(_e(d,0),_e(h+1,0),P(+Re));it.length&&(qe=it[0].find(0))&&Z(Ar(o.doc,qe.from,qe.to).join(T));return}if(se.getAttribute("contenteditable")=="false")return;var dt=/^(pre|div|p|li|table|br)$/i.test(se.nodeName);if(!/^br$/i.test(se.nodeName)&&se.textContent.length==0)return;dt&&K();for(var rt=0;rt<se.childNodes.length;rt++)ue(se.childNodes[rt]);/^(pre|p)$/i.test(se.nodeName)&&(M=!0),dt&&(S=!0)}else se.nodeType==3&&Z(se.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;ue(l),l!=f;)l=l.nextSibling,M=!1;return b}function Xh(o,l,f){var d;if(l==o.display.lineDiv){if(d=o.display.lineDiv.childNodes[f],!d)return fu(o.clipPos(_e(o.display.viewTo-1)),!0);l=null,f=0}else for(d=l;;d=d.parentNode){if(!d||d==o.display.lineDiv)return null;if(d.parentNode&&d.parentNode==o.display.lineDiv)break}for(var h=0;h<o.display.view.length;h++){var b=o.display.view[h];if(b.node==d)return R3(b,l,f)}}function R3(o,l,f){var d=o.text.firstChild,h=!1;if(!l||!Xe(d,l))return fu(_e(O(o.line),0),!0);if(l==d&&(h=!0,l=d.childNodes[f],f=0,!l)){var b=o.rest?je(o.rest):o.line;return fu(_e(O(b),b.text.length),h)}var S=l.nodeType==3?l:null,T=l;for(!S&&l.childNodes.length==1&&l.firstChild.nodeType==3&&(S=l.firstChild,f&&(f=S.nodeValue.length));T.parentNode!=d;)T=T.parentNode;var M=o.measure,P=M.maps;function K(qe,it,dt){for(var rt=-1;rt<(P?P.length:0);rt++)for(var vt=rt<0?M.map:P[rt],Rt=0;Rt<vt.length;Rt+=3){var At=vt[Rt+2];if(At==qe||At==it){var Yt=O(rt<0?o.line:o.rest[rt]),En=vt[Rt]+dt;return(dt<0||At!=qe)&&(En=vt[Rt+(dt?1:0)]),_e(Yt,En)}}}var Z=K(S,T,f);if(Z)return fu(Z,h);for(var ue=T.nextSibling,se=S?S.nodeValue.length-f:0;ue;ue=ue.nextSibling){if(Z=K(ue,ue.firstChild,0),Z)return fu(_e(Z.line,Z.ch-se),h);se+=ue.textContent.length}for(var we=T.previousSibling,Re=f;we;we=we.previousSibling){if(Z=K(we,we.firstChild,-1),Z)return fu(_e(Z.line,Z.ch+Re),h);Re+=we.textContent.length}}var ei=function(o){this.cm=o,this.prevInput="",this.pollingFast=!1,this.polling=new yi,this.hasSelection=!1,this.composing=null,this.resetting=!1};ei.prototype.init=function(o){var l=this,f=this,d=this.cm;this.createField(o);var h=this.textarea;o.wrapper.insertBefore(this.wrapper,o.wrapper.firstChild),R&&(h.style.width="0px"),Tt(h,"input",function(){a&&c>=9&&l.hasSelection&&(l.hasSelection=null),f.poll()}),Tt(h,"paste",function(S){bn(d,S)||WS(S,d)||(d.state.pasteIncoming=+new Date,f.fastPoll())});function b(S){if(!bn(d,S)){if(d.somethingSelected())Qh({lineWise:!1,text:d.getSelections()});else if(d.options.lineWiseCopyCut){var T=KS(d);Qh({lineWise:!0,text:T.text}),S.type=="cut"?d.setSelections(T.ranges,null,dn):(f.prevInput="",h.value=T.text.join(`
`),ze(h))}else return;S.type=="cut"&&(d.state.cutIncoming=+new Date)}}Tt(h,"cut",b),Tt(h,"copy",b),Tt(o.scroller,"paste",function(S){if(!(Lo(o,S)||bn(d,S))){if(!h.dispatchEvent){d.state.pasteIncoming=+new Date,f.focus();return}var T=new Event("paste");T.clipboardData=S.clipboardData,h.dispatchEvent(T)}}),Tt(o.lineSpace,"selectstart",function(S){Lo(o,S)||Ln(S)}),Tt(h,"compositionstart",function(){var S=d.getCursor("from");f.composing&&f.composing.range.clear(),f.composing={start:S,range:d.markText(S,d.getCursor("to"),{className:"CodeMirror-composing"})}}),Tt(h,"compositionend",function(){f.composing&&(f.poll(),f.composing.range.clear(),f.composing=null)})},ei.prototype.createField=function(o){this.wrapper=YS(),this.textarea=this.wrapper.firstChild;var l=this.cm.options;rC(this.textarea,l.spellcheck,l.autocorrect,l.autocapitalize)},ei.prototype.screenReaderLabelChanged=function(o){o?this.textarea.setAttribute("aria-label",o):this.textarea.removeAttribute("aria-label")},ei.prototype.prepareSelection=function(){var o=this.cm,l=o.display,f=o.doc,d=Bh(o);if(o.options.moveInputWithCursor){var h=Nr(o,f.sel.primary().head,"div"),b=l.wrapper.getBoundingClientRect(),S=l.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(l.wrapper.clientHeight-10,h.top+S.top-b.top)),d.teLeft=Math.max(0,Math.min(l.wrapper.clientWidth-10,h.left+S.left-b.left))}return d},ei.prototype.showSelection=function(o){var l=this.cm,f=l.display;le(f.cursorDiv,o.cursors),le(f.selectionDiv,o.selection),o.teTop!=null&&(this.wrapper.style.top=o.teTop+"px",this.wrapper.style.left=o.teLeft+"px")},ei.prototype.reset=function(o){if(!(this.contextMenuPending||this.composing&&o)){var l=this.cm;if(this.resetting=!0,l.somethingSelected()){this.prevInput="";var f=l.getSelection();this.textarea.value=f,l.state.focused&&ze(this.textarea),a&&c>=9&&(this.hasSelection=f)}else o||(this.prevInput=this.textarea.value="",a&&c>=9&&(this.hasSelection=null));this.resetting=!1}},ei.prototype.getField=function(){return this.textarea},ei.prototype.supportsTouch=function(){return!1},ei.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!B||pt(Ut(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},ei.prototype.blur=function(){this.textarea.blur()},ei.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ei.prototype.receivedFocus=function(){this.slowPoll()},ei.prototype.slowPoll=function(){var o=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){o.poll(),o.cm.state.focused&&o.slowPoll()})},ei.prototype.fastPoll=function(){var o=!1,l=this;l.pollingFast=!0;function f(){var d=l.poll();!d&&!o?(o=!0,l.polling.set(60,f)):(l.pollingFast=!1,l.slowPoll())}l.polling.set(20,f)},ei.prototype.poll=function(){var o=this,l=this.cm,f=this.textarea,d=this.prevInput;if(this.contextMenuPending||this.resetting||!l.state.focused||Po(f)&&!d&&!this.composing||l.isReadOnly()||l.options.disableInput||l.state.keySeq)return!1;var h=f.value;if(h==d&&!l.somethingSelected())return!1;if(a&&c>=9&&this.hasSelection===h||$&&/[\uf700-\uf7ff]/.test(h))return l.display.input.reset(),!1;if(l.doc.sel==l.display.selForContextMenu){var b=h.charCodeAt(0);if(b==8203&&!d&&(d="\u200B"),b==8666)return this.reset(),this.cm.execCommand("undo")}for(var S=0,T=Math.min(d.length,h.length);S<T&&d.charCodeAt(S)==h.charCodeAt(S);)++S;return Me(l,function(){iC(l,h.slice(S),d.length-S,null,o.composing?"*compose":null),h.length>1e3||h.indexOf(`
`)>-1?f.value=o.prevInput="":o.prevInput=h,o.composing&&(o.composing.range.clear(),o.composing.range=l.markText(o.composing.start,l.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ei.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ei.prototype.onKeyPress=function(){a&&c>=9&&(this.hasSelection=null),this.fastPoll()},ei.prototype.onContextMenu=function(o){var l=this,f=l.cm,d=f.display,h=l.textarea;l.contextMenuPending&&l.contextMenuPending();var b=Gs(f,o),S=d.scroller.scrollTop;if(!b||x)return;var T=f.options.resetSelectionOnContextMenu;T&&f.doc.sel.contains(b)==-1&&We(f,$i)(f.doc,Ba(b),dn);var M=h.style.cssText,P=l.wrapper.style.cssText,K=l.wrapper.offsetParent.getBoundingClientRect();l.wrapper.style.cssText="position: static",h.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(o.clientY-K.top-5)+"px; left: "+(o.clientX-K.left-5)+`px;
      z-index: 1000; background: `+(a?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Z;u&&(Z=h.ownerDocument.defaultView.scrollY),d.input.focus(),u&&h.ownerDocument.defaultView.scrollTo(null,Z),d.input.reset(),f.somethingSelected()||(h.value=l.prevInput=" "),l.contextMenuPending=se,d.selForContextMenu=f.doc.sel,clearTimeout(d.detectingSelectAll);function ue(){if(h.selectionStart!=null){var Re=f.somethingSelected(),qe="\u200B"+(Re?h.value:"");h.value="\u21DA",h.value=qe,l.prevInput=Re?"":"\u200B",h.selectionStart=1,h.selectionEnd=qe.length,d.selForContextMenu=f.doc.sel}}function se(){if(l.contextMenuPending==se&&(l.contextMenuPending=!1,l.wrapper.style.cssText=P,h.style.cssText=M,a&&c<9&&d.scrollbars.setScrollTop(d.scroller.scrollTop=S),h.selectionStart!=null)){(!a||a&&c<9)&&ue();var Re=0,qe=function(){d.selForContextMenu==f.doc.sel&&h.selectionStart==0&&h.selectionEnd>0&&l.prevInput=="\u200B"?We(f,gS)(f):Re++<10?d.detectingSelectAll=setTimeout(qe,500):(d.selForContextMenu=null,d.input.reset())};d.detectingSelectAll=setTimeout(qe,200)}}if(a&&c>=9&&ue(),ye){Dr(o);var we=function(){si(window,"mouseup",we),setTimeout(se,20)};Tt(window,"mouseup",we)}else setTimeout(se,50)},ei.prototype.readOnlyChanged=function(o){o||this.reset(),this.textarea.disabled=o=="nocursor",this.textarea.readOnly=!!o},ei.prototype.setUneditable=function(){},ei.prototype.needsContentAttribute=!1;function P3(o,l){if(l=l?Ze(l):{},l.value=o.value,!l.tabindex&&o.tabIndex&&(l.tabindex=o.tabIndex),!l.placeholder&&o.placeholder&&(l.placeholder=o.placeholder),l.autofocus==null){var f=pt(Ut(o));l.autofocus=f==o||o.getAttribute("autofocus")!=null&&f==document.body}function d(){o.value=T.getValue()}var h;if(o.form&&(Tt(o.form,"submit",d),!l.leaveSubmitMethodAlone)){var b=o.form;h=b.submit;try{var S=b.submit=function(){d(),b.submit=h,b.submit(),b.submit=S}}catch{}}l.finishInit=function(M){M.save=d,M.getTextArea=function(){return o},M.toTextArea=function(){M.toTextArea=isNaN,d(),o.parentNode.removeChild(M.getWrapperElement()),o.style.display="",o.form&&(si(o.form,"submit",d),!l.leaveSubmitMethodAlone&&typeof o.form.submit=="function"&&(o.form.submit=h))}},o.style.display="none";var T=Fn(function(M){return o.parentNode.insertBefore(M,o.nextSibling)},l);return T}function L3(o){o.off=si,o.on=Tt,o.wheelEventPixels=GP,o.Doc=pr,o.splitLines=ur,o.countColumn=Qt,o.findColumn=Jn,o.isWordChar=wr,o.Pass=Yn,o.signal=fn,o.Line=zi,o.changeEnd=Ha,o.scrollbarModel=de,o.Pos=_e,o.cmpPos=at,o.modes=Sa,o.mimeModes=Wr,o.resolveMode=ss,o.getMode=Da,o.modeExtensions=as,o.extendMode=Ta,o.copyState=dr,o.startState=An,o.innerMode=vn,o.commands=vf,o.keyMap=js,o.keyName=NS,o.isModifierKey=MS,o.lookupKey=cu,o.normalizeKeyMap=d3,o.StringStream=Mn,o.SharedTextMarker=hf,o.TextMarker=za,o.LineWidget=pf,o.e_preventDefault=Ln,o.e_stopPropagation=Zi,o.e_stop=Dr,o.addClass=_t,o.contains=Xe,o.rmClass=Te,o.keyNames=Ga}T3(Fn),k3(Fn);var O3="iter insert remove copy getEditor constructor".split(" ");for(var Zh in pr.prototype)pr.prototype.hasOwnProperty(Zh)&&Bt(O3,Zh)<0&&(Fn.prototype[Zh]=(function(o){return function(){return o.apply(this.doc,arguments)}})(pr.prototype[Zh]));return ki(pr),Fn.inputStyles={textarea:ei,contenteditable:yn},Fn.defineMode=function(o){!Fn.defaults.mode&&o!="null"&&(Fn.defaults.mode=o),Fi.apply(this,arguments)},Fn.defineMIME=Ir,Fn.defineMode("null",function(){return{token:function(o){return o.skipToEnd()}}}),Fn.defineMIME("text/plain","null"),Fn.defineExtension=function(o,l){Fn.prototype[o]=l},Fn.defineDocExtension=function(o,l){pr.prototype[o]=l},Fn.fromTextArea=P3,L3(Fn),Fn.version="5.65.16",Fn})});var YR=Jt((jR,KR)=>{(function(t){typeof jR=="object"&&typeof KR=="object"?t(sh()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("javascript",function(e,n){var i=e.indentUnit,r=n.statementIndent,s=n.jsonld,a=n.json||s,c=n.trackScope!==!1,u=n.typescript,p=n.wordCharacters||/[\w$\xa1-\uffff]/,m=(function(){function O(Zn){return{type:Zn,style:"keyword"}}var Q=O("keyword a"),Se=O("keyword b"),Ge=O("keyword c"),_e=O("keyword d"),at=O("operator"),Xt={type:"atom",style:"atom"};return{if:O("if"),while:Q,with:Q,else:Se,do:Se,try:Se,finally:Se,return:_e,break:_e,continue:_e,new:O("new"),delete:Ge,void:Ge,throw:Ge,debugger:O("debugger"),var:O("var"),const:O("var"),let:O("var"),function:O("function"),catch:O("catch"),for:O("for"),switch:O("switch"),case:O("case"),default:O("default"),in:at,typeof:at,instanceof:at,true:Xt,false:Xt,null:Xt,undefined:Xt,NaN:Xt,Infinity:Xt,this:O("this"),class:O("class"),super:O("atom"),yield:Ge,export:O("export"),import:O("import"),extends:Ge,await:Ge}})(),C=/[+\-*&%=<>!?|~^@]/,x=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function E(O){for(var Q=!1,Se,Ge=!1;(Se=O.next())!=null;){if(!Q){if(Se=="/"&&!Ge)return;Se=="["?Ge=!0:Ge&&Se=="]"&&(Ge=!1)}Q=!Q&&Se=="\\"}}var A,N;function R(O,Q,Se){return A=O,N=Se,Q}function k(O,Q){var Se=O.next();if(Se=='"'||Se=="'")return Q.tokenize=B(Se),Q.tokenize(O,Q);if(Se=="."&&O.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return R("number","number");if(Se=="."&&O.match(".."))return R("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Se))return R(Se);if(Se=="="&&O.eat(">"))return R("=>","operator");if(Se=="0"&&O.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return R("number","number");if(/\d/.test(Se))return O.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),R("number","number");if(Se=="/")return O.eat("*")?(Q.tokenize=$,$(O,Q)):O.eat("/")?(O.skipToEnd(),R("comment","comment")):fr(O,Q,1)?(E(O),O.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),R("regexp","string-2")):(O.eat("="),R("operator","operator",O.current()));if(Se=="`")return Q.tokenize=q,q(O,Q);if(Se=="#"&&O.peek()=="!")return O.skipToEnd(),R("meta","meta");if(Se=="#"&&O.eatWhile(p))return R("variable","property");if(Se=="<"&&O.match("!--")||Se=="-"&&O.match("->")&&!/\S/.test(O.string.slice(0,O.start)))return O.skipToEnd(),R("comment","comment");if(C.test(Se))return(Se!=">"||!Q.lexical||Q.lexical.type!=">")&&(O.eat("=")?(Se=="!"||Se=="=")&&O.eat("="):/[<>*+\-|&?]/.test(Se)&&(O.eat(Se),Se==">"&&O.eat(Se))),Se=="?"&&O.eat(".")?R("."):R("operator","operator",O.current());if(p.test(Se)){O.eatWhile(p);var Ge=O.current();if(Q.lastType!="."){if(m.propertyIsEnumerable(Ge)){var _e=m[Ge];return R(_e.type,_e.style,Ge)}if(Ge=="async"&&O.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return R("async","keyword",Ge)}return R("variable","variable",Ge)}}function B(O){return function(Q,Se){var Ge=!1,_e;if(s&&Q.peek()=="@"&&Q.match(x))return Se.tokenize=k,R("jsonld-keyword","meta");for(;(_e=Q.next())!=null&&!(_e==O&&!Ge);)Ge=!Ge&&_e=="\\";return Ge||(Se.tokenize=k),R("string","string")}}function $(O,Q){for(var Se=!1,Ge;Ge=O.next();){if(Ge=="/"&&Se){Q.tokenize=k;break}Se=Ge=="*"}return R("comment","comment")}function q(O,Q){for(var Se=!1,Ge;(Ge=O.next())!=null;){if(!Se&&(Ge=="`"||Ge=="$"&&O.eat("{"))){Q.tokenize=k;break}Se=!Se&&Ge=="\\"}return R("quasi","string-2",O.current())}var X="([{}])";function ie(O,Q){Q.fatArrowAt&&(Q.fatArrowAt=null);var Se=O.string.indexOf("=>",O.start);if(!(Se<0)){if(u){var Ge=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(O.string.slice(O.start,Se));Ge&&(Se=Ge.index)}for(var _e=0,at=!1,Xt=Se-1;Xt>=0;--Xt){var Zn=O.string.charAt(Xt),$n=X.indexOf(Zn);if($n>=0&&$n<3){if(!_e){++Xt;break}if(--_e==0){Zn=="("&&(at=!0);break}}else if($n>=3&&$n<6)++_e;else if(p.test(Zn))at=!0;else if(/["'\/`]/.test(Zn))for(;;--Xt){if(Xt==0)return;var Vs=O.string.charAt(Xt-1);if(Vs==Zn&&O.string.charAt(Xt-2)!="\\"){Xt--;break}}else if(at&&!_e){++Xt;break}}at&&!_e&&(Q.fatArrowAt=Xt)}}var me={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ye(O,Q,Se,Ge,_e,at){this.indented=O,this.column=Q,this.type=Se,this.prev=_e,this.info=at,Ge!=null&&(this.align=Ge)}function ge(O,Q){if(!c)return!1;for(var Se=O.localVars;Se;Se=Se.next)if(Se.name==Q)return!0;for(var Ge=O.context;Ge;Ge=Ge.prev)for(var Se=Ge.vars;Se;Se=Se.next)if(Se.name==Q)return!0}function Te(O,Q,Se,Ge,_e){var at=O.cc;for(j.state=O,j.stream=_e,j.marked=null,j.cc=at,j.style=Q,O.lexical.hasOwnProperty("align")||(O.lexical.align=!0);;){var Xt=at.length?at.pop():a?Bt:Qt;if(Xt(Se,Ge)){for(;at.length&&at[at.length-1].lex;)at.pop()();return j.marked?j.marked:Se=="variable"&&ge(O,Ge)?"variable-2":Q}}}var j={state:null,column:null,marked:null,cc:null};function le(){for(var O=arguments.length-1;O>=0;O--)j.cc.push(arguments[O])}function H(){return le.apply(null,arguments),!0}function Ae(O,Q){for(var Se=Q;Se;Se=Se.next)if(Se.name==O)return!0;return!1}function ht(O){var Q=j.state;if(j.marked="def",!!c){if(Q.context){if(Q.lexical.info=="var"&&Q.context&&Q.context.block){var Se=Xe(O,Q.context);if(Se!=null){Q.context=Se;return}}else if(!Ae(O,Q.localVars)){Q.localVars=new be(O,Q.localVars);return}}n.globalVars&&!Ae(O,Q.globalVars)&&(Q.globalVars=new be(O,Q.globalVars))}}function Xe(O,Q){if(Q)if(Q.block){var Se=Xe(O,Q.prev);return Se?Se==Q.prev?Q:new _t(Se,Q.vars,!0):null}else return Ae(O,Q.vars)?Q:new _t(Q.prev,new be(O,Q.vars),!1);else return null}function pt(O){return O=="public"||O=="private"||O=="protected"||O=="abstract"||O=="readonly"}function _t(O,Q,Se){this.prev=O,this.vars=Q,this.block=Se}function be(O,Q){this.name=O,this.next=Q}var ze=new be("this",new be("arguments",null));function Be(){j.state.context=new _t(j.state.context,j.state.localVars,!1),j.state.localVars=ze}function Le(){j.state.context=new _t(j.state.context,j.state.localVars,!0),j.state.localVars=null}Be.lex=Le.lex=!0;function Ut(){j.state.localVars=j.state.context.vars,j.state.context=j.state.context.prev}Ut.lex=!0;function lt(O,Q){var Se=function(){var Ge=j.state,_e=Ge.indented;if(Ge.lexical.type=="stat")_e=Ge.lexical.indented;else for(var at=Ge.lexical;at&&at.type==")"&&at.align;at=at.prev)_e=at.indented;Ge.lexical=new ye(_e,j.stream.column(),O,null,Ge.lexical,Q)};return Se.lex=!0,Se}function Ct(){var O=j.state;O.lexical.prev&&(O.lexical.type==")"&&(O.indented=O.lexical.indented),O.lexical=O.lexical.prev)}Ct.lex=!0;function Ze(O){function Q(Se){return Se==O?H():O==";"||Se=="}"||Se==")"||Se=="]"?le():H(Q)}return Q}function Qt(O,Q){return O=="var"?H(lt("vardef",Q),Zi,Ze(";"),Ct):O=="keyword a"?H(lt("form"),Yn,Qt,Ct):O=="keyword b"?H(lt("form"),Qt,Ct):O=="keyword d"?j.stream.match(/^\s*$/,!1)?H():H(lt("stat"),Ii,Ze(";"),Ct):O=="debugger"?H(Ze(";")):O=="{"?H(lt("}"),Le,di,Ct,Ut):O==";"?H():O=="if"?(j.state.lexical.info=="else"&&j.state.cc[j.state.cc.length-1]==Ct&&j.state.cc.pop()(),H(lt("form"),Yn,Qt,Ct,Ui)):O=="function"?H(ur):O=="for"?H(lt("form"),Le,Ro,Qt,Ut,Ct):O=="class"||u&&Q=="interface"?(j.marked="keyword",H(lt("form",O=="class"?O:Q),Sa,Ct)):O=="variable"?u&&Q=="declare"?(j.marked="keyword",H(Qt)):u&&(Q=="module"||Q=="enum"||Q=="type")&&j.stream.match(/^\s*\w/,!1)?(j.marked="keyword",Q=="enum"?H(wt):Q=="type"?H(Ea,Ze("operator"),$t,Ze(";")):H(lt("form"),Gn,Ze("{"),lt("}"),di,Ct,Ct)):u&&Q=="namespace"?(j.marked="keyword",H(lt("form"),Bt,Qt,Ct)):u&&Q=="abstract"?(j.marked="keyword",H(Qt)):H(lt("stat"),ro):O=="switch"?H(lt("form"),Yn,Ze("{"),lt("}","switch"),Le,di,Ct,Ct,Ut):O=="case"?H(Bt,Ze(":")):O=="default"?H(Ze(":")):O=="catch"?H(lt("form"),Be,yi,Qt,Ct,Ut):O=="export"?H(lt("stat"),ss,Ct):O=="import"?H(lt("stat"),as,Ct):O=="async"?H(Qt):Q=="@"?H(Bt,Qt):le(lt("stat"),Bt,Ze(";"),Ct)}function yi(O){if(O=="(")return H(Tr,Ze(")"))}function Bt(O,Q){return dn(O,Q,!1)}function Dn(O,Q){return dn(O,Q,!0)}function Yn(O){return O!="("?le():H(lt(")"),Ii,Ze(")"),Ct)}function dn(O,Q,Se){if(j.state.fatArrowAt==j.stream.start){var Ge=Se?Qn:je;if(O=="(")return H(Be,lt(")"),Tn(Tr,")"),Ct,Ze("=>"),Ge,Ut);if(O=="variable")return le(Be,Gn,Ze("=>"),Ge,Ut)}var _e=Se?Jn:Pn;return me.hasOwnProperty(O)?H(_e):O=="function"?H(ur,_e):O=="class"||u&&Q=="interface"?(j.marked="keyword",H(lt("form"),_l,Ct)):O=="keyword c"||O=="async"?H(Se?Dn:Bt):O=="("?H(lt(")"),Ii,Ze(")"),Ct,_e):O=="operator"||O=="spread"?H(Se?Dn:Bt):O=="["?H(lt("]"),Mn,Ct,_e):O=="{"?Vi(zn,"}",null,_e):O=="quasi"?le(_i,_e):O=="new"?H(Ai(Se)):H()}function Ii(O){return O.match(/[;\}\)\],]/)?le():le(Bt)}function Pn(O,Q){return O==","?H(Ii):Jn(O,Q,!1)}function Jn(O,Q,Se){var Ge=Se==!1?Pn:Jn,_e=Se==!1?Bt:Dn;if(O=="=>")return H(Be,Se?Qn:je,Ut);if(O=="operator")return/\+\+|--/.test(Q)||u&&Q=="!"?H(Ge):u&&Q=="<"&&j.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?H(lt(">"),Tn($t,">"),Ct,Ge):Q=="?"?H(Bt,Ze(":"),_e):H(_e);if(O=="quasi")return le(_i,Ge);if(O!=";"){if(O=="(")return Vi(Dn,")","call",Ge);if(O==".")return H(wr,Ge);if(O=="[")return H(lt("]"),Ii,Ze("]"),Ct,Ge);if(u&&Q=="as")return j.marked="keyword",H($t,Ge);if(O=="regexp")return j.state.lastType=j.marked="operator",j.stream.backUp(j.stream.pos-j.stream.start-1),H(_e)}}function _i(O,Q){return O!="quasi"?le():Q.slice(Q.length-2)!="${"?H(_i):H(Ii,Fo)}function Fo(O){if(O=="}")return j.marked="string-2",j.state.tokenize=q,H(_i)}function je(O){return ie(j.stream,j.state),le(O=="{"?Qt:Bt)}function Qn(O){return ie(j.stream,j.state),le(O=="{"?Qt:Dn)}function Ai(O){return function(Q){return Q=="."?H(O?nn:Mi):Q=="variable"&&u?H(Xn,O?Jn:Pn):le(O?Dn:Bt)}}function Mi(O,Q){if(Q=="target")return j.marked="keyword",H(Pn)}function nn(O,Q){if(Q=="target")return j.marked="keyword",H(Jn)}function ro(O){return O==":"?H(Ct,Qt):le(Pn,Ze(";"),Ct)}function wr(O){if(O=="variable")return j.marked="property",H()}function zn(O,Q){if(O=="async")return j.marked="property",H(zn);if(O=="variable"||j.style=="keyword"){if(j.marked="property",Q=="get"||Q=="set")return H(ba);var Se;return u&&j.state.fatArrowAt==j.stream.start&&(Se=j.stream.match(/^\s*:\s*/,!1))&&(j.state.fatArrowAt=j.stream.pos+Se[0].length),H(Er)}else{if(O=="number"||O=="string")return j.marked=s?"property":j.style+" property",H(Er);if(O=="jsonld-keyword")return H(Er);if(u&&pt(Q))return j.marked="keyword",H(zn);if(O=="[")return H(Bt,oi,Ze("]"),Er);if(O=="spread")return H(Dn,Er);if(Q=="*")return j.marked="keyword",H(zn);if(O==":")return le(Er)}}function ba(O){return O!="variable"?le(Er):(j.marked="property",H(ur))}function Er(O){if(O==":")return H(Dn);if(O=="(")return le(ur)}function Tn(O,Q,Se){function Ge(_e,at){if(Se?Se.indexOf(_e)>-1:_e==","){var Xt=j.state.lexical;return Xt.info=="call"&&(Xt.pos=(Xt.pos||0)+1),H(function(Zn,$n){return Zn==Q||$n==Q?le():le(O)},Ge)}return _e==Q||at==Q?H():Se&&Se.indexOf(";")>-1?le(O):H(Ze(Q))}return function(_e,at){return _e==Q||at==Q?H():le(O,Ge)}}function Vi(O,Q,Se){for(var Ge=3;Ge<arguments.length;Ge++)j.cc.push(arguments[Ge]);return H(lt(Q,Se),Tn(O,Q),Ct)}function di(O){return O=="}"?H():le(Qt,di)}function oi(O,Q){if(u){if(O==":")return H($t);if(Q=="?")return H(oi)}}function qr(O,Q){if(u&&(O==":"||Q=="in"))return H($t)}function Bi(O){if(u&&O==":")return j.stream.match(/^\s*\w+\s+is\b/,!1)?H(Bt,wa,$t):H($t)}function wa(O,Q){if(Q=="is")return j.marked="keyword",H()}function $t(O,Q){if(Q=="keyof"||Q=="typeof"||Q=="infer"||Q=="readonly")return j.marked="keyword",H(Q=="typeof"?Dn:$t);if(O=="variable"||Q=="void")return j.marked="type",H(Xi);if(Q=="|"||Q=="&")return H($t);if(O=="string"||O=="number"||O=="atom")return H(Xi);if(O=="[")return H(lt("]"),Tn($t,"]",","),Ct,Xi);if(O=="{")return H(lt("}"),Tt,Ct,Xi);if(O=="(")return H(Tn(bn,")"),os,Xi);if(O=="<")return H(Tn($t,">"),$t);if(O=="quasi")return le(si,Xi)}function os(O){if(O=="=>")return H($t)}function Tt(O){return O.match(/[\}\)\]]/)?H():O==","||O==";"?H(Tt):le(Sr,Tt)}function Sr(O,Q){if(O=="variable"||j.style=="keyword")return j.marked="property",H(Sr);if(Q=="?"||O=="number"||O=="string")return H(Sr);if(O==":")return H($t);if(O=="[")return H(Ze("variable"),qr,Ze("]"),Sr);if(O=="(")return le(Po,Sr);if(!O.match(/[;\}\)\],]/))return H()}function si(O,Q){return O!="quasi"?le():Q.slice(Q.length-2)!="${"?H(si):H($t,fn)}function fn(O){if(O=="}")return j.marked="string-2",j.state.tokenize=q,H(si)}function bn(O,Q){return O=="variable"&&j.stream.match(/^\s*[?:]/,!1)||Q=="?"?H(bn):O==":"?H($t):O=="spread"?H(bn):le($t)}function Xi(O,Q){if(Q=="<")return H(lt(">"),Tn($t,">"),Ct,Xi);if(Q=="|"||O=="."||Q=="&")return H($t);if(O=="[")return H($t,Ze("]"),Xi);if(Q=="extends"||Q=="implements")return j.marked="keyword",H($t);if(Q=="?")return H($t,Ze(":"),$t)}function Xn(O,Q){if(Q=="<")return H(lt(">"),Tn($t,">"),Ct,Xi)}function ki(){return le($t,Ln)}function Ln(O,Q){if(Q=="=")return H($t)}function Zi(O,Q){return Q=="enum"?(j.marked="keyword",H(wt)):le(Gn,oi,st,Ni)}function Gn(O,Q){if(u&&pt(Q))return j.marked="keyword",H(Gn);if(O=="variable")return ht(Q),H();if(O=="spread")return H(Gn);if(O=="[")return Vi(Hi,"]");if(O=="{")return Vi(Dr,"}")}function Dr(O,Q){return O=="variable"&&!j.stream.match(/^\s*:/,!1)?(ht(Q),H(st)):(O=="variable"&&(j.marked="property"),O=="spread"?H(Gn):O=="}"?le():O=="["?H(Bt,Ze("]"),Ze(":"),Dr):H(Ze(":"),Gn,st))}function Hi(){return le(Gn,st)}function st(O,Q){if(Q=="=")return H(Dn)}function Ni(O){if(O==",")return H(Zi)}function Ui(O,Q){if(O=="keyword b"&&Q=="else")return H(lt("form","else"),Qt,Ct)}function Ro(O,Q){if(Q=="await")return H(Ro);if(O=="(")return H(lt(")"),ct,Ct)}function ct(O){return O=="var"?H(Zi,oo):O=="variable"?H(oo):le(oo)}function oo(O,Q){return O==")"?H():O==";"?H(oo):Q=="in"||Q=="of"?(j.marked="keyword",H(Bt,oo)):le(Bt,oo)}function ur(O,Q){if(Q=="*")return j.marked="keyword",H(ur);if(O=="variable")return ht(Q),H(ur);if(O=="(")return H(Be,lt(")"),Tn(Tr,")"),Ct,Bi,Qt,Ut);if(u&&Q=="<")return H(lt(">"),Tn(ki,">"),Ct,ur)}function Po(O,Q){if(Q=="*")return j.marked="keyword",H(Po);if(O=="variable")return ht(Q),H(Po);if(O=="(")return H(Be,lt(")"),Tn(Tr,")"),Ct,Bi,Ut);if(u&&Q=="<")return H(lt(">"),Tn(ki,">"),Ct,Po)}function Ea(O,Q){if(O=="keyword"||O=="variable")return j.marked="type",H(Ea);if(Q=="<")return H(lt(">"),Tn(ki,">"),Ct)}function Tr(O,Q){return Q=="@"&&H(Bt,Tr),O=="spread"?H(Tr):u&&pt(Q)?(j.marked="keyword",H(Tr)):u&&O=="this"?H(oi,st):le(Gn,oi,st)}function _l(O,Q){return O=="variable"?Sa(O,Q):Wr(O,Q)}function Sa(O,Q){if(O=="variable")return ht(Q),H(Wr)}function Wr(O,Q){if(Q=="<")return H(lt(">"),Tn(ki,">"),Ct,Wr);if(Q=="extends"||Q=="implements"||u&&O==",")return Q=="implements"&&(j.marked="keyword"),H(u?$t:Bt,Wr);if(O=="{")return H(lt("}"),Fi,Ct)}function Fi(O,Q){if(O=="async"||O=="variable"&&(Q=="static"||Q=="get"||Q=="set"||u&&pt(Q))&&j.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return j.marked="keyword",H(Fi);if(O=="variable"||j.style=="keyword")return j.marked="property",H(Ir,Fi);if(O=="number"||O=="string")return H(Ir,Fi);if(O=="[")return H(Bt,oi,Ze("]"),Ir,Fi);if(Q=="*")return j.marked="keyword",H(Fi);if(u&&O=="(")return le(Po,Fi);if(O==";"||O==",")return H(Fi);if(O=="}")return H();if(Q=="@")return H(Bt,Fi)}function Ir(O,Q){if(Q=="!"||Q=="?")return H(Ir);if(O==":")return H($t,st);if(Q=="=")return H(Dn);var Se=j.state.lexical.prev,Ge=Se&&Se.info=="interface";return le(Ge?Po:ur)}function ss(O,Q){return Q=="*"?(j.marked="keyword",H(An,Ze(";"))):Q=="default"?(j.marked="keyword",H(Bt,Ze(";"))):O=="{"?H(Tn(Da,"}"),An,Ze(";")):le(Qt)}function Da(O,Q){if(Q=="as")return j.marked="keyword",H(Ze("variable"));if(O=="variable")return le(Dn,Da)}function as(O){return O=="string"?H():O=="("?le(Bt):O=="."?le(Pn):le(Ta,dr,An)}function Ta(O,Q){return O=="{"?Vi(Ta,"}"):(O=="variable"&&ht(Q),Q=="*"&&(j.marked="keyword"),H(vn))}function dr(O){if(O==",")return H(Ta,dr)}function vn(O,Q){if(Q=="as")return j.marked="keyword",H(Ta)}function An(O,Q){if(Q=="from")return j.marked="keyword",H(Bt)}function Mn(O){return O=="]"?H():le(Tn(Dn,"]"))}function wt(){return le(lt("form"),Gn,Ze("{"),lt("}"),Tn(Ar,"}"),Ct,Ct)}function Ar(){return le(Gn,st)}function ls(O,Q){return O.lastType=="operator"||O.lastType==","||C.test(Q.charAt(0))||/[,.]/.test(Q.charAt(0))}function fr(O,Q,Se){return Q.tokenize==k&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Q.lastType)||Q.lastType=="quasi"&&/\{\s*$/.test(O.string.slice(0,O.pos-(Se||0)))}return{startState:function(O){var Q={tokenize:k,lastType:"sof",cc:[],lexical:new ye((O||0)-i,0,"block",!1),localVars:n.localVars,context:n.localVars&&new _t(null,null,!1),indented:O||0};return n.globalVars&&typeof n.globalVars=="object"&&(Q.globalVars=n.globalVars),Q},token:function(O,Q){if(O.sol()&&(Q.lexical.hasOwnProperty("align")||(Q.lexical.align=!1),Q.indented=O.indentation(),ie(O,Q)),Q.tokenize!=$&&O.eatSpace())return null;var Se=Q.tokenize(O,Q);return A=="comment"?Se:(Q.lastType=A=="operator"&&(N=="++"||N=="--")?"incdec":A,Te(Q,Se,A,N,O))},indent:function(O,Q){if(O.tokenize==$||O.tokenize==q)return t.Pass;if(O.tokenize!=k)return 0;var Se=Q&&Q.charAt(0),Ge=O.lexical,_e;if(!/^\s*else\b/.test(Q))for(var at=O.cc.length-1;at>=0;--at){var Xt=O.cc[at];if(Xt==Ct)Ge=Ge.prev;else if(Xt!=Ui&&Xt!=Ut)break}for(;(Ge.type=="stat"||Ge.type=="form")&&(Se=="}"||(_e=O.cc[O.cc.length-1])&&(_e==Pn||_e==Jn)&&!/^[,\.=+\-*:?[\(]/.test(Q));)Ge=Ge.prev;r&&Ge.type==")"&&Ge.prev.type=="stat"&&(Ge=Ge.prev);var Zn=Ge.type,$n=Se==Zn;return Zn=="vardef"?Ge.indented+(O.lastType=="operator"||O.lastType==","?Ge.info.length+1:0):Zn=="form"&&Se=="{"?Ge.indented:Zn=="form"?Ge.indented+i:Zn=="stat"?Ge.indented+(ls(O,Q)?r||i:0):Ge.info=="switch"&&!$n&&n.doubleIndentSwitch!=!1?Ge.indented+(/^(?:case|default)\b/.test(Q)?i:2*i):Ge.align?Ge.column+($n?0:1):Ge.indented+($n?0:i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:a?null:"/*",blockCommentEnd:a?null:"*/",blockCommentContinue:a?null:" * ",lineComment:a?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:a?"json":"javascript",jsonldMode:s,jsonMode:a,expressionAllowed:fr,skipExpression:function(O){Te(O,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var XR=Jt((JR,QR)=>{(function(t){typeof JR=="object"&&typeof QR=="object"?t(sh()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){var e={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},n=t.Pos;t.defineOption("autoCloseBrackets",!1,function(N,R,k){k&&k!=t.Init&&(N.removeKeyMap(r),N.state.closeBrackets=null),R&&(s(i(R,"pairs")),N.state.closeBrackets=R,N.addKeyMap(r))});function i(N,R){return R=="pairs"&&typeof N=="string"?N:typeof N=="object"&&N[R]!=null?N[R]:e[R]}var r={Backspace:u,Enter:p};function s(N){for(var R=0;R<N.length;R++){var k=N.charAt(R),B="'"+k+"'";r[B]||(r[B]=a(k))}}s(e.pairs+"`");function a(N){return function(R){return x(R,N)}}function c(N){var R=N.state.closeBrackets;if(!R||R.override)return R;var k=N.getModeAt(N.getCursor());return k.closeBrackets||R}function u(N){var R=c(N);if(!R||N.getOption("disableInput"))return t.Pass;for(var k=i(R,"pairs"),B=N.listSelections(),$=0;$<B.length;$++){if(!B[$].empty())return t.Pass;var q=E(N,B[$].head);if(!q||k.indexOf(q)%2!=0)return t.Pass}for(var $=B.length-1;$>=0;$--){var X=B[$].head;N.replaceRange("",n(X.line,X.ch-1),n(X.line,X.ch+1),"+delete")}}function p(N){var R=c(N),k=R&&i(R,"explode");if(!k||N.getOption("disableInput"))return t.Pass;for(var B=N.listSelections(),$=0;$<B.length;$++){if(!B[$].empty())return t.Pass;var q=E(N,B[$].head);if(!q||k.indexOf(q)%2!=0)return t.Pass}N.operation(function(){var X=N.lineSeparator()||`
`;N.replaceSelection(X+X,null),m(N,-1),B=N.listSelections();for(var ie=0;ie<B.length;ie++){var me=B[ie].head.line;N.indentLine(me,null,!0),N.indentLine(me+1,null,!0)}})}function m(N,R){for(var k=[],B=N.listSelections(),$=0,q=0;q<B.length;q++){var X=B[q];X.head==N.getCursor()&&($=q);var ie=X.head.ch||R>0?{line:X.head.line,ch:X.head.ch+R}:{line:X.head.line-1};k.push({anchor:ie,head:ie})}N.setSelections(k,$)}function C(N){var R=t.cmpPos(N.anchor,N.head)>0;return{anchor:new n(N.anchor.line,N.anchor.ch+(R?-1:1)),head:new n(N.head.line,N.head.ch+(R?1:-1))}}function x(N,R){var k=c(N);if(!k||N.getOption("disableInput"))return t.Pass;var B=i(k,"pairs"),$=B.indexOf(R);if($==-1)return t.Pass;for(var q=i(k,"closeBefore"),X=i(k,"triples"),ie=B.charAt($+1)==R,me=N.listSelections(),ye=$%2==0,ge,Te=0;Te<me.length;Te++){var j=me[Te],le=j.head,H,Ae=N.getRange(le,n(le.line,le.ch+1));if(ye&&!j.empty())H="surround";else if((ie||!ye)&&Ae==R)ie&&A(N,le)?H="both":X.indexOf(R)>=0&&N.getRange(le,n(le.line,le.ch+3))==R+R+R?H="skipThree":H="skip";else if(ie&&le.ch>1&&X.indexOf(R)>=0&&N.getRange(n(le.line,le.ch-2),le)==R+R){if(le.ch>2&&/\bstring/.test(N.getTokenTypeAt(n(le.line,le.ch-2))))return t.Pass;H="addFour"}else if(ie){var ht=le.ch==0?" ":N.getRange(n(le.line,le.ch-1),le);if(!t.isWordChar(Ae)&&ht!=R&&!t.isWordChar(ht))H="both";else return t.Pass}else if(ye&&(Ae.length===0||/\s/.test(Ae)||q.indexOf(Ae)>-1))H="both";else return t.Pass;if(!ge)ge=H;else if(ge!=H)return t.Pass}var Xe=$%2?B.charAt($-1):R,pt=$%2?R:B.charAt($+1);N.operation(function(){if(ge=="skip")m(N,1);else if(ge=="skipThree")m(N,3);else if(ge=="surround"){for(var _t=N.getSelections(),be=0;be<_t.length;be++)_t[be]=Xe+_t[be]+pt;N.replaceSelections(_t,"around"),_t=N.listSelections().slice();for(var be=0;be<_t.length;be++)_t[be]=C(_t[be]);N.setSelections(_t)}else ge=="both"?(N.replaceSelection(Xe+pt,null),N.triggerElectric(Xe+pt),m(N,-1)):ge=="addFour"&&(N.replaceSelection(Xe+Xe+Xe+Xe,"before"),m(N,1))})}function E(N,R){var k=N.getRange(n(R.line,R.ch-1),n(R.line,R.ch+1));return k.length==2?k:null}function A(N,R){var k=N.getTokenAt(n(R.line,R.ch+1));return/\bstring/.test(k.type)&&k.start==R.ch&&(R.ch==0||!/\bstring/.test(N.getTokenTypeAt(R)))}})});var tP=Jt((ZR,eP)=>{(function(t){typeof ZR=="object"&&typeof eP=="object"?t(sh()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){var e=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),n=t.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function r(m){return m&&m.bracketRegex||/[(){}[\]]/}function s(m,C,x){var E=m.getLineHandle(C.line),A=C.ch-1,N=x&&x.afterCursor;N==null&&(N=/(^| )cm-fat-cursor($| )/.test(m.getWrapperElement().className));var R=r(x),k=!N&&A>=0&&R.test(E.text.charAt(A))&&i[E.text.charAt(A)]||R.test(E.text.charAt(A+1))&&i[E.text.charAt(++A)];if(!k)return null;var B=k.charAt(1)==">"?1:-1;if(x&&x.strict&&B>0!=(A==C.ch))return null;var $=m.getTokenTypeAt(n(C.line,A+1)),q=a(m,n(C.line,A+(B>0?1:0)),B,$,x);return q==null?null:{from:n(C.line,A),to:q&&q.pos,match:q&&q.ch==k.charAt(0),forward:B>0}}function a(m,C,x,E,A){for(var N=A&&A.maxScanLineLength||1e4,R=A&&A.maxScanLines||1e3,k=[],B=r(A),$=x>0?Math.min(C.line+R,m.lastLine()+1):Math.max(m.firstLine()-1,C.line-R),q=C.line;q!=$;q+=x){var X=m.getLine(q);if(X){var ie=x>0?0:X.length-1,me=x>0?X.length:-1;if(!(X.length>N))for(q==C.line&&(ie=C.ch-(x<0?1:0));ie!=me;ie+=x){var ye=X.charAt(ie);if(B.test(ye)&&(E===void 0||(m.getTokenTypeAt(n(q,ie+1))||"")==(E||""))){var ge=i[ye];if(ge&&ge.charAt(1)==">"==x>0)k.push(ye);else if(k.length)k.pop();else return{pos:n(q,ie),ch:ye}}}}}return q-x==(x>0?m.lastLine():m.firstLine())?!1:null}function c(m,C,x){for(var E=m.state.matchBrackets.maxHighlightLineLength||1e3,A=x&&x.highlightNonMatching,N=[],R=m.listSelections(),k=0;k<R.length;k++){var B=R[k].empty()&&s(m,R[k].head,x);if(B&&(B.match||A!==!1)&&m.getLine(B.from.line).length<=E){var $=B.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";N.push(m.markText(B.from,n(B.from.line,B.from.ch+1),{className:$})),B.to&&m.getLine(B.to.line).length<=E&&N.push(m.markText(B.to,n(B.to.line,B.to.ch+1),{className:$}))}}if(N.length){e&&m.state.focused&&m.focus();var q=function(){m.operation(function(){for(var X=0;X<N.length;X++)N[X].clear()})};if(C)setTimeout(q,800);else return q}}function u(m){m.operation(function(){m.state.matchBrackets.currentlyHighlighted&&(m.state.matchBrackets.currentlyHighlighted(),m.state.matchBrackets.currentlyHighlighted=null),m.state.matchBrackets.currentlyHighlighted=c(m,!1,m.state.matchBrackets)})}function p(m){m.state.matchBrackets&&m.state.matchBrackets.currentlyHighlighted&&(m.state.matchBrackets.currentlyHighlighted(),m.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(m,C,x){x&&x!=t.Init&&(m.off("cursorActivity",u),m.off("focus",u),m.off("blur",p),p(m)),C&&(m.state.matchBrackets=typeof C=="object"?C:{},m.on("cursorActivity",u),m.on("focus",u),m.on("blur",p))}),t.defineExtension("matchBrackets",function(){c(this,!0)}),t.defineExtension("findMatchingBracket",function(m,C,x){return(x||typeof C=="boolean")&&(x?(x.strict=C,C=x):C=C?{strict:!0}:null),s(this,m,C)}),t.defineExtension("scanForBracket",function(m,C,x,E){return a(this,m,C,x,E)})})});var nr=null,tm=!1,hC=1,q3=null,ir=Symbol("SIGNAL");function Lt(t){let e=nr;return nr=t,e}function im(){return nr}var mu={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function bf(t){if(tm)throw new Error("");if(nr===null)return;nr.consumerOnSignalRead(t);let e=nr.producersTail;if(e!==void 0&&e.producer===t)return;let n,i=nr.recomputing;if(i&&(n=e!==void 0?e.nextProducer:nr.producers,n!==void 0&&n.producer===t)){nr.producersTail=n,n.lastReadVersion=t.version;return}let r=t.consumersTail;if(r!==void 0&&r.consumer===nr&&(!i||j3(r,nr)))return;let s=vu(nr),a={producer:t,consumer:nr,nextProducer:n,prevConsumer:r,lastReadVersion:t.version,nextConsumer:void 0};nr.producersTail=a,e!==void 0?e.nextProducer=a:nr.producers=a,s&&rD(t,a)}function tD(){hC++}function mC(t){if(!(vu(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===hC)){if(!t.producerMustRecompute(t)&&!Ef(t)){pC(t);return}t.producerRecomputeValue(t),pC(t)}}function gC(t){if(t.consumers===void 0)return;let e=tm;tm=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let i=n.consumer;i.dirty||W3(i)}}finally{tm=e}}function vC(){return nr?.consumerAllowSignalWrites!==!1}function W3(t){t.dirty=!0,gC(t),t.consumerMarkedDirty?.(t)}function pC(t){t.dirty=!1,t.lastCleanEpoch=hC}function gu(t){return t&&nD(t),Lt(t)}function nD(t){t.producersTail=void 0,t.recomputing=!0}function wf(t,e){Lt(e),t&&iD(t)}function iD(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(vu(t))do n=yC(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Ef(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,i=e.lastReadVersion;if(i!==n.version||(mC(n),i!==n.version))return!0}return!1}function Kl(t){if(vu(t)){let e=t.producers;for(;e!==void 0;)e=yC(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function rD(t,e){let n=t.consumersTail,i=vu(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!i)for(let r=t.producers;r!==void 0;r=r.nextProducer)rD(r.producer,r)}function yC(t){let e=t.producer,n=t.nextProducer,i=t.nextConsumer,r=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!vu(e)){let s=e.producers;for(;s!==void 0;)s=yC(s)}return n}function vu(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function _C(t){q3?.(t)}function j3(t,e){let n=e.producersTail;if(n!==void 0){let i=e.producers;do{if(i===t)return!0;if(i===n)break;i=i.nextProducer}while(i!==void 0)}return!1}function CC(t,e){return Object.is(t,e)}function Sf(t,e){let n=Object.create(K3);n.computation=t,e!==void 0&&(n.equal=e);let i=()=>{if(mC(n),bf(n),n.value===nm)throw n.error;return n.value};return i[ir]=n,_C(n),i}var dC=Symbol("UNSET"),fC=Symbol("COMPUTING"),nm=Symbol("ERRORED"),K3=Ht(xt({},mu),{value:dC,dirty:!0,error:null,equal:CC,kind:"computed",producerMustRecompute(t){return t.value===dC||t.value===fC},producerRecomputeValue(t){if(t.value===fC)throw new Error("");let e=t.value;t.value=fC;let n=gu(t),i,r=!1;try{i=t.computation(),Lt(null),r=e!==dC&&e!==nm&&i!==nm&&t.equal(e,i)}catch(s){i=nm,t.error=s}finally{wf(t,n)}if(r){t.value=e;return}t.value=i,t.version++}});function Y3(){throw new Error}var oD=Y3;function sD(t){oD(t)}function xC(t){oD=t}var J3=null;function bC(t,e){let n=Object.create(rm);n.value=t,e!==void 0&&(n.equal=e);let i=()=>aD(n);return i[ir]=n,_C(n),[i,a=>Df(n,a),a=>lD(n,a)]}function aD(t){return bf(t),t.value}function Df(t,e){vC()||sD(t),t.equal(t.value,e)||(t.value=e,Q3(t))}function lD(t,e){vC()||sD(t),Df(t,e(t.value))}var rm=Ht(xt({},mu),{equal:CC,value:void 0,kind:"signal"});function Q3(t){t.version++,tD(),gC(t),J3?.(t)}function wC(t){let e=Lt(null);try{return t()}finally{Lt(e)}}var EC=Ht(xt({},mu),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function SC(t){if(t.dirty=!1,t.version>0&&!Ef(t))return;t.version++;let e=gu(t);try{t.cleanup(),t.fn()}finally{wf(t,e)}}function jt(t){return typeof t=="function"}function yu(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var om=yu(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Yl(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Wi=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(jt(i))try{i()}catch(s){e=s instanceof om?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{cD(s)}catch(a){e=e??[],a instanceof om?e=[...e,...a.errors]:e.push(a)}}if(e)throw new om(e)}}add(e){var n;if(e&&e!==this)if(this.closed)cD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Yl(n,e)}remove(e){let{_finalizers:n}=this;n&&Yl(n,e),e instanceof t&&e._removeParent(this)}};Wi.EMPTY=(()=>{let t=new Wi;return t.closed=!0,t})();var DC=Wi.EMPTY;function sm(t){return t instanceof Wi||t&&"closed"in t&&jt(t.remove)&&jt(t.add)&&jt(t.unsubscribe)}function cD(t){jt(t)?t():t.unsubscribe()}var Uo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var _u={setTimeout(t,e,...n){let{delegate:i}=_u;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=_u;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function am(t){_u.setTimeout(()=>{let{onUnhandledError:e}=Uo;if(e)e(t);else throw t})}function Jl(){}var uD=TC("C",void 0,void 0);function dD(t){return TC("E",void 0,t)}function fD(t){return TC("N",t,void 0)}function TC(t,e,n){return{kind:t,value:e,error:n}}var Ql=null;function Cu(t){if(Uo.useDeprecatedSynchronousErrorHandling){let e=!Ql;if(e&&(Ql={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Ql;if(Ql=null,n)throw i}}else t()}function pD(t){Uo.useDeprecatedSynchronousErrorHandling&&Ql&&(Ql.errorThrown=!0,Ql.error=t)}var Xl=class extends Wi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sm(e)&&e.add(this)):this.destination=eL}static create(e,n,i){return new xu(e,n,i)}next(e){this.isStopped?AC(fD(e),this):this._next(e)}error(e){this.isStopped?AC(dD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?AC(uD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},X3=Function.prototype.bind;function IC(t,e){return X3.call(t,e)}var MC=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){lm(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){lm(i)}else lm(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){lm(n)}}},xu=class extends Xl{constructor(e,n,i){super();let r;if(jt(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&Uo.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&IC(e.next,s),error:e.error&&IC(e.error,s),complete:e.complete&&IC(e.complete,s)}):r=e}this.destination=new MC(r)}};function lm(t){Uo.useDeprecatedSynchronousErrorHandling?pD(t):am(t)}function Z3(t){throw t}function AC(t,e){let{onStoppedNotification:n}=Uo;n&&_u.setTimeout(()=>n(t,e))}var eL={closed:!0,next:Jl,error:Z3,complete:Jl};var bu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qr(t){return t}function tL(...t){return kC(t)}function kC(t){return t.length===0?Qr:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var un=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let s=iL(n)?n:new xu(n,i,r);return Cu(()=>{let{operator:a,source:c}=this;s.add(a?a.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=hD(i),new i((r,s)=>{let a=new xu({next:c=>{try{n(c)}catch(u){s(u),a.unsubscribe()}},error:s,complete:r});this.subscribe(a)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[bu](){return this}pipe(...n){return kC(n)(this)}toPromise(n){return n=hD(n),new n((i,r)=>{let s;this.subscribe(a=>s=a,a=>r(a),()=>i(s))})}}return t.create=e=>new t(e),t})();function hD(t){var e;return(e=t??Uo.Promise)!==null&&e!==void 0?e:Promise}function nL(t){return t&&jt(t.next)&&jt(t.error)&&jt(t.complete)}function iL(t){return t&&t instanceof Xl||nL(t)&&sm(t)}function rL(t){return jt(t?.lift)}function sn(t){return e=>{if(rL(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function an(t,e,n,i,r){return new NC(t,e,n,i,r)}var NC=class extends Xl{constructor(e,n,i,r,s,a){super(e),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=r?function(c){try{r(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var mD=yu(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ji=(()=>{class t extends un{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new cm(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new mD}next(n){Cu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Cu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Cu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:s}=this;return i||r?DC:(this.currentObservers=null,s.push(n),new Wi(()=>{this.currentObservers=null,Yl(s,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){let n=new un;return n.source=this,n}}return t.create=(e,n)=>new cm(e,n),t})(),cm=class extends ji{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:DC}};var Zl=class extends ji{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var FC={now(){return(FC.delegate||Date).now()},delegate:void 0};var um=class extends Wi{constructor(e,n){super()}schedule(e,n=0){return this}};var Tf={setInterval(t,e,...n){let{delegate:i}=Tf;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Tf;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var dm=class extends um{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return Tf.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Tf.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Yl(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var wu=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};wu.now=FC.now;var fm=class extends wu{constructor(e,n=wu.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var If=new fm(dm),gD=If;var Af=new un(t=>t.complete());function pm(t){return t&&jt(t.schedule)}function vD(t){return t[t.length-1]}function hm(t){return jt(vD(t))?t.pop():void 0}function Wa(t){return pm(vD(t))?t.pop():void 0}function _D(t,e,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(m){try{p(i.next(m))}catch(C){a(C)}}function u(m){try{p(i.throw(m))}catch(C){a(C)}}function p(m){m.done?s(m.value):r(m.value).then(c,u)}p((i=i.apply(t,e||[])).next())})}function yD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ec(t){return this instanceof ec?(this.v=t,this):new ec(t)}function CD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(E){return function(A){return Promise.resolve(A).then(E,C)}}function c(E,A){i[E]&&(r[E]=function(N){return new Promise(function(R,k){s.push([E,N,R,k])>1||u(E,N)})},A&&(r[E]=A(r[E])))}function u(E,A){try{p(i[E](A))}catch(N){x(s[0][3],N)}}function p(E){E.value instanceof ec?Promise.resolve(E.value.v).then(m,C):x(s[0][2],E)}function m(E){u("next",E)}function C(E){u("throw",E)}function x(E,A){E(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function xD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof yD=="function"?yD(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(c,u){a=t[s](a),r(c,u,a.done,a.value)})}}function r(s,a,c,u){Promise.resolve(u).then(function(p){s({value:p,done:c})},a)}}var mm=t=>t&&typeof t.length=="number"&&typeof t!="function";function gm(t){return jt(t?.then)}function vm(t){return jt(t[bu])}function ym(t){return Symbol.asyncIterator&&jt(t?.[Symbol.asyncIterator])}function _m(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function oL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cm=oL();function xm(t){return jt(t?.[Cm])}function bm(t){return CD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield ec(n.read());if(r)return yield ec(void 0);yield yield ec(i)}}finally{n.releaseLock()}})}function wm(t){return jt(t?.getReader)}function ti(t){if(t instanceof un)return t;if(t!=null){if(vm(t))return sL(t);if(mm(t))return aL(t);if(gm(t))return lL(t);if(ym(t))return bD(t);if(xm(t))return cL(t);if(wm(t))return uL(t)}throw _m(t)}function sL(t){return new un(e=>{let n=t[bu]();if(jt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aL(t){return new un(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function lL(t){return new un(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,am)})}function cL(t){return new un(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function bD(t){return new un(e=>{dL(t,e).catch(n=>e.error(n))})}function uL(t){return bD(bm(t))}function dL(t,e){var n,i,r,s;return _D(this,void 0,void 0,function*(){try{for(n=xD(t);i=yield n.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})}function Pr(t,e,n,i=0,r=!1){let s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function Em(t,e=0){return sn((n,i)=>{n.subscribe(an(i,r=>Pr(i,t,()=>i.next(r),e),()=>Pr(i,t,()=>i.complete(),e),r=>Pr(i,t,()=>i.error(r),e)))})}function Sm(t,e=0){return sn((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function wD(t,e){return ti(t).pipe(Sm(e),Em(e))}function ED(t,e){return ti(t).pipe(Sm(e),Em(e))}function SD(t,e){return new un(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function DD(t,e){return new un(n=>{let i;return Pr(n,e,()=>{i=t[Cm](),Pr(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(a){n.error(a);return}s?n.complete():n.next(r)},0,!0)}),()=>jt(i?.return)&&i.return()})}function Dm(t,e){if(!t)throw new Error("Iterable cannot be null");return new un(n=>{Pr(n,e,()=>{let i=t[Symbol.asyncIterator]();Pr(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function TD(t,e){return Dm(bm(t),e)}function ID(t,e){if(t!=null){if(vm(t))return wD(t,e);if(mm(t))return SD(t,e);if(gm(t))return ED(t,e);if(ym(t))return Dm(t,e);if(xm(t))return DD(t,e);if(wm(t))return TD(t,e)}throw _m(t)}function Wn(t,e){return e?ID(t,e):ti(t)}function Li(...t){let e=Wa(t);return Wn(t,e)}function RC(t,e){let n=jt(t)?t:()=>t,i=r=>r.error(n());return new un(e?r=>e.schedule(i,0,r):i)}function fL(t){return!!t&&(t instanceof un||jt(t.lift)&&jt(t.subscribe))}var tc=yu(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ja(t,e){let n=typeof e=="object";return new Promise((i,r)=>{let s=!1,a;t.subscribe({next:c=>{a=c,s=!0},error:r,complete:()=>{s?i(a):n?i(e.defaultValue):r(new tc)}})})}function AD(t){return t instanceof Date&&!isNaN(t)}function ni(t,e){return sn((n,i)=>{let r=0;n.subscribe(an(i,s=>{i.next(t.call(e,s,r++))}))})}var{isArray:pL}=Array;function hL(t,e){return pL(e)?t(...e):t(e)}function Tm(t){return ni(e=>hL(t,e))}var{isArray:mL}=Array,{getPrototypeOf:gL,prototype:vL,keys:yL}=Object;function Im(t){if(t.length===1){let e=t[0];if(mL(e))return{args:e,keys:null};if(_L(e)){let n=yL(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function _L(t){return t&&typeof t=="object"&&gL(t)===vL}function Am(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function CL(...t){let e=Wa(t),n=hm(t),{args:i,keys:r}=Im(t);if(i.length===0)return Wn([],e);let s=new un(xL(i,e,r?a=>Am(r,a):Qr));return n?s.pipe(Tm(n)):s}function xL(t,e,n=Qr){return i=>{MD(e,()=>{let{length:r}=t,s=new Array(r),a=r,c=r;for(let u=0;u<r;u++)MD(e,()=>{let p=Wn(t[u],e),m=!1;p.subscribe(an(i,C=>{s[u]=C,m||(m=!0,c--),c||i.next(n(s.slice()))},()=>{--a||i.complete()}))},i)},i)}}function MD(t,e,n){t?Pr(n,t,e):e()}function kD(t,e,n,i,r,s,a,c){let u=[],p=0,m=0,C=!1,x=()=>{C&&!u.length&&!p&&e.complete()},E=N=>p<i?A(N):u.push(N),A=N=>{s&&e.next(N),p++;let R=!1;ti(n(N,m++)).subscribe(an(e,k=>{r?.(k),s?E(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(p--;u.length&&p<i;){let k=u.shift();a?Pr(e,a,()=>A(k)):A(k)}x()}catch(k){e.error(k)}}))};return t.subscribe(an(e,E,()=>{C=!0,x()})),()=>{c?.()}}function Ys(t,e,n=1/0){return jt(e)?Ys((i,r)=>ni((s,a)=>e(i,s,r,a))(ti(t(i,r))),n):(typeof e=="number"&&(n=e),sn((i,r)=>kD(i,r,t,n)))}function PC(t=1/0){return Ys(Qr,t)}function ND(){return PC(1)}function Eu(...t){return ND()(Wn(t,Wa(t)))}function bL(t){return new un(e=>{ti(t()).subscribe(e)})}function LC(...t){let e=hm(t),{args:n,keys:i}=Im(t),r=new un(s=>{let{length:a}=n;if(!a){s.complete();return}let c=new Array(a),u=a,p=a;for(let m=0;m<a;m++){let C=!1;ti(n[m]).subscribe(an(s,x=>{C||(C=!0,p--),c[m]=x},()=>u--,void 0,()=>{(!u||!C)&&(p||s.next(i?Am(i,c):c),s.complete())}))}});return e?r.pipe(Tm(e)):r}function FD(t=0,e,n=gD){let i=-1;return e!=null&&(pm(e)?n=e:i=e),new un(r=>{let s=AD(t)?+t-n.now():t;s<0&&(s=0);let a=0;return n.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Mf(t,e){return sn((n,i)=>{let r=0;n.subscribe(an(i,s=>t.call(e,s,r++)&&i.next(s)))})}function Ka(t){return sn((e,n)=>{let i=null,r=!1,s;i=e.subscribe(an(n,void 0,void 0,a=>{s=ti(t(a,Ka(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function OC(t,e){return jt(e)?Ys(t,e,1):Ys(t,1)}function kf(t,e=If){return sn((n,i)=>{let r=null,s=null,a=null,c=()=>{if(r){r.unsubscribe(),r=null;let p=s;s=null,i.next(p)}};function u(){let p=a+t,m=e.now();if(m<p){r=this.schedule(void 0,p-m),i.add(r);return}c()}n.subscribe(an(i,p=>{s=p,a=e.now(),r||(r=e.schedule(u,t),i.add(r))},()=>{c(),i.complete()},void 0,()=>{s=r=null}))})}function RD(t){return sn((e,n)=>{let i=!1;e.subscribe(an(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Ya(t){return t<=0?()=>Af:sn((e,n)=>{let i=0;e.subscribe(an(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function PD(){return sn((t,e)=>{t.subscribe(an(e,Jl))})}function LD(t){return ni(()=>t)}function VC(t,e){return e?n=>Eu(e.pipe(Ya(1),PD()),n.pipe(VC(t))):Ys((n,i)=>ti(t(n,i)).pipe(Ya(1),LD(n)))}function BC(t,e=If){let n=FD(t,e);return VC(()=>n)}function Nf(t,e=Qr){return t=t??wL,sn((n,i)=>{let r,s=!0;n.subscribe(an(i,a=>{let c=e(a);(s||!t(r,c))&&(s=!1,r=c,i.next(a))}))})}function wL(t,e){return t===e}function OD(t=EL){return sn((e,n)=>{let i=!1;e.subscribe(an(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function EL(){return new tc}function nc(t){return sn((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function SL(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Mf((r,s)=>t(r,s,i)):Qr,Ya(1),n?RD(e):OD(()=>new tc))}function DL(t){return t<=0?()=>Af:sn((e,n)=>{let i=[];e.subscribe(an(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function TL(...t){let e=Wa(t);return sn((n,i)=>{(e?Eu(t,n,e):Eu(t,n)).subscribe(i)})}function HC(t,e){return sn((n,i)=>{let r=null,s=0,a=!1,c=()=>a&&!r&&i.complete();n.subscribe(an(i,u=>{r?.unsubscribe();let p=0,m=s++;ti(t(u,m)).subscribe(r=an(i,C=>i.next(e?e(u,C,m,p++):C),()=>{r=null,c()}))},()=>{a=!0,c()}))})}function Mm(t){return sn((e,n)=>{ti(t).subscribe(an(n,()=>n.complete(),Jl)),!n.closed&&e.subscribe(n)})}function Ff(t,e,n){let i=jt(t)||e||n?{next:t,error:e,complete:n}:t;return i?sn((r,s)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let c=!0;r.subscribe(an(s,u=>{var p;(p=i.next)===null||p===void 0||p.call(i,u),s.next(u)},()=>{var u;c=!1,(u=i.complete)===null||u===void 0||u.call(i),s.complete()},u=>{var p;c=!1,(p=i.error)===null||p===void 0||p.call(i,u),s.error(u)},()=>{var u,p;c&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(p=i.finalize)===null||p===void 0||p.call(i)}))}):Qr}var UC;function km(){return UC}function bs(t){let e=UC;return UC=t,e}var VD=Symbol("NotFound");function Su(t){return t===VD||t?.name==="\u0275NotFound"}var Vm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",St=class extends Error{code;constructor(e,n){super(ws(e,n)),this.code=e}};function IL(t){return`NG0${Math.abs(t)}`}function ws(t,e){return`${IL(t)}${e?": "+e:""}`}var yo=globalThis;function _n(t){for(let e in t)if(t[e]===_n)return e;throw Error("")}function GD(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Qs(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Qs).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let i=n.indexOf(`
`);return i>=0?n.slice(0,i):n}function Bm(t,e){return t?e?`${t} ${e}`:t:e||""}var AL=_n({__forward_ref__:_n});function _o(t){return t.__forward_ref__=_o,t.toString=function(){return Qs(this())},t}function Ki(t){return ex(t)?t():t}function ex(t){return typeof t=="function"&&t.hasOwnProperty(AL)&&t.__forward_ref__===_o}function Fe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Es(t){return{providers:t.providers||[],imports:t.imports||[]}}function Hf(t){return kL(t,Hm)}function ML(t){return Hf(t)!==null}function kL(t,e){return t.hasOwnProperty(e)&&t[e]||null}function NL(t){let e=t?.[Hm]??null;return e||null}function GC(t){return t&&t.hasOwnProperty(Fm)?t[Fm]:null}var Hm=_n({\u0275prov:_n}),Fm=_n({\u0275inj:_n}),Mt=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Fe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function tx(t){return t&&!!t.\u0275providers}var nx=_n({\u0275cmp:_n}),ix=_n({\u0275dir:_n}),rx=_n({\u0275pipe:_n}),ox=_n({\u0275mod:_n}),Pf=_n({\u0275fac:_n}),ac=_n({__NG_ELEMENT_ID__:_n}),BD=_n({__NG_ENV_ID__:_n});function sx(t){return Um(t,"@NgModule"),t[ox]||null}function Zs(t){return Um(t,"@Component"),t[nx]||null}function ax(t){return Um(t,"@Directive"),t[ix]||null}function $D(t){return Um(t,"@Pipe"),t[rx]||null}function Um(t,e){if(t==null)throw new St(-919,!1)}function Za(t){return typeof t=="string"?t:t==null?"":String(t)}function qD(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Za(t)}var WD=_n({ngErrorCode:_n}),FL=_n({ngErrorMessage:_n}),RL=_n({ngTokenPath:_n});function lx(t,e){return jD("",-200,e)}function zm(t,e){throw new St(-201,!1)}function jD(t,e,n){let i=new St(e,t);return i[WD]=e,i[FL]=t,n&&(i[RL]=n),i}function PL(t){return t[WD]}var $C;function KD(){return $C}function vr(t){let e=$C;return $C=t,e}function cx(t,e,n){let i=Hf(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&8)return null;if(e!==void 0)return e;zm(t,"")}var LL={},ic=LL,OL="__NG_DI_FLAG__",qC=class{injector;constructor(e){this.injector=e}retrieve(e,n){let i=rc(n)||0;try{return this.injector.get(e,i&8?null:ic,i)}catch(r){if(Su(r))return r;throw r}}};function VL(t,e=0){let n=km();if(n===void 0)throw new St(-203,!1);if(n===null)return cx(t,void 0,e);{let i=BL(e),r=n.retrieve(t,i);if(Su(r)){if(i.optional)return null;throw r}return r}}function Dt(t,e=0){return(KD()||VL)(Ki(t),e)}function he(t,e){return Dt(t,rc(e))}function rc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function BL(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function WC(t){let e=[];for(let n=0;n<t.length;n++){let i=Ki(t[n]);if(Array.isArray(i)){if(i.length===0)throw new St(900,!1);let r,s=0;for(let a=0;a<i.length;a++){let c=i[a],u=HL(c);typeof u=="number"?u===-1?r=c.token:s|=u:r=c}e.push(Dt(r,s))}else e.push(Dt(i))}return e}function HL(t){return t[OL]}function Ja(t,e){let n=t.hasOwnProperty(Pf);return n?t[Pf]:null}function YD(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}function JD(t){return t.flat(Number.POSITIVE_INFINITY)}function Gm(t,e){t.forEach(n=>Array.isArray(n)?Gm(n,e):e(n))}function ux(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Uf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function QD(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let s=r-2;t[r]=t[s],r--}t[e]=n,t[e+1]=i}}function $m(t,e,n){let i=Tu(t,e);return i>=0?t[i|1]=n:(i=~i,QD(t,i,e,n)),i}function qm(t,e){let n=Tu(t,e);if(n>=0)return t[n|1]}function Tu(t,e){return UL(t,e,1)}function UL(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let s=i+(r-i>>1),a=t[s<<n];if(e===a)return s<<n;a>e?r=s:i=s+1}return~(r<<n)}var el={},or=[],lc=new Mt(""),dx=new Mt("",-1),fx=new Mt(""),Lf=class{get(e,n=ic){if(n===ic){let r=jD("",-201);throw r.name="\u0275NotFound",r}return n}};function tl(t){return{\u0275providers:t}}function XD(t){return tl([{provide:lc,multi:!0,useValue:t}])}function ZD(...t){return{\u0275providers:px(!0,t),\u0275fromNgModule:!0}}function px(t,...e){let n=[],i=new Set,r,s=a=>{n.push(a)};return Gm(e,a=>{let c=a;Rm(c,s,[],i)&&(r||=[],r.push(c))}),r!==void 0&&eT(r,s),n}function eT(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];hx(r,s=>{e(s,i)})}}function Rm(t,e,n,i){if(t=Ki(t),!t)return!1;let r=null,s=GC(t),a=!s&&Zs(t);if(!s&&!a){let u=t.ngModule;if(s=GC(u),s)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=t}let c=i.has(r);if(a){if(c)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let p of u)Rm(p,e,n,i)}}else if(s){if(s.imports!=null&&!c){i.add(r);let p;try{Gm(s.imports,m=>{Rm(m,e,n,i)&&(p||=[],p.push(m))})}finally{}p!==void 0&&eT(p,e)}if(!c){let p=Ja(r)||(()=>new r);e({provide:r,useFactory:p,deps:or},r),e({provide:fx,useValue:r,multi:!0},r),e({provide:lc,useValue:()=>Dt(r),multi:!0},r)}let u=s.providers;if(u!=null&&!c){let p=t;hx(u,m=>{e(m,p)})}}else return!1;return r!==t&&t.providers!==void 0}function hx(t,e){for(let n of t)tx(n)&&(n=n.\u0275providers),Array.isArray(n)?hx(n,e):e(n)}var zL=_n({provide:String,useValue:_n});function tT(t){return t!==null&&typeof t=="object"&&zL in t}function GL(t){return!!(t&&t.useExisting)}function $L(t){return!!(t&&t.useFactory)}function oc(t){return typeof t=="function"}function nT(t){return!!t.useClass}var zf=new Mt(""),Nm={},HD={},zC;function Gf(){return zC===void 0&&(zC=new Lf),zC}var yr=class{},sc=class extends yr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,KC(e,a=>this.processProvider(a)),this.records.set(dx,Du(void 0,this)),r.has("environment")&&this.records.set(yr,Du(void 0,this));let s=this.records.get(zf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fx,or,{self:!0}))}retrieve(e,n){let i=rc(n)||0;try{return this.get(e,ic,i)}catch(r){if(Su(r))return r;throw r}}destroy(){Rf(this),this._destroyed=!0;let e=Lt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Lt(e)}}onDestroy(e){return Rf(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Rf(this);let n=bs(this),i=vr(void 0),r;try{return e()}finally{bs(n),vr(i)}}get(e,n=ic,i){if(Rf(this),e.hasOwnProperty(BD))return e[BD](this);let r=rc(i),s,a=bs(this),c=vr(void 0);try{if(!(r&4)){let p=this.records.get(e);if(p===void 0){let m=YL(e)&&Hf(e);m&&this.injectableDefInScope(m)?p=Du(jC(e),Nm):p=null,this.records.set(e,p)}if(p!=null)return this.hydrate(e,p,r)}let u=r&2?Gf():this.parent;return n=r&8&&n===ic?null:n,u.get(e,n)}catch(u){let p=PL(u);throw p===-200||p===-201?new St(p,null):u}finally{vr(c),bs(a)}}resolveInjectorInitializers(){let e=Lt(null),n=bs(this),i=vr(void 0),r;try{let s=this.get(lc,or,{self:!0});for(let a of s)a()}finally{bs(n),vr(i),Lt(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Qs(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ki(e);let n=oc(e)?e:Ki(e&&e.provide),i=WL(e);if(!oc(e)&&e.multi===!0){let r=this.records.get(n);r||(r=Du(void 0,Nm,!0),r.factory=()=>WC(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n,i){let r=Lt(null);try{if(n.value===HD)throw lx(Qs(e));return n.value===Nm&&(n.value=HD,n.value=n.factory(void 0,i)),typeof n.value=="object"&&n.value&&KL(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Lt(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ki(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function jC(t){let e=Hf(t),n=e!==null?e.factory:Ja(t);if(n!==null)return n;if(t instanceof Mt)throw new St(204,!1);if(t instanceof Function)return qL(t);throw new St(204,!1)}function qL(t){if(t.length>0)throw new St(204,!1);let n=NL(t);return n!==null?()=>n.factory(t):()=>new t}function WL(t){if(tT(t))return Du(void 0,t.useValue);{let e=mx(t);return Du(e,Nm)}}function mx(t,e,n){let i;if(oc(t)){let r=Ki(t);return Ja(r)||jC(r)}else if(tT(t))i=()=>Ki(t.useValue);else if($L(t))i=()=>t.useFactory(...WC(t.deps||[]));else if(GL(t))i=(r,s)=>Dt(Ki(t.useExisting),s!==void 0&&s&8?8:void 0);else{let r=Ki(t&&(t.useClass||t.provide));if(jL(t))i=()=>new r(...WC(t.deps));else return Ja(r)||jC(r)}return i}function Rf(t){if(t.destroyed)throw new St(205,!1)}function Du(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function jL(t){return!!t.deps}function KL(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function YL(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function KC(t,e){for(let n of t)Array.isArray(n)?KC(n,e):n&&tx(n)?KC(n.\u0275providers,e):e(n)}function Iu(t,e){let n;t instanceof sc?(Rf(t),n=t):n=new qC(t);let i,r=bs(n),s=vr(void 0);try{return e()}finally{bs(r),vr(s)}}function iT(){return KD()!==void 0||km()!=null}var zo=0,Vt=1,zt=2,wi=3,Co=4,xo=5,Au=6,Mu=7,ci=8,ea=9,Ss=10,Bn=11,ku=12,gx=13,cc=14,Xr=15,nl=16,uc=17,Ds=18,ta=19,vx=20,Js=21,Wm=22,Qa=23,Zr=24,dc=25,fc=26,jn=27,rT=1,yx=6,il=7,$f=8,pc=9,ii=10;function Ts(t){return Array.isArray(t)&&typeof t[rT]=="object"}function Go(t){return Array.isArray(t)&&t[rT]===!0}function _x(t){return(t.flags&4)!==0}function rl(t){return t.componentOffset>-1}function jm(t){return(t.flags&1)===1}function Is(t){return!!t.template}function Nu(t){return(t[zt]&512)!==0}function hc(t){return(t[zt]&256)===256}var oT="svg",sT="math";function bo(t){for(;Array.isArray(t);)t=t[zo];return t}function Cx(t,e){return bo(e[t])}function $o(t,e){return bo(e[t.index])}function qf(t,e){return t.data[e]}function Wf(t,e){return t[e]}function jf(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function wo(t,e){let n=e[t];return Ts(n)?n:n[zo]}function Km(t){return(t[zt]&128)===128}function aT(t){return Go(t[wi])}function As(t,e){return e==null?null:t[e]}function xx(t){t[uc]=0}function bx(t){t[zt]&1024||(t[zt]|=1024,Km(t)&&mc(t))}function lT(t,e){for(;t>0;)e=e[cc],t--;return e}function Kf(t){return!!(t[zt]&9216||t[Zr]?.dirty)}function Ym(t){t[Ss].changeDetectionScheduler?.notify(8),t[zt]&64&&(t[zt]|=1024),Kf(t)&&mc(t)}function mc(t){t[Ss].changeDetectionScheduler?.notify(0);let e=Xa(t);for(;e!==null&&!(e[zt]&8192||(e[zt]|=8192,!Km(e)));)e=Xa(e)}function wx(t,e){if(hc(t))throw new St(911,!1);t[Js]===null&&(t[Js]=[]),t[Js].push(e)}function cT(t,e){if(t[Js]===null)return;let n=t[Js].indexOf(e);n!==-1&&t[Js].splice(n,1)}function Xa(t){let e=t[wi];return Go(e)?e[wi]:e}function Ex(t){return t[Mu]??=[]}function Sx(t){return t.cleanup??=[]}function uT(t,e,n,i){let r=Ex(e);r.push(n),t.firstCreatePass&&Sx(t).push(i,r.length-1)}var en={lFrame:ST(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var YC=!1;function dT(){return en.lFrame.elementDepthCount}function fT(){en.lFrame.elementDepthCount++}function Dx(){en.lFrame.elementDepthCount--}function pT(){return en.bindingsEnabled}function hT(){return en.skipHydrationRootTNode!==null}function Tx(t){return en.skipHydrationRootTNode===t}function Ix(){en.skipHydrationRootTNode=null}function qt(){return en.lFrame.lView}function hi(){return en.lFrame.tView}function ee(t){return en.lFrame.contextLView=t,t[ci]}function te(t){return en.lFrame.contextLView=null,t}function sr(){let t=Ax();for(;t!==null&&t.type===64;)t=t.parent;return t}function Ax(){return en.lFrame.currentTNode}function mT(){let t=en.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function gc(t,e){let n=en.lFrame;n.currentTNode=t,n.isParent=e}function Mx(){return en.lFrame.isParent}function gT(){en.lFrame.isParent=!1}function kx(){return en.lFrame.contextLView}function Nx(){return YC}function Of(t){let e=YC;return YC=t,e}function Yf(){let t=en.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function vT(){return en.lFrame.bindingIndex}function yT(t){return en.lFrame.bindingIndex=t}function vc(){return en.lFrame.bindingIndex++}function Jm(t){let e=en.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function _T(){return en.lFrame.inI18n}function CT(t,e){let n=en.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qm(e)}function xT(){return en.lFrame.currentDirectiveIndex}function Qm(t){en.lFrame.currentDirectiveIndex=t}function bT(t){let e=en.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function wT(){return en.lFrame.currentQueryIndex}function Xm(t){en.lFrame.currentQueryIndex=t}function JL(t){let e=t[Vt];return e.type===2?e.declTNode:e.type===1?t[xo]:null}function Fx(t,e,n){if(n&4){let r=e,s=t;for(;r=r.parent,r===null&&!(n&1);)if(r=JL(s),r===null||(s=s[cc],r.type&10))break;if(r===null)return!1;e=r,t=s}let i=en.lFrame=ET();return i.currentTNode=e,i.lView=t,!0}function Zm(t){let e=ET(),n=t[Vt];en.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ET(){let t=en.lFrame,e=t===null?null:t.child;return e===null?ST(t):e}function ST(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function DT(){let t=en.lFrame;return en.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Rx=DT;function e0(){let t=DT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function TT(t){return(en.lFrame.contextLView=lT(t,en.lFrame.contextLView))[ci]}function qo(){return en.lFrame.selectedIndex}function ol(t){en.lFrame.selectedIndex=t}function t0(){let t=en.lFrame;return qf(t.tView,t.selectedIndex)}function IT(){return en.lFrame.currentNamespace}var AT=!0;function n0(){return AT}function i0(t){AT=t}function JC(t,e=null,n=null,i){let r=Px(t,e,n,i);return r.resolveInjectorInitializers(),r}function Px(t,e=null,n=null,i,r=new Set){let s=[n||or,ZD(t)];return i=i||(typeof t=="object"?void 0:Qs(t)),new sc(s,e||Gf(),i||null,r)}var Lr=class t{static THROW_IF_NOT_FOUND=ic;static NULL=new Lf;static create(e,n){if(Array.isArray(e))return JC({name:""},n,e,"");{let i=e.name??"";return JC({name:i},e.parent,e.providers,i)}}static \u0275prov=Fe({token:t,providedIn:"any",factory:()=>Dt(dx)});static __NG_ELEMENT_ID__=-1},Kn=new Mt(""),eo=(()=>{class t{static __NG_ELEMENT_ID__=QL;static __NG_ENV_ID__=n=>n}return t})(),Pm=class extends eo{_lView;constructor(e){super(),this._lView=e}get destroyed(){return hc(this._lView)}onDestroy(e){let n=this._lView;return wx(n,e),()=>cT(n,e)}};function QL(){return new Pm(qt())}var MT=!1,yc=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Zl(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new un(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Fe({token:t,providedIn:"root",factory:()=>new t})}return t})(),QC=class extends ji{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,iT()&&(this.destroyRef=he(eo,{optional:!0})??void 0,this.pendingTasks=he(yc,{optional:!0})??void 0)}emit(e){let n=Lt(null);try{super.next(e)}finally{Lt(n)}}subscribe(e,n,i){let r=e,s=n||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),s=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let c=super.subscribe({next:r,error:s,complete:a});return e instanceof Wi&&e.add(c),c}wrapInTimeout(e){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},rr=QC;function Lm(...t){}function Lx(t){let e,n;function i(){t=Lm;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),i()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),i()})),()=>i()}function Ox(t){return queueMicrotask(()=>t()),()=>{t=Lm}}var Vx="isAngularZone",Vf=Vx+"_ID",XL=0,Or=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new rr(!1);onMicrotaskEmpty=new rr(!1);onStable=new rr(!1);onError=new rr(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=MT}=e;if(typeof Zone>"u")throw new St(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=s,tO(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Vx)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new St(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new St(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+r,e,ZL,Lm,Lm);try{return s.runTask(a,n,i)}finally{s.cancelTask(a)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},ZL={};function Bx(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function eO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Lx(()=>{t.callbackScheduled=!1,XC(t),t.isCheckStableRunning=!0,Bx(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),XC(t)}function tO(t){let e=()=>{eO(t)},n=XL++;t._inner=t._inner.fork({name:"angular",properties:{[Vx]:!0,[Vf]:n,[Vf+n]:!0},onInvokeTask:(i,r,s,a,c,u)=>{if(nO(u))return i.invokeTask(s,a,c,u);try{return UD(t),i.invokeTask(s,a,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),zD(t)}},onInvoke:(i,r,s,a,c,u,p)=>{try{return UD(t),i.invoke(s,a,c,u,p)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!iO(u)&&e(),zD(t)}},onHasTask:(i,r,s,a)=>{i.hasTask(s,a),r===s&&(a.change=="microTask"?(t._hasPendingMicrotasks=a.microTask,XC(t),Bx(t)):a.change=="macroTask"&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,s,a)=>(i.handleError(s,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}function XC(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function UD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function zD(t){t._nesting--,Bx(t)}var Bf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new rr;onMicrotaskEmpty=new rr;onStable=new rr;onError=new rr;run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}};function nO(t){return kT(t,"__ignore_ng_zone__")}function iO(t){return kT(t,"__scheduler_tick__")}function kT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var vo=class{_console=console;handleError(e){this._console.error("ERROR",e)}},na=new Mt("",{factory:()=>{let t=he(Or),e=he(yr),n;return i=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw i}):(n??=e.get(vo),n.handleError(i))})}}}),NT={provide:lc,useValue:()=>{let t=he(vo,{optional:!0})},multi:!0},rO=new Mt("",{factory:()=>{let t=he(Kn).defaultView;if(!t)return;let e=he(na),n=s=>{e(s.reason),s.preventDefault()},i=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},r=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",i)};typeof Zone<"u"?Zone.root.run(r):r(),he(eo).onDestroy(()=>{t.removeEventListener("error",i),t.removeEventListener("unhandledrejection",n)})}});function oO(){return tl([XD(()=>void he(rO))])}function xe(t,e){let[n,i,r]=bC(t,e?.equal),s=n,a=s[ir];return s.set=i,s.update=r,s.asReadonly=Hx.bind(s),s}function Hx(){let t=this[ir];if(t.readonlyFn===void 0){let e=()=>this();e[ir]=t,t.readonlyFn=e}return t.readonlyFn}var Jf=(()=>{class t{view;node;constructor(n,i){this.view=n,this.node=i}static __NG_ELEMENT_ID__=sO}return t})();function sO(){return new Jf(qt(),sr())}var Xs=class{},Qf=new Mt("",{factory:()=>!0});var Ux=new Mt(""),Fu=(()=>{class t{internalPendingTasks=he(yc);scheduler=he(Xs);errorHandler=he(na);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let i=this.add();n().catch(this.errorHandler).finally(i)}static \u0275prov=Fe({token:t,providedIn:"root",factory:()=>new t})}return t})(),r0=(()=>{class t{static \u0275prov=Fe({token:t,providedIn:"root",factory:()=>new ZC})}return t})(),ZC=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,i=this.queues.get(n);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let i=this.queues.get(n);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,i]of this.queues)n===null?e||=this.flushQueue(i):e||=n.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,n=!0,i.run());return n}},Om=class{[ir];constructor(e){this[ir]=e}destroy(){this[ir].destroy()}};function ln(t,e){let n=e?.injector??he(Lr),i=e?.manualCleanup!==!0?n.get(eo):null,r,s=n.get(Jf,null,{optional:!0}),a=n.get(Xs);return s!==null?(r=cO(s.view,a,t),i instanceof Pm&&i._lView===s.view&&(i=null)):r=uO(t,n.get(r0),a),r.injector=n,i!==null&&(r.onDestroyFns=[i.onDestroy(()=>r.destroy())]),new Om(r)}var FT=Ht(xt({},EC),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let t=Of(!1);try{SC(this)}finally{Of(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=Lt(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],Lt(t)}}}),aO=Ht(xt({},FT),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Kl(this),this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();this.cleanup(),this.scheduler.remove(this)}}),lO=Ht(xt({},FT),{consumerMarkedDirty(){this.view[zt]|=8192,mc(this.view),this.notifier.notify(13)},destroy(){if(Kl(this),this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();this.cleanup(),this.view[Qa]?.delete(this)}});function cO(t,e,n){let i=Object.create(lO);return i.view=t,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=RT(i,n),t[Qa]??=new Set,t[Qa].add(i),i.consumerMarkedDirty(i),i}function uO(t,e,n){let i=Object.create(aO);return i.fn=RT(i,t),i.scheduler=e,i.notifier=n,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function RT(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function Eo(t){return wC(t)}function ap(t){return{toString:t}.toString()}function _O(t){return typeof t=="function"}function pI(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}var h0=class{previousValue;currentValue;firstChange;constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}},lp=(()=>{let t=()=>hI;return t.ngInherit=!0,t})();function hI(t){return t.type.prototype.ngOnChanges&&(t.setInput=xO),CO}function CO(){let t=gI(this),e=t?.current;if(e){let n=t.previous;if(n===el)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function xO(t,e,n,i,r){let s=this.declaredInputs[i],a=gI(t)||bO(t,{previous:el,current:null}),c=a.current||(a.current={}),u=a.previous,p=u[s];c[s]=new h0(p&&p.currentValue,n,u===el),pI(t,e,r,n)}var mI="__ngSimpleChanges__";function gI(t){return t[mI]||null}function bO(t,e){return t[mI]=e}var PT=[];var Cn=function(t,e=null,n){for(let i=0;i<PT.length;i++){let r=PT[i];r(t,e,n)}},pn=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(pn||{});function wO(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let a=hI(e);(n.preOrderHooks??=[]).push(t,a),(n.preOrderCheckHooks??=[]).push(t,a)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function EO(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:p,ngOnDestroy:m}=s;a&&(t.contentHooks??=[]).push(-n,a),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),p&&((t.viewHooks??=[]).push(n,p),(t.viewCheckHooks??=[]).push(n,p)),m!=null&&(t.destroyHooks??=[]).push(n,m)}}function c0(t,e,n){vI(t,e,3,n)}function u0(t,e,n,i){(t[zt]&3)===n&&vI(t,e,n,i)}function zx(t,e){let n=t[zt];(n&3)===e&&(n&=16383,n+=1,t[zt]=n)}function vI(t,e,n,i){let r=i!==void 0?t[uc]&65535:0,s=i??-1,a=e.length-1,c=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(c=e[u],i!=null&&c>=i)break}else e[u]<0&&(t[uc]+=65536),(c<s||s==-1)&&(SO(t,n,e,u),t[uc]=(t[uc]&4294901760)+u+2),u++}function LT(t,e){Cn(pn.LifecycleHookStart,t,e);let n=Lt(null);try{e.call(t)}finally{Lt(n),Cn(pn.LifecycleHookEnd,t,e)}}function SO(t,e,n,i){let r=n[i]<0,s=n[i+1],a=r?-n[i]:n[i],c=t[a];r?t[zt]>>14<t[uc]>>16&&(t[zt]&3)===e&&(t[zt]+=16384,LT(c,s)):LT(c,s)}var Pu=-1,Cc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=n,this.injectImpl=i}};function DO(t){return(t.flags&8)!==0}function TO(t){return(t.flags&16)!==0}function IO(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let s=n[i++],a=n[i++],c=n[i++];t.setAttribute(e,a,c,s)}else{let s=r,a=n[++i];AO(s)?t.setProperty(e,s,a):t.setAttribute(e,s,a),i++}}return i}function yI(t){return t===3||t===4||t===6}function AO(t){return t.charCodeAt(0)===64}function Lu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?OT(t,n,r,null,e[++i]):OT(t,n,r,null,null))}}return t}function OT(t,e,n,i,r){let s=0,a=t.length;if(e===-1)a=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){r!==null&&(t[s+1]=r);return}s++,r!==null&&s++}a!==-1&&(t.splice(a,0,e),s=a+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r)}function _I(t){return t!==Pu}function m0(t){return t&32767}function MO(t){return t>>16}function g0(t,e){let n=MO(t),i=e;for(;n>0;)i=i[cc],n--;return i}var Zx=!0;function v0(t){let e=Zx;return Zx=t,e}var kO=256,CI=kO-1,xI=5,NO=0,Ms={};function FO(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(ac)&&(i=n[ac]),i==null&&(i=n[ac]=NO++);let r=i&CI,s=1<<r;e.data[t+(r>>xI)]|=s}function y0(t,e){let n=bI(t,e);if(n!==-1)return n;let i=e[Vt];i.firstCreatePass&&(t.injectorIndex=e.length,Gx(i.data,t),Gx(e,null),Gx(i.blueprint,null));let r=L1(t,e),s=t.injectorIndex;if(_I(r)){let a=m0(r),c=g0(r,e),u=c[Vt].data;for(let p=0;p<8;p++)e[s+p]=c[a+p]|u[a+p]}return e[s+8]=r,s}function Gx(t,e){t.push(0,0,0,0,0,0,0,0,e)}function bI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function L1(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=TI(r),i===null)return Pu;if(n++,r=r[cc],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Pu}function e1(t,e,n){FO(t,e,n)}function RO(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let i=n.length,r=0;for(;r<i;){let s=n[r];if(yI(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(s===e)return n[r+1];r=r+2}}}return null}function wI(t,e,n){if(n&8||t!==void 0)return t;zm(e,"NodeInjector")}function EI(t,e,n,i){if(n&8&&i===void 0&&(i=null),(n&3)===0){let r=t[ea],s=vr(void 0);try{return r?r.get(e,i,n&8):cx(e,i,n&8)}finally{vr(s)}}return wI(i,e,n)}function SI(t,e,n,i=0,r){if(t!==null){if(e[zt]&2048&&!(i&2)){let a=VO(t,e,n,i,Ms);if(a!==Ms)return a}let s=DI(t,e,n,i,Ms);if(s!==Ms)return s}return EI(e,n,i,r)}function DI(t,e,n,i,r){let s=LO(n);if(typeof s=="function"){if(!Fx(e,t,i))return i&1?wI(r,n,i):EI(e,n,i,r);try{let a;if(a=s(i),a==null&&!(i&8))zm(n);else return a}finally{Rx()}}else if(typeof s=="number"){let a=null,c=bI(t,e),u=Pu,p=i&1?e[Xr][xo]:null;for((c===-1||i&4)&&(u=c===-1?L1(t,e):e[c+8],u===Pu||!BT(i,!1)?c=-1:(a=e[Vt],c=m0(u),e=g0(u,e)));c!==-1;){let m=e[Vt];if(VT(s,c,m.data)){let C=PO(c,e,n,a,i,p);if(C!==Ms)return C}u=e[c+8],u!==Pu&&BT(i,e[Vt].data[c+8]===p)&&VT(s,c,e)?(a=m,c=m0(u),e=g0(u,e)):c=-1}}return r}function PO(t,e,n,i,r,s){let a=e[Vt],c=a.data[t+8],u=i==null?rl(c)&&Zx:i!=a&&(c.type&3)!==0,p=r&1&&s===c,m=d0(c,a,n,u,p);return m!==null?tp(e,a,m,c,r):Ms}function d0(t,e,n,i,r){let s=t.providerIndexes,a=e.data,c=s&1048575,u=t.directiveStart,p=t.directiveEnd,m=s>>20,C=i?c:c+m,x=r?c+m:p;for(let E=C;E<x;E++){let A=a[E];if(E<u&&n===A||E>=u&&A.type===n)return E}if(r){let E=a[u];if(E&&Is(E)&&E.type===n)return u}return null}function tp(t,e,n,i,r){let s=t[n],a=e.data;if(s instanceof Cc){let c=s;if(c.resolving){let E=qD(a[n]);throw lx(E)}let u=v0(c.canSeeViewProviders);c.resolving=!0;let p=a[n].type||a[n],m,C=c.injectImpl?vr(c.injectImpl):null,x=Fx(t,i,0);try{s=t[n]=c.factory(void 0,r,a,t,i),e.firstCreatePass&&n>=i.directiveStart&&wO(n,a[n],e)}finally{C!==null&&vr(C),v0(u),c.resolving=!1,Rx()}}return s}function LO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ac)?t[ac]:void 0;return typeof e=="number"?e>=0?e&CI:OO:e}function VT(t,e,n){let i=1<<t;return!!(n[e+(t>>xI)]&i)}function BT(t,e){return!(t&2)&&!(t&1&&e)}var _c=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return SI(this._tNode,this._lView,e,rc(i),n)}};function OO(){return new _c(sr(),qt())}function al(t){return ap(()=>{let e=t.prototype.constructor,n=e[Pf]||t1(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let s=r[Pf]||t1(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function t1(t){return ex(t)?()=>{let e=t1(Ki(t));return e&&e()}:Ja(t)}function VO(t,e,n,i,r){let s=t,a=e;for(;s!==null&&a!==null&&a[zt]&2048&&!Nu(a);){let c=DI(s,a,n,i|2,Ms);if(c!==Ms)return c;let u=s.parent;if(!u){let p=a[vx];if(p){let m=p.get(n,Ms,i);if(m!==Ms)return m}u=TI(a),a=a[cc]}s=u}return r}function TI(t){let e=t[Vt],n=e.type;return n===2?e.declTNode:n===1?t[xo]:null}function O1(t){return RO(sr(),t)}function BO(){return Hu(sr(),qt())}function Hu(t,e){return new Ei($o(t,e))}var Ei=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=BO}return t})();function HO(t){return t instanceof Ei?t.nativeElement:t}function UO(){return this._results[Symbol.iterator]()}var _0=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ji}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=JD(e);(this._changesDetected=!YD(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=UO};function II(t){return(t.flags&128)===128}var V1=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(V1||{}),AI=new Map,zO=0;function GO(){return zO++}function $O(t){AI.set(t[ta],t)}function n1(t){AI.delete(t[ta])}var HT="__ngContext__";function Ou(t,e){Ts(e)?(t[HT]=e[ta],$O(e)):t[HT]=e}function MI(t){return NI(t[ku])}function kI(t){return NI(t[Co])}function NI(t){for(;t!==null&&!Go(t);)t=t[Co];return t}var i1;function B1(t){i1=t}function FI(){if(i1!==void 0)return i1;if(typeof document<"u")return document;throw new St(210,!1)}var N0=new Mt("",{factory:()=>qO}),qO="ng";var F0=new Mt(""),Jo=new Mt("",{providedIn:"platform",factory:()=>"unknown"});var R0=new Mt("",{factory:()=>he(Kn).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var RI="r";var PI="di";var LI=!1,OI=new Mt("",{factory:()=>LI});var VI=new Mt("");var WO=(t,e,n,i)=>{};function jO(t,e,n,i){WO(t,e,n,i)}function H1(t){return(t.flags&32)===32}var KO=()=>null;function BI(t,e,n=!1){return KO(t,e,n)}function HI(t,e){let n=t.contentQueries;if(n!==null){let i=Lt(null);try{for(let r=0;r<n.length;r+=2){let s=n[r],a=n[r+1];if(a!==-1){let c=t.data[a];Xm(s),c.contentQueries(2,e[a],a)}}}finally{Lt(i)}}}function r1(t,e,n){Xm(0);let i=Lt(null);try{e(t,n)}finally{Lt(i)}}function UI(t,e,n){if(_x(e)){let i=Lt(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let a=r;a<s;a++){let c=t.data[a];if(c.contentQueries){let u=n[a];c.contentQueries(1,u,a)}}}finally{Lt(i)}}}var Ko=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Ko||{});var o0;function YO(){if(o0===void 0&&(o0=null,yo.trustedTypes))try{o0=yo.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return o0}function P0(t){return YO()?.createHTML(t)||t}var s0;function zI(){if(s0===void 0&&(s0=null,yo.trustedTypes))try{s0=yo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return s0}function UT(t){return zI()?.createHTML(t)||t}function zT(t){return zI()?.createScriptURL(t)||t}var ia=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vm})`}},o1=class extends ia{getTypeName(){return"HTML"}},s1=class extends ia{getTypeName(){return"Style"}},a1=class extends ia{getTypeName(){return"Script"}},l1=class extends ia{getTypeName(){return"URL"}},c1=class extends ia{getTypeName(){return"ResourceURL"}};function to(t){return t instanceof ia?t.changingThisBreaksApplicationSecurity:t}function Ns(t,e){let n=GI(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Vm})`)}return n===e}function GI(t){return t instanceof ia&&t.getTypeName()||null}function U1(t){return new o1(t)}function z1(t){return new s1(t)}function G1(t){return new a1(t)}function $1(t){return new l1(t)}function q1(t){return new c1(t)}function JO(t){let e=new d1(t);return QO()?new u1(e):e}var u1=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(P0(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},d1=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=P0(e),n}};function QO(){try{return!!new window.DOMParser().parseFromString(P0(""),"text/html")}catch{return!1}}var XO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cp(t){return t=String(t),t.match(XO)?t:"unsafe:"+t}function ra(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function up(...t){let e={};for(let n of t)for(let i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}var $I=ra("area,br,col,hr,img,wbr"),qI=ra("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),WI=ra("rp,rt"),ZO=up(WI,qI),e5=up(qI,ra("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),t5=up(WI,ra("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),GT=up($I,e5,t5,ZO),jI=ra("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),n5=ra("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),i5=ra("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),r5=up(jI,n5,i5),o5=ra("script,style,template"),f1=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,i=!0,r=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild){r.push(n),n=l5(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=a5(n);if(s){n=s;break}n=r.pop()}}return this.buf.join("")}startElement(e){let n=$T(e).toLowerCase();if(!GT.hasOwnProperty(n))return this.sanitizedSomething=!0,!o5.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let i=e.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),a=s.name,c=a.toLowerCase();if(!r5.hasOwnProperty(c)){this.sanitizedSomething=!0;continue}let u=s.value;jI[c]&&(u=cp(u)),this.buf.push(" ",a,'="',qT(u),'"')}return this.buf.push(">"),!0}endElement(e){let n=$T(e).toLowerCase();GT.hasOwnProperty(n)&&!$I.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(qT(e))}};function s5(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function a5(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw KI(e);return e}function l5(t){let e=t.firstChild;if(e&&s5(t,e))throw KI(e);return e}function $T(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function KI(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var c5=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u5=/([^\#-~ |!])/g;function qT(t){return t.replace(/&/g,"&amp;").replace(c5,function(e){let n=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((n-55296)*1024+(i-56320)+65536)+";"}).replace(u5,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var a0;function L0(t,e){let n=null;try{a0=a0||JO(t);let i=e?String(e):"";n=a0.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=a0.getInertBodyElement(i)}while(i!==s);let c=new f1().sanitizeChildren(WT(n)||n);return P0(c)}finally{if(n){let i=WT(n)||n;for(;i.firstChild;)i.firstChild.remove()}}}function WT(t){return"content"in t&&d5(t)?t.content:null}function d5(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}function f5(t,e){return t.createText(e)}function p5(t,e,n){t.setValue(e,n)}function YI(t,e,n){return t.createElement(e,n)}function C0(t,e,n,i,r){t.insertBefore(e,n,i,r)}function JI(t,e,n){t.appendChild(e,n)}function jT(t,e,n,i,r){i!==null?C0(t,e,n,i,r):JI(t,e,n)}function QI(t,e,n,i){t.removeChild(null,e,n,i)}function h5(t,e,n){t.setAttribute(e,"style",n)}function m5(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function XI(t,e,n){let{mergedAttrs:i,classes:r,styles:s}=n;i!==null&&IO(t,e,i),r!==null&&m5(t,e,r),s!==null&&h5(t,e,s)}var So=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(So||{});function _r(t){let e=W1();return e?UT(e.sanitize(So.HTML,t)||""):Ns(t,"HTML")?UT(to(t)):L0(FI(),Za(t))}function no(t){let e=W1();return e?e.sanitize(So.URL,t)||"":Ns(t,"URL")?to(t):cp(Za(t))}function ZI(t){let e=W1();if(e)return zT(e.sanitize(So.RESOURCE_URL,t)||"");if(Ns(t,"ResourceURL"))return zT(to(t));throw new St(904,!1)}var g5=new Set(["embed","frame","iframe","media","script"]),v5=new Set(["base","link","script"]);function y5(t,e){return e==="src"&&g5.has(t)||e==="href"&&v5.has(t)||e==="xlink:href"&&t==="script"?ZI:no}function _5(t,e,n){return y5(e,n)(t)}function W1(){let t=qt();return t&&t[Ss].sanitizer}function eA(t){return t instanceof Function?t():t}function C5(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}var tA="ng-template";function x5(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&C5(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(j1(t))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===n)return!0}return!1}function j1(t){return t.type===4&&t.value!==tA}function b5(t,e,n){let i=t.type===4&&!n?tA:t.value;return e===i}function w5(t,e,n){let i=4,r=t.attrs,s=r!==null?D5(r):0,a=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!a&&!Wo(i)&&!Wo(u))return!1;if(a&&Wo(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!b5(t,u,n)||u===""&&e.length===1){if(Wo(i))return!1;a=!0}}else if(i&8){if(r===null||!x5(t,r,u,n)){if(Wo(i))return!1;a=!0}}else{let p=e[++c],m=E5(u,r,j1(t),n);if(m===-1){if(Wo(i))return!1;a=!0;continue}if(p!==""){let C;if(m>s?C="":C=r[m+1].toLowerCase(),i&2&&p!==C){if(Wo(i))return!1;a=!0}}}}return Wo(i)||a}function Wo(t){return(t&1)===0}function E5(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){let a=e[r];if(a===t)return r;if(a===3||a===6)s=!0;else if(a===1||a===2){let c=e[++r];for(;typeof c=="string";)c=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=s?1:2}return-1}else return T5(e,t)}function S5(t,e,n=!1){for(let i=0;i<e.length;i++)if(w5(t,e[i],n))return!0;return!1}function D5(t){for(let e=0;e<t.length;e++){let n=t[e];if(yI(n))return e}return t.length}function T5(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function KT(t,e){return t?":not("+e.trim()+")":e}function I5(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let a=t[n];if(typeof a=="string")if(i&2){let c=t[++n];r+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!Wo(a)&&(e+=KT(s,r),r=""),i=a,s=s||!Wo(i);n++}return r!==""&&(e+=KT(s,r)),e}function A5(t){return t.map(I5).join(",")}function M5(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let s=t[i];if(typeof s=="string")r===2?s!==""&&e.push(s,t[++i]):r===8&&n.push(s);else{if(!Wo(r))break;r=s}i++}return n.length&&e.push(1,...n),e}var Cr={};function K1(t,e,n,i,r,s,a,c,u,p,m){let C=jn+i,x=C+r,E=k5(C,x),A=typeof p=="function"?p():p;return E[Vt]={type:t,blueprint:E,template:n,queries:null,viewQuery:c,declTNode:e,data:E.slice().fill(null,C),bindingStartIndex:C,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:m}}function k5(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Cr);return n}function N5(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=K1(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Y1(t,e,n,i,r,s,a,c,u,p,m){let C=e.blueprint.slice();return C[zo]=r,C[zt]=i|4|128|8|64|1024,(p!==null||t&&t[zt]&2048)&&(C[zt]|=2048),xx(C),C[wi]=C[cc]=t,C[ci]=n,C[Ss]=a||t&&t[Ss],C[Bn]=c||t&&t[Bn],C[ea]=u||t&&t[ea]||null,C[xo]=s,C[ta]=GO(),C[Au]=m,C[vx]=p,C[Xr]=e.type==2?t[Xr]:C,C}function F5(t,e,n){let i=$o(e,t),r=N5(n),s=t[Ss].rendererFactory,a=J1(t,Y1(t,r,null,nA(n),i,e,null,s.createRenderer(i,n),null,null,null));return t[e.index]=a}function nA(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function iA(t,e,n,i){if(n===0)return-1;let r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function J1(t,e){return t[ku]?t[gx][Co]=e:t[ku]=e,t[gx]=e,e}function V(t=1){rA(hi(),qt(),qo()+t,!1)}function rA(t,e,n,i){if(!i)if((e[zt]&3)===3){let s=t.preOrderCheckHooks;s!==null&&c0(e,s,n)}else{let s=t.preOrderHooks;s!==null&&u0(e,s,0,n)}ol(n)}var O0=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(O0||{});function p1(t,e,n,i){let r=Lt(null);try{let[s,a,c]=t.inputs[n],u=null;(a&O0.SignalBased)!==0&&(u=e[s][ir]),u!==null&&u.transformFn!==void 0?i=u.transformFn(i):c!==null&&(i=c.call(e,i)),t.setInput!==null?t.setInput(e,u,i,n,s):pI(e,u,s,i)}finally{Lt(r)}}var ks=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(ks||{}),R5;function Q1(t,e){return R5(t,e)}var xc=new Set,V0=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(V0||{}),oa=new Mt(""),YT=new Set;function sa(t){YT.has(t)||(YT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var X1=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=Fe({token:t,providedIn:"root",factory:()=>new t})}return t})(),oA=[0,1,2,3],sA=(()=>{class t{ngZone=he(Or);scheduler=he(Xs);errorHandler=he(vo,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){he(oa,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Cn(pn.AfterRenderHooksStart),this.executing=!0;for(let i of oA)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Cn(pn.AfterRenderHooksEnd)}register(n){let{view:i}=n;i!==void 0?((i[dc]??=[]).push(n),mc(i),i[zt]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,i){return i?i.run(V0.AFTER_NEXT_RENDER,n):n()}static \u0275prov=Fe({token:t,providedIn:"root",factory:()=>new t})}return t})(),x0=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,i,r,s,a=null){this.impl=e,this.hooks=n,this.view=i,this.once=r,this.snapshot=a,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[dc];e&&(this.view[dc]=e.filter(n=>n!==this))}};function Z1(t,e){let n=e?.injector??he(Lr);return sa("NgAfterNextRender"),L5(t,n,e,!0)}function P5(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function L5(t,e,n,i){let r=e.get(X1);r.impl??=e.get(sA);let s=e.get(oa,null,{optional:!0}),a=n?.manualCleanup!==!0?e.get(eo):null,c=e.get(Jf,null,{optional:!0}),u=new x0(r.impl,P5(t),c?.view,i,a,s?.snapshot(null));return r.impl.register(u),u}var aA=new Mt("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:he(yr)})});function lA(t,e,n){let i=t.get(aA);if(Array.isArray(e))for(let r of e)i.queue.add(r),n?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(t)}function O5(t,e){let n=t.get(aA);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)n.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function V5(t,e){for(let[n,i]of e)lA(t,i.animateFns)}function JT(t,e,n,i){let r=t?.[fc]?.enter;e!==null&&r&&r.has(n.index)&&V5(i,r)}function Ru(t,e,n,i,r,s,a,c){if(r!=null){let u,p=!1;Go(r)?u=r:Ts(r)&&(p=!0,r=r[zo]);let m=bo(r);t===0&&i!==null?(JT(c,i,s,n),a==null?JI(e,i,m):C0(e,i,m,a||null,!0)):t===1&&i!==null?(JT(c,i,s,n),C0(e,i,m,a||null,!0)):t===2?QT(c,s,n,C=>{QI(e,m,p,C)}):t===3&&QT(c,s,n,()=>{e.destroyNode(m)}),u!=null&&Q5(e,t,n,u,s,i,a)}}function B5(t,e){cA(t,e),e[zo]=null,e[xo]=null}function H5(t,e,n,i,r,s){i[zo]=r,i[xo]=e,H0(t,i,n,1,r,s)}function cA(t,e){e[Ss].changeDetectionScheduler?.notify(9),H0(t,e,e[Bn],2,null,null)}function U5(t){let e=t[ku];if(!e)return $x(t[Vt],t);for(;e;){let n=null;if(Ts(e))n=e[ku];else{let i=e[ii];i&&(n=i)}if(!n){for(;e&&!e[Co]&&e!==t;)Ts(e)&&$x(e[Vt],e),e=e[wi];e===null&&(e=t),Ts(e)&&$x(e[Vt],e),n=e&&e[Co]}e=n}}function eb(t,e){let n=t[pc],i=n.indexOf(e);n.splice(i,1)}function B0(t,e){if(hc(e))return;let n=e[Bn];n.destroyNode&&H0(t,e,n,3,null,null),U5(e)}function $x(t,e){if(hc(e))return;let n=Lt(null);try{e[zt]&=-129,e[zt]|=256,e[Zr]&&Kl(e[Zr]),$5(t,e),G5(t,e),e[Vt].type===1&&e[Bn].destroy();let i=e[nl];if(i!==null&&Go(e[wi])){i!==e[wi]&&eb(i,e);let r=e[Ds];r!==null&&r.detachView(t)}n1(e)}finally{Lt(n)}}function QT(t,e,n,i){let r=t?.[fc];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);t&&xc.add(t[ta]),lA(n,()=>{if(r.leave&&r.leave.has(e.index)){let a=r.leave.get(e.index),c=[];if(a){for(let u=0;u<a.animateFns.length;u++){let p=a.animateFns[u],{promise:m}=p();c.push(m)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(c),z5(t,i)}else t&&xc.delete(t[ta]),i(!1)},r)}function z5(t,e){let n=t[fc]?.running;if(n){n.then(()=>{t[fc].running=void 0,xc.delete(t[ta]),e(!0)});return}e(!1)}function G5(t,e){let n=t.cleanup,i=e[Mu];if(n!==null)for(let a=0;a<n.length-1;a+=2)if(typeof n[a]=="string"){let c=n[a+3];c>=0?i[c]():i[-c].unsubscribe(),a+=2}else{let c=i[n[a+1]];n[a].call(c)}i!==null&&(e[Mu]=null);let r=e[Js];if(r!==null){e[Js]=null;for(let a=0;a<r.length;a++){let c=r[a];c()}}let s=e[Qa];if(s!==null){e[Qa]=null;for(let a of s)a.destroy()}}function $5(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Cc)){let s=n[i+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){let c=r[s[a]],u=s[a+1];Cn(pn.LifecycleHookStart,c,u);try{u.call(c)}finally{Cn(pn.LifecycleHookEnd,c,u)}}else{Cn(pn.LifecycleHookStart,r,s);try{s.call(r)}finally{Cn(pn.LifecycleHookEnd,r,s)}}}}}function q5(t,e,n){return W5(t,e.parent,n)}function W5(t,e,n){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return n[zo];if(rl(i)){let{encapsulation:r}=t.data[i.directiveStart+i.componentOffset];if(r===Ko.None||r===Ko.Emulated)return null}return $o(i,n)}function j5(t,e,n){return Y5(t,e,n)}function K5(t,e,n){return t.type&40?$o(t,n):null}var Y5=K5,XT;function tb(t,e,n,i){let r=q5(t,i,e),s=e[Bn],a=i.parent||e[xo],c=j5(a,i,e);if(r!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)jT(s,r,n[u],c,!1);else jT(s,r,n,c,!1);XT!==void 0&&XT(s,i,e,n,r)}function Zf(t,e){if(e!==null){let n=e.type;if(n&3)return $o(e,t);if(n&4)return h1(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Zf(t,i);{let r=t[e.index];return Go(r)?h1(-1,r):bo(r)}}else{if(n&128)return Zf(t,e.next);if(n&32)return Q1(e,t)()||bo(t[e.index]);{let i=uA(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Xa(t[Xr]);return Zf(r,i)}else return Zf(t,e.next)}}}return null}function uA(t,e){if(e!==null){let i=t[Xr][xo],r=e.projection;return i.projection[r]}return null}function h1(t,e){let n=ii+t+1;if(n<e.length){let i=e[n],r=i[Vt].firstChild;if(r!==null)return Zf(i,r)}return e[il]}function nb(t,e,n,i,r,s,a){for(;n!=null;){let c=i[ea];if(n.type===128){n=n.next;continue}let u=i[n.index],p=n.type;if(a&&e===0&&(u&&Ou(bo(u),i),n.flags|=2),!H1(n))if(p&8)nb(t,e,n.child,i,r,s,!1),Ru(e,t,c,r,u,n,s,i);else if(p&32){let m=Q1(n,i),C;for(;C=m();)Ru(e,t,c,r,C,n,s,i);Ru(e,t,c,r,u,n,s,i)}else p&16?J5(t,e,i,n,r,s):Ru(e,t,c,r,u,n,s,i);n=a?n.projectionNext:n.next}}function H0(t,e,n,i,r,s){nb(n,i,t.firstChild,e,r,s,!1)}function J5(t,e,n,i,r,s){let a=n[Xr],u=a[xo].projection[i.projection];if(Array.isArray(u))for(let p=0;p<u.length;p++){let m=u[p];Ru(e,t,n[ea],r,m,i,s,n)}else{let p=u,m=a[wi];II(i)&&(p.flags|=128),nb(t,e,p,m,r,s,!0)}}function Q5(t,e,n,i,r,s,a){let c=i[il],u=bo(i);c!==u&&Ru(e,t,n,s,c,r,a);for(let p=ii;p<i.length;p++){let m=i[p];H0(m[Vt],m,t,e,s,c)}}function X5(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=i.indexOf("-")===-1?void 0:ks.DashCase;r==null?t.removeStyle(n,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ks.Important),t.setStyle(n,i,r,s))}}function dA(t,e,n,i,r){let s=qo(),a=i&2;try{ol(-1),a&&e.length>jn&&rA(t,e,jn,!1);let c=a?pn.TemplateUpdateStart:pn.TemplateCreateStart;Cn(c,r,n),n(i,r)}finally{ol(s);let c=a?pn.TemplateUpdateEnd:pn.TemplateCreateEnd;Cn(c,r,n)}}function fA(t,e,n){o4(t,e,n),(n.flags&64)===64&&s4(t,e,n)}function ib(t,e,n=$o){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let a=i[s+1],c=a===-1?n(e,t):t[a];t[r++]=c}}}function Z5(t,e,n,i){let s=i.get(OI,LI)||n===Ko.ShadowDom||n===Ko.ExperimentalIsolatedShadowDom,a=t.selectRootElement(e,s);return e4(a),a}function e4(t){t4(t)}var t4=()=>null;function n4(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function i4(t,e,n,i,r,s){let a=e[Vt];if(rb(t,a,e,n,i)){rl(t)&&r4(e,t.index);return}t.type&3&&(n=n4(n)),pA(t,e,n,i,r,s)}function pA(t,e,n,i,r,s){if(t.type&3){let a=$o(t,e);i=s!=null?s(i,t.value||"",n):i,r.setProperty(a,n,i)}else t.type&12}function r4(t,e){let n=wo(e,t);n[zt]&16||(n[zt]|=64)}function o4(t,e,n){let i=n.directiveStart,r=n.directiveEnd;rl(n)&&F5(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||y0(n,e);let s=n.initialInputs;for(let a=i;a<r;a++){let c=t.data[a],u=tp(e,t,a,n);if(Ou(u,e),s!==null&&d4(e,a-i,u,c,n,s),Is(c)){let p=wo(n.index,e);p[ci]=tp(e,t,a,n)}}}function s4(t,e,n){let i=n.directiveStart,r=n.directiveEnd,s=n.index,a=xT();try{ol(s);for(let c=i;c<r;c++){let u=t.data[c],p=e[c];Qm(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&a4(u,p)}}finally{ol(-1),Qm(a)}}function a4(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function l4(t,e){let n=t.directiveRegistry,i=null;if(n)for(let r=0;r<n.length;r++){let s=n[r];S5(e,s.selectors,!1)&&(i??=[],Is(s)?i.unshift(s):i.push(s))}return i}function c4(t,e,n,i,r,s){let a=$o(t,e);u4(e[Bn],a,s,t.value,n,i,r)}function u4(t,e,n,i,r,s,a){if(s==null)t.removeAttribute(e,r,n);else{let c=a==null?Za(s):a(s,i||"",r);t.setAttribute(e,r,c,n)}}function d4(t,e,n,i,r,s){let a=s[e];if(a!==null)for(let c=0;c<a.length;c+=2){let u=a[c],p=a[c+1];p1(i,n,u,p)}}function hA(t,e,n,i,r){let s=jn+n,a=e[Vt],c=r(a,e,t,i,n);e[s]=c,gc(t,!0);let u=t.type===2;return u?(XI(e[Bn],c,t),(dT()===0||jm(t))&&Ou(c,e),fT()):Ou(c,e),n0()&&(!u||!H1(t))&&tb(a,e,c,t),t}function mA(t){let e=t;return Mx()?gT():(e=e.parent,gc(e,!1)),e}function f4(t,e){let n=t[ea];if(!n)return;let i;try{i=n.get(na,null)}catch{i=null}i?.(e)}function rb(t,e,n,i,r){let s=t.inputs?.[i],a=t.hostDirectiveInputs?.[i],c=!1;if(a)for(let u=0;u<a.length;u+=2){let p=a[u],m=a[u+1],C=e.data[p];p1(C,n[p],m,r),c=!0}if(s)for(let u of s){let p=n[u],m=e.data[u];p1(m,p,i,r),c=!0}return c}function p4(t,e){let n=wo(e,t),i=n[Vt];h4(i,n);let r=n[zo];r!==null&&n[Au]===null&&(n[Au]=BI(r,n[ea])),Cn(pn.ComponentStart);try{ob(i,n,n[ci])}finally{Cn(pn.ComponentEnd,n[ci])}}function h4(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ob(t,e,n){Zm(e);try{let i=t.viewQuery;i!==null&&r1(1,i,n);let r=t.template;r!==null&&dA(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ds]?.finishViewCreation(t),t.staticContentQueries&&HI(t,e),t.staticViewQueries&&r1(2,t.viewQuery,n);let s=t.components;s!==null&&m4(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[zt]&=-5,e0()}}function m4(t,e){for(let n=0;n<e.length;n++)p4(t,e[n])}function U0(t,e,n,i){let r=Lt(null);try{let s=e.tView,c=t[zt]&4096?4096:16,u=Y1(t,s,n,c,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),p=t[e.index];u[nl]=p;let m=t[Ds];return m!==null&&(u[Ds]=m.createEmbeddedView(s)),ob(s,u,n),u}finally{Lt(r)}}function np(t,e){return!e||e.firstChild===null||II(t)}function ip(t,e,n,i,r=!1){for(;n!==null;){if(n.type===128){n=r?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&i.push(bo(s)),Go(s)&&gA(s,i);let a=n.type;if(a&8)ip(t,e,n.child,i);else if(a&32){let c=Q1(n,e),u;for(;u=c();)i.push(u)}else if(a&16){let c=uA(e,n);if(Array.isArray(c))i.push(...c);else{let u=Xa(e[Xr]);ip(u[Vt],u,c,i,!0)}}n=r?n.projectionNext:n.next}return i}function gA(t,e){for(let n=ii;n<t.length;n++){let i=t[n],r=i[Vt].firstChild;r!==null&&ip(i[Vt],i,r,e)}t[il]!==t[zo]&&e.push(t[il])}function vA(t){if(t[dc]!==null){for(let e of t[dc])e.impl.addSequence(e);t[dc].length=0}}var yA=[];function g4(t){return t[Zr]??v4(t)}function v4(t){let e=yA.pop()??Object.create(_4);return e.lView=t,e}function y4(t){t.lView[Zr]!==t&&(t.lView=null,yA.push(t))}var _4=Ht(xt({},mu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{mc(t.lView)},consumerOnSignalRead(){this.lView[Zr]=this}});function C4(t){let e=t[Zr]??Object.create(x4);return e.lView=t,e}var x4=Ht(xt({},mu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Xa(t.lView);for(;e&&!_A(e[Vt]);)e=Xa(e);e&&bx(e)},consumerOnSignalRead(){this.lView[Zr]=this}});function _A(t){return t.type!==2}function CA(t){if(t[Qa]===null)return;let e=!0;for(;e;){let n=!1;for(let i of t[Qa])i.dirty&&(n=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=n&&!!(t[zt]&8192)}}var b4=100;function xA(t,e=0){let i=t[Ss].rendererFactory,r=!1;r||i.begin?.();try{w4(t,e)}finally{r||i.end?.()}}function w4(t,e){let n=Nx();try{Of(!0),m1(t,e);let i=0;for(;Kf(t);){if(i===b4)throw new St(103,!1);i++,m1(t,1)}}finally{Of(n)}}function E4(t,e,n,i){if(hc(e))return;let r=e[zt],s=!1,a=!1;Zm(e);let c=!0,u=null,p=null;s||(_A(t)?(p=g4(e),u=gu(p)):im()===null?(c=!1,p=C4(e),u=gu(p)):e[Zr]&&(Kl(e[Zr]),e[Zr]=null));try{xx(e),yT(t.bindingStartIndex),n!==null&&dA(t,e,n,2,i);let m=(r&3)===3;if(!s)if(m){let E=t.preOrderCheckHooks;E!==null&&c0(e,E,null)}else{let E=t.preOrderHooks;E!==null&&u0(e,E,0,null),zx(e,0)}if(a||S4(e),CA(e),bA(e,0),t.contentQueries!==null&&HI(t,e),!s)if(m){let E=t.contentCheckHooks;E!==null&&c0(e,E)}else{let E=t.contentHooks;E!==null&&u0(e,E,1),zx(e,1)}T4(t,e);let C=t.components;C!==null&&EA(e,C,0);let x=t.viewQuery;if(x!==null&&r1(2,x,i),!s)if(m){let E=t.viewCheckHooks;E!==null&&c0(e,E)}else{let E=t.viewHooks;E!==null&&u0(e,E,2),zx(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Wm]){for(let E of e[Wm])E();e[Wm]=null}s||(vA(e),e[zt]&=-73)}catch(m){throw s||mc(e),m}finally{p!==null&&(wf(p,u),c&&y4(p)),e0()}}function bA(t,e){for(let n=MI(t);n!==null;n=kI(n))for(let i=ii;i<n.length;i++){let r=n[i];wA(r,e)}}function S4(t){for(let e=MI(t);e!==null;e=kI(e)){if(!(e[zt]&2))continue;let n=e[pc];for(let i=0;i<n.length;i++){let r=n[i];bx(r)}}}function D4(t,e,n){Cn(pn.ComponentStart);let i=wo(e,t);try{wA(i,n)}finally{Cn(pn.ComponentEnd,i[ci])}}function wA(t,e){Km(t)&&m1(t,e)}function m1(t,e){let i=t[Vt],r=t[zt],s=t[Zr],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(s?.dirty&&Ef(s)),a||=!1,s&&(s.dirty=!1),t[zt]&=-9217,a)E4(i,t,i.template,t[ci]);else if(r&8192){let c=Lt(null);try{CA(t),bA(t,1);let u=i.components;u!==null&&EA(t,u,1),vA(t)}finally{Lt(c)}}}function EA(t,e,n){for(let i=0;i<e.length;i++)D4(t,e[i],n)}function T4(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)ol(~r);else{let s=r,a=n[++i],c=n[++i];CT(a,s);let u=e[s];Cn(pn.HostBindingsUpdateStart,u);try{c(2,u)}finally{Cn(pn.HostBindingsUpdateEnd,u)}}}}finally{ol(-1)}}function sb(t,e){let n=Nx()?64:1088;for(t[Ss].changeDetectionScheduler?.notify(e);t;){t[zt]|=n;let i=Xa(t);if(Nu(t)&&!i)return t;t=i}return null}function SA(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function DA(t,e){let n=ii+e;if(n<t.length)return t[n]}function z0(t,e,n,i=!0){let r=e[Vt];if(I4(r,e,t,n),i){let a=h1(n,t),c=e[Bn],u=c.parentNode(t[il]);u!==null&&H5(r,t[xo],c,e,u,a)}let s=e[Au];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function TA(t,e){let n=rp(t,e);return n!==void 0&&B0(n[Vt],n),n}function rp(t,e){if(t.length<=ii)return;let n=ii+e,i=t[n];if(i){let r=i[nl];r!==null&&r!==t&&eb(r,i),e>0&&(t[n-1][Co]=i[Co]);let s=Uf(t,ii+e);B5(i[Vt],i);let a=s[Ds];a!==null&&a.detachView(s[Vt]),i[wi]=null,i[Co]=null,i[zt]&=-129}return i}function I4(t,e,n,i){let r=ii+i,s=n.length;i>0&&(n[r-1][Co]=e),i<s-ii?(e[Co]=n[r],ux(n,ii+i,e)):(n.push(e),e[Co]=null),e[wi]=n;let a=e[nl];a!==null&&n!==a&&IA(a,e);let c=e[Ds];c!==null&&c.insertView(t),Ym(e),e[zt]|=128}function IA(t,e){let n=t[pc],i=e[wi];if(Ts(i))t[zt]|=2;else{let r=i[wi][Xr];e[Xr]!==r&&(t[zt]|=2)}n===null?t[pc]=[e]:n.push(e)}var sl=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Vt];return ip(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ci]}set context(e){this._lView[ci]=e}get destroyed(){return hc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wi];if(Go(e)){let n=e[$f],i=n?n.indexOf(this):-1;i>-1&&(rp(e,i),Uf(n,i))}this._attachedToViewContainer=!1}B0(this._lView[Vt],this._lView)}onDestroy(e){wx(this._lView,e)}markForCheck(){sb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[zt]&=-129}reattach(){Ym(this._lView),this._lView[zt]|=128}detectChanges(){this._lView[zt]|=1024,xA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new St(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Nu(this._lView),n=this._lView[nl];n!==null&&!e&&eb(n,this._lView),cA(this._lView[Vt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new St(902,!1);this._appRef=e;let n=Nu(this._lView),i=this._lView[nl];i!==null&&!n&&IA(i,this._lView),Ym(this._lView)}};var Vu=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=A4;constructor(n,i,r){this._declarationLView=n,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,r){let s=U0(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:r});return new sl(s)}}return t})();function A4(){return ab(sr(),qt())}function ab(t,e){return t.type&4?new Vu(e,t,Hu(t,e)):null}function dp(t,e,n,i,r){let s=t.data[e];if(s===null)s=M4(t,e,n,i,r),_T()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=i,s.attrs=r;let a=mT();s.injectorIndex=a===null?-1:a.injectorIndex}return gc(s,!0),s}function M4(t,e,n,i,r){let s=Ax(),a=Mx(),c=a?s:s&&s.parent,u=t.data[e]=N4(t,c,n,e,i,r);return k4(t,u,s,a),u}function k4(t,e,n,i){t.firstChild===null&&(t.firstChild=e),n!==null&&(i?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function N4(t,e,n,i,r,s){let a=e?e.injectorIndex:-1,c=0;return hT()&&(c|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function F4(t){let e=t[yx]??[],i=t[wi][Bn],r=[];for(let s of e)s.data[PI]!==void 0?r.push(s):R4(s,i);t[yx]=r}function R4(t,e){let n=0,i=t.firstChild;if(i){let r=t.data[RI];for(;n<r;){let s=i.nextSibling;QI(e,i,!1),i=s,n++}}}var P4=()=>null,L4=()=>null;function g1(t,e){return P4(t,e)}function AA(t,e,n){return L4(t,e,n)}var MA=class{},G0=class{},v1=class{resolveComponentFactory(e){throw new St(917,!1)}},fp=class{static NULL=new v1},bc=class{},aa=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>O4()}return t})();function O4(){let t=qt(),e=sr(),n=wo(e.index,t);return(Ts(n)?n:t)[Bn]}var kA=(()=>{class t{static \u0275prov=Fe({token:t,providedIn:"root",factory:()=>null})}return t})();var f0={},y1=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){let r=this.injector.get(e,f0,i);return r!==f0||n===f0?r:this.parentInjector.get(e,n,i)}};function b0(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")s=c;else if(s==1)r=Bm(r,c);else if(s==2){let u=c,p=e[++a];i=Bm(i,u+": "+p+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function hn(t,e=0){let n=qt();if(n===null)return Dt(t,e);let i=sr();return SI(i,n,Ki(t),e)}function V4(){let t="invalid";throw new Error(t)}function B4(t,e,n,i,r){let s=i===null?null:{"":-1},a=r(t,n);if(a!==null){let c=a,u=null,p=null;for(let m of a)if(m.resolveHostDirectives!==null){[c,u,p]=m.resolveHostDirectives(a);break}z4(t,e,n,c,s,u,p)}s!==null&&i!==null&&H4(n,i,s)}function H4(t,e,n){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let s=n[e[r+1]];if(s==null)throw new St(-301,!1);i.push(e[r],s)}}function U4(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function z4(t,e,n,i,r,s,a){let c=i.length,u=null;for(let x=0;x<c;x++){let E=i[x];u===null&&Is(E)&&(u=E,U4(t,n,x)),e1(y0(n,e),t,E.type)}K4(n,t.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let x=0;x<c;x++){let E=i[x];E.providersResolver&&E.providersResolver(E)}let p=!1,m=!1,C=iA(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let x=0;x<c;x++){let E=i[x];if(n.mergedAttrs=Lu(n.mergedAttrs,E.hostAttrs),$4(t,n,e,C,E),j4(C,E,r),a!==null&&a.has(E)){let[N,R]=a.get(E);n.directiveToIndex.set(E.type,[C,N+n.directiveStart,R+n.directiveStart])}else(s===null||!s.has(E))&&n.directiveToIndex.set(E.type,C);E.contentQueries!==null&&(n.flags|=4),(E.hostBindings!==null||E.hostAttrs!==null||E.hostVars!==0)&&(n.flags|=64);let A=E.type.prototype;!p&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),p=!0),!m&&(A.ngOnChanges||A.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),m=!0),C++}G4(t,n,s)}function G4(t,e,n){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=t.data[i];if(n===null||!n.has(r))ZT(0,e,r,i),ZT(1,e,r,i),tI(e,i,!1);else{let s=n.get(r);eI(0,e,s,i),eI(1,e,s,i),tI(e,i,!0)}}}function ZT(t,e,n,i){let r=t===0?n.inputs:n.outputs;for(let s in r)if(r.hasOwnProperty(s)){let a;t===0?a=e.inputs??={}:a=e.outputs??={},a[s]??=[],a[s].push(i),NA(e,s)}}function eI(t,e,n,i){let r=t===0?n.inputs:n.outputs;for(let s in r)if(r.hasOwnProperty(s)){let a=r[s],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[a]??=[],c[a].push(i,s),NA(e,a)}}function NA(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function tI(t,e,n){let{attrs:i,inputs:r,hostDirectiveInputs:s}=t;if(i===null||!n&&r===null||n&&s===null||j1(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let a=null,c=0;for(;c<i.length;){let u=i[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&r.hasOwnProperty(u)){let p=r[u];for(let m of p)if(m===e){a??=[],a.push(u,i[c+1]);break}}else if(n&&s.hasOwnProperty(u)){let p=s[u];for(let m=0;m<p.length;m+=2)if(p[m]===e){a??=[],a.push(p[m+1],i[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(a)}function $4(t,e,n,i,r){t.data[i]=r;let s=r.factory||(r.factory=Ja(r.type,!0)),a=new Cc(s,Is(r),hn,null);t.blueprint[i]=a,n[i]=a,q4(t,e,i,iA(t,n,r.hostVars,Cr),r)}function q4(t,e,n,i,r){let s=r.hostBindings;if(s){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let c=~e.index;W4(a)!=c&&a.push(c),a.push(n,i,s)}}function W4(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function j4(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Is(e)&&(n[""]=t)}}function K4(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function FA(t,e,n,i,r,s,a,c){let u=e[Vt],p=u.consts,m=As(p,a),C=dp(u,t,n,i,m);return s&&B4(u,e,C,As(p,c),r),C.mergedAttrs=Lu(C.mergedAttrs,C.attrs),C.attrs!==null&&b0(C,C.attrs,!1),C.mergedAttrs!==null&&b0(C,C.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,C),C}function RA(t,e){EO(t,e),_x(e)&&t.queries.elementEnd(e)}function Y4(t,e,n,i,r,s){let a=e.consts,c=As(a,r),u=dp(e,t,n,i,c);if(u.mergedAttrs=Lu(u.mergedAttrs,u.attrs),s!=null){let p=As(a,s);u.localNames=[];for(let m=0;m<p.length;m+=2)u.localNames.push(p[m],-1)}return u.attrs!==null&&b0(u,u.attrs,!1),u.mergedAttrs!==null&&b0(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function lb(t,e,n){return t[e]=n}function J4(t,e){return t[e]}function Yo(t,e,n){if(n===Cr)return!1;let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function PA(t,e,n,i){let r=Yo(t,e,n);return Yo(t,e+1,i)||r}function p0(t,e,n){return function i(r){let s=rl(t)?wo(t.index,e):e;sb(s,5);let a=e[ci],c=nI(e,a,n,r),u=i.__ngNextListenerFn__;for(;u;)c=nI(e,a,u,r)&&c,u=u.__ngNextListenerFn__;return c}}function nI(t,e,n,i){let r=Lt(null);try{return Cn(pn.OutputStart,e,n),n(i)!==!1}catch(s){return f4(t,s),!1}finally{Cn(pn.OutputEnd,e,n),Lt(r)}}function LA(t,e,n,i,r,s,a,c){let u=jm(t),p=!1,m=null;if(!i&&u&&(m=X4(e,n,s,t.index)),m!==null){let C=m.__ngLastListenerFn__||m;C.__ngNextListenerFn__=a,m.__ngLastListenerFn__=a,p=!0}else{let C=$o(t,n),x=i?i(C):C;jO(n,x,s,c);let E=r.listen(x,s,c);if(!Q4(s)){let A=i?N=>i(bo(N[t.index])):t.index;OA(A,e,n,s,c,E,!1)}}return p}function Q4(t){return t.startsWith("animation")||t.startsWith("transition")}function X4(t,e,n,i){let r=t.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let a=r[s];if(a===n&&r[s+1]===i){let c=e[Mu],u=r[s+2];return c&&c.length>u?c[u]:null}typeof a=="string"&&(s+=2)}return null}function OA(t,e,n,i,r,s,a){let c=e.firstCreatePass?Sx(e):null,u=Ex(n),p=u.length;u.push(r,s),c&&c.push(i,t,p,(p+1)*(a?-1:1))}function iI(t,e,n,i,r,s){let a=e[n],c=e[Vt],p=c.data[n].outputs[i],C=a[p].subscribe(s);OA(t.index,c,e,r,s,C,!0)}var _1=Symbol("BINDING");var w0=class extends fp{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Zs(e);return new wc(n,this.ngModule)}};function Z4(t){return Object.keys(t).map(e=>{let[n,i,r]=t[e],s={propName:n,templateName:e,isSignal:(i&O0.SignalBased)!==0};return r&&(s.transform=r),s})}function eV(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function tV(t,e,n){let i=e instanceof yr?e:e?.injector;return i&&t.getStandaloneInjector!==null&&(i=t.getStandaloneInjector(i)||i),i?new y1(n,i):n}function nV(t){let e=t.get(bc,null);if(e===null)throw new St(407,!1);let n=t.get(kA,null),i=t.get(Xs,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:i,ngReflect:!1}}function iV(t,e){let n=VA(t);return YI(e,n,n==="svg"?oT:n==="math"?sT:null)}function VA(t){return(t.selectors[0][0]||"div").toLowerCase()}var wc=class extends G0{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Z4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=eV(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=A5(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,i,r,s,a){Cn(pn.DynamicComponentStart);let c=Lt(null);try{let u=this.componentDef,p=rV(i,u,a,s),m=tV(u,r||this.ngModule,e),C=nV(m),x=C.rendererFactory.createRenderer(null,u),E=i?Z5(x,i,u.encapsulation,m):iV(u,x),A=a?.some(rI)||s?.some(k=>typeof k!="function"&&k.bindings.some(rI)),N=Y1(null,p,null,512|nA(u),null,null,C,x,m,null,BI(E,m,!0));N[jn]=E,Zm(N);let R=null;try{let k=FA(jn,N,2,"#host",()=>p.directiveRegistry,!0,0);XI(x,E,k),Ou(E,N),fA(p,N,k),UI(p,k,N),RA(p,k),n!==void 0&&sV(k,this.ngContentSelectors,n),R=wo(k.index,N),N[ci]=R[ci],ob(p,N,null)}catch(k){throw R!==null&&n1(R),n1(N),k}finally{Cn(pn.DynamicComponentEnd),e0()}return new E0(this.componentType,N,!!A)}finally{Lt(c)}}};function rV(t,e,n,i){let r=t?["ng-version","21.0.8"]:M5(e.selectors[0]),s=null,a=null,c=0;if(n)for(let m of n)c+=m[_1].requiredVars,m.create&&(m.targetIdx=0,(s??=[]).push(m)),m.update&&(m.targetIdx=0,(a??=[]).push(m));if(i)for(let m=0;m<i.length;m++){let C=i[m];if(typeof C!="function")for(let x of C.bindings){c+=x[_1].requiredVars;let E=m+1;x.create&&(x.targetIdx=E,(s??=[]).push(x)),x.update&&(x.targetIdx=E,(a??=[]).push(x))}}let u=[e];if(i)for(let m of i){let C=typeof m=="function"?m:m.type,x=ax(C);u.push(x)}return K1(0,null,oV(s,a),1,c,u,null,null,null,[r],null)}function oV(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let i of t)i.create();if(n&2&&e)for(let i of e)i.update()}}function rI(t){let e=t[_1].kind;return e==="input"||e==="twoWay"}var E0=class extends MA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,i){super(),this._rootLView=n,this._hasInputBindings=i,this._tNode=qf(n[Vt],jn),this.location=Hu(this._tNode,n),this.instance=wo(this._tNode.index,n)[ci],this.hostView=this.changeDetectorRef=new sl(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let r=this._rootLView,s=rb(i,r[Vt],r,e,n);this.previousInputValues.set(e,n);let a=wo(i.index,r);sb(a,1)}get injector(){return new _c(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function sV(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let s=n[r];i.push(s!=null&&s.length?Array.from(s):null)}}var pp=(()=>{class t{static __NG_ELEMENT_ID__=aV}return t})();function aV(){let t=sr();return HA(t,qt())}var lV=pp,BA=class extends lV{_lContainer;_hostTNode;_hostLView;constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Hu(this._hostTNode,this._hostLView)}get injector(){return new _c(this._hostTNode,this._hostLView)}get parentInjector(){let e=L1(this._hostTNode,this._hostLView);if(_I(e)){let n=g0(e,this._hostLView),i=m0(e),r=n[Vt].data[i+8];return new _c(r,n)}else return new _c(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=oI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ii}createEmbeddedView(e,n,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let a=g1(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,a);return this.insertImpl(c,r,np(this._hostTNode,a)),c}createComponent(e,n,i,r,s,a,c){let u=e&&!_O(e),p;if(u)p=n;else{let R=n||{};p=R.index,i=R.injector,r=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef,a=R.directives,c=R.bindings}let m=u?e:new wc(Zs(e)),C=i||this.parentInjector;if(!s&&m.ngModule==null){let k=(u?C:this.parentInjector).get(yr,null);k&&(s=k)}let x=Zs(m.componentType??{}),E=g1(this._lContainer,x?.id??null),A=E?.firstChild??null,N=m.create(C,r,A,s,a,c);return this.insertImpl(N.hostView,p,np(this._hostTNode,E)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(aT(r)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=r[wi],p=new BA(u,u[xo],u[wi]);p.detach(p.indexOf(e))}}let s=this._adjustIndex(n),a=this._lContainer;return z0(a,r,s,i),e.attachToViewContainerRef(),ux(qx(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=oI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=rp(this._lContainer,n);i&&(Uf(qx(this._lContainer),n),B0(i[Vt],i))}detach(e){let n=this._adjustIndex(e,-1),i=rp(this._lContainer,n);return i&&Uf(qx(this._lContainer),n)!=null?new sl(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function oI(t){return t[$f]}function qx(t){return t[$f]||(t[$f]=[])}function HA(t,e){let n,i=e[t.index];return Go(i)?n=i:(n=SA(i,e,null,t),e[t.index]=n,J1(e,n)),uV(n,e,t,i),new BA(n,t,e)}function cV(t,e){let n=t[Bn],i=n.createComment(""),r=$o(e,t),s=n.parentNode(r);return C0(n,s,i,n.nextSibling(r),!1),i}var uV=pV,dV=()=>!1;function fV(t,e,n){return dV(t,e,n)}function pV(t,e,n,i){if(t[il])return;let r;n.type&8?r=bo(i):r=cV(e,n),t[il]=r}var C1=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},x1=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){let a=n.getByIndex(s),c=this.queries[a.indexInDeclarationView];r.push(c.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)GA(e,n).matches!==null&&this.queries[n].setDirty()}},b1=class{flags;read;predicate;constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=CV(e):this.predicate=e}},w1=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},E1=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,n,hV(n,s)),this.matchTNodeWithReadOption(e,n,d0(n,e,s,!1,!1))}else i===Vu?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,d0(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Ei||r===pp||r===Vu&&n.type&4)this.addMatch(n.index,-2);else{let s=d0(n,e,r,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function hV(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function mV(t,e){return t.type&11?Hu(t,e):t.type&4?ab(t,e):null}function gV(t,e,n,i){return n===-1?mV(e,t):n===-2?vV(t,e,i):tp(t,t[Vt],n,e)}function vV(t,e,n){if(n===Ei)return Hu(e,t);if(n===Vu)return ab(e,t);if(n===pp)return HA(e,t)}function UA(t,e,n,i){let r=e[Ds].queries[i];if(r.matches===null){let s=t.data,a=n.matches,c=[];for(let u=0;a!==null&&u<a.length;u+=2){let p=a[u];if(p<0)c.push(null);else{let m=s[p];c.push(gV(e,m,a[u+1],n.metadata.read))}}r.matches=c}return r.matches}function S1(t,e,n,i){let r=t.queries.getByIndex(n),s=r.matches;if(s!==null){let a=UA(t,e,r,n);for(let c=0;c<s.length;c+=2){let u=s[c];if(u>0)i.push(a[c/2]);else{let p=s[c+1],m=e[-u];for(let C=ii;C<m.length;C++){let x=m[C];x[nl]===x[wi]&&S1(x[Vt],x,p,i)}if(m[pc]!==null){let C=m[pc];for(let x=0;x<C.length;x++){let E=C[x];S1(E[Vt],E,p,i)}}}}}return i}function zA(t,e){return t[Ds].queries[e].queryList}function yV(t,e,n){let i=new _0((n&4)===4);return uT(t,e,i,i.destroy),(e[Ds]??=new x1).queries.push(new C1(i))-1}function _V(t,e,n){let i=hi();return i.firstCreatePass&&(xV(i,new b1(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),yV(i,qt(),e)}function CV(t){return t.split(",").map(e=>e.trim())}function xV(t,e,n){t.queries===null&&(t.queries=new w1),t.queries.track(new E1(e,n))}function GA(t,e){return t.queries.getByIndex(e)}function bV(t,e){let n=t[Vt],i=GA(n,e);return i.crossesNgTemplate?S1(n,t,e,[]):UA(n,t,i,e)}function $A(t,e,n){let i,r=Sf(()=>{i._dirtyCounter();let s=EV(i,t);if(e&&s===void 0)throw new St(-951,!1);return s});return i=r[ir],i._dirtyCounter=xe(0),i._flatValue=void 0,r}function qA(t){return $A(!0,!1,t)}function WA(t){return $A(!0,!0,t)}function wV(t,e){let n=t[ir];n._lView=qt(),n._queryIndex=e,n._queryList=zA(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(i=>i+1))}function EV(t,e){let n=t._lView,i=t._queryIndex;if(n===void 0||i===void 0||n[zt]&4)return e?void 0:or;let r=zA(n,i),s=bV(n,i);return r.reset(s,HO),e?r.first:r._changesDetected||t._flatValue===void 0?t._flatValue=r.toArray():t._flatValue}var Ec=class{},jA=class{};var S0=class extends Ec{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new w0(this);constructor(e,n,i,r=!0){super(),this.ngModuleType=e,this._parent=n;let s=sx(e);this._bootstrapComponents=eA(s.bootstrap),this._r3Injector=Px(e,n,[{provide:Ec,useValue:this},{provide:fp,useValue:this.componentFactoryResolver},...i],Qs(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},D0=class extends jA{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new S0(this.moduleType,e,[])}};var op=class extends Ec{injector;componentFactoryResolver=new w0(this);instance=null;constructor(e){super();let n=new sc([...e.providers,{provide:Ec,useValue:this},{provide:fp,useValue:this.componentFactoryResolver}],e.parent||Gf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function KA(t,e,n=null){return new op({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var SV=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=px(!1,n.type),r=i.length>0?KA([i],this._injector,""):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Fe({token:t,providedIn:"environment",factory:()=>new t(Dt(yr))})}return t})();function Nt(t){return ap(()=>{let e=YA(t),n=Ht(xt({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===V1.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(SV).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ko.Emulated,styles:t.styles||or,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&sa("NgStandalone"),JA(n);let i=t.dependencies;return n.directiveDefs=sI(i,DV),n.pipeDefs=sI(i,$D),n.id=AV(n),n})}function DV(t){return Zs(t)||ax(t)}function la(t){return ap(()=>({type:t.type,bootstrap:t.bootstrap||or,declarations:t.declarations||or,imports:t.imports||or,exports:t.exports||or,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function TV(t,e){if(t==null)return el;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],s,a,c,u;Array.isArray(r)?(c=r[0],s=r[1],a=r[2]??s,u=r[3]||null):(s=r,a=r,c=O0.None,u=null),n[s]=[i,c,u],e[s]=a}return n}function IV(t){if(t==null)return el;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Rn(t){return ap(()=>{let e=YA(t);return JA(e),e})}function $0(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function YA(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||el,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||or,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:TV(t.inputs,e),outputs:IV(t.outputs),debugInfo:null}}function JA(t){t.features?.forEach(e=>e(t))}function sI(t,e){return t?()=>{let n=typeof t=="function"?t():t,i=[];for(let r of n){let s=e(r);s!==null&&i.push(s)}return i}:null}function AV(t){let e=0,n=typeof t.consts=="function"?"":t.consts,i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let s of i.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function MV(t){return Object.getPrototypeOf(t.prototype).constructor}function Vr(t){let e=MV(t.type),n=!0,i=[t];for(;e;){let r;if(Is(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new St(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let a=t;a.inputs=Wx(t.inputs),a.declaredInputs=Wx(t.declaredInputs),a.outputs=Wx(t.outputs);let c=r.hostBindings;c&&PV(t,c);let u=r.viewQuery,p=r.contentQueries;if(u&&FV(t,u),p&&RV(t,p),kV(t,r),GD(t.outputs,r.outputs),Is(r)&&r.data.animation){let m=t.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let a=0;a<s.length;a++){let c=s[a];c&&c.ngInherit&&c(t),c===Vr&&(n=!1)}}e=Object.getPrototypeOf(e)}NV(i)}function kV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n])}}function NV(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Lu(r.hostAttrs,n=Lu(n,r.hostAttrs))}}function Wx(t){return t===el?{}:t===or?[]:t}function FV(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function RV(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,s)=>{e(i,r,s),n(i,r,s)}:t.contentQueries=e}function PV(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function LV(t,e,n,i,r,s,a,c){if(n.firstCreatePass){t.mergedAttrs=Lu(t.mergedAttrs,t.attrs);let m=t.tView=K1(2,t,r,s,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),m.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),gc(t,!1);let u=OV(n,e,t,i);n0()&&tb(n,e,u,t),Ou(u,e);let p=SA(u,e,u,t);e[i+jn]=p,J1(e,p),fV(p,t,e)}function T0(t,e,n,i,r,s,a,c,u,p,m){let C=n+jn,x;if(e.firstCreatePass){if(x=dp(e,C,4,a||null,c||null),p!=null){let E=As(e.consts,p);x.localNames=[];for(let A=0;A<E.length;A+=2)x.localNames.push(E[A],-1)}}else x=e.data[C];return LV(x,t,e,n,i,r,s,u),p!=null&&ib(t,x,m),x}var OV=VV;function VV(t,e,n,i){return i0(!0),e[Bn].createComment("")}var QA=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var cb=new Mt("");function Uu(t){return!!t&&typeof t.then=="function"}function ub(t){return!!t&&typeof t.subscribe=="function"}var db=new Mt("");function BV(t){return tl([{provide:db,multi:!0,useValue:t}])}var fb=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i});appInits=he(db,{optional:!0})??[];injector=he(Lr);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let r of this.appInits){let s=Iu(this.injector,r);if(Uu(s))n.push(s);else if(ub(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});n.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),n.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XA=new Mt("");function ZA(){xC(()=>{let t="";throw new St(600,t)})}function e2(t){return t.isBoundToModule}var HV=10;var Dc=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=he(na);afterRenderManager=he(X1);zonelessEnabled=he(Qf);rootEffectScheduler=he(r0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ji;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=he(yc);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ni(n=>!n))}constructor(){he(oa,{optional:!0})}whenStable(){let n;return new Promise(i=>{n=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{n.unsubscribe()})}_injector=he(yr);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,i){return this.bootstrapImpl(n,i)}bootstrapImpl(n,i,r=Lr.NULL){return this._injector.get(Or).run(()=>{Cn(pn.BootstrapComponentStart);let a=n instanceof G0;if(!this._injector.get(fb).done){let A="";throw new St(405,A)}let u;a?u=n:u=this._injector.get(fp).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let p=e2(u)?void 0:this._injector.get(Ec),m=i||u.selector,C=u.create(r,[],m,p),x=C.location.nativeElement,E=C.injector.get(cb,null);return E?.registerApplication(x),C.onDestroy(()=>{this.detachView(C.hostView),ep(this.components,C),E?.unregisterApplication(x)}),this._loadComponent(C),Cn(pn.BootstrapComponentEnd,C),C})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Cn(pn.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(V0.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Cn(pn.ChangeDetectionEnd),new St(101,!1);let n=Lt(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Lt(n),this.afterTick.next(),Cn(pn.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(bc,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<HV;){Cn(pn.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Cn(pn.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!Kf(r))continue;let s=i&&!this.zonelessEnabled?0:1;xA(r,s),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Kf(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;ep(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(n),this._injector.get(XA,[]).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ep(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new St(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ep(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ca(t,e,n,i){let r=qt(),s=vc();if(Yo(r,s,e)){let a=hi(),c=t0();c4(c,r,t,e,n,i)}return ca}var pse=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var D1=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),s=this.detach(r);if(r-i>1){let a=this.detach(i);this.attach(i,s),this.attach(r,a)}else this.attach(i,s)}move(e,n){this.attach(n,this.detach(e))}};function jx(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function UV(t,e,n,i){let r,s,a=0,c=t.length-1,u=void 0;if(Array.isArray(e)){Lt(i);let p=e.length-1;for(Lt(null);a<=c&&a<=p;){let m=t.at(a),C=e[a],x=jx(a,m,a,C,n);if(x!==0){x<0&&t.updateValue(a,C),a++;continue}let E=t.at(c),A=e[p],N=jx(c,E,p,A,n);if(N!==0){N<0&&t.updateValue(c,A),c--,p--;continue}let R=n(a,m),k=n(c,E),B=n(a,C);if(Object.is(B,k)){let $=n(p,A);Object.is($,R)?(t.swap(a,c),t.updateValue(c,A),p--,c--):t.move(c,a),t.updateValue(a,C),a++;continue}if(r??=new I0,s??=lI(t,a,c,n),T1(t,r,a,B))t.updateValue(a,C),a++,c++;else if(s.has(B))r.set(R,t.detach(a)),c--;else{let $=t.create(a,e[a]);t.attach(a,$),a++,c++}}for(;a<=p;)aI(t,r,n,a,e[a]),a++}else if(e!=null){Lt(i);let p=e[Symbol.iterator]();Lt(null);let m=p.next();for(;!m.done&&a<=c;){let C=t.at(a),x=m.value,E=jx(a,C,a,x,n);if(E!==0)E<0&&t.updateValue(a,x),a++,m=p.next();else{r??=new I0,s??=lI(t,a,c,n);let A=n(a,x);if(T1(t,r,a,A))t.updateValue(a,x),a++,c++,m=p.next();else if(!s.has(A))t.attach(a,t.create(a,x)),a++,c++,m=p.next();else{let N=n(a,C);r.set(N,t.detach(a)),c--}}}for(;!m.done;)aI(t,r,n,t.length,m.value),m=p.next()}for(;a<=c;)t.destroy(t.detach(c--));r?.forEach(p=>{t.destroy(p)})}function T1(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function aI(t,e,n,i,r){if(T1(t,e,i,n(i,r)))t.updateValue(i,r);else{let s=t.create(i,r);t.attach(i,s)}}function lI(t,e,n,i){let r=new Set;for(let s=e;s<=n;s++)r.add(i(s,t.at(s)));return r}var I0=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function fe(t,e,n,i,r,s,a,c){sa("NgControlFlow");let u=qt(),p=hi(),m=As(p.consts,s);return T0(u,p,t,e,n,i,r,m,256,a,c),pb}function pb(t,e,n,i,r,s,a,c){sa("NgControlFlow");let u=qt(),p=hi(),m=As(p.consts,s);return T0(u,p,t,e,n,i,r,m,512,a,c),pb}function pe(t,e){sa("NgControlFlow");let n=qt(),i=vc(),r=n[i]!==Cr?n[i]:-1,s=r!==-1?A0(n,jn+r):void 0,a=0;if(Yo(n,i,t)){let c=Lt(null);try{if(s!==void 0&&TA(s,a),t!==-1){let u=jn+t,p=A0(n,u),m=k1(n[Vt],u),C=AA(p,m,n),x=U0(n,m,e,{dehydratedView:C});z0(p,x,a,np(m,C))}}finally{Lt(c)}}else if(s!==void 0){let c=DA(s,a);c!==void 0&&(c[ci]=e)}}var I1=class{lContainer;$implicit;$index;constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-ii}};function ua(t){return t}function xn(t,e){return e}var A1=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function et(t,e,n,i,r,s,a,c,u,p,m,C,x){sa("NgControlFlow");let E=qt(),A=hi(),N=u!==void 0,R=qt(),k=c?a.bind(R[Xr][ci]):a,B=new A1(N,k);R[jn+t]=B,T0(E,A,t+1,e,n,i,r,As(A.consts,s),256),N&&T0(E,A,t+2,u,p,m,C,As(A.consts,x),512)}var M1=class extends D1{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i}get length(){return this.lContainer.length-ii}at(e){return this.getLView(e)[ci].$implicit}attach(e,n){let i=n[Au];this.needsIndexUpdate||=e!==this.length,z0(this.lContainer,n,e,np(this.templateTNode,i)),zV(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,GV(this.lContainer,e),$V(this.lContainer,e)}create(e,n){let i=g1(this.lContainer,this.templateTNode.tView.ssrId);return U0(this.hostLView,this.templateTNode,new I1(this.lContainer,n,e),{dehydratedView:i})}destroy(e){B0(e[Vt],e)}updateValue(e,n){this.getLView(e)[ci].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ci].$index=e}getLView(e){return qV(this.lContainer,e)}};function tt(t){let e=Lt(null),n=qo();try{let i=qt(),r=i[Vt],s=i[n],a=n+1,c=A0(i,a);if(s.liveCollection===void 0){let p=k1(r,a);s.liveCollection=new M1(c,i,p)}else s.liveCollection.reset();let u=s.liveCollection;if(UV(u,t,s.trackByFn,e),u.updateIndexes(),s.hasEmptyBlock){let p=vc(),m=u.length===0;if(Yo(i,p,m)){let C=n+2,x=A0(i,C);if(m){let E=k1(r,C),A=AA(x,E,i),N=U0(i,E,void 0,{dehydratedView:A});z0(x,N,0,np(E,A))}else r.firstUpdatePass&&F4(x),TA(x,0)}}}finally{Lt(e)}}function A0(t,e){return t[e]}function zV(t,e){if(t.length<=ii)return;let n=ii+e,i=t[n],r=i?i[fc]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let s=i[ea];O5(s,r),xc.delete(i[ta]),r.detachedLeaveAnimationFns=void 0}}function GV(t,e){if(t.length<=ii)return;let n=ii+e,i=t[n],r=i?i[fc]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function $V(t,e){return rp(t,e)}function qV(t,e){return DA(t,e)}function k1(t,e){return qf(t,e)}function Ye(t,e,n){let i=qt(),r=vc();if(Yo(i,r,e)){let s=hi(),a=t0();i4(a,i,t,e,i[Bn],n)}return Ye}function N1(t,e,n,i,r){rb(e,t,n,r?"class":"style",i)}function z(t,e,n,i){let r=qt(),s=r[Vt],a=t+jn,c=s.firstCreatePass?FA(a,r,2,e,l4,pT(),n,i):s.data[a];if(hA(c,r,t,e,t2),jm(c)){let u=r[Vt];fA(u,r,c),UI(u,c,r)}return i!=null&&ib(r,c),z}function G(){let t=hi(),e=sr(),n=mA(e);return t.firstCreatePass&&RA(t,n),Tx(n)&&Ix(),Dx(),n.classesWithoutHost!=null&&DO(n)&&N1(t,n,qt(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&TO(n)&&N1(t,n,qt(),n.stylesWithoutHost,!1),G}function ke(t,e,n,i){return z(t,e,n,i),G(),ke}function ne(t,e,n,i){let r=qt(),s=r[Vt],a=t+jn,c=s.firstCreatePass?Y4(a,s,2,e,n,i):s.data[a];return hA(c,r,t,e,t2),i!=null&&ib(r,c),ne}function oe(){let t=sr(),e=mA(t);return Tx(e)&&Ix(),Dx(),oe}function ot(t,e,n,i){return ne(t,e,n,i),oe(),ot}var t2=(t,e,n,i,r)=>(i0(!0),YI(e[Bn],i,IT()));function Pe(){return qt()}function Ot(t,e,n){let i=qt(),r=vc();if(Yo(i,r,e)){let s=hi(),a=t0();pA(a,i,t,e,i[Bn],n)}return Ot}var Xf=void 0;function WV(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var jV=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Xf,Xf,Xf],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",WV],Kx={};function io(t){let e=KV(t),n=cI(e);if(n)return n;let i=e.split("-")[0];if(n=cI(i),n)return n;if(i==="en")return jV;throw new St(701,!1)}function cI(t){return t in Kx||(Kx[t]=yo.ng&&yo.ng.common&&yo.ng.common.locales&&yo.ng.common.locales[t]),Kx[t]}var ui=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(ui||{});function KV(t){return t.toLowerCase().replace(/_/g,"-")}var hp="en-US";var YV=hp;function n2(t){typeof t=="string"&&(YV=t.toLowerCase().replace(/_/g,"-"))}function Ce(t,e,n){let i=qt(),r=hi(),s=sr();return JV(r,i,i[Bn],s,t,e,n),Ce}function Je(t,e,n){let i=qt(),r=hi(),s=sr();return(s.type&3||n)&&LA(s,r,i,n,i[Bn],t,e,p0(s,i,e)),Je}function JV(t,e,n,i,r,s,a){let c=!0,u=null;if((i.type&3||a)&&(u??=p0(i,e,s),LA(i,t,e,a,n,r,s,u)&&(c=!1)),c){let p=i.outputs?.[r],m=i.hostDirectiveOutputs?.[r];if(m&&m.length)for(let C=0;C<m.length;C+=2){let x=m[C],E=m[C+1];u??=p0(i,e,s),iI(i,e,x,E,r,u)}if(p&&p.length)for(let C of p)u??=p0(i,e,s),iI(i,e,C,r,r,u)}}function F(t=1){return TT(t)}function zu(t,e,n,i){return wV(t,_V(e,n,i)),zu}function mp(t=1){Xm(wT()+t)}function Yi(t){let e=kx();return Wf(e,jn+t)}function l0(t,e){return t<<17|e<<2}function Sc(t){return t>>17&32767}function QV(t){return(t&2)==2}function XV(t,e){return t&131071|e<<17}function F1(t){return t|2}function Bu(t){return(t&131068)>>2}function Yx(t,e){return t&-131069|e<<2}function ZV(t){return(t&1)===1}function R1(t){return t|1}function e8(t,e,n,i,r,s){let a=s?e.classBindings:e.styleBindings,c=Sc(a),u=Bu(a);t[i]=n;let p=!1,m;if(Array.isArray(n)){let C=n;m=C[1],(m===null||Tu(C,m)>0)&&(p=!0)}else m=n;if(r)if(u!==0){let x=Sc(t[c+1]);t[i+1]=l0(x,c),x!==0&&(t[x+1]=Yx(t[x+1],i)),t[c+1]=XV(t[c+1],i)}else t[i+1]=l0(c,0),c!==0&&(t[c+1]=Yx(t[c+1],i)),c=i;else t[i+1]=l0(u,0),c===0?c=i:t[u+1]=Yx(t[u+1],i),u=i;p&&(t[i+1]=F1(t[i+1])),uI(t,m,i,!0),uI(t,m,i,!1),t8(e,m,t,i,s),a=l0(c,u),s?e.classBindings=a:e.styleBindings=a}function t8(t,e,n,i,r){let s=r?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Tu(s,e)>=0&&(n[i+1]=R1(n[i+1]))}function uI(t,e,n,i){let r=t[n+1],s=e===null,a=i?Sc(r):Bu(r),c=!1;for(;a!==0&&(c===!1||s);){let u=t[a],p=t[a+1];n8(u,e)&&(c=!0,t[a+1]=i?R1(p):F1(p)),a=i?Sc(p):Bu(p)}c&&(t[n+1]=i?F1(r):R1(r))}function n8(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Tu(t,e)>=0:!1}var jo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function i8(t){return t.substring(jo.key,jo.keyEnd)}function r8(t){return o8(t),i2(t,r2(t,0,jo.textEnd))}function i2(t,e){let n=jo.textEnd;return n===e?-1:(e=jo.keyEnd=s8(t,jo.key=e,n),r2(t,e,n))}function o8(t){jo.key=0,jo.keyEnd=0,jo.value=0,jo.valueEnd=0,jo.textEnd=t.length}function r2(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function s8(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function mi(t,e,n){return o2(t,e,n,!1),mi}function Qe(t,e){return o2(t,e,null,!0),Qe}function Zt(t){l8(h8,a8,t,!0)}function a8(t,e){for(let n=r8(e);n>=0;n=i2(e,n))$m(t,i8(e),!0)}function o2(t,e,n,i){let r=qt(),s=hi(),a=Jm(2);if(s.firstUpdatePass&&a2(s,t,a,i),e!==Cr&&Yo(r,a,e)){let c=s.data[qo()];l2(s,c,r,r[Bn],t,r[a+1]=g8(e,n),i,a)}}function l8(t,e,n,i){let r=hi(),s=Jm(2);r.firstUpdatePass&&a2(r,null,s,i);let a=qt();if(n!==Cr&&Yo(a,s,n)){let c=r.data[qo()];if(c2(c,i)&&!s2(r,s)){let u=i?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=Bm(u,n||"")),N1(r,c,a,n,i)}else m8(r,c,a,a[Bn],a[s+1],a[s+1]=p8(t,e,n),i,s)}}function s2(t,e){return e>=t.expandoStartIndex}function a2(t,e,n,i){let r=t.data;if(r[n+1]===null){let s=r[qo()],a=s2(t,n);c2(s,i)&&e===null&&!a&&(e=!1),e=c8(r,s,e,i),e8(r,s,e,n,a,i)}}function c8(t,e,n,i){let r=bT(t),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=Jx(null,t,e,n,i),n=sp(n,e.attrs,i),s=null);else{let a=e.directiveStylingLast;if(a===-1||t[a]!==r)if(n=Jx(r,t,e,n,i),s===null){let u=u8(t,e,i);u!==void 0&&Array.isArray(u)&&(u=Jx(null,t,e,u[1],i),u=sp(u,e.attrs,i),d8(t,e,i,u))}else s=f8(t,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),n}function u8(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Bu(i)!==0)return t[Sc(i)]}function d8(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Sc(r)]=i}function f8(t,e,n){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let a=t[s].hostAttrs;i=sp(i,a,n)}return sp(i,e.attrs,n)}function Jx(t,e,n,i,r){let s=null,a=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<a&&(s=e[c],i=sp(i,s.hostAttrs,r),s!==t);)c++;return t!==null&&(n.directiveStylingLast=c),i}function sp(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];typeof a=="number"?r=a:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),$m(t,a,n?!0:e[++s]))}return t===void 0?null:t}function p8(t,e,n){if(n==null||n==="")return or;let i=[],r=to(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function h8(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&$m(t,i,n)}function m8(t,e,n,i,r,s,a,c){r===Cr&&(r=or);let u=0,p=0,m=0<r.length?r[0]:null,C=0<s.length?s[0]:null;for(;m!==null||C!==null;){let x=u<r.length?r[u+1]:void 0,E=p<s.length?s[p+1]:void 0,A=null,N;m===C?(u+=2,p+=2,x!==E&&(A=C,N=E)):C===null||m!==null&&m<C?(u+=2,A=m):(p+=2,A=C,N=E),A!==null&&l2(t,e,n,i,A,N,a,c),m=u<r.length?r[u]:null,C=p<s.length?s[p]:null}}function l2(t,e,n,i,r,s,a,c){if(!(e.type&3))return;let u=t.data,p=u[c+1],m=ZV(p)?dI(u,e,n,r,Bu(p),a):void 0;if(!M0(m)){M0(s)||QV(p)&&(s=dI(u,null,n,r,c,a));let C=Cx(qo(),n);X5(i,a,C,r,s)}}function dI(t,e,n,i,r,s){let a=e===null,c;for(;r>0;){let u=t[r],p=Array.isArray(u),m=p?u[1]:u,C=m===null,x=n[r+1];x===Cr&&(x=C?or:void 0);let E=C?qm(x,i):m===i?x:void 0;if(p&&!M0(E)&&(E=qm(u,i)),M0(E)&&(c=E,a))return c;let A=t[r+1];r=a?Sc(A):Bu(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(c=qm(u,i))}return c}function M0(t){return t!==void 0}function g8(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Qs(to(t)))),t}function c2(t,e){return(t.flags&(e?8:16))!==0}function Y(t,e=""){let n=qt(),i=hi(),r=t+jn,s=i.firstCreatePass?dp(i,r,1,e,null):i.data[r],a=v8(i,n,s,e,t);n[r]=a,n0()&&tb(i,n,a,s),gc(s,!1)}var v8=(t,e,n,i,r)=>(i0(!0),f5(e[Bn],i));function y8(t,e,n,i=""){return Yo(t,vc(),n)?e+Za(n)+i:Cr}function _8(t,e,n,i,r,s=""){let a=vT(),c=PA(t,a,n,r);return Jm(2),c?e+Za(n)+i+Za(r)+s:Cr}function Ue(t){return tn("",t),Ue}function tn(t,e,n){let i=qt(),r=y8(i,t,e,n);return r!==Cr&&u2(i,qo(),r),tn}function Gu(t,e,n,i,r){let s=qt(),a=_8(s,t,e,n,i,r);return a!==Cr&&u2(s,qo(),a),Gu}function u2(t,e,n){let i=Cx(e,t);p5(t[Bn],i,n)}var d2={};function Fs(t){sa("NgLet");let e=hi(),n=qt(),i=t+jn,r=dp(e,i,128,null,null);return gc(r,!1),jf(e,n,i,d2),Fs}function da(t){let e=hi(),n=qt(),i=qo();return jf(e,n,i,t),t}function ar(t){let e=kx(),n=Wf(e,jn+t);if(n===d2)throw new St(314,!1);return n}function fI(t,e,n){let i=hi();i.firstCreatePass&&f2(e,i.data,i.blueprint,Is(t),n)}function f2(t,e,n,i,r){if(t=Ki(t),Array.isArray(t))for(let s=0;s<t.length;s++)f2(t[s],e,n,i,r);else{let s=hi(),a=qt(),c=sr(),u=oc(t)?t:Ki(t.provide),p=mx(t),m=c.providerIndexes&1048575,C=c.directiveStart,x=c.providerIndexes>>20;if(oc(t)||!t.multi){let E=new Cc(p,r,hn,null),A=Xx(u,e,r?m:m+x,C);A===-1?(e1(y0(c,a),s,u),Qx(s,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(E),a.push(E)):(n[A]=E,a[A]=E)}else{let E=Xx(u,e,m+x,C),A=Xx(u,e,m,m+x),N=E>=0&&n[E],R=A>=0&&n[A];if(r&&!R||!r&&!N){e1(y0(c,a),s,u);let k=b8(r?x8:C8,n.length,r,i,p,t);!r&&R&&(n[A].providerFactory=k),Qx(s,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(k),a.push(k)}else{let k=p2(n[r?A:E],p,!r&&i);Qx(s,t,E>-1?E:A,k)}!r&&i&&R&&n[A].componentProviders++}}}function Qx(t,e,n,i){let r=oc(e),s=nT(e);if(r||s){let u=(s?Ki(e.useClass):e).prototype.ngOnDestroy;if(u){let p=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let m=p.indexOf(n);m===-1?p.push(n,[i,u]):p[m+1].push(i,u)}else p.push(n,u)}}}function p2(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Xx(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function C8(t,e,n,i,r){return P1(this.multi,[])}function x8(t,e,n,i,r){let s=this.multi,a;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=tp(i,i[Vt],this.providerFactory.index,r);a=u.slice(0,c),P1(s,a);for(let p=c;p<u.length;p++)a.push(u[p])}else a=[],P1(s,a);return a}function P1(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function b8(t,e,n,i,r,s){let a=new Cc(t,n,hn,null);return a.multi=[],a.index=e,a.componentProviders=0,p2(a,r,i&&!n),a}function fa(t,e){return n=>{n.providersResolver=(i,r)=>fI(i,r?r(t):t,!1),e&&(n.viewProvidersResolver=(i,r)=>fI(i,r?r(e):e,!0))}}function pa(t,e){let n=Yf()+t,i=qt();return i[n]===Cr?lb(i,n,e()):J4(i,n)}function hb(t,e,n,i){return m2(qt(),Yf(),t,e,n,i)}function h2(t,e){let n=t[e];return n===Cr?void 0:n}function w8(t,e,n,i,r,s){let a=e+n;return Yo(t,a,r)?lb(t,a+1,s?i.call(s,r):i(r)):h2(t,a+1)}function m2(t,e,n,i,r,s,a){let c=e+n;return PA(t,c,r,s)?lb(t,c+2,a?i.call(a,r,s):i(r,s)):h2(t,c+2)}function Si(t,e){let n=hi(),i,r=t+jn;n.firstCreatePass?(i=E8(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let s=i.factory||(i.factory=Ja(i.type,!0)),a,c=vr(hn);try{let u=v0(!1),p=s();return v0(u),jf(n,qt(),r,p),p}finally{vr(c)}}function E8(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function $u(t,e,n){let i=t+jn,r=qt(),s=Wf(r,i);return g2(r,i)?w8(r,Yf(),e,s.transform,n,s):s.transform(n)}function Br(t,e,n,i){let r=t+jn,s=qt(),a=Wf(s,r);return g2(s,r)?m2(s,Yf(),e,a.transform,n,i,a):a.transform(n,i)}function g2(t,e){return t[Vt].data[e].pure}var k0=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},S8=(()=>{class t{compileModuleSync(n){return new D0(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let i=this.compileModuleSync(n),r=sx(n),s=eA(r.declarations).reduce((a,c)=>{let u=Zs(c);return u&&a.push(new wc(u)),a},[]);return new k0(i,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var v2=(()=>{class t{applicationErrorHandler=he(na);appRef=he(Dc);taskService=he(yc);ngZone=he(Or);zonelessEnabled=he(Qf);tracing=he(oa,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Wi;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Vf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(he(Ux,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?Ox:Lx;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Vf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(n),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ox(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function y2(){return[{provide:Xs,useExisting:v2},{provide:Or,useClass:Bf},{provide:Qf,useValue:!0}]}function D8(){return typeof $localize<"u"&&$localize.locale||hp}var gp=new Mt("",{factory:()=>he(gp,{optional:!0,skipSelf:!0})||D8()});var q0=class{destroyed=!1;listeners=null;errorHandler=he(vo,{optional:!0});destroyRef=he(eo);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new St(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(ws(953,!1));return}if(this.listeners===null)return;let n=Lt(null);try{for(let i of this.listeners)try{i(e)}catch(r){this.errorHandler?.handleError(r)}}finally{Lt(n)}}};function ut(t,e){return Sf(t,e?.equal)}var w2=Symbol("InputSignalNode#UNSET"),O8=Ht(xt({},rm),{transformFn:void 0,applyValueToInputSignal(t,e){Df(t,e)}});function E2(t,e){let n=Object.create(O8);n.value=t,n.transformFn=e?.transform;function i(){if(bf(n),n.value===w2){let r=null;throw new St(-950,r)}return n.value}return i[ir]=n,i}var _2=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>O1(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function gt(t){return new q0}function C2(t,e){return E2(t,e)}function V8(t){return E2(w2,t)}var Ee=(C2.required=V8,C2);function x2(t,e){return qA(e)}function B8(t,e){return WA(e)}var j0=(x2.required=B8,x2);var mb=new Mt(""),H8=new Mt("");function vp(t){return!t.moduleRef}function U8(t){let e=vp(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Or);return n.run(()=>{vp(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let i=e.get(na),r;if(n.runOutsideAngular(()=>{r=n.onError.subscribe({next:i})}),vp(t)){let s=()=>e.destroy(),a=t.platformInjector.get(mb);a.add(s),e.onDestroy(()=>{r.unsubscribe(),a.delete(s)})}else{let s=()=>t.moduleRef.destroy(),a=t.platformInjector.get(mb);a.add(s),t.moduleRef.onDestroy(()=>{ep(t.allPlatformModules,t.moduleRef),r.unsubscribe(),a.delete(s)})}return G8(i,n,()=>{let s=e.get(yc),a=s.add(),c=e.get(fb);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(gp,hp);if(n2(u||hp),!e.get(H8,!0))return vp(t)?e.get(Dc):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(vp(t)){let m=e.get(Dc);return t.rootComponent!==void 0&&m.bootstrap(t.rootComponent),m}else return z8?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void s.remove(a))})})}var z8;function G8(t,e,n){try{let i=n();return Uu(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t(i)),i}}var W0=null;function $8(t=[],e){return Lr.create({name:e,providers:[{provide:zf,useValue:"platform"},{provide:mb,useValue:new Set([()=>W0=null])},...t]})}function q8(t=[]){if(W0)return W0;let e=$8(t);return W0=e,ZA(),W8(e),e}function W8(t){let e=t.get(F0,null);Iu(t,()=>{e?.forEach(n=>n())})}var K0=(()=>{class t{static __NG_ELEMENT_ID__=j8}return t})();function j8(t){return K8(sr(),qt(),(t&16)===16)}function K8(t,e,n){if(rl(t)&&!n){let i=wo(t.index,e);return new sl(i,i)}else if(t.type&175){let i=e[Xr];return new sl(i,e)}return null}function S2(t){let{rootComponent:e,appProviders:n,platformProviders:i,platformRef:r}=t;Cn(pn.BootstrapApplicationStart);try{let s=r?.injector??q8(i),a=[y2(),NT,...n||[]],c=new op({providers:a,parent:s,debugName:"",runEnvironmentInitializers:!1});return U8({r3Injector:c.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{Cn(pn.BootstrapApplicationEnd)}}function D2(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function ffe(t){let e=Zs(t);if(!e)return null;let n=new wc(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var T2=null;function Do(){return T2}function vb(t){T2??=t}var yp=class{},ll=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:()=>he(I2),providedIn:"platform"})}return t})(),Y8=new Mt(""),I2=(()=>{class t extends ll{_location;_history;_doc=he(Kn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Do().getBaseHref(this._doc)}onPopState(n){let i=Do().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){let i=Do().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){this._history.pushState(n,i,r)}replaceState(n,i,r){this._history.replaceState(n,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Y0(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function A2(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Qo(t){return t&&t[0]!=="?"?`?${t}`:t}var qu=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:()=>he(k2),providedIn:"root"})}return t})(),J0=new Mt(""),k2=(()=>{class t extends qu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,i){super(),this._platformLocation=n,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??he(Kn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Y0(this._baseHref,n)}path(n=!1){let i=this._platformLocation.pathname+Qo(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,s){let a=this.prepareExternalUrl(r+Qo(s));this._platformLocation.pushState(n,i,a)}replaceState(n,i,r,s){let a=this.prepareExternalUrl(r+Qo(s));this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(i){return new(i||t)(Dt(ll),Dt(J0,8))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),N2=(()=>{class t{_subject=new ji;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let i=this._locationStrategy.getBaseHref();this._basePath=X8(A2(M2(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Qo(i))}normalize(n){return t.stripTrailingSlash(Q8(this._basePath,M2(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Qo(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Qo(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Qo;static joinWithSlash=Y0;static stripTrailingSlash=A2;static \u0275fac=function(i){return new(i||t)(Dt(qu))};static \u0275prov=Fe({token:t,factory:()=>J8(),providedIn:"root"})}return t})();function J8(){return new N2(Dt(qu))}function Q8(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function M2(t){return t.replace(/\/index.html$/,"")}function X8(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Z8=(()=>{class t extends qu{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,i){super(),this._platformLocation=n,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(n){let i=Y0(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,s){let a=this.prepareExternalUrl(r+Qo(s))||this._platformLocation.pathname;this._platformLocation.pushState(n,i,a)}replaceState(n,i,r,s){let a=this.prepareExternalUrl(r+Qo(s))||this._platformLocation.pathname;this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(i){return new(i||t)(Dt(ll),Dt(J0,8))};static \u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();var lr=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(lr||{}),Sn=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(Sn||{}),Hr=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Hr||{}),ma={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function P2(t){return io(t)[ui.LocaleId]}function L2(t,e,n){let i=io(t),r=[i[ui.DayPeriodsFormat],i[ui.DayPeriodsStandalone]],s=To(r,e);return To(s,n)}function O2(t,e,n){let i=io(t),r=[i[ui.DaysFormat],i[ui.DaysStandalone]],s=To(r,e);return To(s,n)}function V2(t,e,n){let i=io(t),r=[i[ui.MonthsFormat],i[ui.MonthsStandalone]],s=To(r,e);return To(s,n)}function B2(t,e){let i=io(t)[ui.Eras];return To(i,e)}function _p(t,e){let n=io(t);return To(n[ui.DateFormat],e)}function Cp(t,e){let n=io(t);return To(n[ui.TimeFormat],e)}function xp(t,e){let i=io(t)[ui.DateTimeFormat];return To(i,e)}function bp(t,e){let n=io(t),i=n[ui.NumberSymbols][e];if(typeof i>"u"){if(e===ma.CurrencyDecimal)return n[ui.NumberSymbols][ma.Decimal];if(e===ma.CurrencyGroup)return n[ui.NumberSymbols][ma.Group]}return i}function H2(t){if(!t[ui.ExtraData])throw new St(2303,!1)}function U2(t){let e=io(t);return H2(e),(e[ui.ExtraData][2]||[]).map(i=>typeof i=="string"?yb(i):[yb(i[0]),yb(i[1])])}function z2(t,e,n){let i=io(t);H2(i);let r=[i[ui.ExtraData][0],i[ui.ExtraData][1]],s=To(r,e)||[];return To(s,n)||[]}function To(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new St(2304,!1)}function yb(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var eB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Q0={},tB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function G2(t,e,n,i){let r=uB(t);e=ha(n,e)||e;let a=[],c;for(;e;)if(c=tB.exec(e),c){a=a.concat(c.slice(1));let m=a.pop();if(!m)break;e=m}else{a.push(e);break}let u=r.getTimezoneOffset();i&&(u=q2(i,u),r=cB(r,i));let p="";return a.forEach(m=>{let C=aB(m);p+=C?C(r,n,u):m==="''"?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),p}function ng(t,e,n){let i=new Date(0);return i.setFullYear(t,e,n),i.setHours(0,0,0),i}function ha(t,e){let n=P2(t);if(Q0[n]??={},Q0[n][e])return Q0[n][e];let i="";switch(e){case"shortDate":i=_p(t,Hr.Short);break;case"mediumDate":i=_p(t,Hr.Medium);break;case"longDate":i=_p(t,Hr.Long);break;case"fullDate":i=_p(t,Hr.Full);break;case"shortTime":i=Cp(t,Hr.Short);break;case"mediumTime":i=Cp(t,Hr.Medium);break;case"longTime":i=Cp(t,Hr.Long);break;case"fullTime":i=Cp(t,Hr.Full);break;case"short":let r=ha(t,"shortTime"),s=ha(t,"shortDate");i=X0(xp(t,Hr.Short),[r,s]);break;case"medium":let a=ha(t,"mediumTime"),c=ha(t,"mediumDate");i=X0(xp(t,Hr.Medium),[a,c]);break;case"long":let u=ha(t,"longTime"),p=ha(t,"longDate");i=X0(xp(t,Hr.Long),[u,p]);break;case"full":let m=ha(t,"fullTime"),C=ha(t,"fullDate");i=X0(xp(t,Hr.Full),[m,C]);break}return i&&(Q0[n][e]=i),i}function X0(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,i){return e!=null&&i in e?e[i]:n})),t}function Xo(t,e,n="-",i,r){let s="";(t<0||r&&t<=0)&&(r?t=-t+1:(t=-t,s=n));let a=String(t);for(;a.length<e;)a="0"+a;return i&&(a=a.slice(a.length-e)),s+a}function nB(t,e){return Xo(t,3).substring(0,e)}function gi(t,e,n=0,i=!1,r=!1){return function(s,a){let c=iB(t,s);if((n>0||c>-n)&&(c+=n),t===3)c===0&&n===-12&&(c=12);else if(t===6)return nB(c,e);let u=bp(a,ma.MinusSign);return Xo(c,e,u,i,r)}}function iB(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new St(2301,!1)}}function In(t,e,n=lr.Format,i=!1){return function(r,s){return rB(r,s,t,e,n,i)}}function rB(t,e,n,i,r,s){switch(n){case 2:return V2(e,r,i)[t.getMonth()];case 1:return O2(e,r,i)[t.getDay()];case 0:let a=t.getHours(),c=t.getMinutes();if(s){let p=U2(e),m=z2(e,r,i),C=p.findIndex(x=>{if(Array.isArray(x)){let[E,A]=x,N=a>=E.hours&&c>=E.minutes,R=a<A.hours||a===A.hours&&c<A.minutes;if(E.hours<A.hours){if(N&&R)return!0}else if(N||R)return!0}else if(x.hours===a&&x.minutes===c)return!0;return!1});if(C!==-1)return m[C]}return L2(e,r,i)[a<12?0:1];case 3:return B2(e,i)[t.getFullYear()<=0?0:1];default:let u=n;throw new St(2302,!1)}}function Z0(t){return function(e,n,i){let r=-1*i,s=bp(n,ma.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case 0:return(r>=0?"+":"")+Xo(a,2,s)+Xo(Math.abs(r%60),2,s);case 1:return"GMT"+(r>=0?"+":"")+Xo(a,1,s);case 2:return"GMT"+(r>=0?"+":"")+Xo(a,2,s)+":"+Xo(Math.abs(r%60),2,s);case 3:return i===0?"Z":(r>=0?"+":"")+Xo(a,2,s)+":"+Xo(Math.abs(r%60),2,s);default:throw new St(2310,!1)}}}var oB=0,tg=4;function sB(t){let e=ng(t,oB,1).getDay();return ng(t,0,1+(e<=tg?tg:tg+7)-e)}function $2(t){let e=t.getDay(),n=e===0?-3:tg-e;return ng(t.getFullYear(),t.getMonth(),t.getDate()+n)}function _b(t,e=!1){return function(n,i){let r;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,a=n.getDate();r=1+Math.floor((a+s)/7)}else{let s=$2(n),a=sB(s.getFullYear()),c=s.getTime()-a.getTime();r=1+Math.round(c/6048e5)}return Xo(r,t,bp(i,ma.MinusSign))}}function eg(t,e=!1){return function(n,i){let s=$2(n).getFullYear();return Xo(s,t,bp(i,ma.MinusSign),e)}}var Cb={};function aB(t){if(Cb[t])return Cb[t];let e;switch(t){case"G":case"GG":case"GGG":e=In(3,Sn.Abbreviated);break;case"GGGG":e=In(3,Sn.Wide);break;case"GGGGG":e=In(3,Sn.Narrow);break;case"y":e=gi(0,1,0,!1,!0);break;case"yy":e=gi(0,2,0,!0,!0);break;case"yyy":e=gi(0,3,0,!1,!0);break;case"yyyy":e=gi(0,4,0,!1,!0);break;case"Y":e=eg(1);break;case"YY":e=eg(2,!0);break;case"YYY":e=eg(3);break;case"YYYY":e=eg(4);break;case"M":case"L":e=gi(1,1,1);break;case"MM":case"LL":e=gi(1,2,1);break;case"MMM":e=In(2,Sn.Abbreviated);break;case"MMMM":e=In(2,Sn.Wide);break;case"MMMMM":e=In(2,Sn.Narrow);break;case"LLL":e=In(2,Sn.Abbreviated,lr.Standalone);break;case"LLLL":e=In(2,Sn.Wide,lr.Standalone);break;case"LLLLL":e=In(2,Sn.Narrow,lr.Standalone);break;case"w":e=_b(1);break;case"ww":e=_b(2);break;case"W":e=_b(1,!0);break;case"d":e=gi(2,1);break;case"dd":e=gi(2,2);break;case"c":case"cc":e=gi(7,1);break;case"ccc":e=In(1,Sn.Abbreviated,lr.Standalone);break;case"cccc":e=In(1,Sn.Wide,lr.Standalone);break;case"ccccc":e=In(1,Sn.Narrow,lr.Standalone);break;case"cccccc":e=In(1,Sn.Short,lr.Standalone);break;case"E":case"EE":case"EEE":e=In(1,Sn.Abbreviated);break;case"EEEE":e=In(1,Sn.Wide);break;case"EEEEE":e=In(1,Sn.Narrow);break;case"EEEEEE":e=In(1,Sn.Short);break;case"a":case"aa":case"aaa":e=In(0,Sn.Abbreviated);break;case"aaaa":e=In(0,Sn.Wide);break;case"aaaaa":e=In(0,Sn.Narrow);break;case"b":case"bb":case"bbb":e=In(0,Sn.Abbreviated,lr.Standalone,!0);break;case"bbbb":e=In(0,Sn.Wide,lr.Standalone,!0);break;case"bbbbb":e=In(0,Sn.Narrow,lr.Standalone,!0);break;case"B":case"BB":case"BBB":e=In(0,Sn.Abbreviated,lr.Format,!0);break;case"BBBB":e=In(0,Sn.Wide,lr.Format,!0);break;case"BBBBB":e=In(0,Sn.Narrow,lr.Format,!0);break;case"h":e=gi(3,1,-12);break;case"hh":e=gi(3,2,-12);break;case"H":e=gi(3,1);break;case"HH":e=gi(3,2);break;case"m":e=gi(4,1);break;case"mm":e=gi(4,2);break;case"s":e=gi(5,1);break;case"ss":e=gi(5,2);break;case"S":e=gi(6,1);break;case"SS":e=gi(6,2);break;case"SSS":e=gi(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Z0(0);break;case"ZZZZZ":e=Z0(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Z0(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Z0(2);break;default:return null}return Cb[t]=e,e}function q2(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function lB(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function cB(t,e,n){let r=t.getTimezoneOffset(),s=q2(e,r);return lB(t,-1*(s-r))}function uB(t){if(F2(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[r,s=1,a=1]=t.split("-").map(c=>+c);return ng(r,s-1,a)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let i;if(i=t.match(eB))return dB(i)}let e=new Date(t);if(!F2(e))throw new St(2311,!1);return e}function dB(t){let e=new Date(0),n=0,i=0,r=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let a=Number(t[4]||0)-n,c=Number(t[5]||0)-i,u=Number(t[6]||0),p=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,a,c,u,p),e}function F2(t){return t instanceof Date&&!isNaN(t.valueOf())}var xb=/\s+/,R2=[],bb=(()=>{class t{_ngEl;_renderer;initialClasses=R2;rawClass;stateMap=new Map;constructor(n,i){this._ngEl=n,this._renderer=i}set klass(n){this.initialClasses=n!=null?n.trim().split(xb):R2}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(xb):n}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let i of n)this._updateState(i,!0);else if(n!=null)for(let i of Object.keys(n))this._updateState(i,!!n[i]);this._applyStateDiff()}_updateState(n,i){let r=this.stateMap.get(n);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let i=n[0],r=n[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(n,i){n=n.trim(),n.length>0&&n.split(xb).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||t)(hn(Ei),hn(aa))};static \u0275dir=Rn({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();function W2(t,e){return new St(2100,!1)}var fB=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,wp=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw W2(t,n);return n.replace(fB,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=$0({name:"titlecase",type:t,pure:!0})}return t})();var pB="mediumDate",j2=new Mt(""),K2=new Mt(""),Tc=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,i,r){this.locale=n,this.defaultTimezone=i,this.defaultOptions=r}transform(n,i,r,s){if(n==null||n===""||n!==n)return null;try{let a=i??this.defaultOptions?.dateFormat??pB,c=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return G2(n,a,s||this.locale,c)}catch(a){throw W2(t,a.message)}}static \u0275fac=function(i){return new(i||t)(hn(gp,16),hn(j2,24),hn(K2,24))};static \u0275pipe=$0({name:"date",type:t,pure:!0})}return t})();var Ft=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=la({type:t});static \u0275inj=Es({})}return t})();function Ep(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,s]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var Ic=class{};var Eb="browser";function Rs(t){return t===Eb}var Vpe=(()=>{class t{static \u0275prov=Fe({token:t,providedIn:"root",factory:()=>new wb(he(Kn),window)})}return t})(),wb=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo(Ht(xt({},n),{left:e[0],top:e[1]}))}scrollToAnchor(e,n){let i=mB(this.document,e);i&&(this.scrollToElement(i,n),i.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(ws(2400,!1))}}scrollToElement(e,n){let i=e.getBoundingClientRect(),r=i.left+this.window.pageXOffset,s=i.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(Ht(xt({},n),{left:r-a[0],top:s-a[1]}))}};function mB(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let a=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}var Sp=class{_doc;constructor(e){this._doc=e}manager},ig=(()=>{class t extends Sp{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r,s){return n.addEventListener(i,r,s),()=>this.removeEventListener(n,i,r,s)}removeEventListener(n,i,r,s){return n.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||t)(Dt(Kn))};static \u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})(),sg=new Mt(""),Ib=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,i){this._zone=i,n.forEach(a=>{a.manager=this});let r=n.filter(a=>!(a instanceof ig));this._plugins=r.slice().reverse();let s=n.find(a=>a instanceof ig);s&&this._plugins.push(s)}addEventListener(n,i,r,s){return this._findPluginFor(i).addEventListener(n,i,r,s)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(s=>s.supports(n)),!i)throw new St(5101,!1);return this._eventNameToPlugin.set(n,i),i}static \u0275fac=function(i){return new(i||t)(Dt(sg),Dt(Or))};static \u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})(),Sb="ng-app-id";function Y2(t){for(let e of t)e.remove()}function J2(t,e){let n=e.createElement("style");return n.textContent=t,n}function gB(t,e,n,i){let r=t.head?.querySelectorAll(`style[${Sb}="${e}"],link[${Sb}="${e}"]`);if(r)for(let s of r)s.removeAttribute(Sb),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&n.set(s.textContent,{usage:0,elements:[s]})}function Tb(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Ab=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,i,r,s={}){this.doc=n,this.appId=i,this.nonce=r,gB(n,i,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,i){for(let r of n)this.addUsage(r,this.inline,J2);i?.forEach(r=>this.addUsage(r,this.external,Tb))}removeStyles(n,i){for(let r of n)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(n,i,r){let s=i.get(n);s?s.usage++:i.set(n,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(n,this.doc)))})}removeUsage(n,i){let r=i.get(n);r&&(r.usage--,r.usage<=0&&(Y2(r.elements),i.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Y2(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(n,J2(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(n,Tb(i,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,i){return this.nonce&&i.setAttribute("nonce",this.nonce),n.appendChild(i)}static \u0275fac=function(i){return new(i||t)(Dt(Kn),Dt(N0),Dt(R0,8),Dt(Jo))};static \u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})(),Db={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Mb=/%COMP%/g;var X2="%COMP%",vB=`_nghost-${X2}`,yB=`_ngcontent-${X2}`,_B=!0,CB=new Mt("",{factory:()=>_B});function xB(t){return yB.replace(Mb,t)}function bB(t){return vB.replace(Mb,t)}function Z2(t,e){return e.map(n=>n.replace(Mb,t))}var kb=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,i,r,s,a,c,u=null,p=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=a,this.ngZone=c,this.nonce=u,this.tracingService=p,this.defaultRenderer=new Dp(n,a,c,this.tracingService)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(n,i);return r instanceof og?r.applyToHost(n):r instanceof Tp&&r.applyStyles(),r}getOrCreateRenderer(n,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,p=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,C=this.tracingService;switch(i.encapsulation){case Ko.Emulated:s=new og(u,p,i,this.appId,m,a,c,C);break;case Ko.ShadowDom:return new rg(u,n,i,a,c,this.nonce,C,p);case Ko.ExperimentalIsolatedShadowDom:return new rg(u,n,i,a,c,this.nonce,C);default:s=new Tp(u,p,i,m,a,c,C);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(i){return new(i||t)(Dt(Ib),Dt(Ab),Dt(N0),Dt(CB),Dt(Kn),Dt(Or),Dt(R0),Dt(oa,8))};static \u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})(),Dp=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.tracingService=r}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Db[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Q2(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(Q2(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){n.remove()}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new St(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=Db[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=Db[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(ks.DashCase|ks.Important)?e.style.setProperty(n,i,r&ks.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&ks.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i,r){if(typeof e=="string"&&(e=Do().getGlobalEventTarget(this.doc,e),!e))throw new St(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,n,s)),this.eventManager.addEventListener(e,n,s,r)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Q2(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var rg=class extends Dp{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,i,r,s,a,c,u){super(e,r,s,c),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let p=i.styles;p=Z2(i.id,p);for(let C of p){let x=document.createElement("style");a&&x.setAttribute("nonce",a),x.textContent=C,this.shadowRoot.appendChild(x)}let m=i.getExternalStyles?.();if(m)for(let C of m){let x=Tb(C,r);a&&x.setAttribute("nonce",a),this.shadowRoot.appendChild(x)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Tp=class extends Dp{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,i,r,s,a,c,u){super(e,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r;let p=i.styles;this.styles=u?Z2(u,p):p,this.styleUrls=i.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&xc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},og=class extends Tp{contentAttr;hostAttr;constructor(e,n,i,r,s,a,c,u){let p=r+"-"+i.id;super(e,n,i,s,a,c,u,p),this.contentAttr=xB(p),this.hostAttr=bB(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}};var ag=class t extends yp{supportsDOMEvents=!0;static makeCurrent(){vb(new t)}onAndCancel(e,n,i,r){return e.addEventListener(n,i,r),()=>{e.removeEventListener(n,i,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=wB();return n==null?null:EB(n)}resetBaseElement(){Ip=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ep(document.cookie,e)}},Ip=null;function wB(){return Ip=Ip||document.head.querySelector("base"),Ip?Ip.getAttribute("href"):null}function EB(t){return new URL(t,document.baseURI).pathname}var SB=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})(),eM=["alt","control","meta","shift"],DB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},tM=(()=>{class t extends Sp{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,i,r,s){let a=t.parseEventName(i),c=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Do().onAndCancel(n,a.domEventName,c,s))}static parseEventName(n){let i=n.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=t._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),eM.forEach(p=>{let m=i.indexOf(p);m>-1&&(i.splice(m,1),a+=p+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(n,i){let r=DB[n.key]||n.key,s="";return i.indexOf("code.")>-1&&(r=n.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),eM.forEach(a=>{if(a!==r){let c=TB[a];c(n)&&(s+=a+".")}}),s+=r,s===i)}static eventCallback(n,i,r){return s=>{t.matchEventFullKeyCode(s,n)&&r.runGuarded(()=>i(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(i){return new(i||t)(Dt(Kn))};static \u0275prov=Fe({token:t,factory:t.\u0275fac})}return t})();function IB(t,e,n){let i=xt({rootComponent:t,platformRef:n?.platformRef},AB(e));return S2(i)}function AB(t){return{appProviders:[...RB,...t?.providers??[]],platformProviders:FB}}function MB(){ag.makeCurrent()}function kB(){return new vo}function NB(){return B1(document),document}var FB=[{provide:Jo,useValue:Eb},{provide:F0,useValue:MB,multi:!0},{provide:Kn,useFactory:NB}];var RB=[{provide:zf,useValue:"root"},{provide:vo,useFactory:kB},{provide:sg,useClass:ig,multi:!0},{provide:sg,useClass:tM,multi:!0},kb,Ab,Ib,{provide:bc,useExisting:kb},{provide:Ic,useClass:SB},[]];var Ps=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),s=n.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.addHeaderEntry(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(c=>s.indexOf(c)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}addHeaderEntry(e,n){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(n):this.headers.set(i,[n])}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Yu=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},cg=class{encodeKey(e){return nM(e)}encodeValue(e){return nM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function PB(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[a,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],u=n.get(a)||[];u.push(c),n.set(a,u)}),n}var LB=/%(\d[a-f0-9])/gi,OB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nM(t){return encodeURIComponent(t).replace(LB,(e,n)=>OB[n]??e)}function lg(t){return`${t}`}var Io=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new cg,e.fromString){if(e.fromObject)throw new St(2805,!1);this.map=PB(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(lg):[lg(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(lg(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(lg(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function VB(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function iM(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function rM(t){return typeof Blob<"u"&&t instanceof Blob}function oM(t){return typeof FormData<"u"&&t instanceof FormData}function BB(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var sM="Content-Type",aM="Accept",cM="text/plain",uM="application/json",HB=`${uM}, ${cM}, */*`,ju=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,i,r){this.url=n,this.method=e.toUpperCase();let s;if(VB(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new St(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),s.referrerPolicy&&(this.referrerPolicy=s.referrerPolicy),this.transferCache=s.transferCache}if(this.headers??=new Ps,this.context??=new Yu,!this.params)this.params=new Io,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let c=n.indexOf("?"),u=c===-1?"?":c<n.length-1?"&":"";this.urlWithParams=n+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||iM(this.body)||rM(this.body)||oM(this.body)||BB(this.body)?this.body:this.body instanceof Io?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||oM(this.body)?null:rM(this.body)?this.body.type||null:iM(this.body)?null:typeof this.body=="string"?cM:this.body instanceof Io?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?uM:null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.keepalive??this.keepalive,a=e.priority||this.priority,c=e.cache||this.cache,u=e.mode||this.mode,p=e.redirect||this.redirect,m=e.credentials||this.credentials,C=e.referrer||this.referrer,x=e.integrity||this.integrity,E=e.referrerPolicy||this.referrerPolicy,A=e.transferCache??this.transferCache,N=e.timeout??this.timeout,R=e.body!==void 0?e.body:this.body,k=e.withCredentials??this.withCredentials,B=e.reportProgress??this.reportProgress,$=e.headers||this.headers,q=e.params||this.params,X=e.context??this.context;return e.setHeaders!==void 0&&($=Object.keys(e.setHeaders).reduce((ie,me)=>ie.set(me,e.setHeaders[me]),$)),e.setParams&&(q=Object.keys(e.setParams).reduce((ie,me)=>ie.set(me,e.setParams[me]),q)),new t(n,i,R,{params:q,headers:$,context:X,reportProgress:B,responseType:r,withCredentials:k,transferCache:A,keepalive:s,cache:c,priority:a,timeout:N,mode:u,redirect:p,credentials:m,referrer:C,integrity:x,referrerPolicy:E})}},Ac=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(Ac||{}),Ju=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,n=200,i="OK"){this.headers=e.headers||new Ps,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},ug=class t extends Ju{constructor(e={}){super(e)}type=Ac.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ap=class t extends Ju{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ac.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},Ku=class extends Ju{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},UB=200,zB=204;var GB=new Mt("");var $B=/^\)\]\}',?\n/;var Fb=(()=>{class t{xhrFactory;tracingService=he(oa,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new St(-2800,!1);let i=this.xhrFactory;return Li(null).pipe(HC(()=>new un(s=>{let a=i.build();if(a.open(n.method,n.urlWithParams),n.withCredentials&&(a.withCredentials=!0),n.headers.forEach((R,k)=>a.setRequestHeader(R,k.join(","))),n.headers.has(aM)||a.setRequestHeader(aM,HB),!n.headers.has(sM)){let R=n.detectContentTypeHeader();R!==null&&a.setRequestHeader(sM,R)}if(n.timeout&&(a.timeout=n.timeout),n.responseType){let R=n.responseType.toLowerCase();a.responseType=R!=="json"?R:"text"}let c=n.serializeBody(),u=null,p=()=>{if(u!==null)return u;let R=a.statusText||"OK",k=new Ps(a.getAllResponseHeaders()),B=a.responseURL||n.url;return u=new ug({headers:k,status:a.status,statusText:R,url:B}),u},m=this.maybePropagateTrace(()=>{let{headers:R,status:k,statusText:B,url:$}=p(),q=null;k!==zB&&(q=typeof a.response>"u"?a.responseText:a.response),k===0&&(k=q?UB:0);let X=k>=200&&k<300;if(n.responseType==="json"&&typeof q=="string"){let ie=q;q=q.replace($B,"");try{q=q!==""?JSON.parse(q):null}catch(me){q=ie,X&&(X=!1,q={error:me,text:q})}}X?(s.next(new Ap({body:q,headers:R,status:k,statusText:B,url:$||void 0})),s.complete()):s.error(new Ku({error:q,headers:R,status:k,statusText:B,url:$||void 0}))}),C=this.maybePropagateTrace(R=>{let{url:k}=p(),B=new Ku({error:R,status:a.status||0,statusText:a.statusText||"Unknown Error",url:k||void 0});s.error(B)}),x=C;n.timeout&&(x=this.maybePropagateTrace(R=>{let{url:k}=p(),B=new Ku({error:new DOMException("Request timed out","TimeoutError"),status:a.status||0,statusText:a.statusText||"Request timeout",url:k||void 0});s.error(B)}));let E=!1,A=this.maybePropagateTrace(R=>{E||(s.next(p()),E=!0);let k={type:Ac.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(k.total=R.total),n.responseType==="text"&&a.responseText&&(k.partialText=a.responseText),s.next(k)}),N=this.maybePropagateTrace(R=>{let k={type:Ac.UploadProgress,loaded:R.loaded};R.lengthComputable&&(k.total=R.total),s.next(k)});return a.addEventListener("load",m),a.addEventListener("error",C),a.addEventListener("timeout",x),a.addEventListener("abort",C),n.reportProgress&&(a.addEventListener("progress",A),c!==null&&a.upload&&a.upload.addEventListener("progress",N)),a.send(c),s.next({type:Ac.Sent}),()=>{a.removeEventListener("error",C),a.removeEventListener("abort",C),a.removeEventListener("load",m),a.removeEventListener("timeout",x),n.reportProgress&&(a.removeEventListener("progress",A),c!==null&&a.upload&&a.upload.removeEventListener("progress",N)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(i){return new(i||t)(Dt(Ic))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dM(t,e){return e(t)}function qB(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}function WB(t,e,n){return(i,r)=>Iu(n,()=>e(i,s=>t(s,r)))}var fM=new Mt(""),Rb=new Mt("",{factory:()=>[]}),pM=new Mt(""),Pb=new Mt("",{factory:()=>!0});function jB(){let t=null;return(e,n)=>{t===null&&(t=(he(fM,{optional:!0})??[]).reduceRight(qB,dM));let i=he(Fu);if(he(Pb)){let s=i.add();return t(e,n).pipe(nc(s))}else return t(e,n)}}var Lb=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:function(i){let r=null;return i?r=new(i||t):r=Dt(Fb),r},providedIn:"root"})}return t})();var dg=(()=>{class t{backend;injector;chain=null;pendingTasks=he(Fu);contributeToStability=he(Pb);constructor(n,i){this.backend=n,this.injector=i}handle(n){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Rb),...this.injector.get(pM,[])]));this.chain=i.reduceRight((r,s)=>WB(r,s,this.injector),dM)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(n,r=>this.backend.handle(r)).pipe(nc(i))}else return this.chain(n,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||t)(Dt(Lb),Dt(yr))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ob=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:function(i){let r=null;return i?r=new(i||t):r=Dt(dg),r},providedIn:"root"})}return t})();function Nb(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer,referrerPolicy:t.referrerPolicy}}var fg=(()=>{class t{handler;constructor(n){this.handler=n}request(n,i,r={}){let s;if(n instanceof ju)s=n;else{let u;r.headers instanceof Ps?u=r.headers:u=new Ps(r.headers);let p;r.params&&(r.params instanceof Io?p=r.params:p=new Io({fromObject:r.params})),s=new ju(n,i,r.body!==void 0?r.body:null,{headers:u,context:r.context,params:p,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,referrerPolicy:r.referrerPolicy,integrity:r.integrity,timeout:r.timeout})}let a=Li(s).pipe(OC(u=>this.handler.handle(u)));if(n instanceof ju||r.observe==="events")return a;let c=a.pipe(Mf(u=>u instanceof Ap));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(ni(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new St(2806,!1);return u.body}));case"blob":return c.pipe(ni(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new St(2807,!1);return u.body}));case"text":return c.pipe(ni(u=>{if(u.body!==null&&typeof u.body!="string")throw new St(2808,!1);return u.body}));case"json":default:return c.pipe(ni(u=>u.body))}case"response":return c;default:throw new St(2809,!1)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:new Io().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,Nb(r,i))}post(n,i,r={}){return this.request("POST",n,Nb(r,i))}put(n,i,r={}){return this.request("PUT",n,Nb(r,i))}static \u0275fac=function(i){return new(i||t)(Dt(Ob))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var KB=new Mt("",{factory:()=>!0}),YB="XSRF-TOKEN",JB=new Mt("",{factory:()=>YB}),QB="X-XSRF-TOKEN",XB=new Mt("",{providedIn:"root",factory:()=>QB}),ZB=(()=>{class t{cookieName=he(JB);doc=he(Kn);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ep(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hM=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:function(i){let r=null;return i?r=new(i||t):r=Dt(ZB),r},providedIn:"root"})}return t})();function e6(t,e){if(!he(KB)||t.method==="GET"||t.method==="HEAD")return e(t);try{let r=he(ll).href,{origin:s}=new URL(r),{origin:a}=new URL(t.url,s);if(s!==a)return e(t)}catch{return e(t)}let n=he(hM).getToken(),i=he(XB);return n!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,n)})),e(t)}var Vb=(function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t})(Vb||{});function t6(t,e){return{\u0275kind:t,\u0275providers:e}}function n6(...t){let e=[fg,dg,{provide:Ob,useExisting:dg},{provide:Lb,useFactory:()=>he(GB,{optional:!0})??he(Fb)},{provide:Rb,useValue:e6,multi:!0}];for(let n of t)e.push(...n.\u0275providers);return tl(e)}var lM=new Mt("");function i6(){return t6(Vb.LegacyInterceptors,[{provide:lM,useFactory:jB},{provide:Rb,useExisting:lM,multi:!0}])}var ime=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(i){return new(i||t)(Dt(Kn))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Mp=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:function(i){let r=null;return i?r=new(i||t):r=Dt(r6),r},providedIn:"root"})}return t})(),r6=(()=>{class t extends Mp{_doc;constructor(n){super(),this._doc=n}sanitize(n,i){if(i==null)return null;switch(n){case So.NONE:return i;case So.HTML:return Ns(i,"HTML")?to(i):L0(this._doc,String(i)).toString();case So.STYLE:return Ns(i,"Style")?to(i):i;case So.SCRIPT:if(Ns(i,"Script"))return to(i);throw new St(5200,!1);case So.URL:return Ns(i,"URL")?to(i):cp(String(i));case So.RESOURCE_URL:if(Ns(i,"ResourceURL"))return to(i);throw new St(5201,!1);default:throw new St(5202,!1)}}bypassSecurityTrustHtml(n){return U1(n)}bypassSecurityTrustStyle(n){return z1(n)}bypassSecurityTrustScript(n){return G1(n)}bypassSecurityTrustUrl(n){return $1(n)}bypassSecurityTrustResourceUrl(n){return q1(n)}static \u0275fac=function(i){return new(i||t)(Dt(Kn))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var mM=new Mt("API_CONFIG");var pg=qa(gM(),1),vM=Symbol.for("Dexie"),hg=globalThis[vM]||(globalThis[vM]=pg.default);if(pg.default.semVer!==hg.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${pg.default.semVer} and ${hg.semVer}`);var{liveQuery:mg,mergeRanges:lme,rangesOverlap:cme,RangeSet:ume,cmp:dme,Entity:fme,PropModification:pme,replacePrefix:hme,add:mme,remove:gme,DexieYProvider:vme}=hg;var gg=hg;var Ao=class t extends gg{TableMaster;ApiConfiguration;_recycleBin;RowContact;SyncLog;constructor(){super("AIJunctionDB_Refactored"),this.version(1).stores({TableMaster:"Table_Code, Table_Name, Sync_Frequency",ApiConfiguration:"API_CODE, Api_End_point",_recycleBin:"++id, originalTable, deletedAt",RowContact:"rowContactUniqueId, contactPerson, organizationName, mobileNumber, emailId, syncStatus",SyncLog:"++id, entityType, status, timestamp"})}async ensureDynamicTables(){this.isOpen()||await this.open();let e=await this.table("TableMaster").toArray();if(e.length===0)return;let n={TableMaster:"Table_Code, Table_Name, Sync_Frequency",ApiConfiguration:"API_CODE, Api_End_point",_recycleBin:"++id, originalTable, deletedAt",RowContact:"rowContactUniqueId, contactPerson, organizationName, mobileNumber, emailId, syncStatus",SyncLog:"++id, entityType, status, timestamp"};e.forEach(i=>{i.Table_Schema&&(n[i.Table_Name]=i.Table_Schema)}),this.close(),this.version(100).stores(n),await this.open()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var yM=class t{constructor(e){this.db=e}getAll(){return Wn(this.db.ApiConfiguration.toArray())}async put(e){return this.db.ApiConfiguration.put(e)}static \u0275fac=function(n){return new(n||t)(Dt(Ao))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var _M=class t{constructor(e){this.db=e}async getAll(e){return this.db.table(e).toArray()}async add(e,n){return this.db.table(e).add(n)}async update(e,n,i){return this.db.table(e).update(n,i)}async delete(e,n){return this.db.table(e).delete(n)}static \u0275fac=function(n){return new(n||t)(Dt(Ao))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var CM=class t{constructor(e){this.db=e}getAll(){return Wn(this.db.TableMaster.toArray())}async addOrUpdate(e){await this.db.TableMaster.put(e),await this.db.ensureDynamicTables()}async delete(e){await this.db.TableMaster.delete(e)}static \u0275fac=function(n){return new(n||t)(Dt(Ao))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var Fp=qa(tv());var Ak=class t{key="default-secret-key";encrypt(e){return e?Fp.AES.encrypt(JSON.stringify(e),this.key).toString():""}decrypt(e){if(!e)return null;try{let n=Fp.AES.decrypt(e,this.key);return JSON.parse(n.toString(Fp.enc.Utf8))}catch{return null}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var Mk=class t{validateDexieSchema(e){return!!e&&e.includes(",")&&!e.endsWith(",")}validateFunctionality(e){let n=["I","U","D","V","R"];return e.every(i=>n.includes(i))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var nv=class t{constructor(e){this.db=e}getAll(){return mg(()=>this.db.RowContact.toArray())}async getById(e){return this.db.RowContact.get(e)}async add(e){return await this.db.RowContact.add(e),e.rowContactUniqueId}async update(e,n){return this.db.RowContact.update(e,n)}async delete(e){return this.db.RowContact.delete(e)}async count(){return this.db.RowContact.count()}static \u0275fac=function(n){return new(n||t)(Dt(Ao))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var Rp=class{static toEntity(e){return Ht(xt({},e),{createDate:e.createDate?new Date(e.createDate):void 0,verificationDate:e.verificationDate?new Date(e.verificationDate):void 0,nextVerificationDate:e.nextVerificationDate?new Date(e.nextVerificationDate):void 0,lastActivityDateTime:e.lastActivityDateTime?new Date(e.lastActivityDateTime):void 0,syncStatus:"SYNCED",lastModified:Date.now()})}static toDto(e){let s=e,{syncStatus:n,lastModified:i}=s,r=uC(s,["syncStatus","lastModified"]);return Ht(xt({},r),{createDate:e.createDate?.toISOString(),verificationDate:e.verificationDate?.toISOString(),nextVerificationDate:e.nextVerificationDate?.toISOString(),lastActivityDateTime:e.lastActivityDateTime?.toISOString()})}static toModel(e){return{id:e.rowContactUniqueId,contactPerson:e.contactPerson||"",organizationName:e.organizationName||"",email:e.emailId||"",phone:e.mobileNumber||"",communicationDetail:e.communicationDetail,communicationType:e.communicationType,address:e.address,city:e.city,state:e.state,country:e.country,pinCode:e.pinCode,status:e.systemContactStatus,createdAt:e.createDate,verifiedAt:e.verificationDate,originalData:e}}};var Mo=class t{saveState(e,n){try{localStorage.setItem(e,JSON.stringify(n))}catch(i){console.error("Error saving state to localStorage",i)}}loadState(e){try{let n=localStorage.getItem(e);return n?JSON.parse(n):null}catch(n){return console.error("Error loading state from localStorage",n),this.clearState(e),null}}clearState(e){try{localStorage.removeItem(e)}catch(n){console.error("Error clearing state from localStorage",n)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var Oi=class t{persistenceService=he(Mo);STORAGE_KEY="smartTableConfig";initialTableConfig={feature:"row_contact",key:"row_contact_default",api:{url:"CONTACT",pathTable:"v1/Master/RowContact/GetAll",pathExport:"v1/Master/RowContact/export",method:"GET",defaultPageSize:12},config:{id:"row-contact-table",title:"Contact Master",dataStrategy:"SYNC",pagingMode:"paginator",infiniteScrollBehavior:"append",paginatorPosition:"bottom",stripedRows:!0,showGridlines:!1,rowHover:!0,globalFilterFields:["organization_name","contact_person","communication_detail","email_id","created_time"],enableColumnChooser:!0,exportConfig:{enabled:!0,options:[{label:"CSV",key:"csv",icon:"pi pi-file"},{label:"Excel",key:"excel",icon:"pi pi-file-excel"},{label:"PDF",key:"pdf",icon:"pi pi-file-pdf"}]},enableRowMenu:!0,enableHeaderActions:!0,enableSavedQueries:!0,enableConfigButton:!0,enableChipFilters:!0,enableMultiSelect:!0,enableFreeze:!0,defaultRows:10,role:"ADMIN",toolbarButtonMode:"iconAndText",toolbarActions:[{label:"Refresh",icon:"pi pi-refresh",key:"refresh"},{label:"Filter",icon:"pi pi-filter",key:"toggle:filter-sidebar"},{label:"Config",icon:"pi pi-cog",key:"toggle:config-sidebar"},{label:"Add Contact",icon:"pi pi-plus",key:"add:contacts"}],sizerConfig:{enabled:!0,defaultDensity:"compact",densities:[{name:"comfortable",rowHeight:60,cssClass:"text-base"},{name:"cozy",rowHeight:50,cssClass:"text-sm"},{name:"compact",rowHeight:36,cssClass:"text-xs"},{name:"ultra-compact",rowHeight:28,cssClass:"text-xs"}],additionalReservedSpace:0},encryptionConfig:{enabled:!0,encryptedFields:["communication_detail","email_id"],secretKey:"my-super-secret-key-for-demo"},cardViewConfig:{cardsPerRow:4},emptyStateConfig:{enabled:!0,imageUrl:"",title:"Your Contact List is Empty",subtitle:"Get started by adding your first contact or importing from another service.",actions:[{label:"Add New Contact",icon:"pi pi-plus",key:"add:contacts",class:"bg-indigo-600 hover:bg-indigo-700 text-white"}],migration:{enabled:!0,title:"Migrate your data from third-party systems",logos:[{src:"https://picsum.photos/seed/zohocrm/120/30",alt:"Zoho CRM"},{src:"https://picsum.photos/seed/quickbooks/150/30",alt:"Quickbooks"},{src:"https://picsum.photos/seed/salesforce/120/30",alt:"Salesforce"}],moreText:"and more",action:{label:"Import Contacts",key:"import:contacts",class:"bg-cyan-500 hover:bg-cyan-600 text-white"}}},footerConfig:{enabled:!0,columns:[{code:"contact_person",aggregation:"count",display:"Total Contacts: {value}"},{code:"annual_revenue",aggregation:"sum",display:"Total Revenue: {value}"}]},styleConfig:{enableTransparency:!1,headerBackgroundColor:"var(--marg-header-bg)",footerBackgroundColor:"var(--marg-header-bg)",backgroundImageUrl:""}},advancedFilters:{enabled:!0,groups:[{name:"System Defined Filters",collapsible:!0,filters:[{code:"annual_revenue",name:"Annual Revenue",type:"numeric",operators:["=","!=",">","<",">=","<=","between","not between"],defaultOperator:">="}]},{name:"Date Filters",collapsible:!0,filters:[{code:"created_time",name:"Created Date",type:"date",dateOperators:["in the last 30 days","this month","this year","today"]}]},{name:"Lead Filters",collapsible:!1,filters:[{code:"lead_source",name:"Lead Source",type:"select",options:["Web","Organic","Referral"]}]}]},columns:[{index:0,name:"Select",code:"select_box",display:"table_cell",columnType:"CHECKBOX",width:"50px",align:"center",sortable:!1,filterable:!1,frozen:!0,showOnColumnChooser:!1},{index:1,name:"Contact Person",code:"contact_person",display:"table_cell",width:"250px",sortable:!0,filterable:!0,frozen:!0,cardHeader:!0,listRow:!0,filterOnCodes:["contact_person","organization_name"],cellTemplate:[{code:"avatar_url",columnType:"IMAGE",imageConfig:{shape:"circle"}},{code:"contact_person",tag:"p",bold:!0},{code:"organization_name",tag:"small"}]},{index:2,name:"Company",code:"organization_name",display:"table_cell",sortable:!0,filterable:!0,width:"200px"},{index:3,name:"Communication",code:"communication_detail",display:"table_cell",width:"150px",sortable:!0,filterable:!0,cardRow:!0,mask:{enabled:!0,unmaskEnabled:!0,visibleStart:0,visibleEnd:4,maskChar:"X"}},{index:4,name:"Email",code:"email_id",display:"table_cell",width:"250px",sortable:!0,filterable:!0,cardHeader1:!0,listRow:!0},{index:5,name:"Annual Revenue",code:"annual_revenue",display:"table_cell",align:"right",sortable:!0,filterable:!0,width:"150px",cardRow:!0,columnType:"numeric"},{index:6,name:"Created",code:"created_time",display:"table_cell",columnType:"DATE",width:"180px",sortable:!0,filterable:!0},{index:7,name:"Lead Source",code:"lead_source",display:"table_cell",sortable:!0,filterable:!0,width:"150px",cardRow:!0,listRow:!0},{index:8,name:"Action",code:"action",display:"table_cell",columnType:"ACTION",width:"120px",align:"center",showOnColumnChooser:!1}],rowActions:[{label:"Edit",icon:"pi pi-pencil",action:"edit",color:"text-blue-500"},{label:"Email",icon:"pi pi-envelope",action:"email",color:"text-gray-500"},{label:"Delete",icon:"pi pi-trash",action:"delete",color:"text-red-500"}],rowMenu:[{label:"Actions",items:[{label:"Edit",icon:"pi pi-pencil",action:"edit",shortcut:"E"},{label:"Duplicate",icon:"pi pi-copy",action:"duplicate"},{label:"Delete",icon:"pi pi-trash",action:"delete",shortcut:"Del"}]},{label:"Communication",items:[{label:"Call",icon:"pi pi-phone",action:"call"},{label:"WhatsApp",icon:"pi pi-whatsapp",action:"whatsapp"},{label:"Email",icon:"pi pi-envelope",action:"email"},{label:"SMS",icon:"pi pi-comment",action:"sms"}]}],headerMenu:[{label:"Bulk Actions",items:[{label:"Delete Selected",icon:"pi pi-trash",action:"delete_selected"}]}],drawerConfig:{width:"400px",position:"right",buttons:[],headerActions:[]}};configSignal=xe(this.loadConfig());config=this.configSignal.asReadonly();constructor(){ln(()=>{this.persistenceService.saveState(this.STORAGE_KEY,this.configSignal())})}loadConfig(){let e=this.persistenceService.loadState(this.STORAGE_KEY);return e?(e.config.styleConfig||(e.config.styleConfig=xt({},this.initialTableConfig.config.styleConfig)),e.config.footerConfig||(e.config.footerConfig=xt({},this.initialTableConfig.config.footerConfig)),e):this.initialTableConfig}updateDataStrategy(e){this.configSignal.update(n=>Ht(xt({},n),{config:Ht(xt({},n.config),{dataStrategy:e})}))}updateInfiniteScrollBehavior(e){this.configSignal.update(n=>Ht(xt({},n),{config:Ht(xt({},n.config),{infiniteScrollBehavior:e})}))}updateCardsPerRow(e){this.configSignal.update(n=>Ht(xt({},n),{config:Ht(xt({},n.config),{cardViewConfig:Ht(xt({},n.config.cardViewConfig),{cardsPerRow:e})})}))}updateFullConfig(e){this.configSignal.set(e)}resetToDefaults(){this.configSignal.set(JSON.parse(JSON.stringify(this.initialTableConfig)))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};function Qu(t,e){if(!t)return"";let n=e.visibleStart??0,i=e.visibleEnd??0,r=e.maskChar??"*";if(t.length<=n+i)return t;let s=t.substring(0,n),a=t.substring(t.length-i),c=t.length-n-i,u=r.repeat(Math.max(0,c));return`${s}${u}${a}`}function kk(t,e){let n=String(t||"").trim();if(e.required&&!n)return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 235, 238, 0.6)",textcolor:e.textcolor,tooltip:e.tooltip||"Email is required."}};if(!n)return null;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n))return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",tooltip:"Invalid email format."}};if(e.blacklist?.includes(n))return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 235, 238, 0.6)",tooltip:"This email address is blacklisted."}};let r=n.split("@")[1];return e.notAllowedDomains?.includes(r)?{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 235, 238, 0.6)",tooltip:`Emails from the domain '${r}' are not allowed.`}}:e.allowedDomains&&e.allowedDomains.length>0&&!e.allowedDomains.includes(r)?{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",tooltip:"Only emails from allowed domains are accepted."}}:null}function Nk(t,e){let n=String(t||"");if(!n)return null;if(e.minLength!==void 0&&n.length<e.minLength)return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",textcolor:e.textcolor,tooltip:e.tooltip||`Must be at least ${e.minLength} characters long.`}};if(e.maxLength!==void 0&&n.length>e.maxLength)return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",textcolor:e.textcolor,tooltip:e.tooltip||`Cannot be more than ${e.maxLength} characters long.`}};if(e.onlyNumbers&&!/^\d+$/.test(n))return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",textcolor:e.textcolor,tooltip:e.tooltip||"Only numbers are allowed."}};if(e.pattern)try{if(!new RegExp(e.pattern).test(n))return{isValid:!1,style:{bgcolor:e.bgcolor||"rgba(255, 240, 210, 0.6)",textcolor:e.textcolor,tooltip:e.tooltip||"The format is invalid."}}}catch(i){console.error("Invalid regex pattern in configuration:",e.pattern,i)}return null}function s6(t,e){return e?.status&&(t==null||String(t).trim()==="")?{isValid:!1,style:{bgcolor:e.bgcolor,textcolor:e.textcolor,tooltip:e.tooltip}}:null}function Mc(t,e,n){let i=e.validations?.find(m=>m.code===n),r=e.code===n?e.isRequired:void 0,s=e.code===n?e.emailValidation:void 0,a=e.code===n?e.genericValidation:void 0,c=i?.isRequired||r;if(c){let m=s6(t,c);if(m)return m}let u=i?.emailValidation||s;if(u){let m=kk(t,u);if(m)return m}let p=i?.genericValidation||a;if(p){let m=Nk(t,p);if(m)return m}return{isValid:!0,style:null}}var Gb=(t,e)=>e.label;function a6(t,e){t&1&&ot(0,"hr",1)}function l6(t,e){if(t&1&&(ne(0,"div",3)(1,"p",5),Y(2),oe()()),t&2){let n=F().$implicit;V(2),Ue(n.label)}}function c6(t,e){if(t&1&&ot(0,"i"),t&2){let n=F().$implicit;Zt(n.icon+" w-4 text-center")}}function u6(t,e){t&1&&ot(0,"span",10)}function d6(t,e){if(t&1&&(ne(0,"span",11),Y(1),oe()),t&2){let n=F().$implicit;V(),Ue(n.shortcut)}}function f6(t,e){t&1&&ot(0,"i",12)}function p6(t,e){if(t&1&&ot(0,"i"),t&2){let n=F().$implicit;Zt(n.icon+" w-4 text-center")}}function h6(t,e){t&1&&ot(0,"span",10)}function m6(t,e){if(t&1&&(ne(0,"span",11),Y(1),oe()),t&2){let n=F().$implicit;V(),Ue(n.shortcut)}}function g6(t,e){if(t&1){let n=Pe();ne(0,"a",7),Je("click",function(){let r=ee(n).$implicit,s=F(4);return te(s.onActionClick(r))}),ne(1,"div",8),fe(2,p6,1,2,"i",9)(3,h6,1,0,"span",10),ne(4,"span"),Y(5),oe()(),fe(6,m6,2,1,"span",11),oe()}if(t&2){let n=e.$implicit,i=F(4);Qe("cursor-pointer",!!n.action&&!i.isItemDisabled(n))("hover:bg-gray-100",!!n.action&&!i.isItemDisabled(n))("hover:bg-gray-100",!!n.action&&!i.isItemDisabled(n))("opacity-50",i.isItemDisabled(n))("cursor-not-allowed",i.isItemDisabled(n)),V(2),pe(n.icon?2:3),V(3),Ue(n.label),V(),pe(n.shortcut?6:-1)}}function v6(t,e){if(t&1&&(ne(0,"div",13)(1,"div",2),et(2,g6,7,13,"a",14,Gb),oe()()),t&2){let n=F().$implicit;V(2),tt(n.items)}}function y6(t,e){if(t&1){let n=Pe();ne(0,"div",6),Je("mouseenter",function(){let r=ee(n).$implicit,s=F(2);return te(s.handleMouseEnter(r))})("mouseleave",function(){let r=ee(n).$implicit,s=F(2);return te(s.handleMouseLeave(r))}),ne(1,"a",7),Je("click",function(){let r=ee(n).$implicit,s=F(2);return te(s.onActionClick(r))}),ne(2,"div",8),fe(3,c6,1,2,"i",9)(4,u6,1,0,"span",10),ne(5,"span"),Y(6),oe()(),ne(7,"div",8),fe(8,d6,2,1,"span",11),fe(9,f6,1,0,"i",12),oe()(),fe(10,v6,4,0,"div",13),oe()}if(t&2){let n=e.$implicit,i=F(2);V(),Qe("cursor-pointer",!!n.action&&!i.isItemDisabled(n))("hover:bg-gray-100",!!n.action&&!i.isItemDisabled(n))("hover:bg-gray-100",!!n.action&&!i.isItemDisabled(n))("opacity-50",i.isItemDisabled(n))("cursor-not-allowed",i.isItemDisabled(n)),V(2),pe(n.icon?3:4),V(3),Ue(n.label),V(2),pe(n.shortcut?8:-1),V(),pe(n.items?9:-1),V(),pe(n.items&&i.openSubMenu()===n.label?10:-1)}}function _6(t,e){if(t&1&&(fe(0,a6,1,0,"hr",1),ne(1,"div",2),fe(2,l6,3,1,"div",3),et(3,y6,11,15,"div",4,Gb),oe()),t&2){let n=e.$implicit,i=e.$index;pe(i!==0?0:-1),V(),ca("aria-labelledby",n.label),V(),pe(n.label!=="Actions"?2:-1),V(),tt(n.items)}}var Xu=class t{menuConfig=Ee.required();row=Ee.required();position=Ee(null);actionClicked=gt();openSubMenu=xe(null);isItemDisabled(e){let n=this.row();switch(e.action){case"call":case"whatsapp":case"sms":return!n.communication_detail;case"email":return!n.email_id;default:return!1}}onActionClick(e){!e.action||this.isItemDisabled(e)||this.actionClicked.emit({action:e.action,row:this.row()})}handleMouseEnter(e){e.items&&this.openSubMenu.set(e.label)}handleMouseLeave(e){e.items&&this.openSubMenu.set(null)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-row-menu"]],inputs:{menuConfig:[1,"menuConfig"],row:[1,"row"],position:[1,"position"]},outputs:{actionClicked:"actionClicked"},decls:3,vars:14,consts:[[1,"w-56","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-20"],[1,"border-gray-200"],["role","menu","aria-orientation","vertical",1,"py-1"],[1,"px-3","pt-2","pb-1"],[1,"relative"],[1,"text-xs","font-semibold","text-gray-500","uppercase","tracking-wider"],[1,"relative",3,"mouseenter","mouseleave"],["role","menuitem",1,"flex","items-center","justify-between","px-3","py-2","text-sm","text-gray-700","transition-colors","duration-150",3,"click"],[1,"flex","items-center","gap-3"],[3,"class"],[1,"w-4"],[1,"text-xs","text-gray-400"],[1,"pi","pi-chevron-right","text-xs","text-gray-400"],[1,"absolute","left-full","-top-1","ml-1","w-56","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30"],["role","menuitem",1,"flex","items-center","justify-between","px-3","py-2","text-sm","text-gray-700","transition-colors","duration-150",3,"cursor-pointer","hover:bg-gray-100","opacity-50","cursor-not-allowed"]],template:function(n,i){n&1&&(ne(0,"div",0),et(1,_6,5,3,null,null,Gb),oe()),n&2&&(mi("left",i.position()?i.position().x+"px":null)("top",i.position()?i.position().y+"px":null),Qe("origin-top-right",!i.position())("absolute",!i.position())("right-0",!i.position())("mt-2",!i.position())("fixed",!!i.position()),V(),tt(i.menuConfig()))},dependencies:[Ft],encapsulation:2,changeDetection:0})};var Fk=(t,e)=>e.label;function C6(t,e){if(t&1&&(ne(0,"div",2)(1,"p",5),Y(2),oe()()),t&2){let n=F().$implicit;V(2),Ue(n.label)}}function x6(t,e){if(t&1){let n=Pe();ne(0,"a",6),Je("click",function(){let r=ee(n).$implicit,s=F(2);return te(s.onActionClick(r.action))}),ot(1,"i"),ne(2,"span"),Y(3),oe()()}if(t&2){let n=e.$implicit;V(),Zt(n.icon),V(2),Ue(n.label)}}function b6(t,e){t&1&&ot(0,"hr",4)}function w6(t,e){if(t&1&&(ne(0,"div",1),fe(1,C6,3,1,"div",2),et(2,x6,4,3,"a",3,Fk),oe(),fe(4,b6,1,0,"hr",4)),t&2){let n=e.$implicit,i=e.$index,r=e.$count,s=F();ca("aria-labelledby",n.label),V(),pe(s.menuConfig().length>1?1:-1),V(),tt(n.items),V(2),pe(i!==r-1?4:-1)}}var iv=class t{menuConfig=Ee.required();actionClicked=gt();onActionClick(e){this.actionClicked.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-header-menu"]],inputs:{menuConfig:[1,"menuConfig"]},outputs:{actionClicked:"actionClicked"},decls:3,vars:0,consts:[[1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-20"],["role","menu","aria-orientation","vertical",1,"py-1"],[1,"px-4","py-2"],["href","javascript:void(0)","role","menuitem",1,"flex","items-center","gap-3","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","transition-colors","duration-150"],[1,"border-gray-200"],[1,"text-xs","text-gray-400","uppercase","tracking-wider"],["href","javascript:void(0)","role","menuitem",1,"flex","items-center","gap-3","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","transition-colors","duration-150",3,"click"]],template:function(n,i){n&1&&(ne(0,"div",0),et(1,w6,5,3,null,null,Fk),oe()),n&2&&(V(),tt(i.menuConfig()))},dependencies:[Ft],encapsulation:2,changeDetection:0})};var ko=class t{elementRef=he(Ei);clickOutside=new rr;constructor(){ln(()=>{let e=n=>{this.elementRef.nativeElement.contains(n.target)||this.clickOutside.emit()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}})}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Rn({type:t,selectors:[["","clickOutside",""]],outputs:{clickOutside:"clickOutside"}})};var E6=()=>["S","M","T","W","T","F","S"],S6=(t,e)=>e.date.getTime();function D6(t,e){if(t&1&&(z(0,"div",17),Y(1),G()),t&2){let n=e.$implicit;V(),Ue(n)}}function T6(t,e){if(t&1){let n=Pe();z(0,"div",19)(1,"button",21),Ce("click",function(){let r=ee(n).$implicit,s=F(2);return te(s.selectDate(r.date))}),Y(2),Si(3,"date"),G()()}if(t&2){let n=e.$implicit,i=F(2);V(),Qe("text-gray-400",!n.isCurrentMonth)("font-semibold",i.isToday(n.date))("bg-indigo-600",i.isToday(n.date))("text-white",i.isToday(n.date))("hover:bg-gray-200",!i.isDateInRange(n.date))("bg-indigo-100",i.isDateInRange(n.date))("text-indigo-700",i.isDateInRange(n.date))("rounded-l-full",i.isRangeStart(n.date)&&!!i.rangeEnd())("rounded-r-full",i.isRangeEnd(n.date))("rounded-full",i.isRangeStart(n.date)&&!i.rangeEnd()||i.isRangeStart(n.date)&&i.isRangeEnd(n.date)),V(),tn(" ",Br(3,21,n.date,"d")," ")}}function I6(t,e){if(t&1&&(z(0,"span"),Y(1),Si(2,"date"),Si(3,"date"),G()),t&2){let n=F(2);V(),Gu("",Br(2,2,n.rangeStart(),"shortDate")," - ",Br(3,5,n.rangeEnd(),"shortDate"))}}function A6(t,e){if(t&1&&(z(0,"span"),Y(1),Si(2,"date"),G()),t&2){let n=F(2);V(),Ue(Br(2,1,n.rangeStart(),"shortDate"))}}function M6(t,e){t&1&&(z(0,"span"),Y(1,"Select a date or a range"),G())}function k6(t,e){if(t&1){let n=Pe();z(0,"div",6)(1,"div",10)(2,"button",11),Ce("click",function(){ee(n);let r=F();return te(r.changeMonth(-1))}),ke(3,"i",12),G(),z(4,"span",13),Y(5),Si(6,"date"),G(),z(7,"button",14),Ce("click",function(){ee(n);let r=F();return te(r.changeMonth(1))}),ke(8,"i",15),G()(),z(9,"div",16),et(10,D6,2,1,"div",17,xn),G(),z(12,"div",18),et(13,T6,4,24,"div",19,S6),G(),z(15,"div",20),fe(16,I6,4,8,"span")(17,A6,3,4,"span")(18,M6,2,0,"span"),G()()}if(t&2){let n=F();V(5),Ue(Br(6,2,n.currentMonth(),"LLLL yyyy")),V(5),tt(pa(5,E6)),V(3),tt(n.calendarGrid()),V(3),pe(n.rangeStart()&&n.rangeEnd()?16:n.rangeStart()?17:18)}}function N6(t,e){if(t&1){let n=Pe();z(0,"li",32)(1,"input",34),Ce("change",function(){let r=ee(n).$implicit,s=F(2);return te(s.toggleValue(r))}),G(),z(2,"label",35),Y(3),G()()}if(t&2){let n=e.$implicit,i=F(2);V(),Ye("id","filter-val-"+n)("checked",i.selectedValues().has(n)),V(),Ye("for","filter-val-"+n)("title",n),V(),Ue(n)}}function F6(t,e){t&1&&(z(0,"li",33),Y(1,"No values found."),G())}function R6(t,e){if(t&1){let n=Pe();z(0,"div",2)(1,"div",22)(2,"div",23),ke(3,"i",24),G(),z(4,"input",25,0),Ce("input",function(){ee(n);let r=Yi(5),s=F();return te(s.searchTerm.set(r.value))}),G()()(),z(6,"div",26)(7,"div",27)(8,"input",28),Ce("change",function(){ee(n);let r=F();return te(r.toggleSelectAll())}),G(),z(9,"label",29),Y(10,"(Select All)"),G()(),ke(11,"hr",30),z(12,"ul",31),et(13,N6,4,5,"li",32,xn),fe(15,F6,2,0,"li",33),G()()}if(t&2){let n=F();V(8),Ye("checked",n.isAllSelected()),V(5),tt(n.filteredValues()),V(2),pe(n.filteredValues().length===0?15:-1)}}var rv=class t{column=Ee.required();data=Ee.required();activeFilter=Ee();apply=gt();close=gt();searchTerm=xe("");selectedValues=xe(new Set);currentMonth=xe(new Date);rangeStart=xe(null);rangeEnd=xe(null);uniqueValues=ut(()=>{let e=this.column().code,n=this.data().map(i=>String(i[e]??"")).filter(i=>i.trim()!=="");return[...new Set(n)].sort()});filteredValues=ut(()=>{let e=this.searchTerm().toLowerCase();return e?this.uniqueValues().filter(n=>n.toLowerCase().includes(e)):this.uniqueValues()});isAllSelected=ut(()=>{let e=this.filteredValues();return e.length===0?!1:e.every(n=>this.selectedValues().has(n))});calendarGrid=ut(()=>{let e=this.currentMonth(),n=e.getFullYear(),i=e.getMonth(),r=new Date(n,i,1),s=new Date(n,i+1,0),a=r.getDay(),c=s.getDate(),u=[];for(let m=0;m<a;m++){let C=new Date(r);C.setDate(C.getDate()-(a-m)),u.push({date:C,isCurrentMonth:!1})}for(let m=1;m<=c;m++){let C=new Date(n,i,m);u.push({date:C,isCurrentMonth:!0})}let p=42-u.length;for(let m=1;m<=p;m++){let C=new Date(s);C.setDate(C.getDate()+m),u.push({date:C,isCurrentMonth:!1})}return u});constructor(){ln(()=>{let e=this.column(),n=this.activeFilter();if(e.columnType==="DATE")n&&(n.operator==="="||n.operator==="between")?(this.rangeStart.set(n.value1?new Date(n.value1+"T00:00:00"):null),this.rangeEnd.set(n.value2?new Date(n.value2+"T00:00:00"):null),n.value1&&this.currentMonth.set(new Date(n.value1+"T00:00:00"))):this.resetDateSelection();else{let i=this.uniqueValues();if(n&&n.value1){let r=String(n.value1).split(",");this.selectedValues.set(new Set(r))}else this.selectedValues.set(new Set(i))}},{allowSignalWrites:!0})}toggleSelectAll(){let e=this.isAllSelected(),n=this.filteredValues();this.selectedValues.update(i=>{let r=new Set(i);return e?n.forEach(s=>r.delete(s)):n.forEach(s=>r.add(s)),r})}toggleValue(e){this.selectedValues.update(n=>{let i=new Set(n);return i.has(e)?i.delete(e):i.add(e),i})}handleApply(){if(this.column().columnType==="DATE"){let e=this.rangeStart(),n=this.rangeEnd();if(e&&n&&n<e){let i=e;this.rangeStart.set(n),this.rangeEnd.set(i),n=i}if(e&&n){let i={code:this.column().code,name:this.column().name,type:"date",operator:"between",value1:e.toISOString().split("T")[0],value2:n.toISOString().split("T")[0]};this.apply.emit({filter:i})}else if(e){let i={code:this.column().code,name:this.column().name,type:"date",operator:"=",value1:e.toISOString().split("T")[0]};this.apply.emit({filter:i})}else this.apply.emit({filter:null})}else{let e=Array.from(this.selectedValues()),n=this.uniqueValues();if(e.length===0||e.length===n.length)this.apply.emit({filter:null});else{let i={code:this.column().code,name:this.column().name,type:"select",operator:"=",value1:e.join(",")};this.apply.emit({filter:i})}}}handleClear(){this.column().columnType==="DATE"?this.resetDateSelection():(this.selectedValues.set(new Set),this.searchTerm.set("")),this.apply.emit({filter:null})}handleSort(e){this.apply.emit({sort:{column:this.column().code,direction:e}})}selectDate(e){let n=this.rangeStart(),i=this.rangeEnd();!n||i?(this.rangeStart.set(e),this.rangeEnd.set(null)):this.rangeEnd.set(e)}changeMonth(e){this.currentMonth.update(n=>{let i=new Date(n);return i.setMonth(i.getMonth()+e),i})}isDateInRange(e){let n=this.rangeStart(),i=this.rangeEnd();if(!n)return!1;if(i){let r=n<i?n:i,s=n<i?i:n;return e>=r&&e<=s}return e.getTime()===n.getTime()}isRangeStart(e){return this.rangeStart()?.getTime()===e.getTime()}isRangeEnd(e){return this.rangeEnd()?.getTime()===e.getTime()}isToday(e){let n=new Date;return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}resetDateSelection(){this.rangeStart.set(null),this.rangeEnd.set(null),this.currentMonth.set(new Date)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-excel-filter"]],inputs:{column:[1,"column"],data:[1,"data"],activeFilter:[1,"activeFilter"]},outputs:{apply:"apply",close:"close"},decls:17,vars:1,consts:[["searchInput",""],[1,"absolute","top-full","right-0","mt-2","w-72","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30","flex","flex-col","max-h-[28rem]",3,"clickOutside","click"],[1,"p-2","border-b","border-gray-200","flex-shrink-0"],[1,"flex","items-center","gap-2","w-full","px-2","py-1.5","text-sm","rounded-md","text-gray-700","hover:bg-gray-100",3,"click"],[1,"pi","pi-sort-amount-up-alt","w-4","text-center"],[1,"pi","pi-sort-amount-down","w-4","text-center"],[1,"p-3"],[1,"p-2","border-t","border-gray-200","flex-shrink-0","flex","justify-end","gap-2"],[1,"px-3","py-1.5","text-xs","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-3","py-1.5","text-xs","font-medium","text-white","bg-indigo-600","border","border-transparent","rounded-md","hover:bg-indigo-700",3,"click"],[1,"flex","items-center","justify-between","mb-2"],["title","Previous month",1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-chevron-left","text-xs"],[1,"text-sm","font-semibold"],["title","Next month",1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-chevron-right","text-xs"],[1,"grid","grid-cols-7","text-center","text-xs","text-gray-500"],[1,"w-8","h-8","flex","items-center","justify-center","font-medium"],[1,"grid","grid-cols-7","text-center","text-sm"],[1,"flex","justify-center","items-center"],[1,"mt-3","text-xs","text-center","text-gray-500"],[1,"w-8","h-8","rounded-full","transition-colors",3,"click"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"pi","pi-search","text-gray-400","text-xs"],["type","search","placeholder","Search values...",1,"block","w-full","pl-8","pr-3","py-1.5","border","border-gray-300","rounded-md","bg-white","text-sm","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500",3,"input"],[1,"flex-grow","p-2","overflow-y-auto"],[1,"flex","items-center","px-1"],["type","checkbox","id","select-all-filter",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","checked"],["for","select-all-filter",1,"ml-2","text-sm","font-medium","text-gray-900"],[1,"my-2","border-gray-200"],[1,"space-y-1"],[1,"flex","items-center","p-1","rounded-md","hover:bg-gray-100"],[1,"px-2","py-1","text-sm","text-center","text-gray-500"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","id","checked"],[1,"ml-2","text-sm","text-gray-700","truncate",3,"for","title"]],template:function(n,i){n&1&&(z(0,"div",1),Ce("clickOutside",function(){return i.close.emit()})("click",function(s){return s.stopPropagation()}),z(1,"div",2)(2,"button",3),Ce("click",function(){return i.handleSort("asc")}),ke(3,"i",4),z(4,"span"),Y(5,"Sort Ascending"),G()(),z(6,"button",3),Ce("click",function(){return i.handleSort("desc")}),ke(7,"i",5),z(8,"span"),Y(9,"Sort Descending"),G()()(),fe(10,k6,19,6,"div",6)(11,R6,16,2),z(12,"div",7)(13,"button",8),Ce("click",function(){return i.handleClear()}),Y(14," Clear "),G(),z(15,"button",9),Ce("click",function(){return i.handleApply()}),Y(16," Apply "),G()()()),n&2&&(V(10),pe(i.column().columnType==="DATE"?10:11))},dependencies:[Ft,ko,Tc],encapsulation:2,changeDetection:0})};var Zu=(t,e)=>e.code,P6=(t,e)=>e.organization_id,L6=(t,e)=>e.action;function O6(t,e){if(t&1){let n=Pe();z(0,"input",14),Ce("change",function(){ee(n);let r=F(2);return te(r.toggleSelectAll())})("click",function(r){return ee(n),te(r.stopPropagation())}),G()}if(t&2){let n=F(2);Ye("checked",n.isAllSelectedOnPage())}}function V6(t,e){if(t&1){let n=Pe();z(0,"app-header-menu",18),Ce("actionClicked",function(r){ee(n);let s=F(3);return te(s.handleHeaderMenuAction(r))})("clickOutside",function(){ee(n);let r=F(3);return te(r.isHeaderMenuOpen.set(!1))}),G()}if(t&2){let n=F(3);Ye("menuConfig",n.headerMenuConfig())}}function B6(t,e){if(t&1){let n=Pe();z(0,"div",11)(1,"button",15),Ce("click",function(r){ee(n);let s=F(2);return r.stopPropagation(),te(s.isHeaderMenuOpen.set(!s.isHeaderMenuOpen()))}),ke(2,"i",16),G(),fe(3,V6,1,1,"app-header-menu",17),G()}if(t&2){let n=F(2);V(),Qe("opacity-50",n.selectedIds().size===0),Ye("disabled",n.selectedIds().size===0),V(2),pe(n.isHeaderMenuOpen()?3:-1)}}function H6(t,e){if(t&1&&ke(0,"i",20),t&2){let n=F(3);Qe("pi-sort-amount-up-alt",n.sortDirection()==="asc")("pi-sort-amount-down",n.sortDirection()==="desc")}}function U6(t,e){if(t&1&&(z(0,"div",12)(1,"span"),Y(2),G(),fe(3,H6,1,4,"i",19),G()),t&2){let n=F().$implicit,i=F();V(2),Ue(n.name),V(),pe(i.sortColumn()===n.code?3:-1)}}function z6(t,e){if(t&1){let n=Pe();z(0,"app-excel-filter",24),Ce("apply",function(r){ee(n);let s=F(2).$implicit,a=F();return te(a.handleApplyExcelFilter(r,s.code))})("close",function(){ee(n);let r=F(3);return te(r.closeFilterMenu())}),G()}if(t&2){let n,i=F(2).$implicit,r=F();Ye("column",i)("data",r.data())("activeFilter",(n=r.activeFilters())==null?null:n[i.code])}}function G6(t,e){if(t&1){let n=Pe();z(0,"div",13)(1,"button",21),Ce("click",function(r){ee(n);let s=F().$implicit,a=F();return te(a.openFilterMenu(s,r))}),ke(2,"i",22),G(),fe(3,z6,1,3,"app-excel-filter",23),G()}if(t&2){let n,i=F().$implicit,r=F();V(),Qe("text-indigo-500",(n=r.activeFilters())==null?null:n[i.code]),V(2),pe(r.openFilterMenuForColumn()===i?3:-1)}}function $6(t,e){if(t&1){let n=Pe();z(0,"th",8),Ce("dragover",function(r){ee(n);let s=F();return te(s.onDragOver(r))})("drop",function(r){let s=ee(n).$index,a=F();return te(a.onDrop(r,s))})("dragend",function(){ee(n);let r=F();return te(r.onDragEnd())}),z(1,"div",9),Ce("dragstart",function(){let r=ee(n).$index,s=F();return te(s.onDragStart(r))})("click",function(){let r=ee(n).$implicit,s=F();return te(s.onSort(r.code))})("keydown.enter",function(r){let s=ee(n).$implicit,a=F();return r.preventDefault(),te(a.onSort(s.code))})("keydown.space",function(r){let s=ee(n).$implicit,a=F();return r.preventDefault(),te(a.onSort(s.code))}),fe(2,O6,1,1,"input",10)(3,B6,4,4,"div",11)(4,U6,4,2,"div",12),fe(5,G6,4,3,"div",13),G()()}if(t&2){let n=e.$implicit,i=e.$index,r=e.$count,s=F();mi("width",n.width)("left",n.frozen?s.columnOffsets()[i]:null),Qe("border-r",i===r-1||n.frozen||s.showGridlines())("sticky",n.frozen)("z-30",n.frozen)("bg-gray-100",n.frozen)("opacity-50",s.draggedColumnIndex()===i),V(),Qe("justify-center",n.align==="center")("justify-end",n.align==="right")("justify-between",n.align!=="center"&&n.align!=="right")("cursor-pointer",n.sortable)("cursor-move",n.columnType!=="CHECKBOX"&&n.columnType!=="ACTION"&&!n.frozen),Ye("title",n.sortable?s.sortColumn()===n.code?s.sortDirection()==="asc"?"Sort descending":"Sort ascending":"Sort by "+n.name:null),ca("draggable",n.columnType!=="CHECKBOX"&&n.columnType!=="ACTION"&&!n.frozen)("tabindex",n.sortable?0:-1),V(),pe(n.columnType==="CHECKBOX"&&s.enableMultiSelect()?2:n.columnType==="ACTION"&&s.headerMenuConfig()?3:4),V(3),pe(n.filterable?5:-1)}}function q6(t,e){if(t&1){let n=Pe();z(0,"input",30),Ce("change",function(){ee(n);let r=F(3).$implicit,s=F();return te(s.toggleRowSelection(r.organization_id))})("click",function(r){return ee(n),te(r.stopPropagation())}),G()}if(t&2){let n=F(3).$implicit,i=F();Ye("checked",i.selectedIds().has(n.organization_id))}}function W6(t,e){if(t&1&&fe(0,q6,1,1,"input",29),t&2){let n=F(3);pe(n.enableMultiSelect()?0:-1)}}function j6(t,e){if(t&1){let n=Pe();z(0,"button",36),Ce("click",function(r){let s=ee(n).$implicit,a=F(4).$implicit,c=F();return r.stopPropagation(),te(c.rowAction.emit({action:s.action,row:a}))}),ke(1,"i"),G()}if(t&2){let n=e.$implicit;Zt(n.color),Ye("title",n.label),V(),Zt(n.icon)}}function K6(t,e){t&1&&et(0,j6,2,5,"button",35,L6),t&2&&tt(e)}function Y6(t,e){if(t&1){let n=Pe();z(0,"app-row-menu",37),Ce("actionClicked",function(r){ee(n);let s=F(4);return te(s.handleRowMenuAction(r))})("clickOutside",function(){ee(n);let r=F(4);return te(r.closeRowMenu())}),G()}if(t&2){let n=F(3).$implicit,i=F();Ye("menuConfig",i.rowMenuConfig())("row",n)("position",i.contextMenuPosition())}}function J6(t,e){if(t&1){let n=Pe();z(0,"div",28)(1,"div",31),fe(2,K6,2,0),G(),z(3,"button",32),Ce("click",function(r){ee(n);let s=F(2).$implicit,a=F();return te(a.toggleRowMenu(r,s.organization_id))}),ke(4,"i",33),G(),fe(5,Y6,1,3,"app-row-menu",34),G()}if(t&2){let n,i=F(2),r=i.$implicit,s=i.$index,a=F();V(),Qe("opacity-100",a.keyboardActiveRowIndex()===s),V(),pe((n=a.rowActions())?2:-1,n),V(),Qe("opacity-100",a.keyboardActiveRowIndex()===s),V(2),pe(a.openMenuRowId()===r.organization_id?5:-1)}}function Q6(t,e){if(t&1&&(z(0,"span"),Y(1),Si(2,"date"),G()),t&2){let n=F().$implicit,i=F().$implicit;V(),Ue(Br(2,1,i[n.code],"mediumDate"))}}function X6(t,e){if(t&1&&(z(0,"span",39),Y(1),G(),z(2,"span",40),Y(3),G()),t&2){let n=F(4).$implicit;V(),Ue(n.contact_person),V(2),tn("(",n.organization_name,")")}}function Z6(t,e){if(t&1&&ke(0,"img",41),t&2){let n=F(2).$implicit,i=F(5).$implicit;Ye("src",i[n.code],no)}}function eH(t,e){if(t&1&&(z(0,"div",42)(1,"span",43),Y(2),G()()),t&2){let n=F(7).$implicit;V(2),Ue((n.contact_person==null?null:n.contact_person[0])||"A")}}function tH(t,e){if(t&1&&fe(0,Z6,1,1,"img",41)(1,eH,3,1,"div",42),t&2){let n=F().$implicit,i=F(5).$implicit;pe(i[n.code]?0:1)}}function nH(t,e){if(t&1&&fe(0,tH,2,1),t&2){let n=e.$implicit;pe(n.columnType==="IMAGE"?0:-1)}}function iH(t,e){if(t&1&&(z(0,"p",39),Y(1),G()),t&2){F();let n=ar(0),i=F().$implicit;Qe("font-bold",i.bold),V(),Ue(n)}}function rH(t,e){if(t&1&&(z(0,"small",47),Y(1),G()),t&2){F();let n=ar(0),i=F().$implicit;Qe("font-bold",i.bold),V(),Ue(n)}}function oH(t,e){if(t&1&&(z(0,"span"),Y(1),G()),t&2){F();let n=ar(0),i=F().$implicit;Qe("font-bold",i.bold),V(),Ue(n)}}function sH(t,e){if(t&1&&(Fs(0),fe(1,iH,2,3,"p",44)(2,rH,2,3,"small",45)(3,oH,2,3,"span",46)),t&2){let n,i=F().$implicit,r=F(5).$implicit;da(r[i.code]),V(),pe((n=i.tag||"span")==="p"?1:n==="small"?2:n==="span"?3:-1)}}function aH(t,e){if(t&1&&fe(0,sH,4,2),t&2){let n=e.$implicit;pe(n.columnType!=="IMAGE"?0:-1)}}function lH(t,e){if(t&1&&(z(0,"div",38),et(1,nH,1,1,null,null,Zu),z(3,"div"),et(4,aH,1,1,null,null,Zu),G()()),t&2){let n=F(3).$implicit;V(),tt(n.cellTemplate),V(3),tt(n.cellTemplate)}}function cH(t,e){if(t&1&&fe(0,X6,4,2)(1,lH,6,0,"div",38),t&2){let n=F(4);pe(n.density()==="ultra-compact"?0:1)}}function uH(t,e){if(t&1&&(z(0,"span"),Y(1),G()),t&2){let n=F(2).$implicit,i=F().$implicit;V(),Ue(i[n.code])}}function dH(t,e){if(t&1&&fe(0,cH,2,1)(1,uH,2,1,"span"),t&2){let n=F().$implicit;pe(n.cellTemplate?0:1)}}function fH(t,e){if(t&1&&(z(0,"td",27),fe(1,W6,1,1)(2,J6,6,6,"div",28)(3,Q6,3,4,"span")(4,dH,2,1),G()),t&2){let n,i=e.$implicit,r=e.$index,s=e.$count,a=F().$implicit,c=ar(0),u=F();Zt(u.densityClass()),mi("left",i.frozen?u.columnOffsets()[r]:null),Qe("font-bold",c)("!text-sm",c&&(u.density()==="compact"||u.density()==="ultra-compact"))("!text-base",c&&u.density()==="cozy")("!text-lg",c&&u.density()==="comfortable")("border-r",r===s-1||i.frozen||u.showGridlines())("sticky",i.frozen)("z-10",i.frozen)("bg-white",i.frozen&&!u.selectedIds().has(a.organization_id))("group-hover:bg-gray-100",i.frozen&&u.rowHover()&&!u.selectedIds().has(a.organization_id))("bg-transparent",c)("text-center",i.align==="center")("text-right",i.align==="right")("text-left",i.align!=="center"&&i.align!=="right"),V(),pe((n=i.columnType)==="CHECKBOX"?1:n==="ACTION"?2:n==="DATE"?3:4)}}function pH(t,e){if(t&1){let n=Pe();Fs(0),z(1,"tr",25),Ce("click",function(){let r=ee(n).$implicit,s=F();return te(s.onRowClick(r))})("contextmenu",function(r){let s=ee(n).$implicit,a=F();return te(a.onRowContextMenu(r,s))}),et(2,fH,5,31,"td",26,Zu),G()}if(t&2){let n=e.$implicit,i=e.$index,r=F(),s=da(r.selectedIds().has(n.organization_id)||r.keyboardActiveRowIndex()===i);V(),Qe("odd:bg-gray-50",r.stripedRows()&&!s)("hover:bg-gray-100",r.rowHover()&&!s)("z-10",s)("border-y-2",s)("border-y-indigo-400",s)("-my-px",s),Ye("id","table-item-"+n.organization_id),V(),tt(r.columns())}}function hH(t,e){if(t&1&&(z(0,"td",49),Y(1,"\xA0"),G()),t&2){let n=e.$index,i=e.$count,r=F(2);Zt(r.densityClass()),Qe("border-r",n===i-1||r.showGridlines())}}function mH(t,e){if(t&1&&(z(0,"tr",6),et(1,hH,2,4,"td",48,Zu),G()),t&2){let n=F();V(),tt(n.columns())}}function gH(t,e){if(t&1&&ke(0,"div",52),t&2){let n=F().$implicit,i=F();Ye("innerHTML",i[n.code],_r)}}function vH(t,e){t&1&&(z(0,"span"),Y(1,"\xA0"),G())}function yH(t,e){if(t&1&&(z(0,"td",51),fe(1,gH,1,1,"div",52)(2,vH,2,0,"span"),G()),t&2){let n=e.$implicit,i=e.$index,r=e.$count,s=F(),a=F();mi("left",n.frozen?a.columnOffsets()[i]:null),Qe("border-r",i===r-1||n.frozen||a.showGridlines())("sticky",n.frozen)("z-10",n.frozen)("bg-gray-100",n.frozen)("text-center",n.align==="center")("text-right",n.align==="right")("text-left",n.align!=="center"&&n.align!=="right"),V(),pe(s[n.code]?1:2)}}function _H(t,e){if(t&1&&(z(0,"tfoot",7)(1,"tr"),et(2,yH,3,17,"td",50,Zu),G()()),t&2){let n=F();V(2),tt(n.columns())}}var ov=class t{columns=Ee.required();data=Ee.required();sortColumn=Ee.required();sortDirection=Ee.required();density=Ee("cozy");densityClass=Ee("");rowMenuConfig=Ee.required();rowActions=Ee();headerMenuConfig=Ee();selectedIds=Ee(new Set);enableMultiSelect=Ee(!1);customTemplate=Ee(null);loading=Ee(!1);keyboardActiveRowIndex=Ee(null);pageSize=Ee(10);isInfiniteScroll=Ee(!1);activeFilters=Ee();stripedRows=Ee(!0);showGridlines=Ee(!1);rowHover=Ee(!0);footerConfig=Ee();sortChange=gt();rowAction=gt();headerAction=gt();selectionChange=gt();columnReorder=gt();rowClicked=gt();filterChange=gt();draggedColumnIndex=xe(null);dragOverIndex=xe(null);unmaskedCells=xe(new Set);openMenuRowId=xe(null);isHeaderMenuOpen=xe(!1);contextMenuPosition=xe(null);openFilterMenuForColumn=xe(null);isAllSelectedOnPage=ut(()=>{let e=this.data().map(n=>n.organization_id);return e.length===0?!1:e.every(n=>this.selectedIds().has(n))});emptyRows=ut(()=>{let e=this.pageSize(),n=this.data().length;if(this.isInfiniteScroll()||n>=e)return[];let i=e-n;return Array(i).fill(0)});columnOffsets=ut(()=>{let e=this.columns(),n=new Array(e.length).fill(null),i=0;for(let r=0;r<e.length;r++){let s=e[r];if(s.frozen){n[r]=`${i}px`;let a=s.width?parseInt(s.width,10):150;i+=a}}return n});footerData=ut(()=>{let e=this.footerConfig(),n=this.data();if(!e||!e.enabled||!e.columns||n.length===0)return null;let i={},r=n.length,s={};for(let a of e.columns)s[a.code]||(s[a.code]=[]),s[a.code].push(a);for(let a in s){let c=s[a],u=0,p=0;if(c.some(x=>x.aggregation==="sum"||x.aggregation==="avg"))for(let x of n){let E=Number(x[a]);isNaN(E)||(u+=E,p++)}let C=[];for(let x of c){let E=0;switch(x.aggregation){case"count":E=r;break;case"sum":E=u;break;case"avg":E=p>0?u/p:0;break}let A;x.aggregation==="sum"||x.aggregation==="avg"?A=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(E):A=new Intl.NumberFormat("en-US").format(E),C.push(x.display.replace("{value}",A))}i[a]=C.join("<br>")}return i});onSort(e){if(!this.columns().find(i=>i.code===e)?.sortable)return;let n="asc";this.sortColumn()===e&&this.sortDirection()==="asc"&&(n="desc"),this.sortChange.emit({column:e,direction:n})}onRowClick(e){this.rowClicked.emit(e)}handleApplyExcelFilter(e,n){e.sort&&this.sortChange.emit(e.sort),Object.prototype.hasOwnProperty.call(e,"filter")&&this.filterChange.emit({code:n,filter:e.filter??null}),this.closeFilterMenu()}toggleRowSelection(e){let n=new Set(this.selectedIds());n.has(e)?n.delete(e):n.add(e),this.selectionChange.emit(n)}toggleSelectAll(){let e=this.isAllSelectedOnPage(),n=new Set(this.selectedIds()),i=this.data().map(r=>r.organization_id);e?i.forEach(r=>n.delete(r)):i.forEach(r=>n.add(r)),this.selectionChange.emit(n)}onRowContextMenu(e,n){this.selectedIds().has(n.organization_id)||this.selectionChange.emit(new Set([n.organization_id])),e.preventDefault(),this.openMenuRowId.set(n.organization_id),this.contextMenuPosition.set({x:e.clientX,y:e.clientY})}toggleRowMenu(e,n){e.stopPropagation(),this.contextMenuPosition.set(null),this.openMenuRowId.update(i=>i===n?null:n)}openFilterMenu(e,n){n.stopPropagation(),this.openFilterMenuForColumn.set(e)}closeFilterMenu(){this.openFilterMenuForColumn.set(null)}closeRowMenu(){this.openMenuRowId.set(null),this.contextMenuPosition.set(null)}handleRowMenuAction(e){this.rowAction.emit(e),this.closeRowMenu()}handleHeaderMenuAction(e){this.headerAction.emit({action:e,selectedIds:Array.from(this.selectedIds())}),this.isHeaderMenuOpen.set(!1)}onDragStart(e){let n=this.columns()[e].columnType;n==="CHECKBOX"||n==="ACTION"||this.draggedColumnIndex.set(e)}onDragOver(e){e.preventDefault()}onDragEnter(e){this.draggedColumnIndex()!==null&&this.draggedColumnIndex()!==e&&this.dragOverIndex.set(e)}onDragLeave(){this.dragOverIndex.set(null)}onDrop(e,n){e.preventDefault();let i=this.draggedColumnIndex(),r=this.columns()[n];if(r.columnType==="CHECKBOX"||r.columnType==="ACTION"){this.draggedColumnIndex.set(null),this.dragOverIndex.set(null);return}if(i===null||i===n){this.draggedColumnIndex.set(null),this.dragOverIndex.set(null);return}let s=[...this.columns()],a=s.splice(i,1)[0];s.splice(n,0,a),this.columnReorder.emit(s),this.draggedColumnIndex.set(null),this.dragOverIndex.set(null)}onDragEnd(){this.draggedColumnIndex.set(null),this.dragOverIndex.set(null)}isUnmasked(e,n){let i=`${e}-${n}`;return this.unmaskedCells().has(i)}toggleMask(e,n){let i=`${e}-${n}`;this.unmaskedCells.update(r=>{let s=new Set(r);return s.has(i)?s.delete(i):s.add(i),s})}maskString(e,n){return Qu(e,{visibleStart:n.visibleStart,visibleEnd:n.visibleEnd,maskChar:n.maskChar})}getCellValidation(e,n){let i=Mc(e[n.code],n,n.code);if(!i.isValid)return i;if(n.validations)for(let r of n.validations){let s=Mc(e[r.code],n,r.code);if(!s.isValid)return s}return{isValid:!0,style:null}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-table-view"]],inputs:{columns:[1,"columns"],data:[1,"data"],sortColumn:[1,"sortColumn"],sortDirection:[1,"sortDirection"],density:[1,"density"],densityClass:[1,"densityClass"],rowMenuConfig:[1,"rowMenuConfig"],rowActions:[1,"rowActions"],headerMenuConfig:[1,"headerMenuConfig"],selectedIds:[1,"selectedIds"],enableMultiSelect:[1,"enableMultiSelect"],customTemplate:[1,"customTemplate"],loading:[1,"loading"],keyboardActiveRowIndex:[1,"keyboardActiveRowIndex"],pageSize:[1,"pageSize"],isInfiniteScroll:[1,"isInfiniteScroll"],activeFilters:[1,"activeFilters"],stripedRows:[1,"stripedRows"],showGridlines:[1,"showGridlines"],rowHover:[1,"rowHover"],footerConfig:[1,"footerConfig"]},outputs:{sortChange:"sortChange",rowAction:"rowAction",headerAction:"headerAction",selectionChange:"selectionChange",columnReorder:"columnReorder",rowClicked:"rowClicked",filterChange:"filterChange"},decls:12,vars:1,consts:[[1,"h-full","overflow-auto","border-x","border-b","border-gray-300"],[1,"min-w-full","border-collapse","bg-white"],[1,"sticky","top-0","z-20","bg-gray-100"],["scope","col",1,"p-2","border-b","border-t","border-l","border-gray-300","font-semibold","text-gray-600","transition-all","duration-150","relative","text-xs",3,"width","left","border-r","sticky","z-30","bg-gray-100","opacity-50"],[1,""],[1,"transition-colors","duration-150","cursor-pointer","relative","group","border-b","border-gray-200",3,"id","odd:bg-gray-50","hover:bg-gray-100","z-10","border-y-2","border-y-indigo-400","-my-px"],[1,"border-b","border-gray-200"],[1,"sticky","bottom-0","z-20","bg-gray-100"],["scope","col",1,"p-2","border-b","border-t","border-l","border-gray-300","font-semibold","text-gray-600","transition-all","duration-150","relative","text-xs",3,"dragover","drop","dragend"],[1,"flex","items-center","gap-2","p-1","rounded-md","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-1",3,"dragstart","click","keydown.enter","keydown.space","title"],["type","checkbox","title","Select all on page",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"checked"],[1,"relative","mx-auto"],[1,"flex","items-center"],[1,"relative"],["type","checkbox","title","Select all on page",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","click","checked"],["title","Bulk actions",1,"p-1","rounded-full","hover:bg-gray-200",3,"click","disabled"],[1,"pi","pi-ellipsis-v"],[3,"menuConfig"],[3,"actionClicked","clickOutside","menuConfig"],[1,"pi","ml-2","text-xs",3,"pi-sort-amount-up-alt","pi-sort-amount-down"],[1,"pi","ml-2","text-xs"],["title","Filter column",1,"p-1","rounded-full","hover:bg-gray-200",3,"click"],[1,"pi","pi-filter"],[3,"column","data","activeFilter"],[3,"apply","close","column","data","activeFilter"],[1,"transition-colors","duration-150","cursor-pointer","relative","group","border-b","border-gray-200",3,"click","contextmenu","id"],[1,"whitespace-nowrap","p-1.5","border-l","border-gray-200","transition-all","duration-150",3,"class","font-bold","!text-sm","!text-base","!text-lg","border-r","sticky","z-10","left","bg-white","group-hover:bg-gray-100","bg-transparent","text-center","text-right","text-left"],[1,"whitespace-nowrap","p-1.5","border-l","border-gray-200","transition-all","duration-150"],[1,"flex","justify-center","items-center","gap-1","relative"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"checked"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","click","checked"],[1,"flex","items-center","gap-1","transition-opacity","opacity-0","group-hover:opacity-100","focus-within:opacity-100"],["title","More actions",1,"p-1.5","rounded-full","transition-opacity","opacity-0","group-hover:opacity-100","focus-within:opacity-100","hover:bg-gray-200",3,"click"],[1,"pi","pi-ellipsis-v","text-xs"],[3,"menuConfig","row","position"],[1,"p-1.5","rounded-full",3,"class","title"],[1,"p-1.5","rounded-full",3,"click","title"],[3,"actionClicked","clickOutside","menuConfig","row","position"],[1,"flex","items-center","gap-2"],[1,"font-semibold","text-gray-800"],[1,"text-gray-500","ml-1"],["alt","Avatar",1,"h-6","w-6","object-cover","flex-shrink-0","rounded-full",3,"src"],[1,"h-6","w-6","bg-gray-200","flex","items-center","justify-center","flex-shrink-0","rounded-full"],[1,"text-xs","font-semibold","text-gray-500"],[1,"font-semibold","text-gray-800",3,"font-bold"],[1,"text-gray-500",3,"font-bold"],[3,"font-bold"],[1,"text-gray-500"],[1,"whitespace-nowrap","p-1.5","border-l","border-gray-200",3,"border-r","class"],[1,"whitespace-nowrap","p-1.5","border-l","border-gray-200"],[1,"p-2","border-t","border-l","border-gray-300","font-semibold","text-gray-700","text-xs",3,"left","border-r","sticky","z-10","bg-gray-100","text-center","text-right","text-left"],[1,"p-2","border-t","border-l","border-gray-300","font-semibold","text-gray-700","text-xs"],[3,"innerHTML"]],template:function(n,i){if(n&1&&(z(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),et(4,$6,6,29,"th",3,Zu),G()(),z(6,"tbody",4),et(7,pH,4,14,"tr",5,P6),et(9,mH,3,0,"tr",6,ua),G(),fe(11,_H,4,0,"tfoot",7),G()()),n&2){let r;V(4),tt(i.columns()),V(3),tt(i.data()),V(2),tt(i.emptyRows()),V(2),pe((r=((r=i.footerConfig())==null?null:r.enabled)&&i.footerData())?11:-1,r)}},dependencies:[Ft,Xu,iv,ko,rv,Tc],encapsulation:2,changeDetection:0})};var ed=class t{template=Ee.required();data=Ee.required();sanitizer=he(Mp);sanitizedHtml=ut(()=>{let e=this.template(),n=this.data();return!e||!n?this.sanitizer.bypassSecurityTrustHtml(""):(e=e.replace(/\{\{(.*?)\}\}/g,(i,r)=>{let s=r.trim(),a=n[s];return a!=null?String(a):""}),this.sanitizer.bypassSecurityTrustHtml(e))});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-dynamic-item"]],inputs:{template:[1,"template"],data:[1,"data"]},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(n,i){n&1&&ot(0,"div",0),n&2&&Ot("innerHTML",i.sanitizedHtml(),_r)},encapsulation:2,changeDetection:0})};var CH=(t,e)=>e.organization_id,xH=(t,e)=>e.code,bH=(t,e)=>e.action;function wH(t,e){if(t&1){let n=Pe();z(0,"div",3),Ce("click",function(){ee(n);let r=F().$implicit,s=F();return te(s.onCardClick(r))})("contextmenu",function(r){ee(n);let s=F().$implicit,a=F();return te(a.onCardContextMenu(r,s))}),ke(1,"app-dynamic-item",4),G()}if(t&2){let n=F(),i=n.$implicit,r=n.$index,s=F();Qe("cursor-pointer",s.enableMultiSelect())("border-transparent",!s.selectedIds().has(i.organization_id))("border-indigo-500",s.selectedIds().has(i.organization_id))("ring-2",s.selectedIds().has(i.organization_id)||s.keyboardActiveRowIndex()===r)("ring-indigo-500",s.selectedIds().has(i.organization_id)||s.keyboardActiveRowIndex()===r),Ye("id","card-item-"+i.organization_id),V(),Ye("template",e)("data",i)}}function EH(t,e){if(t&1&&ke(0,"img",17),t&2){let n=F(2).$implicit,i=F();Qe("h-10",i.density()!=="compact")("w-10",i.density()!=="compact")("h-9",i.density()==="compact")("w-9",i.density()==="compact"),Ye("src",n.avatar_url,no)}}function SH(t,e){if(t&1&&(z(0,"div",18)(1,"span",19),Y(2),G()()),t&2){let n=F(2).$implicit,i=F();Qe("h-10",i.density()!=="compact")("w-10",i.density()!=="compact")("h-9",i.density()==="compact")("w-9",i.density()==="compact"),V(),Qe("text-base",i.density()!=="compact")("text-sm",i.density()==="compact"),V(),Ue((n.contact_person==null?null:n.contact_person[0])||"A")}}function DH(t,e){if(t&1){let n=Pe();z(0,"app-row-menu",23),Ce("actionClicked",function(r){ee(n);let s=F(4);return te(s.handleRowMenuAction(r))})("clickOutside",function(){ee(n);let r=F(4);return te(r.closeRowMenu())}),G()}if(t&2){let n=F(3).$implicit,i=F();Ye("menuConfig",i.rowMenuConfig())("row",n)("position",i.contextMenuPosition())}}function TH(t,e){if(t&1){let n=Pe();z(0,"div",13)(1,"button",20),Ce("click",function(r){ee(n);let s=F(2).$implicit,a=F();return te(a.toggleRowMenu(r,s.organization_id))}),ke(2,"i",21),G(),fe(3,DH,1,3,"app-row-menu",22),G()}if(t&2){let n=F(2).$implicit,i=F();V(3),pe(i.openMenuRowId()===n.organization_id?3:-1)}}function IH(t,e){if(t&1&&Y(0),t&2){let n=F().$implicit,i=F(2).$implicit,r=F();tn(" ",r.maskString(i[n.code],n.mask)," ")}}function AH(t,e){if(t&1&&Y(0),t&2){let n=F().$implicit,i=F(2).$implicit;tn(" ",i[n.code]||"N/A"," ")}}function MH(t,e){if(t&1&&(z(0,"div",24)(1,"dt",25),Y(2),G(),z(3,"dd",26),fe(4,IH,1,1)(5,AH,1,1),G()()),t&2){let n=e.$implicit,i=F(2).$implicit,r=F(),s=r.getFieldValidationState(i,n);Zt(r.densityClass()),mi("background-color",s.isValid||s.style==null?null:s.style.bgcolor),Ye("title",s.isValid?"":s.style==null?null:s.style.tooltip),V(2),Ue(n.name),V(2),pe(n.mask!=null&&n.mask.enabled?4:5)}}function kH(t,e){if(t&1){let n=Pe();z(0,"button",30),Ce("click",function(r){let s=ee(n).$implicit,a=F(4).$implicit,c=F();return r.stopPropagation(),te(c.rowAction.emit({action:s.action,row:a}))}),ke(1,"i"),G()}if(t&2){let n=e.$implicit;Zt(n.color),Ye("title",n.label),V(),Zt(n.icon)}}function NH(t,e){t&1&&et(0,kH,2,5,"button",29,bH),t&2&&tt(e)}function FH(t,e){if(t&1&&(z(0,"footer",27)(1,"div",28),fe(2,NH,2,0),G()()),t&2){let n,i=F(3);Qe("p-2",i.density()!=="compact")("p-1",i.density()==="compact"),V(2),pe((n=i.rowActions())?2:-1,n)}}function RH(t,e){if(t&1){let n=Pe();z(0,"div",5),Ce("contextmenu",function(r){ee(n);let s=F().$implicit,a=F();return te(a.onCardContextMenu(r,s))}),z(1,"header",6)(2,"div",7),fe(3,EH,1,9,"img",8)(4,SH,3,13,"div",9),z(5,"div",10)(6,"h3",11),Y(7),G(),z(8,"p",12),Y(9),G()()(),fe(10,TH,4,1,"div",13),G(),z(11,"div",14),Ce("click",function(){ee(n);let r=F().$implicit,s=F();return te(s.handleCardBodyClick(r))}),z(12,"dl"),et(13,MH,6,7,"div",15,xH),G()(),fe(15,FH,3,5,"footer",16),G()}if(t&2){let n=F(),i=n.$implicit,r=n.$index,s=F();Qe("border-gray-200",!s.selectedIds().has(i.organization_id))("hover:shadow-xl",!s.selectedIds().has(i.organization_id))("bg-slate-50",s.selectedIds().has(i.organization_id))("border-slate-500",s.selectedIds().has(i.organization_id))("ring-2",s.keyboardActiveRowIndex()===r)("ring-offset-2",s.keyboardActiveRowIndex()===r)("ring-slate-500",s.keyboardActiveRowIndex()===r),Ye("id","card-item-"+i.organization_id),V(),Qe("p-4",s.density()!=="compact")("p-3",s.density()==="compact"),V(2),pe(i.avatar_url?3:4),V(3),Qe("text-base",s.density()==="comfortable")("text-sm",s.density()==="cozy"||s.density()==="compact"),V(),Ue(i.contact_person),V(),Zt(s.densityClass()),V(),tn(" ",i.organization_name||"N/A"," "),V(),pe(s.rowMenuConfig()?10:-1),V(),Qe("p-4",s.density()!=="compact")("p-3",s.density()==="compact"),V(),Qe("space-y-3",s.density()==="comfortable")("space-y-2",s.density()!=="comfortable"),V(),tt(s.cardRowColumns()),V(2),pe(s.rowActions()&&s.rowActions().length>0?15:-1)}}function PH(t,e){if(t&1&&fe(0,wH,2,13,"div",1)(1,RH,16,38,"div",2),t&2){let n,i=F();pe((n=i.customTemplate())?0:1,n)}}var sv=class t{columns=Ee.required();data=Ee.required();density=Ee("cozy");densityClass=Ee("");selectedIds=Ee(new Set);enableMultiSelect=Ee(!1);rowMenuConfig=Ee();rowActions=Ee();cardViewConfig=Ee();customTemplate=Ee(null);keyboardActiveRowIndex=Ee(null);selectionChange=gt();rowAction=gt();rowClicked=gt();openMenuRowId=xe(null);contextMenuPosition=xe(null);cardHeaderColumn=ut(()=>this.columns().find(e=>e.cardHeader));cardHeader1Column=ut(()=>this.columns().find(e=>e.cardHeader1));cardRowColumns=ut(()=>this.columns().filter(e=>e.cardRow));imageColumn=ut(()=>this.columns().find(e=>e.columnType==="IMAGE"));gridClasses=ut(()=>{switch(Number(this.cardViewConfig()?.cardsPerRow??4)){case 1:return"grid-cols-1";case 2:return"grid-cols-2 sm:grid-cols-1";case 3:return"grid-cols-3 md:grid-cols-2 sm:grid-cols-1";case 4:return"grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1";case 5:return"grid-cols-5 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1";case 6:return"grid-cols-6 xxl:grid-cols-5 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1";default:return"grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1"}});onCardClick(e){this.rowClicked.emit(e)}onCardContextMenu(e,n){e.preventDefault(),this.openMenuRowId.set(n.organization_id),this.contextMenuPosition.set({x:e.clientX,y:e.clientY})}handleCardBodyClick(e){this.rowClicked.emit(e),this.enableMultiSelect()&&this.toggleSelection(e.organization_id)}toggleSelection(e){if(!this.enableMultiSelect())return;let n=new Set(this.selectedIds());n.has(e)?n.delete(e):n.add(e),this.selectionChange.emit(n)}getFieldValidationState(e,n){return Mc(e[n.code],n,n.code)}maskString(e,n){return Qu(e,{visibleStart:n.visibleStart,visibleEnd:n.visibleEnd,maskChar:n.maskChar})}formatPhoneNumber(e){return e?e.replace(/\D/g,""):""}toggleRowMenu(e,n){if(e.stopPropagation(),this.openMenuRowId()===n){this.openMenuRowId.set(null),this.contextMenuPosition.set(null);return}let r=e.currentTarget.getBoundingClientRect(),a=r.right-224;a<0&&(a=r.left);let c=r.bottom+4;this.contextMenuPosition.set({x:a,y:c}),this.openMenuRowId.set(n)}closeRowMenu(){this.openMenuRowId.set(null),this.contextMenuPosition.set(null)}handleRowMenuAction(e){this.rowAction.emit(e),this.closeRowMenu()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-card-view"]],inputs:{columns:[1,"columns"],data:[1,"data"],density:[1,"density"],densityClass:[1,"densityClass"],selectedIds:[1,"selectedIds"],enableMultiSelect:[1,"enableMultiSelect"],rowMenuConfig:[1,"rowMenuConfig"],rowActions:[1,"rowActions"],cardViewConfig:[1,"cardViewConfig"],customTemplate:[1,"customTemplate"],keyboardActiveRowIndex:[1,"keyboardActiveRowIndex"]},outputs:{selectionChange:"selectionChange",rowAction:"rowAction",rowClicked:"rowClicked"},decls:3,vars:8,consts:[[1,"grid"],[1,"border-2","rounded-lg","transition-all","duration-200","h-full",3,"id","cursor-pointer","border-transparent","border-indigo-500","ring-2","ring-indigo-500"],[1,"border","rounded-lg","bg-white","overflow-hidden","transition-all","duration-200","flex","flex-col","relative","group",3,"id","border-gray-200","hover:shadow-xl","bg-slate-50","border-slate-500","ring-2","ring-offset-2","ring-slate-500"],[1,"border-2","rounded-lg","transition-all","duration-200","h-full",3,"click","contextmenu","id"],[3,"template","data"],[1,"border","rounded-lg","bg-white","overflow-hidden","transition-all","duration-200","flex","flex-col","relative","group",3,"contextmenu","id"],[1,"flex","justify-between","items-start","gap-4","border-b","border-gray-200","bg-gray-50"],[1,"flex","items-center","gap-4","min-w-0"],["alt","Avatar",1,"rounded-full","object-cover","flex-shrink-0",3,"src","h-10","w-10","h-9","w-9"],[1,"bg-gray-200","flex","items-center","justify-center","rounded-full","object-cover","flex-shrink-0",3,"h-10","w-10","h-9","w-9"],[1,"min-w-0"],[1,"font-bold","text-gray-900","truncate"],[1,"text-gray-600","truncate"],[1,"relative","flex-shrink-0"],[1,"flex-grow","cursor-pointer",3,"click"],[1,"grid","grid-cols-3","gap-2","p-1","-m-1","rounded-md","transition-colors","duration-150",3,"class","background-color","title"],[1,"border-t","border-gray-200","bg-gray-50","flex","items-center","justify-start",3,"p-2","p-1"],["alt","Avatar",1,"rounded-full","object-cover","flex-shrink-0",3,"src"],[1,"bg-gray-200","flex","items-center","justify-center","rounded-full","object-cover","flex-shrink-0"],[1,"font-semibold","text-gray-500"],["title","More actions",1,"p-1","rounded-full","text-gray-500","hover:text-gray-700","hover:bg-gray-200",3,"click"],[1,"pi","pi-ellipsis-v"],[3,"menuConfig","row","position"],[3,"actionClicked","clickOutside","menuConfig","row","position"],[1,"grid","grid-cols-3","gap-2","p-1","-m-1","rounded-md","transition-colors","duration-150",3,"title"],[1,"text-gray-500","font-medium","col-span-1"],[1,"text-gray-800","truncate","col-span-2"],[1,"border-t","border-gray-200","bg-gray-50","flex","items-center","justify-start"],[1,"flex","items-center","gap-1"],[1,"p-1.5","rounded-full","text-sm","hover:bg-gray-200",3,"class","title"],[1,"p-1.5","rounded-full","text-sm","hover:bg-gray-200",3,"click","title"]],template:function(n,i){n&1&&(z(0,"div",0),et(1,PH,2,1,null,null,CH),G()),n&2&&(Zt(i.gridClasses()),Qe("gap-6",i.density()==="comfortable")("gap-4",i.density()==="cozy")("gap-3",i.density()==="compact"),V(),tt(i.data()))},dependencies:[Ft,Xu,ko,ed],encapsulation:2,changeDetection:0})};var LH=(t,e)=>e.organization_id;function OH(t,e){if(t&1&&(z(0,"div",6),ke(1,"app-dynamic-item",7),G()),t&2){let n=F().$implicit,i=F();Qe("border-transparent",!i.selectedIds().has(n.organization_id))("border-indigo-500",i.selectedIds().has(n.organization_id)),V(),Ye("template",e)("data",n)}}function VH(t,e){if(t&1&&ke(0,"img",18),t&2){let n=F(),i=F(2).$implicit,r=F();Qe("h-10",r.density()!=="compact")("w-10",r.density()!=="compact")("mr-4",r.density()!=="compact")("h-8",r.density()==="compact")("w-8",r.density()==="compact")("mr-3",r.density()==="compact"),Ye("src",i[n.code],no)}}function BH(t,e){if(t&1&&(z(0,"div",19)(1,"span",20),Y(2),G()()),t&2){let n=F(3).$implicit,i=F();Qe("h-10",i.density()!=="compact")("w-10",i.density()!=="compact")("mr-4",i.density()!=="compact")("h-8",i.density()==="compact")("w-8",i.density()==="compact")("mr-3",i.density()==="compact"),V(),Qe("text-sm",i.density()!=="compact")("text-xs",i.density()==="compact"),V(),Ue((n.contact_person==null?null:n.contact_person[0])||"A")}}function HH(t,e){if(t&1&&fe(0,VH,1,13,"img",16)(1,BH,3,17,"div",17),t&2){let n=F(2).$implicit;pe(n[e.code]?0:1)}}function UH(t,e){if(t&1&&(z(0,"p",21),Y(1),G()),t&2){let n=F(2).$implicit,i=F();Qe("text-md",i.density()==="comfortable")("text-sm",i.density()==="cozy")("text-xs",i.density()==="compact"||i.density()==="ultra-compact"),V(),Ue(n[e.code])}}function zH(t,e){if(t&1&&Y(0),t&2){F();let n=ar(0),i=F(2).$implicit,r=F();tn(" ",r.maskString(i[n.code],n.mask)," ")}}function GH(t,e){if(t&1&&Y(0),t&2){F();let n=ar(0),i=F(2).$implicit;tn(" ",i[n.code]||"N/A"," ")}}function $H(t,e){if(t&1&&(Fs(0),z(1,"p",22),fe(2,zH,1,1)(3,GH,1,1),G()),t&2){let n=F(2).$implicit,i=F(),r=da(i.rowColumns()[0]),s=i.getFieldValidationState(n,r);V(),mi("background-color",s.isValid||s.style==null?null:s.style.bgcolor),Ye("title",s.isValid?"":s.style==null?null:s.style.tooltip),V(),pe(r.mask!=null&&r.mask.enabled?2:3)}}function qH(t,e){if(t&1&&Y(0),t&2){F();let n=ar(0),i=F(2).$implicit,r=F();tn(" ",r.maskString(i[n.code],n.mask)," ")}}function WH(t,e){if(t&1&&Y(0),t&2){F();let n=ar(0),i=F(2).$implicit;tn(" ",i[n.code]||"N/A"," ")}}function jH(t,e){if(t&1&&(Fs(0),z(1,"span",23),fe(2,qH,1,1)(3,WH,1,1),G()),t&2){let n=F(2).$implicit,i=F(),r=da(i.rowColumns()[1]),s=i.getFieldValidationState(n,r);V(),Zt(i.densityClass()),mi("background-color",s.isValid||s.style==null?null:s.style.bgcolor),Ye("title",s.isValid?"":s.style==null?null:s.style.tooltip),V(),pe(r.mask!=null&&r.mask.enabled?2:3)}}function KH(t,e){if(t&1){let n=Pe();z(0,"div",8),fe(1,HH,2,1),z(2,"div",9),fe(3,UH,2,7,"p",10),fe(4,$H,4,5,"p",11),G(),z(5,"div",12),fe(6,jH,4,7,"span",13),G(),z(7,"button",14),Ce("click",function(r){return ee(n),te(r.stopPropagation())}),ke(8,"i",15),G()()}if(t&2){let n,i,r=F(2);Qe("p-4",r.density()==="comfortable")("p-3",r.density()==="cozy")("p-2",r.density()==="compact")("p-1",r.density()==="ultra-compact"),V(),pe((n=r.density()!=="ultra-compact"&&r.imageColumn())?1:-1,n),V(),Zt(r.densityClass()),V(),pe((i=r.headerColumn())?3:-1,i),V(),pe(r.rowColumns().length>0?4:-1),V(),Qe("ml-4",r.density()!=="compact")("ml-2",r.density()==="compact"),V(),pe(r.rowColumns().length>1?6:-1),V(),Qe("ml-4",r.density()!=="compact")("ml-2",r.density()==="compact")}}function YH(t,e){if(t&1){let n=Pe();z(0,"li",3),Ce("click",function(){let r=ee(n).$implicit,s=F();return te(s.onItemClick(r))}),fe(1,OH,2,6,"div",4)(2,KH,9,22,"div",5),G()}if(t&2){let n,i=e.$implicit,r=e.$index,s=F();Qe("cursor-pointer",!0)("hover:bg-gray-200/50",!s.selectedIds().has(i.organization_id))("bg-slate-50",s.selectedIds().has(i.organization_id))("ring-2",s.keyboardActiveRowIndex()===r)("ring-offset-2",s.keyboardActiveRowIndex()===r)("ring-slate-500",s.keyboardActiveRowIndex()===r),Ye("id","list-item-"+i.organization_id),V(),pe((n=s.customTemplate())?1:2,n)}}var av=class t{columns=Ee.required();data=Ee.required();density=Ee("cozy");densityClass=Ee("");selectedIds=Ee(new Set);enableMultiSelect=Ee(!1);customTemplate=Ee(null);keyboardActiveRowIndex=Ee(null);selectionChange=gt();rowClicked=gt();headerColumn=ut(()=>this.columns().find(e=>e.cardHeader));rowColumns=ut(()=>this.columns().filter(e=>e.listRow));imageColumn=ut(()=>this.columns().find(e=>e.columnType==="IMAGE"));onItemClick(e){this.rowClicked.emit(e),this.enableMultiSelect()&&this.toggleSelection(e.organization_id)}toggleSelection(e){if(!this.enableMultiSelect())return;let n=new Set(this.selectedIds());n.has(e)?n.delete(e):n.add(e),this.selectionChange.emit(n)}getFieldValidationState(e,n){return Mc(e[n.code],n,n.code)}maskString(e,n){return Qu(e,{visibleStart:n.visibleStart,visibleEnd:n.visibleEnd,maskChar:n.maskChar})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-list-view"]],inputs:{columns:[1,"columns"],data:[1,"data"],density:[1,"density"],densityClass:[1,"densityClass"],selectedIds:[1,"selectedIds"],enableMultiSelect:[1,"enableMultiSelect"],customTemplate:[1,"customTemplate"],keyboardActiveRowIndex:[1,"keyboardActiveRowIndex"]},outputs:{selectionChange:"selectionChange",rowClicked:"rowClicked"},decls:4,vars:0,consts:[[1,"border","border-gray-200","rounded-lg"],[1,"divide-y","divide-gray-200"],[1,"transition-colors","duration-150","relative",3,"id","cursor-pointer","hover:bg-gray-200/50","bg-slate-50","ring-2","ring-offset-2","ring-slate-500"],[1,"transition-colors","duration-150","relative",3,"click","id"],[1,"border-2","rounded-lg",3,"border-transparent","border-indigo-500"],[1,"flex","items-center","justify-between",3,"p-4","p-3","p-2","p-1"],[1,"border-2","rounded-lg"],[3,"template","data"],[1,"flex","items-center","justify-between"],[1,"flex-1","min-w-0"],[1,"font-semibold","text-indigo-600","truncate",3,"text-md","text-sm","text-xs"],[1,"text-gray-500","truncate","p-1","-ml-1","rounded-md",3,"background-color","title"],[1,"inline-flex","items-center","text-base","font-semibold","text-gray-900"],[1,"text-gray-600","p-1","rounded-md",3,"class","background-color","title"],["title","View Details",1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"pi","pi-chevron-right"],["alt","Avatar",1,"rounded-full","object-cover","flex-shrink-0",3,"src","h-10","w-10","mr-4","h-8","w-8","mr-3"],[1,"bg-gray-200","flex","items-center","justify-center","rounded-full","object-cover","flex-shrink-0",3,"h-10","w-10","mr-4","h-8","w-8","mr-3"],["alt","Avatar",1,"rounded-full","object-cover","flex-shrink-0",3,"src"],[1,"bg-gray-200","flex","items-center","justify-center","rounded-full","object-cover","flex-shrink-0"],[1,"font-semibold","text-gray-500"],[1,"font-semibold","text-indigo-600","truncate"],[1,"text-gray-500","truncate","p-1","-ml-1","rounded-md",3,"title"],[1,"text-gray-600","p-1","rounded-md",3,"title"]],template:function(n,i){n&1&&(z(0,"div",0)(1,"ul",1),et(2,YH,3,14,"li",2,LH),G()()),n&2&&(V(2),tt(i.data()))},dependencies:[Ft,ed],encapsulation:2,changeDetection:0})};function kc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $b(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lv(t){let e,n,i;t.length!==2?(e=kc,n=(c,u)=>kc(t(c),u),i=(c,u)=>t(c)-u):(e=t===kc||t===$b?t:JH,n=t,i=t);function r(c,u,p=0,m=c.length){if(p<m){if(e(u,u)!==0)return m;do{let C=p+m>>>1;n(c[C],u)<0?p=C+1:m=C}while(p<m)}return p}function s(c,u,p=0,m=c.length){if(p<m){if(e(u,u)!==0)return m;do{let C=p+m>>>1;n(c[C],u)<=0?p=C+1:m=C}while(p<m)}return p}function a(c,u,p=0,m=c.length){let C=r(c,u,p,m-1);return C>p&&i(c[C-1],u)>-i(c[C],u)?C-1:C}return{left:r,center:a,right:s}}function JH(){return 0}function qb(t){return t===null?NaN:+t}var Rk=lv(kc),Pk=Rk.right,QH=Rk.left,XH=lv(qb).center,Wb=Pk;var td=class extends Map{constructor(e,n=t7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(let[i,r]of e)this.set(i,r)}get(e){return super.get(Lk(this,e))}has(e){return super.has(Lk(this,e))}set(e,n){return super.set(ZH(this,e),n)}delete(e){return super.delete(e7(this,e))}};function Lk({_intern:t,_key:e},n){let i=e(n);return t.has(i)?t.get(i):n}function ZH({_intern:t,_key:e},n){let i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function e7({_intern:t,_key:e},n){let i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function t7(t){return t!==null&&typeof t=="object"?t.valueOf():t}var n7=Math.sqrt(50),i7=Math.sqrt(10),r7=Math.sqrt(2);function cv(t,e,n){let i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=n7?10:s>=i7?5:s>=r7?2:1,c,u,p;return r<0?(p=Math.pow(10,-r)/a,c=Math.round(t*p),u=Math.round(e*p),c/p<t&&++c,u/p>e&&--u,p=-p):(p=Math.pow(10,r)*a,c=Math.round(t/p),u=Math.round(e/p),c*p<t&&++c,u*p>e&&--u),u<c&&.5<=n&&n<2?cv(t,e,n*2):[c,u,p]}function uv(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];let i=e<t,[r,s,a]=i?cv(e,t,n):cv(t,e,n);if(!(s>=r))return[];let c=s-r+1,u=new Array(c);if(i)if(a<0)for(let p=0;p<c;++p)u[p]=(s-p)/-a;else for(let p=0;p<c;++p)u[p]=(s-p)*a;else if(a<0)for(let p=0;p<c;++p)u[p]=(r+p)/-a;else for(let p=0;p<c;++p)u[p]=(r+p)*a;return u}function Pp(t,e,n){return e=+e,t=+t,n=+n,cv(t,e,n)[2]}function jb(t,e,n){e=+e,t=+t,n=+n;let i=e<t,r=i?Pp(e,t,n):Pp(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function dv(t,e){let n;if(e===void 0)for(let i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function fv(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function Ok(t){return t}var Kb=1,Yb=2,Jb=3,Lp=4,Vk=1e-6;function o7(t){return"translate("+t+",0)"}function s7(t){return"translate(0,"+t+")"}function a7(t){return e=>+t(e)}function l7(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function c7(){return!this.__axis}function Bk(t,e){var n=[],i=null,r=null,s=6,a=6,c=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,p=t===Kb||t===Lp?-1:1,m=t===Lp||t===Yb?"x":"y",C=t===Kb||t===Jb?o7:s7;function x(E){var A=i??(e.ticks?e.ticks.apply(e,n):e.domain()),N=r??(e.tickFormat?e.tickFormat.apply(e,n):Ok),R=Math.max(s,0)+c,k=e.range(),B=+k[0]+u,$=+k[k.length-1]+u,q=(e.bandwidth?l7:a7)(e.copy(),u),X=E.selection?E.selection():E,ie=X.selectAll(".domain").data([null]),me=X.selectAll(".tick").data(A,e).order(),ye=me.exit(),ge=me.enter().append("g").attr("class","tick"),Te=me.select("line"),j=me.select("text");ie=ie.merge(ie.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),me=me.merge(ge),Te=Te.merge(ge.append("line").attr("stroke","currentColor").attr(m+"2",p*s)),j=j.merge(ge.append("text").attr("fill","currentColor").attr(m,p*R).attr("dy",t===Kb?"0em":t===Jb?"0.71em":"0.32em")),E!==X&&(ie=ie.transition(E),me=me.transition(E),Te=Te.transition(E),j=j.transition(E),ye=ye.transition(E).attr("opacity",Vk).attr("transform",function(le){return isFinite(le=q(le))?C(le+u):this.getAttribute("transform")}),ge.attr("opacity",Vk).attr("transform",function(le){var H=this.parentNode.__axis;return C((H&&isFinite(H=H(le))?H:q(le))+u)})),ye.remove(),ie.attr("d",t===Lp||t===Yb?a?"M"+p*a+","+B+"H"+u+"V"+$+"H"+p*a:"M"+u+","+B+"V"+$:a?"M"+B+","+p*a+"V"+u+"H"+$+"V"+p*a:"M"+B+","+u+"H"+$),me.attr("opacity",1).attr("transform",function(le){return C(q(le)+u)}),Te.attr(m+"2",p*s),j.attr(m,p*R).text(N),X.filter(c7).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Yb?"start":t===Lp?"end":"middle"),X.each(function(){this.__axis=q})}return x.scale=function(E){return arguments.length?(e=E,x):e},x.ticks=function(){return n=Array.from(arguments),x},x.tickArguments=function(E){return arguments.length?(n=E==null?[]:Array.from(E),x):n.slice()},x.tickValues=function(E){return arguments.length?(i=E==null?null:Array.from(E),x):i&&i.slice()},x.tickFormat=function(E){return arguments.length?(r=E,x):r},x.tickSize=function(E){return arguments.length?(s=a=+E,x):s},x.tickSizeInner=function(E){return arguments.length?(s=+E,x):s},x.tickSizeOuter=function(E){return arguments.length?(a=+E,x):a},x.tickPadding=function(E){return arguments.length?(c=+E,x):c},x.offset=function(E){return arguments.length?(u=+E,x):u},x}function Qb(t){return Bk(Jb,t)}function Xb(t){return Bk(Lp,t)}var u7={value:()=>{}};function Uk(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new pv(n)}function pv(t){this._=t}function d7(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}pv.prototype=Uk.prototype={constructor:pv,on:function(t,e){var n=this._,i=d7(t+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(t=i[s]).type)&&(r=f7(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(r=(t=i[s]).type)n[r]=Hk(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Hk(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new pv(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function f7(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Hk(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=u7,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Zb=Uk;var hv="http://www.w3.org/1999/xhtml",ew={svg:"http://www.w3.org/2000/svg",xhtml:hv,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function va(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ew.hasOwnProperty(e)?{space:ew[e],local:t}:t}function p7(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hv&&e.documentElement.namespaceURI===hv?e.createElement(t):e.createElementNS(n,t)}}function h7(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function mv(t){var e=va(t);return(e.local?h7:p7)(e)}function m7(){}function Nc(t){return t==null?m7:function(){return this.querySelector(t)}}function zk(t){typeof t!="function"&&(t=Nc(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,c=i[r]=new Array(a),u,p,m=0;m<a;++m)(u=s[m])&&(p=t.call(u,u.__data__,m,s))&&("__data__"in u&&(p.__data__=u.__data__),c[m]=p);return new ri(i,this._parents)}function tw(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function g7(){return[]}function Op(t){return t==null?g7:function(){return this.querySelectorAll(t)}}function v7(t){return function(){return tw(t.apply(this,arguments))}}function Gk(t){typeof t=="function"?t=v7(t):t=Op(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a=e[s],c=a.length,u,p=0;p<c;++p)(u=a[p])&&(i.push(t.call(u,u.__data__,p,a)),r.push(u));return new ri(i,r)}function Vp(t){return function(){return this.matches(t)}}function gv(t){return function(e){return e.matches(t)}}var y7=Array.prototype.find;function _7(t){return function(){return y7.call(this.children,t)}}function C7(){return this.firstElementChild}function $k(t){return this.select(t==null?C7:_7(typeof t=="function"?t:gv(t)))}var x7=Array.prototype.filter;function b7(){return Array.from(this.children)}function w7(t){return function(){return x7.call(this.children,t)}}function qk(t){return this.selectAll(t==null?b7:w7(typeof t=="function"?t:gv(t)))}function Wk(t){typeof t!="function"&&(t=Vp(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,c=i[r]=[],u,p=0;p<a;++p)(u=s[p])&&t.call(u,u.__data__,p,s)&&c.push(u);return new ri(i,this._parents)}function vv(t){return new Array(t.length)}function jk(){return new ri(this._enter||this._groups.map(vv),this._parents)}function Bp(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Bp.prototype={constructor:Bp,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Kk(t){return function(){return t}}function E7(t,e,n,i,r,s){for(var a=0,c,u=e.length,p=s.length;a<p;++a)(c=e[a])?(c.__data__=s[a],i[a]=c):n[a]=new Bp(t,s[a]);for(;a<u;++a)(c=e[a])&&(r[a]=c)}function S7(t,e,n,i,r,s,a){var c,u,p=new Map,m=e.length,C=s.length,x=new Array(m),E;for(c=0;c<m;++c)(u=e[c])&&(x[c]=E=a.call(u,u.__data__,c,e)+"",p.has(E)?r[c]=u:p.set(E,u));for(c=0;c<C;++c)E=a.call(t,s[c],c,s)+"",(u=p.get(E))?(i[c]=u,u.__data__=s[c],p.delete(E)):n[c]=new Bp(t,s[c]);for(c=0;c<m;++c)(u=e[c])&&p.get(x[c])===u&&(r[c]=u)}function D7(t){return t.__data__}function Yk(t,e){if(!arguments.length)return Array.from(this,D7);var n=e?S7:E7,i=this._parents,r=this._groups;typeof t!="function"&&(t=Kk(t));for(var s=r.length,a=new Array(s),c=new Array(s),u=new Array(s),p=0;p<s;++p){var m=i[p],C=r[p],x=C.length,E=T7(t.call(m,m&&m.__data__,p,i)),A=E.length,N=c[p]=new Array(A),R=a[p]=new Array(A),k=u[p]=new Array(x);n(m,C,N,R,k,E,e);for(var B=0,$=0,q,X;B<A;++B)if(q=N[B]){for(B>=$&&($=B+1);!(X=R[$])&&++$<A;);q._next=X||null}}return a=new ri(a,i),a._enter=c,a._exit=u,a}function T7(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Jk(){return new ri(this._exit||this._groups.map(vv),this._parents)}function Qk(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function Xk(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),c=new Array(r),u=0;u<a;++u)for(var p=n[u],m=i[u],C=p.length,x=c[u]=new Array(C),E,A=0;A<C;++A)(E=p[A]||m[A])&&(x[A]=E);for(;u<r;++u)c[u]=n[u];return new ri(c,this._parents)}function Zk(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function eN(t){t||(t=I7);function e(C,x){return C&&x?t(C.__data__,x.__data__):!C-!x}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],c=a.length,u=r[s]=new Array(c),p,m=0;m<c;++m)(p=a[m])&&(u[m]=p);u.sort(e)}return new ri(r,this._parents).order()}function I7(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function tN(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function nN(){return Array.from(this)}function iN(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function rN(){let t=0;for(let e of this)++t;return t}function oN(){return!this.node()}function sN(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,a=r.length,c;s<a;++s)(c=r[s])&&t.call(c,c.__data__,s,r);return this}function A7(t){return function(){this.removeAttribute(t)}}function M7(t){return function(){this.removeAttributeNS(t.space,t.local)}}function k7(t,e){return function(){this.setAttribute(t,e)}}function N7(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function F7(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function R7(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function aN(t,e){var n=va(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?M7:A7:typeof e=="function"?n.local?R7:F7:n.local?N7:k7)(n,e))}function yv(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function P7(t){return function(){this.style.removeProperty(t)}}function L7(t,e,n){return function(){this.style.setProperty(t,e,n)}}function O7(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function lN(t,e,n){return arguments.length>1?this.each((e==null?P7:typeof e=="function"?O7:L7)(t,e,n??"")):dl(this.node(),t)}function dl(t,e){return t.style.getPropertyValue(e)||yv(t).getComputedStyle(t,null).getPropertyValue(e)}function V7(t){return function(){delete this[t]}}function B7(t,e){return function(){this[t]=e}}function H7(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function cN(t,e){return arguments.length>1?this.each((e==null?V7:typeof e=="function"?H7:B7)(t,e)):this.node()[t]}function uN(t){return t.trim().split(/^|\s+/)}function nw(t){return t.classList||new dN(t)}function dN(t){this._node=t,this._names=uN(t.getAttribute("class")||"")}dN.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function fN(t,e){for(var n=nw(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function pN(t,e){for(var n=nw(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function U7(t){return function(){fN(this,t)}}function z7(t){return function(){pN(this,t)}}function G7(t,e){return function(){(e.apply(this,arguments)?fN:pN)(this,t)}}function hN(t,e){var n=uN(t+"");if(arguments.length<2){for(var i=nw(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?G7:e?U7:z7)(n,e))}function $7(){this.textContent=""}function q7(t){return function(){this.textContent=t}}function W7(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function mN(t){return arguments.length?this.each(t==null?$7:(typeof t=="function"?W7:q7)(t)):this.node().textContent}function j7(){this.innerHTML=""}function K7(t){return function(){this.innerHTML=t}}function Y7(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function gN(t){return arguments.length?this.each(t==null?j7:(typeof t=="function"?Y7:K7)(t)):this.node().innerHTML}function J7(){this.nextSibling&&this.parentNode.appendChild(this)}function vN(){return this.each(J7)}function Q7(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yN(){return this.each(Q7)}function _N(t){var e=typeof t=="function"?t:mv(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function X7(){return null}function CN(t,e){var n=typeof t=="function"?t:mv(t),i=e==null?X7:typeof e=="function"?e:Nc(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Z7(){var t=this.parentNode;t&&t.removeChild(this)}function xN(){return this.each(Z7)}function eU(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tU(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bN(t){return this.select(t?tU:eU)}function wN(t){return arguments.length?this.property("__data__",t):this.node().__data__}function nU(t){return function(e){t.call(this,e,this.__data__)}}function iU(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function rU(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function oU(t,e,n){return function(){var i=this.__on,r,s=nU(e);if(i){for(var a=0,c=i.length;a<c;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function EN(t,e,n){var i=iU(t+""),r,s=i.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var u=0,p=c.length,m;u<p;++u)for(r=0,m=c[u];r<s;++r)if((a=i[r]).type===m.type&&a.name===m.name)return m.value}return}for(c=e?oU:rU,r=0;r<s;++r)this.each(c(i[r],e,n));return this}function SN(t,e,n){var i=yv(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function sU(t,e){return function(){return SN(this,t,e)}}function aU(t,e){return function(){return SN(this,t,e.apply(this,arguments))}}function DN(t,e){return this.each((typeof e=="function"?aU:sU)(t,e))}function*TN(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var iw=[null];function ri(t,e){this._groups=t,this._parents=e}function IN(){return new ri([[document.documentElement]],iw)}function lU(){return this}ri.prototype=IN.prototype={constructor:ri,select:zk,selectAll:Gk,selectChild:$k,selectChildren:qk,filter:Wk,data:Yk,enter:jk,exit:Jk,join:Qk,merge:Xk,selection:lU,order:Zk,sort:eN,call:tN,nodes:nN,node:iN,size:rN,empty:oN,each:sN,attr:aN,style:lN,property:cN,classed:hN,text:mN,html:gN,raise:vN,lower:yN,append:_N,insert:CN,remove:xN,clone:bN,datum:wN,on:EN,dispatch:DN,[Symbol.iterator]:TN};var ya=IN;function _v(t){return typeof t=="string"?new ri([[document.querySelector(t)]],[document.documentElement]):new ri([[t]],iw)}function Cv(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function rw(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function zp(){}var Hp=.7,wv=1/Hp,nd="\\s*([+-]?\\d+)\\s*",Up="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cU=/^#([0-9a-f]{3,8})$/,uU=new RegExp(`^rgb\\(${nd},${nd},${nd}\\)$`),dU=new RegExp(`^rgb\\(${Ls},${Ls},${Ls}\\)$`),fU=new RegExp(`^rgba\\(${nd},${nd},${nd},${Up}\\)$`),pU=new RegExp(`^rgba\\(${Ls},${Ls},${Ls},${Up}\\)$`),hU=new RegExp(`^hsl\\(${Up},${Ls},${Ls}\\)$`),mU=new RegExp(`^hsla\\(${Up},${Ls},${Ls},${Up}\\)$`),AN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cv(zp,es,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:MN,formatHex:MN,formatHex8:gU,formatHsl:vU,formatRgb:kN,toString:kN});function MN(){return this.rgb().formatHex()}function gU(){return this.rgb().formatHex8()}function vU(){return ON(this).formatHsl()}function kN(){return this.rgb().formatRgb()}function es(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=cU.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?NN(e):n===3?new Ur(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?xv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?xv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=uU.exec(t))?new Ur(e[1],e[2],e[3],1):(e=dU.exec(t))?new Ur(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=fU.exec(t))?xv(e[1],e[2],e[3],e[4]):(e=pU.exec(t))?xv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hU.exec(t))?PN(e[1],e[2]/100,e[3]/100,1):(e=mU.exec(t))?PN(e[1],e[2]/100,e[3]/100,e[4]):AN.hasOwnProperty(t)?NN(AN[t]):t==="transparent"?new Ur(NaN,NaN,NaN,0):null}function NN(t){return new Ur(t>>16&255,t>>8&255,t&255,1)}function xv(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ur(t,e,n,i)}function yU(t){return t instanceof zp||(t=es(t)),t?(t=t.rgb(),new Ur(t.r,t.g,t.b,t.opacity)):new Ur}function id(t,e,n,i){return arguments.length===1?yU(t):new Ur(t,e,n,i??1)}function Ur(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Cv(Ur,id,rw(zp,{brighter(t){return t=t==null?wv:Math.pow(wv,t),new Ur(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Hp:Math.pow(Hp,t),new Ur(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ur(Rc(this.r),Rc(this.g),Rc(this.b),Ev(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FN,formatHex:FN,formatHex8:_U,formatRgb:RN,toString:RN}));function FN(){return`#${Fc(this.r)}${Fc(this.g)}${Fc(this.b)}`}function _U(){return`#${Fc(this.r)}${Fc(this.g)}${Fc(this.b)}${Fc((isNaN(this.opacity)?1:this.opacity)*255)}`}function RN(){let t=Ev(this.opacity);return`${t===1?"rgb(":"rgba("}${Rc(this.r)}, ${Rc(this.g)}, ${Rc(this.b)}${t===1?")":`, ${t})`}`}function Ev(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Fc(t){return t=Rc(t),(t<16?"0":"")+t.toString(16)}function PN(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zo(t,e,n,i)}function ON(t){if(t instanceof Zo)return new Zo(t.h,t.s,t.l,t.opacity);if(t instanceof zp||(t=es(t)),!t)return new Zo;if(t instanceof Zo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,c=s-r,u=(s+r)/2;return c?(e===s?a=(n-i)/c+(n<i)*6:n===s?a=(i-e)/c+2:a=(e-n)/c+4,c/=u<.5?s+r:2-s-r,a*=60):c=u>0&&u<1?0:a,new Zo(a,c,u,t.opacity)}function VN(t,e,n,i){return arguments.length===1?ON(t):new Zo(t,e,n,i??1)}function Zo(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Cv(Zo,VN,rw(zp,{brighter(t){return t=t==null?wv:Math.pow(wv,t),new Zo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Hp:Math.pow(Hp,t),new Zo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Ur(ow(t>=240?t-240:t+120,r,i),ow(t,r,i),ow(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Zo(LN(this.h),bv(this.s),bv(this.l),Ev(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=Ev(this.opacity);return`${t===1?"hsl(":"hsla("}${LN(this.h)}, ${bv(this.s)*100}%, ${bv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function LN(t){return t=(t||0)%360,t<0?t+360:t}function bv(t){return Math.max(0,Math.min(1,t||0))}function ow(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function sw(t,e,n,i,r){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*i+a*r)/6}function BN(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],a=i>0?t[i-1]:2*r-s,c=i<e-1?t[i+2]:2*s-r;return sw((n-i/e)*e,a,r,s,c)}}function HN(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],s=t[i%e],a=t[(i+1)%e],c=t[(i+2)%e];return sw((n-i/e)*e,r,s,a,c)}}var Gp=t=>()=>t;function CU(t,e){return function(n){return t+n*e}}function xU(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function UN(t){return(t=+t)==1?Sv:function(e,n){return n-e?xU(e,n,t):Gp(isNaN(e)?n:e)}}function Sv(t,e){var n=e-t;return n?CU(t,n):Gp(isNaN(t)?e:t)}var Pc=(function t(e){var n=UN(e);function i(r,s){var a=n((r=id(r)).r,(s=id(s)).r),c=n(r.g,s.g),u=n(r.b,s.b),p=Sv(r.opacity,s.opacity);return function(m){return r.r=a(m),r.g=c(m),r.b=u(m),r.opacity=p(m),r+""}}return i.gamma=t,i})(1);function zN(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),s=new Array(n),a,c;for(a=0;a<n;++a)c=id(e[a]),i[a]=c.r||0,r[a]=c.g||0,s[a]=c.b||0;return i=t(i),r=t(r),s=t(s),c.opacity=1,function(u){return c.r=i(u),c.g=r(u),c.b=s(u),c+""}}}var bU=zN(BN),wU=zN(HN);function GN(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function $N(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function qN(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=Lc(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(c){for(a=0;a<i;++a)s[a]=r[a](c);return s}}function WN(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Ji(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function jN(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Lc(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var lw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aw=new RegExp(lw.source,"g");function EU(t){return function(){return t}}function SU(t){return function(e){return t(e)+""}}function $p(t,e){var n=lw.lastIndex=aw.lastIndex=0,i,r,s,a=-1,c=[],u=[];for(t=t+"",e=e+"";(i=lw.exec(t))&&(r=aw.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),c[a]?c[a]+=s:c[++a]=s),(i=i[0])===(r=r[0])?c[a]?c[a]+=r:c[++a]=r:(c[++a]=null,u.push({i:a,x:Ji(i,r)})),n=aw.lastIndex;return n<e.length&&(s=e.slice(n),c[a]?c[a]+=s:c[++a]=s),c.length<2?u[0]?SU(u[0].x):EU(e):(e=u.length,function(p){for(var m=0,C;m<e;++m)c[(C=u[m]).i]=C.x(p);return c.join("")})}function Lc(t,e){var n=typeof e,i;return e==null||n==="boolean"?Gp(e):(n==="number"?Ji:n==="string"?(i=es(e))?(e=i,Pc):$p:e instanceof es?Pc:e instanceof Date?WN:$N(e)?GN:Array.isArray(e)?qN:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?jN:Ji)(t,e)}function cw(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var KN=180/Math.PI,Dv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uw(t,e,n,i,r,s){var a,c,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,u/=c),t*i<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*KN,skewX:Math.atan(u)*KN,scaleX:a,scaleY:c}}var Tv;function YN(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Dv:uw(e.a,e.b,e.c,e.d,e.e,e.f)}function JN(t){return t==null?Dv:(Tv||(Tv=document.createElementNS("http://www.w3.org/2000/svg","g")),Tv.setAttribute("transform",t),(t=Tv.transform.baseVal.consolidate())?(t=t.matrix,uw(t.a,t.b,t.c,t.d,t.e,t.f)):Dv)}function QN(t,e,n,i){function r(p){return p.length?p.pop()+" ":""}function s(p,m,C,x,E,A){if(p!==C||m!==x){var N=E.push("translate(",null,e,null,n);A.push({i:N-4,x:Ji(p,C)},{i:N-2,x:Ji(m,x)})}else(C||x)&&E.push("translate("+C+e+x+n)}function a(p,m,C,x){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),x.push({i:C.push(r(C)+"rotate(",null,i)-2,x:Ji(p,m)})):m&&C.push(r(C)+"rotate("+m+i)}function c(p,m,C,x){p!==m?x.push({i:C.push(r(C)+"skewX(",null,i)-2,x:Ji(p,m)}):m&&C.push(r(C)+"skewX("+m+i)}function u(p,m,C,x,E,A){if(p!==C||m!==x){var N=E.push(r(E)+"scale(",null,",",null,")");A.push({i:N-4,x:Ji(p,C)},{i:N-2,x:Ji(m,x)})}else(C!==1||x!==1)&&E.push(r(E)+"scale("+C+","+x+")")}return function(p,m){var C=[],x=[];return p=t(p),m=t(m),s(p.translateX,p.translateY,m.translateX,m.translateY,C,x),a(p.rotate,m.rotate,C,x),c(p.skewX,m.skewX,C,x),u(p.scaleX,p.scaleY,m.scaleX,m.scaleY,C,x),p=m=null,function(E){for(var A=-1,N=x.length,R;++A<N;)C[(R=x[A]).i]=R.x(E);return C.join("")}}}var dw=QN(YN,"px, ","px)","deg)"),fw=QN(JN,", ",")",")");var rd=0,Wp=0,qp=0,ZN=1e3,Iv,jp,Av=0,Oc=0,Mv=0,Kp=typeof performance=="object"&&performance.now?performance:Date,eF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Jp(){return Oc||(eF(DU),Oc=Kp.now()+Mv)}function DU(){Oc=0}function Yp(){this._call=this._time=this._next=null}Yp.prototype=kv.prototype={constructor:Yp,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Jp():+n)+(e==null?0:+e),!this._next&&jp!==this&&(jp?jp._next=this:Iv=this,jp=this),this._call=t,this._time=n,pw()},stop:function(){this._call&&(this._call=null,this._time=1/0,pw())}};function kv(t,e,n){var i=new Yp;return i.restart(t,e,n),i}function tF(){Jp(),++rd;for(var t=Iv,e;t;)(e=Oc-t._time)>=0&&t._call.call(void 0,e),t=t._next;--rd}function XN(){Oc=(Av=Kp.now())+Mv,rd=Wp=0;try{tF()}finally{rd=0,IU(),Oc=0}}function TU(){var t=Kp.now(),e=t-Av;e>ZN&&(Mv-=e,Av=t)}function IU(){for(var t,e=Iv,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Iv=n);jp=t,pw(i)}function pw(t){if(!rd){Wp&&(Wp=clearTimeout(Wp));var e=t-Oc;e>24?(t<1/0&&(Wp=setTimeout(XN,t-Kp.now()-Mv)),qp&&(qp=clearInterval(qp))):(qp||(Av=Kp.now(),qp=setInterval(TU,ZN)),rd=1,eF(XN))}}function Nv(t,e,n){var i=new Yp;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var AU=Zb("start","end","cancel","interrupt"),MU=[],rF=0,nF=1,Rv=2,Fv=3,iF=4,Pv=5,Qp=6;function fl(t,e,n,i,r,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;kU(t,n,{name:e,index:i,group:r,on:AU,tween:MU,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:rF})}function Xp(t,e){var n=Ti(t,e);if(n.state>rF)throw new Error("too late; already scheduled");return n}function Qi(t,e){var n=Ti(t,e);if(n.state>Fv)throw new Error("too late; already running");return n}function Ti(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function kU(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=kv(s,0,n.time);function s(p){n.state=nF,n.timer.restart(a,n.delay,n.time),n.delay<=p&&a(p-n.delay)}function a(p){var m,C,x,E;if(n.state!==nF)return u();for(m in i)if(E=i[m],E.name===n.name){if(E.state===Fv)return Nv(a);E.state===iF?(E.state=Qp,E.timer.stop(),E.on.call("interrupt",t,t.__data__,E.index,E.group),delete i[m]):+m<e&&(E.state=Qp,E.timer.stop(),E.on.call("cancel",t,t.__data__,E.index,E.group),delete i[m])}if(Nv(function(){n.state===Fv&&(n.state=iF,n.timer.restart(c,n.delay,n.time),c(p))}),n.state=Rv,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Rv){for(n.state=Fv,r=new Array(x=n.tween.length),m=0,C=-1;m<x;++m)(E=n.tween[m].value.call(t,t.__data__,n.index,n.group))&&(r[++C]=E);r.length=C+1}}function c(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(u),n.state=Pv,1),C=-1,x=r.length;++C<x;)r[C].call(t,m);n.state===Pv&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Qp,n.timer.stop(),delete i[e];for(var p in i)return;delete t.__transition}}function Lv(t,e){var n=t.__transition,i,r,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){s=!1;continue}r=i.state>Rv&&i.state<Pv,i.state=Qp,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}s&&delete t.__transition}}function oF(t){return this.each(function(){Lv(this,t)})}function NU(t,e){var n,i;return function(){var r=Qi(this,t),s=r.tween;if(s!==n){i=n=s;for(var a=0,c=i.length;a<c;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function FU(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Qi(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var c={name:e,value:n},u=0,p=r.length;u<p;++u)if(r[u].name===e){r[u]=c;break}u===p&&r.push(c)}s.tween=r}}function sF(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Ti(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?NU:FU)(n,t,e))}function od(t,e,n){var i=t._id;return t.each(function(){var r=Qi(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Ti(r,i).value[e]}}function Ov(t,e){var n;return(typeof e=="number"?Ji:e instanceof es?Pc:(n=es(e))?(e=n,Pc):$p)(t,e)}function RU(t){return function(){this.removeAttribute(t)}}function PU(t){return function(){this.removeAttributeNS(t.space,t.local)}}function LU(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttribute(t);return a===r?null:a===i?s:s=e(i=a,n)}}function OU(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?s:s=e(i=a,n)}}function VU(t,e,n){var i,r,s;return function(){var a,c=n(this),u;return c==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=c+"",a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,c)))}}function BU(t,e,n){var i,r,s;return function(){var a,c=n(this),u;return c==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=c+"",a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,c)))}}function aF(t,e){var n=va(t),i=n==="transform"?fw:Ov;return this.attrTween(t,typeof e=="function"?(n.local?BU:VU)(n,i,od(this,"attr."+t,e)):e==null?(n.local?PU:RU)(n):(n.local?OU:LU)(n,i,e))}function HU(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function UU(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function zU(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&UU(t,s)),n}return r._value=e,r}function GU(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&HU(t,s)),n}return r._value=e,r}function lF(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=va(t);return this.tween(n,(i.local?zU:GU)(i,e))}function $U(t,e){return function(){Xp(this,t).delay=+e.apply(this,arguments)}}function qU(t,e){return e=+e,function(){Xp(this,t).delay=e}}function cF(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$U:qU)(e,t)):Ti(this.node(),e).delay}function WU(t,e){return function(){Qi(this,t).duration=+e.apply(this,arguments)}}function jU(t,e){return e=+e,function(){Qi(this,t).duration=e}}function uF(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?WU:jU)(e,t)):Ti(this.node(),e).duration}function KU(t,e){if(typeof e!="function")throw new Error;return function(){Qi(this,t).ease=e}}function dF(t){var e=this._id;return arguments.length?this.each(KU(e,t)):Ti(this.node(),e).ease}function YU(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Qi(this,t).ease=n}}function fF(t){if(typeof t!="function")throw new Error;return this.each(YU(this._id,t))}function pF(t){typeof t!="function"&&(t=Vp(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,c=i[r]=[],u,p=0;p<a;++p)(u=s[p])&&t.call(u,u.__data__,p,s)&&c.push(u);return new xr(i,this._parents,this._name,this._id)}function hF(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),c=0;c<s;++c)for(var u=e[c],p=n[c],m=u.length,C=a[c]=new Array(m),x,E=0;E<m;++E)(x=u[E]||p[E])&&(C[E]=x);for(;c<i;++c)a[c]=e[c];return new xr(a,this._parents,this._name,this._id)}function JU(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function QU(t,e,n){var i,r,s=JU(e)?Xp:Qi;return function(){var a=s(this,t),c=a.on;c!==i&&(r=(i=c).copy()).on(e,n),a.on=r}}function mF(t,e){var n=this._id;return arguments.length<2?Ti(this.node(),n).on.on(t):this.each(QU(n,t,e))}function XU(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function gF(){return this.on("end.remove",XU(this._id))}function vF(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Nc(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var c=i[a],u=c.length,p=s[a]=new Array(u),m,C,x=0;x<u;++x)(m=c[x])&&(C=t.call(m,m.__data__,x,c))&&("__data__"in m&&(C.__data__=m.__data__),p[x]=C,fl(p[x],e,n,x,p,Ti(m,n)));return new xr(s,this._parents,e,n)}function yF(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Op(t));for(var i=this._groups,r=i.length,s=[],a=[],c=0;c<r;++c)for(var u=i[c],p=u.length,m,C=0;C<p;++C)if(m=u[C]){for(var x=t.call(m,m.__data__,C,u),E,A=Ti(m,n),N=0,R=x.length;N<R;++N)(E=x[N])&&fl(E,e,n,N,x,A);s.push(x),a.push(m)}return new xr(s,a,e,n)}var ZU=ya.prototype.constructor;function _F(){return new ZU(this._groups,this._parents)}function e9(t,e){var n,i,r;return function(){var s=dl(this,t),a=(this.style.removeProperty(t),dl(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}function CF(t){return function(){this.style.removeProperty(t)}}function t9(t,e,n){var i,r=n+"",s;return function(){var a=dl(this,t);return a===r?null:a===i?s:s=e(i=a,n)}}function n9(t,e,n){var i,r,s;return function(){var a=dl(this,t),c=n(this),u=c+"";return c==null&&(u=c=(this.style.removeProperty(t),dl(this,t))),a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,c))}}function i9(t,e){var n,i,r,s="style."+e,a="end."+s,c;return function(){var u=Qi(this,t),p=u.on,m=u.value[s]==null?c||(c=CF(e)):void 0;(p!==n||r!==m)&&(i=(n=p).copy()).on(a,r=m),u.on=i}}function xF(t,e,n){var i=(t+="")=="transform"?dw:Ov;return e==null?this.styleTween(t,e9(t,i)).on("end.style."+t,CF(t)):typeof e=="function"?this.styleTween(t,n9(t,i,od(this,"style."+t,e))).each(i9(this._id,t)):this.styleTween(t,t9(t,i,e),n).on("end.style."+t,null)}function r9(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function o9(t,e,n){var i,r;function s(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&r9(t,a,n)),i}return s._value=e,s}function bF(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,o9(t,e,n??""))}function s9(t){return function(){this.textContent=t}}function a9(t){return function(){var e=t(this);this.textContent=e??""}}function wF(t){return this.tween("text",typeof t=="function"?a9(od(this,"text",t)):s9(t==null?"":t+""))}function l9(t){return function(e){this.textContent=t.call(this,e)}}function c9(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&l9(r)),e}return i._value=t,i}function EF(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,c9(t))}function SF(){for(var t=this._name,e=this._id,n=Vv(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],c=a.length,u,p=0;p<c;++p)if(u=a[p]){var m=Ti(u,e);fl(u,t,n,p,a,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new xr(i,this._parents,t,n)}function DF(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var c={value:a},u={value:function(){--r===0&&s()}};n.each(function(){var p=Qi(this,i),m=p.on;m!==t&&(e=(t=m).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(u)),p.on=e}),r===0&&s()})}var u9=0;function xr(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function TF(t){return ya().transition(t)}function Vv(){return++u9}var _a=ya.prototype;xr.prototype=TF.prototype={constructor:xr,select:vF,selectAll:yF,selectChild:_a.selectChild,selectChildren:_a.selectChildren,filter:pF,merge:hF,selection:_F,transition:SF,call:_a.call,nodes:_a.nodes,node:_a.node,size:_a.size,empty:_a.empty,each:_a.each,on:mF,attr:aF,attrTween:lF,style:xF,styleTween:bF,text:wF,textTween:EF,remove:gF,tween:sF,delay:cF,duration:uF,ease:dF,easeVarying:fF,end:DF,[Symbol.iterator]:_a[Symbol.iterator]};function Bv(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var d9={time:null,delay:0,duration:250,ease:Bv};function f9(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function IF(t){var e,n;t instanceof xr?(e=t._id,t=t._name):(e=Vv(),(n=d9).time=Jp(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],c=a.length,u,p=0;p<c;++p)(u=a[p])&&fl(u,t,e,p,a,n||f9(u,e));return new xr(i,this._parents,t,e)}ya.prototype.interrupt=oF;ya.prototype.transition=IF;var{abs:zxe,max:Gxe,min:$xe}=Math;function AF(t){return[+t[0],+t[1]]}function p9(t){return[AF(t[0]),AF(t[1])]}var qxe={name:"x",handles:["w","e"].map(hw),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Wxe={name:"y",handles:["n","s"].map(hw),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},jxe={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(hw),input:function(t){return t==null?null:p9(t)},output:function(t){return t}};function hw(t){return{type:t}}function MF(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Vc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Os(t){return t=Vc(Math.abs(t)),t?t[1]:NaN}function kF(t,e){return function(n,i){for(var r=n.length,s=[],a=0,c=t[0],u=0;r>0&&c>0&&(u+c+1>i&&(c=Math.max(1,i-u)),s.push(n.substring(r-=c,r+c)),!((u+=c+1)>i));)c=t[a=(a+1)%t.length];return s.reverse().join(e)}}function NF(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var h9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pl(t){if(!(e=h9.exec(t)))throw new Error("invalid format: "+t);var e;return new Hv({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}pl.prototype=Hv.prototype;function Hv(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Hv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function FF(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var mw;function RF(t,e){var n=Vc(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(mw=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Vc(t,Math.max(0,e+s-1))[0]}function gw(t,e){var n=Vc(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}var vw={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:MF,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gw(t*100,e),r:gw,s:RF,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function yw(t){return t}var PF=Array.prototype.map,LF=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function OF(t){var e=t.grouping===void 0||t.thousands===void 0?yw:kF(PF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?yw:NF(PF.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function p(C){C=pl(C);var x=C.fill,E=C.align,A=C.sign,N=C.symbol,R=C.zero,k=C.width,B=C.comma,$=C.precision,q=C.trim,X=C.type;X==="n"?(B=!0,X="g"):vw[X]||($===void 0&&($=12),q=!0,X="g"),(R||x==="0"&&E==="=")&&(R=!0,x="0",E="=");var ie=N==="$"?n:N==="#"&&/[boxX]/.test(X)?"0"+X.toLowerCase():"",me=N==="$"?i:/[%p]/.test(X)?a:"",ye=vw[X],ge=/[defgprs%]/.test(X);$=$===void 0?6:/[gprs]/.test(X)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function Te(j){var le=ie,H=me,Ae,ht,Xe;if(X==="c")H=ye(j)+H,j="";else{j=+j;var pt=j<0||1/j<0;if(j=isNaN(j)?u:ye(Math.abs(j),$),q&&(j=FF(j)),pt&&+j==0&&A!=="+"&&(pt=!1),le=(pt?A==="("?A:c:A==="-"||A==="("?"":A)+le,H=(X==="s"?LF[8+mw/3]:"")+H+(pt&&A==="("?")":""),ge){for(Ae=-1,ht=j.length;++Ae<ht;)if(Xe=j.charCodeAt(Ae),48>Xe||Xe>57){H=(Xe===46?r+j.slice(Ae+1):j.slice(Ae))+H,j=j.slice(0,Ae);break}}}B&&!R&&(j=e(j,1/0));var _t=le.length+j.length+H.length,be=_t<k?new Array(k-_t+1).join(x):"";switch(B&&R&&(j=e(be+j,be.length?k-H.length:1/0),be=""),E){case"<":j=le+j+H+be;break;case"=":j=le+be+j+H;break;case"^":j=be.slice(0,_t=be.length>>1)+le+j+H+be.slice(_t);break;default:j=be+le+j+H;break}return s(j)}return Te.toString=function(){return C+""},Te}function m(C,x){var E=p((C=pl(C),C.type="f",C)),A=Math.max(-8,Math.min(8,Math.floor(Os(x)/3)))*3,N=Math.pow(10,-A),R=LF[8+A/3];return function(k){return E(N*k)+R}}return{format:p,formatPrefix:m}}var Uv,zv,Gv;_w({thousands:",",grouping:[3],currency:["$",""]});function _w(t){return Uv=OF(t),zv=Uv.format,Gv=Uv.formatPrefix,Uv}function Cw(t){return Math.max(0,-Os(Math.abs(t)))}function xw(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Os(e)/3)))*3-Os(Math.abs(t)))}function bw(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Os(e)-Os(t))+1}function sd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var VF=Symbol("implicit");function $v(){var t=new td,e=[],n=[],i=VF;function r(s){let a=t.get(s);if(a===void 0){if(i!==VF)return i;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new td;for(let a of s)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return $v(e,n).unknown(i)},sd.apply(r,arguments),r}function Zp(){var t=$v().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,a,c=!1,u=0,p=0,m=.5;delete t.unknown;function C(){var x=e().length,E=r<i,A=E?r:i,N=E?i:r;s=(N-A)/Math.max(1,x-u+p*2),c&&(s=Math.floor(s)),A+=(N-A-s*(x-u))*m,a=s*(1-u),c&&(A=Math.round(A),a=Math.round(a));var R=fv(x).map(function(k){return A+s*k});return n(E?R.reverse():R)}return t.domain=function(x){return arguments.length?(e(x),C()):e()},t.range=function(x){return arguments.length?([i,r]=x,i=+i,r=+r,C()):[i,r]},t.rangeRound=function(x){return[i,r]=x,i=+i,r=+r,c=!0,C()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(x){return arguments.length?(c=!!x,C()):c},t.padding=function(x){return arguments.length?(u=Math.min(1,p=+x),C()):u},t.paddingInner=function(x){return arguments.length?(u=Math.min(1,x),C()):u},t.paddingOuter=function(x){return arguments.length?(p=+x,C()):p},t.align=function(x){return arguments.length?(m=Math.max(0,Math.min(1,x)),C()):m},t.copy=function(){return Zp(e(),[i,r]).round(c).paddingInner(u).paddingOuter(p).align(m)},sd.apply(C(),arguments)}function ww(t){return function(){return t}}function Ew(t){return+t}var BF=[0,1];function ad(t){return t}function Sw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ww(isNaN(e)?NaN:.5)}function m9(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function g9(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=Sw(r,i),s=n(a,s)):(i=Sw(i,r),s=n(s,a)),function(c){return s(i(c))}}function v9(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=Sw(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(c){var u=Wb(t,c,1,i)-1;return s[u](r[u](c))}}function HF(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function y9(){var t=BF,e=BF,n=Lc,i,r,s,a=ad,c,u,p;function m(){var x=Math.min(t.length,e.length);return a!==ad&&(a=m9(t[0],t[x-1])),c=x>2?v9:g9,u=p=null,C}function C(x){return x==null||isNaN(x=+x)?s:(u||(u=c(t.map(i),e,n)))(i(a(x)))}return C.invert=function(x){return a(r((p||(p=c(e,t.map(i),Ji)))(x)))},C.domain=function(x){return arguments.length?(t=Array.from(x,Ew),m()):t.slice()},C.range=function(x){return arguments.length?(e=Array.from(x),m()):e.slice()},C.rangeRound=function(x){return e=Array.from(x),n=cw,m()},C.clamp=function(x){return arguments.length?(a=x?!0:ad,m()):a!==ad},C.interpolate=function(x){return arguments.length?(n=x,m()):n},C.unknown=function(x){return arguments.length?(s=x,C):s},function(x,E){return i=x,r=E,m()}}function Dw(){return y9()(ad,ad)}function Tw(t,e,n,i){var r=jb(t,e,n),s;switch(i=pl(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=xw(r,a))&&(i.precision=s),Gv(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=bw(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Cw(r))&&(i.precision=s-(i.type==="%")*2);break}}return zv(i)}function _9(t){var e=t.domain;return t.ticks=function(n){var i=e();return uv(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return Tw(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,a=i[r],c=i[s],u,p,m=10;for(c<a&&(p=a,a=c,c=p,p=r,r=s,s=p);m-- >0;){if(p=Pp(a,c,n),p===u)return i[r]=a,i[s]=c,e(i);if(p>0)a=Math.floor(a/p)*p,c=Math.ceil(c/p)*p;else if(p<0)a=Math.ceil(a*p)/p,c=Math.floor(c*p)/p;else break;u=p}return t},t}function eh(){var t=Dw();return t.copy=function(){return HF(t,eh())},sd.apply(t,arguments),_9(t)}function hl(t,e,n){this.k=t,this.x=e,this.y=n}hl.prototype={constructor:hl,scale:function(t){return t===1?this:new hl(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new hl(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Iw=new hl(1,0,0);Aw.prototype=hl.prototype;function Aw(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Iw;return t.__zoom}var qv=class t{el=he(Ei);data=Ee();constructor(){ln(()=>{let e=this.data();e&&e.length>0&&this.createChart(e)})}createChart(e){_v(this.el.nativeElement).select("svg").remove();let n=this.el.nativeElement,i={top:20,right:20,bottom:70,left:40},r=n.clientWidth-i.left-i.right,s=400-i.top-i.bottom,a=_v(n).append("svg").attr("width",r+i.left+i.right).attr("height",s+i.top+i.bottom).append("g").attr("transform",`translate(${i.left},${i.top})`),c=Zp().range([0,r]).domain(e.map(p=>p.label)).padding(.2);a.append("g").attr("transform",`translate(0,${s})`).call(Qb(c)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end").style("fill","#9ca3af");let u=eh().domain([0,dv(e,p=>p.value)??0]).range([s,0]);a.append("g").call(Xb(u)).selectAll("text").style("fill","#9ca3af"),a.selectAll("mybar").data(e).enter().append("rect").attr("x",p=>c(p.label)).attr("y",p=>u(p.value)).attr("width",c.bandwidth()).attr("height",p=>s-u(p.value)).attr("fill","#4f46e5")}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Rn({type:t,selectors:[["","appD3BarChart",""]],inputs:{data:[1,"data"]}})};var x9,b9;function w9(){return{geminiUrl:x9,vertexUrl:b9}}function E9(t,e,n,i){var r,s;if(!t?.baseUrl){let a=w9();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(s=a.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}var is=class{};function yt(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){let s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function v(t,e,n){for(let s=0;s<e.length-1;s++){let a=e[s];if(a.endsWith("[]")){let c=a.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[c])){let u=t[c];if(Array.isArray(n))for(let p=0;p<u.length;p++){let m=u[p];v(m,e.slice(s+1),n[p])}else for(let p of u)v(p,e.slice(s+1),n)}return}else if(a.endsWith("[0]")){let c=a.slice(0,-3);c in t||(t[c]=[{}]);let u=t[c];v(u[0],e.slice(s+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}let i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function g(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;let r=e[i];if(r.endsWith("[]")){let s=r.slice(0,-2);if(s in t){let a=t[s];return Array.isArray(a)?a.map(c=>g(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function S9(t,e){for(let[n,i]of Object.entries(e)){let r=n.split("."),s=i.split("."),a=new Set,c=-1;for(let u=0;u<r.length;u++)if(r[u]==="*"){c=u;break}if(c!==-1&&s.length>c)for(let u=c;u<s.length;u++){let p=s[u];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&a.add(p)}Nw(t,r,s,0,a)}}function Nw(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;let s=e[i];if(s.endsWith("[]")){let a=s.slice(0,-2),c=t;if(a in c&&Array.isArray(c[a]))for(let u of c[a])Nw(u,e,n,i+1,r)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let a=t,c=Object.keys(a).filter(p=>!p.startsWith("_")&&!r.has(p)),u={};for(let p of c)u[p]=a[p];for(let[p,m]of Object.entries(u)){let C=[];for(let x of n.slice(i))x==="*"?C.push(p):C.push(x);v(a,C,m)}for(let p of c)delete a[p]}}else{let a=t;s in a&&Nw(a[s],e,n,i+1,r)}}function ME(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function D9(t){let e={},n=g(t,["operationName"]);n!=null&&v(e,["operationName"],n);let i=g(t,["resourceName"]);return i!=null&&v(e,["_url","resourceName"],i),e}function T9(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["metadata"]);i!=null&&v(e,["metadata"],i);let r=g(t,["done"]);r!=null&&v(e,["done"],r);let s=g(t,["error"]);s!=null&&v(e,["error"],s);let a=g(t,["response","generateVideoResponse"]);return a!=null&&v(e,["response"],A9(a)),e}function I9(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["metadata"]);i!=null&&v(e,["metadata"],i);let r=g(t,["done"]);r!=null&&v(e,["done"],r);let s=g(t,["error"]);s!=null&&v(e,["error"],s);let a=g(t,["response"]);return a!=null&&v(e,["response"],M9(a)),e}function A9(t){let e={},n=g(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>k9(a))),v(e,["generatedVideos"],s)}let i=g(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);let r=g(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function M9(t){let e={},n=g(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>N9(a))),v(e,["generatedVideos"],s)}let i=g(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);let r=g(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function k9(t){let e={},n=g(t,["video"]);return n!=null&&v(e,["video"],V9(n)),e}function N9(t){let e={},n=g(t,["_self"]);return n!=null&&v(e,["video"],B9(n)),e}function F9(t){let e={},n=g(t,["operationName"]);return n!=null&&v(e,["_url","operationName"],n),e}function R9(t){let e={},n=g(t,["operationName"]);return n!=null&&v(e,["_url","operationName"],n),e}function P9(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["metadata"]);i!=null&&v(e,["metadata"],i);let r=g(t,["done"]);r!=null&&v(e,["done"],r);let s=g(t,["error"]);s!=null&&v(e,["error"],s);let a=g(t,["response"]);return a!=null&&v(e,["response"],L9(a)),e}function L9(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["parent"]);i!=null&&v(e,["parent"],i);let r=g(t,["documentName"]);return r!=null&&v(e,["documentName"],r),e}function fR(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["metadata"]);i!=null&&v(e,["metadata"],i);let r=g(t,["done"]);r!=null&&v(e,["done"],r);let s=g(t,["error"]);s!=null&&v(e,["error"],s);let a=g(t,["response"]);return a!=null&&v(e,["response"],O9(a)),e}function O9(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["parent"]);i!=null&&v(e,["parent"],i);let r=g(t,["documentName"]);return r!=null&&v(e,["documentName"],r),e}function V9(t){let e={},n=g(t,["uri"]);n!=null&&v(e,["uri"],n);let i=g(t,["encodedVideo"]);i!=null&&v(e,["videoBytes"],ME(i));let r=g(t,["encoding"]);return r!=null&&v(e,["mimeType"],r),e}function B9(t){let e={},n=g(t,["gcsUri"]);n!=null&&v(e,["uri"],n);let i=g(t,["bytesBase64Encoded"]);i!=null&&v(e,["videoBytes"],ME(i));let r=g(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}var bt=(function(t){return t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL",t})(bt||{});var Fw=(function(t){return t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO",t})(Fw||{});var pR=(function(t){return t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",t})(pR||{});var nh=(function(t){return t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT",t})(nh||{});var rh=class{constructor(e){let n={};for(let i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var Hc=class{get text(){var e,n,i,r,s,a,c,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",m=!1,C=[];for(let x of(u=(c=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(let[E,A]of Object.entries(x))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(A!==null||A!==void 0)&&C.push(E);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;m=!0,p+=x.text}}return C.length>0&&console.warn(`there are non-text parts ${C} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?p:void 0}get data(){var e,n,i,r,s,a,c,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="",m=[];for(let C of(u=(c=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(let[x,E]of Object.entries(C))x!=="inlineData"&&(E!==null||E!==void 0)&&m.push(x);C.inlineData&&typeof C.inlineData.data=="string"&&(p+=atob(C.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,i,r,s,a,c,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let p=(u=(c=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if(p?.length!==0)return p}get executableCode(){var e,n,i,r,s,a,c,u,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let m=(u=(c=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(C=>C.executableCode).map(C=>C.executableCode).filter(C=>C!==void 0);if(m?.length!==0)return(p=m?.[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,i,r,s,a,c,u,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let m=(u=(c=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(C=>C.codeExecutionResult).map(C=>C.codeExecutionResult).filter(C=>C!==void 0);if(m?.length!==0)return(p=m?.[0])===null||p===void 0?void 0:p.output}},Zv=class{},ey=class{},Rw=class{},Pw=class{},Lw=class{},Ow=class{},ty=class{},ny=class{},iy=class{},Vw=class{};var ry=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let i=new t,r,s=e;return n?r=I9(s):r=T9(s),Object.assign(i,r),i}},oy=class{},sy=class{},ay=class{},ly=class{},Bw=class{},Hw=class{},Uw=class{};var zw=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let i=new t,s=P9(e);return Object.assign(i,s),i}},Gw=class{},$w=class{},qw=class{};var cy=class{};var Ww=class{get text(){var e,n,i;let r="",s=!1,a=[];for(let c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[u,p]of Object.entries(c))u!=="text"&&u!=="thought"&&p!==null&&a.push(u);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;s=!0,r+=c.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,n,i;let r="",s=[];for(let a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[c,u]of Object.entries(a))c!=="inlineData"&&u!==null&&s.push(c);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}};var jw=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var Kw=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let i=new t,s=fR(e);return Object.assign(i,s),i}};function gn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function hR(t,e){let n=gn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function mR(t){return Array.isArray(t)?t.map(e=>uy(e)):[uy(t)]}function uy(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function gR(t){let e=uy(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vR(t){let e=uy(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function UF(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function yR(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>UF(e)):[UF(t)]}function Yw(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function zF(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function GF(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function cr(t){if(t==null)throw new Error("ContentUnion is required");return Yw(t)?t:{role:"user",parts:yR(t)}}function kE(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let i=cr(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){let n=cr(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>cr(n)):[cr(e)]}function No(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(zF(t)||GF(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[cr(t)]}let e=[],n=[],i=Yw(t[0]);for(let r of t){let s=Yw(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if(zF(r)||GF(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:yR(n)}),e}function H9(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(bt).includes(n[0].toUpperCase())?n[0].toUpperCase():bt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let i of n)e.anyOf.push({type:Object.values(bt).includes(i.toUpperCase())?i.toUpperCase():bt.TYPE_UNSPECIFIED})}}function cd(t){let e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&H9(t.type,e);for(let[a,c]of Object.entries(t))if(c!=null)if(a=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(bt).includes(c.toUpperCase())?c.toUpperCase():bt.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=cd(c);else if(i.includes(a)){let u=[];for(let p of c){if(p.type=="null"){e.nullable=!0;continue}u.push(cd(p))}e[a]=u}else if(r.includes(a)){let u={};for(let[p,m]of Object.entries(c))u[p]=cd(m);e[a]=u}else{if(a==="additionalProperties")continue;e[a]=c}return e}function NE(t){return cd(t)}function FE(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function RE(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function pd(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=cd(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=cd(e.response));return t}function hd(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function U9(t,e,n,i=1){let r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function xa(t,e){if(typeof e!="string")throw new Error("name must be a string");return U9(t,e,"cachedContents")}function _R(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ml(t){return ME(t)}function z9(t){return t!=null&&typeof t=="object"&&"name"in t}function G9(t){return t!=null&&typeof t=="object"&&"video"in t}function $9(t){return t!=null&&typeof t=="object"&&"uri"in t}function CR(t){var e;let n;if(z9(t)&&(n=t.name),!($9(t)&&(n=t.uri,n===void 0))&&!(G9(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function xR(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function bR(t){for(let e of["models","tunedModels","publisherModels"])if(q9(t,e))return t[e];return[]}function q9(t,e){return t!==null&&typeof t=="object"&&e in t}function W9(t,e={}){let n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function j9(t,e={}){let n=[],i=new Set;for(let r of t){let s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);let a=W9(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function wR(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function K9(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ER(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let s=!1;for(let a of r){if(typeof a!="object"||a===null)continue;let u=a.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function md(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function SR(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function Y9(t){let e={},n=g(t,["responsesFile"]);n!=null&&v(e,["fileName"],n);let i=g(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Az(a))),v(e,["inlinedResponses"],s)}let r=g(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),v(e,["inlinedEmbedContentResponses"],s)}return e}function J9(t){let e={},n=g(t,["predictionsFormat"]);n!=null&&v(e,["format"],n);let i=g(t,["gcsDestination","outputUriPrefix"]);i!=null&&v(e,["gcsUri"],i);let r=g(t,["bigqueryDestination","outputUri"]);return r!=null&&v(e,["bigqueryUri"],r),e}function Q9(t){let e={},n=g(t,["format"]);n!=null&&v(e,["predictionsFormat"],n);let i=g(t,["gcsUri"]);i!=null&&v(e,["gcsDestination","outputUriPrefix"],i);let r=g(t,["bigqueryUri"]);if(r!=null&&v(e,["bigqueryDestination","outputUri"],r),g(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(g(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Qv(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["metadata","displayName"]);i!=null&&v(e,["displayName"],i);let r=g(t,["metadata","state"]);r!=null&&v(e,["state"],SR(r));let s=g(t,["metadata","createTime"]);s!=null&&v(e,["createTime"],s);let a=g(t,["metadata","endTime"]);a!=null&&v(e,["endTime"],a);let c=g(t,["metadata","updateTime"]);c!=null&&v(e,["updateTime"],c);let u=g(t,["metadata","model"]);u!=null&&v(e,["model"],u);let p=g(t,["metadata","output"]);return p!=null&&v(e,["dest"],Y9(ER(p))),e}function Jw(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["displayName"]);i!=null&&v(e,["displayName"],i);let r=g(t,["state"]);r!=null&&v(e,["state"],SR(r));let s=g(t,["error"]);s!=null&&v(e,["error"],s);let a=g(t,["createTime"]);a!=null&&v(e,["createTime"],a);let c=g(t,["startTime"]);c!=null&&v(e,["startTime"],c);let u=g(t,["endTime"]);u!=null&&v(e,["endTime"],u);let p=g(t,["updateTime"]);p!=null&&v(e,["updateTime"],p);let m=g(t,["model"]);m!=null&&v(e,["model"],m);let C=g(t,["inputConfig"]);C!=null&&v(e,["src"],X9(C));let x=g(t,["outputConfig"]);x!=null&&v(e,["dest"],J9(ER(x)));let E=g(t,["completionStats"]);return E!=null&&v(e,["completionStats"],E),e}function X9(t){let e={},n=g(t,["instancesFormat"]);n!=null&&v(e,["format"],n);let i=g(t,["gcsSource","uris"]);i!=null&&v(e,["gcsUri"],i);let r=g(t,["bigquerySource","inputUri"]);return r!=null&&v(e,["bigqueryUri"],r),e}function Z9(t,e){let n={};if(g(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=g(e,["fileName"]);i!=null&&v(n,["fileName"],i);let r=g(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Iz(t,a))),v(n,["requests","requests"],s)}return n}function ez(t){let e={},n=g(t,["format"]);n!=null&&v(e,["instancesFormat"],n);let i=g(t,["gcsUri"]);i!=null&&v(e,["gcsSource","uris"],i);let r=g(t,["bigqueryUri"]);if(r!=null&&v(e,["bigquerySource","inputUri"],r),g(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function tz(t){let e={},n=g(t,["data"]);if(n!=null&&v(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function nz(t,e){let n={},i=g(e,["name"]);return i!=null&&v(n,["_url","name"],md(t,i)),n}function iz(t,e){let n={},i=g(e,["name"]);return i!=null&&v(n,["_url","name"],md(t,i)),n}function rz(t){let e={},n=g(t,["content"]);n!=null&&v(e,["content"],n);let i=g(t,["citationMetadata"]);i!=null&&v(e,["citationMetadata"],oz(i));let r=g(t,["tokenCount"]);r!=null&&v(e,["tokenCount"],r);let s=g(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);let a=g(t,["avgLogprobs"]);a!=null&&v(e,["avgLogprobs"],a);let c=g(t,["groundingMetadata"]);c!=null&&v(e,["groundingMetadata"],c);let u=g(t,["index"]);u!=null&&v(e,["index"],u);let p=g(t,["logprobsResult"]);p!=null&&v(e,["logprobsResult"],p);let m=g(t,["safetyRatings"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(E=>E)),v(e,["safetyRatings"],x)}let C=g(t,["urlContextMetadata"]);return C!=null&&v(e,["urlContextMetadata"],C),e}function oz(t){let e={},n=g(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["citations"],i)}return e}function DR(t){let e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Lz(s))),v(e,["parts"],r)}let i=g(t,["role"]);return i!=null&&v(e,["role"],i),e}function sz(t,e){let n={},i=g(t,["displayName"]);if(e!==void 0&&i!=null&&v(e,["batch","displayName"],i),g(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function az(t,e){let n={},i=g(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);let r=g(t,["dest"]);return e!==void 0&&r!=null&&v(e,["outputConfig"],Q9(K9(r))),n}function $F(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["src"]);r!=null&&v(n,["batch","inputConfig"],Z9(t,wR(t,r)));let s=g(e,["config"]);return s!=null&&sz(s,n),n}function lz(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["model"],gn(t,i));let r=g(e,["src"]);r!=null&&v(n,["inputConfig"],ez(wR(t,r)));let s=g(e,["config"]);return s!=null&&az(s,n),n}function cz(t,e){let n={},i=g(t,["displayName"]);return e!==void 0&&i!=null&&v(e,["batch","displayName"],i),n}function uz(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["src"]);r!=null&&v(n,["batch","inputConfig"],vz(t,r));let s=g(e,["config"]);return s!=null&&cz(s,n),n}function dz(t,e){let n={},i=g(e,["name"]);return i!=null&&v(n,["_url","name"],md(t,i)),n}function fz(t,e){let n={},i=g(e,["name"]);return i!=null&&v(n,["_url","name"],md(t,i)),n}function pz(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["name"]);i!=null&&v(e,["name"],i);let r=g(t,["done"]);r!=null&&v(e,["done"],r);let s=g(t,["error"]);return s!=null&&v(e,["error"],s),e}function hz(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["name"]);i!=null&&v(e,["name"],i);let r=g(t,["done"]);r!=null&&v(e,["done"],r);let s=g(t,["error"]);return s!=null&&v(e,["error"],s),e}function mz(t,e){let n={},i=g(e,["contents"]);if(i!=null){let s=kE(t,i);Array.isArray(s)&&(s=s.map(a=>a)),v(n,["requests[]","request","content"],s)}let r=g(e,["config"]);return r!=null&&(v(n,["_self"],gz(r,n)),S9(n,{"requests[].*":"requests[].request.*"})),n}function gz(t,e){let n={},i=g(t,["taskType"]);e!==void 0&&i!=null&&v(e,["requests[]","taskType"],i);let r=g(t,["title"]);e!==void 0&&r!=null&&v(e,["requests[]","title"],r);let s=g(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&v(e,["requests[]","outputDimensionality"],s),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function vz(t,e){let n={},i=g(e,["fileName"]);i!=null&&v(n,["file_name"],i);let r=g(e,["inlinedRequests"]);return r!=null&&v(n,["requests"],mz(t,r)),n}function yz(t){let e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=g(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function _z(t){let e={},n=g(t,["id"]);n!=null&&v(e,["id"],n);let i=g(t,["args"]);i!=null&&v(e,["args"],i);let r=g(t,["name"]);if(r!=null&&v(e,["name"],r),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Cz(t){let e={},n=g(t,["allowedFunctionNames"]);n!=null&&v(e,["allowedFunctionNames"],n);let i=g(t,["mode"]);if(i!=null&&v(e,["mode"],i),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xz(t,e,n){let i={},r=g(e,["systemInstruction"]);n!==void 0&&r!=null&&v(n,["systemInstruction"],DR(cr(r)));let s=g(e,["temperature"]);s!=null&&v(i,["temperature"],s);let a=g(e,["topP"]);a!=null&&v(i,["topP"],a);let c=g(e,["topK"]);c!=null&&v(i,["topK"],c);let u=g(e,["candidateCount"]);u!=null&&v(i,["candidateCount"],u);let p=g(e,["maxOutputTokens"]);p!=null&&v(i,["maxOutputTokens"],p);let m=g(e,["stopSequences"]);m!=null&&v(i,["stopSequences"],m);let C=g(e,["responseLogprobs"]);C!=null&&v(i,["responseLogprobs"],C);let x=g(e,["logprobs"]);x!=null&&v(i,["logprobs"],x);let E=g(e,["presencePenalty"]);E!=null&&v(i,["presencePenalty"],E);let A=g(e,["frequencyPenalty"]);A!=null&&v(i,["frequencyPenalty"],A);let N=g(e,["seed"]);N!=null&&v(i,["seed"],N);let R=g(e,["responseMimeType"]);R!=null&&v(i,["responseMimeType"],R);let k=g(e,["responseSchema"]);k!=null&&v(i,["responseSchema"],NE(k));let B=g(e,["responseJsonSchema"]);if(B!=null&&v(i,["responseJsonSchema"],B),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let $=g(e,["safetySettings"]);if(n!==void 0&&$!=null){let H=$;Array.isArray(H)&&(H=H.map(Ae=>Oz(Ae))),v(n,["safetySettings"],H)}let q=g(e,["tools"]);if(n!==void 0&&q!=null){let H=hd(q);Array.isArray(H)&&(H=H.map(Ae=>Bz(pd(Ae)))),v(n,["tools"],H)}let X=g(e,["toolConfig"]);if(n!==void 0&&X!=null&&v(n,["toolConfig"],Vz(X)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let ie=g(e,["cachedContent"]);n!==void 0&&ie!=null&&v(n,["cachedContent"],xa(t,ie));let me=g(e,["responseModalities"]);me!=null&&v(i,["responseModalities"],me);let ye=g(e,["mediaResolution"]);ye!=null&&v(i,["mediaResolution"],ye);let ge=g(e,["speechConfig"]);if(ge!=null&&v(i,["speechConfig"],FE(ge)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let Te=g(e,["thinkingConfig"]);Te!=null&&v(i,["thinkingConfig"],Te);let j=g(e,["imageConfig"]);j!=null&&v(i,["imageConfig"],Tz(j));let le=g(e,["enableEnhancedCivicAnswers"]);return le!=null&&v(i,["enableEnhancedCivicAnswers"],le),i}function bz(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(p=>rz(p))),v(e,["candidates"],u)}let r=g(t,["modelVersion"]);r!=null&&v(e,["modelVersion"],r);let s=g(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);let a=g(t,["responseId"]);a!=null&&v(e,["responseId"],a);let c=g(t,["usageMetadata"]);return c!=null&&v(e,["usageMetadata"],c),e}function wz(t,e){let n={},i=g(e,["name"]);return i!=null&&v(n,["_url","name"],md(t,i)),n}function Ez(t,e){let n={},i=g(e,["name"]);return i!=null&&v(n,["_url","name"],md(t,i)),n}function Sz(t){let e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=g(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function Dz(t){let e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=g(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function Tz(t){let e={},n=g(t,["aspectRatio"]);n!=null&&v(e,["aspectRatio"],n);let i=g(t,["imageSize"]);if(i!=null&&v(e,["imageSize"],i),g(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Iz(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["request","model"],gn(t,i));let r=g(e,["contents"]);if(r!=null){let c=No(r);Array.isArray(c)&&(c=c.map(u=>DR(u))),v(n,["request","contents"],c)}let s=g(e,["metadata"]);s!=null&&v(n,["metadata"],s);let a=g(e,["config"]);return a!=null&&v(n,["request","generationConfig"],xz(t,a,g(n,["request"],{}))),n}function Az(t){let e={},n=g(t,["response"]);n!=null&&v(e,["response"],bz(n));let i=g(t,["error"]);return i!=null&&v(e,["error"],i),e}function Mz(t,e){let n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);let r=g(t,["pageToken"]);if(e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),g(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function kz(t,e){let n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);let r=g(t,["pageToken"]);e!==void 0&&r!=null&&v(e,["_query","pageToken"],r);let s=g(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),n}function Nz(t){let e={},n=g(t,["config"]);return n!=null&&Mz(n,e),e}function Fz(t){let e={},n=g(t,["config"]);return n!=null&&kz(n,e),e}function Rz(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);let r=g(t,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Qv(a))),v(e,["batchJobs"],s)}return e}function Pz(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);let r=g(t,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Jw(a))),v(e,["batchJobs"],s)}return e}function Lz(t){let e={},n=g(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);let i=g(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);let r=g(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);let s=g(t,["fileData"]);s!=null&&v(e,["fileData"],yz(s));let a=g(t,["functionCall"]);a!=null&&v(e,["functionCall"],_z(a));let c=g(t,["functionResponse"]);c!=null&&v(e,["functionResponse"],c);let u=g(t,["inlineData"]);u!=null&&v(e,["inlineData"],tz(u));let p=g(t,["text"]);p!=null&&v(e,["text"],p);let m=g(t,["thought"]);m!=null&&v(e,["thought"],m);let C=g(t,["thoughtSignature"]);C!=null&&v(e,["thoughtSignature"],C);let x=g(t,["videoMetadata"]);return x!=null&&v(e,["videoMetadata"],x),e}function Oz(t){let e={},n=g(t,["category"]);if(n!=null&&v(e,["category"],n),g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=g(t,["threshold"]);return i!=null&&v(e,["threshold"],i),e}function Vz(t){let e={},n=g(t,["retrievalConfig"]);n!=null&&v(e,["retrievalConfig"],n);let i=g(t,["functionCallingConfig"]);return i!=null&&v(e,["functionCallingConfig"],Cz(i)),e}function Bz(t){let e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=g(t,["computerUse"]);n!=null&&v(e,["computerUse"],n);let i=g(t,["fileSearch"]);i!=null&&v(e,["fileSearch"],i);let r=g(t,["codeExecution"]);if(r!=null&&v(e,["codeExecution"],r),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=g(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(C=>C)),v(e,["functionDeclarations"],m)}let a=g(t,["googleMaps"]);a!=null&&v(e,["googleMaps"],Sz(a));let c=g(t,["googleSearch"]);c!=null&&v(e,["googleSearch"],Dz(c));let u=g(t,["googleSearchRetrieval"]);u!=null&&v(e,["googleSearchRetrieval"],u);let p=g(t,["urlContext"]);return p!=null&&v(e,["urlContext"],p),e}var gl=(function(t){return t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents",t})(gl||{}),Ca=class{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var Qw=class extends is{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ca(gl.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){let n=$F(this.apiClient,e),i=n._url,r=yt("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,u=c.requests,p=[];for(let m of u){let C=Object.assign({},m);if(C.systemInstruction){let x=C.systemInstruction;delete C.systemInstruction;let E=C.request;E.systemInstruction=x,C.request=E}p.push(C)}return c.requests=p,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){let s=this.getGcsUri(e),a=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=lz(this.apiClient,e);return c=yt("batchPredictionJobs",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>Jw(m))}else{let p=$F(this.apiClient,e);return c=yt("{model}:batchGenerateContent",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>Qv(m))}}async createEmbeddingsInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=uz(this.apiClient,e);return s=yt("{model}:asyncBatchEmbedContent",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>Qv(u))}}async get(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=Ez(this.apiClient,e);return c=yt("batchPredictionJobs/{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>Jw(m))}else{let p=wz(this.apiClient,e);return c=yt("batches/{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>Qv(m))}}async cancel(e){var n,i,r,s;let a="",c={};if(this.apiClient.isVertexAI()){let u=iz(this.apiClient,e);a=yt("batchPredictionJobs/{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let u=nz(this.apiClient,e);a=yt("batches/{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=Fz(e);return c=yt("batchPredictionJobs",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=Pz(m),x=new cy;return Object.assign(x,C),x})}else{let p=Nz(e);return c=yt("batches",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=Rz(m),x=new cy;return Object.assign(x,C),x})}}async delete(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=fz(this.apiClient,e);return c=yt("batchPredictionJobs/{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>hz(m))}else{let p=dz(this.apiClient,e);return c=yt("batches/{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>pz(m))}}};function Hz(t){let e={},n=g(t,["data"]);if(n!=null&&v(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function qF(t){let e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>cG(s))),v(e,["parts"],r)}let i=g(t,["role"]);return i!=null&&v(e,["role"],i),e}function Uz(t,e){let n={},i=g(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);let r=g(t,["expireTime"]);e!==void 0&&r!=null&&v(e,["expireTime"],r);let s=g(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);let a=g(t,["contents"]);if(e!==void 0&&a!=null){let m=No(a);Array.isArray(m)&&(m=m.map(C=>qF(C))),v(e,["contents"],m)}let c=g(t,["systemInstruction"]);e!==void 0&&c!=null&&v(e,["systemInstruction"],qF(cr(c)));let u=g(t,["tools"]);if(e!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(C=>dG(C))),v(e,["tools"],m)}let p=g(t,["toolConfig"]);if(e!==void 0&&p!=null&&v(e,["toolConfig"],uG(p)),g(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function zz(t,e){let n={},i=g(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);let r=g(t,["expireTime"]);e!==void 0&&r!=null&&v(e,["expireTime"],r);let s=g(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);let a=g(t,["contents"]);if(e!==void 0&&a!=null){let C=No(a);Array.isArray(C)&&(C=C.map(x=>x)),v(e,["contents"],C)}let c=g(t,["systemInstruction"]);e!==void 0&&c!=null&&v(e,["systemInstruction"],cr(c));let u=g(t,["tools"]);if(e!==void 0&&u!=null){let C=u;Array.isArray(C)&&(C=C.map(x=>fG(x))),v(e,["tools"],C)}let p=g(t,["toolConfig"]);e!==void 0&&p!=null&&v(e,["toolConfig"],p);let m=g(t,["kmsKeyName"]);return e!==void 0&&m!=null&&v(e,["encryption_spec","kmsKeyName"],m),n}function Gz(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["model"],hR(t,i));let r=g(e,["config"]);return r!=null&&Uz(r,n),n}function $z(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["model"],hR(t,i));let r=g(e,["config"]);return r!=null&&zz(r,n),n}function qz(t,e){let n={},i=g(e,["name"]);return i!=null&&v(n,["_url","name"],xa(t,i)),n}function Wz(t,e){let n={},i=g(e,["name"]);return i!=null&&v(n,["_url","name"],xa(t,i)),n}function jz(t){let e={},n=g(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function Kz(t){let e={},n=g(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function Yz(t){let e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=g(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function Jz(t){let e={},n=g(t,["id"]);n!=null&&v(e,["id"],n);let i=g(t,["args"]);i!=null&&v(e,["args"],i);let r=g(t,["name"]);if(r!=null&&v(e,["name"],r),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Qz(t){let e={},n=g(t,["allowedFunctionNames"]);n!=null&&v(e,["allowedFunctionNames"],n);let i=g(t,["mode"]);if(i!=null&&v(e,["mode"],i),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Xz(t){let e={},n=g(t,["description"]);n!=null&&v(e,["description"],n);let i=g(t,["name"]);i!=null&&v(e,["name"],i);let r=g(t,["parameters"]);r!=null&&v(e,["parameters"],r);let s=g(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);let a=g(t,["response"]);a!=null&&v(e,["response"],a);let c=g(t,["responseJsonSchema"]);if(c!=null&&v(e,["responseJsonSchema"],c),g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Zz(t,e){let n={},i=g(e,["name"]);return i!=null&&v(n,["_url","name"],xa(t,i)),n}function eG(t,e){let n={},i=g(e,["name"]);return i!=null&&v(n,["_url","name"],xa(t,i)),n}function tG(t){let e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=g(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function nG(t){let e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=g(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function iG(t,e){let n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);let r=g(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function rG(t,e){let n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);let r=g(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function oG(t){let e={},n=g(t,["config"]);return n!=null&&iG(n,e),e}function sG(t){let e={},n=g(t,["config"]);return n!=null&&rG(n,e),e}function aG(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);let r=g(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),v(e,["cachedContents"],s)}return e}function lG(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);let r=g(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),v(e,["cachedContents"],s)}return e}function cG(t){let e={},n=g(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);let i=g(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);let r=g(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);let s=g(t,["fileData"]);s!=null&&v(e,["fileData"],Yz(s));let a=g(t,["functionCall"]);a!=null&&v(e,["functionCall"],Jz(a));let c=g(t,["functionResponse"]);c!=null&&v(e,["functionResponse"],c);let u=g(t,["inlineData"]);u!=null&&v(e,["inlineData"],Hz(u));let p=g(t,["text"]);p!=null&&v(e,["text"],p);let m=g(t,["thought"]);m!=null&&v(e,["thought"],m);let C=g(t,["thoughtSignature"]);C!=null&&v(e,["thoughtSignature"],C);let x=g(t,["videoMetadata"]);return x!=null&&v(e,["videoMetadata"],x),e}function uG(t){let e={},n=g(t,["retrievalConfig"]);n!=null&&v(e,["retrievalConfig"],n);let i=g(t,["functionCallingConfig"]);return i!=null&&v(e,["functionCallingConfig"],Qz(i)),e}function dG(t){let e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=g(t,["computerUse"]);n!=null&&v(e,["computerUse"],n);let i=g(t,["fileSearch"]);i!=null&&v(e,["fileSearch"],i);let r=g(t,["codeExecution"]);if(r!=null&&v(e,["codeExecution"],r),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=g(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(C=>C)),v(e,["functionDeclarations"],m)}let a=g(t,["googleMaps"]);a!=null&&v(e,["googleMaps"],tG(a));let c=g(t,["googleSearch"]);c!=null&&v(e,["googleSearch"],nG(c));let u=g(t,["googleSearchRetrieval"]);u!=null&&v(e,["googleSearchRetrieval"],u);let p=g(t,["urlContext"]);return p!=null&&v(e,["urlContext"],p),e}function fG(t){let e={},n=g(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);let i=g(t,["computerUse"]);if(i!=null&&v(e,["computerUse"],i),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let r=g(t,["codeExecution"]);r!=null&&v(e,["codeExecution"],r);let s=g(t,["enterpriseWebSearch"]);s!=null&&v(e,["enterpriseWebSearch"],s);let a=g(t,["functionDeclarations"]);if(a!=null){let C=a;Array.isArray(C)&&(C=C.map(x=>Xz(x))),v(e,["functionDeclarations"],C)}let c=g(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],c);let u=g(t,["googleSearch"]);u!=null&&v(e,["googleSearch"],u);let p=g(t,["googleSearchRetrieval"]);p!=null&&v(e,["googleSearchRetrieval"],p);let m=g(t,["urlContext"]);return m!=null&&v(e,["urlContext"],m),e}function pG(t,e){let n={},i=g(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);let r=g(t,["expireTime"]);return e!==void 0&&r!=null&&v(e,["expireTime"],r),n}function hG(t,e){let n={},i=g(t,["ttl"]);e!==void 0&&i!=null&&v(e,["ttl"],i);let r=g(t,["expireTime"]);return e!==void 0&&r!=null&&v(e,["expireTime"],r),n}function mG(t,e){let n={},i=g(e,["name"]);i!=null&&v(n,["_url","name"],xa(t,i));let r=g(e,["config"]);return r!=null&&pG(r,n),n}function gG(t,e){let n={},i=g(e,["name"]);i!=null&&v(n,["_url","name"],xa(t,i));let r=g(e,["config"]);return r!=null&&hG(r,n),n}var Xw=class extends is{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ca(gl.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=$z(this.apiClient,e);return c=yt("cachedContents",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{let p=Gz(this.apiClient,e);return c=yt("cachedContents",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async get(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=eG(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{let p=Zz(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=Wz(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=Kz(m),x=new ay;return Object.assign(x,C),x})}else{let p=qz(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=jz(m),x=new ay;return Object.assign(x,C),x})}}async update(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=gG(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>m)}else{let p=mG(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async listInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=sG(e);return c=yt("cachedContents",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=lG(m),x=new ly;return Object.assign(x,C),x})}else{let p=oG(e);return c=yt("cachedContents",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=aG(m),x=new ly;return Object.assign(x,C),x})}}};function dy(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function WF(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gt(t){return this instanceof Gt?(this.v=t,this):new Gt(t)}function ts(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(E){return function(A){return Promise.resolve(A).then(E,C)}}function c(E,A){i[E]&&(r[E]=function(N){return new Promise(function(R,k){s.push([E,N,R,k])>1||u(E,N)})},A&&(r[E]=A(r[E])))}function u(E,A){try{p(i[E](A))}catch(N){x(s[0][3],N)}}function p(E){E.value instanceof Gt?Promise.resolve(E.value.v).then(m,C):x(s[0][2],E)}function m(E){u("next",E)}function C(E){u("throw",E)}function x(E,A){E(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function ns(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof WF=="function"?WF(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(c,u){a=t[s](a),r(c,u,a.done,a.value)})}}function r(s,a,c,u){Promise.resolve(u).then(function(p){s({value:p,done:c})},a)}}function vG(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:TR(n)}function TR(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function yG(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function jF(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{let r=[],s=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),s&&!TR(t[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}var Zw=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new eE(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},eE=class{constructor(e,n,i,r={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),yG(s)}async sendMessage(e){var n;await this.sendPromise;let i=cr(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,a,c;let u=await r,p=(a=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,m=u.automaticFunctionCallingHistory,C=this.getHistory(!0).length,x=[];m!=null&&(x=(c=m.slice(C))!==null&&c!==void 0?c:[]);let E=p?[p]:[];this.recordHistory(i,E,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;let i=cr(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});let s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){let n=e?jF(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return ts(this,arguments,function*(){var r,s,a,c,u,p;let m=[];try{for(var C=!0,x=ns(e),E;E=yield Gt(x.next()),r=E.done,!r;C=!0){c=E.value,C=!1;let A=c;if(vG(A)){let N=(p=(u=A.candidates)===null||u===void 0?void 0:u[0])===null||p===void 0?void 0:p.content;N!==void 0&&m.push(N)}yield yield Gt(A)}}catch(A){s={error:A}}finally{try{!C&&!r&&(a=x.return)&&(yield Gt(a.call(x)))}finally{if(s)throw s.error}}this.recordHistory(n,m)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(s=>s.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...jF(i)):this.history.push(e),this.history.push(...r)}};var fy=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function _G(t){let e={},n=g(t,["file"]);return n!=null&&v(e,["file"],n),e}function CG(t){let e={},n=g(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function xG(t){let e={},n=g(t,["name"]);return n!=null&&v(e,["_url","file"],CR(n)),e}function bG(t){let e={},n=g(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function wG(t){let e={},n=g(t,["name"]);return n!=null&&v(e,["_url","file"],CR(n)),e}function EG(t,e){let n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);let r=g(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function SG(t){let e={},n=g(t,["config"]);return n!=null&&EG(n,e),e}function DG(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);let r=g(t,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),v(e,["files"],s)}return e}var tE=class extends is{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ca(gl.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=SG(e);return s=yt("files",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:u.headers},m})),r.then(u=>{let p=DG(u),m=new Gw;return Object.assign(m,p),m})}}async createInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=_G(e);return s=yt("upload/v1beta/files",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{let p=CG(u),m=new $w;return Object.assign(m,p),m})}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=wG(e);return s=yt("files/{file}",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=xG(e);return s=yt("files/{file}",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:u.headers},m})),r.then(u=>{let p=bG(u),m=new qw;return Object.assign(m,p),m})}}};function Xv(t){let e={},n=g(t,["data"]);if(n!=null&&v(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function TG(t){let e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>GG(s))),v(e,["parts"],r)}let i=g(t,["role"]);return i!=null&&v(e,["role"],i),e}function IG(t){let e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=g(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function AG(t){let e={},n=g(t,["id"]);n!=null&&v(e,["id"],n);let i=g(t,["args"]);i!=null&&v(e,["args"],i);let r=g(t,["name"]);if(r!=null&&v(e,["name"],r),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function MG(t){let e={},n=g(t,["description"]);n!=null&&v(e,["description"],n);let i=g(t,["name"]);i!=null&&v(e,["name"],i);let r=g(t,["parameters"]);r!=null&&v(e,["parameters"],r);let s=g(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);let a=g(t,["response"]);a!=null&&v(e,["response"],a);let c=g(t,["responseJsonSchema"]);if(c!=null&&v(e,["responseJsonSchema"],c),g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function kG(t){let e={},n=g(t,["modelSelectionConfig"]);n!=null&&v(e,["modelConfig"],n);let i=g(t,["responseJsonSchema"]);i!=null&&v(e,["responseJsonSchema"],i);let r=g(t,["audioTimestamp"]);r!=null&&v(e,["audioTimestamp"],r);let s=g(t,["candidateCount"]);s!=null&&v(e,["candidateCount"],s);let a=g(t,["enableAffectiveDialog"]);a!=null&&v(e,["enableAffectiveDialog"],a);let c=g(t,["frequencyPenalty"]);c!=null&&v(e,["frequencyPenalty"],c);let u=g(t,["logprobs"]);u!=null&&v(e,["logprobs"],u);let p=g(t,["maxOutputTokens"]);p!=null&&v(e,["maxOutputTokens"],p);let m=g(t,["mediaResolution"]);m!=null&&v(e,["mediaResolution"],m);let C=g(t,["presencePenalty"]);C!=null&&v(e,["presencePenalty"],C);let x=g(t,["responseLogprobs"]);x!=null&&v(e,["responseLogprobs"],x);let E=g(t,["responseMimeType"]);E!=null&&v(e,["responseMimeType"],E);let A=g(t,["responseModalities"]);A!=null&&v(e,["responseModalities"],A);let N=g(t,["responseSchema"]);N!=null&&v(e,["responseSchema"],N);let R=g(t,["routingConfig"]);R!=null&&v(e,["routingConfig"],R);let k=g(t,["seed"]);k!=null&&v(e,["seed"],k);let B=g(t,["speechConfig"]);B!=null&&v(e,["speechConfig"],B);let $=g(t,["stopSequences"]);$!=null&&v(e,["stopSequences"],$);let q=g(t,["temperature"]);q!=null&&v(e,["temperature"],q);let X=g(t,["thinkingConfig"]);X!=null&&v(e,["thinkingConfig"],X);let ie=g(t,["topK"]);ie!=null&&v(e,["topK"],ie);let me=g(t,["topP"]);if(me!=null&&v(e,["topP"],me),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function NG(t){let e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=g(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function FG(t){let e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=g(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function RG(t,e){let n={},i=g(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],i);let r=g(t,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);let s=g(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);let a=g(t,["topP"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","topP"],a);let c=g(t,["topK"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topK"],c);let u=g(t,["maxOutputTokens"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","maxOutputTokens"],u);let p=g(t,["mediaResolution"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","mediaResolution"],p);let m=g(t,["seed"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","seed"],m);let C=g(t,["speechConfig"]);e!==void 0&&C!=null&&v(e,["setup","generationConfig","speechConfig"],RE(C));let x=g(t,["thinkingConfig"]);e!==void 0&&x!=null&&v(e,["setup","generationConfig","thinkingConfig"],x);let E=g(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],E);let A=g(t,["systemInstruction"]);e!==void 0&&A!=null&&v(e,["setup","systemInstruction"],TG(cr(A)));let N=g(t,["tools"]);if(e!==void 0&&N!=null){let ie=hd(N);Array.isArray(ie)&&(ie=ie.map(me=>qG(pd(me)))),v(e,["setup","tools"],ie)}let R=g(t,["sessionResumption"]);e!==void 0&&R!=null&&v(e,["setup","sessionResumption"],$G(R));let k=g(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&v(e,["setup","inputAudioTranscription"],k);let B=g(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],B);let $=g(t,["realtimeInputConfig"]);e!==void 0&&$!=null&&v(e,["setup","realtimeInputConfig"],$);let q=g(t,["contextWindowCompression"]);e!==void 0&&q!=null&&v(e,["setup","contextWindowCompression"],q);let X=g(t,["proactivity"]);if(e!==void 0&&X!=null&&v(e,["setup","proactivity"],X),g(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function PG(t,e){let n={},i=g(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],kG(i));let r=g(t,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);let s=g(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);let a=g(t,["topP"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","topP"],a);let c=g(t,["topK"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topK"],c);let u=g(t,["maxOutputTokens"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","maxOutputTokens"],u);let p=g(t,["mediaResolution"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","mediaResolution"],p);let m=g(t,["seed"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","seed"],m);let C=g(t,["speechConfig"]);e!==void 0&&C!=null&&v(e,["setup","generationConfig","speechConfig"],RE(C));let x=g(t,["thinkingConfig"]);e!==void 0&&x!=null&&v(e,["setup","generationConfig","thinkingConfig"],x);let E=g(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],E);let A=g(t,["systemInstruction"]);e!==void 0&&A!=null&&v(e,["setup","systemInstruction"],cr(A));let N=g(t,["tools"]);if(e!==void 0&&N!=null){let me=hd(N);Array.isArray(me)&&(me=me.map(ye=>WG(pd(ye)))),v(e,["setup","tools"],me)}let R=g(t,["sessionResumption"]);e!==void 0&&R!=null&&v(e,["setup","sessionResumption"],R);let k=g(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&v(e,["setup","inputAudioTranscription"],k);let B=g(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],B);let $=g(t,["realtimeInputConfig"]);e!==void 0&&$!=null&&v(e,["setup","realtimeInputConfig"],$);let q=g(t,["contextWindowCompression"]);e!==void 0&&q!=null&&v(e,["setup","contextWindowCompression"],q);let X=g(t,["proactivity"]);e!==void 0&&X!=null&&v(e,["setup","proactivity"],X);let ie=g(t,["explicitVadSignal"]);return e!==void 0&&ie!=null&&v(e,["setup","explicitVadSignal"],ie),n}function LG(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["setup","model"],gn(t,i));let r=g(e,["config"]);return r!=null&&v(n,["config"],RG(r,n)),n}function OG(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["setup","model"],gn(t,i));let r=g(e,["config"]);return r!=null&&v(n,["config"],PG(r,n)),n}function VG(t){let e={},n=g(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],n),e}function BG(t){let e={},n=g(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["weightedPrompts"],i)}return e}function HG(t){let e={},n=g(t,["media"]);if(n!=null){let p=mR(n);Array.isArray(p)&&(p=p.map(m=>Xv(m))),v(e,["mediaChunks"],p)}let i=g(t,["audio"]);i!=null&&v(e,["audio"],Xv(vR(i)));let r=g(t,["audioStreamEnd"]);r!=null&&v(e,["audioStreamEnd"],r);let s=g(t,["video"]);s!=null&&v(e,["video"],Xv(gR(s)));let a=g(t,["text"]);a!=null&&v(e,["text"],a);let c=g(t,["activityStart"]);c!=null&&v(e,["activityStart"],c);let u=g(t,["activityEnd"]);return u!=null&&v(e,["activityEnd"],u),e}function UG(t){let e={},n=g(t,["media"]);if(n!=null){let p=mR(n);Array.isArray(p)&&(p=p.map(m=>m)),v(e,["mediaChunks"],p)}let i=g(t,["audio"]);i!=null&&v(e,["audio"],vR(i));let r=g(t,["audioStreamEnd"]);r!=null&&v(e,["audioStreamEnd"],r);let s=g(t,["video"]);s!=null&&v(e,["video"],gR(s));let a=g(t,["text"]);a!=null&&v(e,["text"],a);let c=g(t,["activityStart"]);c!=null&&v(e,["activityStart"],c);let u=g(t,["activityEnd"]);return u!=null&&v(e,["activityEnd"],u),e}function zG(t){let e={},n=g(t,["setupComplete"]);n!=null&&v(e,["setupComplete"],n);let i=g(t,["serverContent"]);i!=null&&v(e,["serverContent"],i);let r=g(t,["toolCall"]);r!=null&&v(e,["toolCall"],r);let s=g(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],s);let a=g(t,["usageMetadata"]);a!=null&&v(e,["usageMetadata"],jG(a));let c=g(t,["goAway"]);c!=null&&v(e,["goAway"],c);let u=g(t,["sessionResumptionUpdate"]);u!=null&&v(e,["sessionResumptionUpdate"],u);let p=g(t,["voiceActivityDetectionSignal"]);return p!=null&&v(e,["voiceActivityDetectionSignal"],p),e}function GG(t){let e={},n=g(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);let i=g(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);let r=g(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);let s=g(t,["fileData"]);s!=null&&v(e,["fileData"],IG(s));let a=g(t,["functionCall"]);a!=null&&v(e,["functionCall"],AG(a));let c=g(t,["functionResponse"]);c!=null&&v(e,["functionResponse"],c);let u=g(t,["inlineData"]);u!=null&&v(e,["inlineData"],Xv(u));let p=g(t,["text"]);p!=null&&v(e,["text"],p);let m=g(t,["thought"]);m!=null&&v(e,["thought"],m);let C=g(t,["thoughtSignature"]);C!=null&&v(e,["thoughtSignature"],C);let x=g(t,["videoMetadata"]);return x!=null&&v(e,["videoMetadata"],x),e}function $G(t){let e={},n=g(t,["handle"]);if(n!=null&&v(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qG(t){let e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=g(t,["computerUse"]);n!=null&&v(e,["computerUse"],n);let i=g(t,["fileSearch"]);i!=null&&v(e,["fileSearch"],i);let r=g(t,["codeExecution"]);if(r!=null&&v(e,["codeExecution"],r),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=g(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(C=>C)),v(e,["functionDeclarations"],m)}let a=g(t,["googleMaps"]);a!=null&&v(e,["googleMaps"],NG(a));let c=g(t,["googleSearch"]);c!=null&&v(e,["googleSearch"],FG(c));let u=g(t,["googleSearchRetrieval"]);u!=null&&v(e,["googleSearchRetrieval"],u);let p=g(t,["urlContext"]);return p!=null&&v(e,["urlContext"],p),e}function WG(t){let e={},n=g(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);let i=g(t,["computerUse"]);if(i!=null&&v(e,["computerUse"],i),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let r=g(t,["codeExecution"]);r!=null&&v(e,["codeExecution"],r);let s=g(t,["enterpriseWebSearch"]);s!=null&&v(e,["enterpriseWebSearch"],s);let a=g(t,["functionDeclarations"]);if(a!=null){let C=a;Array.isArray(C)&&(C=C.map(x=>MG(x))),v(e,["functionDeclarations"],C)}let c=g(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],c);let u=g(t,["googleSearch"]);u!=null&&v(e,["googleSearch"],u);let p=g(t,["googleSearchRetrieval"]);p!=null&&v(e,["googleSearchRetrieval"],p);let m=g(t,["urlContext"]);return m!=null&&v(e,["urlContext"],m),e}function jG(t){let e={},n=g(t,["promptTokenCount"]);n!=null&&v(e,["promptTokenCount"],n);let i=g(t,["cachedContentTokenCount"]);i!=null&&v(e,["cachedContentTokenCount"],i);let r=g(t,["candidatesTokenCount"]);r!=null&&v(e,["responseTokenCount"],r);let s=g(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);let a=g(t,["thoughtsTokenCount"]);a!=null&&v(e,["thoughtsTokenCount"],a);let c=g(t,["totalTokenCount"]);c!=null&&v(e,["totalTokenCount"],c);let u=g(t,["promptTokensDetails"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(A=>A)),v(e,["promptTokensDetails"],E)}let p=g(t,["cacheTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(A=>A)),v(e,["cacheTokensDetails"],E)}let m=g(t,["candidatesTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(A=>A)),v(e,["responseTokensDetails"],E)}let C=g(t,["toolUsePromptTokensDetails"]);if(C!=null){let E=C;Array.isArray(E)&&(E=E.map(A=>A)),v(e,["toolUsePromptTokensDetails"],E)}let x=g(t,["trafficType"]);return x!=null&&v(e,["trafficType"],x),e}function KG(t){let e={},n=g(t,["data"]);if(n!=null&&v(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function YG(t){let e={},n=g(t,["content"]);n!=null&&v(e,["content"],n);let i=g(t,["citationMetadata"]);i!=null&&v(e,["citationMetadata"],JG(i));let r=g(t,["tokenCount"]);r!=null&&v(e,["tokenCount"],r);let s=g(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);let a=g(t,["avgLogprobs"]);a!=null&&v(e,["avgLogprobs"],a);let c=g(t,["groundingMetadata"]);c!=null&&v(e,["groundingMetadata"],c);let u=g(t,["index"]);u!=null&&v(e,["index"],u);let p=g(t,["logprobsResult"]);p!=null&&v(e,["logprobsResult"],p);let m=g(t,["safetyRatings"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(E=>E)),v(e,["safetyRatings"],x)}let C=g(t,["urlContextMetadata"]);return C!=null&&v(e,["urlContextMetadata"],C),e}function JG(t){let e={},n=g(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),v(e,["citations"],i)}return e}function QG(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["contents"]);if(r!=null){let s=No(r);Array.isArray(s)&&(s=s.map(a=>a)),v(n,["contents"],s)}return n}function XG(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),v(e,["tokensInfo"],r)}return e}function ZG(t){let e={},n=g(t,["values"]);n!=null&&v(e,["values"],n);let i=g(t,["statistics"]);return i!=null&&v(e,["statistics"],e$(i)),e}function e$(t){let e={},n=g(t,["truncated"]);n!=null&&v(e,["truncated"],n);let i=g(t,["token_count"]);return i!=null&&v(e,["tokenCount"],i),e}function Ty(t){let e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>cq(s))),v(e,["parts"],r)}let i=g(t,["role"]);return i!=null&&v(e,["role"],i),e}function t$(t){let e={},n=g(t,["controlType"]);n!=null&&v(e,["controlType"],n);let i=g(t,["enableControlImageComputation"]);return i!=null&&v(e,["computeControl"],i),e}function n$(t){let e={};if(g(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function i$(t,e){let n={},i=g(t,["systemInstruction"]);e!==void 0&&i!=null&&v(e,["systemInstruction"],cr(i));let r=g(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>kR(c))),v(e,["tools"],a)}let s=g(t,["generationConfig"]);return e!==void 0&&s!=null&&v(e,["generationConfig"],K$(s)),n}function r$(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["contents"]);if(r!=null){let a=No(r);Array.isArray(a)&&(a=a.map(c=>Ty(c))),v(n,["contents"],a)}let s=g(e,["config"]);return s!=null&&n$(s),n}function o$(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["contents"]);if(r!=null){let a=No(r);Array.isArray(a)&&(a=a.map(c=>c)),v(n,["contents"],a)}let s=g(e,["config"]);return s!=null&&i$(s,n),n}function s$(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["totalTokens"]);i!=null&&v(e,["totalTokens"],i);let r=g(t,["cachedContentTokenCount"]);return r!=null&&v(e,["cachedContentTokenCount"],r),e}function a$(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["totalTokens"]);return i!=null&&v(e,["totalTokens"],i),e}function l$(t,e){let n={},i=g(e,["model"]);return i!=null&&v(n,["_url","name"],gn(t,i)),n}function c$(t,e){let n={},i=g(e,["model"]);return i!=null&&v(n,["_url","name"],gn(t,i)),n}function u$(t){let e={},n=g(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function d$(t){let e={},n=g(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function f$(t,e){let n={},i=g(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);let r=g(t,["negativePrompt"]);e!==void 0&&r!=null&&v(e,["parameters","negativePrompt"],r);let s=g(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);let a=g(t,["aspectRatio"]);e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a);let c=g(t,["guidanceScale"]);e!==void 0&&c!=null&&v(e,["parameters","guidanceScale"],c);let u=g(t,["seed"]);e!==void 0&&u!=null&&v(e,["parameters","seed"],u);let p=g(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&v(e,["parameters","safetySetting"],p);let m=g(t,["personGeneration"]);e!==void 0&&m!=null&&v(e,["parameters","personGeneration"],m);let C=g(t,["includeSafetyAttributes"]);e!==void 0&&C!=null&&v(e,["parameters","includeSafetyAttributes"],C);let x=g(t,["includeRaiReason"]);e!==void 0&&x!=null&&v(e,["parameters","includeRaiReason"],x);let E=g(t,["language"]);e!==void 0&&E!=null&&v(e,["parameters","language"],E);let A=g(t,["outputMimeType"]);e!==void 0&&A!=null&&v(e,["parameters","outputOptions","mimeType"],A);let N=g(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&v(e,["parameters","outputOptions","compressionQuality"],N);let R=g(t,["addWatermark"]);e!==void 0&&R!=null&&v(e,["parameters","addWatermark"],R);let k=g(t,["labels"]);e!==void 0&&k!=null&&v(e,["labels"],k);let B=g(t,["editMode"]);e!==void 0&&B!=null&&v(e,["parameters","editMode"],B);let $=g(t,["baseSteps"]);return e!==void 0&&$!=null&&v(e,["parameters","editConfig","baseSteps"],$),n}function p$(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);let s=g(e,["referenceImages"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(u=>mq(u))),v(n,["instances[0]","referenceImages"],c)}let a=g(e,["config"]);return a!=null&&f$(a,n),n}function h$(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Iy(s))),v(e,["generatedImages"],r)}return e}function m$(t,e){let n={},i=g(t,["taskType"]);e!==void 0&&i!=null&&v(e,["requests[]","taskType"],i);let r=g(t,["title"]);e!==void 0&&r!=null&&v(e,["requests[]","title"],r);let s=g(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&v(e,["requests[]","outputDimensionality"],s),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function g$(t,e){let n={},i=g(t,["taskType"]);e!==void 0&&i!=null&&v(e,["instances[]","task_type"],i);let r=g(t,["title"]);e!==void 0&&r!=null&&v(e,["instances[]","title"],r);let s=g(t,["outputDimensionality"]);e!==void 0&&s!=null&&v(e,["parameters","outputDimensionality"],s);let a=g(t,["mimeType"]);e!==void 0&&a!=null&&v(e,["instances[]","mimeType"],a);let c=g(t,["autoTruncate"]);return e!==void 0&&c!=null&&v(e,["parameters","autoTruncate"],c),n}function v$(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["contents"]);if(r!=null){let c=kE(t,r);Array.isArray(c)&&(c=c.map(u=>u)),v(n,["requests[]","content"],c)}let s=g(e,["config"]);s!=null&&m$(s,n);let a=g(e,["model"]);return a!==void 0&&v(n,["requests[]","model"],gn(t,a)),n}function y$(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["contents"]);if(r!=null){let a=kE(t,r);Array.isArray(a)&&(a=a.map(c=>c)),v(n,["instances[]","content"],a)}let s=g(e,["config"]);return s!=null&&g$(s,n),n}function _$(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),v(e,["embeddings"],s)}let r=g(t,["metadata"]);return r!=null&&v(e,["metadata"],r),e}function C$(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>ZG(a))),v(e,["embeddings"],s)}let r=g(t,["metadata"]);return r!=null&&v(e,["metadata"],r),e}function x$(t){let e={},n=g(t,["endpoint"]);n!=null&&v(e,["name"],n);let i=g(t,["deployedModelId"]);return i!=null&&v(e,["deployedModelId"],i),e}function b$(t){let e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=g(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function w$(t){let e={},n=g(t,["id"]);n!=null&&v(e,["id"],n);let i=g(t,["args"]);i!=null&&v(e,["args"],i);let r=g(t,["name"]);if(r!=null&&v(e,["name"],r),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function E$(t){let e={},n=g(t,["allowedFunctionNames"]);n!=null&&v(e,["allowedFunctionNames"],n);let i=g(t,["mode"]);if(i!=null&&v(e,["mode"],i),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function S$(t){let e={},n=g(t,["description"]);n!=null&&v(e,["description"],n);let i=g(t,["name"]);i!=null&&v(e,["name"],i);let r=g(t,["parameters"]);r!=null&&v(e,["parameters"],r);let s=g(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);let a=g(t,["response"]);a!=null&&v(e,["response"],a);let c=g(t,["responseJsonSchema"]);if(c!=null&&v(e,["responseJsonSchema"],c),g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function D$(t,e,n){let i={},r=g(e,["systemInstruction"]);n!==void 0&&r!=null&&v(n,["systemInstruction"],Ty(cr(r)));let s=g(e,["temperature"]);s!=null&&v(i,["temperature"],s);let a=g(e,["topP"]);a!=null&&v(i,["topP"],a);let c=g(e,["topK"]);c!=null&&v(i,["topK"],c);let u=g(e,["candidateCount"]);u!=null&&v(i,["candidateCount"],u);let p=g(e,["maxOutputTokens"]);p!=null&&v(i,["maxOutputTokens"],p);let m=g(e,["stopSequences"]);m!=null&&v(i,["stopSequences"],m);let C=g(e,["responseLogprobs"]);C!=null&&v(i,["responseLogprobs"],C);let x=g(e,["logprobs"]);x!=null&&v(i,["logprobs"],x);let E=g(e,["presencePenalty"]);E!=null&&v(i,["presencePenalty"],E);let A=g(e,["frequencyPenalty"]);A!=null&&v(i,["frequencyPenalty"],A);let N=g(e,["seed"]);N!=null&&v(i,["seed"],N);let R=g(e,["responseMimeType"]);R!=null&&v(i,["responseMimeType"],R);let k=g(e,["responseSchema"]);k!=null&&v(i,["responseSchema"],NE(k));let B=g(e,["responseJsonSchema"]);if(B!=null&&v(i,["responseJsonSchema"],B),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let $=g(e,["safetySettings"]);if(n!==void 0&&$!=null){let H=$;Array.isArray(H)&&(H=H.map(Ae=>gq(Ae))),v(n,["safetySettings"],H)}let q=g(e,["tools"]);if(n!==void 0&&q!=null){let H=hd(q);Array.isArray(H)&&(H=H.map(Ae=>wq(pd(Ae)))),v(n,["tools"],H)}let X=g(e,["toolConfig"]);if(n!==void 0&&X!=null&&v(n,["toolConfig"],bq(X)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let ie=g(e,["cachedContent"]);n!==void 0&&ie!=null&&v(n,["cachedContent"],xa(t,ie));let me=g(e,["responseModalities"]);me!=null&&v(i,["responseModalities"],me);let ye=g(e,["mediaResolution"]);ye!=null&&v(i,["mediaResolution"],ye);let ge=g(e,["speechConfig"]);if(ge!=null&&v(i,["speechConfig"],FE(ge)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let Te=g(e,["thinkingConfig"]);Te!=null&&v(i,["thinkingConfig"],Te);let j=g(e,["imageConfig"]);j!=null&&v(i,["imageConfig"],Z$(j));let le=g(e,["enableEnhancedCivicAnswers"]);return le!=null&&v(i,["enableEnhancedCivicAnswers"],le),i}function T$(t,e,n){let i={},r=g(e,["systemInstruction"]);n!==void 0&&r!=null&&v(n,["systemInstruction"],cr(r));let s=g(e,["temperature"]);s!=null&&v(i,["temperature"],s);let a=g(e,["topP"]);a!=null&&v(i,["topP"],a);let c=g(e,["topK"]);c!=null&&v(i,["topK"],c);let u=g(e,["candidateCount"]);u!=null&&v(i,["candidateCount"],u);let p=g(e,["maxOutputTokens"]);p!=null&&v(i,["maxOutputTokens"],p);let m=g(e,["stopSequences"]);m!=null&&v(i,["stopSequences"],m);let C=g(e,["responseLogprobs"]);C!=null&&v(i,["responseLogprobs"],C);let x=g(e,["logprobs"]);x!=null&&v(i,["logprobs"],x);let E=g(e,["presencePenalty"]);E!=null&&v(i,["presencePenalty"],E);let A=g(e,["frequencyPenalty"]);A!=null&&v(i,["frequencyPenalty"],A);let N=g(e,["seed"]);N!=null&&v(i,["seed"],N);let R=g(e,["responseMimeType"]);R!=null&&v(i,["responseMimeType"],R);let k=g(e,["responseSchema"]);k!=null&&v(i,["responseSchema"],NE(k));let B=g(e,["responseJsonSchema"]);B!=null&&v(i,["responseJsonSchema"],B);let $=g(e,["routingConfig"]);$!=null&&v(i,["routingConfig"],$);let q=g(e,["modelSelectionConfig"]);q!=null&&v(i,["modelConfig"],q);let X=g(e,["safetySettings"]);if(n!==void 0&&X!=null){let Xe=X;Array.isArray(Xe)&&(Xe=Xe.map(pt=>pt)),v(n,["safetySettings"],Xe)}let ie=g(e,["tools"]);if(n!==void 0&&ie!=null){let Xe=hd(ie);Array.isArray(Xe)&&(Xe=Xe.map(pt=>kR(pd(pt)))),v(n,["tools"],Xe)}let me=g(e,["toolConfig"]);n!==void 0&&me!=null&&v(n,["toolConfig"],me);let ye=g(e,["labels"]);n!==void 0&&ye!=null&&v(n,["labels"],ye);let ge=g(e,["cachedContent"]);n!==void 0&&ge!=null&&v(n,["cachedContent"],xa(t,ge));let Te=g(e,["responseModalities"]);Te!=null&&v(i,["responseModalities"],Te);let j=g(e,["mediaResolution"]);j!=null&&v(i,["mediaResolution"],j);let le=g(e,["speechConfig"]);le!=null&&v(i,["speechConfig"],FE(le));let H=g(e,["audioTimestamp"]);H!=null&&v(i,["audioTimestamp"],H);let Ae=g(e,["thinkingConfig"]);Ae!=null&&v(i,["thinkingConfig"],Ae);let ht=g(e,["imageConfig"]);if(ht!=null&&v(i,["imageConfig"],eq(ht)),g(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function KF(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["contents"]);if(r!=null){let a=No(r);Array.isArray(a)&&(a=a.map(c=>Ty(c))),v(n,["contents"],a)}let s=g(e,["config"]);return s!=null&&v(n,["generationConfig"],D$(t,s,n)),n}function YF(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["contents"]);if(r!=null){let a=No(r);Array.isArray(a)&&(a=a.map(c=>c)),v(n,["contents"],a)}let s=g(e,["config"]);return s!=null&&v(n,["generationConfig"],T$(t,s,n)),n}function JF(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(p=>YG(p))),v(e,["candidates"],u)}let r=g(t,["modelVersion"]);r!=null&&v(e,["modelVersion"],r);let s=g(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);let a=g(t,["responseId"]);a!=null&&v(e,["responseId"],a);let c=g(t,["usageMetadata"]);return c!=null&&v(e,["usageMetadata"],c),e}function QF(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),v(e,["candidates"],p)}let r=g(t,["createTime"]);r!=null&&v(e,["createTime"],r);let s=g(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);let a=g(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);let c=g(t,["responseId"]);c!=null&&v(e,["responseId"],c);let u=g(t,["usageMetadata"]);return u!=null&&v(e,["usageMetadata"],u),e}function I$(t,e){let n={};if(g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=g(t,["numberOfImages"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);let r=g(t,["aspectRatio"]);e!==void 0&&r!=null&&v(e,["parameters","aspectRatio"],r);let s=g(t,["guidanceScale"]);if(e!==void 0&&s!=null&&v(e,["parameters","guidanceScale"],s),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=g(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&v(e,["parameters","safetySetting"],a);let c=g(t,["personGeneration"]);e!==void 0&&c!=null&&v(e,["parameters","personGeneration"],c);let u=g(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&v(e,["parameters","includeSafetyAttributes"],u);let p=g(t,["includeRaiReason"]);e!==void 0&&p!=null&&v(e,["parameters","includeRaiReason"],p);let m=g(t,["language"]);e!==void 0&&m!=null&&v(e,["parameters","language"],m);let C=g(t,["outputMimeType"]);e!==void 0&&C!=null&&v(e,["parameters","outputOptions","mimeType"],C);let x=g(t,["outputCompressionQuality"]);if(e!==void 0&&x!=null&&v(e,["parameters","outputOptions","compressionQuality"],x),g(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let E=g(t,["imageSize"]);if(e!==void 0&&E!=null&&v(e,["parameters","sampleImageSize"],E),g(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function A$(t,e){let n={},i=g(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);let r=g(t,["negativePrompt"]);e!==void 0&&r!=null&&v(e,["parameters","negativePrompt"],r);let s=g(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);let a=g(t,["aspectRatio"]);e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a);let c=g(t,["guidanceScale"]);e!==void 0&&c!=null&&v(e,["parameters","guidanceScale"],c);let u=g(t,["seed"]);e!==void 0&&u!=null&&v(e,["parameters","seed"],u);let p=g(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&v(e,["parameters","safetySetting"],p);let m=g(t,["personGeneration"]);e!==void 0&&m!=null&&v(e,["parameters","personGeneration"],m);let C=g(t,["includeSafetyAttributes"]);e!==void 0&&C!=null&&v(e,["parameters","includeSafetyAttributes"],C);let x=g(t,["includeRaiReason"]);e!==void 0&&x!=null&&v(e,["parameters","includeRaiReason"],x);let E=g(t,["language"]);e!==void 0&&E!=null&&v(e,["parameters","language"],E);let A=g(t,["outputMimeType"]);e!==void 0&&A!=null&&v(e,["parameters","outputOptions","mimeType"],A);let N=g(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&v(e,["parameters","outputOptions","compressionQuality"],N);let R=g(t,["addWatermark"]);e!==void 0&&R!=null&&v(e,["parameters","addWatermark"],R);let k=g(t,["labels"]);e!==void 0&&k!=null&&v(e,["labels"],k);let B=g(t,["imageSize"]);e!==void 0&&B!=null&&v(e,["parameters","sampleImageSize"],B);let $=g(t,["enhancePrompt"]);return e!==void 0&&$!=null&&v(e,["parameters","enhancePrompt"],$),n}function M$(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);let s=g(e,["config"]);return s!=null&&I$(s,n),n}function k$(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);let s=g(e,["config"]);return s!=null&&A$(s,n),n}function N$(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>$$(a))),v(e,["generatedImages"],s)}let r=g(t,["positivePromptSafetyAttributes"]);return r!=null&&v(e,["positivePromptSafetyAttributes"],AR(r)),e}function F$(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Iy(a))),v(e,["generatedImages"],s)}let r=g(t,["positivePromptSafetyAttributes"]);return r!=null&&v(e,["positivePromptSafetyAttributes"],MR(r)),e}function R$(t,e){let n={},i=g(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i),g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let r=g(t,["durationSeconds"]);if(e!==void 0&&r!=null&&v(e,["parameters","durationSeconds"],r),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=g(t,["aspectRatio"]);e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s);let a=g(t,["resolution"]);e!==void 0&&a!=null&&v(e,["parameters","resolution"],a);let c=g(t,["personGeneration"]);if(e!==void 0&&c!=null&&v(e,["parameters","personGeneration"],c),g(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let u=g(t,["negativePrompt"]);e!==void 0&&u!=null&&v(e,["parameters","negativePrompt"],u);let p=g(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&v(e,["parameters","enhancePrompt"],p),g(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let m=g(t,["lastFrame"]);e!==void 0&&m!=null&&v(e,["instances[0]","lastFrame"],Ay(m));let C=g(t,["referenceImages"]);if(e!==void 0&&C!=null){let x=C;Array.isArray(x)&&(x=x.map(E=>Lq(E))),v(e,["instances[0]","referenceImages"],x)}if(g(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(g(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function P$(t,e){let n={},i=g(t,["numberOfVideos"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);let r=g(t,["outputGcsUri"]);e!==void 0&&r!=null&&v(e,["parameters","storageUri"],r);let s=g(t,["fps"]);e!==void 0&&s!=null&&v(e,["parameters","fps"],s);let a=g(t,["durationSeconds"]);e!==void 0&&a!=null&&v(e,["parameters","durationSeconds"],a);let c=g(t,["seed"]);e!==void 0&&c!=null&&v(e,["parameters","seed"],c);let u=g(t,["aspectRatio"]);e!==void 0&&u!=null&&v(e,["parameters","aspectRatio"],u);let p=g(t,["resolution"]);e!==void 0&&p!=null&&v(e,["parameters","resolution"],p);let m=g(t,["personGeneration"]);e!==void 0&&m!=null&&v(e,["parameters","personGeneration"],m);let C=g(t,["pubsubTopic"]);e!==void 0&&C!=null&&v(e,["parameters","pubsubTopic"],C);let x=g(t,["negativePrompt"]);e!==void 0&&x!=null&&v(e,["parameters","negativePrompt"],x);let E=g(t,["enhancePrompt"]);e!==void 0&&E!=null&&v(e,["parameters","enhancePrompt"],E);let A=g(t,["generateAudio"]);e!==void 0&&A!=null&&v(e,["parameters","generateAudio"],A);let N=g(t,["lastFrame"]);e!==void 0&&N!=null&&v(e,["instances[0]","lastFrame"],rs(N));let R=g(t,["referenceImages"]);if(e!==void 0&&R!=null){let $=R;Array.isArray($)&&($=$.map(q=>Oq(q))),v(e,["instances[0]","referenceImages"],$)}let k=g(t,["mask"]);e!==void 0&&k!=null&&v(e,["instances[0]","mask"],Pq(k));let B=g(t,["compressionQuality"]);return e!==void 0&&B!=null&&v(e,["parameters","compressionQuality"],B),n}function L$(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["metadata"]);i!=null&&v(e,["metadata"],i);let r=g(t,["done"]);r!=null&&v(e,["done"],r);let s=g(t,["error"]);s!=null&&v(e,["error"],s);let a=g(t,["response","generateVideoResponse"]);return a!=null&&v(e,["response"],H$(a)),e}function O$(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["metadata"]);i!=null&&v(e,["metadata"],i);let r=g(t,["done"]);r!=null&&v(e,["done"],r);let s=g(t,["error"]);s!=null&&v(e,["error"],s);let a=g(t,["response"]);return a!=null&&v(e,["response"],U$(a)),e}function V$(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);let s=g(e,["image"]);s!=null&&v(n,["instances[0]","image"],Ay(s));let a=g(e,["video"]);a!=null&&v(n,["instances[0]","video"],NR(a));let c=g(e,["source"]);c!=null&&z$(c,n);let u=g(e,["config"]);return u!=null&&R$(u,n),n}function B$(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["prompt"]);r!=null&&v(n,["instances[0]","prompt"],r);let s=g(e,["image"]);s!=null&&v(n,["instances[0]","image"],rs(s));let a=g(e,["video"]);a!=null&&v(n,["instances[0]","video"],FR(a));let c=g(e,["source"]);c!=null&&G$(c,n);let u=g(e,["config"]);return u!=null&&P$(u,n),n}function H$(t){let e={},n=g(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>W$(a))),v(e,["generatedVideos"],s)}let i=g(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);let r=g(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function U$(t){let e={},n=g(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>j$(a))),v(e,["generatedVideos"],s)}let i=g(t,["raiMediaFilteredCount"]);i!=null&&v(e,["raiMediaFilteredCount"],i);let r=g(t,["raiMediaFilteredReasons"]);return r!=null&&v(e,["raiMediaFilteredReasons"],r),e}function z$(t,e){let n={},i=g(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);let r=g(t,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],Ay(r));let s=g(t,["video"]);return e!==void 0&&s!=null&&v(e,["instances[0]","video"],NR(s)),n}function G$(t,e){let n={},i=g(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);let r=g(t,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],rs(r));let s=g(t,["video"]);return e!==void 0&&s!=null&&v(e,["instances[0]","video"],FR(s)),n}function $$(t){let e={},n=g(t,["_self"]);n!=null&&v(e,["image"],tq(n));let i=g(t,["raiFilteredReason"]);i!=null&&v(e,["raiFilteredReason"],i);let r=g(t,["_self"]);return r!=null&&v(e,["safetyAttributes"],AR(r)),e}function Iy(t){let e={},n=g(t,["_self"]);n!=null&&v(e,["image"],IR(n));let i=g(t,["raiFilteredReason"]);i!=null&&v(e,["raiFilteredReason"],i);let r=g(t,["_self"]);r!=null&&v(e,["safetyAttributes"],MR(r));let s=g(t,["prompt"]);return s!=null&&v(e,["enhancedPrompt"],s),e}function q$(t){let e={},n=g(t,["_self"]);n!=null&&v(e,["mask"],IR(n));let i=g(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),v(e,["labels"],r)}return e}function W$(t){let e={},n=g(t,["video"]);return n!=null&&v(e,["video"],Fq(n)),e}function j$(t){let e={},n=g(t,["_self"]);return n!=null&&v(e,["video"],Rq(n)),e}function K$(t){let e={},n=g(t,["modelSelectionConfig"]);n!=null&&v(e,["modelConfig"],n);let i=g(t,["responseJsonSchema"]);i!=null&&v(e,["responseJsonSchema"],i);let r=g(t,["audioTimestamp"]);r!=null&&v(e,["audioTimestamp"],r);let s=g(t,["candidateCount"]);s!=null&&v(e,["candidateCount"],s);let a=g(t,["enableAffectiveDialog"]);a!=null&&v(e,["enableAffectiveDialog"],a);let c=g(t,["frequencyPenalty"]);c!=null&&v(e,["frequencyPenalty"],c);let u=g(t,["logprobs"]);u!=null&&v(e,["logprobs"],u);let p=g(t,["maxOutputTokens"]);p!=null&&v(e,["maxOutputTokens"],p);let m=g(t,["mediaResolution"]);m!=null&&v(e,["mediaResolution"],m);let C=g(t,["presencePenalty"]);C!=null&&v(e,["presencePenalty"],C);let x=g(t,["responseLogprobs"]);x!=null&&v(e,["responseLogprobs"],x);let E=g(t,["responseMimeType"]);E!=null&&v(e,["responseMimeType"],E);let A=g(t,["responseModalities"]);A!=null&&v(e,["responseModalities"],A);let N=g(t,["responseSchema"]);N!=null&&v(e,["responseSchema"],N);let R=g(t,["routingConfig"]);R!=null&&v(e,["routingConfig"],R);let k=g(t,["seed"]);k!=null&&v(e,["seed"],k);let B=g(t,["speechConfig"]);B!=null&&v(e,["speechConfig"],B);let $=g(t,["stopSequences"]);$!=null&&v(e,["stopSequences"],$);let q=g(t,["temperature"]);q!=null&&v(e,["temperature"],q);let X=g(t,["thinkingConfig"]);X!=null&&v(e,["thinkingConfig"],X);let ie=g(t,["topK"]);ie!=null&&v(e,["topK"],ie);let me=g(t,["topP"]);if(me!=null&&v(e,["topP"],me),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Y$(t,e){let n={},i=g(e,["model"]);return i!=null&&v(n,["_url","name"],gn(t,i)),n}function J$(t,e){let n={},i=g(e,["model"]);return i!=null&&v(n,["_url","name"],gn(t,i)),n}function Q$(t){let e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=g(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function X$(t){let e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=g(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function Z$(t){let e={},n=g(t,["aspectRatio"]);n!=null&&v(e,["aspectRatio"],n);let i=g(t,["imageSize"]);if(i!=null&&v(e,["imageSize"],i),g(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function eq(t){let e={},n=g(t,["aspectRatio"]);n!=null&&v(e,["aspectRatio"],n);let i=g(t,["imageSize"]);i!=null&&v(e,["imageSize"],i);let r=g(t,["personGeneration"]);r!=null&&v(e,["personGeneration"],r);let s=g(t,["outputMimeType"]);s!=null&&v(e,["imageOutputOptions","mimeType"],s);let a=g(t,["outputCompressionQuality"]);return a!=null&&v(e,["imageOutputOptions","compressionQuality"],a),e}function tq(t){let e={},n=g(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],ml(n));let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function IR(t){let e={},n=g(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);let i=g(t,["bytesBase64Encoded"]);i!=null&&v(e,["imageBytes"],ml(i));let r=g(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function Ay(t){let e={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=g(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],ml(n));let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function rs(t){let e={},n=g(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);let i=g(t,["imageBytes"]);i!=null&&v(e,["bytesBase64Encoded"],ml(i));let r=g(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function nq(t,e,n){let i={},r=g(e,["pageSize"]);n!==void 0&&r!=null&&v(n,["_query","pageSize"],r);let s=g(e,["pageToken"]);n!==void 0&&s!=null&&v(n,["_query","pageToken"],s);let a=g(e,["filter"]);n!==void 0&&a!=null&&v(n,["_query","filter"],a);let c=g(e,["queryBase"]);return n!==void 0&&c!=null&&v(n,["_url","models_url"],xR(t,c)),i}function iq(t,e,n){let i={},r=g(e,["pageSize"]);n!==void 0&&r!=null&&v(n,["_query","pageSize"],r);let s=g(e,["pageToken"]);n!==void 0&&s!=null&&v(n,["_query","pageToken"],s);let a=g(e,["filter"]);n!==void 0&&a!=null&&v(n,["_query","filter"],a);let c=g(e,["queryBase"]);return n!==void 0&&c!=null&&v(n,["_url","models_url"],xR(t,c)),i}function rq(t,e){let n={},i=g(e,["config"]);return i!=null&&nq(t,i,n),n}function oq(t,e){let n={},i=g(e,["config"]);return i!=null&&iq(t,i,n),n}function sq(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);let r=g(t,["_self"]);if(r!=null){let s=bR(r);Array.isArray(s)&&(s=s.map(a=>nE(a))),v(e,["models"],s)}return e}function aq(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);let r=g(t,["_self"]);if(r!=null){let s=bR(r);Array.isArray(s)&&(s=s.map(a=>iE(a))),v(e,["models"],s)}return e}function lq(t){let e={},n=g(t,["maskMode"]);n!=null&&v(e,["maskMode"],n);let i=g(t,["segmentationClasses"]);i!=null&&v(e,["maskClasses"],i);let r=g(t,["maskDilation"]);return r!=null&&v(e,["dilation"],r),e}function nE(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["displayName"]);i!=null&&v(e,["displayName"],i);let r=g(t,["description"]);r!=null&&v(e,["description"],r);let s=g(t,["version"]);s!=null&&v(e,["version"],s);let a=g(t,["_self"]);a!=null&&v(e,["tunedModelInfo"],Eq(a));let c=g(t,["inputTokenLimit"]);c!=null&&v(e,["inputTokenLimit"],c);let u=g(t,["outputTokenLimit"]);u!=null&&v(e,["outputTokenLimit"],u);let p=g(t,["supportedGenerationMethods"]);p!=null&&v(e,["supportedActions"],p);let m=g(t,["temperature"]);m!=null&&v(e,["temperature"],m);let C=g(t,["maxTemperature"]);C!=null&&v(e,["maxTemperature"],C);let x=g(t,["topP"]);x!=null&&v(e,["topP"],x);let E=g(t,["topK"]);E!=null&&v(e,["topK"],E);let A=g(t,["thinking"]);return A!=null&&v(e,["thinking"],A),e}function iE(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["displayName"]);i!=null&&v(e,["displayName"],i);let r=g(t,["description"]);r!=null&&v(e,["description"],r);let s=g(t,["versionId"]);s!=null&&v(e,["version"],s);let a=g(t,["deployedModels"]);if(a!=null){let C=a;Array.isArray(C)&&(C=C.map(x=>x$(x))),v(e,["endpoints"],C)}let c=g(t,["labels"]);c!=null&&v(e,["labels"],c);let u=g(t,["_self"]);u!=null&&v(e,["tunedModelInfo"],Sq(u));let p=g(t,["defaultCheckpointId"]);p!=null&&v(e,["defaultCheckpointId"],p);let m=g(t,["checkpoints"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(x=>x)),v(e,["checkpoints"],C)}return e}function cq(t){let e={},n=g(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);let i=g(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);let r=g(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);let s=g(t,["fileData"]);s!=null&&v(e,["fileData"],b$(s));let a=g(t,["functionCall"]);a!=null&&v(e,["functionCall"],w$(a));let c=g(t,["functionResponse"]);c!=null&&v(e,["functionResponse"],c);let u=g(t,["inlineData"]);u!=null&&v(e,["inlineData"],KG(u));let p=g(t,["text"]);p!=null&&v(e,["text"],p);let m=g(t,["thought"]);m!=null&&v(e,["thought"],m);let C=g(t,["thoughtSignature"]);C!=null&&v(e,["thoughtSignature"],C);let x=g(t,["videoMetadata"]);return x!=null&&v(e,["videoMetadata"],x),e}function uq(t){let e={},n=g(t,["productImage"]);return n!=null&&v(e,["image"],rs(n)),e}function dq(t,e){let n={},i=g(t,["numberOfImages"]);e!==void 0&&i!=null&&v(e,["parameters","sampleCount"],i);let r=g(t,["baseSteps"]);e!==void 0&&r!=null&&v(e,["parameters","baseSteps"],r);let s=g(t,["outputGcsUri"]);e!==void 0&&s!=null&&v(e,["parameters","storageUri"],s);let a=g(t,["seed"]);e!==void 0&&a!=null&&v(e,["parameters","seed"],a);let c=g(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&v(e,["parameters","safetySetting"],c);let u=g(t,["personGeneration"]);e!==void 0&&u!=null&&v(e,["parameters","personGeneration"],u);let p=g(t,["addWatermark"]);e!==void 0&&p!=null&&v(e,["parameters","addWatermark"],p);let m=g(t,["outputMimeType"]);e!==void 0&&m!=null&&v(e,["parameters","outputOptions","mimeType"],m);let C=g(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&v(e,["parameters","outputOptions","compressionQuality"],C);let x=g(t,["enhancePrompt"]);e!==void 0&&x!=null&&v(e,["parameters","enhancePrompt"],x);let E=g(t,["labels"]);return e!==void 0&&E!=null&&v(e,["labels"],E),n}function fq(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["source"]);r!=null&&hq(r,n);let s=g(e,["config"]);return s!=null&&dq(s,n),n}function pq(t){let e={},n=g(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Iy(r))),v(e,["generatedImages"],i)}return e}function hq(t,e){let n={},i=g(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);let r=g(t,["personImage"]);e!==void 0&&r!=null&&v(e,["instances[0]","personImage","image"],rs(r));let s=g(t,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>uq(c))),v(e,["instances[0]","productImages"],a)}return n}function mq(t){let e={},n=g(t,["referenceImage"]);n!=null&&v(e,["referenceImage"],rs(n));let i=g(t,["referenceId"]);i!=null&&v(e,["referenceId"],i);let r=g(t,["referenceType"]);r!=null&&v(e,["referenceType"],r);let s=g(t,["maskImageConfig"]);s!=null&&v(e,["maskImageConfig"],lq(s));let a=g(t,["controlImageConfig"]);a!=null&&v(e,["controlImageConfig"],t$(a));let c=g(t,["styleImageConfig"]);c!=null&&v(e,["styleImageConfig"],c);let u=g(t,["subjectImageConfig"]);return u!=null&&v(e,["subjectImageConfig"],u),e}function AR(t){let e={},n=g(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);let i=g(t,["safetyAttributes","scores"]);i!=null&&v(e,["scores"],i);let r=g(t,["contentType"]);return r!=null&&v(e,["contentType"],r),e}function MR(t){let e={},n=g(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);let i=g(t,["safetyAttributes","scores"]);i!=null&&v(e,["scores"],i);let r=g(t,["contentType"]);return r!=null&&v(e,["contentType"],r),e}function gq(t){let e={},n=g(t,["category"]);if(n!=null&&v(e,["category"],n),g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=g(t,["threshold"]);return i!=null&&v(e,["threshold"],i),e}function vq(t){let e={},n=g(t,["image"]);return n!=null&&v(e,["image"],rs(n)),e}function yq(t,e){let n={},i=g(t,["mode"]);e!==void 0&&i!=null&&v(e,["parameters","mode"],i);let r=g(t,["maxPredictions"]);e!==void 0&&r!=null&&v(e,["parameters","maxPredictions"],r);let s=g(t,["confidenceThreshold"]);e!==void 0&&s!=null&&v(e,["parameters","confidenceThreshold"],s);let a=g(t,["maskDilation"]);e!==void 0&&a!=null&&v(e,["parameters","maskDilation"],a);let c=g(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&v(e,["parameters","binaryColorThreshold"],c);let u=g(t,["labels"]);return e!==void 0&&u!=null&&v(e,["labels"],u),n}function _q(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["source"]);r!=null&&xq(r,n);let s=g(e,["config"]);return s!=null&&yq(s,n),n}function Cq(t){let e={},n=g(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>q$(r))),v(e,["generatedMasks"],i)}return e}function xq(t,e){let n={},i=g(t,["prompt"]);e!==void 0&&i!=null&&v(e,["instances[0]","prompt"],i);let r=g(t,["image"]);e!==void 0&&r!=null&&v(e,["instances[0]","image"],rs(r));let s=g(t,["scribbleImage"]);return e!==void 0&&s!=null&&v(e,["instances[0]","scribble"],vq(s)),n}function bq(t){let e={},n=g(t,["retrievalConfig"]);n!=null&&v(e,["retrievalConfig"],n);let i=g(t,["functionCallingConfig"]);return i!=null&&v(e,["functionCallingConfig"],E$(i)),e}function wq(t){let e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=g(t,["computerUse"]);n!=null&&v(e,["computerUse"],n);let i=g(t,["fileSearch"]);i!=null&&v(e,["fileSearch"],i);let r=g(t,["codeExecution"]);if(r!=null&&v(e,["codeExecution"],r),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=g(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(C=>C)),v(e,["functionDeclarations"],m)}let a=g(t,["googleMaps"]);a!=null&&v(e,["googleMaps"],Q$(a));let c=g(t,["googleSearch"]);c!=null&&v(e,["googleSearch"],X$(c));let u=g(t,["googleSearchRetrieval"]);u!=null&&v(e,["googleSearchRetrieval"],u);let p=g(t,["urlContext"]);return p!=null&&v(e,["urlContext"],p),e}function kR(t){let e={},n=g(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);let i=g(t,["computerUse"]);if(i!=null&&v(e,["computerUse"],i),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let r=g(t,["codeExecution"]);r!=null&&v(e,["codeExecution"],r);let s=g(t,["enterpriseWebSearch"]);s!=null&&v(e,["enterpriseWebSearch"],s);let a=g(t,["functionDeclarations"]);if(a!=null){let C=a;Array.isArray(C)&&(C=C.map(x=>S$(x))),v(e,["functionDeclarations"],C)}let c=g(t,["googleMaps"]);c!=null&&v(e,["googleMaps"],c);let u=g(t,["googleSearch"]);u!=null&&v(e,["googleSearch"],u);let p=g(t,["googleSearchRetrieval"]);p!=null&&v(e,["googleSearchRetrieval"],p);let m=g(t,["urlContext"]);return m!=null&&v(e,["urlContext"],m),e}function Eq(t){let e={},n=g(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);let i=g(t,["createTime"]);i!=null&&v(e,["createTime"],i);let r=g(t,["updateTime"]);return r!=null&&v(e,["updateTime"],r),e}function Sq(t){let e={},n=g(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&v(e,["baseModel"],n);let i=g(t,["createTime"]);i!=null&&v(e,["createTime"],i);let r=g(t,["updateTime"]);return r!=null&&v(e,["updateTime"],r),e}function Dq(t,e){let n={},i=g(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);let r=g(t,["description"]);e!==void 0&&r!=null&&v(e,["description"],r);let s=g(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),n}function Tq(t,e){let n={},i=g(t,["displayName"]);e!==void 0&&i!=null&&v(e,["displayName"],i);let r=g(t,["description"]);e!==void 0&&r!=null&&v(e,["description"],r);let s=g(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),n}function Iq(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","name"],gn(t,i));let r=g(e,["config"]);return r!=null&&Dq(r,n),n}function Aq(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["config"]);return r!=null&&Tq(r,n),n}function Mq(t,e){let n={},i=g(t,["outputGcsUri"]);e!==void 0&&i!=null&&v(e,["parameters","storageUri"],i);let r=g(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&v(e,["parameters","safetySetting"],r);let s=g(t,["personGeneration"]);e!==void 0&&s!=null&&v(e,["parameters","personGeneration"],s);let a=g(t,["includeRaiReason"]);e!==void 0&&a!=null&&v(e,["parameters","includeRaiReason"],a);let c=g(t,["outputMimeType"]);e!==void 0&&c!=null&&v(e,["parameters","outputOptions","mimeType"],c);let u=g(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&v(e,["parameters","outputOptions","compressionQuality"],u);let p=g(t,["enhanceInputImage"]);e!==void 0&&p!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],p);let m=g(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],m);let C=g(t,["labels"]);e!==void 0&&C!=null&&v(e,["labels"],C);let x=g(t,["numberOfImages"]);e!==void 0&&x!=null&&v(e,["parameters","sampleCount"],x);let E=g(t,["mode"]);return e!==void 0&&E!=null&&v(e,["parameters","mode"],E),n}function kq(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["_url","model"],gn(t,i));let r=g(e,["image"]);r!=null&&v(n,["instances[0]","image"],rs(r));let s=g(e,["upscaleFactor"]);s!=null&&v(n,["parameters","upscaleConfig","upscaleFactor"],s);let a=g(e,["config"]);return a!=null&&Mq(a,n),n}function Nq(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Iy(s))),v(e,["generatedImages"],r)}return e}function Fq(t){let e={},n=g(t,["uri"]);n!=null&&v(e,["uri"],n);let i=g(t,["encodedVideo"]);i!=null&&v(e,["videoBytes"],ml(i));let r=g(t,["encoding"]);return r!=null&&v(e,["mimeType"],r),e}function Rq(t){let e={},n=g(t,["gcsUri"]);n!=null&&v(e,["uri"],n);let i=g(t,["bytesBase64Encoded"]);i!=null&&v(e,["videoBytes"],ml(i));let r=g(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function Pq(t){let e={},n=g(t,["image"]);n!=null&&v(e,["_self"],rs(n));let i=g(t,["maskMode"]);return i!=null&&v(e,["maskMode"],i),e}function Lq(t){let e={},n=g(t,["image"]);n!=null&&v(e,["image"],Ay(n));let i=g(t,["referenceType"]);return i!=null&&v(e,["referenceType"],i),e}function Oq(t){let e={},n=g(t,["image"]);n!=null&&v(e,["image"],rs(n));let i=g(t,["referenceType"]);return i!=null&&v(e,["referenceType"],i),e}function NR(t){let e={},n=g(t,["uri"]);n!=null&&v(e,["uri"],n);let i=g(t,["videoBytes"]);i!=null&&v(e,["encodedVideo"],ml(i));let r=g(t,["mimeType"]);return r!=null&&v(e,["encoding"],r),e}function FR(t){let e={},n=g(t,["uri"]);n!=null&&v(e,["gcsUri"],n);let i=g(t,["videoBytes"]);i!=null&&v(e,["bytesBase64Encoded"],ml(i));let r=g(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function Vq(t,e){let n={},i=g(t,["displayName"]);return e!==void 0&&i!=null&&v(e,["displayName"],i),n}function Bq(t){let e={},n=g(t,["config"]);return n!=null&&Vq(n,e),e}function Hq(t,e){let n={},i=g(t,["force"]);return e!==void 0&&i!=null&&v(e,["_query","force"],i),n}function Uq(t){let e={},n=g(t,["name"]);n!=null&&v(e,["_url","name"],n);let i=g(t,["config"]);return i!=null&&Hq(i,e),e}function zq(t){let e={},n=g(t,["name"]);return n!=null&&v(e,["_url","name"],n),e}function Gq(t,e){let n={},i=g(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),v(e,["customMetadata"],s)}let r=g(t,["chunkingConfig"]);return e!==void 0&&r!=null&&v(e,["chunkingConfig"],r),n}function $q(t){let e={},n=g(t,["name"]);n!=null&&v(e,["name"],n);let i=g(t,["metadata"]);i!=null&&v(e,["metadata"],i);let r=g(t,["done"]);r!=null&&v(e,["done"],r);let s=g(t,["error"]);s!=null&&v(e,["error"],s);let a=g(t,["response"]);return a!=null&&v(e,["response"],Wq(a)),e}function qq(t){let e={},n=g(t,["fileSearchStoreName"]);n!=null&&v(e,["_url","file_search_store_name"],n);let i=g(t,["fileName"]);i!=null&&v(e,["fileName"],i);let r=g(t,["config"]);return r!=null&&Gq(r,e),e}function Wq(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["parent"]);i!=null&&v(e,["parent"],i);let r=g(t,["documentName"]);return r!=null&&v(e,["documentName"],r),e}function jq(t,e){let n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);let r=g(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function Kq(t){let e={},n=g(t,["config"]);return n!=null&&jq(n,e),e}function Yq(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);let r=g(t,["fileSearchStores"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),v(e,["fileSearchStores"],s)}return e}function RR(t,e){let n={},i=g(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["mimeType"],i);let r=g(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);let s=g(t,["customMetadata"]);if(e!==void 0&&s!=null){let c=s;Array.isArray(c)&&(c=c.map(u=>u)),v(e,["customMetadata"],c)}let a=g(t,["chunkingConfig"]);return e!==void 0&&a!=null&&v(e,["chunkingConfig"],a),n}function Jq(t){let e={},n=g(t,["fileSearchStoreName"]);n!=null&&v(e,["_url","file_search_store_name"],n);let i=g(t,["config"]);return i!=null&&RR(i,e),e}function Qq(t){let e={},n=g(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}var Xq="Content-Type",Zq="X-Server-Timeout",eW="User-Agent",rE="x-goog-api-client",tW="1.35.0",nW=`google-genai-sdk/${tW}`,iW="v1beta1",rW="v1beta",oE=class{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:iW,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:rW,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){let r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(let[a,c]of Object.entries(e.queryParams))r.searchParams.append(a,String(c));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,n){let i=JSON.parse(JSON.stringify(e));for(let[r,s]of Object.entries(n))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){let s=new AbortController,a=s.signal;if(n.timeout&&n?.timeout>0){let c=setTimeout(()=>s.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&oW(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await XF(r),new rh(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await XF(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ts(this,arguments,function*(){var i;let r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="",c="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:p,value:m}=yield Gt(r.read());if(p){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let C=s.decode(m,{stream:!0});try{let A=JSON.parse(C);if("error"in A){let N=JSON.parse(JSON.stringify(A.error)),R=N.status,k=N.code,B=`got status: ${R}. ${JSON.stringify(A)}`;if(k>=400&&k<600)throw new fy({message:B,status:k})}}catch(A){if(A.name==="ApiError")throw A}a+=C;let x=-1,E=0;for(;;){x=-1,E=0;for(let R of u){let k=a.indexOf(R);k!==-1&&(x===-1||k<x)&&(x=k,E=R.length)}if(x===-1)break;let A=a.substring(0,x);a=a.substring(x+E);let N=A.trim();if(N.startsWith(c)){let R=N.substring(c.length).trim();try{let k=new Response(R,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Gt(new rh(k))}catch(k){throw new Error(`exception parsing stream chunk ${R}. ${k}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let e={},n=nW+" "+this.clientOptions.userAgentExtra;return e[eW]=n,e[rE]=n,e[Xq]="application/json",e}async getHeadersInternal(e,n){let i=new Headers;if(e&&e.headers){for(let[r,s]of Object.entries(e.headers))i.append(r,s);e.timeout&&e.timeout>0&&i.append(Zq,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;let r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);let s=this.clientOptions.uploader,a=await s.stat(e);r.sizeBytes=String(a.size);let c=(i=n?.mimeType)!==null&&i!==void 0?i:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;let u={file:r},p=this.getFileName(e),m=yt("upload/v1beta/files",u._url),C=await this.fetchUploadUrl(m,r.sizeBytes,r.mimeType,p,u,n?.httpOptions);return s.upload(e,C,this)}async uploadFileToFileSearchStore(e,n,i){var r;let s=this.clientOptions.uploader,a=await s.stat(n),c=String(a.size),u=(r=i?.mimeType)!==null&&r!==void 0?r:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let p=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),C={};i!=null&&RR(i,C);let x=await this.fetchUploadUrl(p,c,u,m,C,i?.httpOptions);return s.uploadToFileSearchStore(n,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,s,a){var c;let u={};a?u=a:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};let p=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:u});if(!p||!p?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let m=(c=p?.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}};async function XF(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};let r=JSON.stringify(i);throw n>=400&&n<600?new fy({message:r,status:n}):new Error(r)}}function oW(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,a){let c=Object.assign({},s);for(let u in a)if(Object.prototype.hasOwnProperty.call(a,u)){let p=a[u],m=c[u];p&&typeof p=="object"&&!Array.isArray(p)&&m&&typeof m=="object"&&!Array.isArray(m)?c[u]=i(m,p):(m&&p&&typeof m!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof m}, New type: ${typeof p}. Overwriting.`),c[u]=p)}return c}let r=i(n,e);t.body=JSON.stringify(r)}var sW="mcp_used/unknown",aW=!1;function PR(t){for(let e of t)if(lW(e)||typeof e=="object"&&"inputSchema"in e)return!0;return aW}function LR(t){var e;let n=(e=t[rE])!==null&&e!==void 0?e:"";t[rE]=(n+` ${sW}`).trimStart()}function lW(t){return t!==null&&typeof t=="object"&&t instanceof sE}function cW(t){return ts(this,arguments,function*(n,i=100){let r,s=0;for(;s<i;){let a=yield Gt(n.listTools({cursor:r}));for(let c of a.tools)yield yield Gt(c),s++;if(!a.nextCursor)break;r=a.nextCursor}})}var sE=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;let s={},a=[];for(let m of this.mcpClients)try{for(var c=!0,u=(n=void 0,ns(cW(m))),p;p=await u.next(),e=p.done,!e;c=!0){r=p.value,c=!1;let C=r;a.push(C);let x=C.name;if(s[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);s[x]=m}}catch(C){n={error:C}}finally{try{!c&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),j9(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let i of e)if(i.name in this.functionNameToMcpClient){let r=this.functionNameToMcpClient[i.name],s;this.config.timeout&&(s={timeout:this.config.timeout});let a=await r.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}};async function uW(t,e,n){let i=new jw,r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}var aE=class{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=fW(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),u=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${c}`,p=()=>{},m=new Promise($=>{p=$}),C=e.callbacks,x=function(){p({})},E=this.apiClient,A={onopen:x,onmessage:$=>{uW(E,C.onmessage,$)},onerror:(n=C?.onerror)!==null&&n!==void 0?n:function($){},onclose:(i=C?.onclose)!==null&&i!==void 0?i:function($){}},N=this.webSocketFactory.create(u,dW(a),A);N.connect(),await m;let B={setup:{model:gn(this.apiClient,e.model)}};return N.send(JSON.stringify(B)),new lE(N,this.apiClient)}},lE=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=BG(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=VG(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){let n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(nh.PLAY)}pause(){this.sendPlaybackControl(nh.PAUSE)}stop(){this.sendPlaybackControl(nh.STOP)}resetContext(){this.sendPlaybackControl(nh.RESET_CONTEXT)}close(){this.conn.close()}};function dW(t){let e={};return t.forEach((n,i)=>{e[i]=n}),e}function fW(t){let e=new Headers;for(let[n,i]of Object.entries(t))e.append(n,i);return e}var pW="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function hW(t,e,n){let i=new Ww,r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;let s=JSON.parse(r);if(t.isVertexAI()){let a=zG(s);Object.assign(i,a)}else Object.assign(i,s);e(i)}var cE=class{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new aE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,s,a,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let u=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion(),m,C=this.apiClient.getHeaders();e.config&&e.config.tools&&PR(e.config.tools)&&LR(C);let x=vW(C);if(this.apiClient.isVertexAI())m=`${u}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,m);else{let ge=this.apiClient.getApiKey(),Te="BidiGenerateContent",j="key";ge?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Te="BidiGenerateContentConstrained",j="access_token"),m=`${u}/ws/google.ai.generativelanguage.${p}.GenerativeService.${Te}?${j}=${ge}`}let E=()=>{},A=new Promise(ge=>{E=ge}),N=e.callbacks,R=function(){var ge;(ge=N?.onopen)===null||ge===void 0||ge.call(N),E({})},k=this.apiClient,B={onopen:R,onmessage:ge=>{hW(k,N.onmessage,ge)},onerror:(n=N?.onerror)!==null&&n!==void 0?n:function(ge){},onclose:(i=N?.onclose)!==null&&i!==void 0?i:function(ge){}},$=this.webSocketFactory.create(m,gW(x),B);$.connect(),await A;let q=gn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){let ge=this.apiClient.getProject(),Te=this.apiClient.getLocation();q=`projects/${ge}/locations/${Te}/`+q}let X={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Fw.AUDIO]}:e.config.responseModalities=[Fw.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let ie=(c=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[],me=[];for(let ge of ie)if(this.isCallableTool(ge)){let Te=ge;me.push(await Te.tool())}else me.push(ge);me.length>0&&(e.config.tools=me);let ye={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=OG(this.apiClient,ye):X=LG(this.apiClient,ye),delete X.config,$.send(JSON.stringify(X)),new uE($,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},mW={turnComplete:!0},uE=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=No(n.turns),e.isVertexAI()||(i=i.map(r=>Ty(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(pW)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},mW),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:UG(e)}:n={realtimeInput:HG(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function gW(t){let e={};return t.forEach((n,i)=>{e[i]=n}),e}function vW(t){let e=new Headers;for(let[n,i]of Object.entries(t))e.append(n,i);return e}var ZF=10;function eR(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(let a of(n=t?.tools)!==null&&n!==void 0?n:[])if(ud(a)){r=!0;break}if(!r)return!0;let s=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function ud(t){return"callTool"in t&&typeof t.callTool=="function"}function yW(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ud(r)))!==null&&i!==void 0?i:!1}function tR(t){var e;let n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(ud(i))return;let s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(r)}),n}function nR(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var dE=class extends is{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,s,a,c;let u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!yW(n)||eR(n.config))return await this.generateContentInternal(u);let p=tR(n);if(p.length>0){let N=p.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let m,C,x=No(u.contents),E=(s=(r=(i=u.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:ZF,A=0;for(;A<E&&(m=await this.generateContentInternal(u),!(!m.functionCalls||m.functionCalls.length===0));){let N=m.candidates[0].content,R=[];for(let k of(c=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[])if(ud(k)){let $=await k.callTool(m.functionCalls);R.push(...$)}A++,C={role:"user",parts:R},u.contents=No(u.contents),u.contents.push(N),u.contents.push(C),nR(u.config)&&(x.push(N),x.push(C))}return nR(u.config)&&(m.automaticFunctionCallingHistory=x),m},this.generateContentStream=async n=>{var i,r,s,a,c;if(this.maybeMoveToResponseJsonSchem(n),eR(n.config)){let C=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(C)}let u=tR(n);if(u.length>0){let C=u.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${C}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let p=(s=(r=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,m=(c=(a=n?.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(p&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let s,a=[];if(i?.generatedImages)for(let u of i.generatedImages)u&&u?.safetyAttributes&&((r=u?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=u?.safetyAttributes:a.push(u);let c;return s?c={generatedImages:a,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;let a={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Ca(gl.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(a),a)},this.editImage=async n=>{let i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));let r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,s,a,c,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(s=n.source)===null||s===void 0?void 0:s.video)===null||a===void 0)&&a.uri&&(!((u=(c=n.source)===null||c===void 0?void 0:c.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;let s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;let a=await Promise.all(s.map(async u=>ud(u)?await u.tool():u)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(c.config.tools=a,e.config&&e.config.tools&&PR(e.config.tools)){let u=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{},p=Object.assign({},u);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),LR(p),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return c}async initAfcToolsMap(e){var n,i,r;let s=new Map;for(let a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(ud(a)){let c=a,u=await c.tool();for(let p of(r=u.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(s.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);s.set(p.name,c)}}return s}async processAfcStream(e){var n,i,r;let s=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:ZF,a=!1,c=0,u=await this.initAfcToolsMap(e);return(function(p,m,C){return ts(this,arguments,function*(){for(var x,E,A,N,R,k;c<s;){a&&(c++,a=!1);let X=yield Gt(p.processParamsMaybeAddMcpUsage(C)),ie=yield Gt(p.generateContentStreamInternal(X)),me=[],ye=[];try{for(var B=!0,$=(E=void 0,ns(ie)),q;q=yield Gt($.next()),x=q.done,!x;B=!0){N=q.value,B=!1;let ge=N;if(yield yield Gt(ge),ge.candidates&&(!((R=ge.candidates[0])===null||R===void 0)&&R.content)){ye.push(ge.candidates[0].content);for(let Te of(k=ge.candidates[0].content.parts)!==null&&k!==void 0?k:[])if(c<s&&Te.functionCall){if(!Te.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(Te.functionCall.name)){let j=yield Gt(m.get(Te.functionCall.name).callTool([Te.functionCall]));me.push(...j)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${Te.functionCall.name}`)}}}}catch(ge){E={error:ge}}finally{try{!B&&!x&&(A=$.return)&&(yield Gt(A.call($)))}finally{if(E)throw E.error}}if(me.length>0){a=!0;let ge=new Hc;ge.candidates=[{content:{role:"user",parts:me}}],yield yield Gt(ge);let Te=[];Te.push(...ye),Te.push({role:"user",parts:me});let j=No(C.contents).concat(Te);C.contents=j}else break}})})(this,u,e)}async generateContentInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=YF(this.apiClient,e);return c=yt("{model}:generateContent",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=QF(m),x=new Hc;return Object.assign(x,C),x})}else{let p=KF(this.apiClient,e);return c=yt("{model}:generateContent",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=JF(m),x=new Hc;return Object.assign(x,C),x})}}async generateContentStreamInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=YF(this.apiClient,e);return c=yt("{model}:streamGenerateContent?alt=sse",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(C){return ts(this,arguments,function*(){var x,E,A,N;try{for(var R=!0,k=ns(C),B;B=yield Gt(k.next()),x=B.done,!x;R=!0){N=B.value,R=!1;let $=N,q=QF(yield Gt($.json()));q.sdkHttpResponse={headers:$.headers};let X=new Hc;Object.assign(X,q),yield yield Gt(X)}}catch($){E={error:$}}finally{try{!R&&!x&&(A=k.return)&&(yield Gt(A.call(k)))}finally{if(E)throw E.error}}})})}else{let p=KF(this.apiClient,e);return c=yt("{model}:streamGenerateContent?alt=sse",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(C){return ts(this,arguments,function*(){var x,E,A,N;try{for(var R=!0,k=ns(C),B;B=yield Gt(k.next()),x=B.done,!x;R=!0){N=B.value,R=!1;let $=N,q=JF(yield Gt($.json()));q.sdkHttpResponse={headers:$.headers};let X=new Hc;Object.assign(X,q),yield yield Gt(X)}}catch($){E={error:$}}finally{try{!R&&!x&&(A=k.return)&&(yield Gt(A.call(k)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=y$(this.apiClient,e);return c=yt("{model}:predict",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=C$(m),x=new Zv;return Object.assign(x,C),x})}else{let p=v$(this.apiClient,e);return c=yt("{model}:batchEmbedContents",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=_$(m),x=new Zv;return Object.assign(x,C),x})}}async generateImagesInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=k$(this.apiClient,e);return c=yt("{model}:predict",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=F$(m),x=new ey;return Object.assign(x,C),x})}else{let p=M$(this.apiClient,e);return c=yt("{model}:predict",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=N$(m),x=new ey;return Object.assign(x,C),x})}}async editImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){let c=p$(this.apiClient,e);return s=yt("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:u.headers},m})),r.then(u=>{let p=h$(u),m=new Rw;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){let c=kq(this.apiClient,e);return s=yt("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:u.headers},m})),r.then(u=>{let p=Nq(u),m=new Pw;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){let c=fq(this.apiClient,e);return s=yt("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{let p=pq(u),m=new Lw;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){let c=_q(this.apiClient,e);return s=yt("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{let p=Cq(u),m=new Ow;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=J$(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>iE(m))}else{let p=Y$(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>nE(m))}}async listInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=oq(this.apiClient,e);return c=yt("{models_url}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=aq(m),x=new ty;return Object.assign(x,C),x})}else{let p=rq(this.apiClient,e);return c=yt("{models_url}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=sq(m),x=new ty;return Object.assign(x,C),x})}}async update(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=Aq(this.apiClient,e);return c=yt("{model}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>iE(m))}else{let p=Iq(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>nE(m))}}async delete(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=c$(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=d$(m),x=new ny;return Object.assign(x,C),x})}else{let p=l$(this.apiClient,e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=u$(m),x=new ny;return Object.assign(x,C),x})}}async countTokens(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=o$(this.apiClient,e);return c=yt("{model}:countTokens",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=a$(m),x=new iy;return Object.assign(x,C),x})}else{let p=r$(this.apiClient,e);return c=yt("{model}:countTokens",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=s$(m),x=new iy;return Object.assign(x,C),x})}}async computeTokens(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){let c=QG(this.apiClient,e);return s=yt("{model}:computeTokens",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:u.headers},m})),r.then(u=>{let p=XG(u),m=new Vw;return Object.assign(m,p),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=B$(this.apiClient,e);return c=yt("{model}:predictLongRunning",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{let C=O$(m),x=new ry;return Object.assign(x,C),x})}else{let p=V$(this.apiClient,e);return c=yt("{model}:predictLongRunning",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{let C=L$(m),x=new ry;return Object.assign(x,C),x})}}};var fE=class extends is{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=n.name.split("/operations/")[0],s;i&&"httpOptions"in i&&(s=i.httpOptions);let a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){let n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=n.name.split("/operations/")[0],s;i&&"httpOptions"in i&&(s=i.httpOptions);let a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=R9(e);return c=yt("{operationName}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a}else{let p=F9(e);return c=yt("{operationName}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a}}async fetchPredictVideosOperationInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){let c=D9(e);return s=yt("{resourceName}:fetchPredictOperation",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}};function _W(t){let e={},n=g(t,["data"]);if(n!=null&&v(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function CW(t){let e={},n=g(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>AW(s))),v(e,["parts"],r)}let i=g(t,["role"]);return i!=null&&v(e,["role"],i),e}function xW(t,e,n){let i={},r=g(e,["expireTime"]);n!==void 0&&r!=null&&v(n,["expireTime"],r);let s=g(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&v(n,["newSessionExpireTime"],s);let a=g(e,["uses"]);n!==void 0&&a!=null&&v(n,["uses"],a);let c=g(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&v(n,["bidiGenerateContentSetup"],IW(t,c));let u=g(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&v(n,["fieldMask"],u),i}function bW(t,e){let n={},i=g(e,["config"]);return i!=null&&v(n,["config"],xW(t,i,n)),n}function wW(t){let e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=g(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);let i=g(t,["mimeType"]);return i!=null&&v(e,["mimeType"],i),e}function EW(t){let e={},n=g(t,["id"]);n!=null&&v(e,["id"],n);let i=g(t,["args"]);i!=null&&v(e,["args"],i);let r=g(t,["name"]);if(r!=null&&v(e,["name"],r),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SW(t){let e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=g(t,["enableWidget"]);return n!=null&&v(e,["enableWidget"],n),e}function DW(t){let e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=g(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],n),e}function TW(t,e){let n={},i=g(t,["generationConfig"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig"],i);let r=g(t,["responseModalities"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig","responseModalities"],r);let s=g(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);let a=g(t,["topP"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","topP"],a);let c=g(t,["topK"]);e!==void 0&&c!=null&&v(e,["setup","generationConfig","topK"],c);let u=g(t,["maxOutputTokens"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","maxOutputTokens"],u);let p=g(t,["mediaResolution"]);e!==void 0&&p!=null&&v(e,["setup","generationConfig","mediaResolution"],p);let m=g(t,["seed"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","seed"],m);let C=g(t,["speechConfig"]);e!==void 0&&C!=null&&v(e,["setup","generationConfig","speechConfig"],RE(C));let x=g(t,["thinkingConfig"]);e!==void 0&&x!=null&&v(e,["setup","generationConfig","thinkingConfig"],x);let E=g(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],E);let A=g(t,["systemInstruction"]);e!==void 0&&A!=null&&v(e,["setup","systemInstruction"],CW(cr(A)));let N=g(t,["tools"]);if(e!==void 0&&N!=null){let ie=hd(N);Array.isArray(ie)&&(ie=ie.map(me=>kW(pd(me)))),v(e,["setup","tools"],ie)}let R=g(t,["sessionResumption"]);e!==void 0&&R!=null&&v(e,["setup","sessionResumption"],MW(R));let k=g(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&v(e,["setup","inputAudioTranscription"],k);let B=g(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],B);let $=g(t,["realtimeInputConfig"]);e!==void 0&&$!=null&&v(e,["setup","realtimeInputConfig"],$);let q=g(t,["contextWindowCompression"]);e!==void 0&&q!=null&&v(e,["setup","contextWindowCompression"],q);let X=g(t,["proactivity"]);if(e!==void 0&&X!=null&&v(e,["setup","proactivity"],X),g(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function IW(t,e){let n={},i=g(e,["model"]);i!=null&&v(n,["setup","model"],gn(t,i));let r=g(e,["config"]);return r!=null&&v(n,["config"],TW(r,n)),n}function AW(t){let e={},n=g(t,["mediaResolution"]);n!=null&&v(e,["mediaResolution"],n);let i=g(t,["codeExecutionResult"]);i!=null&&v(e,["codeExecutionResult"],i);let r=g(t,["executableCode"]);r!=null&&v(e,["executableCode"],r);let s=g(t,["fileData"]);s!=null&&v(e,["fileData"],wW(s));let a=g(t,["functionCall"]);a!=null&&v(e,["functionCall"],EW(a));let c=g(t,["functionResponse"]);c!=null&&v(e,["functionResponse"],c);let u=g(t,["inlineData"]);u!=null&&v(e,["inlineData"],_W(u));let p=g(t,["text"]);p!=null&&v(e,["text"],p);let m=g(t,["thought"]);m!=null&&v(e,["thought"],m);let C=g(t,["thoughtSignature"]);C!=null&&v(e,["thoughtSignature"],C);let x=g(t,["videoMetadata"]);return x!=null&&v(e,["videoMetadata"],x),e}function MW(t){let e={},n=g(t,["handle"]);if(n!=null&&v(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function kW(t){let e={};if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=g(t,["computerUse"]);n!=null&&v(e,["computerUse"],n);let i=g(t,["fileSearch"]);i!=null&&v(e,["fileSearch"],i);let r=g(t,["codeExecution"]);if(r!=null&&v(e,["codeExecution"],r),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=g(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(C=>C)),v(e,["functionDeclarations"],m)}let a=g(t,["googleMaps"]);a!=null&&v(e,["googleMaps"],SW(a));let c=g(t,["googleSearch"]);c!=null&&v(e,["googleSearch"],DW(c));let u=g(t,["googleSearchRetrieval"]);u!=null&&v(e,["googleSearchRetrieval"],u);let p=g(t,["urlContext"]);return p!=null&&v(e,["urlContext"],p),e}function NW(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let r=Object.keys(i).map(s=>`${n}.${s}`);e.push(...r)}else e.push(n)}return e.join(",")}function FW(t,e){let n=null,i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;let r=t.fieldMask;if(n){let s=NW(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){let a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],c=[];r.length>0&&(c=r.map(p=>a.includes(p)?`generationConfig.${p}`:p));let u=[];s&&u.push(s),c.length>0&&u.push(...c),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}var pE=class extends is{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let c=bW(this.apiClient,e);s=yt("auth_tokens",c._url),a=c._query,delete c.config,delete c._url,delete c._query;let u=FW(c,e.config);return r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}};function RW(t,e){let n={},i=g(t,["force"]);return e!==void 0&&i!=null&&v(e,["_query","force"],i),n}function PW(t){let e={},n=g(t,["name"]);n!=null&&v(e,["_url","name"],n);let i=g(t,["config"]);return i!=null&&RW(i,e),e}function LW(t){let e={},n=g(t,["name"]);return n!=null&&v(e,["_url","name"],n),e}function OW(t,e){let n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&v(e,["_query","pageSize"],i);let r=g(t,["pageToken"]);return e!==void 0&&r!=null&&v(e,["_query","pageToken"],r),n}function VW(t){let e={},n=g(t,["parent"]);n!=null&&v(e,["_url","parent"],n);let i=g(t,["config"]);return i!=null&&OW(i,e),e}function BW(t){let e={},n=g(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);let i=g(t,["nextPageToken"]);i!=null&&v(e,["nextPageToken"],i);let r=g(t,["documents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),v(e,["documents"],s)}return e}var hE=class extends is{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ca(gl.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=LW(e);return s=yt("{name}",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=PW(e);r=yt("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=VW(e);return s=yt("{parent}/documents",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{let p=BW(u),m=new Bw;return Object.assign(m,p),m})}}};var mE=class extends is{constructor(e,n=new hE(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Ca(gl.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=Bq(e);return s=yt("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=zq(e);return s=yt("{name}",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Uq(e);r=yt("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=Kq(e);return s=yt("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{let p=Yq(u),m=new Hw;return Object.assign(m,p),m})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=Jq(e);return s=yt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{let p=Qq(u),m=new Uw;return Object.assign(m,p),m})}}async importFile(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=qq(e);return s=yt("{file_search_store_name}:importFile",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{let p=$q(u),m=new zw;return Object.assign(m,p),m})}}};var OR=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return OR=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))},HW=()=>OR();function gE(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var vE=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};var zr=class extends Error{},Gr=class t extends zr{constructor(e,n,i,r){super(`${t.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){let r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new dd({message:i,cause:vE(n)});let s=n;return e===400?new hy(e,s,i,r):e===401?new my(e,s,i,r):e===403?new gy(e,s,i,r):e===404?new vy(e,s,i,r):e===409?new yy(e,s,i,r):e===422?new _y(e,s,i,r):e===429?new Cy(e,s,i,r):e>=500?new xy(e,s,i,r):new t(e,s,i,r)}},oh=class extends Gr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},dd=class extends Gr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},py=class extends dd{constructor({message:e}={}){super({message:e??"Request timed out."})}},hy=class extends Gr{},my=class extends Gr{},gy=class extends Gr{},vy=class extends Gr{},yy=class extends Gr{},_y=class extends Gr{},Cy=class extends Gr{},xy=class extends Gr{};var UW=/^[a-z][a-z0-9+.-]*:/i,zW=t=>UW.test(t),yE=t=>(yE=Array.isArray,yE(t)),GW=yE,$W=GW,iR=$W;function qW(t){if(!t)return!0;for(let e in t)return!1;return!0}function WW(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var jW=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new zr(`${t} must be an integer`);if(e<0)throw new zr(`${t} must be a positive integer`);return e},KW=t=>{try{return JSON.parse(t)}catch{return}};var YW=t=>new Promise(e=>setTimeout(e,t));var ld="0.0.1";function JW(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var QW=()=>{var t,e,n,i,r;let s=JW();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ld,"X-Stainless-OS":oR(Deno.build.os),"X-Stainless-Arch":rR(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ld,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ld,"X-Stainless-OS":oR((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":rR((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};let a=XW();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ld,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ld,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function XW(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:n}of t){let i=n.exec(navigator.userAgent);if(i){let r=i[1]||0,s=i[2]||0,a=i[3]||0;return{browser:e,version:`${r}.${s}.${a}`}}}return null}var rR=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",oR=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),Wv,ZW=()=>Wv??(Wv=QW());function ej(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function VR(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function tj(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return VR({start(){},async pull(n){let{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function BR(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){let n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function nj(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}let i=t.getReader(),r=i.cancel();i.releaseLock(),await r}var ij=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var HR=()=>{var t;if(typeof File>"u"){let{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Mw(t,e,n){return HR(),new File(t,e??"unknown_file",n)}function rj(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var oj=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";var UR=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",sj=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&UR(t),aj=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function lj(t,e,n){if(HR(),t=await t,sj(t))return t instanceof File?t:Mw([await t.arrayBuffer()],t.name);if(aj(t)){let r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Mw(await _E(r),e,n)}let i=await _E(t);if(e||(e=rj(t)),!n?.type){let r=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Mw(i,e,n)}async function _E(t){var e,n,i,r,s;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(UR(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(oj(t))try{for(var c=!0,u=ns(t),p;p=await u.next(),e=p.done,!e;c=!0){r=p.value,c=!1;let m=r;a.push(...await _E(m))}}catch(m){n={error:m}}finally{try{!c&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}else{let m=(s=t?.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${m?`; constructor: ${m}`:""}${cj(t)}`)}return a}function cj(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}var uj=(()=>{class t{constructor(n){this._client=n}}t._key=[];return t})();function zR(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var sR=Object.freeze(Object.create(null)),dj=(t=zR)=>function(n,...i){if(n.length===1)return n[0];let r=!1,s=[],a=n.reduce((m,C,x)=>{var E,A,N;/[?#]/.test(C)&&(r=!0);let R=i[x],k=(r?encodeURIComponent:t)(""+R);return x!==i.length&&(R==null||typeof R=="object"&&R.toString===((N=Object.getPrototypeOf((A=Object.getPrototypeOf((E=R.hasOwnProperty)!==null&&E!==void 0?E:sR))!==null&&A!==void 0?A:sR))===null||N===void 0?void 0:N.toString))&&(k=R+"",s.push({start:m.length+C.length,length:k.length,error:`Value of type ${Object.prototype.toString.call(R).slice(8,-1)} is not a valid path parameter`})),m+C+(x===i.length?"":k)},""),c=a.split(/[?#]/,1)[0],u=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,p;for(;(p=u.exec(c))!==null;)s.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(s.sort((m,C)=>m.start-C.start),s.length>0){let m=0,C=s.reduce((x,E)=>{let A=" ".repeat(E.start-m),N="^".repeat(E.length);return m=E.start+E.length,x+A+N},"");throw new zr(`Path parameters result in path with invalid segments:
${s.map(x=>x.error).join(`
`)}
${a}
${C}`)}return a},jv=dj(zR);var by=class extends uj{create(e,n){var i;let{api_version:r=this._client.apiVersion}=e,s=dy(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new zr("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new zr("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(jv`/${r}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){let{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(jv`/${r}/interactions/${e}`,i)}cancel(e,n={},i){let{api_version:r=this._client.apiVersion}=n??{};return this._client.post(jv`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;let s=n??{},{api_version:a=this._client.apiVersion}=s,c=dy(s,["api_version"]);return this._client.get(jv`/${a}/interactions/${e}`,Object.assign(Object.assign({query:c},i),{stream:(r=n?.stream)!==null&&r!==void 0?r:!1}))}};by._key=Object.freeze(["interactions"]);var wy=class extends by{};function fj(t){let e=0;for(let r of t)e+=r.length;let n=new Uint8Array(e),i=0;for(let r of t)n.set(r,i),i+=r.length;return n}var Kv;function PE(t){let e;return(Kv??(e=new globalThis.TextEncoder,Kv=e.encode.bind(e)))(t)}var Yv;function aR(t){let e;return(Yv??(e=new globalThis.TextDecoder,Yv=e.decode.bind(e)))(t)}var fd=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?PE(e):e;this.buffer=fj([this.buffer,n]);let i=[],r;for(;(r=pj(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(aR(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let s=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,a=aR(this.buffer.subarray(0,s));i.push(a),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};fd.NEWLINE_CHARS=new Set([`
`,"\r"]);fd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function pj(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function hj(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}var Ey={off:0,error:200,warn:300,info:400,debug:500},lR=(t,e,n)=>{if(t){if(WW(Ey,t))return t;br(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ey))}`)}};function ih(){}function Jv(t,e,n){return!e||Ey[t]>Ey[n]?ih:e[t].bind(e)}var mj={error:ih,warn:ih,info:ih,debug:ih},cR=new WeakMap;function br(t){var e;let n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return mj;let r=cR.get(n);if(r&&r[0]===i)return r[1];let s={error:Jv("error",n,i),warn:Jv("warn",n,i),info:Jv("info",n,i),debug:Jv("debug",n,i)};return cR.set(n,[i,s]),s}var Bc=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var CE=class t{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1,s=i?br(i):console;function a(){return ts(this,arguments,function*(){var u,p,m,C;if(r)throw new zr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let x=!1;try{try{for(var E=!0,A=ns(gj(e,n)),N;N=yield Gt(A.next()),u=N.done,!u;E=!0){C=N.value,E=!1;let R=C;if(!x)if(R.data.startsWith("[DONE]")){x=!0;continue}else try{yield yield Gt(JSON.parse(R.data))}catch(k){throw s.error("Could not parse message into JSON:",R.data),s.error("From chunk:",R.raw),k}}}catch(R){p={error:R}}finally{try{!E&&!u&&(m=A.return)&&(yield Gt(m.call(A)))}finally{if(p)throw p.error}}x=!0}catch(R){if(gE(R))return yield Gt(void 0);throw R}finally{x||n.abort()}})}return new t(a,n,i)}static fromReadableStream(e,n,i){let r=!1;function s(){return ts(this,arguments,function*(){var u,p,m,C;let x=new fd,E=BR(e);try{for(var A=!0,N=ns(E),R;R=yield Gt(N.next()),u=R.done,!u;A=!0){C=R.value,A=!1;let k=C;for(let B of x.decode(k))yield yield Gt(B)}}catch(k){p={error:k}}finally{try{!A&&!u&&(m=N.return)&&(yield Gt(m.call(N)))}finally{if(p)throw p.error}}for(let k of x.flush())yield yield Gt(k)})}function a(){return ts(this,arguments,function*(){var u,p,m,C;if(r)throw new zr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let x=!1;try{try{for(var E=!0,A=ns(s()),N;N=yield Gt(A.next()),u=N.done,!u;E=!0){C=N.value,E=!1;let R=C;x||R&&(yield yield Gt(JSON.parse(R)))}}catch(R){p={error:R}}finally{try{!E&&!u&&(m=A.return)&&(yield Gt(m.call(A)))}finally{if(p)throw p.error}}x=!0}catch(R){if(gE(R))return yield Gt(void 0);throw R}finally{x||n.abort()}})}return new t(a,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],n=[],i=this.iterator(),r=s=>({next:()=>{if(s.length===0){let a=i.next();e.push(a),n.push(a)}return s.shift()}});return[new t(()=>r(e),this.controller,this.client),new t(()=>r(n),this.controller,this.client)]}toReadableStream(){let e=this,n;return VR({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{let{value:r,done:s}=await n.next();if(s)return i.close();let a=PE(JSON.stringify(r)+`
`);i.enqueue(a)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}};function gj(t,e){return ts(this,arguments,function*(){var i,r,s,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new zr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new zr("Attempted to iterate over a response with no body");let c=new xE,u=new fd,p=BR(t.body);try{for(var m=!0,C=ns(vj(p)),x;x=yield Gt(C.next()),i=x.done,!i;m=!0){a=x.value,m=!1;let E=a;for(let A of u.decode(E)){let N=c.decode(A);N&&(yield yield Gt(N))}}}catch(E){r={error:E}}finally{try{!m&&!i&&(s=C.return)&&(yield Gt(s.call(C)))}finally{if(r)throw r.error}}for(let E of u.flush()){let A=c.decode(E);A&&(yield yield Gt(A))}})}function vj(t){return ts(this,arguments,function*(){var n,i,r,s;let a=new Uint8Array;try{for(var c=!0,u=ns(t),p;p=yield Gt(u.next()),n=p.done,!n;c=!0){s=p.value,c=!1;let m=s;if(m==null)continue;let C=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?PE(m):m,x=new Uint8Array(a.length+C.length);x.set(a),x.set(C,a.length),a=x;let E;for(;(E=hj(a))!==-1;)yield yield Gt(a.slice(0,E)),a=a.slice(E)}}catch(m){i={error:m}}finally{try{!c&&!n&&(r=u.return)&&(yield Gt(r.call(u)))}finally{if(i)throw i.error}}a.length>0&&(yield yield Gt(a))})}var xE=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=yj(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}};function yj(t,e){let n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function _j(t,e){let{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:s}=e,a=await(async()=>{var c;if(e.options.stream)return br(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):CE.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;let u=n.headers.get("content-type"),p=(c=u?.split(";")[0])===null||c===void 0?void 0:c.trim();return p?.includes("application/json")||p?.endsWith("+json")?await n.json():await n.text()})();return br(t).debug(`[${i}] response parsed`,Bc({retryOfRequestLogID:r,url:n.url,status:n.status,body:a,durationMs:Date.now()-s})),a}var bE=class t extends Promise{constructor(e,n,i=_j){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new t(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var GR=Symbol("brand.privateNullableHeaders");function*Cj(t){if(!t)return;if(GR in t){let{values:i,nulls:r}=t;yield*i.entries();for(let s of r)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():iR(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){let r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");let s=iR(i[1])?i[1]:[i[1]],a=!1;for(let c of s)c!==void 0&&(e&&!a&&(a=!0,yield[r,null]),yield[r,c])}}var th=t=>{let e=new Headers,n=new Set;for(let i of t){let r=new Set;for(let[s,a]of Cj(i)){let c=s.toLowerCase();r.has(c)||(e.delete(s),r.add(c)),a===null?(e.delete(s),n.add(c)):(e.append(s,a),n.delete(c))}}return{[GR]:!0,values:e,nulls:n}};var kw=t=>{var e,n,i,r,s,a;if(typeof globalThis.process<"u")return(i=(n=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(a=(s=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||s===void 0?void 0:s.call(r,t))===null||a===void 0?void 0:a.trim()};var $R,xj=(()=>{class t{constructor(n){var i,r,s,a,c,u,p,{baseURL:m=kw("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:C=(i=kw("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:x="v1beta"}=n,E=dy(n,["baseURL","apiKey","apiVersion"]);let A=Object.assign(Object.assign({apiKey:C,apiVersion:x},E),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(r=A.timeout)!==null&&r!==void 0?r:t.DEFAULT_TIMEOUT,this.logger=(s=A.logger)!==null&&s!==void 0?s:console;let N="warn";this.logLevel=N,this.logLevel=(c=(a=lR(A.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:lR(kw("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:N,this.fetchOptions=A.fetchOptions,this.maxRetries=(u=A.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(p=A.fetch)!==null&&p!==void 0?p:ej(),this.encoder=ij,this._options=A,this.apiKey=C,this.apiVersion=x,this.clientAdapter=A.clientAdapter}withOptions(n){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),n))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:n,nulls:i}){if(!(n.has("authorization")||n.has("x-goog-api-key"))&&!(this.apiKey&&n.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(n){let i=th([n.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return th([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return th([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(n){return Object.entries(n).filter(([i,r])=>typeof r<"u").map(([i,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(i)}=`;throw new zr(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ld}`}defaultIdempotencyKey(){return`stainless-node-retry-${HW()}`}makeStatusError(n,i,r,s){return Gr.generate(n,i,r,s)}buildURL(n,i,r){let s=!this.baseURLOverridden()&&r||this.baseURL,a=zW(n)?new URL(n):new URL(s+(s.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),c=this.defaultQuery();return qW(c)||(i=Object.assign(Object.assign({},c),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(a.search=this.stringifyQuery(i)),a.toString()}async prepareOptions(n){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!n.path.startsWith(`/${this.apiVersion}/projects/`)){let i=n.path.slice(this.apiVersion.length+1);n.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(n,{url:i,options:r}){}get(n,i){return this.methodRequest("get",n,i)}post(n,i){return this.methodRequest("post",n,i)}patch(n,i){return this.methodRequest("patch",n,i)}put(n,i){return this.methodRequest("put",n,i)}delete(n,i){return this.methodRequest("delete",n,i)}methodRequest(n,i,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:n,path:i},s)))}request(n,i=null){return new bE(this,this.makeRequest(n,i,void 0))}async makeRequest(n,i,r){var s,a,c;let u=await n,p=(s=u.maxRetries)!==null&&s!==void 0?s:this.maxRetries;i==null&&(i=p),await this.prepareOptions(u);let{req:m,url:C,timeout:x}=await this.buildRequest(u,{retryCount:p-i});await this.prepareRequest(m,{url:C,options:u});let E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=r===void 0?"":`, retryOf: ${r}`,N=Date.now();if(br(this).debug(`[${E}] sending request`,Bc({retryOfRequestLogID:r,method:u.method,url:C,options:u,headers:m.headers})),!((a=u.signal)===null||a===void 0)&&a.aborted)throw new oh;let R=new AbortController,k=await this.fetchWithTimeout(C,m,x,R).catch(vE),B=Date.now();if(k instanceof globalThis.Error){let q=`retrying, ${i} attempts remaining`;if(!((c=u.signal)===null||c===void 0)&&c.aborted)throw new oh;let X=gE(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(i)return br(this).info(`[${E}] connection ${X?"timed out":"failed"} - ${q}`),br(this).debug(`[${E}] connection ${X?"timed out":"failed"} (${q})`,Bc({retryOfRequestLogID:r,url:C,durationMs:B-N,message:k.message})),this.retryRequest(u,i,r??E);throw br(this).info(`[${E}] connection ${X?"timed out":"failed"} - error; no more retries left`),br(this).debug(`[${E}] connection ${X?"timed out":"failed"} (error; no more retries left)`,Bc({retryOfRequestLogID:r,url:C,durationMs:B-N,message:k.message})),X?new py:new dd({cause:k})}let $=`[${E}${A}] ${m.method} ${C} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${B-N}ms`;if(!k.ok){let q=await this.shouldRetry(k);if(i&&q){let Te=`retrying, ${i} attempts remaining`;return await nj(k.body),br(this).info(`${$} - ${Te}`),br(this).debug(`[${E}] response error (${Te})`,Bc({retryOfRequestLogID:r,url:k.url,status:k.status,headers:k.headers,durationMs:B-N})),this.retryRequest(u,i,r??E,k.headers)}let X=q?"error; no more retries left":"error; not retryable";br(this).info(`${$} - ${X}`);let ie=await k.text().catch(Te=>vE(Te).message),me=KW(ie),ye=me?void 0:ie;throw br(this).debug(`[${E}] response error (${X})`,Bc({retryOfRequestLogID:r,url:k.url,status:k.status,headers:k.headers,message:ye,durationMs:Date.now()-N})),this.makeStatusError(k.status,me,ye,k.headers)}return br(this).info($),br(this).debug(`[${E}] response start`,Bc({retryOfRequestLogID:r,url:k.url,status:k.status,headers:k.headers,durationMs:B-N})),{response:k,options:u,controller:R,requestLogID:E,retryOfRequestLogID:r,startTime:N}}async fetchWithTimeout(n,i,r,s){let a=i||{},{signal:c,method:u}=a,p=dy(a,["signal","method"]);c&&c.addEventListener("abort",()=>s.abort());let m=setTimeout(()=>s.abort(),r),C=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,x=Object.assign(Object.assign(Object.assign({signal:s.signal},C?{duplex:"half"}:{}),{method:"GET"}),p);u&&(x.method=u.toUpperCase());try{return await this.fetch.call(void 0,n,x)}finally{clearTimeout(m)}}async shouldRetry(n){let i=n.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,i,r,s){var a;let c,u=s?.get("retry-after-ms");if(u){let m=parseFloat(u);Number.isNaN(m)||(c=m)}let p=s?.get("retry-after");if(p&&!c){let m=parseFloat(p);Number.isNaN(m)?c=Date.parse(p)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){let m=(a=n.maxRetries)!==null&&a!==void 0?a:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(i,m)}return await YW(c),this.makeRequest(n,i-1,r)}calculateDefaultRetryTimeoutMillis(n,i){let a=i-n,c=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return c*u*1e3}async buildRequest(n,{retryCount:i=0}={}){var r,s,a;let c=Object.assign({},n),{method:u,path:p,query:m,defaultBaseURL:C}=c,x=this.buildURL(p,m,C);"timeout"in c&&jW("timeout",c.timeout),c.timeout=(r=c.timeout)!==null&&r!==void 0?r:this.timeout;let{bodyHeaders:E,body:A}=this.buildBody({options:c}),N=await this.buildHeaders({options:n,method:u,bodyHeaders:E,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:N},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(a=c.fetchOptions)!==null&&a!==void 0?a:{}),url:x,timeout:c.timeout}}async buildHeaders({options:n,method:i,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&i!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=n.idempotencyKey);let c=await this.authHeaders(n),u=th([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},n.timeout?{"X-Stainless-Timeout":String(Math.trunc(n.timeout/1e3))}:{}),ZW()),this._options.defaultHeaders,r,n.headers,c]);return this.validateHeaders(u),u.values}buildBody({options:{body:n,headers:i}}){if(!n)return{bodyHeaders:void 0,body:void 0};let r=th([i]);return ArrayBuffer.isView(n)||n instanceof ArrayBuffer||n instanceof DataView||typeof n=="string"&&r.values.has("content-type")||globalThis.Blob&&n instanceof globalThis.Blob||n instanceof FormData||n instanceof URLSearchParams||globalThis.ReadableStream&&n instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:n}:typeof n=="object"&&(Symbol.asyncIterator in n||Symbol.iterator in n&&"next"in n&&typeof n.next=="function")?{bodyHeaders:void 0,body:tj(n)}:this.encoder({body:n,headers:r})}}return t.DEFAULT_TIMEOUT=6e4,t})(),vi=class extends xj{constructor(){super(...arguments),this.interactions=new wy(this)}};$R=vi;vi.GeminiNextGenAPIClient=$R;vi.GeminiNextGenAPIClientError=zr;vi.APIError=Gr;vi.APIConnectionError=dd;vi.APIConnectionTimeoutError=py;vi.APIUserAbortError=oh;vi.NotFoundError=vy;vi.ConflictError=yy;vi.RateLimitError=Cy;vi.BadRequestError=hy;vi.AuthenticationError=my;vi.InternalServerError=xy;vi.PermissionDeniedError=gy;vi.UnprocessableEntityError=_y;vi.toFile=lj;vi.Interactions=wy;function bj(t,e){let n={},i=g(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function wj(t,e){let n={},i=g(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function Ej(t,e){let n={},i=g(t,["sdkHttpResponse"]);return i!=null&&v(n,["sdkHttpResponse"],i),n}function Sj(t,e){let n={},i=g(t,["sdkHttpResponse"]);return i!=null&&v(n,["sdkHttpResponse"],i),n}function Dj(t,e,n){let i={};if(g(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let r=g(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&v(e,["displayName"],r),g(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let s=g(t,["epochCount"]);e!==void 0&&s!=null&&v(e,["tuningTask","hyperparameters","epochCount"],s);let a=g(t,["learningRateMultiplier"]);if(a!=null&&v(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),g(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(g(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let c=g(t,["batchSize"]);e!==void 0&&c!=null&&v(e,["tuningTask","hyperparameters","batchSize"],c);let u=g(t,["learningRate"]);if(e!==void 0&&u!=null&&v(e,["tuningTask","hyperparameters","learningRate"],u),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(g(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function Tj(t,e,n){let i={},r=g(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let E=g(t,["validationDataset"]);e!==void 0&&E!=null&&v(e,["supervisedTuningSpec"],uR(E))}else if(r==="PREFERENCE_TUNING"){let E=g(t,["validationDataset"]);e!==void 0&&E!=null&&v(e,["preferenceOptimizationSpec"],uR(E))}let s=g(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&v(e,["tunedModelDisplayName"],s);let a=g(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);let c=g(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let E=g(t,["epochCount"]);e!==void 0&&E!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(c==="PREFERENCE_TUNING"){let E=g(t,["epochCount"]);e!==void 0&&E!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let u=g(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let E=g(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(u==="PREFERENCE_TUNING"){let E=g(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let p=g(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){let E=g(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(p==="PREFERENCE_TUNING"){let E=g(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&v(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let m=g(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){let E=g(t,["adapterSize"]);e!==void 0&&E!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(m==="PREFERENCE_TUNING"){let E=g(t,["adapterSize"]);e!==void 0&&E!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(g(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let C=g(t,["labels"]);e!==void 0&&C!=null&&v(e,["labels"],C);let x=g(t,["beta"]);return e!==void 0&&x!=null&&v(e,["preferenceOptimizationSpec","hyperParameters","beta"],x),i}function Ij(t,e){let n={},i=g(t,["baseModel"]);i!=null&&v(n,["baseModel"],i);let r=g(t,["preTunedModel"]);r!=null&&v(n,["preTunedModel"],r);let s=g(t,["trainingDataset"]);s!=null&&Bj(s);let a=g(t,["config"]);return a!=null&&Dj(a,n),n}function Aj(t,e){let n={},i=g(t,["baseModel"]);i!=null&&v(n,["baseModel"],i);let r=g(t,["preTunedModel"]);r!=null&&v(n,["preTunedModel"],r);let s=g(t,["trainingDataset"]);s!=null&&Hj(s,n,e);let a=g(t,["config"]);return a!=null&&Tj(a,n,e),n}function Mj(t,e){let n={},i=g(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function kj(t,e){let n={},i=g(t,["name"]);return i!=null&&v(n,["_url","name"],i),n}function Nj(t,e,n){let i={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);let s=g(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);let a=g(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),i}function Fj(t,e,n){let i={},r=g(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);let s=g(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);let a=g(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),i}function Rj(t,e){let n={},i=g(t,["config"]);return i!=null&&Nj(i,n),n}function Pj(t,e){let n={},i=g(t,["config"]);return i!=null&&Fj(i,n),n}function Lj(t,e){let n={},i=g(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);let r=g(t,["nextPageToken"]);r!=null&&v(n,["nextPageToken"],r);let s=g(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>qR(c))),v(n,["tuningJobs"],a)}return n}function Oj(t,e){let n={},i=g(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);let r=g(t,["nextPageToken"]);r!=null&&v(n,["nextPageToken"],r);let s=g(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>wE(c))),v(n,["tuningJobs"],a)}return n}function Vj(t,e){let n={},i=g(t,["name"]);i!=null&&v(n,["model"],i);let r=g(t,["name"]);return r!=null&&v(n,["endpoint"],r),n}function Bj(t,e){let n={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=g(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),v(n,["examples","examples"],r)}return n}function Hj(t,e,n){let i={},r=g(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let a=g(t,["gcsUri"]);e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){let a=g(t,["gcsUri"]);e!==void 0&&a!=null&&v(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let s=g(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){let a=g(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){let a=g(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&v(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(g(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function qR(t,e){let n={},i=g(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);let r=g(t,["name"]);r!=null&&v(n,["name"],r);let s=g(t,["state"]);s!=null&&v(n,["state"],_R(s));let a=g(t,["createTime"]);a!=null&&v(n,["createTime"],a);let c=g(t,["tuningTask","startTime"]);c!=null&&v(n,["startTime"],c);let u=g(t,["tuningTask","completeTime"]);u!=null&&v(n,["endTime"],u);let p=g(t,["updateTime"]);p!=null&&v(n,["updateTime"],p);let m=g(t,["description"]);m!=null&&v(n,["description"],m);let C=g(t,["baseModel"]);C!=null&&v(n,["baseModel"],C);let x=g(t,["_self"]);return x!=null&&v(n,["tunedModel"],Vj(x)),n}function wE(t,e){let n={},i=g(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);let r=g(t,["name"]);r!=null&&v(n,["name"],r);let s=g(t,["state"]);s!=null&&v(n,["state"],_R(s));let a=g(t,["createTime"]);a!=null&&v(n,["createTime"],a);let c=g(t,["startTime"]);c!=null&&v(n,["startTime"],c);let u=g(t,["endTime"]);u!=null&&v(n,["endTime"],u);let p=g(t,["updateTime"]);p!=null&&v(n,["updateTime"],p);let m=g(t,["error"]);m!=null&&v(n,["error"],m);let C=g(t,["description"]);C!=null&&v(n,["description"],C);let x=g(t,["baseModel"]);x!=null&&v(n,["baseModel"],x);let E=g(t,["tunedModel"]);E!=null&&v(n,["tunedModel"],E);let A=g(t,["preTunedModel"]);A!=null&&v(n,["preTunedModel"],A);let N=g(t,["supervisedTuningSpec"]);N!=null&&v(n,["supervisedTuningSpec"],N);let R=g(t,["preferenceOptimizationSpec"]);R!=null&&v(n,["preferenceOptimizationSpec"],R);let k=g(t,["tuningDataStats"]);k!=null&&v(n,["tuningDataStats"],k);let B=g(t,["encryptionSpec"]);B!=null&&v(n,["encryptionSpec"],B);let $=g(t,["partnerModelTuningSpec"]);$!=null&&v(n,["partnerModelTuningSpec"],$);let q=g(t,["customBaseModel"]);q!=null&&v(n,["customBaseModel"],q);let X=g(t,["experiment"]);X!=null&&v(n,["experiment"],X);let ie=g(t,["labels"]);ie!=null&&v(n,["labels"],ie);let me=g(t,["outputUri"]);me!=null&&v(n,["outputUri"],me);let ye=g(t,["pipelineJob"]);ye!=null&&v(n,["pipelineJob"],ye);let ge=g(t,["serviceAccount"]);ge!=null&&v(n,["serviceAccount"],ge);let Te=g(t,["tunedModelDisplayName"]);Te!=null&&v(n,["tunedModelDisplayName"],Te);let j=g(t,["veoTuningSpec"]);return j!=null&&v(n,["veoTuningSpec"],j),n}function Uj(t,e){let n={},i=g(t,["sdkHttpResponse"]);i!=null&&v(n,["sdkHttpResponse"],i);let r=g(t,["name"]);r!=null&&v(n,["name"],r);let s=g(t,["metadata"]);s!=null&&v(n,["metadata"],s);let a=g(t,["done"]);a!=null&&v(n,["done"],a);let c=g(t,["error"]);return c!=null&&v(n,["error"],c),n}function uR(t,e){let n={},i=g(t,["gcsUri"]);i!=null&&v(n,["validationDatasetUri"],i);let r=g(t,["vertexDatasetResource"]);return r!=null&&v(n,["validationDatasetUri"],r),n}var EE=class extends is{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ca(gl.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);let s=Object.assign(Object.assign({},n),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{let r=Object.assign({},n);return await this.tuneInternal(r)}else{let r=Object.assign({},n),s=await this.tuneMldevInternal(r),a="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?a=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(a=s.name.split("/operations/")[0]),{name:a,state:pR.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=kj(e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>wE(m))}else{let p=Mj(e);return c=yt("{name}",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>qR(m))}}async listInternal(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=Pj(e);return c=yt("tuningJobs",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=Oj(m),x=new oy;return Object.assign(x,C),x})}else{let p=Rj(e);return c=yt("tunedModels",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=Lj(m),x=new oy;return Object.assign(x,C),x})}}async cancel(e){var n,i,r,s;let a,c="",u={};if(this.apiClient.isVertexAI()){let p=wj(e);return c=yt("{name}:cancel",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=Sj(m),x=new sy;return Object.assign(x,C),x})}else{let p=bj(e);return c=yt("{name}:cancel",p._url),u=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(C=>{let x=C;return x.sdkHttpResponse={headers:m.headers},x})),a.then(m=>{let C=Ej(m),x=new sy;return Object.assign(x,C),x})}}async tuneInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){let c=Aj(e,e);return s=yt("tuningJobs",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:u.headers},m})),r.then(u=>wE(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let c=Ij(e);return s=yt("tunedModels",c._url),a=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:u.headers},m})),r.then(u=>Uj(u))}}};var SE=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},zj=1024*1024*8,Gj=3,$j=1e3,qj=2,Sy="x-goog-upload-status";async function Wj(t,e,n){var i;let r=await WR(t,e,n),s=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[Sy])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function jj(t,e,n){var i;let r=await WR(t,e,n),s=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[Sy])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let a=fR(s),c=new Kw;return Object.assign(c,a),c}async function WR(t,e,n){var i,r;let s=0,a=0,c=new rh(new Response),u="upload";for(s=t.size;a<s;){let p=Math.min(zj,s-a),m=t.slice(a,a+p);a+p>=s&&(u+=", finalize");let C=0,x=$j;for(;C<Gj&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),!(!((i=c?.headers)===null||i===void 0)&&i[Sy]));)C++,await Yj(x),x=x*qj;if(a+=p,((r=c?.headers)===null||r===void 0?void 0:r[Sy])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function Kj(t){return{size:t.size,type:t.type}}function Yj(t){return new Promise(e=>setTimeout(e,t))}var DE=class{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Wj(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jj(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Kj(e)}};var TE=class{create(e,n,i){return new IE(e,n,i)}},IE=class{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var dR="x-goog-api-key",AE=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(dR)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(dR,this.apiKey)}}};var Jj="gl-node/",Dy=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let n=new vi({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let i=E9(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let r=new AE(this.apiKey);this.apiClient=new oE({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Jj+"web",uploader:new DE,downloader:new SE}),this.models=new dE(this.apiClient),this.live=new cE(this.apiClient,r,new TE),this.batches=new Qw(this.apiClient),this.chats=new Zw(this.models,this.apiClient),this.caches=new Xw(this.apiClient),this.files=new tE(this.apiClient),this.operations=new fE(this.apiClient),this.authTokens=new pE(this.apiClient),this.tunings=new EE(this.apiClient),this.fileSearchStores=new mE(this.apiClient)}};var $r=class t{ai;constructor(){let e=typeof process<"u"&&process.env?.API_KEY?process.env.API_KEY:"";this.ai=new Dy({apiKey:e})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var My=class t{ai=he($r).ai;async generateBiDashboard(e,n){let r=`You are a business intelligence analyst. Analyze the following JSON contact data and generate a JSON object for a dashboard. The data fields are: ${n.map(c=>c.name).join(", ")}.
    The JSON object must contain three properties: 'kpis', 'charts', and 'insights'.
    1. 'kpis': An array of 2-3 key performance indicators. Each KPI object should have a 'title' (e.g., "Total Revenue") and a 'value' (e.g., "$1.2M").
    2. 'charts': An array containing one chart object. This object must have 'type' set to 'bar', a 'title' (e.g., "Contacts by Lead Source"), and 'data' which is an array of objects, each with a 'label' and 'value'. Choose the most relevant categorical field for the chart.
    3. 'insights': An array of 2-3 brief, actionable insights in plain text.
    Data: 

${JSON.stringify(e,null,2)}`,a=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:bt.OBJECT,properties:{kpis:{type:bt.ARRAY,items:{type:bt.OBJECT,properties:{title:{type:bt.STRING},value:{type:bt.STRING},change:{type:bt.STRING,nullable:!0}},required:["title","value"]}},charts:{type:bt.ARRAY,items:{type:bt.OBJECT,properties:{type:{type:bt.STRING},title:{type:bt.STRING},data:{type:bt.ARRAY,items:{type:bt.OBJECT,properties:{label:{type:bt.STRING},value:{type:bt.NUMBER}},required:["label","value"]}}},required:["type","title","data"]}},insights:{type:bt.ARRAY,items:{type:bt.STRING}}},required:["kpis","charts","insights"]}}})).text.trim();return JSON.parse(a)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var Qj=()=>[1,2,3],Xj=(t,e)=>e.title;function Zj(t,e){t&1&&(z(0,"div",4),ke(1,"div",13)(2,"div",14),G())}function eK(t,e){t&1&&(z(0,"div",0)(1,"div",3),et(2,Zj,3,0,"div",4,xn),G(),z(4,"div",5)(5,"div",6),ke(6,"div",7)(7,"div",8),G(),z(8,"div",4),ke(9,"div",9),z(10,"div",10),ke(11,"div",11)(12,"div",12)(13,"div",11),G()()()()),t&2&&(V(2),tt(pa(0,Qj)))}function tK(t,e){if(t&1&&(z(0,"div",1),ke(1,"i",15),z(2,"h3",16),Y(3,"Error"),G(),z(4,"p"),Y(5),G()()),t&2){let n=F();V(5),Ue(n.error())}}function nK(t,e){if(t&1&&(z(0,"div",17)(1,"h3",21),Y(2),G(),z(3,"p",22),Y(4),G()()),t&2){let n=e.$implicit;V(2),Ue(n.title),V(2),Ue(n.value)}}function iK(t,e){if(t&1&&(z(0,"div",18)(1,"h3",19),Y(2),G(),ke(3,"div",23),G()),t&2){let i=F().charts[0];V(2),Ue(i.title),V(),Ye("data",i.data)}}function rK(t,e){if(t&1&&(z(0,"li",20)(1,"div",24),ke(2,"i",25),G(),z(3,"p",26),Y(4),G()()),t&2){let n=e.$implicit;V(4),Ue(n)}}function oK(t,e){if(t&1&&(z(0,"div",2)(1,"div",3),et(2,nK,5,2,"div",17,Xj),G(),z(4,"div",5),fe(5,iK,4,2,"div",18),z(6,"div",17)(7,"h3",19),Y(8,"AI Insights"),G(),z(9,"ul",10),et(10,rK,5,1,"li",20,xn),G()()()()),t&2){let n=e;V(2),tt(n.kpis),V(3),pe(n.charts.length>0?5:-1),V(5),tt(n.insights)}}var ky=class t{data=Ee.required();columns=Ee.required();aiDashboardService=he(My);isLoading=xe(!0);dashboardContent=xe(null);error=xe(null);constructor(){ln(async e=>{let n=this.data(),i=this.columns();if(n.length>0){this.isLoading.set(!0),this.error.set(null);try{let r=await this.aiDashboardService.generateBiDashboard(n,i);this.dashboardContent.set(r)}catch(r){console.error("Failed to generate BI dashboard:",r),this.error.set("Could not load AI-powered dashboard. Please try again.")}finally{this.isLoading.set(!1)}}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-bi-view"]],inputs:{data:[1,"data"],columns:[1,"columns"]},decls:3,vars:1,consts:[[1,"space-y-8","animate-pulse"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center","text-gray-500"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-white","p-6","rounded-lg","shadow"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","bg-white","p-6","rounded-lg","shadow"],[1,"h-6","bg-gray-300","rounded","w-1/4","mb-6"],[1,"h-72","bg-gray-300","rounded"],[1,"h-6","bg-gray-300","rounded","w-1/3","mb-6"],[1,"space-y-4"],[1,"h-4","bg-gray-300","rounded","w-full"],[1,"h-4","bg-gray-300","rounded","w-5/6"],[1,"h-4","bg-gray-300","rounded","w-1/3","mb-4"],[1,"h-8","bg-gray-300","rounded","w-1/2"],[1,"pi","pi-exclamation-triangle","text-5xl","text-red-500","mb-4"],[1,"text-xl","font-semibold","mb-2"],[1,"bg-white","p-6","rounded-lg","shadow-md","border","border-gray-200"],[1,"lg:col-span-2","bg-white","p-6","rounded-lg","shadow-md","border","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"flex","items-start"],[1,"text-sm","font-medium","text-gray-500","truncate"],[1,"mt-1","text-3xl","font-semibold","tracking-tight","text-gray-900"],["appD3BarChart","",3,"data"],[1,"flex-shrink-0"],[1,"pi","pi-check-circle","text-green-500","mt-1"],[1,"ml-3","text-sm","text-gray-600"]],template:function(n,i){if(n&1&&fe(0,eK,14,1,"div",0)(1,tK,6,1,"div",1)(2,oK,12,1,"div",2),n&2){let r;pe(i.isLoading()?0:i.error()?1:(r=i.dashboardContent())?2:-1,r)}},dependencies:[Ft,qv],encapsulation:2,changeDetection:0})};var gd=class t{ai=he($r).ai;async generateNarration(e,n){let r=`You are a data analyst. Based on the following JSON data representing contacts, provide a concise narrative summary. The data has the following columns: ${n.map(a=>a.name).join(", ")}. Highlight key trends, such as distribution of contacts or any notable patterns in annual revenue. Keep the summary to 3-4 sentences. Data: 

${JSON.stringify(e,null,2)}`;return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:r})).text}async suggestInsights(e,n){let r=`You are a business intelligence analyst. Analyze this JSON contact data and suggest 3 key insights or important metrics a user should focus on. Present them as a bulleted list using markdown. The available data fields are: ${n.map(a=>a.name).join(", ")}. For example, suggest looking at the average revenue or which lead source is most common. Data: 

${JSON.stringify(e,null,2)}`;return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:r})).text}async getQuickMetrics(e,n){let r=`You are a data analyst. Based on the following JSON contact data, identify the most insightful categorical column (like 'Lead Source', 'Country', or 'City') to perform a 'group by' and 'count' operation on. Then, provide the counts for each category in that column, ordered from highest to lowest count. Present the result in a clear, human-readable format with a title and use markdown for formatting. The available data fields are: ${n.map(a=>a.name).join(", ")}. Data: 

${JSON.stringify(e,null,2)}`;return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:r})).text}async summarizeCalendarDay(e){let n=`You are a helpful assistant. Summarize the following list of contacts that were created on a specific day. Mention the total number of new contacts and highlight any notable names or companies if there are fewer than 5 contacts. Keep the summary to 1-2 sentences. Data:

${JSON.stringify(e.map(r=>({name:r.contact_person,company:r.organization_name})),null,2)}`;return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:n})).text}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var sK=()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],aK=(t,e)=>e.date,lK=(t,e)=>e.organization_id;function cK(t,e){if(t&1&&(ne(0,"div",14),Y(1),oe()),t&2){let n=e.$implicit;V(),Ue(n)}}function uK(t,e){if(t&1&&(ne(0,"div",19)(1,"span",20),Y(2),oe()()),t&2){let n=F().$implicit;V(2),tn(" ",n.contacts.length," ")}}function dK(t,e){if(t&1){let n=Pe();ne(0,"div",17),Je("click",function(){let r=ee(n).$implicit,s=F();return te(s.selectDay(r))}),ne(1,"time",18),Si(2,"date"),Y(3),Si(4,"date"),oe(),fe(5,uK,3,1,"div",19),oe()}if(t&2){let n=e.$implicit,i=F();Qe("cursor-pointer",n.contacts.length>0)("hover:bg-slate-50",n.contacts.length>0)("bg-gray-50",!n.isCurrentMonth),V(),Qe("text-gray-400",!n.isCurrentMonth)("text-white",i.isToday(n.date))("bg-slate-900",i.isToday(n.date))("font-semibold",i.isToday(n.date)),Ot("dateTime",Br(2,17,n.date,"yyyy-MM-dd")),V(2),tn(" ",Br(4,20,n.date,"d")," "),V(2),pe(n.contacts.length>0?5:-1)}}function fK(t,e){t&1&&ot(0,"div",30)}function pK(t,e){if(t&1&&(ne(0,"p",31),Y(1),oe()),t&2){let n=F(2);V(),Ue(n.aiSummary())}}function hK(t,e){if(t&1&&(ne(0,"li",34),ot(1,"img",35),ne(2,"div")(3,"p",36),Y(4),oe(),ne(5,"p",37),Y(6),oe()()()),t&2){let n=e.$implicit;V(),Ot("src",n.avatar_url,no),V(3),Ue(n.contact_person),V(2),Ue(n.organization_name)}}function mK(t,e){if(t&1){let n=Pe();ne(0,"div",21),Je("click",function(){ee(n);let r=F();return te(r.selectedDay.set(null))}),ne(1,"div",22),Je("click",function(r){return ee(n),te(r.stopPropagation())}),ne(2,"header",1)(3,"h3",23),Y(4),Si(5,"date"),oe(),ne(6,"button",24),Je("click",function(){ee(n);let r=F();return te(r.selectedDay.set(null))}),ot(7,"i",25),oe()(),ne(8,"div",26)(9,"div",27)(10,"h4",28),ot(11,"i",29),Y(12,"AI Summary"),oe(),fe(13,fK,1,0,"div",30)(14,pK,2,1,"p",31),oe(),ne(15,"h4",32),Y(16),oe(),ne(17,"ul",33),et(18,hK,7,3,"li",34,lK),oe()()()()}if(t&2){let n=e,i=F();V(4),tn("Activity for ",Br(5,3,n.date,"longDate")),V(9),pe(i.isSummaryLoading()?13:14),V(3),tn("New Contacts (",n.contacts.length,")"),V(2),tt(n.contacts)}}var Ny=class t{data=Ee.required();columns=Ee.required();config=Ee.required();aiSummaryService=he(gd);currentDate=xe(new Date);selectedDay=xe(null);aiSummary=xe(null);isSummaryLoading=xe(!1);dateFieldName=ut(()=>{let e=this.config().dateFieldCode,n=this.columns().find(i=>i.code===e);return n?n.name:this.config().dateFieldCode});contactsByDate=ut(()=>{let e=new Map,n=this.config().dateFieldCode;for(let i of this.data()){let r=i[n];if(r&&typeof r=="string"){let s=new Date(r).toISOString().split("T")[0];e.has(s)||e.set(s,[]),e.get(s).push(i)}}return e});calendarGrid=ut(()=>{let e=this.currentDate(),n=e.getFullYear(),i=e.getMonth(),r=new Date(n,i,1),s=new Date(n,i+1,0),a=r.getDay(),c=s.getDate(),u=[];for(let m=0;m<a;m++){let C=new Date(r);C.setDate(C.getDate()-(a-m)),u.push({date:C,isCurrentMonth:!1,contacts:this.getContactsForDate(C)})}for(let m=1;m<=c;m++){let C=new Date(n,i,m);u.push({date:C,isCurrentMonth:!0,contacts:this.getContactsForDate(C)})}let p=42-u.length;for(let m=1;m<=p;m++){let C=new Date(s);C.setDate(C.getDate()+m),u.push({date:C,isCurrentMonth:!1,contacts:this.getContactsForDate(C)})}return u});getContactsForDate(e){let n=e.toISOString().split("T")[0];return this.contactsByDate().get(n)||[]}async selectDay(e){if(e.contacts.length===0){this.selectedDay.set(null);return}this.selectedDay.set(e),this.isSummaryLoading.set(!0),this.aiSummary.set(null);try{let n=await this.aiSummaryService.summarizeCalendarDay(e.contacts);this.aiSummary.set(n)}catch(n){console.error("Failed to get AI summary",n),this.aiSummary.set("Could not generate summary.")}finally{this.isSummaryLoading.set(!1)}}changeMonth(e){this.currentDate.update(n=>{let i=new Date(n);return i.setMonth(i.getMonth()+e),i})}goToToday(){this.currentDate.set(new Date)}isToday(e){let n=new Date;return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-calendar-view"]],inputs:{data:[1,"data"],columns:[1,"columns"],config:[1,"config"]},decls:24,vars:7,consts:[[1,"bg-white","rounded-lg","shadow-md","border","border-gray-200","h-full","flex","flex-col"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"flex","items-center","gap-4"],[1,"px-4","py-2","text-sm","font-medium","border","rounded-md","hover:bg-gray-100",3,"click"],[1,"flex","items-center","gap-2"],["title","Previous month",1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-chevron-left"],["title","Next month",1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-chevron-right"],[1,"text-lg","font-semibold","text-center"],[1,"w-48","text-right"],[1,"text-sm","font-medium","text-gray-700"],[1,"font-semibold","text-indigo-600"],[1,"grid","grid-cols-7","flex-grow"],[1,"text-center","font-medium","text-xs","text-gray-500","py-2","border-b","border-r","border-gray-200"],[1,"border-b","border-r","border-gray-200","p-2","flex","flex-col","transition-colors",3,"cursor-pointer","hover:bg-slate-50","bg-gray-50"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50"],[1,"border-b","border-r","border-gray-200","p-2","flex","flex-col","transition-colors",3,"click"],[1,"h-6","w-6","flex","items-center","justify-center","rounded-full","text-sm",3,"dateTime"],[1,"mt-2","text-center"],[1,"inline-flex","items-center","justify-center","h-6","w-6","text-xs","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-lg","m-4",3,"click"],[1,"text-lg","font-semibold"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6"],[1,"bg-gray-50","p-4","rounded-lg","mb-4"],[1,"font-semibold","text-sm","mb-2","flex","items-center"],[1,"pi","pi-sparkles","text-indigo-500","mr-2"],[1,"h-4","bg-gray-300","rounded","w-full","animate-pulse"],[1,"text-sm","text-gray-700"],[1,"font-semibold","text-sm","mb-2"],[1,"divide-y","divide-gray-200","max-h-60","overflow-y-auto"],[1,"py-2","flex","items-center","gap-3"],["alt","Avatar",1,"h-8","w-8","rounded-full","object-cover",3,"src"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"]],template:function(n,i){if(n&1&&(ne(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),Je("click",function(){return i.goToToday()}),Y(4,"Today"),oe(),ne(5,"div",4)(6,"button",5),Je("click",function(){return i.changeMonth(-1)}),ot(7,"i",6),oe(),ne(8,"button",7),Je("click",function(){return i.changeMonth(1)}),ot(9,"i",8),oe()()(),ne(10,"h2",9),Y(11),Si(12,"date"),oe(),ne(13,"div",10)(14,"p",11),Y(15," Field: "),ne(16,"span",12),Y(17),oe()()()(),ne(18,"div",13),et(19,cK,2,1,"div",14,xn),et(21,dK,6,23,"div",15,aK),oe()(),fe(23,mK,20,6,"div",16)),n&2){let r;V(11),Ue(Br(12,3,i.currentDate(),"LLLL yyyy")),V(6),tn(" ",i.dateFieldName()," "),V(2),tt(pa(6,sK)),V(2),tt(i.calendarGrid()),V(2),pe((r=i.selectedDay())?23:-1,r)}},dependencies:[Ft,Tc],encapsulation:2,changeDetection:0})};function gK(t,e){if(t&1&&(ne(0,"div",2),ot(1,"span",18),ne(2,"span",19),Y(3),oe()()),t&2){let n=e;Ot("title","Connection is "+n.text),V(),Zt(n.class),V(2),Ue(n.text)}}function vK(t,e){t&1&&(ne(0,"div",3),ot(1,"i",20),ne(2,"span",7),Y(3),oe()()),t&2&&(Ot("title","Current Data Strategy"),V(3),Ue(e))}function yK(t,e){t&1&&(ne(0,"span",22),Y(1,"Syncing..."),oe())}function _K(t,e){if(t&1&&(ne(0,"span",23),Y(1),oe()),t&2){let n=F(2);Ot("title",n.fullSyncTime()),V(),tn("Last sync: ",n.relativeSyncTime())}}function CK(t,e){if(t&1&&(ne(0,"div",4),ot(1,"i",21),fe(2,yK,2,0,"span",22)(3,_K,2,2,"span",23),oe()),t&2){let n=F();V(2),pe(n.isSyncing()?2:3)}}function xK(t,e){if(t&1&&(ne(0,"option",11),Y(1),oe()),t&2){let n=e.$implicit,i=F();Ot("value",n)("selected",n===i.pageSize()),V(),Ue(n)}}function bK(t,e){t&1&&(ne(0,"span",27),Y(1,"..."),oe())}function wK(t,e){if(t&1){let n=Pe();ne(0,"button",29),Je("click",function(){ee(n);let r=F().$implicit,s=F(2);return te(s.goToPage(r))}),Y(1),oe()}if(t&2){let n=F().$implicit,i=F(2);Qe("bg-slate-900",n===i.currentPage())("text-white",n===i.currentPage())("border-slate-900",n===i.currentPage()),Ot("title","Go to page "+n),V(),tn(" ",n," ")}}function EK(t,e){if(t&1&&fe(0,bK,2,0,"span",27)(1,wK,2,8,"button",28),t&2){let n=e.$implicit;pe(n==="..."?0:1)}}function SK(t,e){if(t&1){let n=Pe();ne(0,"button",24),Je("click",function(){ee(n);let r=F();return te(r.previousPage())}),Y(1," Previous "),oe(),ne(2,"div",25),et(3,EK,2,1,null,null,ua),oe(),ne(5,"button",26),Je("click",function(){ee(n);let r=F();return te(r.nextPage())}),Y(6," Next "),oe()}if(t&2){let n=F();Ot("disabled",n.currentPage()===1),V(3),tt(n.pages()),V(2),Ot("disabled",n.currentPage()===n.totalPages())}}function DK(t,e){t&1&&ot(0,"div",15)}var Fy=class t{currentPage=Ee.required();pageSize=Ee.required();totalRecords=Ee.required();pageSizeOptions=Ee([12,20,50,100]);infiniteScroll=Ee(!1);infiniteScrollBehavior=Ee("append");currentRecordCount=Ee(0);autoSizingEnabled=Ee(!1);dataStrategy=Ee();connectionStatus=Ee();lastSyncTime=Ee();isSyncing=Ee();pageChange=gt();pageSizeChange=gt();autoSizingToggle=gt();chatbotToggle=gt();isAppendMode=ut(()=>this.infiniteScroll()&&this.infiniteScrollBehavior()==="append");totalPages=ut(()=>Math.ceil(this.totalRecords()/this.pageSize()));recordRangeStart=ut(()=>this.isAppendMode()?this.totalRecords()>0?1:0:(this.currentPage()-1)*this.pageSize()+1);recordRangeEnd=ut(()=>this.isAppendMode()?this.currentRecordCount():Math.min(this.currentPage()*this.pageSize(),this.totalRecords()));pages=ut(()=>{let e=this.totalPages(),n=this.currentPage(),i=2,r=[];for(let s=Math.max(2,n-i);s<=Math.min(e-1,n+i);s++)r.push(s);return n-i>2&&r.unshift("..."),n+i<e-1&&r.push("..."),r.unshift(1),e>1&&r.push(e),r});relativeSyncTime=ut(()=>{let e=this.lastSyncTime();if(!e)return"never";let n=new Date().getTime(),i=Math.round((n-e)/1e3);if(i<2)return"just now";if(i<60)return`${i}s ago`;let r=Math.round(i/60);if(r<60)return`${r}m ago`;let s=Math.round(r/60);return s<24?`${s}h ago`:new Date(e).toLocaleDateString()});fullSyncTime=ut(()=>{let e=this.lastSyncTime();return e?new Date(e).toLocaleString():""});goToPage(e){typeof e=="number"&&e>=1&&e<=this.totalPages()&&this.pageChange.emit(e)}nextPage(){this.currentPage()<this.totalPages()&&this.goToPage(this.currentPage()+1)}previousPage(){this.currentPage()>1&&this.goToPage(this.currentPage()-1)}onPageSizeChange(e){let n=parseInt(e.target.value,10);this.pageSizeChange.emit(n)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-paginator"]],inputs:{currentPage:[1,"currentPage"],pageSize:[1,"pageSize"],totalRecords:[1,"totalRecords"],pageSizeOptions:[1,"pageSizeOptions"],infiniteScroll:[1,"infiniteScroll"],infiniteScrollBehavior:[1,"infiniteScrollBehavior"],currentRecordCount:[1,"currentRecordCount"],autoSizingEnabled:[1,"autoSizingEnabled"],dataStrategy:[1,"dataStrategy"],connectionStatus:[1,"connectionStatus"],lastSyncTime:[1,"lastSyncTime"],isSyncing:[1,"isSyncing"]},outputs:{pageChange:"pageChange",pageSizeChange:"pageSizeChange",autoSizingToggle:"autoSizingToggle",chatbotToggle:"chatbotToggle"},decls:30,vars:18,consts:[["aria-label","Pagination",1,"flex","items-center","justify-between","border-t","border-gray-200","px-4","py-3","sm:px-6"],[1,"flex","items-center","gap-4"],[1,"flex","items-center","gap-2","text-xs",3,"title"],[1,"flex","items-center","gap-1.5","text-xs","text-gray-600",3,"title"],[1,"flex","items-center","gap-1.5","text-xs","text-gray-600"],[1,"block","h-6","w-px","bg-gray-300"],[1,"text-sm","text-gray-700"],[1,"font-medium"],[1,"flex","items-center","text-sm","text-gray-700"],["for","pageSize",1,"mr-2"],["id","pageSize","title","Select number of rows per page",1,"px-2","py-1","border","border-gray-300","rounded-md","bg-white","focus:outline-none","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500",3,"change"],[3,"value","selected"],[1,"px-4","py-2","rounded-md","border","transition-colors","text-sm",3,"click","title"],[1,"pi","pi-arrows-alt"],[1,"flex-1","flex","justify-between","items-center","sm:justify-end","gap-3"],[1,"flex-1"],["title","Open AI Assistant",1,"flex-shrink-0","flex","items-center","justify-center","h-8","w-8","rounded-full","bg-indigo-600","text-white","shadow-md","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","transition-transform","hover:scale-110",3,"click"],[1,"pi","pi-comments","text-lg"],[1,"h-2.5","w-2.5","rounded-full"],[1,"text-gray-600"],[1,"pi","pi-database"],[1,"pi","pi-history"],[1,"font-medium","animate-pulse"],[3,"title"],["title","Go to previous page",1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","items-center"],["title","Go to next page",1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-transparent","text-sm","font-medium","text-gray-700"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"title","bg-slate-900","text-white","border-slate-900"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","title"]],template:function(n,i){if(n&1&&(ne(0,"nav",0)(1,"div",1),fe(2,gK,4,4,"div",2),fe(3,vK,4,2,"div",3),fe(4,CK,4,1,"div",4),ot(5,"div",5),ne(6,"p",6),Y(7," Showing "),ne(8,"span",7),Y(9),oe(),Y(10," to "),ne(11,"span",7),Y(12),oe(),Y(13," of "),ne(14,"span",7),Y(15),oe(),Y(16," results "),oe(),ne(17,"div",8)(18,"label",9),Y(19,"Rows:"),oe(),ne(20,"select",10),Je("change",function(s){return i.onPageSizeChange(s)}),et(21,xK,2,3,"option",11,xn),oe()(),ne(23,"button",12),Je("click",function(){return i.autoSizingToggle.emit()}),ot(24,"i",13),oe()(),ne(25,"div",14),fe(26,SK,7,2)(27,DK,1,0,"div",15),ne(28,"button",16),Je("click",function(){return i.chatbotToggle.emit()}),ot(29,"i",17),oe()()()),n&2){let r,s;V(2),pe((r=i.connectionStatus())?2:-1,r),V(),pe((s=i.dataStrategy())?3:-1,s),V(),pe(i.dataStrategy()==="SYNC"?4:-1),V(5),Ue(i.recordRangeStart()),V(3),Ue(i.recordRangeEnd()),V(3),Ue(i.totalRecords()),V(6),tt(i.pageSizeOptions()),V(2),Qe("bg-slate-900",i.autoSizingEnabled())("text-white",i.autoSizingEnabled())("bg-white",!i.autoSizingEnabled())("border-gray-300",!i.autoSizingEnabled())("hover:bg-gray-100",!i.autoSizingEnabled()),Ot("title",i.autoSizingEnabled()?"Disable Auto Page Sizing":"Enable Auto Page Sizing"),V(3),pe(i.infiniteScroll()?27:26)}},dependencies:[Ft],encapsulation:2,changeDetection:0})};var TK=(t,e)=>e.code;function IK(t,e){if(t&1){let n=Pe();ne(0,"li",7),Je("dragstart",function(){let r=ee(n).$index,s=F();return te(s.onDragStart(r))})("dragover",function(r){ee(n);let s=F();return te(s.onDragOver(r))})("drop",function(r){let s=ee(n).$index,a=F();return te(a.onDrop(r,s))})("dragend",function(){ee(n);let r=F();return te(r.onDragEnd())}),ne(1,"input",8),Je("change",function(r){let s=ee(n).$implicit,a=F();return te(a.onVisibilityChange(s,r))}),oe(),ne(2,"span",9),Y(3),oe(),ot(4,"i",10),oe()}if(t&2){let n=e.$implicit,i=e.$index,r=F();Qe("opacity-50",r.draggedColumnIndex()===i),V(),Ot("checked",r.isColumnVisible(n.code)),V(2),Ue(n.name)}}var Ry=class t{allColumns=Ee.required();visibleColumns=Ee.required();visibilityChange=gt();orderChange=gt();draggedColumnIndex=xe(null);isColumnVisible(e){return this.visibleColumns().some(n=>n.code===e)}onVisibilityChange(e,n){n.preventDefault(),this.visibilityChange.emit(e)}onDragStart(e){this.draggedColumnIndex.set(e)}onDragOver(e){e.preventDefault()}onDrop(e,n){e.preventDefault();let i=this.draggedColumnIndex();if(i===null||i===n){this.draggedColumnIndex.set(null);return}let r=[...this.allColumns()],[s]=r.splice(i,1);r.splice(n,0,s),this.orderChange.emit(r),this.draggedColumnIndex.set(null)}onDragEnd(){this.draggedColumnIndex.set(null)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-column-chooser"]],inputs:{allColumns:[1,"allColumns"],visibleColumns:[1,"visibleColumns"]},outputs:{visibilityChange:"visibilityChange",orderChange:"orderChange"},decls:10,vars:0,consts:[[1,"origin-top-right","absolute","right-0","mt-2","w-64","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-10"],[1,"py-1"],[1,"px-4","py-2"],[1,"text-xs","text-gray-400","uppercase","tracking-wider"],[1,"text-xs","text-gray-400"],[1,"space-y-1"],["draggable","true",1,"flex","items-center","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","transition-colors","duration-150",3,"opacity-50"],["draggable","true",1,"flex","items-center","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","transition-colors","duration-150",3,"dragstart","dragover","drop","dragend"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","checked"],[1,"ml-3"],["title","Drag to reorder",1,"pi","pi-bars","ml-auto","cursor-move","text-gray-400"]],template:function(n,i){n&1&&(ne(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),Y(4,"Show/Hide Columns"),oe(),ne(5,"p",4),Y(6,"Drag to reorder"),oe()(),ne(7,"ul",5),et(8,IK,5,4,"li",6,TK),oe()()()),n&2&&(V(8),tt(i.allColumns()))},dependencies:[Ft],encapsulation:2,changeDetection:0})};var AK=(t,e)=>e.name,MK=(t,e)=>e.code;function kK(t,e){if(t&1){let n=Pe();z(0,"li",29),Ce("click",function(){let r=ee(n).$implicit,s=F(4).$implicit,a=F(2);return te(a.updateFilterOperator(s.code,r))}),Y(1),G()}if(t&2){let n=e.$implicit;V(),Ue(n)}}function NK(t,e){if(t&1){let n=Pe();z(0,"ul",27),Ce("clickOutside",function(){ee(n);let r=F(5);return te(r.closeAllDropdowns())}),et(1,kK,2,1,"li",28,xn),G()}if(t&2){let n=F(3).$implicit;V(),tt(n.operators)}}function FK(t,e){if(t&1){let n=Pe();z(0,"div",20)(1,"span",30),Y(2,"and"),G(),z(3,"input",26),Ce("input",function(r){ee(n);let s=F(3).$implicit,a=F(2);return te(a.updateFilterValue(s.code,"value2",r))}),G()()}if(t&2){F(3);let n=ar(0);V(3),Ye("value",n.value2||"")}}function RK(t,e){if(t&1){let n=Pe();z(0,"div",20)(1,"div",22)(2,"button",23),Ce("click",function(){ee(n);let r=F(2).$implicit,s=F(2);return te(s.toggleDropdown(r.code))}),z(3,"span"),Y(4),G(),ke(5,"i",24),G(),fe(6,NK,3,0,"ul",25),G(),z(7,"input",26),Ce("input",function(r){ee(n);let s=F(2).$implicit,a=F(2);return te(a.updateFilterValue(s.code,"value1",r))}),G()(),fe(8,FK,4,1,"div",20)}if(t&2){let n=F(2).$implicit,i=ar(0),r=F(2);V(4),Ue(i.operator),V(2),pe(r.isDropdownOpen(n.code)?6:-1),V(),Ye("value",i.value1),V(),pe(i.operator==="between"||i.operator==="not between"?8:-1)}}function PK(t,e){if(t&1){let n=Pe();z(0,"li",29),Ce("click",function(){let r=ee(n).$implicit,s=F(4).$implicit,a=F(2);return te(a.updateFilterOperator(s.code,r))}),Y(1),G()}if(t&2){let n=e.$implicit;V(),Ue(n)}}function LK(t,e){if(t&1){let n=Pe();z(0,"ul",27),Ce("clickOutside",function(){ee(n);let r=F(5);return te(r.closeAllDropdowns())}),et(1,PK,2,1,"li",28,xn),G()}if(t&2){let n=F(3).$implicit;V(),tt(n.dateOperators)}}function OK(t,e){if(t&1){let n=Pe();z(0,"div",20)(1,"div",31)(2,"button",23),Ce("click",function(){ee(n);let r=F(2).$implicit,s=F(2);return te(s.toggleDropdown(r.code))}),z(3,"span"),Y(4),G(),ke(5,"i",24),G(),fe(6,LK,3,0,"ul",25),G()()}if(t&2){let n=F(2).$implicit,i=ar(0),r=F(2);V(4),Ue(i.operator),V(2),pe(r.isDropdownOpen(n.code)?6:-1)}}function VK(t,e){if(t&1&&(z(0,"option",34),Y(1),G()),t&2){let n=e.$implicit;Ye("value",n),V(),Ue(n)}}function BK(t,e){if(t&1){let n=Pe();z(0,"select",32),Ce("change",function(r){ee(n);let s=F(2).$implicit,a=F(2);return te(a.updateFilterValue(s.code,"value1",r))}),z(1,"option",33),Y(2,"Select..."),G(),et(3,VK,2,2,"option",34,xn),G()}if(t&2){let n=F(2).$implicit,i=ar(0);Ye("value",i.value1),V(3),tt(n.options)}}function HK(t,e){if(t&1&&(z(0,"div",19),fe(1,RK,9,4),fe(2,OK,7,2,"div",20),fe(3,BK,5,1,"select",21),G()),t&2){let n=F().$implicit;V(),pe(n.type==="text"||n.type==="numeric"?1:-1),V(),pe(n.type==="date"?2:-1),V(),pe(n.type==="select"?3:-1)}}function UK(t,e){if(t&1){let n=Pe();Fs(0),z(1,"li")(2,"div",16)(3,"input",17),Ce("change",function(r){let s=ee(n).$implicit,a=F(2);return te(a.toggleFilter(s,r))}),G(),z(4,"label",18),Y(5),G()(),fe(6,HK,4,3,"div",19),G()}if(t&2){let n=e.$implicit,i=da(F(2).localActiveFilters()[n.code]);V(3),Ye("id",n.code)("checked",!!i),V(),Ye("for",n.code),V(),Ue(n.name),V(),pe(i?6:-1)}}function zK(t,e){if(t&1&&(z(0,"div",10)(1,"h3",14),Y(2),G(),z(3,"ul",15),et(4,UK,7,6,"li",null,MK),G()()),t&2){let n=e.$implicit;V(2),Ue(n.name),V(2),tt(n.filters)}}var Py=class t{isOpen=Ee.required();config=Ee.required();activeFilters=Ee.required();close=gt();apply=gt();localActiveFilters=xe({});openDropdowns=xe(new Set);constructor(){ln(()=>{this.isOpen()&&this.localActiveFilters.set(JSON.parse(JSON.stringify(this.activeFilters())))})}toggleFilter(e,n){let i=n.target.checked,r=xt({},this.localActiveFilters());i?r[e.code]||(r[e.code]={code:e.code,name:e.name,type:e.type,operator:e.defaultOperator||(e.operators?e.operators[0]:e.dateOperators?e.dateOperators[0]:"="),value1:e.value||"",value2:e.value2}):delete r[e.code],this.localActiveFilters.set(r)}updateFilterValue(e,n,i){let r=i.target.value;this.localActiveFilters.update(s=>(s[e]&&(s[e][n]=r),xt({},s)))}updateFilterOperator(e,n){this.localActiveFilters.update(i=>(i[e]&&(i[e].operator=n),xt({},i))),this.toggleDropdown(e)}applyFilters(){this.apply.emit(this.localActiveFilters())}clearFilters(){this.localActiveFilters.set({}),this.apply.emit({})}toggleDropdown(e){this.openDropdowns.update(n=>{let i=new Set(n);return i.has(e)?i.delete(e):i.add(e),i})}closeAllDropdowns(){this.openDropdowns.set(new Set)}isDropdownOpen(e){return this.openDropdowns().has(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-filter-sidebar"]],inputs:{isOpen:[1,"isOpen"],config:[1,"config"],activeFilters:[1,"activeFilters"]},outputs:{close:"close",apply:"apply"},decls:18,vars:4,consts:[[1,"fixed","top-0","right-0","h-full","w-96","bg-white","shadow-2xl","z-40","transform","transition-transform","duration-300","ease-in-out","flex","flex-col"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200","flex-shrink-0"],[1,"text-lg","font-semibold","text-gray-800"],["title","Close Filters",1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"pi","pi-times","text-xl"],[1,"flex-grow","p-4","overflow-y-auto","custom-scrollbar"],[1,"relative","mb-4"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"pi","pi-search","text-gray-400"],["type","search","placeholder","Search",1,"w-full","pl-10","pr-4","py-2","text-sm","border","border-gray-300","rounded-md","bg-white","focus:ring-indigo-500","focus:border-indigo-500"],[1,"mb-6"],[1,"flex","items-center","justify-end","p-4","border-t","border-gray-200","flex-shrink-0","space-x-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-slate-500",3,"click"],[1,"text-sm","font-semibold","uppercase","text-gray-500","mb-2"],[1,"space-y-2"],[1,"flex","items-center"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500","bg-white",3,"change","id","checked"],[1,"ml-3","text-sm","text-gray-700",3,"for"],[1,"mt-2","pl-7","space-y-2"],[1,"flex","items-center","gap-2"],[1,"w-full","px-2","py-1.5","text-xs","border","border-gray-300","rounded-md","bg-white","focus:ring-indigo-500","focus:border-indigo-500",3,"value"],[1,"relative","w-28"],[1,"flex","items-center","justify-between","w-full","px-2","py-1.5","text-xs","text-left","bg-white","border","border-gray-300","rounded-md",3,"click"],[1,"pi","pi-chevron-down","text-xs"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-300","rounded-md","shadow-lg","max-h-48","overflow-auto"],["type","text","placeholder","Type here",1,"flex-1","w-full","px-2","py-1.5","text-xs","border","border-gray-300","rounded-md","bg-white",3,"input","value"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-300","rounded-md","shadow-lg","max-h-48","overflow-auto",3,"clickOutside"],[1,"px-2","py-1.5","text-xs","hover:bg-indigo-50","cursor-pointer"],[1,"px-2","py-1.5","text-xs","hover:bg-indigo-50","cursor-pointer",3,"click"],[1,"text-xs","w-28","text-center"],[1,"relative","w-full"],[1,"w-full","px-2","py-1.5","text-xs","border","border-gray-300","rounded-md","bg-white","focus:ring-indigo-500","focus:border-indigo-500",3,"change","value"],["value",""],[3,"value"]],template:function(n,i){n&1&&(z(0,"aside",0)(1,"header",1)(2,"h2",2),Y(3,"Filter By"),G(),z(4,"button",3),Ce("click",function(){return i.close.emit()}),ke(5,"i",4),G()(),z(6,"div",5)(7,"div",6)(8,"div",7),ke(9,"i",8),G(),ke(10,"input",9),G(),et(11,zK,6,1,"div",10,AK),G(),z(13,"footer",11)(14,"button",12),Ce("click",function(){return i.clearFilters()}),Y(15," Clear "),G(),z(16,"button",13),Ce("click",function(){return i.applyFilters()}),Y(17," Apply "),G()()()),n&2&&(Qe("translate-x-0",i.isOpen())("translate-x-full",!i.isOpen()),V(11),tt(i.config().groups))},dependencies:[Ft,ko],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}"],changeDetection:0})};var nP=qa(sh()),oEe=qa(YR()),sEe=qa(XR()),aEe=qa(tP());var Ly=class t{el=he(Ei);editor;isInternalChange=!1;value=Ee("");valueChange=gt();constructor(){ln(()=>{let e=this.value();if(this.editor&&!this.isInternalChange&&this.editor.getValue()!==e){let n=this.editor.getCursor();this.editor.setValue(e),this.editor.setCursor(n)}})}ngAfterViewInit(){let e={value:this.value(),mode:{name:"javascript",json:!0},theme:"neo",lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,viewportMargin:1/0};this.editor=(0,nP.default)(this.el.nativeElement,e),this.editor?.on("change",n=>{let i=n.getValue();this.isInternalChange=!0,this.valueChange.emit(i),setTimeout(()=>this.isInternalChange=!1,0)})}ngOnDestroy(){if(this.editor){let e=this.editor.getWrapperElement();e.parentNode?.removeChild(e),this.editor=void 0}}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Rn({type:t,selectors:[["","appJsonEditor",""]],inputs:{value:[1,"value"]},outputs:{valueChange:"valueChange"}})};var fP=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,i){this._renderer=n,this._elementRef=i}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(i){return new(i||t)(hn(aa),hn(Ei))};static \u0275dir=Rn({type:t})}return t})(),ph=(()=>{class t extends fP{static \u0275fac=(()=>{let n;return function(r){return(n||(n=al(t)))(r||t)}})();static \u0275dir=Rn({type:t,features:[Vr]})}return t})(),xd=new Mt(""),GK={provide:xd,useExisting:_o(()=>zE),multi:!0},zE=(()=>{class t extends ph{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(r){return(n||(n=al(t)))(r||t)}})();static \u0275dir=Rn({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&Ce("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[fa([GK]),Vr]})}return t})(),$K={provide:xd,useExisting:_o(()=>Wy),multi:!0};function qK(){let t=Do()?Do().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var WK=new Mt(""),Wy=(()=>{class t extends fP{_compositionMode;_composing=!1;constructor(n,i,r){super(n,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!qK())}writeValue(n){let i=n??"";this.setProperty("value",i)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(i){return new(i||t)(hn(aa),hn(Ei),hn(WK,8))};static \u0275dir=Rn({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Ce("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[fa([$K]),Vr]})}return t})();var pP=new Mt(""),hP=new Mt("");function mP(t){return t!=null}function gP(t){return Uu(t)?Wn(t):t}function vP(t){let e={};return t.forEach(n=>{e=n!=null?xt(xt({},e),n):e}),Object.keys(e).length===0?null:e}function yP(t,e){return e.map(n=>n(t))}function jK(t){return!t.validate}function _P(t){return t.map(e=>jK(e)?e:n=>e.validate(n))}function KK(t){if(!t)return null;let e=t.filter(mP);return e.length==0?null:function(n){return vP(yP(n,e))}}function CP(t){return t!=null?KK(_P(t)):null}function YK(t){if(!t)return null;let e=t.filter(mP);return e.length==0?null:function(n){let i=yP(n,e).map(gP);return LC(i).pipe(ni(vP))}}function xP(t){return t!=null?YK(_P(t)):null}function iP(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function bP(t){return t._rawValidators}function wP(t){return t._rawAsyncValidators}function VE(t){return t?Array.isArray(t)?t:[t]:[]}function By(t,e){return Array.isArray(t)?t.includes(e):t===e}function rP(t,e){let n=VE(e);return VE(t).forEach(r=>{By(n,r)||n.push(r)}),n}function oP(t,e){return VE(e).filter(n=>!By(t,n))}var Hy=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},_d=class extends Hy{name;get formDirective(){return null}get path(){return null}},dh=class extends Hy{_parent=null;name=null;valueAccessor=null},Uy=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var EP=(()=>{class t extends Uy{constructor(n){super(n)}static \u0275fac=function(i){return new(i||t)(hn(dh,2))};static \u0275dir=Rn({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Qe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Vr]})}return t})(),SP=(()=>{class t extends Uy{constructor(n){super(n)}static \u0275fac=function(i){return new(i||t)(hn(_d,10))};static \u0275dir=Rn({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Qe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Vr]})}return t})();var ah="VALID",Oy="INVALID",vd="PENDING",lh="DISABLED",vl=class{},zy=class extends vl{value;source;constructor(e,n){super(),this.value=e,this.source=n}},ch=class extends vl{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},uh=class extends vl{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},yd=class extends vl{status;source;constructor(e,n){super(),this.status=e,this.source=n}},BE=class extends vl{source;constructor(e){super(),this.source=e}},fh=class extends vl{source;constructor(e){super(),this.source=e}};function GE(t){return(jy(t)?t.validators:t)||null}function JK(t){return Array.isArray(t)?CP(t):t||null}function $E(t,e){return(jy(e)?e.asyncValidators:t)||null}function QK(t){return Array.isArray(t)?xP(t):t||null}function jy(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function DP(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new St(1e3,"");if(!i[n])throw new St(1001,"")}function TP(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new St(1002,"")})}var Cd=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Eo(this.statusReactive)}set status(e){Eo(()=>this.statusReactive.set(e))}_status=ut(()=>this.statusReactive());statusReactive=xe(void 0);get valid(){return this.status===ah}get invalid(){return this.status===Oy}get pending(){return this.status==vd}get disabled(){return this.status===lh}get enabled(){return this.status!==lh}errors;get pristine(){return Eo(this.pristineReactive)}set pristine(e){Eo(()=>this.pristineReactive.set(e))}_pristine=ut(()=>this.pristineReactive());pristineReactive=xe(!0);get dirty(){return!this.pristine}get touched(){return Eo(this.touchedReactive)}set touched(e){Eo(()=>this.touchedReactive.set(e))}_touched=ut(()=>this.touchedReactive());touchedReactive=xe(!1);get untouched(){return!this.touched}_events=new ji;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(rP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oP(e,this._rawAsyncValidators))}hasValidator(e){return By(this._rawValidators,e)}hasAsyncValidator(e){return By(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ht(xt({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new uh(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),n&&e.emitEvent!==!1&&this._events.next(new uh(!1,i))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ht(xt({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new ch(!1,i))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),n&&e.emitEvent!==!1&&this._events.next(new ch(!0,i))}markAsPending(e={}){this.status=vd;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yd(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ht(xt({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=lh,this.errors=null,this._forEachChild(r=>{r.disable(Ht(xt({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zy(this.value,i)),this._events.next(new yd(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ht(xt({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ah,this._forEachChild(i=>{i.enable(Ht(xt({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ht(xt({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ah||this.status===vd)&&this._runAsyncValidator(i,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zy(this.value,n)),this._events.next(new yd(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ht(xt({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lh:ah}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=vd,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let i=gP(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new yd(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,i)}_initObservables(){this.valueChanges=new rr,this.statusChanges=new rr}_calculateStatus(){return this._allControlsDisabled()?lh:this.errors?Oy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vd)?vd:this._anyControlsHaveStatus(Oy)?Oy:ah}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),r&&this._events.next(new ch(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new uh(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jy(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=JK(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=QK(this._rawAsyncValidators)}},Gy=class extends Cd{constructor(e,n,i){super(GE(n),$E(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){TP(this,!0,e),Object.keys(e).forEach(i=>{DP(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,Ht(xt({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new fh(this))}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var HE=class extends Gy{};var IP=new Mt("",{factory:()=>qE}),qE="always";function XK(t,e){return[...e.path,t]}function sP(t,e,n=qE){WE(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),eY(t,e),nY(t,e),tY(t,e),ZK(t,e)}function aP(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),qy(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function $y(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function ZK(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function WE(t,e){let n=bP(t);e.validator!==null?t.setValidators(iP(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=wP(t);e.asyncValidator!==null?t.setAsyncValidators(iP(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();$y(e._rawValidators,r),$y(e._rawAsyncValidators,r)}function qy(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=bP(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(a=>a!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=wP(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(a=>a!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return $y(e._rawValidators,i),$y(e._rawAsyncValidators,i),n}function eY(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&AP(t,e)})}function tY(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&AP(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function AP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function nY(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function iY(t,e){t==null,WE(t,e)}function rY(t,e){return qy(t,e)}function oY(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function sY(t){return Object.getPrototypeOf(t.constructor)===ph}function aY(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function lY(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===Wy?n=s:sY(s)?i=s:r=s}),r||i||n||null}function cY(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function lP(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cP(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Vy=class extends Cd{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,i){super(GE(n),$E(i,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jy(n)&&(n.nonNullable||n.initialValueIsDefault)&&(cP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new fh(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){cP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var uY=t=>t instanceof Vy;var MP=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=Rn({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var dY={provide:xd,useExisting:_o(()=>jE),multi:!0},jE=(()=>{class t extends ph{writeValue(n){this.setProperty("value",parseFloat(n))}registerOnChange(n){this.onChange=i=>{n(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let n;return function(r){return(n||(n=al(t)))(r||t)}})();static \u0275dir=Rn({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(i,r){i&1&&Ce("change",function(a){return r.onChange(a.target.value)})("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[fa([dY]),Vr]})}return t})(),UE=class extends Cd{constructor(e,n,i){super(GE(n),$E(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){Array.isArray(e)?e.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){TP(this,!1,e),e.forEach((i,r)=>{DP(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],Ht(xt({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new fh(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var fY=(()=>{class t extends _d{callSetDisabledState;get submitted(){return Eo(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=ut(()=>this._submittedReactive());_submittedReactive=xe(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(n,i,r){super(),this.callSetDisabledState=r,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this.onChanges(n)}ngOnDestroy(){this.onDestroy()}onChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(qy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(n){let i=this.form.get(n.path);return sP(i,n,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){aP(n.control||null,n,!1),cY(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}getFormArray(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}updateModel(n,i){this.form.get(n.path).setValue(i)}onReset(){this.resetForm()}resetForm(n=void 0,i={}){this.form.reset(n,i),this._submittedReactive.set(!1)}onSubmit(n){return this.submitted=!0,aY(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new BE(this.control)),n?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(n=>{let i=n.control,r=this.form.get(n.path);i!==r&&(aP(i||null,n),uY(r)&&(sP(r,n,this.callSetDisabledState),n.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let i=this.form.get(n.path);iY(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let i=this.form.get(n.path);i&&rY(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){WE(this.form,this),this._oldForm&&qy(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||t)(hn(pP,10),hn(hP,10),hn(IP,8))};static \u0275dir=Rn({type:t,features:[Vr,lp]})}return t})();var kP=new Mt("");var pY={provide:dh,useExisting:_o(()=>KE)},KE=(()=>{class t extends dh{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new rr;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,i,r,s,a){super(),this._ngModelWarningConfig=a,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=lY(this,s)}ngOnChanges(n){this._added||this._setUpControl(),oY(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return XK(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||t)(hn(_d,13),hn(pP,10),hn(hP,10),hn(xd,10),hn(kP,8))};static \u0275dir=Rn({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[fa([pY]),Vr,lp]})}return t})();var hY={provide:_d,useExisting:_o(()=>YE)},YE=(()=>{class t extends fY{form=null;ngSubmit=new rr;get control(){return this.form}static \u0275fac=(()=>{let n;return function(r){return(n||(n=al(t)))(r||t)}})();static \u0275dir=Rn({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Ce("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[fa([hY]),Vr]})}return t})(),mY={provide:xd,useExisting:_o(()=>Ky),multi:!0};function NP(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function gY(t){return t.split(":")[0]}var Ky=(()=>{class t extends ph{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=he(Dc).injector;destroyRef=he(eo);cdr=he(K0);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Z1({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let i=this._getOptionId(n),r=NP(i,n);this.setProperty("value",r)}registerOnChange(n){this.onChange=i=>{this.value=this._getOptionValue(i),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),n))return i;return null}_getOptionValue(n){let i=gY(n);return this._optionMap.has(i)?this._optionMap.get(i):n}static \u0275fac=(()=>{let n;return function(r){return(n||(n=al(t)))(r||t)}})();static \u0275dir=Rn({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&Ce("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fa([mY]),Vr]})}return t})(),FP=(()=>{class t{_element;_renderer;_select;id;constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(NP(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||t)(hn(Ei),hn(aa),hn(Ky,9))};static \u0275dir=Rn({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),vY={provide:xd,useExisting:_o(()=>RP),multi:!0};function uP(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function yY(t){return t.split(":")[0]}var RP=(()=>{class t extends ph{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let i;if(Array.isArray(n)){let r=n.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(n){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let u=a[c],p=this._getOptionValue(u.value);r.push(p)}}else{let a=i.options;for(let c=0;c<a.length;c++){let u=a[c];if(u.selected){let p=this._getOptionValue(u.value);r.push(p)}}}this.value=r,n(r)}}_registerOption(n){let i=(this._idCounter++).toString();return this._optionMap.set(i,n),i}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,n))return i;return null}_getOptionValue(n){let i=yY(n);return this._optionMap.has(i)?this._optionMap.get(i)._value:n}static \u0275fac=(()=>{let n;return function(r){return(n||(n=al(t)))(r||t)}})();static \u0275dir=Rn({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&Ce("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fa([vY]),Vr]})}return t})(),PP=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(uP(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(uP(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||t)(hn(Ei),hn(aa),hn(RP,9))};static \u0275dir=Rn({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var _Y=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=la({type:t});static \u0275inj=Es({})}return t})();function dP(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var LP=(()=>{class t{useNonNullable=!1;get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,i=null){let r=this._reduceControls(n),s={};return dP(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Gy(r,s)}record(n,i=null){let r=this._reduceControls(n);return new HE(r,i)}control(n,i,r){let s={};return this.useNonNullable?(dP(i)?s=i:(s.validators=i,s.asyncValidators=r),new Vy(n,Ht(xt({},s),{nonNullable:!0}))):new Vy(n,i,r)}array(n,i,r){let s=n.map(a=>this._createControl(a));return new UE(s,i,r)}_reduceControls(n){let i={};return Object.keys(n).forEach(r=>{i[r]=this._createControl(n[r])}),i}_createControl(n){if(n instanceof Vy)return n;if(n instanceof Cd)return n;if(Array.isArray(n)){let i=n[0],r=n.length>1?n[1]:null,s=n.length>2?n[2]:null;return this.control(i,r,s)}else return this.control(n)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var OP=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:kP,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:IP,useValue:n.callSetDisabledState??qE}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=la({type:t});static \u0275inj=Es({imports:[_Y]})}return t})();function xY(t,e){if(t&1&&(z(0,"option",8),Y(1),G()),t&2){let n=e.$implicit;Ye("value",n),V(),Ue(n)}}function bY(t,e){if(t&1&&(z(0,"option",8),Y(1),Si(2,"titlecase"),G()),t&2){let n=e.$implicit;Ye("value",n),V(),Ue($u(2,2,n))}}function wY(t,e){if(t&1&&(z(0,"option",8),Y(1),Si(2,"titlecase"),G()),t&2){let n=e.$implicit;Ye("value",n),V(),Ue($u(2,2,n))}}function EY(t,e){if(t&1&&(z(0,"div",11)(1,"label",53),Y(2,"Infinite Scroll Behavior"),G(),z(3,"select",54),et(4,wY,3,4,"option",8,xn),G()()),t&2){let n=F(2);V(4),tt(n.infiniteScrollBehaviors)}}function SY(t,e){if(t&1&&(z(0,"option",15),Y(1),G()),t&2){let n=e.$implicit;Ye("value",n),V(),Ue(n)}}function DY(t,e){if(t&1&&(z(0,"option",8),Y(1),G()),t&2){let n=e.$implicit;Ye("value",n),V(),Ue(n==="iconAndText"?"Icon & Text":"Icon Only")}}function TY(t,e){if(t&1&&(z(0,"form",0)(1,"section",1)(2,"h3",2),Y(3,"General"),G(),z(4,"div")(5,"label",3),Y(6,"Table Title"),G(),ke(7,"input",4),G()(),z(8,"section",1)(9,"h3",2),Y(10,"Data & Paging "),G(),z(11,"div",5)(12,"div")(13,"label",6),Y(14,"Data Strategy"),G(),z(15,"select",7),et(16,xY,2,2,"option",8,xn),G()(),z(18,"div")(19,"label",9),Y(20,"Paging Mode"),G(),z(21,"select",10),et(22,bY,3,4,"option",8,xn),G()()(),fe(24,EY,6,0,"div",11),G(),z(25,"section",1)(26,"h3",2),Y(27,"Appearance"),G(),z(28,"div",12)(29,"div")(30,"label",13),Y(31,"Paginator"),G(),z(32,"select",14),et(33,SY,2,2,"option",15,xn),G()(),z(35,"div")(36,"label",16),Y(37,"Toolbar Buttons"),G(),z(38,"select",17),et(39,DY,2,2,"option",8,xn),G()()(),z(41,"div",18)(42,"div",19)(43,"span",20),Y(44,"Striped Rows"),G(),z(45,"label",21),ke(46,"input",22)(47,"div",23),G()(),z(48,"div",19)(49,"span",20),Y(50,"Grid Lines"),G(),z(51,"label",21),ke(52,"input",24)(53,"div",23),G()(),z(54,"div",19)(55,"span",20),Y(56,"Row Hover Effect"),G(),z(57,"label",21),ke(58,"input",25)(59,"div",23),G()()()(),z(60,"section",1)(61,"h3",2),Y(62,"Table Styling "),G(),z(63,"div",1)(64,"div",19)(65,"span",20),Y(66,"Enable Transparency"),G(),z(67,"label",21),ke(68,"input",26)(69,"div",23),G()(),z(70,"div")(71,"label",27),Y(72,"Header Background"),G(),z(73,"div",28),ke(74,"input",29)(75,"input",30),G()(),z(76,"div")(77,"label",31),Y(78,"Footer Background"),G(),z(79,"div",28),ke(80,"input",32)(81,"input",33),G()(),z(82,"div")(83,"label",34),Y(84,"Background Image URL"),G(),ke(85,"input",35),G()()(),z(86,"section",1)(87,"h3",2),Y(88,"Card View"),G(),z(89,"div",36)(90,"div",37)(91,"label",38),Y(92,"Cards Per Row (Desktop)"),G(),z(93,"span",39),Y(94),G()(),ke(95,"input",40),z(96,"div",41)(97,"span"),Y(98,"1"),G(),z(99,"span"),Y(100,"2"),G(),z(101,"span"),Y(102,"3"),G(),z(103,"span"),Y(104,"4"),G(),z(105,"span"),Y(106,"5"),G(),z(107,"span"),Y(108,"6"),G()()()(),z(109,"section",1)(110,"h3",2),Y(111,"Features"),G(),z(112,"div",42)(113,"div",1)(114,"div",19)(115,"span",20),Y(116,"Column Chooser"),G(),z(117,"label",21),ke(118,"input",43)(119,"div",23),G()(),z(120,"div",19)(121,"span",20),Y(122,"Export Button"),G(),z(123,"label",21),ke(124,"input",44)(125,"div",23),G()(),z(126,"div",19)(127,"span",20),Y(128,"Multi-Select"),G(),z(129,"label",21),ke(130,"input",45)(131,"div",23),G()(),z(132,"div",19)(133,"span",20),Y(134,"Toolbar Config"),G(),z(135,"label",21),ke(136,"input",46)(137,"div",23),G()(),z(138,"div",19)(139,"span",20),Y(140,"Table Footer"),G(),z(141,"label",21),ke(142,"input",47)(143,"div",23),G()()(),z(144,"div",1)(145,"div",19)(146,"span",20),Y(147,"Row Menu (3-dot)"),G(),z(148,"label",21),ke(149,"input",48)(150,"div",23),G()(),z(151,"div",19)(152,"span",20),Y(153,"Header Actions"),G(),z(154,"label",21),ke(155,"input",49)(156,"div",23),G()(),z(157,"div",19)(158,"span",20),Y(159,"Saved Queries"),G(),z(160,"label",21),ke(161,"input",50)(162,"div",23),G()(),z(163,"div",19)(164,"span",20),Y(165,"Summary Chips"),G(),z(166,"label",21),ke(167,"input",51)(168,"div",23),G()(),z(169,"div",19)(170,"span",20),Y(171,"Column Freezing"),G(),z(172,"label",21),ke(173,"input",52)(174,"div",23),G()()()()()()),t&2){let n,i,r=F();Ye("formGroup",r.form),V(16),tt(r.dataStrategies),V(6),tt(r.pagingModes),V(2),pe(((n=r.form.get("pagingMode"))==null?null:n.value)==="infinite"?24:-1),V(9),tt(r.paginatorPositions),V(6),tt(r.toolbarButtonModes),V(55),tn(" ",(i=r.form.get("cardsPerRow"))==null?null:i.value," ")}}var Yy=class t{config=Ee.required();configChange=gt();fb=he(LP);form;destroy$=new ji;dataStrategies=["SYNC","ONLINE_FIRST","OFFLINE_FIRST","HYBRID"];pagingModes=["paginator","infinite"];infiniteScrollBehaviors=["append","replace"];paginatorPositions=["top","bottom","both"];toolbarButtonModes=["iconAndText","iconOnly"];constructor(){this.form=this.fb.group({title:[""],dataStrategy:[""],pagingMode:[""],infiniteScrollBehavior:[""],paginatorPosition:[""],stripedRows:[!1],showGridlines:[!1],rowHover:[!1],enableColumnChooser:[!1],enableExport:[!1],enableMultiSelect:[!1],enableConfigButton:[!1],cardsPerRow:[4],enableFooter:[!1],enableRowMenu:[!1],enableHeaderActions:[!1],enableSavedQueries:[!1],enableChipFilters:[!1],enableFreeze:[!1],toolbarButtonMode:["iconAndText"],headerBackgroundColor:["#ffffff"],footerBackgroundColor:["#ffffff"],enableTransparency:[!1],backgroundImageUrl:[""]}),ln(()=>{let e=this.config();e&&this.form.patchValue({title:e.config.title,dataStrategy:e.config.dataStrategy,pagingMode:e.config.pagingMode,infiniteScrollBehavior:e.config.infiniteScrollBehavior,paginatorPosition:e.config.paginatorPosition??"bottom",stripedRows:e.config.stripedRows??!0,showGridlines:e.config.showGridlines??!1,rowHover:e.config.rowHover??!0,enableColumnChooser:e.config.enableColumnChooser,enableExport:e.config.exportConfig?.enabled??!1,enableMultiSelect:e.config.enableMultiSelect??!1,enableConfigButton:e.config.enableConfigButton,cardsPerRow:e.config.cardViewConfig?.cardsPerRow??4,enableFooter:e.config.footerConfig?.enabled??!1,enableRowMenu:e.config.enableRowMenu,enableHeaderActions:e.config.enableHeaderActions,enableSavedQueries:e.config.enableSavedQueries,enableChipFilters:e.config.enableChipFilters??!1,enableFreeze:e.config.enableFreeze??!1,toolbarButtonMode:e.config.toolbarButtonMode??"iconAndText",headerBackgroundColor:e.config.styleConfig?.headerBackgroundColor??"var(--marg-header-bg)",footerBackgroundColor:e.config.styleConfig?.footerBackgroundColor??"var(--marg-header-bg)",enableTransparency:e.config.styleConfig?.enableTransparency??!1,backgroundImageUrl:e.config.styleConfig?.backgroundImageUrl??""},{emitEvent:!1})}),this.form.valueChanges.pipe(kf(200),Nf(this.isEqual),Mm(this.destroy$)).subscribe(e=>{let n=this.config();if(n){let i=JSON.parse(JSON.stringify(n));i.config.title=e.title,i.config.dataStrategy=e.dataStrategy,i.config.pagingMode=e.pagingMode,i.config.infiniteScrollBehavior=e.infiniteScrollBehavior,i.config.paginatorPosition=e.paginatorPosition,i.config.stripedRows=e.stripedRows,i.config.showGridlines=e.showGridlines,i.config.rowHover=e.rowHover,i.config.enableColumnChooser=e.enableColumnChooser,i.config.exportConfig?i.config.exportConfig.enabled=e.enableExport:i.config.exportConfig={enabled:e.enableExport,options:[{label:"CSV",key:"csv",icon:"pi pi-file"},{label:"Excel",key:"excel",icon:"pi pi-file-excel"},{label:"PDF",key:"pdf",icon:"pi pi-file-pdf"}]},i.config.enableMultiSelect=e.enableMultiSelect,i.config.enableConfigButton=e.enableConfigButton,i.config.cardViewConfig||(i.config.cardViewConfig={cardsPerRow:4}),i.config.cardViewConfig.cardsPerRow=Number(e.cardsPerRow),i.config.footerConfig?i.config.footerConfig.enabled=e.enableFooter:i.config.footerConfig={enabled:e.enableFooter,columns:[{code:"contact_person_composite",aggregation:"count",display:"Total: {value}"},{code:"annual_revenue",aggregation:"sum",display:"Sum: {value}"}]},i.config.styleConfig?(i.config.styleConfig.enableTransparency=e.enableTransparency,i.config.styleConfig.headerBackgroundColor=e.headerBackgroundColor,i.config.styleConfig.footerBackgroundColor=e.footerBackgroundColor,i.config.styleConfig.backgroundImageUrl=e.backgroundImageUrl):i.config.styleConfig={enableTransparency:e.enableTransparency,headerBackgroundColor:e.headerBackgroundColor,footerBackgroundColor:e.footerBackgroundColor,backgroundImageUrl:e.backgroundImageUrl},i.config.enableRowMenu=e.enableRowMenu,i.config.enableHeaderActions=e.enableHeaderActions,i.config.enableSavedQueries=e.enableSavedQueries,i.config.enableChipFilters=e.enableChipFilters,i.config.enableFreeze=e.enableFreeze,i.config.toolbarButtonMode=e.toolbarButtonMode,this.configChange.emit(i)}})}isEqual(e,n){return JSON.stringify(e)===JSON.stringify(n)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-config-form"]],inputs:{config:[1,"config"]},outputs:{configChange:"configChange"},decls:1,vars:1,consts:[[1,"space-y-8","px-1",3,"formGroup"],[1,"space-y-4"],[1,"text-xs","font-bold","text-gray-500","uppercase","tracking-wider","border-b","border-gray-100","pb-2"],["for","title",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","title","formControlName","title",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","placeholder-gray-400"],[1,"grid","grid-cols-2","gap-4"],["for","dataStrategy",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","dataStrategy","formControlName","dataStrategy",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","bg-white"],[3,"value"],["for","pagingMode",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","pagingMode","formControlName","pagingMode",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","bg-white"],[1,"bg-gray-50","p-3","rounded-md","border","border-gray-100"],[1,"grid","grid-cols-2","gap-4","mb-2"],["for","paginatorPosition",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","paginatorPosition","formControlName","paginatorPosition",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"],[1,"capitalize",3,"value"],["for","toolbarButtonMode",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","toolbarButtonMode","formControlName","toolbarButtonMode",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"],[1,"space-y-3"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-700"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","stripedRows",1,"sr-only","peer"],[1,"w-9","h-5","bg-gray-200","peer-focus:outline-none","peer-focus:ring-2","peer-focus:ring-indigo-300","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-4","after:w-4","after:transition-all","peer-checked:bg-indigo-600"],["type","checkbox","formControlName","showGridlines",1,"sr-only","peer"],["type","checkbox","formControlName","rowHover",1,"sr-only","peer"],["type","checkbox","formControlName","enableTransparency",1,"sr-only","peer"],["for","headerBackgroundColor",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"flex","gap-2"],["type","color","id","headerBackgroundColor","formControlName","headerBackgroundColor",1,"h-8","w-8","rounded-md","border-gray-300","cursor-pointer"],["type","text","formControlName","headerBackgroundColor",1,"flex-1","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"],["for","footerBackgroundColor",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","color","id","footerBackgroundColor","formControlName","footerBackgroundColor",1,"h-8","w-8","rounded-md","border-gray-300","cursor-pointer"],["type","text","formControlName","footerBackgroundColor",1,"flex-1","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"],["for","backgroundImageUrl",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","backgroundImageUrl","formControlName","backgroundImageUrl","placeholder","https://example.com/image.jpg",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"],[1,"bg-gray-50","p-4","rounded-lg","border","border-gray-200"],[1,"flex","justify-between","items-center","mb-2"],["for","cardsPerRow",1,"block","text-sm","font-medium","text-gray-700"],[1,"inline-flex","items-center","justify-center","px-2","py-1","rounded-md","bg-white","border","border-gray-200","text-xs","font-bold","text-indigo-600","shadow-sm","min-w-[2rem]"],["type","range","id","cardsPerRow","formControlName","cardsPerRow","min","1","max","6",1,"w-full","h-2","bg-gray-200","rounded-lg","appearance-none","cursor-pointer","accent-indigo-600"],[1,"flex","justify-between","text-xs","text-gray-400","mt-1","font-medium","px-1"],[1,"grid","grid-cols-2","gap-x-8","gap-y-4"],["type","checkbox","formControlName","enableColumnChooser",1,"sr-only","peer"],["type","checkbox","formControlName","enableExport",1,"sr-only","peer"],["type","checkbox","formControlName","enableMultiSelect",1,"sr-only","peer"],["type","checkbox","formControlName","enableConfigButton",1,"sr-only","peer"],["type","checkbox","formControlName","enableFooter",1,"sr-only","peer"],["type","checkbox","formControlName","enableRowMenu",1,"sr-only","peer"],["type","checkbox","formControlName","enableHeaderActions",1,"sr-only","peer"],["type","checkbox","formControlName","enableSavedQueries",1,"sr-only","peer"],["type","checkbox","formControlName","enableChipFilters",1,"sr-only","peer"],["type","checkbox","formControlName","enableFreeze",1,"sr-only","peer"],["for","infiniteScrollBehavior",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","infiniteScrollBehavior","formControlName","infiniteScrollBehavior",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500"]],template:function(n,i){n&1&&fe(0,TY,175,3,"form",0),n&2&&pe(i.form?0:-1)},dependencies:[Ft,OP,MP,FP,PP,Wy,jE,zE,Ky,EP,SP,YE,KE,wp],encapsulation:2,changeDetection:0})};function IY(t,e){if(t&1){let n=Pe();z(0,"button",16),Ce("click",function(){ee(n);let r=F();return te(r.copyToClipboard())}),ke(1,"i",17),Y(2),G()}if(t&2){let n=F();V(),Qe("pi-copy",!n.copySuccess())("pi-check",n.copySuccess()),V(),tn(" ",n.copySuccess()?"Copied!":"Copy JSON"," ")}}function AY(t,e){if(t&1&&(z(0,"div",19)(1,"p",20),Y(2,"Error parsing JSON"),G(),z(3,"pre",21),Y(4),G()()),t&2){let n=F(2);V(4),Ue(n.parseError())}}function MY(t,e){if(t&1){let n=Pe();z(0,"div",11)(1,"div",18),Ce("valueChange",function(r){ee(n);let s=F();return te(s.onJsonConfigChange(r))}),G(),fe(2,AY,5,1,"div",19),G()}if(t&2){let n=F();V(),Ye("value",n.configString()),V(),pe(n.parseError()?2:-1)}}function kY(t,e){if(t&1){let n=Pe();z(0,"div",12)(1,"app-config-form",22),Ce("configChange",function(r){ee(n);let s=F();return te(s.onFormConfigChange(r))}),G()()}if(t&2){let n=F();V(),Ye("config",n.currentConfig())}}var Jy=class t{isOpen=Ee.required();config=Ee.required();close=gt();save=gt();resetToDefaults=gt();viewMode=xe("ui");currentConfig=xe(null);configString=ut(()=>{let e=this.currentConfig();return e?JSON.stringify(e,null,2):""});parseError=xe(null);copySuccess=xe(!1);initialConfig=null;constructor(){ln(()=>{if(this.isOpen()){let e=this.config();this.initialConfig=e,this.currentConfig.set(JSON.parse(JSON.stringify(e))),this.parseError.set(null),this.viewMode.set("ui")}})}onJsonConfigChange(e){try{let n=JSON.parse(e);this.currentConfig.set(n),this.parseError.set(null),this.save.emit(n)}catch(n){this.parseError.set(`Invalid JSON: ${n.message}`)}}onFormConfigChange(e){this.currentConfig.set(e),this.parseError.set(null),this.save.emit(e)}handleSave(){if(this.parseError())return;let e=this.currentConfig();e&&this.save.emit(e)}handleRevertChanges(){if(this.initialConfig){let e=JSON.parse(JSON.stringify(this.initialConfig));this.currentConfig.set(e),this.parseError.set(null),this.save.emit(e)}}handleRestoreDefaults(){confirm("Are you sure you want to restore factory defaults? This will overwrite your current configuration.")&&(this.resetToDefaults.emit(),this.close.emit())}copyToClipboard(){let e=this.configString();navigator.clipboard.writeText(e).then(()=>{this.copySuccess.set(!0),setTimeout(()=>this.copySuccess.set(!1),2e3)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-config-sidebar"]],inputs:{isOpen:[1,"isOpen"],config:[1,"config"]},outputs:{close:"close",save:"save",resetToDefaults:"resetToDefaults"},decls:25,vars:31,consts:[[1,"fixed","top-0","right-0","h-full","w-[50vw]","bg-white","shadow-2xl","z-40","transform","transition-transform","duration-300","ease-in-out","flex","flex-col"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200","flex-shrink-0"],[1,"text-lg","font-semibold","text-gray-800"],[1,"flex","items-center","gap-2"],[1,"text-xs","text-red-600","hover:text-red-800","underline","mr-2",3,"click"],["title","Close Configuration",1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"pi","pi-times","text-xl"],[1,"px-4","border-b","border-gray-200","flex-shrink-0","flex","justify-between","items-center"],[1,"-mb-px","flex","space-x-6"],[1,"whitespace-nowrap","py-3","px-1","border-b-2","font-medium","text-sm","transition-colors",3,"click"],[1,"text-xs","flex","items-center","gap-1","text-indigo-600","hover:text-indigo-800","transition-colors"],[1,"flex-grow","p-4","flex","flex-col","min-h-0","h-full"],[1,"flex-grow","p-4","overflow-y-auto","custom-scrollbar","min-h-0"],[1,"flex","items-center","justify-end","p-4","border-t","border-gray-200","flex-shrink-0","space-x-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-slate-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-xs","flex","items-center","gap-1","text-indigo-600","hover:text-indigo-800","transition-colors",3,"click"],[1,"pi"],["appJsonEditor","",1,"w-full","flex-grow","h-full","font-mono","text-sm","border","border-indigo-100","rounded-md","overflow-hidden","config-editor-wrapper","flex","flex-col","shadow-inner","bg-slate-50","relative",3,"valueChange","value"],[1,"mt-2","p-3","bg-red-100","border","border-red-400","text-red-700","rounded-md","text-sm","flex-shrink-0"],[1,"font-bold"],[1,"whitespace-pre-wrap","mt-1"],[3,"configChange","config"]],template:function(n,i){n&1&&(z(0,"aside",0)(1,"header",1)(2,"h2",2),Y(3,"Table Configuration"),G(),z(4,"div",3)(5,"button",4),Ce("click",function(){return i.handleRestoreDefaults()}),Y(6," Restore Factory Defaults "),G(),z(7,"button",5),Ce("click",function(){return i.close.emit()}),ke(8,"i",6),G()()(),z(9,"div",7)(10,"nav",8)(11,"button",9),Ce("click",function(){return i.viewMode.set("ui")}),Y(12," UI Editor "),G(),z(13,"button",9),Ce("click",function(){return i.viewMode.set("json")}),Y(14," JSON Editor "),G()(),fe(15,IY,3,5,"button",10),G(),fe(16,MY,3,2,"div",11)(17,kY,2,1,"div",12),z(18,"footer",13)(19,"button",14),Ce("click",function(){return i.handleRevertChanges()}),Y(20," Reset Changes "),G(),z(21,"button",14),Ce("click",function(){return i.close.emit()}),Y(22," Cancel "),G(),z(23,"button",15),Ce("click",function(){return i.handleSave()}),Y(24," Save and Apply "),G()()()),n&2&&(Qe("translate-x-0",i.isOpen())("translate-x-full",!i.isOpen()),V(11),Qe("border-indigo-500",i.viewMode()==="ui")("text-indigo-600",i.viewMode()==="ui")("border-transparent",i.viewMode()!=="ui")("text-gray-500",i.viewMode()!=="ui")("hover:text-gray-700",i.viewMode()!=="ui")("hover:border-gray-300",i.viewMode()!=="ui"),V(2),Qe("border-indigo-500",i.viewMode()==="json")("text-indigo-600",i.viewMode()==="json")("border-transparent",i.viewMode()!=="json")("text-gray-500",i.viewMode()!=="json")("hover:text-gray-700",i.viewMode()!=="json")("hover:border-gray-300",i.viewMode()!=="json"),V(2),pe(i.viewMode()==="json"?15:-1),V(),pe(i.viewMode()==="json"?16:17),V(7),Ye("disabled",!!i.parseError()))},dependencies:[Ft,Ly,Yy],styles:[".CodeMirror[_ngcontent-%COMP%]{height:100%!important;background-color:#f8fafc}.cm-s-neo.CodeMirror[_ngcontent-%COMP%]{background-color:#f8fafc}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;height:16px;width:16px;border-radius:50%;background:#4f46e5;cursor:pointer;margin-top:-6px;box-shadow:0 1px 2px #0003}input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:4px;cursor:pointer;background:#e2e8f0;border-radius:2px}"],changeDetection:0})};function NY(t){switch(t){case"=":return"EXACT";case"!=":return"NOT_EQUAL";case">":return"GREATER_THAN";case">=":return"GREATER_THAN_OR_EQUAL";case"<":return"LESS_THAN";case"<=":return"LESS_THAN_OR_EQUAL";case"between":return"BETWEEN";case"not between":return"NOT_BETWEEN";case"contains":return"CONTAINS";default:return"CONTAINS"}}function hh(t,e,n,i,r,s,a){let c=[];r&&c.push({parameter_name:"GLOBAL_SEARCH",parameter_code:"GS",parameter_value:r,conditional_operator:"AND",wildcard_operator:"CONTAINS"});for(let p in s){let m=s[p];m&&m.value1!==void 0&&m.value1!==""&&c.push({parameter_name:m.name,parameter_code:m.code,parameter_value:`${m.value1}${m.value2?","+m.value2:""}`,conditional_operator:"AND",wildcard_operator:NY(m.operator)})}let u=[];return n&&u.push({coloum_id:n,short_type:i}),{page_number:t,page_size:e,search_filters:c,sort_column:u}}var VP=(t,e)=>e.code;function FY(t,e){t&1&&(ne(0,"th",3),ot(1,"div",4),oe())}function RY(t,e){t&1&&ot(0,"div",6)}function PY(t,e){t&1&&ot(0,"div",7)}function LY(t,e){t&1&&(ne(0,"div",8),ot(1,"div",10)(2,"div",11),oe())}function OY(t,e){t&1&&ot(0,"div",9)}function VY(t,e){if(t&1&&(ne(0,"td",5),fe(1,RY,1,0,"div",6)(2,PY,1,0,"div",7)(3,LY,3,0,"div",8)(4,OY,1,0,"div",9),oe()),t&2){let n=e.$implicit;V(),pe(n.columnType==="IMAGE"?1:n.columnType==="CHECKBOX"?2:n.cellTemplate&&n.cellTemplate.length>0?3:4)}}function BY(t,e){if(t&1&&(ne(0,"tr"),et(1,VY,5,1,"td",5,VP),oe()),t&2){let n=F();V(),tt(n.columns())}}var Qy=class t{columns=Ee.required();rows=Ee(10);skeletonRows=ut(()=>Array(this.rows()).fill(0));static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-table-skeleton-loader"]],inputs:{columns:[1,"columns"],rows:[1,"rows"]},decls:9,vars:0,consts:[[1,"overflow-x-auto","border","border-gray-200","rounded-lg"],[1,"min-w-full","border-collapse"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","border-b","border-gray-200","text-left"],[1,"h-4","bg-gray-300","rounded","w-3/4","animate-pulse"],[1,"px-6","py-4","whitespace-nowrap","border-t","border-gray-200"],[1,"h-10","w-10","bg-gray-300","rounded-full","animate-pulse"],[1,"h-4","w-4","bg-gray-300","rounded","animate-pulse"],[1,"space-y-2"],[1,"h-4","bg-gray-300","rounded","w-full","animate-pulse"],[1,"h-4","bg-gray-300","rounded","w-5/6","animate-pulse"],[1,"h-3","bg-gray-300","rounded","w-3/4","animate-pulse"]],template:function(n,i){n&1&&(ne(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),et(4,FY,2,0,"th",3,VP),oe()(),ne(6,"tbody"),et(7,BY,3,0,"tr",null,ua),oe()()()),n&2&&(V(4),tt(i.columns()),V(3),tt(i.skeletonRows()))},dependencies:[Ft],encapsulation:2,changeDetection:0})};function HY(t,e){t&1&&(ne(0,"div",1)(1,"div",2)(2,"div",3),ot(3,"div",4),ne(4,"div",5),ot(5,"div",6)(6,"div",7),oe()(),ne(7,"div",8),ot(8,"div",9)(9,"div",10),oe()()())}var Xy=class t{count=Ee(8);skeletonItems=ut(()=>Array(this.count()).fill(0).map((e,n)=>n));static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-card-skeleton-loader"]],inputs:{count:[1,"count"]},decls:3,vars:0,consts:[[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6","animate-pulse"],[1,"border","border-gray-200","rounded-lg","overflow-hidden"],[1,"p-5"],[1,"flex","items-center","gap-4"],[1,"h-12","w-12","bg-gray-300","rounded-full"],[1,"flex-1","space-y-2"],[1,"h-4","bg-gray-300","rounded","w-3/4"],[1,"h-3","bg-gray-300","rounded","w-1/2"],[1,"space-y-4","mt-6"],[1,"h-3","bg-gray-300","rounded","w-full"],[1,"h-3","bg-gray-300","rounded","w-5/6"]],template:function(n,i){n&1&&(ne(0,"div",0),et(1,HY,10,0,"div",1,xn),oe()),n&2&&(V(),tt(i.skeletonItems()))},dependencies:[Ft],encapsulation:2,changeDetection:0})};function UY(t,e){t&1&&(ne(0,"li",2)(1,"div",3),ot(2,"div",4),ne(3,"div",5),ot(4,"div",6)(5,"div",7),oe(),ot(6,"div",8),oe()())}var Zy=class t{count=Ee(10);skeletonItems=ut(()=>Array(this.count()).fill(0).map((e,n)=>n));static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-list-skeleton-loader"]],inputs:{count:[1,"count"]},decls:4,vars:0,consts:[[1,"border","border-gray-200","rounded-lg"],[1,"divide-y","divide-gray-200"],[1,"p-4","animate-pulse"],[1,"flex","items-center"],[1,"h-10","w-10","bg-gray-300","rounded-full","mr-4","flex-shrink-0"],[1,"flex-1","min-w-0","space-y-2"],[1,"h-4","bg-gray-300","rounded","w-2/5"],[1,"h-3","bg-gray-300","rounded","w-3/5"],[1,"ml-4","h-4","bg-gray-300","rounded","w-1/6"]],template:function(n,i){n&1&&(ne(0,"div",0)(1,"ul",1),et(2,UY,7,0,"li",2,xn),oe()()),n&2&&(V(2),tt(i.skeletonItems()))},dependencies:[Ft],encapsulation:2,changeDetection:0})};function JE(t,e,n=0){if(!t||e<=0)return 10;let i=t.clientHeight-n,r=Math.floor(i/e);return Math.max(1,r)}function Hn(t,e){return new Date(t.getTime()+Math.random()*(e.getTime()-t.getTime())).toISOString()}function Un(t,e){return new Date(t.getTime()+Math.random()*(e.getTime()-t.getTime())).toISOString()}var bd=class t{configService=he(Oi);mockData=[{organization_id:1,organization_name:"Innovate Inc.",contact_person:"Alice Johnson",communication_detail:"5550101123",email_id:"alice.j@innovate.com",avatar_url:"https://picsum.photos/seed/1/40/40",annual_revenue:5e6,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:2,organization_name:"Solutions Corp.",contact_person:"Bob Smith",communication_detail:"5550102456",email_id:"bob.s@solutions.com",avatar_url:"https://picsum.photos/seed/2/40/40",annual_revenue:72e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:3,organization_name:"Quantum Systems",contact_person:"Charlie Brown",communication_detail:"5550103789",email_id:"charlie.b@quantum.com",avatar_url:"https://picsum.photos/seed/3/40/40",annual_revenue:12e6,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:4,organization_name:"Apex Enterprises",contact_person:"Diana Prince",communication_detail:"5550104101",email_id:"diana.p@apex.com",avatar_url:"https://picsum.photos/seed/4/40/40",annual_revenue:35e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:5,organization_name:"Stellar Tech",contact_person:"Ethan Hunt",communication_detail:"5550105112",email_id:"ethan.h@stellar.com",avatar_url:"https://picsum.photos/seed/5/40/40",annual_revenue:98e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:6,organization_name:"Fusion Dynamics",contact_person:"Fiona Glenanne",communication_detail:"5550106131",email_id:"fiona.g@fusion.com",avatar_url:"https://picsum.photos/seed/6/40/40",annual_revenue:21e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:7,organization_name:"Synergy Group",contact_person:"George Costanza",communication_detail:"5550107141",email_id:"george.c@synergy.com",avatar_url:"https://picsum.photos/seed/7/40/40",annual_revenue:83e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:8,organization_name:"Pioneer Labs",contact_person:"Hannah Abbott",communication_detail:"5550108151",email_id:"hannah.a@pioneer.com",avatar_url:"https://picsum.photos/seed/8/40/40",annual_revenue:45e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:9,organization_name:"Vertex Innovations",contact_person:"Ian Malcolm",communication_detail:"5550109161",email_id:"ian.m@vertex.com",avatar_url:"https://picsum.photos/seed/9/40/40",annual_revenue:61e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:10,organization_name:"Horizon Solutions",contact_person:"Jane Doe",communication_detail:"5550110171",email_id:"jane.d@horizon.com",avatar_url:"https://picsum.photos/seed/10/40/40",annual_revenue:15e6,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:11,organization_name:"Global Connect",contact_person:"Kara Danvers",communication_detail:"5550111181",email_id:"kara.d@global.com",avatar_url:"https://picsum.photos/seed/11/40/40",annual_revenue:112e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:12,organization_name:"Nexus Platforms",contact_person:"Leo Fitz",communication_detail:"5550112191",email_id:"leo.f@nexus.com",avatar_url:"https://picsum.photos/seed/12/40/40",annual_revenue:78e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:13,organization_name:"Momentum Works",contact_person:"Monica Geller",communication_detail:"5550113202",email_id:"monica.g@momentum.com",avatar_url:"https://picsum.photos/seed/13/40/40",annual_revenue:49e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:14,organization_name:"Omega Industries",contact_person:"Ned Stark",communication_detail:"5550114212",email_id:"ned.s@omega.com",avatar_url:"https://picsum.photos/seed/14/40/40",annual_revenue:25e6,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:15,organization_name:"Zenith Tech",contact_person:"Oscar Martinez",communication_detail:"5550115222",email_id:"oscar.m@zenith.com",avatar_url:"https://picsum.photos/seed/15/40/40",annual_revenue:33e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:16,organization_name:"Apex Solutions",contact_person:"Pam Beesly",communication_detail:"5550116232",email_id:"pam.b@apex.com",avatar_url:"https://picsum.photos/seed/16/40/40",annual_revenue:56e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:17,organization_name:"Quantum Dynamics",contact_person:"Quinn Fabray",communication_detail:"5550117242",email_id:"quinn.f@quantum.com",avatar_url:"https://picsum.photos/seed/17/40/40",annual_revenue:135e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:18,organization_name:"Stellar Innovations",contact_person:"Rachel Green",communication_detail:"5550118252",email_id:"rachel.g@stellar.com",avatar_url:"https://picsum.photos/seed/18/40/40",annual_revenue:88e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:19,organization_name:"Fusion Solutions",contact_person:"Sam Winchester",communication_detail:"5550119262",email_id:"sam.w@fusion.com",avatar_url:"https://picsum.photos/seed/19/40/40",annual_revenue:18e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:20,organization_name:"Synergy Systems",contact_person:"Ted Mosby",communication_detail:"5550120272",email_id:"ted.m@synergy.com",avatar_url:"https://picsum.photos/seed/20/40/40",annual_revenue:67e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Web"},{organization_id:21,organization_name:"Pioneer Enterprises",contact_person:"Uma Thurman",communication_detail:"5550121282",email_id:"uma.t@pioneer.com",avatar_url:"https://picsum.photos/seed/21/40/40",annual_revenue:41e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Organic"},{organization_id:22,organization_name:"Vertex Corp.",contact_person:"Victor Vance",communication_detail:"5550122292",email_id:"victor.v@vertex.com",avatar_url:"https://picsum.photos/seed/22/40/40",annual_revenue:73e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Referral"},{organization_id:23,organization_name:"Horizon Labs",contact_person:"Walter White",communication_detail:"5550123303",email_id:"walter.w@horizon.com",avatar_url:"https://picsum.photos/seed/23/40/40",annual_revenue:17e6,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:"Web"},...Array.from({length:5e3},(e,n)=>{let i=["Web","Organic","Referral"];return{organization_id:24+n,organization_name:`Test Corp ${n+1}`,contact_person:`Person ${n+1}`,communication_detail:`55502${(n+1).toString().padStart(5,"0")}`,email_id:`person.${n+1}@test.com`,avatar_url:`https://picsum.photos/seed/${24+n}/40/40`,annual_revenue:Math.floor(Math.random()*1e7)+1e5,created_time:Hn(new Date(2023,10,1),new Date),last_activity_date:Un(new Date(2024,0,1),new Date),lead_source:i[n%3]}})];getData(e){let n=[...this.mockData],i=this.configService.config().config.globalFilterFields;if(e.search_filters.length>0&&(n=n.filter(p=>e.search_filters.every(m=>{if(!m.parameter_code||!m.parameter_value)return!0;let C=m.parameter_value.toLowerCase();if(m.parameter_code==="GS"){let A=this.configService.config().columns.filter($=>$.columnType==="DATE").map($=>$.code),N=C.split(" to "),R=!1,k=null,B=null;if(N.length===2){let $=new Date(N[0].trim()),q=new Date(N[1].trim());!isNaN($.getTime())&&!isNaN(q.getTime())&&(R=!0,k=$,B=q,B.setHours(23,59,59,999))}return i&&i.length>0?i.some($=>{let q=p[$];if(!q)return!1;if(A.includes($)){let X=new Date(q);return isNaN(X.getTime())?!1:R?X>=k&&X<=B:String(q).toLowerCase().includes(C)}return String(q).toLowerCase().includes(C)}):String(p.organization_name||"").toLowerCase().includes(C)||String(p.contact_person||"").toLowerCase().includes(C)||String(p.communication_detail||"").toLowerCase().includes(C)||String(p.email_id||"").toLowerCase().includes(C)||String(p.created_time||"").toLowerCase().includes(C)}if(this.configService.config().columns.find(A=>A.code===m.parameter_code)?.columnType==="DATE"){let A=p[m.parameter_code];if(!A)return!1;let N=new Date(A);if(isNaN(N.getTime()))return!1;if(N.setUTCHours(0,0,0,0),m.wildcard_operator==="BETWEEN"){if(!m.parameter_value.includes(","))return!1;let[R,k]=m.parameter_value.split(","),B=new Date(R+"T00:00:00Z"),$=new Date(k+"T00:00:00Z");return isNaN(B.getTime())||isNaN($.getTime())?!1:($.setUTCHours(23,59,59,999),N>=B&&N<=$)}else if(m.wildcard_operator==="EXACT"){let R=new Date(m.parameter_value+"T00:00:00Z");return isNaN(R.getTime())?!1:N.getTime()===R.getTime()}return!1}let E=String(p[m.parameter_code]||"").toLowerCase();return C.includes(",")?C.split(",").includes(E):E.includes(C)}))),e.sort_column.length>0){let p=e.sort_column[0];n.sort((m,C)=>{let x=m[p.coloum_id],E=C[p.coloum_id];return x<E?p.short_type==="asc"?-1:1:x>E?p.short_type==="asc"?1:-1:0})}let r=n.length,s=Number(e.page_number),a=Number(e.page_size),c=(s-1)*a,u=n.slice(c,c+a);return Li({data:u,total_records:r}).pipe(BC(500))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var e_=class t extends gg{contacts;constructor(){let n=`${he(Oi).config().feature}_DB`;super(n),this.version(2).stores({contacts:"++organization_id, organization_name, contact_person, communication_detail, email_id, annual_revenue, created_time, lead_source"})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var mh=qa(tv());var t_=class t{configService=he(Oi);config=this.configService.config().config;isEnabled(){return this.config.encryptionConfig?.enabled??!1}getSecretKey(){return this.config.encryptionConfig?.secretKey||"default-secret"}getEncryptedFields(){return this.config.encryptionConfig?.encryptedFields||[]}encryptRecord(e){if(!this.isEnabled())return e;let n=xt({},e),i=this.getEncryptedFields(),r=this.getSecretKey();for(let s of i)n[s]&&(n[s]=mh.AES.encrypt(n[s],r).toString());return n}decryptRecord(e){if(!this.isEnabled())return e;let n=xt({},e),i=this.getEncryptedFields(),r=this.getSecretKey();for(let s of i)if(n[s])try{let a=mh.AES.decrypt(n[s],r);n[s]=a.toString(mh.enc.Utf8)}catch(a){console.error(`Failed to decrypt field '${s}' for record ID ${e.organization_id}. It might not be encrypted.`,a)}return n}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var wd=class t{db=he(e_);encryptionService=he(t_);configService=he(Oi);bulkUpsert(e){let n=e.map(i=>this.encryptionService.encryptRecord(i));return Wn(this.db.contacts.bulkPut(n)).pipe(ni(()=>{}))}getData(e){let{page_number:n,page_size:i,sort_column:r,search_filters:s}=e,a=this.configService.config().config.globalFilterFields,c;if(r.length>0&&r[0].coloum_id){let{coloum_id:A,short_type:N}=r[0];c=this.db.contacts.orderBy(A),N==="desc"&&(c=c.reverse())}else c=this.db.contacts.toCollection();s.length>0&&(c=c.filter(A=>{let N=this.encryptionService.decryptRecord(A);return s.every(R=>{if(!R.parameter_code||!R.parameter_value)return!0;let k=R.parameter_value.toLowerCase();if(R.parameter_code==="GS"){let q=this.configService.config().columns.filter(ge=>ge.columnType==="DATE").map(ge=>ge.code),X=k.split(" to "),ie=!1,me=null,ye=null;if(X.length===2){let ge=new Date(X[0].trim()),Te=new Date(X[1].trim());!isNaN(ge.getTime())&&!isNaN(Te.getTime())&&(ie=!0,me=ge,ye=Te,ye.setHours(23,59,59,999))}return a&&a.length>0?a.some(ge=>{let Te=N[ge];if(!Te)return!1;if(q.includes(ge)){let j=new Date(Te);return isNaN(j.getTime())?!1:ie?j>=me&&j<=ye:String(Te).toLowerCase().includes(k)}return String(Te).toLowerCase().includes(k)}):String(N.organization_name||"").toLowerCase().includes(k)||String(N.contact_person||"").toLowerCase().includes(k)||String(N.communication_detail||"").toLowerCase().includes(k)||String(N.email_id||"").toLowerCase().includes(k)||String(N.created_time||"").toLowerCase().includes(k)}if(this.configService.config().columns.find(q=>q.code===R.parameter_code)?.columnType==="DATE"){let q=N[R.parameter_code];if(!q)return!1;let X=new Date(q);if(isNaN(X.getTime()))return!1;if(X.setUTCHours(0,0,0,0),R.wildcard_operator==="BETWEEN"){if(!R.parameter_value.includes(","))return!1;let[ie,me]=R.parameter_value.split(","),ye=new Date(ie+"T00:00:00Z"),ge=new Date(me+"T00:00:00Z");return isNaN(ye.getTime())||isNaN(ge.getTime())?!1:(ge.setUTCHours(23,59,59,999),X>=ye&&X<=ge)}else if(R.wildcard_operator==="EXACT"){let ie=new Date(R.parameter_value+"T00:00:00Z");return isNaN(ie.getTime())?!1:X.getTime()===ie.getTime()}return!1}let $=String(N[R.parameter_code]||"").toLowerCase();return k.includes(",")?k.split(",").includes($):$.includes(k)})}));let u=c.count(),p=Number(n),m=Number(i),C=(p-1)*m,x=c.offset(C).limit(m).toArray(),E=Promise.all([u,x]).then(([A,N])=>({data:N.map(k=>this.encryptionService.decryptRecord(k)),total_records:A}));return Wn(E)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var yl=class t{status=xe("Connecting");setOnline(){this.status.set("Online")}setConnecting(){this.status.set("Connecting")}setOffline(){this.status.set("Offline")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var n_=class t{configService=he(Oi);onlineDataService=he(bd);offlineDataService=he(wd);connectionStatusService=he(yl);rowContactDataService=he(i_);rowContactSyncHandler=he(r_);syncManager=he(Uc);getData(e){let n=this.configService.config(),i=n.config.dataStrategy;if(n.key==="RowContact"||n.feature==="RowContact")return this.rowContactDataService.getData(e);switch(i){case"ONLINE_FIRST":return console.log("[DataManager] Using ONLINE_FIRST strategy."),this.connectionStatusService.setConnecting(),this.onlineDataService.getData(e).pipe(Ff(()=>this.connectionStatusService.setOnline()),Ka(r=>(console.warn("[DataManager] ONLINE_FIRST failed, falling back to offline.",r),this.connectionStatusService.setOffline(),this.offlineDataService.getData(e))));case"OFFLINE_FIRST":return console.log("[DataManager] Using OFFLINE_FIRST strategy."),this.offlineDataService.getData(e);case"HYBRID":return console.log("[DataManager] Using HYBRID strategy."),this.connectionStatusService.setConnecting(),this.onlineDataService.getData(e).pipe(Ff(r=>{console.log("[DataManager] HYBRID: Fetched online, updating local DB in background."),this.connectionStatusService.setOnline(),this.offlineDataService.bulkUpsert(r.data).subscribe({next:()=>console.log("[DataManager] HYBRID: Local DB updated successfully."),error:s=>console.error("[DataManager] HYBRID: Error updating local DB.",s)})}),Ka(r=>(console.warn("[DataManager] HYBRID: Online fetch failed, falling back to offline.",r),this.connectionStatusService.setOffline(),this.offlineDataService.getData(e))));case"SYNC":return console.log("[DataManager] Using SYNC strategy (reading from local DB)."),this.offlineDataService.getData(e);default:return console.warn(`[DataManager] Unknown data strategy: ${i}. Defaulting to ONLINE_FIRST.`),this.connectionStatusService.setConnecting(),this.onlineDataService.getData(e).pipe(Ff(()=>this.connectionStatusService.setOnline()),Ka(r=>(this.connectionStatusService.setOffline(),this.offlineDataService.getData(e))))}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var o_=class t{constructor(){}logChange(e,n){console.log(`[SyncLogService] Logging action: ${e}`,n)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var s_=class t{onlineDataService=he(bd);offlineDataService=he(wd);syncLogService=he(o_);connectionStatusService=he(yl);persistenceService=he(Mo);LAST_SYNC_KEY="smartTableLastSync";isPrimed=xe(!1);lastSyncTime=xe(this.persistenceService.loadState(this.LAST_SYNC_KEY));isSyncing=xe(!1);constructor(){this.lastSyncTime()&&(this.isPrimed.set(!0),console.log("[SyncService] Local data is primed from a previous session."))}startFullSync(){console.log("[SyncService] Starting full sync..."),this.primeDataFromServer()}primeDataFromServer(){if(this.isSyncing()){console.log("[SyncService] Sync already in progress.");return}console.log("[SyncService] Starting to prime data from server..."),this.isSyncing.set(!0),this.isPrimed.set(!1),this.connectionStatusService.setConnecting();let e={page_number:1,page_size:5e3,search_filters:[],sort_column:[]};this.onlineDataService.getData(e).pipe(nc(()=>{this.isSyncing.set(!1),console.log("[SyncService] Data priming finished.")})).subscribe({next:n=>{console.log(`[SyncService] Fetched ${n.data.length} records from server.`),this.offlineDataService.bulkUpsert(n.data).subscribe(()=>{console.log("[SyncService] Successfully saved records to local DB.");let i=Date.now();this.lastSyncTime.set(i),this.persistenceService.saveState(this.LAST_SYNC_KEY,i),this.isPrimed.set(!0)}),this.connectionStatusService.setOnline()},error:n=>{console.error("[SyncService] Error priming data from server:",n),this.connectionStatusService.setOffline()}})}pushLocalChanges(){console.log("[SyncService] Pushing local changes to server...")}pullRemoteChanges(){console.log("[SyncService] Pulling remote changes from server...")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var a_=class t{ai=he($r).ai;async generateFilterFromQuery(e,n){let i=n.map(c=>({name:c.name,code:c.code,type:c.columnType||"TEXT"})),r=`You are an AI assistant for a data table. Your task is to interpret the user's query and generate a JSON object with filtering instructions and a conversational response.
    1. If the query is a command to filter or search the data, generate the appropriate filter objects.
    2. If the query is a general question, set both 'globalSearch' and 'advancedFilters' to null and provide a helpful answer in 'aiResponse'.
    
    The JSON object must have these properties: 'globalSearch' (string | null), 'advancedFilters' (array of filter objects | null), and 'aiResponse' (string).
    - Use 'globalSearch' for general, non-specific text searches (e.g., names, companies).
    - Use 'advancedFilters' for specific, structured conditions.
    - 'globalSearch' and 'advancedFilters' should be mutually exclusive. Set one to a value and the other to null.
    
    FILTERING RULES:
    - Multiple Conditions: For queries with multiple conditions (e.g., "web leads with revenue over 1M"), provide an array of filter objects in 'advancedFilters'.
    - Date Queries: Interpret relative dates (e.g., 'last month', 'yesterday') and return them in YYYY-MM-DD format. Use the 'between' operator for date ranges.
    - Supported operators for numeric/text are: '=', '!=', '>', '<', '>=', '<=', 'contains', 'between'.

    Available columns for filtering: ${JSON.stringify(i)}
    
    User Query: "${e}"

    Example 1 (Global Search):
    Query: "find contacts at Innovate Inc."
    Response: { "globalSearch": "Innovate Inc.", "advancedFilters": null, "aiResponse": "Sure, I'm now showing contacts from Innovate Inc." }

    Example 2 (Structured Filter):
    Query: "show me who has more than 5M revenue"
    Response: { "globalSearch": null, "advancedFilters": [{ "code": "annual_revenue", "name": "Annual Revenue", "type": "numeric", "operator": ">", "value1": "5000000" }], "aiResponse": "Okay, I've filtered for contacts with annual revenue greater than 5,000,000." }
    
    Example 3 (Multiple Conditions):
    Query: "find web leads with revenue over 1 million"
    Response: { "globalSearch": null, "advancedFilters": [{ "code": "lead_source", "name": "Lead Source", "type": "select", "operator": "=", "value1": "Web" }, { "code": "annual_revenue", "name": "Annual Revenue", "type": "numeric", "operator": ">", "value1": "1000000" }], "aiResponse": "Filtering for web leads with revenue over 1M." }

    Example 4 (Date Range):
    Query: "show contacts created last month"
    Response: { "globalSearch": null, "advancedFilters": [{ "code": "created_time", "name": "Created", "type": "date", "operator": "between", "value1": "2024-07-01", "value2": "2024-07-31"}], "aiResponse": "Showing contacts created last month." }
    
    Example 5 (Question):
    Query: "how many contacts are there?"
    Response: { "globalSearch": null, "advancedFilters": null, "aiResponse": "I can't count the contacts, but I can help you filter them. For example, you can ask me to show contacts from a specific company." }
    `,a=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:bt.OBJECT,properties:{globalSearch:{type:bt.STRING,nullable:!0},advancedFilters:{type:bt.ARRAY,nullable:!0,items:{type:bt.OBJECT,properties:{code:{type:bt.STRING},name:{type:bt.STRING},type:{type:bt.STRING,enum:["numeric","text","date","select"]},operator:{type:bt.STRING},value1:{type:bt.STRING},value2:{type:bt.STRING,nullable:!0}},required:["code","name","type","operator","value1"]}},aiResponse:{type:bt.STRING}},required:["globalSearch","advancedFilters","aiResponse"]}}})).text.trim();return JSON.parse(a)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var zY=["chatInput"];function GY(t,e){if(t&1&&(ne(0,"div",17),Y(1),oe()),t&2){let n=F().$implicit;V(),tn(" ",n.text," ")}}function $Y(t,e){if(t&1&&(ne(0,"div",18)(1,"div",19)(2,"p",20),Y(3),oe()()()),t&2){let n=F().$implicit;V(3),Ue(n.text)}}function qY(t,e){if(t&1&&(ne(0,"div",11)(1,"div",21),ot(2,"p",22),oe()()),t&2){let n=F().$implicit;V(2),Ot("innerHTML",n.text.replace(/\n/g,"<br>"),_r)}}function WY(t,e){if(t&1&&fe(0,GY,2,1,"div",17)(1,$Y,4,1,"div",18)(2,qY,3,1,"div",11),t&2){let n,i=e.$implicit;pe((n=i.sender)==="system"?0:n==="user"?1:n==="ai"?2:-1)}}function jY(t,e){t&1&&(ne(0,"div",11)(1,"div",23)(2,"div",24),ot(3,"span",25)(4,"span",26)(5,"span",27),oe()()())}var l_=class t{data=Ee.required();columns=Ee.required();close=gt();filterApplied=gt();aiChatbotService=he(a_);messages=xe([{sender:"system",text:"Ask me anything or tell me how to filter the data."}]);isLoading=xe(!1);chatInput=j0("chatInput");async sendMessage(){let e=this.chatInput()?.nativeElement;if(!e||!e.value.trim()||this.isLoading())return;let n=e.value.trim();e.value="",this.messages.update(i=>[...i,{sender:"user",text:n}]),this.isLoading.set(!0);try{let i=await this.aiChatbotService.generateFilterFromQuery(n,this.columns());this.messages.update(r=>[...r,{sender:"ai",text:i.aiResponse}]),(i.globalSearch||i.advancedFilters&&i.advancedFilters.length>0)&&(this.filterApplied.emit({globalSearch:i.globalSearch,advancedFilters:i.advancedFilters}),setTimeout(()=>this.close.emit(),1e3))}catch(i){console.error("Error querying AI:",i);let r="Sorry, I encountered an error. Please try again.";this.messages.update(s=>[...s,{sender:"system",text:r}])}finally{this.isLoading.set(!1)}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-ai-chatbot"]],viewQuery:function(n,i){n&1&&zu(i.chatInput,zY,5),n&2&&mp()},inputs:{data:[1,"data"],columns:[1,"columns"]},outputs:{close:"close",filterApplied:"filterApplied"},decls:20,vars:3,consts:[["chatInput",""],[1,"fixed","bottom-20","right-8","w-96","h-[60vh]","max-h-[700px]","bg-white","rounded-lg","shadow-2xl","z-50","flex","flex-col","border","border-gray-200"],[1,"flex","items-center","justify-between","p-3","border-b","border-gray-200","flex-shrink-0"],[1,"flex","items-center","gap-3"],[1,"p-1.5","bg-indigo-100","rounded-full"],[1,"pi","pi-sparkles","text-indigo-600"],[1,"text-md","font-semibold","text-gray-800"],["title","Close Chat",1,"p-2","rounded-full","text-gray-500","hover:text-gray-700","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"flex-grow","p-4","overflow-y-auto"],[1,"space-y-4"],[1,"flex","justify-start"],[1,"p-3","border-t","border-gray-200","flex-shrink-0"],[1,"flex","items-center","gap-2"],["type","text","placeholder","Type your question...",1,"flex-1","w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","bg-white","focus:ring-indigo-500","focus:border-indigo-500","disabled:opacity-50",3,"keydown.enter","disabled"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-indigo-600","border","border-transparent","rounded-md","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"pi","pi-send"],[1,"text-center","text-xs","text-gray-500","italic"],[1,"flex","justify-end"],[1,"bg-indigo-600","text-white","rounded-lg","rounded-br-none","py-2","px-3","max-w-xs"],[1,"text-sm"],[1,"bg-gray-200","text-gray-800","rounded-lg","rounded-bl-none","py-2","px-3","max-w-xs"],[1,"text-sm",3,"innerHTML"],[1,"bg-gray-200","rounded-lg","rounded-bl-none","py-2","px-3"],[1,"flex","items-center","space-x-1"],[1,"h-2","w-2","bg-indigo-400","rounded-full","animate-pulse","[animation-delay:-0.3s]"],[1,"h-2","w-2","bg-indigo-400","rounded-full","animate-pulse","[animation-delay:-0.15s]"],[1,"h-2","w-2","bg-indigo-400","rounded-full","animate-pulse"]],template:function(n,i){if(n&1){let r=Pe();ne(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4),ot(4,"i",5),oe(),ne(5,"h2",6),Y(6,"AI Assistant"),oe()(),ne(7,"button",7),Je("click",function(){return ee(r),te(i.close.emit())}),ot(8,"i",8),oe()(),ne(9,"div",9)(10,"div",10),et(11,WY,3,1,null,null,ua),fe(13,jY,6,0,"div",11),oe()(),ne(14,"footer",12)(15,"div",13)(16,"input",14,0),Je("keydown.enter",function(){return ee(r),te(i.sendMessage())}),oe(),ne(18,"button",15),Je("click",function(){return ee(r),te(i.sendMessage())}),ot(19,"i",16),oe()()()()}n&2&&(V(11),tt(i.messages()),V(2),pe(i.isLoading()?13:-1),V(3),Ot("disabled",i.isLoading()),V(2),Ot("disabled",i.isLoading()))},dependencies:[Ft],encapsulation:2,changeDetection:0})};var c_=class t{STORAGE_KEY="smartTableSavedQueries";getQueriesFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading saved queries from localStorage",e),[]}}saveQueriesToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(n){console.error("Error saving queries to localStorage",n)}}getSavedQueries(){return Li(this.getQueriesFromStorage())}saveQuery(e,n){let i=this.getQueriesFromStorage(),r={id:new Date().toISOString(),name:e,state:n};return i.push(r),this.saveQueriesToStorage(i),Li(r)}deleteQuery(e){let n=this.getQueriesFromStorage();return n=n.filter(i=>i.id!==e),this.saveQueriesToStorage(n),Li(void 0)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};function KY(t,e){if(t&1){let n=Pe();ne(0,"div",2),Je("click",function(){ee(n);let r=F();return te(r.close.emit())}),ne(1,"div",3),Je("click",function(r){return ee(n),te(r.stopPropagation())}),ne(2,"header",4)(3,"h3",5),Y(4,"Save Current View"),oe(),ne(5,"button",6),Je("click",function(){ee(n);let r=F();return te(r.close.emit())}),ot(6,"i",7),oe()(),ne(7,"div",8)(8,"label",9),Y(9,"View Name"),oe(),ne(10,"input",10,0),Je("input",function(){ee(n);let r=Yi(11),s=F();return te(s.queryName.set(r.value))})("keydown.enter",function(){ee(n);let r=F();return te(r.handleSave())}),oe()(),ne(12,"footer",11)(13,"button",12),Je("click",function(){ee(n);let r=F();return te(r.close.emit())}),Y(14,"Cancel"),oe(),ne(15,"button",13),Je("click",function(){ee(n);let r=F();return te(r.handleSave())}),Y(16,"Save"),oe()()()()}if(t&2){let n=F();V(10),Ot("value",n.queryName()),V(5),Ot("disabled",!n.queryName().trim())}}var u_=class t{isOpen=Ee.required();close=gt();save=gt();queryName=xe("");handleSave(){let e=this.queryName().trim();e&&(this.save.emit(e),this.close.emit())}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-save-query-modal"]],inputs:{isOpen:[1,"isOpen"]},outputs:{close:"close",save:"save"},decls:1,vars:1,consts:[["queryNameInput",""],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-md","m-4",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6"],["for","queryName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","queryName","placeholder","e.g., 'High-Revenue Web Leads'",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"input","keydown.enter","value"],[1,"p-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"]],template:function(n,i){n&1&&fe(0,KY,17,2,"div",1),n&2&&pe(i.isOpen()?0:-1)},dependencies:[Ft],encapsulation:2,changeDetection:0})};var d_=class t{STORAGE_KEY="smartTableCustomLayouts";getLayoutsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading custom layouts from localStorage",e),[]}}saveLayoutsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(n){console.error("Error saving layouts to localStorage",n)}}getLayouts(){return Li(this.getLayoutsFromStorage())}saveLayout(e){let n=this.getLayoutsFromStorage(),i=xt({id:new Date().toISOString()},e);return n.push(i),this.saveLayoutsToStorage(n),Li(i)}deleteLayout(e){let n=this.getLayoutsFromStorage();return n=n.filter(i=>i.id!==e),this.saveLayoutsToStorage(n),Li(void 0)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};function YY(t,e){if(t&1&&(ne(0,"span",35),Y(1),oe(),Y(2," selected ")),t&2){let n=F(2);V(),Ue(n.fileName())}}function JY(t,e){t&1&&(ne(0,"span"),Y(1,"Upload a file"),oe(),Y(2," or drag and drop "))}function QY(t,e){if(t&1){let n=Pe();ne(0,"div")(1,"label",27)(2,"div",28)(3,"div",29),ot(4,"i",30),ne(5,"div",31)(6,"p",32),fe(7,YY,3,1)(8,JY,3,0),oe()(),ne(9,"p",33),Y(10,"PNG, JPG, GIF up to 10MB"),oe()()()(),ne(11,"input",34),Je("change",function(r){ee(n);let s=F();return te(s.handleFileChange(r))}),oe()()}if(t&2){let n=F();V(7),pe(n.fileName()?7:8)}}function XY(t,e){if(t&1){let n=Pe();ne(0,"div")(1,"textarea",36,2),Je("input",function(){ee(n);let r=Yi(2),s=F();return te(s.htmlPrompt.set(r.value))}),oe(),ne(3,"p",37),Y(4,"Provide a simple HTML structure. The AI will add styling and map the data fields."),oe()()}if(t&2){let n=F();V(),Ot("placeholder","e.g., <div><h2>{{ organization_name }}</h2></div>")("value",n.htmlPrompt())}}var f_=class t{close=gt();generate=gt();activeTab=xe("image");layoutName=xe("");targetView=xe("card");htmlPrompt=xe("");imageBase64=xe(null);fileName=xe("");formIsValid=ut(()=>{let e=this.layoutName().trim().length>0,n=this.activeTab()==="image"&&!!this.imageBase64()||this.activeTab()==="html"&&this.htmlPrompt().trim().length>0;return e&&n});handleFileChange(e){let i=e.target.files?.[0];if(i){this.fileName.set(i.name);let r=new FileReader;r.onload=s=>{this.imageBase64.set(s.target?.result)},r.readAsDataURL(i)}}handleGenerate(){if(!this.formIsValid())return;let e={name:this.layoutName().trim(),targetView:this.targetView(),prompt:{}};if(this.activeTab()==="image"&&this.imageBase64()){let n=this.imageBase64().split(","),i=n[0].match(/:(.*?);/)?.[1]||"image/jpeg",r=n[1];e.prompt.image={data:r,mimeType:i}}else e.prompt.html=this.htmlPrompt();this.generate.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-create-layout-modal"]],outputs:{close:"close",generate:"generate"},decls:46,vars:12,consts:[["nameInput",""],["targetSelect",""],["htmlInput",""],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","m-4","flex","flex-col","max-h-[90vh]",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","flex","items-center","gap-2"],[1,"pi","pi-sparkles","text-indigo-500"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","space-y-6","overflow-y-auto"],[1,"font-medium","text-gray-800","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","layoutName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","layoutName","placeholder","e.g., 'Modern Contact Card'",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"input","value"],["for","targetView",1,"block","text-sm","font-medium","text-gray-700"],["id","targetView",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"change","value"],["value","card"],["value","list-item"],["value","table-row"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-4"],[1,"border-transparent","text-gray-500","hover:text-gray-700","hover:border-gray-300","whitespace-nowrap","py-3","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"pt-4"],[1,"p-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-indigo-600","border","border-transparent","rounded-md","hover:bg-indigo-700","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["for","file-upload",1,"relative","cursor-pointer","bg-white","rounded-md","font-medium","text-indigo-600","hover:text-indigo-500"],[1,"mt-1","flex","justify-center","px-6","pt-5","pb-6","border-2","border-gray-300","border-dashed","rounded-md"],[1,"space-y-1","text-center"],[1,"pi","pi-image","mx-auto","h-12","w-12","text-gray-400"],[1,"flex","text-sm","text-gray-600"],[1,"pl-1"],[1,"text-xs","text-gray-500"],["id","file-upload","name","file-upload","type","file","accept","image/*",1,"sr-only",3,"change"],[1,"font-semibold"],["rows","8",1,"block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","font-mono",3,"input","placeholder","value"],[1,"mt-2","text-xs","text-gray-500"]],template:function(n,i){if(n&1){let r=Pe();ne(0,"div",3),Je("click",function(){return ee(r),te(i.close.emit())}),ne(1,"div",4),Je("click",function(a){return ee(r),te(a.stopPropagation())}),ne(2,"header",5)(3,"h3",6),ot(4,"i",7),Y(5,"Create Layout with AI"),oe(),ne(6,"button",8),Je("click",function(){return ee(r),te(i.close.emit())}),ot(7,"i",9),oe()(),ne(8,"div",10)(9,"div")(10,"h4",11),Y(11,"1. Name and Target"),oe(),ne(12,"div",12)(13,"div")(14,"label",13),Y(15,"Layout Name"),oe(),ne(16,"input",14,0),Je("input",function(){ee(r);let a=Yi(17);return te(i.layoutName.set(a.value))}),oe()(),ne(18,"div")(19,"label",15),Y(20,"Target View"),oe(),ne(21,"select",16,1),Je("change",function(){ee(r);let a=Yi(22);return te(i.targetView.set(a.value))}),ne(23,"option",17),Y(24,"Card"),oe(),ne(25,"option",18),Y(26,"List Item"),oe(),ne(27,"option",19),Y(28,"Table Row"),oe()()()()(),ne(29,"div")(30,"h4",11),Y(31,"2. Provide Design Input"),oe(),ne(32,"div",20)(33,"nav",21)(34,"button",22),Je("click",function(){return ee(r),te(i.activeTab.set("image"))}),Y(35," Upload Image "),oe(),ne(36,"button",22),Je("click",function(){return ee(r),te(i.activeTab.set("html"))}),Y(37," Use HTML "),oe()()(),ne(38,"div",23),fe(39,QY,12,1,"div")(40,XY,5,2,"div"),oe()()(),ne(41,"footer",24)(42,"button",25),Je("click",function(){return ee(r),te(i.close.emit())}),Y(43,"Cancel"),oe(),ne(44,"button",26),Je("click",function(){return ee(r),te(i.handleGenerate())}),Y(45," Generate "),oe()()()()}n&2&&(V(16),Ot("value",i.layoutName()),V(5),Ot("value",i.targetView()),V(13),Qe("border-indigo-500",i.activeTab()==="image")("text-indigo-600",i.activeTab()==="image"),V(2),Qe("border-indigo-500",i.activeTab()==="html")("text-indigo-600",i.activeTab()==="html"),V(3),pe(i.activeTab()==="image"?39:40),V(5),Ot("disabled",!i.formIsValid()))},dependencies:[Ft],encapsulation:2,changeDetection:0})};var ZY={type:bt.OBJECT,properties:{index:{type:bt.NUMBER},name:{type:bt.STRING},code:{type:bt.STRING},display:{type:bt.STRING},columnType:{type:bt.STRING,nullable:!0},width:{type:bt.STRING,nullable:!0},align:{type:bt.STRING,nullable:!0},sortable:{type:bt.BOOLEAN,nullable:!0},filterable:{type:bt.BOOLEAN,nullable:!0},cardHeader:{type:bt.BOOLEAN,nullable:!0},cardHeader1:{type:bt.BOOLEAN,nullable:!0},cardRow:{type:bt.BOOLEAN,nullable:!0},listRow:{type:bt.BOOLEAN,nullable:!0},showOnColumnChooser:{type:bt.BOOLEAN,nullable:!0}},required:["index","name","code","display"]},Ed=class t{ai=he($r).ai;async getAutoAdoptedConfig(e,n){let i=`You are a UI/UX expert tasked with making a data table responsive. Given a screen width of ${n}px, adapt the following table configuration JSON to provide the best user experience. 
    For smaller screens (under 768px), you should: 
    1. Reduce 'cardsPerRow' to 1 or 2. 
    2. Hide less important columns in the table view by setting their 'display' property to 'none'. Keep essential columns like contact name and primary contact info visible.
    For medium screens (768px to 1280px), you can show more columns and set 'cardsPerRow' to 3 or 4.
    For large screens (above 1280px), most columns can be visible and 'cardsPerRow' can be 4 or more.
    Return the complete, modified JSON object that adheres to the provided schema. Original Config: 

${JSON.stringify(e,null,2)}`,s=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:bt.OBJECT,properties:{config:{type:bt.OBJECT,properties:{cardViewConfig:{type:bt.OBJECT,properties:{cardsPerRow:{type:bt.INTEGER}},required:["cardsPerRow"],nullable:!0}}},columns:{type:bt.ARRAY,items:ZY}},required:["config","columns"]}}})).text.trim(),a=JSON.parse(s),c=JSON.parse(JSON.stringify(e));return c.config.cardViewConfig=a.config.cardViewConfig,c.columns=a.columns,c}async generateLayout(e,n,i){let r=i.map(p=>`\`${p.code}\` (${p.name})`).join(", "),s=`You are an expert front-end developer specializing in Tailwind CSS. Your task is to create a single, self-contained HTML template for a ${n}.
The component must display data from the following available fields: ${r}.
Use placeholders in the format \`{{ field_code }}\` to show where the data should go. For example, to display the organization's name, use \`{{ organization_name }}\`.

**Styling Rules:**
1.  **Use ONLY Tailwind CSS classes for styling.** Do not use inline styles or \`<style>\` tags.
2.  The design must be **fully responsive**.
3.  The design must support **dark mode** using \`dark:\` variants (e.g., \`bg-white dark:bg-gray-800\`).
4.  Ensure good contrast and accessibility.
5.  The final HTML should be a single block, like one \`<div>\` or one \`<li>\` that contains everything. For a 'table-row' target, you can use a \`<td>\` with a div inside it, and you must apply a colspan like \`<td colspan="100%">\`.

**Input:**
You will be given either a basic HTML structure or an image of a design. You must interpret this input and create a production-ready component from it.
`,a={parts:[]};if(e.image)s+=`
**Design Input (Image):** Create an HTML component based on the provided image.`,a.parts.push({text:s}),a.parts.push({inlineData:{mimeType:e.image.mimeType,data:e.image.data}});else if(e.html)s+=`
**Design Input (HTML):** Create an HTML component based on the following structure: 
\`\`\`html
${e.html}
\`\`\``,a.parts.push({text:s});else throw new Error("No prompt provided for layout generation.");let u=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:a,config:{responseMimeType:"application/json",responseSchema:{type:bt.OBJECT,properties:{htmlTemplate:{type:bt.STRING}},required:["htmlTemplate"]}}})).text.trim();return JSON.parse(u)}async suggestLayoutImprovements(e,n,i){let r=`You are a UI/UX expert specializing in responsive design with Tailwind CSS and dark mode.
    Analyze the following HTML template and suggest improvements.

    **Context:**
    - Screen Width: ${n}px
    - Data Density: ${i} (e.g., 'compact' means less space per item, 'comfortable' means more space)
    - The template is used to display a single item in a list or grid.
    - It must be responsive and support dark mode (using 'dark:' prefixes).

    **HTML Template:**
    \`\`\`html
    ${e}
    \`\`\`

    **Your Task:**
    Provide a bulleted list of 2-4 actionable suggestions using markdown to improve the layout's responsiveness, readability, and modern aesthetics for the given screen size and density. Focus on better use of space, typography, and component structure. The suggestions should be concise.

    Respond with a JSON object containing a single key "suggestions" which is a string containing the markdown-formatted bullet points.`,a=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:bt.OBJECT,properties:{suggestions:{type:bt.STRING}},required:["suggestions"]}}})).text.trim();return JSON.parse(a)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var Sd=class t{persistenceService=he(Mo);configService=he(Oi);STORAGE_KEY="smartTableDensity";density=xe(this.getInitialDensity());constructor(){ln(()=>{this.persistenceService.saveState(this.STORAGE_KEY,this.density())})}setDensity(e){this.density.set(e)}getInitialDensity(){return this.persistenceService.loadState(this.STORAGE_KEY)??this.configService.config().config.sizerConfig.defaultDensity}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var eJ=(t,e)=>e.id;function tJ(t,e){t&1&&(z(0,"div",20),ke(1,"i",22),G())}function nJ(t,e){t&1&&(z(0,"div",20),ke(1,"i",22),G())}function iJ(t,e){if(t&1){let n=Pe();z(0,"div",15),Ce("click",function(){let r=ee(n).$implicit,s=F(2);return te(s.handleApply(r.id))}),z(1,"div",23),ke(2,"div",24),G(),z(3,"div",18)(4,"h4",19),Y(5),G(),z(6,"p",25),Y(7),G()(),fe(8,nJ,2,0,"div",20),z(9,"button",26),Ce("click",function(r){let s=ee(n).$implicit,a=F(2);return r.stopPropagation(),te(a.deleteLayout.emit(s.id))}),ke(10,"i",27),G()()}if(t&2){let n=e.$implicit,i=F(2);Qe("border-indigo-500",i.isLayoutActive(n.id))("border-gray-300",!i.isLayoutActive(n.id)),V(2),Ye("innerHTML",n.htmlTemplate,_r),V(3),Ue(n.name),V(2),Ue(n.targetView.replace("-"," ")),V(),pe(i.isLayoutActive(n.id)?8:-1)}}function rJ(t,e){if(t&1){let n=Pe();z(0,"div",2),Ce("click",function(){ee(n);let r=F();return te(r.close.emit())}),z(1,"div",3),Ce("click",function(r){return ee(n),te(r.stopPropagation())}),z(2,"header",4)(3,"h3",5),Y(4,"UI Gallery"),G(),z(5,"div",6)(6,"button",7),Ce("click",function(){ee(n);let r=F();return te(r.handleSuggestImprovements())}),ke(7,"i",8),z(8,"span"),Y(9,"Suggest Improvements"),G()(),z(10,"button",9),Ce("click",function(){ee(n);let r=F();return te(r.showCreateModal.set(!0))}),ke(11,"i",10),z(12,"span"),Y(13,"Create with AI"),G()(),z(14,"button",11),Ce("click",function(){ee(n);let r=F();return te(r.close.emit())}),ke(15,"i",12),G()()(),z(16,"div",13)(17,"div",14)(18,"div",15),Ce("click",function(){ee(n);let r=F();return te(r.handleApply(null))}),z(19,"div",16),ke(20,"i",17),G(),z(21,"div",18)(22,"h4",19),Y(23,"Default Layout"),G()(),fe(24,tJ,2,0,"div",20),G(),et(25,iJ,11,8,"div",21,eJ),G()()()()}if(t&2){let n=F();V(6),Ye("disabled",!n.activeCustomLayout()),V(12),Qe("border-indigo-500",n.isLayoutActive(null))("border-gray-300",!n.isLayoutActive(null)),V(6),pe(n.isLayoutActive(null)?24:-1),V(),tt(n.layouts())}}function oJ(t,e){if(t&1){let n=Pe();z(0,"app-create-layout-modal",28),Ce("close",function(){ee(n);let r=F();return te(r.showCreateModal.set(!1))})("generate",function(r){ee(n);let s=F();return s.generateLayout.emit(r),te(s.showCreateModal.set(!1))}),G()}}function sJ(t,e){t&1&&(z(0,"div",34),ke(1,"i",36),z(2,"p"),Y(3,"Analyzing your layout..."),G()())}function aJ(t,e){if(t&1&&ke(0,"div",35),t&2){let n=F(2);Ye("innerHTML",n.suggestions(),_r)}}function lJ(t,e){if(t&1){let n=Pe();z(0,"div",29),Ce("click",function(){ee(n);let r=F();return te(r.suggestions.set(""))}),z(1,"div",30),Ce("click",function(r){return ee(n),te(r.stopPropagation())}),z(2,"header",4)(3,"h3",31),ke(4,"i",32),Y(5,"AI Suggestions"),G(),z(6,"button",11),Ce("click",function(){ee(n);let r=F();return te(r.suggestions.set(""))}),ke(7,"i",12),G()(),z(8,"div",33),fe(9,sJ,4,0,"div",34)(10,aJ,1,1,"div",35),G()()()}if(t&2){let n=F();V(9),pe(n.isGeneratingSuggestions()?9:10)}}var p_=class t{isOpen=Ee.required();layouts=Ee.required();currentView=Ee.required();activeLayouts=Ee.required();close=gt();applyLayout=gt();deleteLayout=gt();generateLayout=gt();aiLayoutService=he(Ed);densityService=he(Sd);showCreateModal=xe(!1);suggestions=xe("");isGeneratingSuggestions=xe(!1);activeCustomLayout=ut(()=>{let e=this.currentView(),n=this.activeLayouts(),i=null;return e==="table"&&(i=n.table),e==="list"&&(i=n.list),e==="card"&&(i=n.card),i?this.layouts().find(r=>r.id===i)??null:null});getLayoutTarget(){return this.currentView()==="table"?"table-row":this.currentView()==="list"?"list-item":"card"}isLayoutActive(e){let n=this.currentView();return n==="table"?this.activeLayouts().table===e:n==="list"?this.activeLayouts().list===e:this.activeLayouts().card===e}handleApply(e){this.applyLayout.emit({view:this.currentView(),layoutId:e}),this.close.emit()}async handleSuggestImprovements(){let e=this.activeCustomLayout();if(e){this.isGeneratingSuggestions.set(!0),this.suggestions.set("");try{let i=(await this.aiLayoutService.suggestLayoutImprovements(e.htmlTemplate,window.innerWidth,this.densityService.density())).suggestions;i=i.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),i=i.replace(/^\* (.*)$/gm,'<li class="ml-4 list-disc">$1</li>'),i.includes("<li")&&(i=`<ul>${i}</ul>`),this.suggestions.set(i)}catch(n){console.error("Error getting layout suggestions:",n),this.suggestions.set('<p class="text-red-500">Sorry, I was unable to generate suggestions at this time.</p>')}finally{this.isGeneratingSuggestions.set(!1)}}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-ui-gallery"]],inputs:{isOpen:[1,"isOpen"],layouts:[1,"layouts"],currentView:[1,"currentView"],activeLayouts:[1,"activeLayouts"]},outputs:{close:"close",applyLayout:"applyLayout",deleteLayout:"deleteLayout",generateLayout:"generateLayout"},decls:3,vars:3,consts:[[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50"],[1,"fixed","inset-0","bg-gray-900/80","flex","items-center","justify-center","z-[60]"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-4xl","m-4","flex","flex-col","max-h-[90vh]",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold"],[1,"flex","items-center","gap-2"],["title","Get AI suggestions for the active custom layout",1,"flex","items-center","gap-2","px-3","py-1.5","text-sm","font-medium","text-indigo-600","bg-indigo-100","border","border-transparent","rounded-md","hover:bg-indigo-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"pi","pi-lightbulb"],[1,"flex","items-center","gap-2","px-4","py-2","text-sm","font-medium","text-white","bg-indigo-600","border","border-transparent","rounded-md","hover:bg-indigo-700",3,"click"],[1,"pi","pi-sparkles"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","overflow-y-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6"],[1,"border-2","rounded-lg","cursor-pointer","transition-all","group","relative",3,"click"],[1,"aspect-[4/3]","bg-gray-100","flex","items-center","justify-center","rounded-t-md"],[1,"pi","pi-table","text-4xl","text-gray-400"],[1,"p-3"],[1,"font-semibold","text-sm","truncate"],[1,"absolute","top-2","right-2","bg-indigo-600","text-white","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"border-2","rounded-lg","cursor-pointer","transition-all","group","relative",3,"border-indigo-500","border-gray-300"],[1,"pi","pi-check","text-xs"],[1,"aspect-[4/3]","bg-gray-100","flex","items-center","justify-center","rounded-t-md","p-2","overflow-hidden"],[1,"transform","scale-[0.3]","origin-top-left",3,"innerHTML"],[1,"text-xs","text-gray-500","capitalize"],["title","Delete this layout",1,"absolute","top-1","right-1","p-1","rounded-full","opacity-0","group-hover:opacity-100","bg-white/50","hover:bg-red-100","text-red-500","transition-opacity",3,"click"],[1,"pi","pi-trash","text-xs"],[3,"close","generate"],[1,"fixed","inset-0","bg-gray-900/80","flex","items-center","justify-center","z-[60]",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-lg","m-4",3,"click"],[1,"text-lg","font-semibold","flex","items-center","gap-2"],[1,"pi","pi-lightbulb","text-yellow-400"],[1,"p-6"],[1,"flex","items-center","gap-3"],[1,"prose","max-w-none","text-sm",3,"innerHTML"],[1,"pi","pi-spin","pi-spinner","text-2xl","text-indigo-500"]],template:function(n,i){n&1&&(fe(0,rJ,27,6,"div",0),fe(1,oJ,1,0,"app-create-layout-modal"),fe(2,lJ,11,1,"div",1)),n&2&&(pe(i.isOpen()?0:-1),V(),pe(i.showCreateModal()?1:-1),V(),pe((i.isGeneratingSuggestions()||i.suggestions())&&i.isOpen()?2:-1))},dependencies:[Ft,f_],encapsulation:2,changeDetection:0})};var Dd=class t{platformId=he(Jo);STORAGE_KEY_THEME="smart-table-theme";STORAGE_KEY_DIR="smart-table-dir";STORAGE_KEY_LAYOUT="smart-table-layout";theme=xe("system");direction=xe("ltr");layout=xe("full");mediaQuery;mediaQueryListener;constructor(){Rs(this.platformId)&&(this.theme.set(this.getInitialState(this.STORAGE_KEY_THEME,"system")),this.direction.set(this.getInitialState(this.STORAGE_KEY_DIR,"ltr")),this.layout.set(this.getInitialState(this.STORAGE_KEY_LAYOUT,"full")),this.applyTheme(this.theme()),this.applyDirection(this.direction()),ln(()=>{let e=this.theme();localStorage.setItem(this.STORAGE_KEY_THEME,e),this.applyTheme(e)}),ln(()=>{let e=this.direction();localStorage.setItem(this.STORAGE_KEY_DIR,e),this.applyDirection(e)}),ln(()=>{let e=this.layout();localStorage.setItem(this.STORAGE_KEY_LAYOUT,e)}),this.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.mediaQueryListener=e=>{this.theme()==="system"&&this.applySystemTheme()},this.mediaQuery.addEventListener("change",this.mediaQueryListener))}ngOnDestroy(){Rs(this.platformId)&&this.mediaQuery&&this.mediaQueryListener&&this.mediaQuery.removeEventListener("change",this.mediaQueryListener)}setTheme(e){this.theme.set(e)}setDirection(e){this.direction.set(e)}setLayout(e){this.layout.set(e)}getInitialState(e,n){try{let i=localStorage.getItem(e);return i||n}catch{return n}}applyTheme(e){if(!Rs(this.platformId))return;let n=document.documentElement;n.classList.remove("dark"),e==="system"?this.applySystemTheme():e==="dark"&&n.classList.add("dark")}applyDirection(e){Rs(this.platformId)&&document.documentElement.setAttribute("dir",e)}applySystemTheme(){let e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=document.documentElement;e?n.classList.add("dark"):n.classList.remove("dark")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var h_=class t{STORAGE_KEY="smartTableSavedCalendarViews";getViewsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading saved calendar views from localStorage",e),[]}}saveViewsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(n){console.error("Error saving calendar views to localStorage",n)}}getSavedViews(){return Li(this.getViewsFromStorage())}saveView(e,n){let i=this.getViewsFromStorage(),r={id:new Date().toISOString(),name:e,dateFieldCode:n};return i.push(r),this.saveViewsToStorage(i),Li(r)}deleteView(e){let n=this.getViewsFromStorage();return n=n.filter(i=>i.id!==e),this.saveViewsToStorage(n),Li(void 0)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var m_=class t{ai=he($r).ai;async suggestCalendarViewName(e){let n=`You are a helpful assistant. Your task is to suggest a short, descriptive name for a saved calendar view in a data table. The view is based on a date field.

    Date Field Name: "${e}"

    Respond with a JSON object containing a single key "name".

    Example 1:
    Date Field Name: "Created Time"
    Response: { "name": "Contacts by Creation Date" }

    Example 2:
    Date Field Name: "last_activity_date"
    Response: { "name": "Contacts by Last Activity" }
    
    Example 3:
    Date Field Name: "Subscription End Date"
    Response: { "name": "Subscription Expirations" }`,r=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:{type:bt.OBJECT,properties:{name:{type:bt.STRING}},required:["name"]}}})).text.trim();return JSON.parse(r)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var cJ=(t,e)=>e.code,uJ=(t,e)=>e.id;function dJ(t,e){if(t&1){let n=Pe();ne(0,"div",12)(1,"div",18)(2,"input",19),Je("change",function(){let r=ee(n).$implicit,s=F(2);return te(s.selectField(r.code))}),oe()(),ne(3,"div",20)(4,"label",21),Y(5),oe()()()}if(t&2){let n=e.$implicit,i=F(2);V(2),Ot("id","date-field-"+n.code)("checked",i.selectedFieldCode()===n.code),V(2),Ot("htmlFor","date-field-"+n.code),V(),Ue(n.name)}}function fJ(t,e){t&1&&(ot(0,"i",27),Y(1," Saving... "))}function pJ(t,e){t&1&&(ot(0,"i",28),Y(1," Save View "))}function hJ(t,e){if(t&1){let n=Pe();ne(0,"div")(1,"h4",10),Y(2,"2. Save this view for later"),oe(),ne(3,"div",22)(4,"input",23,0),Je("input",function(){ee(n);let r=Yi(5),s=F(2);return te(s.newViewName.set(r.value))}),oe(),ne(6,"button",24),Je("click",function(){ee(n);let r=F(2);return te(r.suggestName())}),ot(7,"i",25),oe()(),ne(8,"button",26),Je("click",function(){ee(n);let r=F(2);return te(r.saveView())}),fe(9,fJ,2,0)(10,pJ,2,0),oe()()}if(t&2){let n=F(2);V(4),Ot("value",n.newViewName()),V(2),Ot("disabled",n.isSuggestingName()),V(),Qe("pi-sparkles",!n.isSuggestingName())("pi-spin",n.isSuggestingName())("pi-spinner",n.isSuggestingName()),V(),Ot("disabled",!n.canSave()||n.isSaving()),V(),pe(n.isSaving()?9:10)}}function mJ(t,e){if(t&1){let n=Pe();ne(0,"li",29)(1,"div")(2,"p",30),Y(3),oe(),ne(4,"p",31),Y(5),oe()(),ne(6,"div",32)(7,"button",33),Je("click",function(){let r=ee(n).$implicit,s=F(3);return te(s.applyView(r.dateFieldCode))}),ot(8,"i",34),oe(),ne(9,"button",35),Je("click",function(){let r=ee(n).$implicit,s=F(3);return te(s.deleteView(r.id))}),ot(10,"i",36),oe()()()}if(t&2){let n=e.$implicit,i=F(3);V(3),Ue(n.name),V(2),tn("Field: ",i.getDateFieldName(n.dateFieldCode))}}function gJ(t,e){if(t&1&&(ne(0,"ul",11),et(1,mJ,11,2,"li",29,uJ),oe()),t&2){let n=F(2);V(),tt(n.savedViews())}}function vJ(t,e){t&1&&(ne(0,"p",14),Y(1,"No saved views yet. Select a field and save it to get started."),oe())}function yJ(t,e){if(t&1){let n=Pe();ne(0,"div",2),Je("click",function(){ee(n);let r=F();return te(r.close.emit())}),ne(1,"div",3),Je("click",function(r){return ee(n),te(r.stopPropagation())}),ne(2,"header",4)(3,"h3",5),Y(4,"Configure Calendar View"),oe(),ne(5,"button",6),Je("click",function(){ee(n);let r=F();return te(r.close.emit())}),ot(6,"i",7),oe()(),ne(7,"div",8)(8,"div",9)(9,"div")(10,"h4",10),Y(11,"1. Choose a date field to plot"),oe(),ne(12,"fieldset",11),et(13,dJ,6,4,"div",12,cJ),oe()(),fe(15,hJ,11,10,"div"),oe(),ne(16,"div",13)(17,"h4",10),Y(18,"Saved Calendar Views"),oe(),fe(19,gJ,3,0,"ul",11)(20,vJ,2,0,"p",14),oe()(),ne(21,"footer",15)(22,"button",16),Je("click",function(){ee(n);let r=F();return te(r.close.emit())}),Y(23,"Cancel"),oe(),ne(24,"button",17),Je("click",function(){ee(n);let r=F();return te(r.applyView(r.selectedFieldCode()))}),Y(25," Apply Selected Field "),oe()()()()}if(t&2){let n=F();V(13),tt(n.dateColumns()),V(2),pe(n.selectedFieldCode()?15:-1),V(4),pe(n.savedViews().length>0?19:20),V(5),Ot("disabled",!n.selectedFieldCode())}}var g_=class t{isOpen=Ee.required();dateColumns=Ee.required();close=gt();apply=gt();calendarViewConfigService=he(h_);aiNamingService=he(m_);savedViews=xe([]);selectedFieldCode=xe("");newViewName=xe("");isSaving=xe(!1);isSuggestingName=xe(!1);canSave=ut(()=>this.selectedFieldCode()&&this.newViewName().trim().length>0);constructor(){this.loadSavedViews()}loadSavedViews(){this.calendarViewConfigService.getSavedViews().subscribe(e=>{this.savedViews.set(e)})}selectField(e){this.selectedFieldCode.set(e),this.newViewName.set("")}async suggestName(){let e=this.selectedFieldCode();if(!e)return;let n=this.dateColumns().find(i=>i.code===e);if(n){this.isSuggestingName.set(!0);try{let i=await this.aiNamingService.suggestCalendarViewName(n.name);this.newViewName.set(i.name)}catch(i){console.error("Error suggesting name:",i)}finally{this.isSuggestingName.set(!1)}}}saveView(){this.canSave()&&(this.isSaving.set(!0),this.calendarViewConfigService.saveView(this.newViewName().trim(),this.selectedFieldCode()).subscribe(()=>{this.loadSavedViews(),this.newViewName.set(""),this.isSaving.set(!1)}))}deleteView(e){this.calendarViewConfigService.deleteView(e).subscribe(()=>{this.loadSavedViews()})}applyView(e){this.apply.emit({dateFieldCode:e})}getDateFieldName(e){let n=this.dateColumns().find(i=>i.code===e);return n?n.name:e}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-calendar-config-modal"]],inputs:{isOpen:[1,"isOpen"],dateColumns:[1,"dateColumns"]},outputs:{close:"close",apply:"apply"},decls:1,vars:1,consts:[["nameInput",""],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","m-4","flex","flex-col","max-h-[90vh]",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","grid","grid-cols-1","md:grid-cols-2","gap-6","overflow-y-auto"],[1,"space-y-6"],[1,"font-medium","text-gray-800","mb-2"],[1,"space-y-2"],[1,"relative","flex","items-start"],[1,"border-t","md:border-t-0","md:border-l","border-gray-200","md:pl-6","pt-6","md:pt-0"],[1,"text-sm","text-gray-500","italic"],[1,"p-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","h-6","items-center"],["name","date-field","type","radio",1,"h-4","w-4","border-gray-300","text-indigo-600","focus:ring-indigo-600",3,"change","id","checked"],[1,"ml-3","text-sm","leading-6"],[1,"font-medium","text-gray-900",3,"for"],[1,"flex","items-center","gap-2"],["type","text","placeholder","e.g., Contacts by Creation",1,"flex-grow","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"input","value"],["title","Suggest a name with AI",1,"p-2","rounded-md","bg-indigo-50","text-indigo-600","hover:bg-indigo-100","disabled:opacity-50",3,"click","disabled"],[1,"pi"],[1,"mt-3","w-full","flex","justify-center","items-center","gap-2","px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50",3,"click","disabled"],[1,"pi","pi-spin","pi-spinner"],[1,"pi","pi-save"],[1,"p-2","rounded-md","bg-gray-50","flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"flex","items-center","gap-1"],["title","Apply this view",1,"p-2","text-sm","rounded-md","text-white","bg-slate-900","hover:bg-slate-800",3,"click"],[1,"pi","pi-check"],["title","Delete this view",1,"p-2","text-sm","rounded-md","text-red-600","hover:bg-red-100",3,"click"],[1,"pi","pi-trash"]],template:function(n,i){n&1&&fe(0,yJ,26,3,"div",1),n&2&&pe(i.isOpen()?0:-1)},dependencies:[Ft],encapsulation:2,changeDetection:0})};var v_=class t{close=gt();startSync=gt();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-sync-options-modal"]],outputs:{close:"close",startSync:"startSync"},decls:21,vars:0,consts:[[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-md","m-4",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","flex","items-center","gap-2"],[1,"pi","pi-sync","text-indigo-500"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","text-sm","text-gray-600","space-y-4"],[1,"p-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800",3,"click"]],template:function(n,i){n&1&&(ne(0,"div",0),Je("click",function(){return i.close.emit()}),ne(1,"div",1),Je("click",function(s){return s.stopPropagation()}),ne(2,"header",2)(3,"h3",3),ot(4,"i",4),Y(5,"Enable Offline Sync?"),oe(),ne(6,"button",5),Je("click",function(){return i.close.emit()}),ot(7,"i",6),oe()(),ne(8,"div",7)(9,"p"),Y(10," Switching to "),ne(11,"strong"),Y(12,"SYNC"),oe(),Y(13," mode will download all contact data to your device for fast, offline access. "),oe(),ne(14,"p"),Y(15," The initial download may take a moment. Future loads will be instantaneous. "),oe()(),ne(16,"footer",8)(17,"button",9),Je("click",function(){return i.close.emit()}),Y(18,"Cancel"),oe(),ne(19,"button",10),Je("click",function(){return i.startSync.emit()}),Y(20," Start Sync "),oe()()()())},dependencies:[Ft],encapsulation:2,changeDetection:0})};var y_=class t{persistenceService=he(Mo);STORAGE_KEY="smartTableChips";chips=xe(this.loadChips());constructor(){ln(()=>{this.saveChips(this.chips())})}addChip(e){let n=xt({id:new Date().toISOString()},e);this.chips.update(i=>[...i,n])}removeChip(e){this.chips.update(n=>n.filter(i=>i.id!==e))}loadChips(){return this.persistenceService.loadState(this.STORAGE_KEY)??[]}saveChips(e){this.persistenceService.saveState(this.STORAGE_KEY,e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var __=class t{ai=he($r).ai;async generateChipConfig(e,n){let i=n.map(c=>({name:c.name,code:c.code,type:c.columnType||"TEXT"})),r=`You are an AI assistant that creates configuration for summary "chips" based on user requests.
    Analyze the user's prompt and determine the correct column, aggregation method, and label.
    - For requests to count specific categories (e.g., "count web leads"), use the 'count' aggregation and specify the 'filterValue'. The label should reflect this, like "Web Leads".
    - For requests to summarize a numeric column (e.g., "total revenue"), use 'sum' or 'average' and do not provide a 'filterValue'. The label should be "Total Revenue".
    - If the user just says "show revenue", assume they mean 'sum'.
    - If the user just says "count contacts", use 'count' on the primary key 'organization_id' and label it "Total Contacts".
    
    Respond with a single JSON object.

    Available columns: ${JSON.stringify(i)}
    `,a=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{systemInstruction:r,responseMimeType:"application/json",responseSchema:{type:bt.OBJECT,properties:{label:{type:bt.STRING},columnCode:{type:bt.STRING},aggregation:{type:bt.STRING,enum:["count","sum","average"]},filterValue:{type:bt.STRING,nullable:!0}},required:["label","columnCode","aggregation"]}}})).text.trim();return JSON.parse(a)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var BP=(t,e)=>e.code;function _J(t,e){if(t&1&&(ne(0,"option",28),Y(1),oe()),t&2){let n=e.$implicit;Ot("value",n.code),V(),Ue(n.name)}}function CJ(t,e){if(t&1&&(ne(0,"option",28),Y(1),oe()),t&2){let n=e.$implicit;Ot("value",n.code),V(),Ue(n.name)}}function xJ(t,e){if(t&1&&(ne(0,"option",32),Y(1),oe()),t&2){let n=e.$implicit;Ot("value",n),V(),Ue(n)}}function bJ(t,e){if(t&1){let n=Pe();ne(0,"div")(1,"label",30),Y(2,"Calculation"),oe(),ne(3,"select",31,2),Je("change",function(){ee(n);let r=Yi(4),s=F(3);return te(s.selectedAggregation.set(r.value))}),et(5,xJ,2,2,"option",32,xn),oe()()}if(t&2){let n=F(3);V(3),Ot("value",n.selectedAggregation()),V(2),tt(n.availableAggregations())}}function wJ(t,e){if(t&1){let n=Pe();ne(0,"div")(1,"label",33),Y(2,"Value to Count"),oe(),ne(3,"input",34,3),Je("input",function(){ee(n);let r=Yi(4),s=F(3);return te(s.filterValue.set(r.value))}),oe(),ne(5,"p",35),Y(6,"Specify which value in the selected column to count (e.g., 'Web' for Lead Source)."),oe()()}if(t&2){let n=F(3);V(3),Ot("value",n.filterValue())}}function EJ(t,e){if(t&1){let n=Pe();ne(0,"div",17)(1,"div")(2,"label",22),Y(3,"Chip Label"),oe(),ne(4,"input",23,0),Je("input",function(){ee(n);let r=Yi(5),s=F(2);return te(s.label.set(r.value))}),oe()(),ne(6,"div")(7,"label",24),Y(8,"Column"),oe(),ne(9,"select",25,1),Je("change",function(){ee(n);let r=Yi(10),s=F(2);return s.selectedColumnCode.set(r.value),te(s.selectedAggregation.set("count"))}),ne(11,"option",26),Y(12,"Select a column..."),oe(),ne(13,"optgroup",27),et(14,_J,2,2,"option",28,BP),oe(),ne(16,"optgroup",29),et(17,CJ,2,2,"option",28,BP),oe()()(),fe(19,bJ,7,1,"div"),fe(20,wJ,7,1,"div"),oe()}if(t&2){let n=F(2);V(4),Ot("value",n.label()),V(5),Ot("value",n.selectedColumnCode()),V(5),tt(n.numericColumns()),V(3),tt(n.categoricalColumns()),V(2),pe(n.selectedColumnCode()?19:-1),V(),pe(n.isCategoricalCount()?20:-1)}}function SJ(t,e){if(t&1){let n=Pe();ne(0,"div",17)(1,"div")(2,"label",36),Y(3,"What do you want to see?"),oe(),ne(4,"textarea",37,4),Je("input",function(){ee(n);let r=Yi(5),s=F(2);return te(s.aiPrompt.set(r.value))}),oe()()()}if(t&2){let n=F(2);V(4),Ot("value",n.aiPrompt())}}function DJ(t,e){if(t&1){let n=Pe();ne(0,"button",38),Je("click",function(){ee(n);let r=F(2);return te(r.handleManualSave())}),Y(1," Add Chip "),oe()}if(t&2){let n=F(2);Ot("disabled",!n.manualFormIsValid())}}function TJ(t,e){t&1&&(ot(0,"i",40),ne(1,"span"),Y(2,"Generating..."),oe())}function IJ(t,e){t&1&&(ot(0,"i",41),ne(1,"span"),Y(2,"Generate & Add"),oe())}function AJ(t,e){if(t&1){let n=Pe();ne(0,"button",39),Je("click",function(){ee(n);let r=F(2);return te(r.handleAiGenerate())}),fe(1,TJ,3,0)(2,IJ,3,0),oe()}if(t&2){let n=F(2);Ot("disabled",!n.aiPrompt().trim()||n.isGenerating()),V(),pe(n.isGenerating()?1:2)}}function MJ(t,e){if(t&1){let n=Pe();ne(0,"div",6),Je("click",function(){ee(n);let r=F();return te(r.close.emit())}),ne(1,"div",7),Je("click",function(r){return ee(n),te(r.stopPropagation())}),ne(2,"header",8)(3,"h3",9),Y(4,"Add Summary Chip"),oe(),ne(5,"button",10),Je("click",function(){ee(n);let r=F();return te(r.close.emit())}),ot(6,"i",11),oe()(),ne(7,"div",12)(8,"div",13)(9,"nav",14)(10,"button",15),Je("click",function(){ee(n);let r=F();return te(r.activeTab.set("manual"))}),Y(11," Manual "),oe(),ne(12,"button",15),Je("click",function(){ee(n);let r=F();return te(r.activeTab.set("ai"))}),Y(13," Create with AI "),oe()()(),ne(14,"div",16),fe(15,EJ,21,4,"div",17)(16,SJ,6,1,"div",17),oe()(),ne(17,"footer",18)(18,"button",19),Je("click",function(){ee(n);let r=F();return te(r.close.emit())}),Y(19,"Cancel"),oe(),fe(20,DJ,2,1,"button",20)(21,AJ,3,2,"button",21),oe()()()}if(t&2){let n=F();V(10),Qe("border-indigo-500",n.activeTab()==="manual")("text-indigo-600",n.activeTab()==="manual"),V(2),Qe("border-indigo-500",n.activeTab()==="ai")("text-indigo-600",n.activeTab()==="ai"),V(3),pe(n.activeTab()==="manual"?15:16),V(5),pe(n.activeTab()==="manual"?20:21)}}var C_=class t{isOpen=Ee.required();columns=Ee.required();close=gt();addChip=gt();aiChipService=he(__);activeTab=xe("manual");label=xe("");selectedColumnCode=xe("");selectedAggregation=xe("count");filterValue=xe("");aiPrompt=xe("");isGenerating=xe(!1);numericColumns=ut(()=>this.columns().filter(e=>e.columnType==="numeric"));categoricalColumns=ut(()=>this.columns().filter(e=>e.columnType!=="numeric"&&e.filterable));availableAggregations=ut(()=>{let e=this.selectedColumnCode();return this.numericColumns().some(i=>i.code===e)?["sum","average","count"]:["count"]});isCategoricalCount=ut(()=>{let e=this.selectedColumnCode(),n=this.numericColumns().some(i=>i.code===e);return this.selectedAggregation()==="count"&&!n});manualFormIsValid=ut(()=>this.label().trim()&&this.selectedColumnCode());handleManualSave(){this.manualFormIsValid()&&(this.addChip.emit({label:this.label().trim(),columnCode:this.selectedColumnCode(),aggregation:this.selectedAggregation(),filterValue:this.isCategoricalCount()?this.filterValue().trim():void 0}),this.resetForms())}async handleAiGenerate(){if(this.aiPrompt().trim()){this.isGenerating.set(!0);try{let e=await this.aiChipService.generateChipConfig(this.aiPrompt(),this.columns());this.addChip.emit(e),this.resetForms()}catch(e){console.error("AI chip generation failed",e)}finally{this.isGenerating.set(!1)}}}resetForms(){this.label.set(""),this.selectedColumnCode.set(""),this.selectedAggregation.set("count"),this.filterValue.set(""),this.aiPrompt.set("")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-add-chip-modal"]],inputs:{isOpen:[1,"isOpen"],columns:[1,"columns"]},outputs:{close:"close",addChip:"addChip"},decls:1,vars:1,consts:[["labelInput",""],["columnSelect",""],["aggSelect",""],["filterValueInput",""],["promptInput",""],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-lg","m-4","flex","flex-col","max-h-[90vh]",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","overflow-y-auto"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-6"],[1,"border-transparent","text-gray-500","hover:text-gray-700","hover:border-gray-300","whitespace-nowrap","py-3","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"pt-6"],[1,"space-y-4"],[1,"p-4","border-t","border-gray-200","flex","justify-end","gap-3"],[1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"disabled"],["for","chipLabel",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","chipLabel","placeholder","e.g., Total Revenue",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"input","value"],["for","chipColumn",1,"block","text-sm","font-medium","text-gray-700"],["id","chipColumn",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"change","value"],["value","","disabled",""],["label","Numeric Fields"],[3,"value"],["label","Other Fields"],["for","chipAggregation",1,"block","text-sm","font-medium","text-gray-700"],["id","chipAggregation",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"change","value"],[1,"capitalize",3,"value"],["for","chipFilterValue",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","chipFilterValue","placeholder","e.g., Web",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500",3,"input","value"],[1,"mt-1","text-xs","text-gray-500"],["for","aiPrompt",1,"block","text-sm","font-medium","text-gray-700"],["id","aiPrompt","rows","4","placeholder","e.g., 'Show total revenue' or 'Count of leads from Web'",1,"mt-1","block","w-full","text-sm","rounded-md","border-gray-300","shadow-sm","focus:border-indigo-500","focus:ring-indigo-500","font-mono",3,"input","value"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-slate-900","border","border-transparent","rounded-md","hover:bg-slate-800","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"click","disabled"],[1,"pi","pi-spin","pi-spinner"],[1,"pi","pi-sparkles"]],template:function(n,i){n&1&&fe(0,MJ,22,10,"div",5),n&2&&pe(i.isOpen()?0:-1)},dependencies:[Ft],encapsulation:2,changeDetection:0})};var kJ=(t,e)=>e.id;function NJ(t,e){if(t&1){let n=Pe();ne(0,"div",4),Je("click",function(){let r=ee(n).$implicit,s=F();return te(s.onChipClick(r))}),ne(1,"span"),Y(2),ne(3,"span",5),Y(4),oe()(),ne(5,"button",6),Je("click",function(r){let s=ee(n).$implicit,a=F();return r.stopPropagation(),te(a.removeChip.emit(s.id))}),ot(6,"i",7),oe()()}if(t&2){let n=e.$implicit;Qe("cursor-pointer",n.aggregation==="count"&&n.filterValue)("hover:bg-indigo-200",n.aggregation==="count"&&n.filterValue),Ot("title",n.aggregation==="count"&&n.filterValue?"Click to filter":""),V(2),tn("",n.label,": "),V(2),Ue(n.displayValue)}}var x_=class t{chips=Ee.required();chipClicked=gt();removeChip=gt();addChip=gt();onChipClick(e){e.aggregation==="count"&&e.filterValue&&this.chipClicked.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-chip-filter-bar"]],inputs:{chips:[1,"chips"]},outputs:{chipClicked:"chipClicked",removeChip:"removeChip",addChip:"addChip"},decls:7,vars:0,consts:[[1,"flex","items-center","gap-2","flex-wrap"],[1,"flex","items-center","gap-2","pl-3","pr-1","py-1","rounded-full","text-xs","font-medium","bg-gray-200","text-gray-800",3,"cursor-pointer","hover:bg-indigo-200","title"],["title","Add another chip",1,"flex","items-center","gap-1.5","px-2","py-1","rounded-full","text-xs","font-medium","border","border-dashed","border-gray-400","text-gray-600","hover:bg-gray-100",3,"click"],[1,"pi","pi-plus","text-xs"],[1,"flex","items-center","gap-2","pl-3","pr-1","py-1","rounded-full","text-xs","font-medium","bg-gray-200","text-gray-800",3,"click","title"],[1,"font-bold"],["title","Remove chip",1,"p-1","rounded-full","hover:bg-gray-300",3,"click"],[1,"pi","pi-times","text-xs"]],template:function(n,i){n&1&&(ne(0,"div",0),et(1,NJ,7,7,"div",1,kJ),ne(3,"button",2),Je("click",function(){return i.addChip.emit()}),ot(4,"i",3),ne(5,"span"),Y(6,"Add"),oe()()()),n&2&&(V(),tt(i.chips()))},dependencies:[Ft],encapsulation:2,changeDetection:0})};var b_=class{data=[];activeIndex=null;selection=new Set;anchorIndex=null;updateState(e,n,i,r){this.data=e,this.activeIndex=n,this.selection=i,this.anchorIndex=r}handleKeydown(e){if(this.data.length===0)return null;if(e.ctrlKey&&e.key.toLowerCase()==="a")return e.preventDefault(),this.handleSelectAll();let n=["ArrowUp","ArrowDown","Home","End"].includes(e.key),i=[" ","Enter"].includes(e.key);return!n&&!i?null:(e.preventDefault(),i?this.handleToggleSelection(e.shiftKey):n?this.handleNavigation(e.key,e.shiftKey):null)}handleSelectAll(){let e=this.activeIndex??0,n=this.anchorIndex??e;return{newActiveIndex:e,newSelection:new Set(this.data.map(i=>i.organization_id)),newAnchorIndex:n}}handleToggleSelection(e){if(this.activeIndex===null&&!e)return null;if(e){let n=this.activeIndex??0,i=this.anchorIndex??n,r=Math.min(i,n),s=Math.max(i,n),a=new Set(this.selection);for(let c=r;c<=s;c++)a.add(this.data[c].organization_id);return{newActiveIndex:n,newSelection:a,newAnchorIndex:i}}else{let n=this.activeIndex,i=new Set(this.selection),r=this.data[n].organization_id;return i.has(r)?i.delete(r):i.add(r),{newActiveIndex:n,newSelection:i,newAnchorIndex:n}}}handleNavigation(e,n){let i=this.activeIndex??-1,r=i;switch(e){case"ArrowUp":r=i<=0?0:i-1;break;case"ArrowDown":r=i<0?0:Math.min(this.data.length-1,i+1);break;case"Home":r=0;break;case"End":r=this.data.length-1;break}let s=new Set(this.selection),a=this.anchorIndex;if(n){let c=this.anchorIndex??this.activeIndex??0,u=Math.min(c,r),p=Math.max(c,r),m=new Set;for(let C=u;C<=p;C++)m.add(this.data[C].organization_id);s=m}else a=r;return{newActiveIndex:r,newSelection:s,newAnchorIndex:a}}};var QE=(t,e)=>e.value;function FJ(t,e){if(t&1){let n=Pe();ne(0,"div",11),Je("click",function(){ee(n);let r=F();return te(r.close.emit())}),oe()}}function RJ(t,e){if(t&1){let n=Pe();ne(0,"button",12),Je("click",function(){let r=ee(n).$implicit,s=F();return te(s.themeService.setTheme(r.value))}),ot(1,"i"),ne(2,"span"),Y(3),oe()()}if(t&2){let n=e.$implicit,i=F();Zt(i.themeService.theme()===n.value?"bg-indigo-100 text-indigo-700":"bg-gray-100 hover:bg-gray-200"),Qe("ring-2",i.themeService.theme()===n.value),V(),Zt(n.icon),V(2),Ue(n.label)}}function PJ(t,e){if(t&1){let n=Pe();ne(0,"button",12),Je("click",function(){let r=ee(n).$implicit,s=F();return te(s.themeService.setDirection(r.value))}),ot(1,"i"),ne(2,"span"),Y(3),oe()()}if(t&2){let n=e.$implicit,i=F();Zt(i.themeService.direction()===n.value?"bg-indigo-100 text-indigo-700":"bg-gray-100 hover:bg-gray-200"),Qe("ring-2",i.themeService.direction()===n.value),V(),Zt(n.icon),V(2),Ue(n.label)}}function LJ(t,e){if(t&1){let n=Pe();ne(0,"button",12),Je("click",function(){let r=ee(n).$implicit,s=F();return te(s.themeService.setLayout(r.value))}),ot(1,"i"),ne(2,"span"),Y(3),oe()()}if(t&2){let n=e.$implicit,i=F();Zt(i.themeService.layout()===n.value?"bg-indigo-100 text-indigo-700":"bg-gray-100 hover:bg-gray-200"),Qe("ring-2",i.themeService.layout()===n.value),V(),Zt(n.icon),V(2),Ue(n.label)}}var w_=class t{isOpen=Ee.required();close=gt();themeService=he(Dd);themes=[{label:"Light",value:"light",icon:"pi pi-sun"},{label:"Dark",value:"dark",icon:"pi pi-moon"},{label:"System",value:"system",icon:"pi pi-desktop"}];directions=[{label:"LTR",value:"ltr",icon:"pi pi-align-left"},{label:"RTL",value:"rtl",icon:"pi pi-align-right"}];layouts=[{label:"Full",value:"full",icon:"pi pi-window-maximize"},{label:"Boxed",value:"box",icon:"pi pi-th-large"}];static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-theme-settings"]],inputs:{isOpen:[1,"isOpen"]},outputs:{close:"close"},decls:26,vars:5,consts:[[1,"fixed","inset-0","bg-black/20","z-40"],[1,"fixed","top-0","right-0","h-full","w-72","bg-white","shadow-lg","transform","transition-transform","duration-300","ease-in-out","z-50","border-l","border-gray-200"],[1,"p-4","border-b","border-gray-200","flex","justify-between","items-center"],[1,"text-lg","font-semibold","text-gray-800"],[1,"text-gray-500","hover:text-gray-700","p-1","rounded-full","hover:bg-gray-100","transition-colors",3,"click"],[1,"pi","pi-times","text-sm"],[1,"p-4","space-y-6"],[1,"font-medium","text-gray-700","mb-2"],[1,"grid","grid-cols-3","gap-2"],[1,"px-3","py-2","text-sm","rounded-md","flex","items-center","justify-center","gap-2","ring-indigo-500","transition-all","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"ring-2","class"],[1,"grid","grid-cols-2","gap-2"],[1,"fixed","inset-0","bg-black/20","z-40",3,"click"],[1,"px-3","py-2","text-sm","rounded-md","flex","items-center","justify-center","gap-2","ring-indigo-500","transition-all","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"]],template:function(n,i){n&1&&(fe(0,FJ,1,0,"div",0),ne(1,"div",1)(2,"div",2)(3,"h2",3),Y(4,"Theme Settings"),oe(),ne(5,"button",4),Je("click",function(){return i.close.emit()}),ot(6,"i",5),oe()(),ne(7,"div",6)(8,"div")(9,"h3",7),Y(10,"Color Scheme"),oe(),ne(11,"div",8),et(12,RJ,4,7,"button",9,QE),oe()(),ne(14,"div")(15,"h3",7),Y(16,"Direction"),oe(),ne(17,"div",10),et(18,PJ,4,7,"button",9,QE),oe()(),ne(20,"div")(21,"h3",7),Y(22,"Layout Mode"),oe(),ne(23,"div",10),et(24,LJ,4,7,"button",9,QE),oe()()()()),n&2&&(pe(i.isOpen()?0:-1),V(),Qe("translate-x-0",i.isOpen())("translate-x-full",!i.isOpen()),V(11),tt(i.themes),V(6),tt(i.directions),V(6),tt(i.layouts))},dependencies:[Ft],encapsulation:2,changeDetection:0})};var E_=class t{exportData(e,n,i,r){switch(e){case"csv":this.exportAsCsv(n,i,r);break;case"excel":this.exportAsCsv(n,i,r,"xlsx");break;case"pdf":alert("PDF export is not implemented in this demo."),console.warn("PDF export is not implemented.");break}}exportAsCsv(e,n,i,r="csv"){if(!e||e.length===0)return;let s=",",a=n.filter(x=>x.columnType!=="ACTION"&&x.columnType!=="CHECKBOX"),c=a.map(x=>this.escapeCsvCell(x.name)).join(s),u=e.map(x=>a.map(E=>{let A;E.cellTemplate?A=E.cellTemplate.filter(R=>R.columnType!=="IMAGE").map(R=>x[R.code]).join(" "):A=x[E.code];let N=A==null?"":String(A);return this.escapeCsvCell(N)}).join(s)),p=[c,...u].join(`
`),m=new Blob(["\uFEFF"+p],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a");if(C.download!==void 0){let x=URL.createObjectURL(m);C.setAttribute("href",x);let E=i.replace(/[^a-z0-9]/gi,"_").toLowerCase(),A=new Date().toISOString().split("T")[0];C.setAttribute("download",`${E}_${A}.${r}`),document.body.appendChild(C),C.click(),document.body.removeChild(C)}}escapeCsvCell(e){return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var OJ=(t,e)=>e.key,VJ=(t,e)=>e.src;function BJ(t,e){if(t&1&&ot(0,"img",1),t&2){let n=F();Ot("src",n.imageUrl,no)}}function HJ(t,e){t&1&&ot(0,"i",2)}function UJ(t,e){if(t&1&&ot(0,"i"),t&2){let n=F().$implicit;Zt(n.icon+" mr-2")}}function zJ(t,e){if(t&1){let n=Pe();ne(0,"button",8),Je("click",function(){let r=ee(n).$implicit,s=F(3);return te(s.action.emit(r.key))}),fe(1,UJ,1,2,"i",9),ne(2,"span"),Y(3),oe()()}if(t&2){let n=e.$implicit;Zt(n.class||"bg-indigo-600 hover:bg-indigo-700 text-white"),V(),pe(n.icon?1:-1),V(2),Ue(n.label)}}function GJ(t,e){if(t&1&&(ne(0,"div",5),et(1,zJ,4,4,"button",7,OJ),oe()),t&2){let n=F();V(),tt(n.actions)}}function $J(t,e){if(t&1&&ot(0,"img",12),t&2){let n=e.$implicit;Ot("src",n.src,no)("alt",n.alt)}}function qJ(t,e){if(t&1&&(ne(0,"span",13),Y(1),oe()),t&2){let n=F(2);V(),Ue(n.migration.moreText)}}function WJ(t,e){if(t&1&&ot(0,"i"),t&2){let n=F(3);Zt(n.migration.action.icon+" mr-2")}}function jJ(t,e){if(t&1){let n=Pe();ne(0,"div",14)(1,"button",15),Je("click",function(){ee(n);let r=F(2),s=F();return te(s.action.emit(r.migration.action.key))}),fe(2,WJ,1,2,"i",9),ne(3,"span"),Y(4),oe()()()}if(t&2){let n=F(2);V(),Zt(n.migration.action.class||"bg-cyan-500 hover:bg-cyan-600 text-white"),V(),pe(n.migration.action.icon?2:-1),V(2),Ue(n.migration.action.label)}}function KJ(t,e){if(t&1&&(ne(0,"div",6)(1,"p",10),Y(2),oe(),ne(3,"div",11),et(4,$J,1,2,"img",12,VJ),fe(6,qJ,2,1,"span",13),oe(),fe(7,jJ,5,4,"div",14),oe()),t&2){let n=F();V(2),Ue(n.migration.title),V(2),tt(n.migration.logos),V(2),pe(n.migration.moreText?6:-1),V(),pe(n.migration.action?7:-1)}}function YJ(t,e){if(t&1&&(ne(0,"div",0),fe(1,BJ,1,1,"img",1)(2,HJ,1,0,"i",2),ne(3,"h2",3),Y(4),oe(),ne(5,"p",4),Y(6),oe(),fe(7,GJ,3,0,"div",5),fe(8,KJ,8,3,"div",6),oe()),t&2){let n=e;V(),pe(n.imageUrl?1:2),V(3),Ue(n.title),V(2),Ue(n.subtitle),V(),pe(n.actions&&n.actions.length>0?7:-1),V(),pe(n.migration!=null&&n.migration.enabled?8:-1)}}var S_=class t{config=Ee.required();action=gt();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-empty-view"]],inputs:{config:[1,"config"]},outputs:{action:"action"},decls:1,vars:1,consts:[[1,"flex","flex-col","items-center","justify-center","h-full","text-center","p-8"],["alt","",1,"h-40","w-40","mb-6","text-gray-400",3,"src"],[1,"pi","pi-inbox","text-6xl","text-gray-400","mb-6"],[1,"text-2xl","font-semibold","text-gray-800"],[1,"mt-2","max-w-lg","text-gray-600"],[1,"mt-8","flex","items-center","justify-center","gap-4"],[1,"mt-12","p-8","rounded-lg","bg-cyan-50","w-full","max-w-2xl","border","border-cyan-200"],[1,"px-5","py-2.5","text-sm","font-semibold","rounded-md","shadow-sm","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600","flex","items-center",3,"class"],[1,"px-5","py-2.5","text-sm","font-semibold","rounded-md","shadow-sm","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600","flex","items-center",3,"click"],[3,"class"],[1,"font-medium","text-gray-700"],[1,"mt-4","flex","justify-center","items-center","gap-6","flex-wrap"],[1,"h-8","object-contain",3,"src","alt"],[1,"text-sm","text-gray-600"],[1,"mt-8"],[1,"px-8","py-2.5","text-sm","font-semibold","rounded-md","shadow-sm","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-cyan-600","flex","items-center","mx-auto",3,"click"]],template:function(n,i){if(n&1&&fe(0,YJ,9,5,"div",0),n&2){let r;pe((r=i.config())?0:-1,r)}},dependencies:[Ft],encapsulation:2,changeDetection:0})};var gh={user:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" /></svg>',envelope:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" /></svg>',phone:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" /></svg>',lock:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" /></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>',eye:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg>',eyeSlash:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88" /></svg>',calendar:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z" /></svg>',shieldCheck:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-2.104 2.703c-.625.266-1.36.451-2.16.52a25.575 25.575 0 0 1-4.2.067c-.792-.069-1.518-.254-2.128-.52a3.745 3.745 0 0 1-2.115-2.737c-.632-.586-1.059-1.487-1.059-2.398 0-3.351 1.956-6.305 4.965-7.74a1.8 1.8 0 0 1 1.623 0A10.25 10.25 0 0 1 12 6.75a10.25 10.25 0 0 1 5.378-2.673 1.8 1.8 0 0 1 1.623 0c3.009 1.435 4.965 4.39 4.965 7.74 0 .911-.427 1.812-1.059 2.398Z" /></svg>',checkCircle:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>',briefcase:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 2.25 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z" /></svg>',documentText:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" /></svg>',cog:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 0 1 0 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 0 1 0-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg>',trash:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" /></svg>',plus:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>',bold:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 4.5h7.125c3.314 0 6 2.686 6 6 0 1.956-.935 3.69-2.39 4.79C18.935 16.31 19.875 18.044 19.875 20c0 3.314-2.686 6-6 6H6.75A.75.75 0 0 1 6 25.25v-20a.75.75 0 0 1 .75-.75Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 14.25h5.625c1.657 0 3 1.343 3 3s-1.343 3-3 3H6.75v-6Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 6h5.625c1.657 0 3 1.343 3 3s-1.343 3-3 3H6.75v-6Z" /></svg>',italic:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M5.25 4.5h3.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75H6.557l4.606 10.5h1.587a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75H8.25a.75.75 0 0 1-.75-.75v-.75a.75.75 0 0 1 .75-.75h2.443L6.087 6H4.5a.75.75 0 0 1-.75-.75v-.75a.75.75 0 0 1 .75-.75Z" /></svg>',underline:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M17.25 4.5v7.125a5.25 5.25 0 1 1-10.5 0V4.5M3 19.5h18" /></svg>',strikethrough:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z" /></svg>',subscript:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18h2v2h-2zm-3-5l-4 4m0-4l4 4M5 7h8v10H5z" /></svg>',superscript:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M18 6h2v2h-2zm-3 5l-4 4m0-4l4 4M5 17h8V7H5z" /></svg>',fontColor:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.75H14.25L20.25 18H18L16.5 14.25H7.5L6 18H3.75L9.75 3.75ZM8.25 12H15.75L12 5.25L8.25 12Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M3 21H21" stroke="currentColor" stroke-width="3" /></svg>',highlight:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 3.487a2.25 2.25 0 1 1 3.182 3.182L7.394 19.319l-4.144 1.243 1.243-4.144L16.862 3.487Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5h5.25" /></svg>',listBullet:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 17.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" /></svg>',listOrdered:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 12h9.75m-9.75 6h9.75M4.5 6h.75M4.5 12h.75m-1.5 6h1.5" /></svg>',undo:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3" /></svg>',redo:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3" /></svg>',code:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5" /></svg>',inlineCode:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.25 9.75L16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z" /></svg>',alignLeft:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" /></svg>',alignCenter:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>',alignRight:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>',alignJustify:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>',indent:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12m-1.5-5.25 3 3m0 0-3 3m3-3h-7.5" /></svg>',outdent:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12m9-5.25-3 3m0 0 3 3m-3-3h7.5" /></svg>',language:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802" /></svg>',magic:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" /></svg>',layers:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.429 9.75 2.25 12l4.179 2.25m0-4.5 5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0 4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0-5.571 3-5.571-3" /></svg>',tag:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6Z" /></svg>',percent:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" /></svg>',cursor:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59" /></svg>',chevronRight:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" /></svg>'};var JJ={sync:{prime:"pi pi-sync",fontawesome:"fa-solid fa-sync",material:"sync"},spinner:{prime:"pi pi-spin pi-spinner",fontawesome:"fa-solid fa-spinner fa-spin",material:"autorenew"},filter:{prime:"pi pi-filter",fontawesome:"fa-solid fa-filter",material:"filter_list"},tag:{prime:"pi pi-tag",fontawesome:"fa-solid fa-tag",material:"local_offer"},table:{prime:"pi pi-table",fontawesome:"fa-solid fa-table",material:"table_chart"},freeze:{prime:"pi pi-snowflake",fontawesome:"fa-regular fa-snowflake",material:"ac_unit"},columns:{prime:"pi pi-th-large",fontawesome:"fa-solid fa-table-columns",material:"view_column"},database:{prime:"pi pi-database",fontawesome:"fa-solid fa-database",material:"storage"},download:{prime:"pi pi-download",fontawesome:"fa-solid fa-download",material:"download"},eye:{prime:"pi pi-eye",fontawesome:"fa-regular fa-eye",material:"visibility"},sparkles:{prime:"pi pi-sparkles",fontawesome:"fa-solid fa-wand-magic-sparkles",material:"auto_awesome"},add:{prime:"pi pi-plus",fontawesome:"fa-solid fa-plus",material:"add"},search:{prime:"pi pi-search",fontawesome:"fa-solid fa-search",material:"search"},"chevron-down":{prime:"pi pi-chevron-down",fontawesome:"fa-solid fa-chevron-down",material:"expand_more"},calendar:{prime:"pi pi-calendar",fontawesome:"fa-regular fa-calendar",material:"calendar_today"},user:{prime:"pi pi-user",fontawesome:"fa-regular fa-user",material:"person"},check:{prime:"pi pi-check",fontawesome:"fa-solid fa-check",material:"check"},times:{prime:"pi pi-times",fontawesome:"fa-solid fa-times",material:"close"},trash:{prime:"pi pi-trash",fontawesome:"fa-solid fa-trash",material:"delete"},pencil:{prime:"pi pi-pencil",fontawesome:"fa-solid fa-pencil",material:"edit"},refresh:{prime:"pi pi-refresh",fontawesome:"fa-solid fa-rotate",material:"refresh"},home:{prime:"pi pi-home",fontawesome:"fa-solid fa-home",material:"home"},cog:{prime:"pi pi-cog",fontawesome:"fa-solid fa-cog",material:"settings"},envelope:{prime:"pi pi-envelope",fontawesome:"fa-solid fa-envelope",material:"email"},lock:{prime:"pi pi-lock",fontawesome:"fa-solid fa-lock",material:"lock"},folder:{prime:"pi pi-folder",fontawesome:"fa-solid fa-folder",material:"folder"},file:{prime:"pi pi-file",fontawesome:"fa-solid fa-file",material:"description"},list:{prime:"pi pi-list",fontawesome:"fa-solid fa-list",material:"list"},bars:{prime:"pi pi-bars",fontawesome:"fa-solid fa-bars",material:"menu"},"ellipsis-v":{prime:"pi pi-ellipsis-v",fontawesome:"fa-solid fa-ellipsis-vertical",material:"more_vert"},"ellipsis-h":{prime:"pi pi-ellipsis-h",fontawesome:"fa-solid fa-ellipsis",material:"more_horiz"}},vh=class{static getIcon(e,n="prime"){if(!e)return{class:"",type:n};let i=JJ[e];return i?n==="prime"&&i.prime?{class:i.prime,type:"prime"}:n==="fontawesome"&&i.fontawesome?{class:i.fontawesome,type:"fontawesome"}:n==="material"&&i.material?{class:i.material,type:"material"}:n==="svg"&&i.svg?{content:i.svg,type:"svg"}:i.prime?{class:i.prime,type:"prime"}:i.fontawesome?{class:i.fontawesome,type:"fontawesome"}:i.material?{class:i.material,type:"material"}:i.svg?{content:i.svg,type:"svg"}:{class:"",type:n}:n==="svg"&&gh[e]?{content:gh[e],type:"svg"}:{class:"",type:n}}};var QJ=(t,e)=>[t,e];function XJ(t,e){if(t&1&&ke(0,"span",6),t&2){let n=F(2);Zt(n.iconSizeClass()),Ye("innerHTML",n.sanitizedIconHtml(),_r)}}function ZJ(t,e){if(t&1&&ke(0,"i"),t&2){let n=F(),i=F();Zt(n.class+" "+i.fontSizeClass()),mi("font-size",i.customIconSize())}}function eQ(t,e){if(t&1&&fe(0,XJ,1,3,"span",4)(1,ZJ,1,4,"i",5),t&2){let n=e;pe(n.type==="svg"&&n.content?0:n.class?1:-1)}}function tQ(t,e){if(t&1&&(z(0,"span"),Y(1),G()),t&2){let n=F();V(),Ue(n.label())}}function nQ(t,e){if(t&1&&(z(0,"kbd",7),Y(1),G()),t&2){let n=F();Qe("text-[10px]",n.size()==="sm")("text-xs",n.size()!=="sm"),V(),tn(" ",n.shortcut()," ")}}function iQ(t,e){if(t&1&&ke(0,"span",10),t&2){let n=F(2);Qe("rotate-180",n.endIconRotate()),Ye("innerHTML",n.sanitizedEndIconHtml(),_r)}}function rQ(t,e){if(t&1&&ke(0,"i"),t&2){let n=F(),i=F();Zt(n.class),Qe("ml-1",!0)("text-xs",!0)("transition-transform",!0)("rotate-180",i.endIconRotate())}}function oQ(t,e){if(t&1&&fe(0,iQ,1,3,"span",8)(1,rQ,1,10,"i",9),t&2){let n=e;pe(n.type==="svg"&&n.content?0:n.class?1:-1)}}function sQ(t,e){t&1&&ke(0,"div",3)}var D_=class t{icon=Ee();iconClass=Ee();iconName=Ee();iconType=Ee("prime");endIconName=Ee();customSize=Ee();customIconSize=Ee();customColor=Ee();customBgColor=Ee();label=Ee();showLabel=Ee(!0);shortcut=Ee();endIconClass=Ee();endIconRotate=Ee(!1);size=Ee("sm");color=Ee("default");withSeparator=Ee(!1);active=Ee(!1);disabled=Ee(!1);clicked=gt();sanitizer=he(Mp);resolvedIcon=ut(()=>this.iconClass()?{class:this.iconClass(),type:"prime"}:this.iconName()?vh.getIcon(this.iconName(),this.iconType()):this.icon()?{content:gh[this.icon()],type:"svg"}:{class:"",type:"prime"});resolvedEndIcon=ut(()=>this.endIconClass()?{class:this.endIconClass(),type:"prime"}:this.endIconName()?vh.getIcon(this.endIconName(),this.iconType()):null);sanitizedIconHtml=ut(()=>{let e=this.resolvedIcon();if(e.type==="svg"&&e.content){let n=e.content;return n=n.replace(/class="([^"]*)"/,(i,r)=>`class="${r.replace(/w-\d+/,"").replace(/h-\d+/,"")} w-full h-full"`),this.sanitizer.bypassSecurityTrustHtml(n)}return null});sanitizedEndIconHtml=ut(()=>{let e=this.resolvedEndIcon();return e?.type==="svg"&&e.content?this.sanitizer.bypassSecurityTrustHtml(e.content):null});constructor(){}sizeClasses=ut(()=>{if(this.customSize())return"";switch(this.size()){case"lg":return"px-4 py-2 text-sm";case"md":return"px-3 py-1.5 text-xs";case"sm":default:return"px-2 py-1 text-[11px]"}});colorClasses=ut(()=>{if(this.customBgColor())return"";if(this.active())return"bg-indigo-50 border-indigo-200 text-indigo-700 hover:bg-indigo-100 hover:border-indigo-300";switch(this.color()){case"primary":return"bg-indigo-600 border-indigo-600 text-white hover:bg-indigo-700 hover:border-indigo-700";case"danger":return"bg-red-50 border-red-200 text-red-700 hover:bg-red-100 hover:border-red-300";case"default":default:return"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300"}});iconSizeClass=ut(()=>{switch(this.size()){case"lg":return"w-5 h-5";case"md":return"w-4 h-4";case"sm":default:return"w-3.5 h-3.5"}});fontSizeClass=ut(()=>{if(this.customIconSize())return"";switch(this.size()){case"lg":return"text-lg";case"md":return"text-base";case"sm":default:return"text-sm"}});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-toolbar-button"]],inputs:{icon:[1,"icon"],iconClass:[1,"iconClass"],iconName:[1,"iconName"],iconType:[1,"iconType"],endIconName:[1,"endIconName"],customSize:[1,"customSize"],customIconSize:[1,"customIconSize"],customColor:[1,"customColor"],customBgColor:[1,"customBgColor"],label:[1,"label"],showLabel:[1,"showLabel"],shortcut:[1,"shortcut"],endIconClass:[1,"endIconClass"],endIconRotate:[1,"endIconRotate"],size:[1,"size"],color:[1,"color"],withSeparator:[1,"withSeparator"],active:[1,"active"],disabled:[1,"disabled"]},outputs:{clicked:"clicked"},decls:7,vars:25,consts:[[1,"flex","items-center","gap-2"],["type","button",1,"flex","items-center","gap-1.5","rounded","shadow-sm","border","active:scale-95","transition-all","font-medium","select-none","justify-center",3,"click","ngClass","title","disabled"],[1,"hidden","sm:inline-block","ml-1","px-1","py-0.5","leading-none","font-sans","bg-white/50","border","border-black/10","rounded-sm","opacity-60",3,"text-[10px]","text-xs"],[1,"h-5","w-px","bg-gray-300","mx-1"],[3,"innerHTML","class"],[3,"class","fontSize"],[3,"innerHTML"],[1,"hidden","sm:inline-block","ml-1","px-1","py-0.5","leading-none","font-sans","bg-white/50","border","border-black/10","rounded-sm","opacity-60"],[1,"transition-transform","ml-1","w-3","h-3","flex","items-center","justify-center",3,"innerHTML","rotate-180"],[3,"class","ml-1","text-xs","transition-transform","rotate-180"],[1,"transition-transform","ml-1","w-3","h-3","flex","items-center","justify-center",3,"innerHTML"]],template:function(n,i){if(n&1&&(z(0,"div",0)(1,"button",1),Ce("click",function(s){return i.clicked.emit(s)}),fe(2,eQ,2,1),fe(3,tQ,2,1,"span"),fe(4,nQ,2,5,"kbd",2),fe(5,oQ,2,1),G(),fe(6,sQ,1,0,"div",3),G()),n&2){let r,s;V(),mi("width",i.customSize())("height",i.customSize())("color",i.customColor())("background-color",i.customBgColor())("border-color",i.customBgColor()),Qe("opacity-50",i.disabled())("cursor-not-allowed",i.disabled()),Ye("ngClass",hb(22,QJ,i.sizeClasses(),i.colorClasses()))("title",i.label()||"")("disabled",i.disabled()),V(),pe((r=i.resolvedIcon())?2:-1,r),V(),pe(i.label()&&i.showLabel()?3:-1),V(),pe(i.shortcut()?4:-1),V(),pe((s=i.resolvedEndIcon())?5:-1,s),V(),pe(i.withSeparator()?6:-1)}},dependencies:[Ft,bb],encapsulation:2})};var aQ=["scrollContainer"],lQ=()=>[1,2,3,4,5,6],UP=(t,e)=>e.key,cQ=(t,e)=>e.name;function uQ(t,e){if(t&1){let n=Pe();z(0,"app-toolbar-button",40),Ce("clicked",function(){ee(n);let r=F().$implicit,s=F(2);return te(s.handleToolbarAction(r.key))}),G()}if(t&2){let n=F().$implicit,i=F();Ye("iconClass",n.icon)("label",n.label)("showLabel",i.config.toolbarButtonMode!=="iconOnly")("color",n.key==="add:contacts"?"primary":"default")("title",(i.config.toolbarButtonMode==="iconOnly",n.label))}}function dQ(t,e){if(t&1&&fe(0,uQ,1,5,"app-toolbar-button",39),t&2){let n=e.$implicit;pe(n.key!=="toggle:config-sidebar"&&n.key!=="refresh"&&n.key!=="toggle:filter-sidebar"?0:-1)}}function fQ(t,e){t&1&&ke(0,"i",45)}function pQ(t,e){if(t&1){let n=Pe();z(0,"a",48),Ce("click",function(){ee(n);let r=F(3);return r.showAddChipModal.set(!0),te(r.showFilterMenu.set(!1))}),ke(1,"i",49),z(2,"span"),Y(3,"Add Summary Chip"),G()()}}function hQ(t,e){t&1&&ke(0,"i",45)}function mQ(t,e){if(t&1){let n=Pe();z(0,"a",42),Ce("click",function(){ee(n);let r=F(3);return r.showColumnChooser.set(!r.showColumnChooser()),te(r.showFilterMenu.set(!1))}),z(1,"span",43),ke(2,"i",50),Y(3," Columns"),G(),fe(4,hQ,1,0,"i",45),G()}if(t&2){let n=F(3);V(4),pe(n.showColumnChooser()?4:-1)}}function gQ(t,e){if(t&1){let n=Pe();z(0,"div",15)(1,"div",41)(2,"a",42),Ce("click",function(){ee(n);let r=F(2);return r.handleToolbarAction("toggle:filter-sidebar"),te(r.showFilterMenu.set(!1))}),z(3,"span",43),ke(4,"i",44),Y(5," Advanced Filters"),G(),fe(6,fQ,1,0,"i",45),G(),fe(7,pQ,4,0,"a",46),fe(8,mQ,5,1,"a",47),G()()}if(t&2){let n=F(),i=F();V(6),pe(i.showFilterSidebar()?6:-1),V(),pe(n.config.enableChipFilters?7:-1),V(),pe(n.config.enableColumnChooser?8:-1)}}function vQ(t,e){if(t&1){let n=Pe();z(0,"app-column-chooser",51),Ce("visibilityChange",function(r){ee(n);let s=F(2);return te(s.toggleColumnVisibility(r))})("orderChange",function(r){ee(n);let s=F(2);return te(s.handleAllColumnsOrderChange(r))}),G()}if(t&2){let n=F(2);Ye("allColumns",n.chooserColumns())("visibleColumns",n.visibleTableColumns())}}function yQ(t,e){t&1&&ke(0,"div",17)}function _Q(t,e){t&1&&ke(0,"i",45)}function CQ(t,e){if(t&1){let n=Pe();z(0,"a",42),Ce("click",function(){let r=ee(n).$implicit,s=F(4);return s.handleCardsPerRowChange(r),te(s.showCardsPerRowChooser.set(!1))}),z(1,"span"),Y(2),G(),fe(3,_Q,1,0,"i",45),G()}if(t&2){let n=e.$implicit,i=F(3);V(2),Gu("",n," ",n===1?"Card":"Cards"," / row"),V(),pe(((i.config.cardViewConfig==null?null:i.config.cardViewConfig.cardsPerRow)??4)===n?3:-1)}}function xQ(t,e){t&1&&(z(0,"div",53)(1,"div",41),et(2,CQ,4,3,"a",47,xn),G()()),t&2&&(V(2),tt(pa(0,lQ)))}function bQ(t,e){if(t&1){let n=Pe();z(0,"div",13),Ce("clickOutside",function(){ee(n);let r=F(2);return te(r.showCardsPerRowChooser.set(!1))}),z(1,"app-toolbar-button",52),Ce("clicked",function(){ee(n);let r=F(2);return te(r.showCardsPerRowChooser.set(!r.showCardsPerRowChooser()))}),G(),fe(2,xQ,4,1,"div",53),G()}if(t&2){let n=F(),i=F();V(),Ye("label",((n.config.cardViewConfig==null?null:n.config.cardViewConfig.cardsPerRow)??4)+" Cards")("active",i.showCardsPerRowChooser()),V(),pe(i.showCardsPerRowChooser()?2:-1)}}function wQ(t,e){if(t&1){let n=Pe();z(0,"div",20)(1,"div",41)(2,"a",55),Ce("click",function(){ee(n);let r=F(3);return te(r.handleFreezeColumns(0))}),Y(3,"Unfreeze All"),G(),z(4,"a",55),Ce("click",function(){ee(n);let r=F(3);return te(r.handleFreezeColumns(1))}),Y(5,"Freeze 1 Column"),G(),z(6,"a",55),Ce("click",function(){ee(n);let r=F(3);return te(r.handleFreezeColumns(2))}),Y(7,"Freeze 2 Columns"),G(),z(8,"a",55),Ce("click",function(){ee(n);let r=F(3);return te(r.handleFreezeColumns(3))}),Y(9,"Freeze 3 Columns"),G()()()}}function EQ(t,e){if(t&1){let n=Pe();z(0,"div",13),Ce("clickOutside",function(){ee(n);let r=F(2);return te(r.showFreezeOptions.set(!1))}),z(1,"app-toolbar-button",54),Ce("clicked",function(){ee(n);let r=F(2);return te(r.showFreezeOptions.set(!r.showFreezeOptions()))}),G(),fe(2,wQ,10,0,"div",20),G()}if(t&2){let n=F(2);V(),Ye("active",n.showFreezeOptions()),V(),pe(n.showFreezeOptions()?2:-1)}}function SQ(t,e){t&1&&ke(0,"i",45)}function DQ(t,e){if(t&1){let n=Pe();z(0,"a",57),Ce("click",function(){let r=ee(n).$implicit,s=F(3);return s.changeDataStrategy(r),te(s.showStrategyChooser.set(!1))}),z(1,"span"),Y(2),G(),fe(3,SQ,1,0,"i",45),G()}if(t&2){let n=e.$implicit,i=F(2),r=F();Ye("title",r.strategyDescriptions[n]),V(2),Ue(n),V(),pe(i.config.dataStrategy===n?3:-1)}}function TQ(t,e){if(t&1&&(z(0,"div",20)(1,"div",41),et(2,DQ,4,3,"a",56,xn),G()()),t&2){let n=F(2);V(2),tt(n.dataStrategies)}}function IQ(t,e){if(t&1){let n=Pe();z(0,"a",48),Ce("click",function(){let r=ee(n).$implicit,s=F(4);return te(s.handleExport(r.key))}),ke(1,"i"),z(2,"span"),Y(3),G()()}if(t&2){let n=e.$implicit;V(),Zt(n.icon),V(2),Ue(n.label)}}function AQ(t,e){if(t&1&&(z(0,"div",53)(1,"div",41),et(2,IQ,4,3,"a",46,UP),G()()),t&2){let n=F(2);V(2),tt(n.config.exportConfig.options)}}function MQ(t,e){if(t&1){let n=Pe();z(0,"div",13),Ce("clickOutside",function(){ee(n);let r=F(2);return te(r.showExportOptions.set(!1))}),z(1,"app-toolbar-button",58),Ce("clicked",function(){ee(n);let r=F(2);return te(r.showExportOptions.set(!r.showExportOptions()))}),G(),fe(2,AQ,4,0,"div",53),G()}if(t&2){let n=F(2);V(),Ye("endIconRotate",n.showExportOptions())("active",n.showExportOptions()),V(),pe(n.showExportOptions()?2:-1)}}function kQ(t,e){if(t&1){let n=Pe();z(0,"a",48),Ce("click",function(){ee(n);let r=F(3);return r.handleManualSync(),te(r.showViewOptions.set(!1))}),ke(1,"i",69),z(2,"span"),Y(3),G()(),ke(4,"div",62)}if(t&2){let n=F(3);V(),Qe("pi-spin",n.syncService.isSyncing())("pi-spinner",n.syncService.isSyncing())("pi-sync",!n.syncService.isSyncing()),V(2),Ue(n.syncService.isSyncing()?"Syncing...":"Refresh Data")}}function NQ(t,e){if(t&1){let n=Pe();z(0,"button",70),Ce("click",function(){let r=ee(n).$implicit,s=F(3);return te(s.setDensity(r.name))}),ke(1,"i",69),z(2,"span"),Y(3),Si(4,"titlecase"),G()()}if(t&2){let n=e.$implicit,i=F(3);Qe("bg-indigo-50",i.currentDensity()===n.name)("border-indigo-200",i.currentDensity()===n.name)("text-indigo-700",i.currentDensity()===n.name)("border-gray-200",i.currentDensity()!==n.name),V(),Zt(i.getDensityIcon(n.name)),V(2),Ue($u(4,11,n.name))}}function FQ(t,e){t&1&&ke(0,"i",45)}function RQ(t,e){t&1&&ke(0,"i",45)}function PQ(t,e){t&1&&ke(0,"i",45)}function LQ(t,e){t&1&&ke(0,"i",45)}function OQ(t,e){t&1&&ke(0,"i",45)}function VQ(t,e){if(t&1){let n=Pe();z(0,"div",23)(1,"div",41),fe(2,kQ,5,7),z(3,"div",59),Y(4,"Row Sizing"),G(),z(5,"div",60),et(6,NQ,5,13,"button",61,cQ),G(),ke(8,"div",62),z(9,"div",59),Y(10,"View Mode"),G(),z(11,"a",42),Ce("click",function(){ee(n);let r=F(2);return te(r.changeView("table"))}),z(12,"span",43),ke(13,"i",63),Y(14," Table"),G(),fe(15,FQ,1,0,"i",45),G(),z(16,"a",42),Ce("click",function(){ee(n);let r=F(2);return te(r.changeView("card"))}),z(17,"span",43),ke(18,"i",64),Y(19," Card"),G(),fe(20,RQ,1,0,"i",45),G(),z(21,"a",42),Ce("click",function(){ee(n);let r=F(2);return te(r.changeView("list"))}),z(22,"span",43),ke(23,"i",65),Y(24," List"),G(),fe(25,PQ,1,0,"i",45),G(),ke(26,"div",62),z(27,"a",42),Ce("click",function(){ee(n);let r=F(2);return te(r.changeView("bi"))}),z(28,"span",43),ke(29,"i",66),Y(30," BI Dashboard"),G(),fe(31,LQ,1,0,"i",45),G(),z(32,"a",42),Ce("click",function(){ee(n);let r=F(2);return te(r.changeView("calendar"))}),z(33,"span",43),ke(34,"i",67),Y(35," Calendar"),G(),fe(36,OQ,1,0,"i",45),G(),ke(37,"div",62),z(38,"a",48),Ce("click",function(){ee(n);let r=F(2);return te(r.resetViewAndFilters())}),ke(39,"i",68),z(40,"span"),Y(41,"Reset View & Filters"),G()()()()}if(t&2){let n=F(),i=F();V(2),pe(n.config.dataStrategy==="SYNC"?2:-1),V(4),tt(n.config.sizerConfig.densities),V(9),pe(i.viewMode()==="table"?15:-1),V(5),pe(i.viewMode()==="card"?20:-1),V(5),pe(i.viewMode()==="list"?25:-1),V(6),pe(i.viewMode()==="bi"?31:-1),V(5),pe(i.viewMode()==="calendar"?36:-1)}}function BQ(t,e){if(t&1){let n=Pe();z(0,"div",15)(1,"div",41)(2,"a",48),Ce("click",function(){ee(n);let r=F(2);return te(r.handleAiAction("adopt"))}),ke(3,"i",71),z(4,"span"),Y(5,"Auto-Adopt Layout"),G()(),z(6,"a",48),Ce("click",function(){ee(n);let r=F(2);return te(r.handleAiAction("narrate"))}),ke(7,"i",72),z(8,"span"),Y(9,"Generate Narration"),G()(),z(10,"a",48),Ce("click",function(){ee(n);let r=F(2);return te(r.handleAiAction("insights"))}),ke(11,"i",73),z(12,"span"),Y(13,"Suggest Insights"),G()(),z(14,"a",48),Ce("click",function(){ee(n);let r=F(2);return te(r.handleAiAction("metrics"))}),ke(15,"i",74),z(16,"span"),Y(17,"Get Quick Metrics"),G()(),ke(18,"div",62),z(19,"a",48),Ce("click",function(){ee(n);let r=F(2);return r.showUiGallery.set(!0),te(r.showAiActions.set(!1))}),ke(20,"i",75),z(21,"span"),Y(22,"Customize UI..."),G()()()()}}function HQ(t,e){if(t&1){let n=Pe();z(0,"div",25)(1,"app-chip-filter-bar",76),Ce("addChip",function(){ee(n);let r=F(2);return te(r.showAddChipModal.set(!0))})("removeChip",function(r){ee(n);let s=F(2);return te(s.handleRemoveChip(r))})("chipClicked",function(r){ee(n);let s=F(2);return te(s.handleApplyChipFilter(r))}),G()()}if(t&2){let n=F(2);V(),Ye("chips",n.calculatedChips())}}function UQ(t,e){if(t&1){let n=Pe();z(0,"div",26)(1,"app-paginator",77),Ce("pageChange",function(r){ee(n);let s=F(2);return te(s.handlePageChange(r))})("pageSizeChange",function(r){ee(n);let s=F(2);return te(s.handlePageSizeChange(r))})("autoSizingToggle",function(){ee(n);let r=F(2);return te(r.handleAutoSizingToggle())})("chatbotToggle",function(){ee(n);let r=F(2);return te(r.showChatbot.set(!0))}),G()()}if(t&2){let n=F(),i=F();V(),Ye("currentPage",i.currentPage())("pageSize",i.pageSize())("totalRecords",i.totalRecords())("autoSizingEnabled",i.autoSizingEnabled())("infiniteScroll",i.isInfiniteScroll())("infiniteScrollBehavior",n.config.infiniteScrollBehavior??"append")("currentRecordCount",i.data().length)("dataStrategy",n.config.dataStrategy)("connectionStatus",i.connectionStatus())("lastSyncTime",i.syncService.lastSyncTime())("isSyncing",i.syncService.isSyncing())}}function zQ(t,e){if(t&1&&ke(0,"app-table-skeleton-loader",78),t&2){let n=F(3);Ye("columns",n.visibleTableColumns())("rows",n.pageSize())}}function GQ(t,e){if(t&1&&ke(0,"app-card-skeleton-loader",79),t&2){let n=F(3);Ye("count",n.pageSize())}}function $Q(t,e){if(t&1&&ke(0,"app-list-skeleton-loader",79),t&2){let n=F(3);Ye("count",n.pageSize())}}function qQ(t,e){t&1&&(z(0,"div",80),Y(1,"Loading..."),G())}function WQ(t,e){if(t&1&&fe(0,zQ,1,2,"app-table-skeleton-loader",78)(1,GQ,1,1,"app-card-skeleton-loader",79)(2,$Q,1,1,"app-list-skeleton-loader",79)(3,qQ,2,0,"div",80),t&2){let n,i=F(2);pe((n=i.viewMode())==="table"?0:n==="card"?1:n==="list"?2:3)}}function jQ(t,e){if(t&1){let n=Pe();z(0,"app-empty-view",83),Ce("action",function(r){ee(n);let s=F(3);return te(s.handleEmptyStateAction(r))}),G()}if(t&2){let n=F(2);Ye("config",n.config.emptyStateConfig)}}function KQ(t,e){t&1&&(z(0,"div",82),ke(1,"i",84),z(2,"span",85),Y(3,"No Records Found"),G()())}function YQ(t,e){if(t&1&&fe(0,jQ,1,1,"app-empty-view",81)(1,KQ,4,0,"div",82),t&2){let n=F();pe(n.config.emptyStateConfig!=null&&n.config.emptyStateConfig.enabled?0:1)}}function JQ(t,e){if(t&1){let n=Pe();z(0,"app-table-view",89),Ce("sortChange",function(r){ee(n);let s=F(3);return te(s.handleSort(r))})("rowAction",function(r){ee(n);let s=F(3);return te(s.handleRowAction(r))})("rowClicked",function(r){ee(n);let s=F(3);return te(s.handleRowClick(r))})("headerAction",function(r){ee(n);let s=F(3);return te(s.handleHeaderAction(r))})("columnReorder",function(r){ee(n);let s=F(3);return te(s.handleVisibleColumnReorder(r))})("filterChange",function(r){ee(n);let s=F(3);return te(s.handleFilterChange(r))})("selectionChange",function(r){ee(n);let s=F(3);return te(s.handleSelectionChange(r))}),G()}if(t&2){let n=F(2),i=F();Ye("columns",i.visibleTableColumns())("data",i.data())("sortColumn",i.sortColumn())("sortDirection",i.sortDirection())("density",i.currentDensity())("densityClass",i.currentDensitySetting().cssClass)("rowMenuConfig",n.rowMenu)("rowActions",n.rowActions)("headerMenuConfig",n.headerMenu)("enableMultiSelect",n.config.enableMultiSelect??!1)("selectedIds",i.selectedIds())("activeFilters",i.advancedFilters())("customTemplate",i.activeCustomTemplate())("loading",i.loading())("keyboardActiveRowIndex",i.keyboardActiveRowIndex())("pageSize",i.pageSize())("isInfiniteScroll",i.isInfiniteScroll())("stripedRows",n.config.stripedRows??!0)("showGridlines",n.config.showGridlines??!1)("rowHover",n.config.rowHover??!0)("footerConfig",n.config.footerConfig)}}function QQ(t,e){if(t&1){let n=Pe();z(0,"app-card-view",90),Ce("selectionChange",function(r){ee(n);let s=F(3);return te(s.handleSelectionChange(r))})("rowAction",function(r){ee(n);let s=F(3);return te(s.handleRowAction(r))})("rowClicked",function(r){ee(n);let s=F(3);return te(s.handleRowClick(r))}),G()}if(t&2){let n=F(2),i=F();Ye("columns",i.allTableColumns())("data",i.data())("density",i.currentDensity())("densityClass",i.currentDensitySetting().cssClass)("selectedIds",i.selectedIds())("rowMenuConfig",n.rowMenu)("rowActions",n.rowActions)("enableMultiSelect",n.config.enableMultiSelect??!1)("cardViewConfig",n.config.cardViewConfig)("customTemplate",i.activeCustomTemplate())("keyboardActiveRowIndex",i.keyboardActiveRowIndex())}}function XQ(t,e){if(t&1){let n=Pe();z(0,"app-list-view",91),Ce("selectionChange",function(r){ee(n);let s=F(3);return te(s.handleSelectionChange(r))})("rowClicked",function(r){ee(n);let s=F(3);return te(s.handleRowClick(r))}),G()}if(t&2){let n=F(2),i=F();Ye("columns",i.allTableColumns())("data",i.data())("density",i.currentDensity())("densityClass",i.currentDensitySetting().cssClass)("selectedIds",i.selectedIds())("enableMultiSelect",n.config.enableMultiSelect??!1)("customTemplate",i.activeCustomTemplate())("keyboardActiveRowIndex",i.keyboardActiveRowIndex())}}function ZQ(t,e){if(t&1&&ke(0,"app-bi-view",33),t&2){let n=F(3);Ye("data",n.data())("columns",n.allTableColumns())}}function eX(t,e){if(t&1&&ke(0,"app-calendar-view",92),t&2){let n=F(4);Ye("data",n.data())("columns",n.allTableColumns())("config",e)}}function tX(t,e){t&1&&(z(0,"div",93),Y(1,"Please configure the calendar view first by clicking the 'Calendar' view button again."),G())}function nX(t,e){if(t&1&&fe(0,eX,1,3,"app-calendar-view",92)(1,tX,2,0,"div",93),t&2){let n,i=F(3);pe((n=i.activeCalendarConfig())?0:1,n)}}function iX(t,e){if(t&1&&fe(0,JQ,1,21,"app-table-view",86)(1,QQ,1,11,"app-card-view",87)(2,XQ,1,8,"app-list-view",88)(3,ZQ,1,2,"app-bi-view",33)(4,nX,2,1),t&2){let n,i=F(2);pe((n=i.viewMode())==="table"?0:n==="card"?1:n==="list"?2:n==="bi"?3:n==="calendar"?4:-1)}}function rX(t,e){t&1&&(z(0,"div",28),ke(1,"i",94),G())}function oX(t,e){if(t&1){let n=Pe();z(0,"footer",95)(1,"app-paginator",77),Ce("pageChange",function(r){ee(n);let s=F(2);return te(s.handlePageChange(r))})("pageSizeChange",function(r){ee(n);let s=F(2);return te(s.handlePageSizeChange(r))})("autoSizingToggle",function(){ee(n);let r=F(2);return te(r.handleAutoSizingToggle())})("chatbotToggle",function(){ee(n);let r=F(2);return te(r.showChatbot.set(!0))}),G()()}if(t&2){let n=F(),i=F();mi("background-color",n.config.styleConfig==null?null:n.config.styleConfig.footerBackgroundColor),Qe("bg-white",!(n.config.styleConfig!=null&&n.config.styleConfig.footerBackgroundColor)&&!(n.config.styleConfig!=null&&n.config.styleConfig.enableTransparency)),V(),Ye("currentPage",i.currentPage())("pageSize",i.pageSize())("totalRecords",i.totalRecords())("autoSizingEnabled",i.autoSizingEnabled())("infiniteScroll",i.isInfiniteScroll())("infiniteScrollBehavior",n.config.infiniteScrollBehavior??"append")("currentRecordCount",i.data().length)("dataStrategy",n.config.dataStrategy)("connectionStatus",i.connectionStatus())("lastSyncTime",i.syncService.lastSyncTime())("isSyncing",i.syncService.isSyncing())}}function sX(t,e){if(t&1){let n=Pe();z(0,"app-filter-sidebar",96),Ce("close",function(){ee(n);let r=F(2);return te(r.showFilterSidebar.set(!1))})("apply",function(r){ee(n);let s=F(2);return te(s.handleApplyFilters(r))}),G()}if(t&2){let n=F(),i=F();Ye("isOpen",i.showFilterSidebar())("config",n.advancedFilters)("activeFilters",i.advancedFilters())}}function aX(t,e){if(t&1){let n=Pe();z(0,"app-config-sidebar",97),Ce("close",function(){ee(n);let r=F(2);return te(r.showConfigSidebar.set(!1))})("save",function(r){ee(n);let s=F(2);return te(s.handleConfigSave(r))})("resetToDefaults",function(){ee(n);let r=F(2);return te(r.handleConfigReset())}),G()}if(t&2){let n=F(2);Ye("isOpen",n.showConfigSidebar())("config",n.config())}}function lX(t,e){if(t&1){let n=Pe();z(0,"app-ai-chatbot",98),Ce("close",function(){ee(n);let r=F(2);return te(r.showChatbot.set(!1))})("filterApplied",function(r){ee(n);let s=F(2);return te(s.handleAiFilter(r))}),G()}if(t&2){let n=F(2);Ye("data",n.data())("columns",n.allTableColumns())}}function cX(t,e){if(t&1){let n=Pe();z(0,"app-sync-options-modal",99),Ce("close",function(){ee(n);let r=F(2);return te(r.showSyncOptionsModal.set(!1))})("startSync",function(){ee(n);let r=F(2);return te(r.handleStartSync())}),G()}}function uX(t,e){t&1&&(z(0,"div",100),ke(1,"i",102),z(2,"p",103),Y(3,"AI is thinking..."),G()())}function dX(t,e){if(t&1){let n=Pe();z(0,"div",104),Ce("click",function(r){return ee(n),te(r.stopPropagation())}),z(1,"header",105)(2,"h3",106),ke(3,"i",107),Y(4),G(),z(5,"button",108),Ce("click",function(){ee(n);let r=F(3);return te(r.aiModalContent.set(null))}),ke(6,"i",109),G()(),ke(7,"div",110),G()}if(t&2){let n=F(3);V(4),Ue(n.aiModalFormattedContent().title),V(3),Ye("innerHTML",n.aiModalFormattedContent().content,_r)}}function fX(t,e){if(t&1&&(z(0,"div",38),fe(1,uX,4,0,"div",100),fe(2,dX,8,2,"div",101),G()),t&2){let n,i=F(2);V(),pe(i.isAiLoading()&&!i.aiModalContent()?1:-1),V(),pe((n=i.aiModalContent())?2:-1,n)}}function pX(t,e){if(t&1&&(z(0,"div",38)(1,"div",100),ke(2,"i",102),z(3,"p",103),Y(4),G()()()),t&2){let n=F(2);V(4),Ue(n.exportingMessage())}}function hX(t,e){if(t&1){let n=Pe();z(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4)(4,"h1",5),Y(5),G(),z(6,"div",6),Y(7),G()(),z(8,"div",7)(9,"div",8)(10,"div",9),ke(11,"i",10),G(),z(12,"input",11),Ce("input",function(r){ee(n);let s=F();return te(s.onGlobalSearch(r))}),G()()(),z(13,"div",12),et(14,dQ,1,1,null,null,UP),z(16,"div",13),Ce("clickOutside",function(){ee(n);let r=F();return te(r.showFilterMenu.set(!1))}),z(17,"app-toolbar-button",14),Ce("clicked",function(){ee(n);let r=F();return te(r.showFilterMenu.set(!r.showFilterMenu()))}),G(),fe(18,gQ,9,3,"div",15),fe(19,vQ,1,2,"app-column-chooser",16),G(),fe(20,yQ,1,0,"div",17),fe(21,bQ,3,3,"div",18),fe(22,EQ,3,2,"div",18),z(23,"div",13),Ce("clickOutside",function(){ee(n);let r=F();return te(r.showStrategyChooser.set(!1))}),z(24,"app-toolbar-button",19),Ce("clicked",function(){ee(n);let r=F();return te(r.showStrategyChooser.set(!r.showStrategyChooser()))}),G(),fe(25,TQ,4,0,"div",20),G(),fe(26,MQ,3,3,"div",18),z(27,"app-toolbar-button",21),Ce("clicked",function(){ee(n);let r=F();return te(r.showConfigSidebar.set(!0))}),G(),z(28,"div",13),Ce("clickOutside",function(){ee(n);let r=F();return te(r.showViewOptions.set(!1))}),z(29,"app-toolbar-button",22),Ce("clicked",function(){ee(n);let r=F();return te(r.showViewOptions.set(!r.showViewOptions()))}),G(),fe(30,VQ,42,6,"div",23),G(),z(31,"div",13),Ce("clickOutside",function(){ee(n);let r=F();return te(r.showAiActions.set(!1))}),z(32,"app-toolbar-button",24),Ce("clicked",function(){ee(n);let r=F();return te(r.showAiActions.set(!r.showAiActions()))}),G(),fe(33,BQ,23,0,"div",15),G()()(),fe(34,HQ,2,1,"div",25),G(),fe(35,UQ,2,11,"div",26),z(36,"main",27,0),Ce("scroll",function(r){ee(n);let s=F();return te(s.onContentScroll(r))})("keydown",function(r){ee(n);let s=F();return te(s.handleContentKeydown(r))}),fe(38,WQ,4,1)(39,YQ,2,1)(40,iX,5,1),fe(41,rX,2,0,"div",28),G(),fe(42,oX,2,15,"footer",29),G(),fe(43,sX,1,3,"app-filter-sidebar",30),fe(44,aX,1,2,"app-config-sidebar",31),z(45,"app-theme-settings",32),Ce("close",function(){ee(n);let r=F();return te(r.showThemeSettings.set(!1))}),G(),fe(46,lX,1,2,"app-ai-chatbot",33),z(47,"app-save-query-modal",34),Ce("close",function(){ee(n);let r=F();return te(r.showSaveQueryModal.set(!1))})("save",function(r){ee(n);let s=F();return te(s.handleSaveQuery(r))}),G(),z(48,"app-ui-gallery",35),Ce("close",function(){ee(n);let r=F();return te(r.showUiGallery.set(!1))})("applyLayout",function(r){ee(n);let s=F();return te(s.handleApplyLayout(r))})("deleteLayout",function(r){ee(n);let s=F();return te(s.handleDeleteLayout(r))})("generateLayout",function(r){ee(n);let s=F();return te(s.handleGenerateLayout(r))}),G(),z(49,"app-calendar-config-modal",36),Ce("close",function(){ee(n);let r=F();return te(r.showCalendarConfigModal.set(!1))})("apply",function(r){ee(n);let s=F();return te(s.handleApplyCalendarConfig(r))}),G(),fe(50,cX,1,0,"app-sync-options-modal"),z(51,"app-add-chip-modal",37),Ce("close",function(){ee(n);let r=F();return te(r.showAddChipModal.set(!1))})("addChip",function(r){ee(n);let s=F();return te(s.handleAddChip(r))}),G(),fe(52,fX,3,2,"div",38),fe(53,pX,5,1,"div",38)}if(t&2){let n=e,i=F();mi("background-image",n.config.styleConfig!=null&&n.config.styleConfig.backgroundImageUrl?"url("+(n.config.styleConfig==null?null:n.config.styleConfig.backgroundImageUrl)+")":null)("background-size","cover")("background-position","center"),Qe("bg-white",!(n.config.styleConfig!=null&&n.config.styleConfig.enableTransparency))("bg-transparent",n.config.styleConfig==null?null:n.config.styleConfig.enableTransparency),V(),mi("background-color",n.config.styleConfig==null?null:n.config.styleConfig.headerBackgroundColor),Qe("bg-white",!(n.config.styleConfig!=null&&n.config.styleConfig.headerBackgroundColor)&&!(n.config.styleConfig!=null&&n.config.styleConfig.enableTransparency)),V(4),Ue(n.config.title),V(2),tn(" ",i.totalRecords()," "),V(5),Ye("value",i.globalFilterTerm()),V(2),tt(n.config.toolbarActions),V(3),Ye("endIconRotate",i.showFilterMenu())("active",i.showFilterMenu()||i.showFilterSidebar()||i.showColumnChooser()),V(),pe(i.showFilterMenu()?18:-1),V(),pe(i.showColumnChooser()?19:-1),V(),pe(n.config.enableChipFilters?-1:20),V(),pe(i.viewMode()==="card"?21:-1),V(),pe(i.viewMode()==="table"&&n.config.enableFreeze?22:-1),V(2),Ye("label",n.config.dataStrategy)("endIconRotate",i.showStrategyChooser())("title","Current Data Strategy: "+n.config.dataStrategy),V(),pe(i.showStrategyChooser()?25:-1),V(),pe(n.config.exportConfig!=null&&n.config.exportConfig.enabled?26:-1),V(),Ye("active",i.showConfigSidebar()),V(2),Ye("endIconRotate",i.showViewOptions())("active",i.showViewOptions()),V(),pe(i.showViewOptions()?30:-1),V(2),Ye("active",i.showAiActions()),V(),pe(i.showAiActions()?33:-1),V(),pe(n.config.enableChipFilters&&i.calculatedChips().length>0?34:-1),V(),pe(!i.isInfiniteScroll()&&(n.config.paginatorPosition==="top"||n.config.paginatorPosition==="both")?35:-1),V(3),pe(i.loading()&&i.data().length===0?38:i.data().length===0?39:40),V(3),pe(i.isInfiniteScroll()&&i.loading()&&i.data().length>0?41:-1),V(),pe(!i.isInfiniteScroll()&&(n.config.paginatorPosition==="bottom"||n.config.paginatorPosition==="both"||!n.config.paginatorPosition)?42:-1),V(),pe(i.showFilterSidebar()?43:-1),V(),pe(i.showConfigSidebar()?44:-1),V(),Ye("isOpen",i.showThemeSettings()),V(),pe(i.showChatbot()?46:-1),V(),Ye("isOpen",i.showSaveQueryModal()),V(),Ye("isOpen",i.showUiGallery())("layouts",i.customLayouts())("currentView",i.viewMode())("activeLayouts",i.activeLayouts()),V(),Ye("isOpen",i.showCalendarConfigModal())("dateColumns",i.dateColumns()),V(),pe(i.showSyncOptionsModal()?50:-1),V(),Ye("isOpen",i.showAddChipModal())("columns",i.allTableColumns()),V(),pe(i.isAiLoading()||i.aiModalContent()?52:-1),V(),pe(i.isExporting()?53:-1)}}var HP=class t{configService=he(Oi);dataManager=he(n_);syncService=he(s_);connectionStatusService=he(yl);persistenceService=he(Mo);savedQueriesService=he(c_);customLayoutService=he(d_);themeService=he(Dd);densityService=he(Sd);aiSummaryService=he(gd);aiLayoutService=he(Ed);chipFilterService=he(y_);exportService=he(E_);config=this.configService.config;data=xe([]);totalRecords=xe(0);loading=xe(!0);showAiActions=xe(!1);isAiLoading=xe(!1);aiModalContent=xe(null);showChatbot=xe(!1);showSavedQueriesMenu=xe(!1);showSaveQueryModal=xe(!1);savedQueries=xe([]);showUiGallery=xe(!1);customLayouts=xe([]);activeLayouts;showCalendarConfigModal=xe(!1);activeCalendarConfig=xe(null);showSyncOptionsModal=xe(!1);showAddChipModal=xe(!1);chips=this.chipFilterService.chips;showExportOptions=xe(!1);isExporting=xe(!1);exportingMessage=xe("");isMobile=xe(window.innerWidth<640);viewMode;currentPage;pageSize;sortColumn;sortDirection;globalFilterTerm;advancedFilters;showFilterSidebar=xe(!1);showConfigSidebar=xe(!1);showThemeSettings=xe(!1);showFreezeOptions=xe(!1);showColumnChooser=xe(!1);showCardsPerRowChooser=xe(!1);showViewOptions=xe(!1);showFilterMenu=xe(!1);showMobileActionsMenu=xe(!1);allTableColumns=xe([]);visibleTableColumns=xe([]);scrollContainer=j0("scrollContainer");autoSizingEnabled=xe(this.config().config.sizerConfig.enabled);currentDensity=this.densityService.density;currentDensitySetting=ut(()=>{let e=this.currentDensity(),n=this.config().config.sizerConfig;return n.densities.find(i=>i.name===e)??n.densities[1]});keyboardActiveRowIndex=xe(null);selectionAnchorIndex=xe(null);keyboardManager=new b_;postFetchFocus=xe(null);showStrategyChooser=xe(!1);dataStrategies=["SYNC","ONLINE_FIRST","OFFLINE_FIRST","HYBRID"];strategyDescriptions={SYNC:"Fast, offline access. Data is synced with the server in the background.",ONLINE_FIRST:"Always fetches the latest data from the server. Falls back to local data if the server is unavailable.",OFFLINE_FIRST:"Loads instantly from your device. May not be the absolute latest data.",HYBRID:"Fetches latest data and updates your device for offline use. Falls back to local data if the server is unavailable."};isInfiniteScroll=ut(()=>this.config().config.pagingMode==="infinite");totalPages=ut(()=>{let e=this.totalRecords(),n=this.pageSize();return n<=0?0:Math.ceil(e/n)});allDataLoaded=ut(()=>{let e=this.totalRecords();return e===0&&this.data().length>0?!1:e===0?!0:(this.config().config.infiniteScrollBehavior??"append")==="append"?this.data().length>=e:this.currentPage()>=this.totalPages()});chooserColumns=ut(()=>this.allTableColumns().filter(e=>e.showOnColumnChooser!==!1));dateColumns=ut(()=>this.allTableColumns().filter(e=>e.columnType==="DATE"));connectionStatus=ut(()=>{switch(this.connectionStatusService.status()){case"Online":return{text:"Online",class:"bg-green-500"};case"Connecting":return{text:"Connecting...",class:"bg-yellow-500 animate-pulse"};case"Offline":return{text:"Offline",class:"bg-red-500"};default:return{text:"Unknown",class:"bg-gray-500"}}});aiModalFormattedContent=ut(()=>{let e=this.aiModalContent();if(!e||!e.content)return{title:"",content:""};let n=e.content;return n=n.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),n.match(/^\* .*/m)&&(n="<ul>"+n.replace(/^\* (.*)$/gm,'<li class="ml-4 list-disc">$1</li>')+"</ul>"),{title:e.title,content:n}});activeCustomTemplate=ut(()=>{let e=this.customLayouts(),n=this.activeLayouts(),i=this.viewMode(),r=null;if(i==="card"&&(r=n.card),i==="list"&&(r=n.list),i==="table"&&(r=n.table),!r)return null;let s=e.find(a=>a.id===r);return s?s.htmlTemplate:null});calculatedChips=ut(()=>{let e=this.data(),n=this.chips();if(e.length===0||n.length===0)return[];let i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),r=new Intl.NumberFormat("en-US");return n.map(s=>{let a,c,u=e;switch(s.aggregation==="count"&&s.filterValue&&(u=e.filter(p=>String(p[s.columnCode]).toLowerCase()===String(s.filterValue).toLowerCase())),s.aggregation){case"count":a=u.length,c=r.format(a);break;case"sum":a=u.reduce((m,C)=>m+(Number(C[s.columnCode])||0),0),c=i.format(a);break;case"average":let p=u.reduce((m,C)=>m+(Number(C[s.columnCode])||0),0);a=u.length>0?p/u.length:0,c=i.format(a);break;default:a=0,c="N/A"}return Ht(xt({},s),{displayValue:c})})});searchSubject=new ji;lastFocusedElementId=xe(null);initialFetchDone=xe(!1);initialState;selectedIds=xe(new Set);constructor(){this.initialState={viewMode:this.isMobile()?"card":"table",currentPage:1,pageSize:this.config().api.defaultPageSize,sortColumn:"organization_name",sortDirection:"asc",globalFilterTerm:"",advancedFilters:{},activeLayouts:{card:null,list:null,table:null}};let e=this.persistenceService.loadState("smartTableState");this.viewMode=xe(e?.viewMode??this.initialState.viewMode),this.currentPage=xe(e?.currentPage??this.initialState.currentPage),this.pageSize=xe(e?.pageSize??this.initialState.pageSize),this.sortColumn=xe(e?.sortColumn??this.initialState.sortColumn),this.sortDirection=xe(e?.sortDirection??this.initialState.sortDirection),this.globalFilterTerm=xe(e?.globalFilterTerm??this.initialState.globalFilterTerm),this.advancedFilters=xe(e?.advancedFilters??this.initialState.advancedFilters),this.activeLayouts=xe(e?.activeLayouts??this.initialState.activeLayouts),this.loadSavedQueries(),this.loadCustomLayouts();let n=()=>{this.loading.set(!0);let r=this.currentPage();if(this.isInfiniteScroll()&&this.config().config.infiniteScrollBehavior==="append"&&r>1)this.fetchPagesSequentially(r).then(()=>{this.initialFetchDone.set(!0)});else{let s=this.isInfiniteScroll()&&this.config().config.infiniteScrollBehavior==="replace"?1:r;this.isInfiniteScroll()&&this.config().config.infiniteScrollBehavior==="replace"&&this.currentPage.set(1),this.fetchPage(s),this.initialFetchDone.set(!0)}};ln(()=>{this.config().config.dataStrategy==="SYNC"&&this.syncService.isPrimed()&&!this.initialFetchDone()&&(n(),this.showSyncOptionsModal()&&setTimeout(()=>this.showSyncOptionsModal.set(!1),500))},{allowSignalWrites:!0}),this.config().config.dataStrategy==="SYNC"?this.syncService.isPrimed()?n():(this.showSyncOptionsModal.set(!0),this.loading.set(!1)):n(),ln(()=>{let r=[...this.config().columns].sort((c,u)=>c.index-u.index);this.allTableColumns.set(r);let s=r.filter(c=>c.display==="table_cell").map(c=>c.code),a=new Set(e?.visibleColumnCodes??s);this.visibleTableColumns.set(r.filter(c=>a.has(c.code)))},{allowSignalWrites:!0}),this.searchSubject.pipe(kf(400),Nf()).subscribe(r=>{this.globalFilterTerm.set(r),this.resetAndFetch()}),ln(()=>{let r=this.loading(),s=this.lastFocusedElementId();!r&&s&&setTimeout(()=>{let a=document.getElementById(s);a&&(a.focus(),a instanceof HTMLInputElement&&a.select()),this.lastFocusedElementId.set(null)},0)}),ln(r=>{let s=this.currentDensity(),a=this.config().config.sizerConfig,c=()=>{if(this.isMobile.set(window.innerWidth<640),this.autoSizingEnabled()){let u=this.scrollContainer()?.nativeElement;if(u){let m=(a.densities.find(E=>E.name===s)??a.densities[1]).rowHeight,C=a.additionalReservedSpace??0,x=JE(u,m,C);x!==this.pageSize()&&(this.pageSize.set(x),this.resetAndFetch())}}};window.addEventListener("resize",c),setTimeout(()=>c(),50),r(()=>window.removeEventListener("resize",c))},{allowSignalWrites:!0}),this.setupStatePersistence()}setupStatePersistence(){ln(()=>{let e={viewMode:this.viewMode(),currentPage:this.currentPage(),pageSize:this.pageSize(),sortColumn:this.sortColumn(),sortDirection:this.sortDirection(),globalFilterTerm:this.globalFilterTerm(),advancedFilters:this.advancedFilters(),visibleColumnCodes:this.visibleTableColumns().map(n=>n.code),activeLayouts:this.activeLayouts()};this.persistenceService.saveState("smartTableState",e)})}resetViewAndFilters(){this.persistenceService.clearState("smartTableState"),this.densityService.setDensity(this.config().config.sizerConfig.defaultDensity),this.viewMode.set(this.initialState.viewMode),this.currentPage.set(this.initialState.currentPage),this.pageSize.set(this.initialState.pageSize),this.sortColumn.set(this.initialState.sortColumn),this.sortDirection.set(this.initialState.sortDirection),this.globalFilterTerm.set(""),this.advancedFilters.set(this.initialState.advancedFilters),this.visibleTableColumns.set(this.allTableColumns().filter(e=>e.display==="table_cell")),this.activeLayouts.set(this.initialState.activeLayouts),this.showViewOptions.set(!1),this.resetAndFetch()}async handleAiAction(e){this.showAiActions.set(!1),this.isAiLoading.set(!0);try{switch(e){case"narrate":let n=await this.aiSummaryService.generateNarration(this.data(),this.allTableColumns());this.aiModalContent.set({title:"Data Narration",content:n});break;case"insights":let i=await this.aiSummaryService.suggestInsights(this.data(),this.allTableColumns());this.aiModalContent.set({title:"Suggested Insights",content:i});break;case"adopt":let r=await this.aiLayoutService.getAutoAdoptedConfig(this.config(),window.innerWidth);this.configService.updateFullConfig(r);break;case"metrics":let s=await this.aiSummaryService.getQuickMetrics(this.data(),this.allTableColumns());this.aiModalContent.set({title:"Key Metrics",content:s});break}}catch(n){console.error(`AI Action '${e}' failed:`,n),this.aiModalContent.set({title:"Error",content:"An error occurred while processing the AI request."})}finally{this.isAiLoading.set(!1)}}handleAiFilter(e){if(e.globalSearch)this.globalFilterTerm.set(e.globalSearch),this.advancedFilters.set({});else if(e.advancedFilters&&e.advancedFilters.length>0){let n={};for(let i of e.advancedFilters)n[i.code]=i;this.advancedFilters.set(n),this.globalFilterTerm.set("")}this.resetAndFetch()}loadSavedQueries(){this.savedQueriesService.getSavedQueries().subscribe(e=>{this.savedQueries.set(e)})}openSaveQueryModal(){this.showSavedQueriesMenu.set(!1),this.showSaveQueryModal.set(!0)}handleSaveQuery(e){this.showSaveQueryModal.set(!1);let n={globalFilterTerm:this.globalFilterTerm(),advancedFilters:this.advancedFilters(),sortColumn:this.sortColumn(),sortDirection:this.sortDirection()};this.savedQueriesService.saveQuery(e,n).subscribe(()=>{this.loadSavedQueries()})}handleApplySavedQuery(e){this.showSavedQueriesMenu.set(!1);let n=this.savedQueries().find(i=>i.id===e);if(n){let i=n.state;this.globalFilterTerm.set(i.globalFilterTerm??this.initialState.globalFilterTerm),this.advancedFilters.set(i.advancedFilters??this.initialState.advancedFilters),this.sortColumn.set(i.sortColumn??this.initialState.sortColumn),this.sortDirection.set(i.sortDirection??this.initialState.sortDirection),this.resetAndFetch()}}handleDeleteSavedQuery(e){this.savedQueriesService.deleteQuery(e).subscribe(()=>{this.loadSavedQueries()})}loadCustomLayouts(){this.customLayoutService.getLayouts().subscribe(e=>{this.customLayouts.set(e)})}async handleGenerateLayout(e){this.isAiLoading.set(!0);try{let n=await this.aiLayoutService.generateLayout(e.prompt,e.targetView,this.allTableColumns());this.customLayoutService.saveLayout({name:e.name,targetView:e.targetView,htmlTemplate:n.htmlTemplate}).subscribe(()=>{this.loadCustomLayouts()})}catch(n){console.error("AI layout generation failed:",n),this.aiModalContent.set({title:"Layout Generation Error",content:"An error occurred while generating the layout."})}finally{this.isAiLoading.set(!1)}}handleApplyLayout(e){let{view:n,layoutId:i}=e;this.activeLayouts.update(r=>{let s=xt({},r);return n==="card"&&(s.card=i),n==="list"&&(s.list=i),n==="table"&&(s.table=i),s})}handleDeleteLayout(e){this.customLayoutService.deleteLayout(e).subscribe(()=>{this.loadCustomLayouts()})}handleAddChip(e){this.chipFilterService.addChip(e),this.showAddChipModal.set(!1)}handleRemoveChip(e){this.chipFilterService.removeChip(e)}handleApplyChipFilter(e){let n=this.allTableColumns().find(r=>r.code===e.columnCode);if(!n||!e.filterValue)return;let i={code:e.columnCode,name:n.name,type:"select",operator:"=",value1:e.filterValue};this.advancedFilters.set({[i.code]:i}),this.resetAndFetch()}setDensity(e){this.densityService.setDensity(e)}getDensityIcon(e){switch(e){case"comfortable":return"pi-align-justify";case"cozy":return"pi-bars";case"compact":return"pi-table";case"ultra-compact":return"pi-compress";default:return"pi-table"}}handleFreezeColumns(e){this.showFreezeOptions.set(!1);let n=this.config(),i=JSON.parse(JSON.stringify(n)),r=this.visibleTableColumns().map(s=>s.code);i.columns.forEach(s=>{let a=r.indexOf(s.code);a!==-1?s.frozen=a<e:s.frozen=!1}),this.configService.updateFullConfig(i)}checkAndFetchForFill(){setTimeout(()=>{let e=this.config().config;if(e.pagingMode!=="infinite"||e.infiniteScrollBehavior!=="append")return;let n=this.scrollContainer()?.nativeElement;n&&!this.allDataLoaded()&&n.scrollHeight<=n.clientHeight&&(this.loading()||this.fetchMoreData())},100)}async fetchPagesSequentially(e){if(e<1){this.loading.set(!1);return}this.loading.set(!0),this.currentPage.set(0),this.data.set([]);try{for(let n=1;n<=e;n++)await this.fetchAndAppendPage(n)}catch{}finally{this.loading.set(!1),this.checkAndFetchForFill()}}fetchAndAppendPage(e){return new Promise((n,i)=>{let r=hh(e,this.pageSize(),this.sortColumn(),this.sortDirection(),this.globalFilterTerm(),this.advancedFilters(),this.config().columns);this.dataManager.getData(r).subscribe({next:s=>{this.data.update(a=>[...a,...s.data]),this.totalRecords.set(s.total_records),this.currentPage.set(e),n()},error:s=>{console.error(`Failed to fetch page ${e}`,s),this.loading.set(!1),i(s)}})})}fetchPage(e){if(e<1)return;this.loading.set(!0);let n=hh(e,this.pageSize(),this.sortColumn(),this.sortDirection(),this.globalFilterTerm(),this.advancedFilters(),this.config().columns);this.dataManager.getData(n).subscribe({next:i=>{this.data.set(i.data),this.totalRecords.set(i.total_records),this.currentPage.set(e),this.loading.set(!1),this.checkAndFetchForFill();let r=this.postFetchFocus(),s=this.data();if(r==="first"&&s.length>0)this.keyboardActiveRowIndex.set(0),this.scrollActiveItemIntoView(s[0].organization_id);else if(r==="last"&&s.length>0){let a=s.length-1;this.keyboardActiveRowIndex.set(a),this.scrollActiveItemIntoView(s[a].organization_id)}else this.keyboardActiveRowIndex.set(null);this.postFetchFocus.set(null)},error:i=>{console.error("Failed to fetch data",i),this.loading.set(!1)}})}fetchMoreData(){if(this.loading()||!this.isInfiniteScroll()||this.allDataLoaded())return;this.loading.set(!0);let e=this.currentPage()+1,n=hh(e,this.pageSize(),this.sortColumn(),this.sortDirection(),this.globalFilterTerm(),this.advancedFilters(),this.config().columns),i=this.config().config.infiniteScrollBehavior??"append";this.dataManager.getData(n).subscribe({next:r=>{i==="append"?this.data.update(s=>[...s,...r.data]):(this.data.set(r.data),this.scrollContainer()?.nativeElement.scrollTo({top:0,behavior:"smooth"})),this.totalRecords.set(r.total_records),this.currentPage.set(e),this.loading.set(!1),this.checkAndFetchForFill()},error:r=>{console.error("Failed to fetch more data",r),this.loading.set(!1)}})}resetAndFetch(){this.currentPage.set(1),this.keyboardActiveRowIndex.set(null),this.selectedIds.set(new Set),this.isInfiniteScroll()&&this.data.set([]),this.fetchPage(1)}handleSort(e){this.sortColumn.set(e.column),this.sortDirection.set(e.direction),this.resetAndFetch()}onGlobalSearch(e){let n=e.target.value;this.searchSubject.next(n)}handleFilterChange(e){this.advancedFilters.update(n=>{let i=xt({},n);return e.filter?i[e.code]=e.filter:delete i[e.code],i}),this.resetAndFetch()}handlePageChange(e){this.isInfiniteScroll()||(this.currentPage.set(e),this.fetchPage(e),this.selectedIds.set(new Set))}onContentScroll(e){if(!this.isInfiniteScroll())return;let n=e.target,i=100,r=n.scrollTop+n.clientHeight,s=n.scrollHeight;r>=s-i&&this.fetchMoreData()}handlePageSizeChange(e){this.pageSize.set(e),this.resetAndFetch()}handleAutoSizingToggle(){if(this.autoSizingEnabled.update(e=>!e),this.autoSizingEnabled()){let e=this.scrollContainer()?.nativeElement;if(e){let n=this.currentDensity(),i=this.config().config.sizerConfig,s=(i.densities.find(u=>u.name===n)??i.densities[1]).rowHeight,a=i.additionalReservedSpace??0,c=JE(e,s,a);c!==this.pageSize()&&(this.pageSize.set(c),this.resetAndFetch())}}}handleApplyFilters(e){this.advancedFilters.set(e),this.resetAndFetch(),this.showFilterSidebar.set(!1)}handleRowClick(e){let n=this.data().findIndex(i=>i.organization_id===e.organization_id);n>-1&&(this.keyboardActiveRowIndex.set(n),this.selectionAnchorIndex.set(n))}handleSelectionChange(e){this.selectedIds.set(e)}toggleSelectionByIndex(e){if(e<0||e>=this.data().length)return;let n=this.data()[e].organization_id,i=new Set(this.selectedIds());i.has(n)?i.delete(n):i.add(n),this.selectedIds.set(i)}changeView(e){if(e==="calendar"&&!this.activeCalendarConfig()){this.showCalendarConfigModal.set(!0);return}this.viewMode.set(e),this.showViewOptions.set(!1)}toggleColumnVisibility(e){this.visibleTableColumns.update(n=>{if(n.some(r=>r.code===e.code))return n.filter(r=>r.code!==e.code);{let r=[];for(let s of this.allTableColumns())(n.some(a=>a.code===s.code)||s.code===e.code)&&r.push(s);return r}})}handleVisibleColumnReorder(e){this.visibleTableColumns.set(e)}handleAllColumnsOrderChange(e){this.allTableColumns.set(e),this.visibleTableColumns.update(n=>{let i=new Set(n.map(r=>r.code));return e.filter(r=>i.has(r.code))})}handleRowAction(e){let{action:n,row:i}=e,r=i.communication_detail?.replace(/\D/g,"");switch(n){case"call":r&&(window.location.href=`tel:${r}`);break;case"whatsapp":r&&window.open(`https://wa.me/${r}`,"_blank");break;case"email":i.email_id&&(window.location.href=`mailto:${i.email_id}`);break;case"sms":r&&(window.location.href=`sms:${r}`);break;default:console.log("Unhandled row action:",n,"on row:",i);break}}handleHeaderAction(e){console.log("Header action:",e.action,"on IDs:",e.selectedIds)}handleToolbarAction(e){switch(e){case"refresh":this.resetAndFetch();break;case"toggle:filter-sidebar":this.showFilterSidebar.update(n=>!n);break;case"toggle:config-sidebar":this.showConfigSidebar.update(n=>!n);break;case"toggle:theme-settings":this.showThemeSettings.update(n=>!n);break;case"add:contacts":console.log("Add new contact clicked");break;default:console.log("Toolbar action:",e)}}handleEmptyStateAction(e){console.log("Empty state action triggered:",e),this.handleToolbarAction(e)}handleConfigSave(e){this.configService.updateFullConfig(e),this.showConfigSidebar.set(!1)}handleConfigReset(){this.configService.resetToDefaults(),this.showConfigSidebar.set(!1)}handleCardsPerRowChange(e){this.configService.updateCardsPerRow(e)}changeDataStrategy(e){this.showStrategyChooser.set(!1),e==="SYNC"?this.showSyncOptionsModal.set(!0):(this.configService.updateDataStrategy(e),this.initialFetchDone.set(!1),this.resetAndFetch())}handleStartSync(){this.configService.updateDataStrategy("SYNC"),this.initialFetchDone.set(!1),this.syncService.startFullSync()}handleManualSync(){this.syncService.startFullSync()}toggleInfiniteScrollBehavior(){let n=(this.config().config.infiniteScrollBehavior??"append")==="append"?"replace":"append";this.configService.updateInfiniteScrollBehavior(n),this.resetAndFetch()}handleApplyCalendarConfig(e){this.activeCalendarConfig.set(e),this.showCalendarConfigModal.set(!1),this.viewMode.set("calendar")}async handleExport(e){this.showExportOptions.set(!1);let n=this.totalRecords();if(n===0){console.warn("No data to export.");return}this.isExporting.set(!0),this.exportingMessage.set(`Fetching all ${n} records for export...`);let i=hh(1,n,this.sortColumn(),this.sortDirection(),this.globalFilterTerm(),this.advancedFilters(),this.config().columns);this.dataManager.getData(i).subscribe({next:r=>{this.exportingMessage.set(`Generating ${e.toUpperCase()} file...`);let s=this.viewMode()==="table"?this.visibleTableColumns():this.allTableColumns();this.exportService.exportData(e,r.data,s,this.config().config.title),setTimeout(()=>{this.isExporting.set(!1),this.exportingMessage.set("")},1e3)},error:r=>{console.error("Failed to fetch data for export:",r),this.exportingMessage.set("Error during export. Please try again."),setTimeout(()=>{this.isExporting.set(!1),this.exportingMessage.set("")},3e3)}})}handleContentKeydown(e){let n=this.data(),i=this.keyboardActiveRowIndex(),r=!this.isInfiniteScroll();if(e.key==="ArrowUp"&&i===0&&r){e.preventDefault();let a=this.currentPage()-1;a>=1&&(this.postFetchFocus.set("last"),this.handlePageChange(a));return}if(e.key==="ArrowDown"&&i===n.length-1&&r){e.preventDefault();let a=this.currentPage()+1;a<=this.totalPages()&&(this.postFetchFocus.set("first"),this.handlePageChange(a));return}this.keyboardManager.updateState(n,i,this.selectedIds(),this.selectionAnchorIndex());let s=this.keyboardManager.handleKeydown(e);if(s){this.keyboardActiveRowIndex.set(s.newActiveIndex),this.selectedIds.set(s.newSelection),this.selectionAnchorIndex.set(s.newAnchorIndex);let a=this.data()[s.newActiveIndex];a&&this.scrollActiveItemIntoView(a.organization_id)}}scrollActiveItemIntoView(e){let n=this.viewMode(),i;switch(n){case"table":i=`table-item-${e}`;break;case"card":i=`card-item-${e}`;break;case"list":i=`list-item-${e}`;break;default:return}setTimeout(()=>{document.getElementById(i)?.scrollIntoView({behavior:"smooth",block:"nearest"})},0)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Nt({type:t,selectors:[["app-smart-table"]],viewQuery:function(n,i){n&1&&zu(i.scrollContainer,aQ,5),n&2&&mp()},hostAttrs:[1,"block","h-full"],decls:1,vars:1,consts:[["scrollContainer",""],[1,"h-full","flex","flex-col","text-sm","transition-colors","duration-300"],[1,"flex-shrink-0","border-b","border-gray-200","shadow-sm","relative","z-40","transition-colors","duration-300"],[1,"flex","flex-nowrap","items-center","justify-between","gap-4","p-2"],[1,"flex","items-center","gap-4","flex-shrink-0","min-w-0"],[1,"text-lg","font-bold","text-gray-900","truncate"],["title","Total Records",1,"px-2","py-0.5","text-xs","font-semibold","rounded-full","bg-indigo-50","text-indigo-700","flex-shrink-0"],["title","Global Search (Alt + G)",1,"flex-1","flex","justify-center","max-w-xl","mx-4","min-w-0"],[1,"relative","w-full"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"pi","pi-search","text-gray-400"],["id","global-search-input","type","search","placeholder","Search...",1,"block","w-full","pl-10","pr-3","py-1.5","border","border-gray-300","rounded-md","leading-5","bg-white","text-gray-900","placeholder-gray-400","focus:outline-none","focus:placeholder-gray-500","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500","text-sm",3,"input","value"],[1,"flex","flex-nowrap","items-center","justify-end","gap-1.5","flex-shrink-0"],[1,"relative",3,"clickOutside"],["iconName","filter","label","Filter","endIconName","chevron-down",3,"clicked","endIconRotate","active"],[1,"origin-top-right","absolute","right-0","mt-2","w-56","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30"],[3,"allColumns","visibleColumns"],[1,"h-6","w-px","bg-gray-300","mx-1"],[1,"relative"],["iconName","database","endIconName","chevron-down",3,"clicked","label","endIconRotate","title"],[1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30"],["iconName","cog","label","Config","title","Table Configuration",3,"clicked","active"],["iconName","eye","label","View","endIconName","chevron-down",3,"clicked","endIconRotate","active"],[1,"origin-top-right","absolute","right-0","mt-2","w-64","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30"],["iconName","sparkles","title","AI Actions","color","primary","size","md",3,"clicked","active"],[1,"p-2","border-t","border-gray-200"],[1,"flex-shrink-0","border-b","border-gray-300"],["tabindex","0",1,"flex-grow","overflow-auto","p-2","outline-none",3,"scroll","keydown"],[1,"flex","justify-center","items-center","py-4"],[1,"flex-shrink-0","border-t","border-gray-300","transition-colors","duration-300",3,"background-color","bg-white"],[3,"isOpen","config","activeFilters"],[3,"isOpen","config"],[3,"close","isOpen"],[3,"data","columns"],[3,"close","save","isOpen"],[3,"close","applyLayout","deleteLayout","generateLayout","isOpen","layouts","currentView","activeLayouts"],[3,"close","apply","isOpen","dateColumns"],[3,"close","addChip","isOpen","columns"],[1,"fixed","inset-0","bg-gray-900/60","flex","items-center","justify-center","z-[70]"],[3,"iconClass","label","showLabel","color","title"],[3,"clicked","iconClass","label","showLabel","color","title"],[1,"py-1"],["href","javascript:void(0)",1,"flex","items-center","justify-between","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],[1,"flex","items-center","gap-3"],[1,"pi","pi-filter"],[1,"pi","pi-check","text-indigo-500"],["href","javascript:void(0)",1,"flex","items-center","gap-3","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100"],["href","javascript:void(0)",1,"flex","items-center","justify-between","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100"],["href","javascript:void(0)",1,"flex","items-center","gap-3","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],[1,"pi","pi-tag"],[1,"pi","pi-columns"],[3,"visibilityChange","orderChange","allColumns","visibleColumns"],["iconName","table","title","Number of cards per row",3,"clicked","label","active"],[1,"origin-top-right","absolute","right-0","mt-2","w-40","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-30"],["iconName","freeze","label","Freeze","title","Freeze columns",3,"clicked","active"],["href","javascript:void(0)",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],["href","javascript:void(0)",1,"flex","items-center","justify-between","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"title"],["href","javascript:void(0)",1,"flex","items-center","justify-between","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click","title"],["iconName","download","label","Export","endIconName","chevron-down",3,"clicked","endIconRotate","active"],[1,"px-4","py-1","text-xs","font-semibold","text-gray-500","uppercase","tracking-wider"],[1,"px-2","pb-2","grid","grid-cols-2","gap-1"],[1,"flex","items-center","justify-center","gap-2","px-2","py-1.5","text-xs","border","rounded","hover:bg-gray-50","transition-colors",3,"bg-indigo-50","border-indigo-200","text-indigo-700","border-gray-200"],[1,"my-1","border-t","border-gray-200"],[1,"pi","pi-table"],[1,"pi","pi-id-card"],[1,"pi","pi-list"],[1,"pi","pi-chart-bar"],[1,"pi","pi-calendar"],[1,"pi","pi-replay","w-4","text-center"],[1,"pi"],[1,"flex","items-center","justify-center","gap-2","px-2","py-1.5","text-xs","border","rounded","hover:bg-gray-50","transition-colors",3,"click"],[1,"pi","pi-desktop","w-4","text-center"],[1,"pi","pi-book","w-4","text-center"],[1,"pi","pi-chart-line","w-4","text-center"],[1,"pi","pi-sort-numeric-down","w-4","text-center"],[1,"pi","pi-palette","w-4","text-center"],[3,"addChip","removeChip","chipClicked","chips"],[3,"pageChange","pageSizeChange","autoSizingToggle","chatbotToggle","currentPage","pageSize","totalRecords","autoSizingEnabled","infiniteScroll","infiniteScrollBehavior","currentRecordCount","dataStrategy","connectionStatus","lastSyncTime","isSyncing"],[3,"columns","rows"],[3,"count"],[1,"text-center","p-8"],[3,"config"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center","text-gray-500"],[3,"action","config"],[1,"pi","pi-inbox","text-5xl","mb-3"],[1,"text-lg"],[3,"columns","data","sortColumn","sortDirection","density","densityClass","rowMenuConfig","rowActions","headerMenuConfig","enableMultiSelect","selectedIds","activeFilters","customTemplate","loading","keyboardActiveRowIndex","pageSize","isInfiniteScroll","stripedRows","showGridlines","rowHover","footerConfig"],[3,"columns","data","density","densityClass","selectedIds","rowMenuConfig","rowActions","enableMultiSelect","cardViewConfig","customTemplate","keyboardActiveRowIndex"],[3,"columns","data","density","densityClass","selectedIds","enableMultiSelect","customTemplate","keyboardActiveRowIndex"],[3,"sortChange","rowAction","rowClicked","headerAction","columnReorder","filterChange","selectionChange","columns","data","sortColumn","sortDirection","density","densityClass","rowMenuConfig","rowActions","headerMenuConfig","enableMultiSelect","selectedIds","activeFilters","customTemplate","loading","keyboardActiveRowIndex","pageSize","isInfiniteScroll","stripedRows","showGridlines","rowHover","footerConfig"],[3,"selectionChange","rowAction","rowClicked","columns","data","density","densityClass","selectedIds","rowMenuConfig","rowActions","enableMultiSelect","cardViewConfig","customTemplate","keyboardActiveRowIndex"],[3,"selectionChange","rowClicked","columns","data","density","densityClass","selectedIds","enableMultiSelect","customTemplate","keyboardActiveRowIndex"],[3,"data","columns","config"],[1,"text-center","p-8","text-gray-500"],[1,"pi","pi-spin","pi-spinner","text-2xl","text-indigo-500"],[1,"flex-shrink-0","border-t","border-gray-300","transition-colors","duration-300"],[3,"close","apply","isOpen","config","activeFilters"],[3,"close","save","resetToDefaults","isOpen","config"],[3,"close","filterApplied","data","columns"],[3,"close","startSync"],[1,"flex","flex-col","items-center","gap-4","bg-white","p-8","rounded-lg","shadow-xl"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","m-4"],[1,"pi","pi-spin","pi-spinner","text-4xl","text-indigo-500"],[1,"text-lg","font-medium","text-gray-800"],[1,"bg-white","rounded-lg","shadow-xl","w-full","max-w-2xl","m-4",3,"click"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","flex","items-center","gap-2"],[1,"pi","pi-sparkles","text-indigo-500"],[1,"p-2","rounded-full","hover:bg-gray-100",3,"click"],[1,"pi","pi-times"],[1,"p-6","prose","max-w-none",3,"innerHTML"]],template:function(n,i){if(n&1&&fe(0,hX,54,56),n&2){let r;pe((r=i.config())?0:-1,r)}},dependencies:[Ft,ov,sv,av,ky,Ny,Fy,Ry,ko,Qy,Xy,Zy,Py,Jy,l_,u_,p_,g_,v_,C_,x_,w_,S_,D_,wp],encapsulation:2,changeDetection:0})};var yh=qa(tv());var T_=class t{isBrowser;SECRET="AVINYA_ERP_2025_SECRET_KEY";constructor(e){this.isBrowser=Rs(e)}encrypt(e){return yh.AES.encrypt(e,this.SECRET).toString()}decrypt(e){try{return yh.AES.decrypt(e,this.SECRET).toString(yh.enc.Utf8)||null}catch{return null}}saveData(e,n){if(!this.isBrowser)return;let i=typeof n=="string"?n:JSON.stringify(n),r=this.encrypt(i);localStorage.setItem(e,r)}getData(e){if(!this.isBrowser)return null;let n=localStorage.getItem(e);if(!n)return null;let i=this.decrypt(n);if(!i)return null;try{return JSON.parse(i)}catch{return i}}removeData(e){this.isBrowser&&localStorage.removeItem(e)}clearData(){this.isBrowser&&localStorage.clear()}static \u0275fac=function(n){return new(n||t)(Dt(Jo))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var I_=class t{unwrapResponse(e){return e&&typeof e=="object"&&"data"in e?e.data:e}handleError(e){console.error("An error occurred:",e);let n="Unknown Error";return e.error instanceof ErrorEvent?n=e.error.message:n=`Error Code: ${e.status}
Message: ${e.message}`,RC(()=>new Error(n))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var Td=class t{http=he(fg);localStorageService=he(T_);apiHelper=he(I_);apiConfig=he(mM);constructor(){}resolveBaseUrl(e){let n=this.apiConfig;switch(e){case"CUSTOMER":return n.CUSTOMER_SERVICE||e;case"INVENTORY":return n.INVENTORY||e;case"CONTACT":return n.CONTACT||e;case"TRAVEL":return n.TRAVEL||e;case"MASTERDATA":return n.MASTERDATA||e;default:return n[e]?n[e]:e||""}}buildHeaders(){return new Ps({"Content-Type":"application/json",session_id:this.localStorageService.getData("sessionId")??"",company_id:this.localStorageService.getData("companyId")??"",work_mode:"Demo"})}buildOptions(e,n){let i;return e instanceof Io?i=e:e&&typeof e=="object"&&(i=new Io({fromObject:e})),{headers:this.buildHeaders(),params:i,body:n,context:new Yu}}request(e,n,i,r){let a=`${this.resolveBaseUrl(e)}${i}`,c=this.buildOptions(r?.params,r?.body);return this.http.request(n,a,c).pipe(ni(u=>this.apiHelper.unwrapResponse(u)),Ka(u=>this.apiHelper.handleError(u)))}getAll(e,n,i){return this.request(e,"GET",i,{params:n})}create(e,n,i){return this.request(e,"POST",i,{body:n})}updatePost(e,n,i){return this.request(e,"POST",i,{body:n})}update(e,n,i){return this.request(e,"PATCH",i,{body:n})}delete(e,n,i){return this.request(e,"DELETE",i,{body:n})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var Id=class t{constructor(e){this.db=e}async addLog(e){return this.db.SyncLog.add(e)}async getPendingLogs(){return this.db.SyncLog.where("status").equals("PENDING").toArray()}async updateStatus(e,n,i){return this.db.SyncLog.update(e,{status:n,errorMessage:i,retryCount:n==="FAILED"?void 0:0})}async clearCompleted(){return this.db.SyncLog.where("status").equals("COMPLETED").delete()}livePendingCount(){return mg(()=>this.db.SyncLog.where("status").equals("PENDING").count())}static \u0275fac=function(n){return new(n||t)(Dt(Ao))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var i_=class t{constructor(e,n){this.offlineRepo=e;this.syncLogRepo=n}ENTITY_TYPE="ROW_CONTACT";configService=he(Oi);http=he(Td);async syncDown(){try{let e={page_number:1,page_size:1e3,search_filters:[],sort_column:[]},n=await ja(this.http.create("CONTACT",e,"/row-contact"));if(n&&n.data){let i=n.data.map(r=>{let s=Rp.toEntity(r);return s.syncStatus="SYNCED",s});await this.offlineRepo.db.RowContact.bulkPut(i),console.log(`Synced ${i.length} contacts from API.`)}}catch(e){console.error("Sync Down failed",e)}}getAll(){let e=Wn(this.offlineRepo.getAll());return e.pipe(Ya(1)).subscribe(n=>{(!n||n.length===0)&&this.syncDown()}),e}async getById(e){return this.offlineRepo.getById(e)}async create(e){let n=Rp.toEntity(e);n.syncStatus="PENDING";let i=await this.offlineRepo.add(n),r={entityType:this.ENTITY_TYPE,entityId:i,operation:"CREATE",data:e,timestamp:Date.now(),status:"PENDING",retryCount:0};return await this.syncLogRepo.addLog(r),i}async update(e,n){if(!await this.offlineRepo.getById(e))throw new Error("Entity not found");await this.offlineRepo.update(e,Ht(xt({},n),{syncStatus:"PENDING",lastModified:Date.now()}));let r={entityType:this.ENTITY_TYPE,entityId:e,operation:"UPDATE",data:n,timestamp:Date.now(),status:"PENDING",retryCount:0};await this.syncLogRepo.addLog(r)}async delete(e){await this.offlineRepo.delete(e);let n={entityType:this.ENTITY_TYPE,entityId:e,operation:"DELETE",data:{rowContactUniqueId:e},timestamp:Date.now(),status:"PENDING",retryCount:0};await this.syncLogRepo.addLog(n)}bulkUpsert(e){let n=e.map(i=>Ht(xt({},i),{syncStatus:"SYNCED",lastModified:Date.now()}));return Wn(this.offlineRepo.db.RowContact.bulkPut(n)).pipe(ni(()=>{}))}getData(e){let{page_number:n,page_size:i,sort_column:r,search_filters:s}=e,a=this.offlineRepo.db.RowContact;return Wn((async()=>{await a.count()===0&&(console.log("[RowContactDataService] Local DB empty, syncing from API..."),await this.syncDown());let u;if(r.length>0&&r[0].coloum_id){let{coloum_id:A,short_type:N}=r[0];u=a.orderBy(A),N==="desc"&&(u=u.reverse())}else u=a.toCollection();s.length>0&&(u=u.filter(A=>s.every(N=>{if(!N.parameter_code||!N.parameter_value)return!0;let R=N.parameter_value.toLowerCase();return String(A[N.parameter_code]||"").toLowerCase().includes(R)})));let p=await u.count(),m=Number(n),C=Number(i),x=(m-1)*C;return{data:await u.offset(x).limit(C).toArray(),total_records:p}})())}static \u0275fac=function(n){return new(n||t)(Dt(nv),Dt(Id))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var Uc=class t{handlers=new Map;isProcessing=!1;syncStateSubject=new Zl("PENDING");syncState$=this.syncStateSubject.asObservable();isOnline=xe(!0);logRepo=he(Id);platformId=he(Jo);constructor(){Rs(this.platformId)&&(this.isOnline.set(navigator.onLine),window.addEventListener("online",()=>this.handleConnectionChange(!0)),window.addEventListener("offline",()=>this.handleConnectionChange(!1))),ln(()=>{this.isOnline()&&this.processQueue()})}getPendingCount(){return Wn(this.logRepo.livePendingCount())}handleConnectionChange(e){this.isOnline.set(e),e?(console.log("[SyncManager] Online. Attempting sync..."),this.processQueue()):console.log("[SyncManager] Offline. Sync paused.")}registerHandler(e,n){this.handlers.set(e,n)}async processQueue(){if(!(this.isProcessing||!this.isOnline()))try{this.isProcessing=!0,this.syncStateSubject.next("IN_PROGRESS");let e=await this.logRepo.getPendingLogs();if(e.length===0){this.isProcessing=!1,this.syncStateSubject.next("COMPLETED");return}console.log(`[SyncManager] Processing ${e.length} pending operations...`);for(let i of e)await this.processLog(i);(await this.logRepo.getPendingLogs()).length>0?await this.processQueue():this.syncStateSubject.next("COMPLETED")}catch(e){console.error("[SyncManager] Queue processing error",e),this.syncStateSubject.next("FAILED")}finally{this.isProcessing=!1}}async processLog(e){let n=this.handlers.get(e.entityType);if(!n){console.warn(`[SyncManager] No handler registered for entity type: ${e.entityType}`);return}try{await this.logRepo.updateStatus(e.id,"IN_PROGRESS"),await n.sync(e.operation,e.data),await this.logRepo.updateStatus(e.id,"COMPLETED"),console.log(`[SyncManager] Synced log #${e.id} (${e.entityType} - ${e.operation})`)}catch(i){console.error(`[SyncManager] Failed to sync log #${e.id}`,i),await this.logRepo.updateStatus(e.id,"FAILED",i.message||"Unknown error")}}ngOnDestroy(){Rs(this.platformId)&&(window.removeEventListener("online",()=>{}),window.removeEventListener("offline",()=>{}))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};var r_=class t{constructor(e){this.syncManager=e;this.syncManager.registerHandler(this.ENTITY_TYPE,this)}ENTITY_TYPE="ROW_CONTACT";http=he(Td);MODULE_KEY="CONTACT";API_PATH="/RowContact";async sync(e,n){switch(e){case"CREATE":return ja(this.http.create(this.MODULE_KEY,n,this.API_PATH));case"UPDATE":return ja(this.http.update(this.MODULE_KEY,n,`${this.API_PATH}/${n.rowContactUniqueId}`));case"DELETE":return ja(this.http.delete(this.MODULE_KEY,n,`${this.API_PATH}/${n.rowContactUniqueId}`));case"SOFT_DELETE":return ja(this.http.updatePost(this.MODULE_KEY,Ht(xt({},n),{isDeleted:!0}),`${this.API_PATH}/${n.rowContactUniqueId}`));default:throw new Error(`Unsupported sync operation: ${e}`)}}static \u0275fac=function(n){return new(n||t)(Dt(Uc))};static \u0275prov=Fe({token:t,factory:t.\u0275fac,providedIn:"root"})};export{xt as a,Ht as b,Wi as c,tL as d,un as e,ji as f,Zl as g,Af as h,Wn as i,Li as j,RC as k,fL as l,tc as m,ni as n,CL as o,Ys as p,PC as q,Eu as r,bL as s,Mf as t,Ka as u,OC as v,Ya as w,nc as x,SL as y,DL as z,TL as A,HC as B,Mm as C,Ff as D,St as E,ws as F,Fe as G,Es as H,ML as I,Mt as J,Dt as K,he as L,tl as M,yr as N,Iu as O,Lr as P,Kn as Q,eo as R,yc as S,rr as T,Or as U,na as V,oO as W,xe as X,Eo as Y,lp as Z,al as _,O1 as $,Ei as aa,VI as ba,_5 as ca,sa as da,Z1 as ea,aa as fa,hn as ga,V4 as ha,pp as ia,jA as ja,KA as ka,Nt as la,la as ma,Rn as na,QA as oa,Uu as pa,BV as qa,XA as ra,Dc as sa,ca as ta,z as ua,G as va,ke as wa,ne as xa,oe as ya,Ce as za,Y as Aa,S8 as Ba,_2 as Ca,Ee as Da,K0 as Ea,D2 as Fa,ffe as Ga,Y8 as Ha,qu as Ia,k2 as Ja,N2 as Ka,Z8 as La,Ft as Ma,Vpe as Na,IB as Oa,n6 as Pa,i6 as Qa,ime as Ra,mM as Sa,HP as Ta};
