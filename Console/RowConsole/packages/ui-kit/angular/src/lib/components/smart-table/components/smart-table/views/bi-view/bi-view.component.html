@if (isLoading()) {
<div class="space-y-8 animate-pulse">
  <!-- KPI Skeletons -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    @for (item of [1, 2, 3]; track item) {
    <div class="bg-white p-6 rounded-lg shadow">
      <div class="h-4 bg-gray-300 rounded w-1/3 mb-4"></div>
      <div class="h-8 bg-gray-300 rounded w-1/2"></div>
    </div>
    }
  </div>
  <!-- Chart & Insights Skeletons -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow">
      <div class="h-6 bg-gray-300 rounded w-1/4 mb-6"></div>
      <div class="h-72 bg-gray-300 rounded"></div>
    </div>
    <div class="bg-white p-6 rounded-lg shadow">
      <div class="h-6 bg-gray-300 rounded w-1/3 mb-6"></div>
      <div class="space-y-4">
        <div class="h-4 bg-gray-300 rounded w-full"></div>
        <div class="h-4 bg-gray-300 rounded w-5/6"></div>
        <div class="h-4 bg-gray-300 rounded w-full"></div>
      </div>
    </div>
  </div>
</div>
} @else if (error()) {
<div class="flex flex-col items-center justify-center h-full text-center text-gray-500">
  <i class="pi pi-exclamation-triangle text-5xl text-red-500 mb-4"></i>
  <h3 class="text-xl font-semibold mb-2">Error</h3>
  <p>{{ error() }}</p>
</div>
} @else if (dashboardContent(); as dash) {
<div class="space-y-6">
  <!-- KPIs -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    @for(kpi of dash.kpis; track kpi.title) {
    <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
      <h3 class="text-sm font-medium text-gray-500 truncate">{{ kpi.title }}</h3>
      <p class="mt-1 text-3xl font-semibold tracking-tight text-gray-900">{{ kpi.value }}</p>
    </div>
    }
  </div>

  <!-- Chart & Insights -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Chart -->
    @if (dash.charts.length > 0) {
    @let chart = dash.charts[0];
    <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-md border border-gray-200">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">{{ chart.title }}</h3>
      <div appD3BarChart [data]="chart.data"></div>
    </div>
    }

    <!-- Insights -->
    <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">AI Insights</h3>
      <ul class="space-y-4">
        @for(insight of dash.insights; track insight) {
        <li class="flex items-start">
          <div class="flex-shrink-0">
            <i class="pi pi-check-circle text-green-500 mt-1"></i>
          </div>
          <p class="ml-3 text-sm text-gray-600">{{ insight }}</p>
        </li>
        }
      </ul>
    </div>
  </div>
</div>
}